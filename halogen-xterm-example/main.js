(()=>{var Gx=Object.create;var gb=Object.defineProperty;var jx=Object.getOwnPropertyDescriptor;var Jx=Object.getOwnPropertyNames;var Kx=Object.getPrototypeOf,Qx=Object.prototype.hasOwnProperty;var ht=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xx=(e,t,n,h)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of Jx(t))!Qx.call(e,v)&&v!==n&&gb(e,v,{get:()=>t[v],enumerable:!(h=jx(t,v))||h.enumerable});return e};var ra=(e,t,n)=>(n=e!=null?Gx(Kx(e)):{},Xx(t||!e||!e.__esModule?gb(n,"default",{value:e,enumerable:!0}):n,e));var u1=ht((_h,gy)=>{(function(e,t){typeof _h=="object"&&typeof gy=="object"?gy.exports=t():typeof define=="function"&&define.amd?define([],t):typeof _h=="object"?_h.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let h=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(h._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,h=n._renderService.dimensions;if(h.css.cell.width===0||h.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),p=Math.max(0,parseInt(s.getPropertyValue("width"))),i=window.getComputedStyle(this._terminal.element),r=a-(parseInt(i.getPropertyValue("padding-top"))+parseInt(i.getPropertyValue("padding-bottom"))),u=p-(parseInt(i.getPropertyValue("padding-right"))+parseInt(i.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(u/h.css.cell.width)),rows:Math.max(1,Math.floor(r/h.css.cell.height))}}}})(),e})())});var c1=ht((mh,yy)=>{(function(e,t){typeof mh=="object"&&typeof yy=="object"?yy.exports=t():typeof define=="function"&&define.amd?define([],t):typeof mh=="object"?mh.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,s,a){var p=this&&this.__decorate||function(D,g,C,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,C,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,C,M):E(g,C))||M);return T>3&&M&&Object.defineProperty(g,C,M),M};Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;let i=a(374),r=a(509),u=a(855),c=a(859),f=a(776),l=a(381),o=11,d=o*Float32Array.BYTES_PER_ELEMENT,_,m=0,y=0,b=0;class S extends c.Disposable{constructor(g,C,F){super(),this._terminal=g,this._gl=C,this._dimensions=F,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;r.TextureAtlas.maxAtlasPages===void 0&&(r.TextureAtlas.maxAtlasPages=Math.min(32,(0,i.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),r.TextureAtlas.maxTextureSize=(0,i.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,i.throwIfFalsy)((0,l.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let x="";for(let I=1;I<R;I++)x+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${x}
}`}(r.TextureAtlas.maxAtlasPages))),this.register((0,c.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,i.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,i.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,i.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=E.createBuffer();this.register((0,c.toDisposable)(()=>E.deleteBuffer(M))),E.bindBuffer(E.ARRAY_BUFFER,M),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),L=E.createBuffer();this.register((0,c.toDisposable)(()=>E.deleteBuffer(L))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,L),E.bufferData(E.ELEMENT_ARRAY_BUFFER,w,E.STATIC_DRAW),this._attributesBuffer=(0,i.throwIfFalsy)(E.createBuffer()),this.register((0,c.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,d,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,d,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,d,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,d,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,d,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,d,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let A=new Int32Array(r.TextureAtlas.maxAtlasPages);for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++)A[R]=R;E.uniform1iv(this._textureLocation,A),E.uniformMatrix4fv(this._projectionLocation,!1,l.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++){let x=new l.GLTexture((0,i.throwIfFalsy)(E.createTexture()));this.register((0,c.toDisposable)(()=>E.deleteTexture(x.texture))),E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,x.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=x}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,C,F,E,T,M,w,L){this._updateCell(this._vertices.attributes,g,C,F,E,T,M,w,L)}_updateCell(g,C,F,E,T,M,w,L,A){m=(F*this._terminal.cols+C)*o,E!==u.NULL_CELL_CODE&&E!==void 0?this._atlas&&(_=L&&L.length>1?this._atlas.getRasterizedGlyphCombinedChar(L,T,M,w,!1):this._atlas.getRasterizedGlyph(E,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==A&&_.offset.x>y?(b=_.offset.x-y,g[m]=-(_.offset.x-b)+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=(_.size.x-b)/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x+b/this._atlas.pages[_.texturePage].canvas.width,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x-b/this._atlas.pages[_.texturePage].canvas.width,g[m+8]=_.sizeClipSpace.y):(g[m]=-_.offset.x+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=_.size.x/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x,g[m+8]=_.sizeClipSpace.y)):g.fill(0,m,m+o-1-2)}clear(){let g=this._terminal,C=g.cols*g.rows*o;this._vertices.count!==C?this._vertices.attributes=new Float32Array(C):this._vertices.attributes.fill(0);let F=0;for(;F<this._vertices.attributesBuffers.length;F++)this._vertices.count!==C?this._vertices.attributesBuffers[F]=new Float32Array(C):this._vertices.attributesBuffers[F].fill(0);this._vertices.count=C,F=0;for(let E=0;E<g.rows;E++)for(let T=0;T<g.cols;T++)this._vertices.attributes[F+9]=T/g.cols,this._vertices.attributes[F+10]=E/g.rows,F+=o}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let C=this._gl;C.useProgram(this._program),C.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let F=this._vertices.attributesBuffers[this._activeBuffer],E=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*o,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*o);F.set(w,E),E+=w.length}C.bindBuffer(C.ARRAY_BUFFER,this._attributesBuffer),C.bufferData(C.ARRAY_BUFFER,F.subarray(0,E),C.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(C,this._atlas,T);C.drawElementsInstanced(C.TRIANGLE_STRIP,4,C.UNSIGNED_BYTE,0,E/o)}setAtlas(g){this._atlas=g;for(let C of this._atlasTextures)C.version=-1}_bindAtlasPageTexture(g,C,F){g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[F].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,C.pages[F].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[F].version=C.pages[F].version}setDimensions(g){this._dimensions=g}}s.GlyphRenderer=S,p([f.traceCall],S.prototype,"updateCell",null)},742:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;let p=a(374),i=a(859),r=a(310),u=a(381),c=8*Float32Array.BYTES_PER_ELEMENT;class f{constructor(){this.attributes=new Float32Array(160),this.count=0}}let l=0,o=0,d=0,_=0,m=0,y=0,b=0;class S extends i.Disposable{constructor(g,C,F,E){super(),this._terminal=g,this._gl=C,this._dimensions=F,this._themeService=E,this._vertices=new f,this._verticesCursor=new f;let T=this._gl;this._program=(0,p.throwIfFalsy)((0,u.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,i.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let L=new Uint8Array([0,1,2,3]),A=T.createBuffer();this.register((0,i.toDisposable)(()=>T.deleteBuffer(A))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,A),T.bufferData(T.ELEMENT_ARRAY_BUFFER,L,T.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(T.createBuffer()),this.register((0,i.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,c,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,c,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,c,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(E.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let C=this._gl;C.useProgram(this._program),C.bindVertexArray(this._vertexArrayObject),C.uniformMatrix4fv(this._projectionLocation,!1,u.PROJECTION_MATRIX),C.bindBuffer(C.ARRAY_BUFFER,this._attributesBuffer),C.bufferData(C.ARRAY_BUFFER,g.attributes,C.DYNAMIC_DRAW),C.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,C.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let C=this._terminal,F=this._vertices,E,T,M,w,L,A,R,x,I,$,k,H=1;for(E=0;E<C.rows;E++){for(M=-1,w=0,L=0,A=!1,T=0;T<C.cols;T++)R=(E*C.cols+T)*r.RENDER_MODEL_INDICIES_PER_CELL,x=g.cells[R+r.RENDER_MODEL_BG_OFFSET],I=g.cells[R+r.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(x!==w||I!==L&&(A||$))&&((w!==0||A&&L!==0)&&(k=8*H++,this._updateRectangle(F,k,L,w,M,T,E)),M=T,w=x,L=I,A=$);(w!==0||A&&L!==0)&&(k=8*H++,this._updateRectangle(F,k,L,w,M,C.cols,E))}F.count=H}updateCursor(g){let C=this._verticesCursor,F=g.cursor;if(!F||F.style==="block")return void(C.count=0);let E,T=0;F.style!=="bar"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.style==="bar"?F.dpr*F.cursorWidth:F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),F.style!=="underline"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,(F.y+1)*this._dimensions.device.cell.height-F.dpr,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat)),F.style==="outline"&&(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat),E=8*T++,this._addRectangleFloat(C.attributes,E,(F.x+F.width)*this._dimensions.device.cell.width-F.dpr,F.y*this._dimensions.device.cell.height,F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),C.count=T}_updateRectangle(g,C,F,E,T,M,w){if(67108864&F)switch(50331648&F){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:l=(16777215&F)<<8;break;default:l=this._themeService.colors.foreground.rgba}else switch(50331648&E){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:l=(16777215&E)<<8;break;default:l=this._themeService.colors.background.rgba}g.attributes.length<C+4&&(g.attributes=(0,u.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),o=T*this._dimensions.device.cell.width,d=w*this._dimensions.device.cell.height,_=(l>>24&255)/255,m=(l>>16&255)/255,y=(l>>8&255)/255,b=1,this._addRectangle(g.attributes,C,o,d,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,_,m,y,b)}_addRectangle(g,C,F,E,T,M,w,L,A,R){g[C]=F/this._dimensions.device.canvas.width,g[C+1]=E/this._dimensions.device.canvas.height,g[C+2]=T/this._dimensions.device.canvas.width,g[C+3]=M/this._dimensions.device.canvas.height,g[C+4]=w,g[C+5]=L,g[C+6]=A,g[C+7]=R}_addRectangleFloat(g,C,F,E,T,M,w){g[C]=F/this._dimensions.device.canvas.width,g[C+1]=E/this._dimensions.device.canvas.height,g[C+2]=T/this._dimensions.device.canvas.width,g[C+3]=M/this._dimensions.device.canvas.height,g[C+4]=w[0],g[C+5]=w[1],g[C+6]=w[2],g[C+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}s.RectangleRenderer=S},310:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;let p=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,p.createSelectionRenderModel)()}resize(i,r){let u=i*r*s.RENDER_MODEL_INDICIES_PER_CELL;u!==this.cells.length&&(this.cells=new Uint32Array(u),this.lineLengths=new Uint32Array(r))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,s,a){var p=this&&this.__decorate||function(M,w,L,A){var R,x=arguments.length,I=x<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,L):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,L,A);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(x<3?R(I):x>3?R(w,L,I):R(w,L))||I);return x>3&&I&&Object.defineProperty(w,L,I),I};Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;let i=a(820),r=a(274),u=a(627),c=a(457),f=a(56),l=a(374),o=a(345),d=a(859),_=a(147),m=a(782),y=a(855),b=a(776),S=a(965),D=a(742),g=a(310),C=a(733);class F extends d.Disposable{constructor(w,L,A,R,x,I,$,k,H){super(),this._terminal=w,this._characterJoinerService=L,this._charSizeService=A,this._coreBrowserService=R,this._coreService=x,this._decorationService=I,this._optionsService=$,this._themeService=k,this._cursorBlinkStateManager=new d.MutableDisposable,this._charAtlasDisposable=this.register(new d.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new d.MutableDisposable),this._glyphRenderer=this.register(new d.MutableDisposable),this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new r.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new C.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,l.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:H};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextlost",q=>{console.log("webglcontextlost event received"),q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(q)},3e3)})),this.register((0,i.addDisposableDomListener)(this._canvas,"webglcontextrestored",q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,u.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,f.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(q,N)=>this._setCanvasDevicePixelDimensions(q,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,d.toDisposable)(()=>{var q;for(let N of this._renderLayers)N.dispose();(q=this._canvas.parentElement)===null||q===void 0||q.removeChild(this._canvas),(0,u.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,L){var A,R,x,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(A=this._rectangleRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(x=this._glyphRenderer.value)===null||x===void 0||x.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let L of this._renderLayers)L.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let L of this._renderLayers)L.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,L,A){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,L,A);this._model.selection.update(this._terminal,w,L,A),this._requestRedrawViewport()}handleCursorMove(){var w;for(let L of this._renderLayers)L.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let L=(0,u.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==L&&(this._onChangeTextureAtlas.fire(L.pages[0].canvas),this._charAtlasDisposable.value=(0,d.getDisposeArrayDisposable)([(0,o.forwardEvent)(L.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,o.forwardEvent)(L.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=L,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var L;this._model.clear(),w&&((L=this._glyphRenderer.value)===null||L===void 0||L.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let L of this._renderLayers)L.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,L){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let A of this._renderLayers)A.handleGridChanged(this._terminal,w,L);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,L),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new c.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,L){let A=this._core,R,x,I,$,k,H,U,q,N,K,O,B,W,P=this._workCell;w=T(w,A.rows-1,0),L=T(L,A.rows-1,0);let Q=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,G=Math.min(this._terminal.buffer.active.cursorX,A.cols-1),ve=-1,Ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ye=!1;for(x=w;x<=L;x++)for(I=x+A.buffer.ydisp,$=A.buffer.lines.get(I),this._model.lineLengths[x]=0,k=this._characterJoinerService.getJoinedCharacters(I),B=0;B<A.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,P),B===0&&(R=this._cellColorResolver.result.bg),H=!1,U=B,k.length>0&&B===k[0][0]&&(H=!0,q=k.shift(),P=new E(P,$.translateToString(!0,q[0],q[1]),q[1]-q[0]),U=q[1]-1),N=P.getChars(),K=P.getCode(),O=(x*A.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(P,B,I),Ee&&I===Q&&(B===G&&(this._model.cursor={x:G,y:this._terminal.buffer.active.cursorY,width:P.getWidth(),style:this._coreBrowserService.isFocused?A.options.cursorStyle||"block":A.options.cursorInactiveStyle,cursorWidth:A.options.cursorWidth,dpr:this._devicePixelRatio},ve=G+P.getWidth()-1),B>=G&&B<=ve&&(this._coreBrowserService.isFocused&&(A.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&A.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),K!==y.NULL_CELL_CODE&&(this._model.lineLengths[x]=B+1),(this._model.cells[O]!==K||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ye=!0,N.length>1&&(K|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=K,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,x,K,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),H))for(P=this._workCell,B++;B<U;B++)W=(x*A.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,x,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[W]=y.NULL_CELL_CODE,this._model.cells[W+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[W+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[W+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ye&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,L){this._canvas.width===w&&this._canvas.height===L||(this._canvas.width=w,this._canvas.height=L,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}s.WebglRenderer=F,p([b.traceCall],F.prototype,"renderRows",null);class E extends _.AttributeData{constructor(w,L,A){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=L,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,L=0){return Math.max(Math.min(M,w),L)}s.JoinedCellData=E},381:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;let p=a(374);function i(r,u,c){let f=(0,p.throwIfFalsy)(r.createShader(u));if(r.shaderSource(f,c),r.compileShader(f),r.getShaderParameter(f,r.COMPILE_STATUS))return f;console.error(r.getShaderInfoLog(f)),r.deleteShader(f)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(r,u,c){let f=(0,p.throwIfFalsy)(r.createProgram());if(r.attachShader(f,(0,p.throwIfFalsy)(i(r,r.VERTEX_SHADER,u))),r.attachShader(f,(0,p.throwIfFalsy)(i(r,r.FRAGMENT_SHADER,c))),r.linkProgram(f),r.getProgramParameter(f,r.LINK_STATUS))return f;console.error(r.getProgramInfoLog(f)),r.deleteProgram(f)},s.createShader=i,s.expandFloat32Array=function(r,u){let c=Math.min(2*r.length,u),f=new Float32Array(c);for(let l=0;l<r.length;l++)f[l]=r[l];return f},s.GLTexture=class{constructor(r){this.texture=r,this.version=-1}}},592:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;let p=a(627),i=a(237),r=a(374),u=a(859);class c extends u.Disposable{constructor(l,o,d,_,m,y,b,S){super(),this._container=o,this._alpha=m,this._coreBrowserService=y,this._optionsService=b,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${d}-layer`),this._canvas.style.zIndex=_.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(l,D),this.reset(l)})),this.register((0,u.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,r.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(l){}handleFocus(l){}handleCursorMove(l){}handleGridChanged(l,o,d){}handleSelectionChanged(l,o,d,_=!1){}_setTransparency(l,o){if(o===this._alpha)return;let d=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,d),this._refreshCharAtlas(l,this._themeService.colors),this.handleGridChanged(l,0,l.rows-1)}_refreshCharAtlas(l,o){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,p.acquireTextureAtlas)(l,this._optionsService.rawOptions,o,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(l,o){this._deviceCellWidth=o.device.cell.width,this._deviceCellHeight=o.device.cell.height,this._deviceCharWidth=o.device.char.width,this._deviceCharHeight=o.device.char.height,this._deviceCharLeft=o.device.char.left,this._deviceCharTop=o.device.char.top,this._canvas.width=o.device.canvas.width,this._canvas.height=o.device.canvas.height,this._canvas.style.width=`${o.css.canvas.width}px`,this._canvas.style.height=`${o.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(l,this._themeService.colors)}_fillBottomLineAtCells(l,o,d=1){this._ctx.fillRect(l*this._deviceCellWidth,(o+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,d*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(l,o,d,_){this._alpha?this._ctx.clearRect(l*this._deviceCellWidth,o*this._deviceCellHeight,d*this._deviceCellWidth,_*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(l*this._deviceCellWidth,o*this._deviceCellHeight,d*this._deviceCellWidth,_*this._deviceCellHeight))}_fillCharTrueColor(l,o,d,_){this._ctx.font=this._getFont(l,!1,!1),this._ctx.textBaseline=i.TEXT_BASELINE,this._clipCell(d,_,o.getWidth()),this._ctx.fillText(o.getChars(),d*this._deviceCellWidth+this._deviceCharLeft,_*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(l,o,d){this._ctx.beginPath(),this._ctx.rect(l*this._deviceCellWidth,o*this._deviceCellHeight,d*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(l,o,d){return`${d?"italic":""} ${o?l.options.fontWeightBold:l.options.fontWeight} ${l.options.fontSize*this._coreBrowserService.dpr}px ${l.options.fontFamily}`}}s.BaseRenderLayer=c},733:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;let p=a(197),i=a(237),r=a(592);class u extends r.BaseRenderLayer{constructor(f,l,o,d,_,m,y){super(o,f,"link",l,!0,_,m,y),this.register(d.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(d.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(f,l){super.resize(f,l),this._state=void 0}reset(f){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(f){if(f.fg===i.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:f.fg!==void 0&&(0,p.is256Color)(f.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[f.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(let l=f.y1+1;l<f.y2;l++)this._fillBottomLineAtCells(0,l,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f}_handleHideLinkUnderline(f){this._clearCurrentLink()}}s.LinkRenderLayer=u},820:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,p,i,r){a.addEventListener(p,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(p,i,r))}}}},274:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,p=0,i=0,r=!1,u=!1,c=!1;s.CellColorResolver=class{constructor(f,l,o,d,_){this._terminal=f,this._selectionRenderModel=l,this._decorationService=o,this._coreBrowserService=d,this._themeService=_,this.result={fg:0,bg:0,ext:0}}resolve(f,l,o){this.result.bg=f.bg,this.result.fg=f.fg,this.result.ext=268435456&f.bg?f.extended.ext:0,i=0,p=0,u=!1,r=!1,c=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(l,o,"bottom",d=>{d.backgroundColorRGB&&(i=d.backgroundColorRGB.rgba>>8&16777215,u=!0),d.foregroundColorRGB&&(p=d.foregroundColorRGB.rgba>>8&16777215,r=!0)}),c=this._selectionRenderModel.isCellSelected(this._terminal,l,o),c&&(i=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,u=!0,a.selectionForeground&&(p=a.selectionForeground.rgba>>8&16777215,r=!0)),this._decorationService.forEachDecorationAtCell(l,o,"top",d=>{d.backgroundColorRGB&&(i=d.backgroundColorRGB.rgba>>8&16777215,u=!0),d.foregroundColorRGB&&(p=d.foregroundColorRGB.rgba>>8&16777215,r=!0)}),u&&(i=c?-16777216&f.bg&-134217729|i|50331648:-16777216&f.bg|i|50331648),r&&(p=-16777216&f.fg&-67108865|p|50331648),67108864&this.result.fg&&(u&&!r&&(p=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,r=!0),!u&&r&&(i=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,u=!0)),a=void 0,this.result.bg=u?i:this.result.bg,this.result.fg=r?p:this.result.fg}}},627:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;let p=a(509),i=a(197),r=[];s.acquireTextureAtlas=function(u,c,f,l,o,d,_,m){let y=(0,i.generateConfig)(l,o,d,_,c,f,m);for(let D=0;D<r.length;D++){let g=r[D],C=g.ownedBy.indexOf(u);if(C>=0){if((0,i.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),r.splice(D,1)):g.ownedBy.splice(C,1);break}}for(let D=0;D<r.length;D++){let g=r[D];if((0,i.configEquals)(g.config,y))return g.ownedBy.push(u),g.atlas}let b=u._core,S={atlas:new p.TextureAtlas(document,y,b.unicodeService),config:y,ownedBy:[u]};return r.push(S),S.atlas},s.removeTerminalFromCache=function(u){for(let c=0;c<r.length;c++){let f=r[c].ownedBy.indexOf(u);if(f!==-1){r[c].ownedBy.length===1?(r[c].atlas.dispose(),r.splice(c,1)):r[c].ownedBy.splice(f,1);break}}}},197:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;let p=a(160);s.generateConfig=function(i,r,u,c,f,l,o){let d={foreground:l.foreground,background:l.background,cursor:p.NULL_COLOR,cursorAccent:p.NULL_COLOR,selectionForeground:p.NULL_COLOR,selectionBackgroundTransparent:p.NULL_COLOR,selectionBackgroundOpaque:p.NULL_COLOR,selectionInactiveBackgroundTransparent:p.NULL_COLOR,selectionInactiveBackgroundOpaque:p.NULL_COLOR,ansi:l.ansi.slice(),contrastCache:l.contrastCache,halfContrastCache:l.halfContrastCache};return{customGlyphs:f.customGlyphs,devicePixelRatio:o,letterSpacing:f.letterSpacing,lineHeight:f.lineHeight,deviceCellWidth:i,deviceCellHeight:r,deviceCharWidth:u,deviceCharHeight:c,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,drawBoldTextInBrightColors:f.drawBoldTextInBrightColors,minimumContrastRatio:f.minimumContrastRatio,colors:d}},s.configEquals=function(i,r){for(let u=0;u<i.colors.ansi.length;u++)if(i.colors.ansi[u].rgba!==r.colors.ansi[u].rgba)return!1;return i.devicePixelRatio===r.devicePixelRatio&&i.customGlyphs===r.customGlyphs&&i.lineHeight===r.lineHeight&&i.letterSpacing===r.letterSpacing&&i.fontFamily===r.fontFamily&&i.fontSize===r.fontSize&&i.fontWeight===r.fontWeight&&i.fontWeightBold===r.fontWeightBold&&i.allowTransparency===r.allowTransparency&&i.deviceCharWidth===r.deviceCharWidth&&i.deviceCharHeight===r.deviceCharHeight&&i.drawBoldTextInBrightColors===r.drawBoldTextInBrightColors&&i.minimumContrastRatio===r.minimumContrastRatio&&i.colors.foreground.rgba===r.colors.foreground.rgba&&i.colors.background.rgba===r.colors.background.rgba},s.is256Color=function(i){return(50331648&i)==16777216||(50331648&i)==33554432}},237:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let p=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},457:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorBlinkStateManager=void 0,s.CursorBlinkStateManager=class{constructor(a,p){this._renderCallback=a,this._coreBrowserService=p,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,p>0)return void this._restartInterval(p)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(p)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;let p=a(374);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let i={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(l,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2551":{1:(l,o)=>`M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u2552":{1:(l,o)=>`M.5,1 L.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u2553":{1:(l,o)=>`M${.5-l},1 L${.5-l},.5 L1,.5 M${.5+l},.5 L${.5+l},1`},"\u2554":{1:(l,o)=>`M1,${.5-o} L${.5-l},${.5-o} L${.5-l},1 M1,${.5+o} L${.5+l},${.5+o} L${.5+l},1`},"\u2555":{1:(l,o)=>`M0,${.5-o} L.5,${.5-o} L.5,1 M0,${.5+o} L.5,${.5+o}`},"\u2556":{1:(l,o)=>`M${.5+l},1 L${.5+l},.5 L0,.5 M${.5-l},.5 L${.5-l},1`},"\u2557":{1:(l,o)=>`M0,${.5+o} L${.5-l},${.5+o} L${.5-l},1 M0,${.5-o} L${.5+l},${.5-o} L${.5+l},1`},"\u2558":{1:(l,o)=>`M.5,0 L.5,${.5+o} L1,${.5+o} M.5,${.5-o} L1,${.5-o}`},"\u2559":{1:(l,o)=>`M1,.5 L${.5-l},.5 L${.5-l},0 M${.5+l},.5 L${.5+l},0`},"\u255A":{1:(l,o)=>`M1,${.5-o} L${.5+l},${.5-o} L${.5+l},0 M1,${.5+o} L${.5-l},${.5+o} L${.5-l},0`},"\u255B":{1:(l,o)=>`M0,${.5+o} L.5,${.5+o} L.5,0 M0,${.5-o} L.5,${.5-o}`},"\u255C":{1:(l,o)=>`M0,.5 L${.5+l},.5 L${.5+l},0 M${.5-l},.5 L${.5-l},0`},"\u255D":{1:(l,o)=>`M0,${.5-o} L${.5-l},${.5-o} L${.5-l},0 M0,${.5+o} L${.5+l},${.5+o} L${.5+l},0`},"\u255E":{1:(l,o)=>`M.5,0 L.5,1 M.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u255F":{1:(l,o)=>`M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1 M${.5+l},.5 L1,.5`},"\u2560":{1:(l,o)=>`M${.5-l},0 L${.5-l},1 M1,${.5+o} L${.5+l},${.5+o} L${.5+l},1 M1,${.5-o} L${.5+l},${.5-o} L${.5+l},0`},"\u2561":{1:(l,o)=>`M.5,0 L.5,1 M0,${.5-o} L.5,${.5-o} M0,${.5+o} L.5,${.5+o}`},"\u2562":{1:(l,o)=>`M0,.5 L${.5-l},.5 M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u2563":{1:(l,o)=>`M${.5+l},0 L${.5+l},1 M0,${.5+o} L${.5-l},${.5+o} L${.5-l},1 M0,${.5-o} L${.5-l},${.5-o} L${.5-l},0`},"\u2564":{1:(l,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o} M.5,${.5+o} L.5,1`},"\u2565":{1:(l,o)=>`M0,.5 L1,.5 M${.5-l},.5 L${.5-l},1 M${.5+l},.5 L${.5+l},1`},"\u2566":{1:(l,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L${.5-l},${.5+o} L${.5-l},1 M1,${.5+o} L${.5+l},${.5+o} L${.5+l},1`},"\u2567":{1:(l,o)=>`M.5,0 L.5,${.5-o} M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2568":{1:(l,o)=>`M0,.5 L1,.5 M${.5-l},.5 L${.5-l},0 M${.5+l},.5 L${.5+l},0`},"\u2569":{1:(l,o)=>`M0,${.5+o} L1,${.5+o} M0,${.5-o} L${.5-l},${.5-o} L${.5-l},0 M1,${.5-o} L${.5+l},${.5-o} L${.5+l},0`},"\u256A":{1:(l,o)=>`M.5,0 L.5,1 M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u256B":{1:(l,o)=>`M0,.5 L1,.5 M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u256C":{1:(l,o)=>`M0,${.5+o} L${.5-l},${.5+o} L${.5-l},1 M1,${.5+o} L${.5+l},${.5+o} L${.5+l},1 M0,${.5-o} L${.5-l},${.5-o} L${.5-l},0 M1,${.5-o} L${.5+l},${.5-o} L${.5+l},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(l,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,1,.5`},"\u256E":{1:(l,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,0,.5`},"\u256F":{1:(l,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,0,.5`},"\u2570":{1:(l,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions["\uE0BB"]=s.powerlineDefinitions["\uE0BD"],s.powerlineDefinitions["\uE0BF"]=s.powerlineDefinitions["\uE0B9"],s.tryDrawCustomChar=function(l,o,d,_,m,y,b,S){let D=s.blockElementDefinitions[o];if(D)return function(E,T,M,w,L,A){for(let R=0;R<T.length;R++){let x=T[R],I=L/8,$=A/8;E.fillRect(M+x.x*I,w+x.y*$,x.w*I,x.h*$)}}(l,D,d,_,m,y),!0;let g=i[o];if(g)return function(E,T,M,w,L,A){let R=r.get(T);R||(R=new Map,r.set(T,R));let x=E.fillStyle;if(typeof x!="string")throw new Error(`Unexpected fillStyle type "${x}"`);let I=R.get(x);if(!I){let $=T[0].length,k=T.length,H=document.createElement("canvas");H.width=$,H.height=k;let U=(0,p.throwIfFalsy)(H.getContext("2d")),q=new ImageData($,k),N,K,O,B;if(x.startsWith("#"))N=parseInt(x.slice(1,3),16),K=parseInt(x.slice(3,5),16),O=parseInt(x.slice(5,7),16),B=x.length>7&&parseInt(x.slice(7,9),16)||1;else{if(!x.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${x}" when drawing pattern glyph`);[N,K,O,B]=x.substring(5,x.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<k;W++)for(let P=0;P<$;P++)q.data[4*(W*$+P)]=N,q.data[4*(W*$+P)+1]=K,q.data[4*(W*$+P)+2]=O,q.data[4*(W*$+P)+3]=T[W][P]*(255*B);U.putImageData(q,0,0),I=(0,p.throwIfFalsy)(E.createPattern(H,null)),R.set(x,I)}E.fillStyle=I,E.fillRect(M,w,L,A)}(l,g,d,_,m,y),!0;let C=s.boxDrawingDefinitions[o];if(C)return function(E,T,M,w,L,A,R){E.strokeStyle=E.fillStyle;for(let[x,I]of Object.entries(T)){let $;E.beginPath(),E.lineWidth=R*Number.parseInt(x),$=typeof I=="function"?I(.15,.15/A*L):I;for(let k of $.split(" ")){let H=k[0],U=c[H];if(!U){console.error(`Could not find drawing instructions for "${H}"`);continue}let q=k.substring(1).split(",");q[0]&&q[1]&&U(E,f(q,L,A,M,w,!0,R))}E.stroke(),E.closePath()}}(l,C,d,_,m,y,S),!0;let F=s.powerlineDefinitions[o];return!!F&&(function(E,T,M,w,L,A,R,x){var I,$;let k=new Path2D;k.rect(M,w,L,A),E.clip(k),E.beginPath();let H=R/12;E.lineWidth=x*H;for(let U of T.d.split(" ")){let q=U[0],N=c[q];if(!N){console.error(`Could not find drawing instructions for "${q}"`);continue}let K=U.substring(1).split(",");K[0]&&K[1]&&N(E,f(K,L,A,M,w,!1,x,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(H/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(H/2)))}T.type===1?(E.strokeStyle=E.fillStyle,E.stroke()):E.fill(),E.closePath()}(l,F,d,_,m,y,b,S),!0)};let r=new Map;function u(l,o,d=0){return Math.max(Math.min(l,o),d)}let c={C:(l,o)=>l.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]),L:(l,o)=>l.lineTo(o[0],o[1]),M:(l,o)=>l.moveTo(o[0],o[1])};function f(l,o,d,_,m,y,b,S=0,D=0){let g=l.map(C=>parseFloat(C)||parseInt(C));if(g.length<2)throw new Error("Too few arguments for instruction");for(let C=0;C<g.length;C+=2)g[C]*=o-S*b-D*b,y&&g[C]!==0&&(g[C]=u(Math.round(g[C]+.5)-.5,o,0)),g[C]+=_+S*b;for(let C=1;C<g.length;C+=2)g[C]*=d,y&&g[C]!==0&&(g[C]=u(Math.round(g[C]+.5)-.5,d,0)),g[C]+=m;return g}},56:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;let p=a(859);s.observeDevicePixelDimensions=function(i,r,u){let c=new r.ResizeObserver(f=>{let l=f.find(_=>_.target===i);if(!l)return;if(!("devicePixelContentBoxSize"in l))return c?.disconnect(),void(c=void 0);let o=l.devicePixelContentBoxSize[0].inlineSize,d=l.devicePixelContentBoxSize[0].blockSize;o>0&&d>0&&u(o,d)});try{c.observe(i,{box:["device-pixel-content-box"]})}catch{c.disconnect(),c=void 0}return(0,p.toDisposable)(()=>c?.disconnect())}},374:(v,s)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},s.excludeFromContrastRatioDemands=function(p){return a(p)||function(i){return 9472<=i&&i<=9631}(p)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(i,r,u,c=!1){if(this.selectionStart=r,this.selectionEnd=u,!r||!u||r[0]===u[0]&&r[1]===u[1])return void this.clear();let f=r[1]-i.buffer.active.viewportY,l=u[1]-i.buffer.active.viewportY,o=Math.max(f,0),d=Math.min(l,i.rows-1);o>=i.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=c,this.viewportStartRow=f,this.viewportEndRow=l,this.viewportCappedStartRow=o,this.viewportCappedEndRow=d,this.startCol=r[0],this.endCol=u[0])}isCellSelected(i,r,u){return!!this.hasSelection&&(u-=i.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?r>=this.startCol&&u>=this.viewportCappedStartRow&&r<this.endCol&&u<=this.viewportCappedEndRow:r<this.startCol&&u>=this.viewportCappedStartRow&&r>=this.endCol&&u<=this.viewportCappedEndRow:u>this.viewportStartRow&&u<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportEndRow&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&u===this.viewportStartRow&&r>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:function(v,s,a){var p=this&&this.__decorate||function(F,E,T,M){var w,L=arguments.length,A=L<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(F,E,T,M);else for(var R=F.length-1;R>=0;R--)(w=F[R])&&(A=(L<3?w(A):L>3?w(E,T,A):w(E,T))||A);return L>3&&A&&Object.defineProperty(E,T,A),A};Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;let i=a(237),r=a(860),u=a(374),c=a(160),f=a(345),l=a(485),o=a(385),d=a(147),_=a(855),m=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},b;class S{get pages(){return this._pages}constructor(E,T,M){this._document=E,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new l.FourKeyMap,this._cacheMapCombined=new l.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new d.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new f.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new f.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=C(E,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,u.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let E of this.pages)E.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let E=new o.IdleTaskQueue;for(let T=33;T<126;T++)E.enqueue(()=>{if(!this._cacheMap.get(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT)){let M=this._drawToCache(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT);this._cacheMap.set(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let E of this._pages)E.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(S.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let L=T.slice(M,M+4),A=L.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-L.length,x=this._mergePages(L,R);x.version++;for(let I=A.length-1;I>=0;I--)this._deletePage(A[I]);this.pages.push(x),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(x.canvas)}let E=new D(this._document,this._textureSize);return this._pages.push(E),this._activePages.push(E),this._onAddTextureAtlasCanvas.fire(E.canvas),E}_mergePages(E,T){let M=2*E[0].canvas.width,w=new D(this._document,M,E);for(let[L,A]of E.entries()){let R=L*A.canvas.width%M,x=Math.floor(L/2)*A.canvas.height;w.ctx.drawImage(A.canvas,R,x);for(let $ of A.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=x,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(A.canvas);let I=this._activePages.indexOf(A);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(E){this._pages.splice(E,1);for(let T=E;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(E,T,M,w,L){return this._getFromCacheMap(this._cacheMapCombined,E,T,M,w,L)}getRasterizedGlyph(E,T,M,w,L){return this._getFromCacheMap(this._cacheMap,E,T,M,w,L)}_getFromCacheMap(E,T,M,w,L,A=!1){return b=E.get(T,M,w,L),b||(b=this._drawToCache(T,M,w,L,A),E.set(T,M,w,L,b)),b}_getColorFromAnsiIndex(E){if(E>=this._config.colors.ansi.length)throw new Error("No color found for idx "+E);return this._config.colors.ansi[E]}_getBackgroundColor(E,T,M,w){if(this._config.allowTransparency)return c.NULL_COLOR;let L;switch(E){case 16777216:case 33554432:L=this._getColorFromAnsiIndex(T);break;case 50331648:let A=d.AttributeData.toColorRGB(T);L=c.rgba.toColor(A[0],A[1],A[2]);break;default:L=M?c.color.opaque(this._config.colors.foreground):this._config.colors.background}return L}_getForegroundColor(E,T,M,w,L,A,R,x,I,$){let k=this._getMinimumContrastColor(E,T,M,w,L,A,!1,I,x,$);if(k)return k;let H;switch(L){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&A<8&&(A+=8),H=this._getColorFromAnsiIndex(A);break;case 50331648:let U=d.AttributeData.toColorRGB(A);H=c.rgba.toColor(U[0],U[1],U[2]);break;default:H=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(H=c.color.opaque(H)),x&&(H=c.color.multiplyOpacity(H,i.DIM_OPACITY)),H}_resolveBackgroundRgba(E,T,M){switch(E){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(E,T,M,w){switch(E){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(E,T,M,w,L,A,R,x,I,$){if(this._config.minimumContrastRatio===1||$)return;let k=this._getContrastCache(I),H=k.getColor(E,w);if(H!==void 0)return H||void 0;let U=this._resolveBackgroundRgba(T,M,R),q=this._resolveForegroundRgba(L,A,R,x),N=c.rgba.ensureContrastRatio(U,q,this._config.minimumContrastRatio/(I?2:1));if(!N)return void k.setColor(E,w,null);let K=c.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return k.setColor(E,w,K),K}_getContrastCache(E){return E?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(E,T,M,w,L=!1){let A=typeof E=="number"?String.fromCharCode(E):E,R=Math.min(this._config.deviceCellWidth*Math.max(A.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let x=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<x&&(this._tmpCanvas.height=x),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),H=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),q=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),K=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),W=this._workAttributeData.getBgColorMode();if($){let ne=K;K=B,B=ne;let j=O;O=W,W=j}let P=this._getBackgroundColor(W,B,$,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let Q=I?this._config.fontWeightBold:this._config.fontWeight,G=H?"italic":"";this._tmpCtx.font=`${G} ${Q} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=i.TEXT_BASELINE;let ve=A.length===1&&(0,u.isPowerlineGlyph)(A.charCodeAt(0)),Ee=A.length===1&&(0,u.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),ye=this._getForegroundColor(T,W,B,M,O,K,$,k,I,(0,u.excludeFromContrastRatioDemands)(A.charCodeAt(0)));this._tmpCtx.fillStyle=ye.css;let ie=Ee?0:4,Ce=!1;this._config.customGlyphs!==!1&&(Ce=(0,r.tryDrawCustomChar)(this._tmpCtx,A,ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let Dt,Vt=!ve;if(Dt=typeof E=="number"?this._unicodeService.wcwidth(E):this._unicodeService.getStringCellWidth(E),U){this._tmpCtx.save();let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ne%2==1?.5:0;if(this._tmpCtx.lineWidth=ne,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Vt=!1,this._tmpCtx.strokeStyle=`rgb(${d.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Vt=!1;let st=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&st<8&&(st+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(st).css}this._tmpCtx.beginPath();let re=ie,le=Math.ceil(ie+this._config.deviceCharHeight)-j-(L?2*ne:0),Pe=le+ne,tt=le+2*ne;for(let st=0;st<Dt;st++){this._tmpCtx.save();let qe=re+st*this._config.deviceCellWidth,bt=re+(st+1)*this._config.deviceCellWidth,Ut=qe+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(qe,le),this._tmpCtx.lineTo(bt,le),this._tmpCtx.moveTo(qe,tt),this._tmpCtx.lineTo(bt,tt);break;case 3:let Ct=ne<=1?tt:Math.ceil(ie+this._config.deviceCharHeight-ne/2)-j,En=ne<=1?le:Math.ceil(ie+this._config.deviceCharHeight+ne/2)-j,Va=new Path2D;Va.rect(qe,le,this._config.deviceCellWidth,tt-le),this._tmpCtx.clip(Va),this._tmpCtx.moveTo(qe-this._config.deviceCellWidth/2,Pe),this._tmpCtx.bezierCurveTo(qe-this._config.deviceCellWidth/2,En,qe,En,qe,Pe),this._tmpCtx.bezierCurveTo(qe,Ct,Ut,Ct,Ut,Pe),this._tmpCtx.bezierCurveTo(Ut,En,bt,En,bt,Pe),this._tmpCtx.bezierCurveTo(bt,Ct,bt+this._config.deviceCellWidth/2,Ct,bt+this._config.deviceCellWidth/2,Pe);break;case 4:this._tmpCtx.setLineDash([Math.round(ne),Math.round(ne)]),this._tmpCtx.moveTo(qe,le),this._tmpCtx.lineTo(bt,le);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(qe,le),this._tmpCtx.lineTo(bt,le);break;default:this._tmpCtx.moveTo(qe,le),this._tmpCtx.lineTo(bt,le)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Ce&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let st=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in st&&st.actualBoundingBoxDescent>0){this._tmpCtx.save();let qe=new Path2D;qe.rect(re,le-Math.ceil(ne/2),this._config.deviceCellWidth*Dt,tt-le+Math.ceil(ne/2)),this._tmpCtx.clip(qe),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(A,ie,ie+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ne%2==1?.5:0;this._tmpCtx.lineWidth=ne,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ie,ie+j),this._tmpCtx.lineTo(ie+this._config.deviceCharWidth*Dt,ie+j),this._tmpCtx.stroke()}if(Ce||this._tmpCtx.fillText(A,ie,ie+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let ne=g(this._tmpCtx.getImageData(ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ye,Vt);if(ne)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,ie,ie+this._config.deviceCharHeight-j),ne=g(this._tmpCtx.getImageData(ie,ie,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ye,Vt),ne);j++);}if(q){let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ne,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ie,ie+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(ie+this._config.deviceCharWidth*Dt,ie+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Ot=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Ye;if(Ye=this._config.allowTransparency?function(ne){for(let j=0;j<ne.data.length;j+=4)if(ne.data[j+3]>0)return!1;return!0}(Ot):g(Ot,P,ye,Vt),Ye)return y;let ue=this._findGlyphBoundingBox(Ot,this._workBoundingBox,R,Ee,Ce,ie),he,se;for(;;){if(this._activePages.length===0){let ne=this._createNewPage();he=ne,se=ne.currentRow,se.height=ue.size.y;break}he=this._activePages[this._activePages.length-1],se=he.currentRow;for(let ne of this._activePages)ue.size.y<=ne.currentRow.height&&(he=ne,se=ne.currentRow);for(let ne=this._activePages.length-1;ne>=0;ne--)for(let j of this._activePages[ne].fixedRows)j.height<=se.height&&ue.size.y<=j.height&&(he=this._activePages[ne],se=j);if(se.y+ue.size.y>=he.canvas.height||se.height>ue.size.y+2){let ne=!1;if(he.currentRow.y+he.currentRow.height+ue.size.y>=he.canvas.height){let j;for(let re of this._activePages)if(re.currentRow.y+re.currentRow.height+ue.size.y<re.canvas.height){j=re;break}if(j)he=j;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&se.y+ue.size.y<=he.canvas.height&&se.height>=ue.size.y&&se.x+ue.size.x<=he.canvas.width)ne=!0;else{let re=this._createNewPage();he=re,se=re.currentRow,se.height=ue.size.y,ne=!0}}ne||(he.currentRow.height>0&&he.fixedRows.push(he.currentRow),se={x:0,y:he.currentRow.y+he.currentRow.height,height:ue.size.y},he.fixedRows.push(se),he.currentRow={x:0,y:se.y+se.height,height:0})}if(se.x+ue.size.x<=he.canvas.width)break;se===he.currentRow?(se.x=0,se.y+=se.height,se.height=0):he.fixedRows.splice(he.fixedRows.indexOf(se),1)}return ue.texturePage=this._pages.indexOf(he),ue.texturePosition.x=se.x,ue.texturePosition.y=se.y,ue.texturePositionClipSpace.x=se.x/he.canvas.width,ue.texturePositionClipSpace.y=se.y/he.canvas.height,ue.sizeClipSpace.x/=he.canvas.width,ue.sizeClipSpace.y/=he.canvas.height,se.height=Math.max(se.height,ue.size.y),se.x+=ue.size.x,he.ctx.putImageData(Ot,ue.texturePosition.x-this._workBoundingBox.left,ue.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ue.size.x,ue.size.y),he.addGlyph(ue),he.version++,ue}_findGlyphBoundingBox(E,T,M,w,L,A){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,x=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let k=0;k<x;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(E.data[H]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<A+x;$++){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(E.data[H]!==0){T.left=$,I=!0;break}}if(I)break}T.right=x,I=!1;for(let $=A+x-1;$>=A;$--){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(E.data[H]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let k=0;k<x;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(E.data[H]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+A+(w||L?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+A+(w||L?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=S,p([m.traceCall],S.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(E){this._glyphs.push(E),this._usedPixels+=E.size.x*E.size.y}constructor(E,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=C(E,T,T),this.ctx=(0,u.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(F,E,T,M){let w=E.rgba>>>24,L=E.rgba>>>16&255,A=E.rgba>>>8&255,R=T.rgba>>>24,x=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(L-x)+Math.abs(A-I))/12),k=!0;for(let H=0;H<F.data.length;H+=4)F.data[H]===w&&F.data[H+1]===L&&F.data[H+2]===A||M&&Math.abs(F.data[H]-w)+Math.abs(F.data[H+1]-L)+Math.abs(F.data[H+2]-A)<$?F.data[H+3]=0:k=!1;return k}function C(F,E,T){let M=F.createElement("canvas");return M.width=E,M.height=T,M}},160:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let p=a(399),i=0,r=0,u=0,c=0;var f,l,o,d,_;function m(b){let S=b.toString(16);return S.length<2?"0"+S:S}function y(b,S){return b<S?(S+.05)/(b+.05):(b+.05)/(S+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(S,D,g,C){return C!==void 0?`#${m(S)}${m(D)}${m(g)}${m(C)}`:`#${m(S)}${m(D)}${m(g)}`},b.toRgba=function(S,D,g,C=255){return(S<<24|D<<16|g<<8|C)>>>0}}(f||(s.channels=f={})),function(b){function S(D,g){return c=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:f.toCss(i,r,u,c),rgba:f.toRgba(i,r,u,c)}}b.blend=function(D,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};let C=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return i=T+Math.round((C-T)*c),r=M+Math.round((F-M)*c),u=w+Math.round((E-w)*c),{css:f.toCss(i,r,u),rgba:f.toRgba(i,r,u)}},b.isOpaque=function(D){return(255&D.rgba)==255},b.ensureContrastRatio=function(D,g,C){let F=_.ensureContrastRatio(D.rgba,g.rgba,C);if(F)return _.toColor(F>>24&255,F>>16&255,F>>8&255)},b.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:f.toCss(i,r,u),rgba:g}},b.opacity=S,b.multiplyOpacity=function(D,g){return c=255&D.rgba,S(D,c*g/255)},b.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(l||(s.color=l={})),function(b){let S,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let C=g.getContext("2d",{willReadFrequently:!0});C&&(S=C,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}b.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let C=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return i=parseInt(C[1]),r=parseInt(C[2]),u=parseInt(C[3]),c=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),_.toColor(i,r,u,c);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[i,r,u,c]=S.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(i,r,u,c),css:g}}}(o||(s.css=o={})),function(b){function S(D,g,C){let F=D/255,E=g/255,T=C/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}b.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},b.relativeLuminance2=S}(d||(s.rgb=d={})),function(b){function S(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w>0||L>0||A>0);)w-=Math.max(0,Math.ceil(.1*w)),L-=Math.max(0,Math.ceil(.1*L)),A-=Math.max(0,Math.ceil(.1*A)),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}function D(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w<255||L<255||A<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),L=Math.min(255,L+Math.ceil(.1*(255-L))),A=Math.min(255,A+Math.ceil(.1*(255-A))),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}b.ensureContrastRatio=function(g,C,F){let E=d.relativeLuminance(g>>8),T=d.relativeLuminance(C>>8);if(y(E,T)<F){if(T<E){let L=S(g,C,F),A=y(E,d.relativeLuminance(L>>8));if(A<F){let R=D(g,C,F);return A>y(E,d.relativeLuminance(R>>8))?L:R}return L}let M=D(g,C,F),w=y(E,d.relativeLuminance(M>>8));if(w<F){let L=S(g,C,F);return w>y(E,d.relativeLuminance(L>>8))?M:L}return M}},b.reduceLuminance=S,b.increaseLuminance=D,b.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},b.toColor=function(g,C,F,E){return{css:f.toCss(g,C,F,E),rgba:f.toRgba(g,C,F,E)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},345:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,p){return a(i=>p.fire(i))}},859:(v,s)=>{function a(p){for(let i of p)i.dispose();p.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let i=this._disposables.indexOf(p);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var i;this._isDisposed||p===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},s.toDisposable=function(p){return{dispose:p}},s.disposeArray=a,s.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},485:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(p,i,r,u,c){this._data.get(p,i)||this._data.set(p,i,new a),this._data.get(p,i).set(r,u,c)}get(p,i,r,u){var c;return(c=this._data.get(p,i))===null||c===void 0?void 0:c.get(r,u)}clear(){this._data.clear()}}},399:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,p=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),s.isIpad=p==="iPad",s.isIphone=p==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),s.isLinux=p.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let p=a(399);class i{constructor(){this._tasks=[],this._i=0}enqueue(c){this._tasks.push(c),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(c){this._idleCallback=void 0;let f=0,l=0,o=c.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),l=Math.max(f,l),d=c.timeRemaining(),1.5*l>d)return o-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-f))}ms`),void this._start();o=d}this.clear()}}class r extends i{_requestCallback(c){return setTimeout(()=>c(this._createDeadline(16)))}_cancelCallback(c){clearTimeout(c)}_createDeadline(c){let f=Date.now()+c;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},147:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=p},782:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let p=a(133),i=a(855),r=a(147);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let l=new u;return l.setFromCharData(f),l}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let l=!1;if(f[i.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(f[i.CHAR_DATA_CHAR_INDEX].length===2){let o=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let d=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(o-55296)+d-56320+65536|f[i.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[i.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=f[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},855:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,p=0,i=a.length){let r="";for(let u=p;u<i;++u){let c=a[u];c>65535?(c-=65536,r+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):r+=String.fromCharCode(c)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let c=a.charCodeAt(u++);56320<=c&&c<=57343?p[r++]=1024*(this._interim-55296)+c-56320+65536:(p[r++]=this._interim,p[r++]=c),this._interim=0}for(let c=u;c<i;++c){let f=a.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=i)return this._interim=f,r;let l=a.charCodeAt(c);56320<=l&&l<=57343?p[r++]=1024*(f-55296)+l-56320+65536:(p[r++]=f,p[r++]=l)}else f!==65279&&(p[r++]=f)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let i=a.length;if(!i)return 0;let r,u,c,f,l=0,o=0,d=0;if(this.interim[0]){let y=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)b<<=6,b|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=g-D;for(;d<C;){if(d>=i)return 0;if(S=a[d++],(192&S)!=128){d--,y=!0;break}this.interim[D++]=S,b<<=6,b|=63&S}y||(g===2?b<128?d--:p[l++]=b:g===3?b<2048||b>=55296&&b<=57343||b===65279||(p[l++]=b):b<65536||b>1114111||(p[l++]=b)),this.interim.fill(0)}let _=i-4,m=d;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(c=a[m+2])||128&(f=a[m+3]));)p[l++]=r,p[l++]=u,p[l++]=c,p[l++]=f,m+=4;if(r=a[m++],r<128)p[l++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}p[l++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,l;if(c=a[m++],(192&c)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&c,o<2048||o>=55296&&o<=57343||o===65279)continue;p[l++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,l;if(c=a[m++],(192&c)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=c,l;if(f=a[m++],(192&f)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&c)<<6|63&f,o<65536||o>1114111)continue;p[l++]=o}}return l}}},776:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(859),u=a(97),c={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},f,l=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),f=this}_updateLogLevel(){this._logLevel=c[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let d=0;d<o.length;d++)typeof o[d]=="function"&&(o[d]=o[d]())}_log(o,d,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,..._)}trace(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,d)}debug(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,d)}info(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,d)}warn(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,d)}error(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,d)}};s.LogService=l=p([i(0,u.IOptionsService)],l),s.setTraceLogger=function(o){f=o},s.traceCall=function(o,d,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(f.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);f.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let b=m.apply(this,y);return f.trace(`GlyphRenderer#${m.name} return`,b),b}}},726:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",p="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[p]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,c,f){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(l,o,d){o[a]===o?o[p].push({id:l,index:d}):(o[p]=[{id:l,index:d}],o[a]=o)})(r,u,f)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},97:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let p=a(726);var i;s.IBufferService=(0,p.createDecorator)("BufferService"),s.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),s.ICoreService=(0,p.createDecorator)("CoreService"),s.ICharsetService=(0,p.createDecorator)("CharsetService"),s.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,p.createDecorator)("LogService"),s.IOptionsService=(0,p.createDecorator)("OptionsService"),s.IOscLinkService=(0,p.createDecorator)("OscLinkService"),s.IUnicodeService=(0,p.createDecorator)("UnicodeService"),s.IDecorationService=(0,p.createDecorator)("DecorationService")}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let s=n(345),a=n(859),p=n(399),i=n(666),r=n(776);class u extends a.Disposable{constructor(f){if(p.isSafari&&(0,p.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=f,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(f){let l=f._core;if(!f.element)return void this.register(l.onWillOpen(()=>this.activate(f)));this._terminal=f;let o=l.coreService,d=l.optionsService,_=l,m=_._renderService,y=_._characterJoinerService,b=_._charSizeService,S=_._coreBrowserService,D=_._decorationService,g=_._logService,C=_._themeService;(0,r.setTraceLogger)(g),this._renderer=this.register(new i.WebglRenderer(f,y,b,S,o,D,d,C,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let F=this._terminal._core._renderService;F.setRenderer(this._terminal._core._createRenderer()),F.handleResize(f.cols,f.rows)}))}get textureAtlas(){var f;return(f=this._renderer)===null||f===void 0?void 0:f.textureAtlas}clearTextureAtlas(){var f;(f=this._renderer)===null||f===void 0||f.clearTextureAtlas()}}v.WebglAddon=u})(),h})())});var f1=ht((yh,Dy)=>{(function(e,t){typeof yh=="object"&&typeof Dy=="object"?Dy.exports=t():typeof define=="function"&&define.amd?define([],t):typeof yh=="object"?yh.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(p,i,r,u={}){this._terminal=p,this._regex=i,this._handler=r,this._options=u}provideLinks(p,i){let r=a.computeLink(p,this._regex,this._terminal,this._handler);i(this._addCallbacks(r))}_addCallbacks(p){return p.map(i=>(i.leave=this._options.leave,i.hover=(r,u)=>{if(this._options.hover){let{range:c}=i;this._options.hover(r,u,c)}},i))}};class a{static computeLink(i,r,u,c){let f=new RegExp(r.source,(r.flags||"")+"g"),[l,o]=a._getWindowedLineStrings(i-1,u),d=l.join(""),_,m=[];for(;_=f.exec(d);){let y=_[0];try{let F=new URL(y),E=decodeURI(F.toString());if(y!==E&&y+"/"!==E)continue}catch{continue}let[b,S]=a._mapStrIdx(u,o,0,_.index),[D,g]=a._mapStrIdx(u,b,S,y.length);if(b===-1||S===-1||D===-1||g===-1)continue;let C={start:{x:S+1,y:b+1},end:{x:g,y:D+1}};m.push({range:C,text:y,activate:c})}return m}static _getWindowedLineStrings(i,r){let u,c=i,f=i,l=0,o="",d=[];if(u=r.buffer.active.getLine(i)){let _=u.translateToString(!0);if(u.isWrapped&&_[0]!==" "){for(l=0;(u=r.buffer.active.getLine(--c))&&l<2048&&(o=u.translateToString(!0),l+=o.length,d.push(o),u.isWrapped&&o.indexOf(" ")===-1););d.reverse()}for(d.push(_),l=0;(u=r.buffer.active.getLine(++f))&&u.isWrapped&&l<2048&&(o=u.translateToString(!0),l+=o.length,d.push(o),o.indexOf(" ")===-1););}return[d,c]}static _mapStrIdx(i,r,u,c){let f=i.buffer.active,l=f.getNullCell(),o=u;for(;c;){let d=f.getLine(r);if(!d)return[-1,-1];for(let _=o;_<d.length;++_){d.getCell(_,l);let m=l.getChars();if(l.getWidth()&&(c-=m.length||1,_===d.length-1&&m==="")){let y=f.getLine(r+1);y&&y.isWrapped&&(y.getCell(0,l),l.getWidth()===2&&(c+=1))}if(c<0)return[r,_]}r++,o=0}return[r,o]}}s.LinkComputer=a}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v](a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let s=n(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function p(i,r){let u=window.open();if(u){try{u.opener=null}catch{}u.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(i=p,r={}){this._handler=i,this._options=r}activate(i){this._terminal=i;let r=this._options,u=r.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,u,this._handler,r))}dispose(){var i;(i=this._linkProvider)===null||i===void 0||i.dispose()}}})(),h})())});var g1=ht((Ch,Sy)=>{(function(e,t){if(typeof Ch=="object"&&typeof Sy=="object")Sy.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var h in n)(typeof Ch=="object"?Ch:e)[h]=n[h]}})(self,()=>(()=>{"use strict";var e={4567:function(v,s,a){var p=this&&this.__decorate||function(m,y,b,S){var D,g=arguments.length,C=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,y,b,S);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(C=(g<3?D(C):g>3?D(y,b,C):D(y,b))||C);return g>3&&C&&Object.defineProperty(y,b,C),C},i=this&&this.__param||function(m,y){return function(b,S){y(b,S,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let r=a(9042),u=a(6114),c=a(9924),f=a(844),l=a(5596),o=a(4725),d=a(3656),_=s.AccessibilityManager=class extends f.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new c.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new l.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=r.tooMuchOutput)),u.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,u.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let b=this._terminal.buffer,S=b.lines.length.toString();for(let D=m;D<=y;D++){let g=b.translateBufferLineToString(b.ydisp+D,!0),C=(b.ydisp+D+1).toString(),F=this._rowElements[D];F&&(g.length===0?F.innerText="\xA0":F.textContent=g,F.setAttribute("aria-posinset",C),F.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let b=m.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==S)return;let D,g;if(y===0?(D=b,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=b,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{let C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=_=p([i(1,o.IRenderService)],_)},3614:(v,s)=>{function a(u){return u.replace(/\r?\n/g,"\r")}function p(u,c){return c?"\x1B[200~"+u+"\x1B[201~":u}function i(u,c,f,l){u=p(u=a(u),f.decPrivateModes.bracketedPasteMode&&l.rawOptions.ignoreBracketedPasteMode!==!0),f.triggerDataEvent(u,!0),c.value=""}function r(u,c,f){let l=f.getBoundingClientRect(),o=u.clientX-l.left-10,d=u.clientY-l.top-10;c.style.width="20px",c.style.height="20px",c.style.left=`${o}px`,c.style.top=`${d}px`,c.style.zIndex="1000",c.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=p,s.copyHandler=function(u,c){u.clipboardData&&u.clipboardData.setData("text/plain",c.selectionText),u.preventDefault()},s.handlePasteEvent=function(u,c,f,l){u.stopPropagation(),u.clipboardData&&i(u.clipboardData.getData("text/plain"),c,f,l)},s.paste=i,s.moveTextAreaUnderMouseCursor=r,s.rightClickHandler=function(u,c,f,l,o){r(u,c,f),o&&l.rightClickSelect(u),c.value=l.selectionText,c.select()}},7239:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let p=a(1505);s.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(i,r,u){this._css.set(i,r,u)}getCss(i,r){return this._css.get(i,r)}setColor(i,r,u){this._color.set(i,r,u)}getColor(i,r){return this._color.get(i,r)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,p,i,r){a.addEventListener(p,i,r);let u=!1;return{dispose:()=>{u||(u=!0,a.removeEventListener(p,i,r))}}}},6465:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;let r=a(3656),u=a(8460),c=a(844),f=a(2585),l=s.Linkifier2=class extends c.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new u.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new u.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,c.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,c.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{let d=this._linkProviders.indexOf(o);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(o,d,_){this._element=o,this._mouseService=d,this._renderService=_,this.register((0,r.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,r.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let _=o.composedPath();for(let m=0;m<_.length;m++){let y=_[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,d){var _,m;this._activeProviderReplies&&d||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(b=>{b?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let y=!1;for(let[b,S]of this._linkProviders.entries())d?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(b)&&(y=this._checkLinkProviderResult(b,o,y)):S.provideLinks(o.y,D=>{var g,C;if(this._isMouseOut)return;let F=D?.map(E=>({link:E}));(g=this._activeProviderReplies)===null||g===void 0||g.set(b,F),y=this._checkLinkProviderResult(b,o,y),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,d){let _=new Set;for(let m=0;m<d.size;m++){let y=d.get(m);if(y)for(let b=0;b<y.length;b++){let S=y[b],D=S.link.range.start.y<o?0:S.link.range.start.x,g=S.link.range.end.y>o?this._bufferService.cols:S.link.range.end.x;for(let C=D;C<=g;C++){if(_.has(C)){y.splice(b--,1);break}_.add(C)}}}}_checkLinkProviderResult(o,d,_){var m;if(!this._activeProviderReplies)return _;let y=this._activeProviderReplies.get(o),b=!1;for(let S=0;S<o;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(b=!0);if(!b&&y){let S=y.find(D=>this._linkAtPosition(D.link,d));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(m=this._activeProviderReplies.get(S))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,d));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(o,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!d||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,c.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(o.link,d)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:_=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline},set:_=>{var m,y,b;!((m=this._currentLink)===null||m===void 0)&&m.state&&((b=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||b===void 0?void 0:b.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;let m=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(o,d,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(_,d.text)}_fireUnderlineEvent(o,d){let _=o.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-m-1,_.end.x,_.end.y-m-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(o,d,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(_,d.text)}_linkAtPosition(o,d){let _=o.range.start.y*this._bufferService.cols+o.range.start.x,m=o.range.end.y*this._bufferService.cols+o.range.end.x,y=d.y*this._bufferService.cols+d.x;return _<=y&&y<=m}_positionFromMouseEvent(o,d,_){let m=_.getCoords(o,d,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,d,_,m,y){return{x1:o,y1:d,x2:_,y2:m,cols:this._bufferService.cols,fg:y}}};s.Linkifier2=l=p([i(0,f.IBufferService)],l)},9042:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,s,a){var p=this&&this.__decorate||function(l,o,d,_){var m,y=arguments.length,b=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,o,d,_);else for(var S=l.length-1;S>=0;S--)(m=l[S])&&(b=(y<3?m(b):y>3?m(o,d,b):m(o,d))||b);return y>3&&b&&Object.defineProperty(o,d,b),b},i=this&&this.__param||function(l,o){return function(d,_){o(d,_,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let r=a(511),u=a(2585),c=s.OscLinkProvider=class{constructor(l,o,d){this._bufferService=l,this._optionsService=o,this._oscLinkService=d}provideLinks(l,o){var d;let _=this._bufferService.buffer.lines.get(l-1);if(!_)return void o(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,b=new r.CellData,S=_.getTrimmedLength(),D=-1,g=-1,C=!1;for(let F=0;F<S;F++)if(g!==-1||_.hasContent(F)){if(_.loadCell(F,b),b.hasExtendedAttrs()&&b.extended.urlId){if(g===-1){g=F,D=b.extended.urlId;continue}C=b.extended.urlId!==D}else g!==-1&&(C=!0);if(C||g!==-1&&F===S-1){let E=(d=this._oscLinkService.getLinkData(D))===null||d===void 0?void 0:d.uri;if(E){let T={start:{x:g+1,y:l},end:{x:F+(C||F!==S-1?0:1),y:l}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(E);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||m.push({text:E,range:T,activate:(w,L)=>y?y.activate(w,L,T):f(0,L),hover:(w,L)=>{var A;return(A=y?.hover)===null||A===void 0?void 0:A.call(y,w,L,T)},leave:(w,L)=>{var A;return(A=y?.leave)===null||A===void 0?void 0:A.call(y,w,L,T)}})}C=!1,b.hasExtendedAttrs()&&b.extended.urlId?(g=F,D=b.extended.urlId):(g=-1,D=-1)}}o(m)}};function f(l,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=c=p([i(0,u.IBufferService),i(1,u.IOptionsService),i(2,u.IOscLinkService)],c)},6193:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,p){this._parentWindow=a,this._renderCallback=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,p,i){this._rowCount=i,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;let p=a(844);class i extends p.Disposable{constructor(u){super(),this._parentWindow=u,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,p.toDisposable)(()=>{this.clearListener()}))}setListener(u){this._listener&&this.clearListener(),this._listener=u,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var u;this._outerListener&&((u=this._resolutionMediaMatchList)===null||u===void 0||u.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=i},3236:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let p=a(3614),i=a(3656),r=a(6465),u=a(9042),c=a(3730),f=a(1680),l=a(3107),o=a(5744),d=a(2950),_=a(1296),m=a(428),y=a(4269),b=a(5114),S=a(8934),D=a(3230),g=a(9312),C=a(4725),F=a(6731),E=a(8055),T=a(8969),M=a(8460),w=a(844),L=a(6114),A=a(8437),R=a(2584),x=a(7399),I=a(5941),$=a(9074),k=a(2585),H=a(5435),U=a(4567),q=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=L,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(r.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(c.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,W)=>this.refresh(B,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,w.toDisposable)(()=>{var B,W;this._customKeyEventHandler=void 0,(W=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||W===void 0||W.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let W,P="";switch(B.index){case 256:W="foreground",P="10";break;case 257:W="background",P="11";break;case 258:W="cursor",P="12";break;default:W="ansi",P="4;"+B.index}switch(B.type){case 0:let Q=E.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${P};${(0,I.toRgbString)(Q)}${R.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(G=>G.ansi[B.index]=E.rgba.toColor(...B.color));else{let G=W;this._themeService.modifyColors(ve=>ve[G]=E.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let W=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.css.cell.height,Q=B.getWidth(W),G=this._renderService.dimensions.css.cell.width*Q,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=G+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,i.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,p.copyHandler)(B,this._selectionService)}));let O=B=>(0,p.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,i.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,i.addDisposableDomListener)(this.element,"paste",O)),L.isFirefox?this.register((0,i.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,i.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),L.isLinux&&this.register((0,i.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,p.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,i.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,i.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,i.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let W=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",u.promptLabel),L.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,i.addDisposableDomListener)(this.textarea,"focus",P=>this._handleTextAreaFocus(P))),this.register((0,i.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(F.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(P=>this._onRender.fire(P))),this.onResize(P=>this._renderService.resize(P.cols,P.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(P=>this._renderService.handleSelectionChanged(P.start,P.end,P.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(P=>{this.textarea.value=P,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(P=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,i.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(l.BufferDecorationRenderer,this.screenElement)),this.register((0,i.addDisposableDomListener)(this.element,"mousedown",P=>this._selectionService.handleMouseDown(P))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",P=>this._handleScreenReaderModeOptionChange(P))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",P=>{!this._overviewRulerRenderer&&P&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function W(G){let ve=O._mouseService.getMouseReportCoords(G,O.screenElement);if(!ve)return!1;let Ee,ye;switch(G.overrideType||G.type){case"mousemove":ye=32,G.buttons===void 0?(Ee=3,G.button!==void 0&&(Ee=G.button<3?G.button:3)):Ee=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":ye=0,Ee=G.button<3?G.button:3;break;case"mousedown":ye=1,Ee=G.button<3?G.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(G)===0)return!1;ye=G.deltaY<0?0:1,Ee=4;break;default:return!1}return!(ye===void 0||Ee===void 0||Ee>4)&&O.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:Ee,action:ye,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}let P={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:G=>(W(G),G.buttons||(this._document.removeEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.removeEventListener("mousemove",P.mousedrag)),this.cancel(G)),wheel:G=>(W(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&W(G)},mousemove:G=>{G.buttons||W(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?P.mousemove||(B.addEventListener("mousemove",Q.mousemove),P.mousemove=Q.mousemove):(B.removeEventListener("mousemove",P.mousemove),P.mousemove=null),16&G?P.wheel||(B.addEventListener("wheel",Q.wheel,{passive:!1}),P.wheel=Q.wheel):(B.removeEventListener("wheel",P.wheel),P.wheel=null),2&G?P.mouseup||(B.addEventListener("mouseup",Q.mouseup),P.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",P.mouseup),B.removeEventListener("mouseup",P.mouseup),P.mouseup=null),4&G?P.mousedrag||(P.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",P.mousedrag),P.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,i.addDisposableDomListener)(B,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return W(G),P.mouseup&&this._document.addEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.addEventListener("mousemove",P.mousedrag),this.cancel(G)})),this.register((0,i.addDisposableDomListener)(B,"wheel",G=>{if(!P.wheel){if(!this.buffer.hasScrollback){let ve=this.viewport.getLinesScrolled(G);if(ve===0)return;let Ee=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B"),ye="";for(let ie=0;ie<Math.abs(ve);ie++)ye+=Ee;return this.coreService.triggerDataEvent(ye,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,i.addDisposableDomListener)(B,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,i.addDisposableDomListener)(B,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(O,B){var W;(W=this._renderService)===null||W===void 0||W.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,W=0){var P;W===1?(super.scrollLines(O,B,W),this.refresh(0,this.rows-1)):(P=this.viewport)===null||P===void 0||P.scrollLines(O)}paste(O){(0,p.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,W){this._selectionService.setSelection(O,B,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var W;(W=this._selectionService)===null||W===void 0||W.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let W=(0,x.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),W.type===3||W.type===2){let P=this.rows-1;return this.scrollLines(W.type===2?-P:P),this.cancel(O,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(W.cancel&&this.cancel(O,!0),!W.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==R.C0.ETX&&W.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let W=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?W:W&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var W,P;(W=this._charSizeService)===null||W===void 0||W.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(A.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let W=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${W};${B}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let P=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${Q};${P}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=N},9924:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,p=1e3){this._renderCallback=a,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,p,i){this._rowCount=i,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;let r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){let u=r-this._lastRefreshMs,c=this._debounceThresholdMS-u;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},c)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p)}}},1680:function(v,s,a){var p=this&&this.__decorate||function(d,_,m,y){var b,S=arguments.length,D=S<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(d,_,m,y);else for(var g=d.length-1;g>=0;g--)(b=d[g])&&(D=(S<3?b(D):S>3?b(_,m,D):b(_,m))||D);return S>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(d,_){return function(m,y){_(m,y,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let r=a(3656),u=a(4725),c=a(8460),f=a(844),l=a(2585),o=s.Viewport=class extends f.Disposable{constructor(d,_,m,y,b,S,D,g){super(),this._viewportElement=d,this._scrollArea=_,this._bufferService=m,this._optionsService=y,this._charSizeService=b,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,_){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&m<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){let _=this._getPixelsScrolled(d);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let _=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(d,_){var m;let y,b="",S=[],D=_??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let C=d;C<D;C++){let F=g.get(C);if(!F)continue;let E=(m=g.get(C+1))===null||m===void 0?void 0:m.isWrapped;if(b+=F.translateToString(!E),!E||C===g.length-1){let T=document.createElement("div");T.textContent=b,S.push(T),b.length>0&&(y=T),b=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(d,_){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&_.altKey||m==="ctrl"&&_.ctrlKey||m==="shift"&&_.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){let _=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}};s.Viewport=o=p([i(2,l.IBufferService),i(3,l.IOptionsService),i(4,u.ICharSizeService),i(5,u.IRenderService),i(6,u.ICoreBrowserService),i(7,u.IThemeService)],o)},3107:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let r=a(3656),u=a(4725),c=a(844),f=a(2585),l=s.BufferDecorationRenderer=class extends c.Disposable{constructor(o,d,_,m){super(),this._screenElement=o,this._bufferService=d,this._decorationService=_,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,c.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var d,_;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((d=o?.options)===null||d===void 0?void 0:d.layer)==="top"),m.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(_=o.options.x)!==null&&_!==void 0?_:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(o,m),m}_refreshStyle(o){let d=o.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let _=this._decorationElements.get(o);_||(_=this._createElement(o),o.element=_,this._decorationElements.set(o,_),this._container.appendChild(_),o.onDispose(()=>{this._decorationElements.delete(o),_.remove()})),_.style.top=d*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(_)}}_refreshXPosition(o,d=o.element){var _;if(!d)return;let m=(_=o.options.x)!==null&&_!==void 0?_:0;(o.options.anchor||"left")==="right"?d.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var d;(d=this._decorationElements.get(o))===null||d===void 0||d.remove(),this._decorationElements.delete(o),o.dispose()}};s.BufferDecorationRenderer=l=p([i(1,f.IBufferService),i(2,f.IDecorationService),i(3,u.IRenderService)],l)},5871:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let p of this._zones)if(p.color===a.options.overviewRulerOptions.color&&p.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,a.marker.line))return;if(this._lineAdjacentToZone(p,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(p,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,p){return p>=a.startBufferLine&&p<=a.endBufferLine}_lineAdjacentToZone(a,p,i){return p>=a.startBufferLine-this._linePadding[i||"full"]&&p<=a.endBufferLine+this._linePadding[i||"full"]}_addLineToZone(a,p){a.startBufferLine=Math.min(a.startBufferLine,p),a.endBufferLine=Math.max(a.endBufferLine,p)}}},5744:function(v,s,a){var p=this&&this.__decorate||function(y,b,S,D){var g,C=arguments.length,F=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,b,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(C<3?g(F):C>3?g(b,S,F):g(b,S))||F);return C>3&&F&&Object.defineProperty(b,S,F),F},i=this&&this.__param||function(y,b){return function(S,D){b(S,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let r=a(5871),u=a(3656),c=a(4725),f=a(844),l=a(2585),o={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m=s.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,b,S,D,g,C,F){var E;super(),this._viewportElement=y,this._screenElement=b,this._bufferService=S,this._decorationService=D,this._renderService=g,this._optionsService=C,this._coreBrowseService=F,this._colorZoneStore=new r.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(E=this._viewportElement.parentElement)===null||E===void 0||E.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,u.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=y,d.center=b,d.right=y,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=d.left,_.right=d.left+d.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);o.left=b,o.center=b,o.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let b of y)b.position!=="full"&&this._renderColorZone(b);for(let b of y)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(_[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-o[y.position||"full"]/2),d[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[y.position||"full"]))}_queueRefresh(y,b){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=m=p([i(2,l.IBufferService),i(3,l.IDecorationService),i(4,c.IRenderService),i(5,l.IOptionsService),i(6,c.ICoreBrowserService)],m)},2950:function(v,s,a){var p=this&&this.__decorate||function(l,o,d,_){var m,y=arguments.length,b=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,o,d,_);else for(var S=l.length-1;S>=0;S--)(m=l[S])&&(b=(y<3?m(b):y>3?m(o,d,b):m(o,d))||b);return y>3&&b&&Object.defineProperty(o,d,b),b},i=this&&this.__param||function(l,o){return function(d,_){o(d,_,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let r=a(4725),u=a(2585),c=a(2584),f=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(l,o,d,_,m,y){this._textarea=l,this._compositionView=o,this._bufferService=d,this._optionsService=_,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(l){this._compositionView.textContent=l.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(l){if(this._isComposing||this._isSendingComposition){if(l.keyCode===229||l.keyCode===16||l.keyCode===17||l.keyCode===18)return!1;this._finalizeComposition(!1)}return l.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(l){if(this._compositionView.classList.remove("active"),this._isComposing=!1,l){let o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){let l=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let o=this._textarea.value,d=o.replace(l,"");this._dataAlreadySent=d,o.length>l.length?this._coreService.triggerDataEvent(d,!0):o.length<l.length?this._coreService.triggerDataEvent(`${c.C0.DEL}`,!0):o.length===l.length&&o!==l&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(l){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}l||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=f=p([i(2,u.IBufferService),i(3,u.IOptionsService),i(4,u.ICoreService),i(5,r.IRenderService)],f)},9806:(v,s)=>{function a(p,i,r){let u=r.getBoundingClientRect(),c=p.getComputedStyle(r),f=parseInt(c.getPropertyValue("padding-left")),l=parseInt(c.getPropertyValue("padding-top"));return[i.clientX-u.left-f,i.clientY-u.top-l]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(p,i,r,u,c,f,l,o,d){if(!f)return;let _=a(p,i,r);return _?(_[0]=Math.ceil((_[0]+(d?l/2:0))/l),_[1]=Math.ceil(_[1]/o),_[0]=Math.min(Math.max(_[0],1),u+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),c),_):void 0}},9504:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let p=a(2584);function i(o,d,_,m){let y=o-r(o,_),b=d-r(d,_),S=Math.abs(y-b)-function(D,g,C){let F=0,E=D-r(D,C),T=g-r(g,C);for(let M=0;M<Math.abs(E-T);M++){let w=u(D,g)==="A"?-1:1,L=C.buffer.lines.get(E+w*M);L?.isWrapped&&F++}return F}(o,d,_);return l(S,f(u(o,d),m))}function r(o,d){let _=0,m=d.buffer.lines.get(o),y=m?.isWrapped;for(;y&&o>=0&&o<d.rows;)_++,m=d.buffer.lines.get(--o),y=m?.isWrapped;return _}function u(o,d){return o>d?"A":"B"}function c(o,d,_,m,y,b){let S=o,D=d,g="";for(;S!==_||D!==m;)S+=y?1:-1,y&&S>b.cols-1?(g+=b.buffer.translateBufferLineToString(D,!1,o,S),S=0,o=0,D++):!y&&S<0&&(g+=b.buffer.translateBufferLineToString(D,!1,0,o+1),S=b.cols-1,o=S,D--);return g+b.buffer.translateBufferLineToString(D,!1,o,S)}function f(o,d){let _=d?"O":"[";return p.C0.ESC+_+o}function l(o,d){o=Math.floor(o);let _="";for(let m=0;m<o;m++)_+=d;return _}s.moveToCellSequence=function(o,d,_,m){let y=_.buffer.x,b=_.buffer.y;if(!_.buffer.hasScrollback)return function(g,C,F,E,T,M){return i(C,E,T,M).length===0?"":l(c(g,C,g,C-r(C,T),!1,T).length,f("D",M))}(y,b,0,d,_,m)+i(b,d,_,m)+function(g,C,F,E,T,M){let w;w=i(C,E,T,M).length>0?E-r(E,T):C;let L=E,A=function(R,x,I,$,k,H){let U;return U=i(I,$,k,H).length>0?$-r($,k):x,R<I&&U<=$||R>=I&&U<$?"C":"D"}(g,C,F,E,T,M);return l(c(g,w,F,L,A==="C",T).length,f(A,M))}(y,b,o,d,_,m);let S;if(b===d)return S=y>o?"D":"C",l(Math.abs(y-o),f(S,m));S=b>d?"D":"C";let D=Math.abs(b-d);return l(function(g,C){return C.cols-g}(b>d?o:y,_)+(D-1)*_.cols+1+((b>d?y:o)-1),f(S,m))}},1296:function(v,s,a){var p=this&&this.__decorate||function(T,M,w,L){var A,R=arguments.length,x=R<3?M:L===null?L=Object.getOwnPropertyDescriptor(M,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(T,M,w,L);else for(var I=T.length-1;I>=0;I--)(A=T[I])&&(x=(R<3?A(x):R>3?A(M,w,x):A(M,w))||x);return R>3&&x&&Object.defineProperty(M,w,x),x},i=this&&this.__param||function(T,M){return function(w,L){M(w,L,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let r=a(3787),u=a(2550),c=a(2223),f=a(6171),l=a(4725),o=a(8055),d=a(8460),_=a(844),m=a(2585),y="xterm-dom-renderer-owner-",b="xterm-rows",S="xterm-fg-",D="xterm-bg-",g="xterm-focus",C="xterm-selection",F=1,E=s.DomRenderer=class extends _.Disposable{constructor(T,M,w,L,A,R,x,I,$,k){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=L,this._charSizeService=R,this._optionsService=x,this._bufferService=I,this._coreBrowserService=$,this._themeService=k,this._terminalClass=F++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,f.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(r.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new u.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${b} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${b} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${b}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,L]of T.ansi.entries())M+=`${this._terminalSelector} .${S}${w} { color: ${L.css}; }${this._terminalSelector} .${S}${w}.xterm-dim { color: ${o.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${L.css}; }`;M+=`${this._terminalSelector} .${S}${c.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${c.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${c.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let L=document.createElement("div");this._rowContainer.appendChild(L),this._rowElements.push(L)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let L=T[1]-this._bufferService.buffer.ydisp,A=M[1]-this._bufferService.buffer.ydisp,R=Math.max(L,0),x=Math.min(A,this._bufferService.rows-1);if(R>=this._bufferService.rows||x<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],x-R+1))}else{let $=L===R?T[0]:0,k=R===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,k));let H=x-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,H)),R!==x){let U=A===x?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(x,0,U))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,L=1){let A=document.createElement("div");return A.style.height=L*this.dimensions.css.cell.height+"px",A.style.top=T*this.dimensions.css.cell.height+"px",A.style.left=M*this.dimensions.css.cell.width+"px",A.style.width=this.dimensions.css.cell.width*(w-M)+"px",A}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,L=w.ybase+w.y,A=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let k=$+w.ydisp,H=this._rowElements[$],U=w.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===L,x,I,A,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,L,A,R){w<0&&(T=0),L<0&&(M=0);let x=this._bufferService.rows-1;w=Math.max(Math.min(w,x),0),L=Math.max(Math.min(L,x),0),A=Math.min(A,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,k=Math.min(I.x,A-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=w;N<=L;++N){let K=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(K);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,K,K===$,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,R?N===w?T:0:-1,R?(N===L?M:A)-1:-1))}}};s.DomRenderer=E=p([i(4,m.IInstantiationService),i(5,l.ICharSizeService),i(6,m.IOptionsService),i(7,m.IBufferService),i(8,l.ICoreBrowserService),i(9,l.IThemeService)],E)},3787:function(v,s,a){var p=this&&this.__decorate||function(S,D,g,C){var F,E=arguments.length,T=E<3?D:C===null?C=Object.getOwnPropertyDescriptor(D,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,D,g,C);else for(var M=S.length-1;M>=0;M--)(F=S[M])&&(T=(E<3?F(T):E>3?F(D,g,T):F(D,g))||T);return E>3&&T&&Object.defineProperty(D,g,T),T},i=this&&this.__param||function(S,D){return function(g,C){D(g,C,S)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let r=a(2223),u=a(643),c=a(511),f=a(2585),l=a(8055),o=a(4725),d=a(4269),_=a(6171),m=a(3734),y=s.DomRendererRowFactory=class{constructor(S,D,g,C,F,E,T){this._document=S,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=C,this._coreService=F,this._decorationService=E,this._themeService=T,this._workCell=new c.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,g){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=g}createRow(S,D,g,C,F,E,T,M,w,L,A){let R=[],x=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,k=S.getNoBgTrimmedLength();g&&k<E+1&&(k=E+1);let H=0,U="",q=0,N=0,K=0,O=!1,B=0,W=!1,P=0,Q=[],G=L!==-1&&A!==-1;for(let ve=0;ve<k;ve++){S.loadCell(ve,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let ye=!1,ie=ve,Ce=this._workCell;if(x.length>0&&ve===x[0][0]){ye=!0;let qe=x.shift();Ce=new d.JoinedCellData(this._workCell,S.translateToString(!0,qe[0],qe[1]),qe[1]-qe[0]),ie=qe[1]-1,Ee=Ce.getWidth()}let Dt=this._isCellInSelection(ve,D),Vt=g&&ve===E,Ot=G&&ve>=L&&ve<=A,Ye=!1;this._decorationService.forEachDecorationAtCell(ve,D,void 0,qe=>{Ye=!0});let ue=Ce.getChars()||u.WHITESPACE_CELL_CHAR;if(ue===" "&&(Ce.isUnderline()||Ce.isOverline())&&(ue="\xA0"),P=Ee*M-w.get(ue,Ce.isBold(),Ce.isItalic()),$){if(H&&(Dt&&W||!Dt&&!W&&Ce.bg===q)&&(Dt&&W&&I.selectionForeground||Ce.fg===N)&&Ce.extended.ext===K&&Ot===O&&P===B&&!Vt&&!ye&&!Ye){U+=ue,H++;continue}H&&($.textContent=U),$=this._document.createElement("span"),H=0,U=""}else $=this._document.createElement("span");if(q=Ce.bg,N=Ce.fg,K=Ce.extended.ext,O=Ot,B=P,W=Dt,ye&&E>=ve&&E<=ie&&(E=ve),!this._coreService.isCursorHidden&&Vt){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&Q.push("xterm-cursor-blink"),Q.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(F)switch(F){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(Ce.isBold()&&Q.push("xterm-bold"),Ce.isItalic()&&Q.push("xterm-italic"),Ce.isDim()&&Q.push("xterm-dim"),U=Ce.isInvisible()?u.WHITESPACE_CELL_CHAR:Ce.getChars()||u.WHITESPACE_CELL_CHAR,Ce.isUnderline()&&(Q.push(`xterm-underline-${Ce.extended.underlineStyle}`),U===" "&&(U="\xA0"),!Ce.isUnderlineColorDefault()))if(Ce.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Ce.getUnderlineColor()).join(",")})`;else{let qe=Ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ce.isBold()&&qe<8&&(qe+=8),$.style.textDecorationColor=I.ansi[qe].css}Ce.isOverline()&&(Q.push("xterm-overline"),U===" "&&(U="\xA0")),Ce.isStrikethrough()&&Q.push("xterm-strikethrough"),Ot&&($.style.textDecoration="underline");let he=Ce.getFgColor(),se=Ce.getFgColorMode(),ne=Ce.getBgColor(),j=Ce.getBgColorMode(),re=!!Ce.isInverse();if(re){let qe=he;he=ne,ne=qe;let bt=se;se=j,j=bt}let le,Pe,tt,st=!1;switch(this._decorationService.forEachDecorationAtCell(ve,D,void 0,qe=>{qe.options.layer!=="top"&&st||(qe.backgroundColorRGB&&(j=50331648,ne=qe.backgroundColorRGB.rgba>>8&16777215,le=qe.backgroundColorRGB),qe.foregroundColorRGB&&(se=50331648,he=qe.foregroundColorRGB.rgba>>8&16777215,Pe=qe.foregroundColorRGB),st=qe.options.layer==="top")}),!st&&Dt&&(le=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ne=le.rgba>>8&16777215,j=50331648,st=!0,I.selectionForeground&&(se=50331648,he=I.selectionForeground.rgba>>8&16777215,Pe=I.selectionForeground)),st&&Q.push("xterm-decoration-top"),j){case 16777216:case 33554432:tt=I.ansi[ne],Q.push(`xterm-bg-${ne}`);break;case 50331648:tt=l.rgba.toColor(ne>>16,ne>>8&255,255&ne),this._addStyle($,`background-color:#${b((ne>>>0).toString(16),"0",6)}`);break;default:re?(tt=I.foreground,Q.push(`xterm-bg-${r.INVERTED_DEFAULT_COLOR}`)):tt=I.background}switch(le||Ce.isDim()&&(le=l.color.multiplyOpacity(tt,.5)),se){case 16777216:case 33554432:Ce.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast($,tt,I.ansi[he],Ce,le,void 0)||Q.push(`xterm-fg-${he}`);break;case 50331648:let qe=l.rgba.toColor(he>>16&255,he>>8&255,255&he);this._applyMinimumContrast($,tt,qe,Ce,le,Pe)||this._addStyle($,`color:#${b(he.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,tt,I.foreground,Ce,le,void 0)||re&&Q.push(`xterm-fg-${r.INVERTED_DEFAULT_COLOR}`)}Q.length&&($.className=Q.join(" "),Q.length=0),Vt||ye||Ye?$.textContent=U:H++,P!==this.defaultSpacing&&($.style.letterSpacing=`${P}px`),R.push($),ve=ie}return $&&H&&($.textContent=U),R}_applyMinimumContrast(S,D,g,C,F,E){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(C.getCode()))return!1;let T=this._getContrastCache(C),M;if(F||E||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);M=l.color.ensureContrastRatio(F||D,E||g,w),T.setColor((F||D).rgba,(E||g).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let g=this._selectionStart,C=this._selectionEnd;return!(!g||!C)&&(this._columnSelectMode?g[0]<=C[0]?S>=g[0]&&D>=g[1]&&S<C[0]&&D<=C[1]:S<g[0]&&D>=g[1]&&S>=C[0]&&D<=C[1]:D>g[1]&&D<C[1]||g[1]===C[1]&&D===g[1]&&S>=g[0]&&S<C[0]||g[1]<C[1]&&D===C[1]&&S<C[0]||g[1]<C[1]&&D===g[1]&&S>=g[0])}};function b(S,D,g){for(;S.length<g;)S=D+S;return S}s.DomRendererRowFactory=y=p([i(1,o.ICharacterJoinerService),i(2,f.IOptionsService),i(3,o.ICoreBrowserService),i(4,f.ICoreService),i(5,f.IDecorationService),i(6,o.IThemeService)],y)},2550:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let p=a.createElement("span"),i=a.createElement("span");i.style.fontWeight="bold";let r=a.createElement("span");r.style.fontStyle="italic";let u=a.createElement("span");u.style.fontWeight="bold",u.style.fontStyle="italic",this._measureElements=[p,i,r,u],this._container.appendChild(p),this._container.appendChild(i),this._container.appendChild(r),this._container.appendChild(u),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,p,i,r){a===this._font&&p===this._fontSize&&i===this._weight&&r===this._weightBold||(this._font=a,this._fontSize=p,this._weight=i,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${i}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${i}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(a,p,i){let r=0;if(!p&&!i&&a.length===1&&(r=a.charCodeAt(0))<256)return this._flat[r]!==-9999?this._flat[r]:this._flat[r]=this._measure(a,0);let u=a;p&&(u+="B"),i&&(u+="I");let c=this._holey.get(u);if(c===void 0){let f=0;p&&(f|=1),i&&(f|=2),c=this._measure(a,f),this._holey.set(u,c)}return c}_measure(a,p){let i=this._measureElements[p];return i.textContent=a.repeat(32),i.offsetWidth/32}}},2223:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let p=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(v,s)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},s.excludeFromContrastRatioDemands=function(p){return a(p)||function(i){return 9472<=i&&i<=9631}(p)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,p=this.selectionEnd;return!(!a||!p)&&(a[1]>p[1]||a[1]===p[1]&&a[0]>p[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let r=a(2585),u=a(8460),c=a(844),f=s.CharSizeService=class extends c.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,d,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new u.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new l(o,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};s.CharSizeService=f=p([i(2,r.IOptionsService)],f);class l{constructor(d,_,m){this._document=d,this._parentElement=_,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(v,s,a){var p=this&&this.__decorate||function(d,_,m,y){var b,S=arguments.length,D=S<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(d,_,m,y);else for(var g=d.length-1;g>=0;g--)(b=d[g])&&(D=(S<3?b(D):S>3?b(_,m,D):b(_,m))||D);return S>3&&D&&Object.defineProperty(_,m,D),D},i=this&&this.__param||function(d,_){return function(m,y){_(m,y,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let r=a(3734),u=a(643),c=a(511),f=a(2585);class l extends r.AttributeData{constructor(_,m,y){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=l;let o=s.CharacterJoinerService=class m1{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}register(_){let m={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(m),m.id}deregister(_){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===_)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(_);if(!m||m.length===0)return[];let y=[],b=m.translateToString(!0),S=0,D=0,g=0,C=m.getFg(0),F=m.getBg(0);for(let E=0;E<m.getTrimmedLength();E++)if(m.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==F){if(E-S>1){let T=this._getJoinedRanges(b,g,D,m,S);for(let M=0;M<T.length;M++)y.push(T[M])}S=E,g=D,C=this._workCell.fg,F=this._workCell.bg}D+=this._workCell.getChars().length||u.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let E=this._getJoinedRanges(b,g,D,m,S);for(let T=0;T<E.length;T++)y.push(E[T])}return y}_getJoinedRanges(_,m,y,b,S){let D=_.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{let F=this._characterJoiners[C].handler(D);for(let E=0;E<F.length;E++)m1._mergeRanges(g,F[E])}catch(F){console.error(F)}return this._stringRangesToCellRanges(g,b,S),g}_stringRangesToCellRanges(_,m,y){let b=0,S=!1,D=0,g=_[b];if(g){for(let C=y;C<this._bufferService.cols;C++){let F=m.getWidth(C),E=m.getString(C).length||u.WHITESPACE_CELL_CHAR.length;if(F!==0){if(!S&&g[0]<=D&&(g[0]=C,S=!0),g[1]<=D){if(g[1]=C,g=_[++b],!g)break;g[0]<=D?(g[0]=C,S=!0):S=!1}D+=E}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(_,m){let y=!1;for(let b=0;b<_.length;b++){let S=_[b];if(y){if(m[1]<=S[0])return _[b-1][1]=m[1],_;if(m[1]<=S[1])return _[b-1][1]=Math.max(m[1],S[1]),_.splice(b,1),_;_.splice(b,1),b--}else{if(m[1]<=S[0])return _.splice(b,0,m),_;if(m[1]<=S[1])return S[0]=Math.min(m[0],S[0]),_;m[0]<S[1]&&(S[0]=Math.min(m[0],S[0]),y=!0)}}return y?_[_.length-1][1]=m[1]:_.push(m),_}};s.CharacterJoinerService=o=p([i(0,f.IBufferService)],o)},5114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,p){this._textarea=a,this.window=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,s,a){var p=this&&this.__decorate||function(f,l,o,d){var _,m=arguments.length,y=m<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,o):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,l,o,d);else for(var b=f.length-1;b>=0;b--)(_=f[b])&&(y=(m<3?_(y):m>3?_(l,o,y):_(l,o))||y);return m>3&&y&&Object.defineProperty(l,o,y),y},i=this&&this.__param||function(f,l){return function(o,d){l(o,d,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let r=a(4725),u=a(9806),c=s.MouseService=class{constructor(f,l){this._renderService=f,this._charSizeService=l}getCoords(f,l,o,d,_){return(0,u.getCoords)(window,f,l,o,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(f,l){let o=(0,u.getCoordsRelativeToElement)(window,f,l);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};s.MouseService=c=p([i(0,r.IRenderService),i(1,r.ICharSizeService)],c)},3230:function(v,s,a){var p=this&&this.__decorate||function(y,b,S,D){var g,C=arguments.length,F=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,b,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(C<3?g(F):C>3?g(b,S,F):g(b,S))||F);return C>3&&F&&Object.defineProperty(b,S,F),F},i=this&&this.__param||function(y,b){return function(S,D){b(S,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let r=a(3656),u=a(6193),c=a(5596),f=a(4725),l=a(8460),o=a(844),d=a(7226),_=a(2585),m=s.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,b,S,D,g,C,F,E){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new l.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new l.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new l.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new l.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new u.RenderDebouncer(F.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new c.ScreenDprMonitor(F.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register((0,r.addDisposableDomListener)(F.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(E.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in F.window){let T=new F.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(b),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,b,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,b,this._rowCount))}_renderRows(y,b){this._renderer.value&&(y=Math.min(y,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(y,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:b}),this._onRender.fire({start:y,end:b}),this._isNextRenderRedrawOnly=!0)}resize(y,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,b;this._renderer.value&&((b=(y=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,b)):this._renderer.value.handleResize(y,b),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,b,S){var D;this._selectionState.start=y,this._selectionState.end=b,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,b,S)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};s.RenderService=m=p([i(2,_.IOptionsService),i(3,f.ICharSizeService),i(4,_.IDecorationService),i(5,_.IBufferService),i(6,f.ICoreBrowserService),i(7,f.IThemeService)],m)},9312:function(v,s,a){var p=this&&this.__decorate||function(g,C,F,E){var T,M=arguments.length,w=M<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,F):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,C,F,E);else for(var L=g.length-1;L>=0;L--)(T=g[L])&&(w=(M<3?T(w):M>3?T(C,F,w):T(C,F))||w);return M>3&&w&&Object.defineProperty(C,F,w),w},i=this&&this.__param||function(g,C){return function(F,E){C(F,E,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let r=a(9806),u=a(9504),c=a(456),f=a(4725),l=a(8460),o=a(844),d=a(6114),_=a(4841),m=a(511),y=a(2585),b=String.fromCharCode(160),S=new RegExp(b,"g"),D=s.SelectionService=class extends o.Disposable{constructor(g,C,F,E,T,M,w,L,A){super(),this._element=g,this._screenElement=C,this._linkifier=F,this._bufferService=E,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=L,this._coreBrowserService=A,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new l.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new l.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new l.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new l.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new c.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!g||!C||g[0]===C[0]&&g[1]===C[1])}get selectionText(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!g||!C)return"";let F=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(g[0]===C[0])return"";let T=g[0]<C[0]?g[0]:C[0],M=g[0]<C[0]?C[0]:g[0];for(let w=g[1];w<=C[1];w++){let L=F.translateBufferLineToString(w,!0,T,M);E.push(L)}}else{let T=g[1]===C[1]?C[0]:void 0;E.push(F.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=C[1]-1;M++){let w=F.lines.get(M),L=F.translateBufferLineToString(M,!0);w?.isWrapped?E[E.length-1]+=L:E.push(L)}if(g[1]!==C[1]){let M=F.lines.get(C[1]),w=F.translateBufferLineToString(C[1],!0,0,C[0]);M&&M.isWrapped?E[E.length-1]+=w:E.push(w)}}return E.map(T=>T.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let C=this._getMouseBufferCoords(g),F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(F&&E&&C)&&this._areCoordsInSelection(C,F,E)}isCellInSelection(g,C){let F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!F||!E)&&this._areCoordsInSelection([g,C],F,E)}_areCoordsInSelection(g,C,F){return g[1]>C[1]&&g[1]<F[1]||C[1]===F[1]&&g[1]===C[1]&&g[0]>=C[0]&&g[0]<F[0]||C[1]<F[1]&&g[1]===F[1]&&g[0]<F[0]||C[1]<F[1]&&g[1]===C[1]&&g[0]>=C[0]}_selectWordAtCursor(g,C){var F,E;let T=(E=(F=this._linkifier.currentLink)===null||F===void 0?void 0:F.link)===null||E===void 0?void 0:E.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,C){this._model.clearSelection(),g=Math.max(g,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let C=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(g){let C=(0,r.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],F=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=F?0:(C>F&&(C-=F),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(g){return d.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let C=this._getMouseBufferCoords(g);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(g){return g.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let F=this._bufferService.buffer;if(this._model.selectionEnd[1]<F.lines.length){let E=F.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let C=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let F=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(F&&F[0]!==void 0&&F[1]!==void 0){let E=(0,u.moveToCellSequence)(F[0]-1,F[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,F=!(!g||!C||g[0]===C[0]&&g[1]===C[1]);F?g&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,C,F)):this._oldHasSelection&&this._fireOnSelectionChange(g,C,F)}_fireOnSelectionChange(g,C,F){this._oldSelectionStart=g,this._oldSelectionEnd=C,this._oldHasSelection=F,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(g,C){let F=C;for(let E=0;C>=E;E++){let T=g.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?F--:T>1&&C!==E&&(F+=T-1)}return F}setSelection(g,C,F){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,C],this._model.selectionStartLength=F,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,C,F=!0,E=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),L=this._convertViewportColToCharacterIndex(M,g[0]),A=L,R=g[0]-L,x=0,I=0,$=0,k=0;if(w.charAt(L)===" "){for(;L>0&&w.charAt(L-1)===" ";)L--;for(;A<w.length&&w.charAt(A+1)===" ";)A++}else{let q=g[0],N=g[0];M.getWidth(q)===0&&(x++,q--),M.getWidth(N)===2&&(I++,N++);let K=M.getString(N).length;for(K>1&&(k+=K-1,A+=K-1);q>0&&L>0&&!this._isCharWordSeparator(M.loadCell(q-1,this._workCell));){M.loadCell(q-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(x++,q--):O>1&&($+=O-1,L-=O-1),L--,q--}for(;N<M.length&&A+1<w.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(k+=O-1,A+=O-1),A++,N++}}A++;let H=L+R-x+$,U=Math.min(this._bufferService.cols,A-L+x+I-$-k);if(C||w.slice(L,A).trim()!==""){if(F&&H===0&&M.getCodePoint(0)!==32){let q=T.lines.get(g[1]-1);if(q&&M.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let K=this._bufferService.cols-N.start;H-=K,U+=K}}}if(E&&H+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let q=T.lines.get(g[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(U+=N.length)}}return{start:H,length:U}}}_selectWordAt(g,C){let F=this._getWordAt(g,C);if(F){for(;F.start<0;)F.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[F.start,g[1]],this._model.selectionStartLength=F.length}}_selectToWordAt(g){let C=this._getWordAt(g,!0);if(C){let F=g[1];for(;C.start<0;)C.start+=this._bufferService.cols,F--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,F++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,F]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let C=this._bufferService.buffer.getWrappedRangeForLine(g),F={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(F,this._bufferService.cols)}};s.SelectionService=D=p([i(3,y.IBufferService),i(4,y.ICoreService),i(5,f.IMouseService),i(6,y.IOptionsService),i(7,f.IRenderService),i(8,f.ICoreBrowserService)],D)},4725:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let p=a(8343);s.ICharSizeService=(0,p.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),s.IMouseService=(0,p.createDecorator)("MouseService"),s.IRenderService=(0,p.createDecorator)("RenderService"),s.ISelectionService=(0,p.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,p.createDecorator)("ThemeService")},6731:function(v,s,a){var p=this&&this.__decorate||function(D,g,C,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,C,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,C,M):E(g,C))||M);return T>3&&M&&Object.defineProperty(g,C,M),M},i=this&&this.__param||function(D,g){return function(C,F){g(C,F,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let r=a(7239),u=a(8055),c=a(8460),f=a(844),l=a(2585),o=u.css.toColor("#ffffff"),d=u.css.toColor("#000000"),_=u.css.toColor("#ffffff"),m=u.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[u.css.toColor("#2e3436"),u.css.toColor("#cc0000"),u.css.toColor("#4e9a06"),u.css.toColor("#c4a000"),u.css.toColor("#3465a4"),u.css.toColor("#75507b"),u.css.toColor("#06989a"),u.css.toColor("#d3d7cf"),u.css.toColor("#555753"),u.css.toColor("#ef2929"),u.css.toColor("#8ae234"),u.css.toColor("#fce94f"),u.css.toColor("#729fcf"),u.css.toColor("#ad7fa8"),u.css.toColor("#34e2e2"),u.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let C=0;C<216;C++){let F=g[C/36%6|0],E=g[C/6%6|0],T=g[C%6];D.push({css:u.channels.toCss(F,E,T),rgba:u.channels.toRgba(F,E,T)})}for(let C=0;C<24;C++){let F=8+10*C;D.push({css:u.channels.toCss(F,F,F),rgba:u.channels.toRgba(F,F,F)})}return D})());let b=s.ThemeService=class extends f.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new r.ColorContrastCache,this._halfContrastCache=new r.ColorContrastCache,this._onChangeColors=this.register(new c.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:d,cursor:_,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:u.color.blend(d,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:u.color.blend(d,y),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=S(D.foreground,o),g.background=S(D.background,d),g.cursor=S(D.cursor,_),g.cursorAccent=S(D.cursorAccent,m),g.selectionBackgroundTransparent=S(D.selectionBackground,y),g.selectionBackgroundOpaque=u.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=u.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?S(D.selectionForeground,u.NULL_COLOR):void 0,g.selectionForeground===u.NULL_COLOR&&(g.selectionForeground=void 0),u.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=u.color.opacity(g.selectionBackgroundTransparent,.3)),u.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=u.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=s.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(D.black,s.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(D.red,s.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(D.green,s.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(D.yellow,s.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(D.blue,s.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(D.magenta,s.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(D.cyan,s.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(D.white,s.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(D.brightBlack,s.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(D.brightRed,s.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(D.brightGreen,s.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(D.brightYellow,s.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(D.brightBlue,s.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(D.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(D.brightCyan,s.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(D.brightWhite,s.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let C=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let F=0;F<C;F++)g.ansi[F+16]=S(D.extendedAnsi[F],s.DEFAULT_ANSI_COLORS[F+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,g){if(D!==void 0)try{return u.css.toColor(D)}catch{}return g}s.ThemeService=b=p([i(0,l.IOptionsService)],b)},6349:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let p=a(8460),i=a(844);class r extends i.Disposable{constructor(c){super(),this._maxLength=c,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(c){if(this._maxLength===c)return;let f=new Array(c);for(let l=0;l<Math.min(c,this.length);l++)f[l]=this._array[this._getCyclicIndex(l)];this._array=f,this._maxLength=c,this._startIndex=0}get length(){return this._length}set length(c){if(c>this._length)for(let f=this._length;f<c;f++)this._array[f]=void 0;this._length=c}get(c){return this._array[this._getCyclicIndex(c)]}set(c,f){this._array[this._getCyclicIndex(c)]=f}push(c){this._array[this._getCyclicIndex(this._length)]=c,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(c,f,...l){if(f){for(let o=c;o<this._length-f;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+f)];this._length-=f,this.onDeleteEmitter.fire({index:c,amount:f})}for(let o=this._length-1;o>=c;o--)this._array[this._getCyclicIndex(o+l.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<l.length;o++)this._array[this._getCyclicIndex(c+o)]=l[o];if(l.length&&this.onInsertEmitter.fire({index:c,amount:l.length}),this._length+l.length>this._maxLength){let o=this._length+l.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=l.length}trimStart(c){c>this._length&&(c=this._length),this._startIndex+=c,this._length-=c,this.onTrimEmitter.fire(c)}shiftElements(c,f,l){if(!(f<=0)){if(c<0||c>=this._length)throw new Error("start argument out of range");if(c+l<0)throw new Error("Cannot shift elements in list beyond index 0");if(l>0){for(let d=f-1;d>=0;d--)this.set(c+d+l,this.get(c+d));let o=c+f+l-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<f;o++)this.set(c+o+l,this.get(c+o))}}_getCyclicIndex(c){return(this._startIndex+c)%this._maxLength}}s.CircularList=r},1439:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(p,i=5){if(typeof p!="object")return p;let r=Array.isArray(p)?[]:{};for(let u in p)r[u]=i<=1?p[u]:p[u]&&a(p[u],i-1);return r}},8055:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let p=a(6114),i=0,r=0,u=0,c=0;var f,l,o,d,_;function m(b){let S=b.toString(16);return S.length<2?"0"+S:S}function y(b,S){return b<S?(S+.05)/(b+.05):(b+.05)/(S+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(S,D,g,C){return C!==void 0?`#${m(S)}${m(D)}${m(g)}${m(C)}`:`#${m(S)}${m(D)}${m(g)}`},b.toRgba=function(S,D,g,C=255){return(S<<24|D<<16|g<<8|C)>>>0}}(f||(s.channels=f={})),function(b){function S(D,g){return c=Math.round(255*g),[i,r,u]=_.toChannels(D.rgba),{css:f.toCss(i,r,u,c),rgba:f.toRgba(i,r,u,c)}}b.blend=function(D,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};let C=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return i=T+Math.round((C-T)*c),r=M+Math.round((F-M)*c),u=w+Math.round((E-w)*c),{css:f.toCss(i,r,u),rgba:f.toRgba(i,r,u)}},b.isOpaque=function(D){return(255&D.rgba)==255},b.ensureContrastRatio=function(D,g,C){let F=_.ensureContrastRatio(D.rgba,g.rgba,C);if(F)return _.toColor(F>>24&255,F>>16&255,F>>8&255)},b.opaque=function(D){let g=(255|D.rgba)>>>0;return[i,r,u]=_.toChannels(g),{css:f.toCss(i,r,u),rgba:g}},b.opacity=S,b.multiplyOpacity=function(D,g){return c=255&D.rgba,S(D,c*g/255)},b.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(l||(s.color=l={})),function(b){let S,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let C=g.getContext("2d",{willReadFrequently:!0});C&&(S=C,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}b.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),_.toColor(i,r,u);case 5:return i=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),u=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),_.toColor(i,r,u,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let C=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return i=parseInt(C[1]),r=parseInt(C[2]),u=parseInt(C[3]),c=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),_.toColor(i,r,u,c);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[i,r,u,c]=S.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(i,r,u,c),css:g}}}(o||(s.css=o={})),function(b){function S(D,g,C){let F=D/255,E=g/255,T=C/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}b.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},b.relativeLuminance2=S}(d||(s.rgb=d={})),function(b){function S(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w>0||L>0||A>0);)w-=Math.max(0,Math.ceil(.1*w)),L-=Math.max(0,Math.ceil(.1*L)),A-=Math.max(0,Math.ceil(.1*A)),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}function D(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w<255||L<255||A<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),L=Math.min(255,L+Math.ceil(.1*(255-L))),A=Math.min(255,A+Math.ceil(.1*(255-A))),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}b.ensureContrastRatio=function(g,C,F){let E=d.relativeLuminance(g>>8),T=d.relativeLuminance(C>>8);if(y(E,T)<F){if(T<E){let L=S(g,C,F),A=y(E,d.relativeLuminance(L>>8));if(A<F){let R=D(g,C,F);return A>y(E,d.relativeLuminance(R>>8))?L:R}return L}let M=D(g,C,F),w=y(E,d.relativeLuminance(M>>8));if(w<F){let L=S(g,C,F);return w>y(E,d.relativeLuminance(L>>8))?M:L}return M}},b.reduceLuminance=S,b.increaseLuminance=D,b.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},b.toColor=function(g,C,F,E){return{css:f.toCss(g,C,F,E),rgba:f.toRgba(g,C,F,E)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},8969:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let p=a(844),i=a(2585),r=a(4348),u=a(7866),c=a(744),f=a(7302),l=a(6975),o=a(8460),d=a(1753),_=a(1480),m=a(7994),y=a(9282),b=a(5435),S=a(5981),D=a(2660),g=!1;class C extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(E=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(E.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(E){for(let T in E)this.optionsService.options[T]=E[T]}constructor(E){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new r.InstantiationService,this.optionsService=this.register(new f.OptionsService(E)),this._instantiationService.setService(i.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(c.BufferService)),this._instantiationService.setService(i.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(u.LogService)),this._instantiationService.setService(i.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(l.CoreService)),this._instantiationService.setService(i.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(i.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(i.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(i.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(i.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(E,T){this._writeBuffer.write(E,T)}writeSync(E,T){this._logService.logLevel<=i.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(E,T)}resize(E,T){isNaN(E)||isNaN(T)||(E=Math.max(E,c.MINIMUM_COLS),T=Math.max(T,c.MINIMUM_ROWS),this._bufferService.resize(E,T))}scroll(E,T=!1){this._bufferService.scroll(E,T)}scrollLines(E,T,M){this._bufferService.scrollLines(E,T,M)}scrollPages(E){this.scrollLines(E*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(E){let T=E-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(E,T){return this._inputHandler.registerEscHandler(E,T)}registerDcsHandler(E,T){return this._inputHandler.registerDcsHandler(E,T)}registerCsiHandler(E,T){return this._inputHandler.registerCsiHandler(E,T)}registerOscHandler(E,T){return this._inputHandler.registerOscHandler(E,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let E=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?E=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(E=!0),E?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let E=[];E.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)(()=>{for(let T of E)T.dispose()})}}}s.CoreTerminal=C},8460:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let i=[];for(let r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(let r=0;r<i.length;r++)i[r].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,p){return a(i=>p.fire(i))}},5435:function(v,s,a){var p=this&&this.__decorate||function(R,x,I,$){var k,H=arguments.length,U=H<3?x:$===null?$=Object.getOwnPropertyDescriptor(x,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(R,x,I,$);else for(var q=R.length-1;q>=0;q--)(k=R[q])&&(U=(H<3?k(U):H>3?k(x,I,U):k(x,I))||U);return H>3&&U&&Object.defineProperty(x,I,U),U},i=this&&this.__param||function(R,x){return function(I,$){x(I,$,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let r=a(2584),u=a(7116),c=a(2015),f=a(844),l=a(482),o=a(8437),d=a(8460),_=a(643),m=a(511),y=a(3734),b=a(2585),S=a(6242),D=a(6351),g=a(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},F=131072;function E(R,x){if(R>24)return x.setWinLines||!1;switch(R){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let M=0;class w extends f.Disposable{getAttrData(){return this._curAttrData}constructor(x,I,$,k,H,U,q,N,K=new c.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=I,this._coreService=$,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=N,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new l.StringToUtf32,this._utf8Decoder=new l.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new L(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:W})}),this._parser.setDcsHandlerFallback((O,B,W)=>{B==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:W})}),this._parser.setPrintHandler((O,B,W)=>this.print(O,B,W)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(r.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(r.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(r.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(r.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(r.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(r.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(r.C1.IND,()=>this.index()),this._parser.setExecuteHandler(r.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(r.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new S.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new S.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new S.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new S.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new S.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new S.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new S.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new S.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new S.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new S.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new S.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in u.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(x,I,$,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=k}_logSlowResolvingAsync(x){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([x,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,I){let $,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>F&&(U=this._parseStack.position+F)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,N=>String.fromCharCode(N)).join("")}"`),typeof x=="string"?x.split("").map(N=>N.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<F&&(this._parseBuffer=new Uint32Array(Math.min(x.length,F))),q||this._dirtyRowTracker.clearRange(),x.length>F)for(let N=U;N<x.length;N+=F){let K=N+F<x.length?N+F:x.length,O=typeof x=="string"?this._stringDecoder.decode(x.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(x.subarray(N,K),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(k,H,O,N),this._logSlowResolvingAsync($),$}else if(!q){let N=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(k,H,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,I,$){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let P=I;P<$;++P){if(k=x[P],H=this._unicodeService.wcwidth(k),k<127&&U){let Q=U[String.fromCharCode(k)];Q&&(k=Q.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,l.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=N){if(K){for(;this._activeBuffer.x<N;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,H===2)continue}if(O&&(W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(B),B),W.getWidth(N-1)===2&&W.setCellFromCodePoint(N-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,k,H,B.fg,B.bg,B.extended),H>0)for(;--H;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,k):W.addCodepointToCell(this._activeBuffer.x-2,k)}$-I>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,I){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,I):this._parser.registerCsiHandler(x,$=>!E($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(x,I){return this._parser.registerDcsHandler(x,new D.DcsHandler(I))}registerEscHandler(x,I){return this._parser.registerEscHandler(x,I)}registerOscHandler(x,I){return this._parser.registerOscHandler(x,new S.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=x,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+I)}cursorUp(x){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){let I=x.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=x.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=x.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){let I=x.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,I,$,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);U.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(x,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),$.isWrapped=!1)}eraseInDisplay(x,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(x,I=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let I=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;I--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let I=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let I=x.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let I=x.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;let I=x.params[0]||1,$=new Uint32Array(I);for(let k=0;k<I;++k)$[k]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(r.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(r.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(r.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(r.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(r.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),this._charsetService.setgCharset(1,u.DEFAULT_CHARSET),this._charsetService.setgCharset(2,u.DEFAULT_CHARSET),this._charsetService.setgCharset(3,u.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,I){let $=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:N}=this._bufferService,{active:K,alt:O}=q,B=this._optionsService.rawOptions,W=ve=>ve?1:2,P=x.params[0];return Q=P,G=I?P===2?4:P===4?W(U.modes.insertMode):P===12?3:P===20?W(B.convertEol):0:P===1?W($.applicationCursorKeys):P===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:P===6?W($.origin):P===7?W($.wraparound):P===8?3:P===9?W(k==="X10"):P===12?W(B.cursorBlink):P===25?W(!U.isCursorHidden):P===45?W($.reverseWraparound):P===66?W($.applicationKeypad):P===67?4:P===1e3?W(k==="VT200"):P===1002?W(k==="DRAG"):P===1003?W(k==="ANY"):P===1004?W($.sendFocus):P===1005?4:P===1006?W(H==="SGR"):P===1015?4:P===1016?W(H==="SGR_PIXELS"):P===1048?1:P===47||P===1047||P===1049?W(K===O):P===2004?W($.bracketedPasteMode):0,U.triggerDataEvent(`${r.C0.ESC}[${I?"":"?"}${Q};${G}$y`),!0;var Q,G}_updateAttrColor(x,I,$,k,H){return I===2?(x|=50331648,x&=-16777216,x|=y.AttributeData.fromColorRGB([$,k,H])):I===5&&(x&=-50331904,x|=33554432|255&$),x}_extractColor(x,I,$){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=x.params[I+U],x.hasSubParams(I+U)){let q=x.getSubParams(I+U),N=0;do k[1]===5&&(H=1),k[U+N+1+H]=q[N];while(++N<q.length&&N+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+I<x.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:$.fg=this._updateAttrColor($.fg,k[1],k[3],k[4],k[5]);break;case 48:$.bg=this._updateAttrColor($.bg,k[1],k[3],k[4],k[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(x,I){I.extended=I.extended.clone(),(!~x||x>5)&&(x=1),I.extended.underlineStyle=x,I.fg|=268435456,x===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(x){x.fg=o.DEFAULT_ATTR_DATA.fg,x.bg=o.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=x.length,$,k=this._curAttrData;for(let H=0;H<I;H++)$=x.params[H],$>=30&&$<=37?(k.fg&=-50331904,k.fg|=16777216|$-30):$>=40&&$<=47?(k.bg&=-50331904,k.bg|=16777216|$-40):$>=90&&$<=97?(k.fg&=-50331904,k.fg|=16777224|$-90):$>=100&&$<=107?(k.bg&=-50331904,k.bg|=16777224|$-100):$===0?this._processSGR0(k):$===1?k.fg|=134217728:$===3?k.bg|=67108864:$===4?(k.fg|=268435456,this._processUnderline(x.hasSubParams(H)?x.getSubParams(H)[0]:1,k)):$===5?k.fg|=536870912:$===7?k.fg|=67108864:$===8?k.fg|=1073741824:$===9?k.fg|=2147483648:$===2?k.bg|=134217728:$===21?this._processUnderline(2,k):$===22?(k.fg&=-134217729,k.bg&=-134217729):$===23?k.bg&=-67108865:$===24?(k.fg&=-268435457,this._processUnderline(0,k)):$===25?k.fg&=-536870913:$===27?k.fg&=-67108865:$===28?k.fg&=-1073741825:$===29?k.fg&=2147483647:$===39?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):$===49?(k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?H+=this._extractColor(x,H,k):$===53?k.bg|=1073741824:$===55?k.bg&=-1073741825:$===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):$===100?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${r.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[?${I};${$}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){let I=x.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(x){let I=x.params[0]||1,$;return(x.length<2||($=x.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(x){if(!E(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${r.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){let I=[],$=x.split(";");for(;$.length>1;){let k=$.shift(),H=$.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(A(U))if(H==="?")I.push({type:0,index:U});else{let q=(0,g.parseColor)(H);q&&I.push({type:1,index:U,color:q})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(x){let I=x.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(x,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=x.split(":"),k,H=$.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=$[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,I){let $=x.split(";");for(let k=0;k<$.length&&!(I>=this._specialColors.length);++k,++I)if($[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let H=(0,g.parseColor)($[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[I],color:H}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;let I=[],$=x.split(";");for(let k=0;k<$.length;++k)if(/^\d+$/.exec($[k])){let H=parseInt($[k]);A(H)&&I.push({type:2,index:H})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,u.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(C[x[0]],u.CHARSETS[x[1]]||u.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){let x=new m.CellData;x.content=4194304|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,k=this._activeBuffer.lines.get($);k&&(k.fill(x),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,I){let $=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${r.C0.ESC}${H}${r.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,I){this._dirtyRowTracker.markRangeDirty(x,I)}}s.InputHandler=w;let L=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,x){R>x&&(M=R,R=x,x=M),R<this.start&&(this.start=R),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function A(R){return 0<=R&&R<256}L=p([i(0,b.IBufferService)],L)},844:(v,s)=>{function a(p){for(let i of p)i.dispose();p.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let i=this._disposables.indexOf(p);i!==-1&&this._disposables.splice(i,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var i;this._isDisposed||p===this._value||((i=this._value)===null||i===void 0||i.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},s.toDisposable=function(p){return{dispose:p}},s.disposeArray=a,s.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},1505:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(i,r,u){this._data[i]||(this._data[i]={}),this._data[i][r]=u}get(i,r){return this._data[i]?this._data[i][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(p,i,r,u,c){this._data.get(p,i)||this._data.set(p,i,new a),this._data.get(p,i).set(r,u,c)}get(p,i,r,u){var c;return(c=this._data.get(p,i))===null||c===void 0?void 0:c.get(r,u)}clear(){this._data.clear()}}},6114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,p=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let i=a.match(/Version\/(\d+)/);return i===null||i.length<2?0:parseInt(i[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),s.isIpad=p==="iPad",s.isIphone=p==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),s.isLinux=p.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(a=this._search(this._getKey(p)),this._array.splice(a,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;let i=this._getKey(p);if(i===void 0||(a=this._search(i),a===-1)||this._getKey(this._array[a])!==i)return!1;do if(this._array[a]===p)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===i);return!1}*getKeyIterator(p){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===p)}forEachByKey(p,i){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do i(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===p)}values(){return[...this._array].values()}_search(p){let i=0,r=this._array.length-1;for(;r>=i;){let u=i+r>>1,c=this._getKey(this._array[u]);if(c>p)r=u-1;else{if(!(c<p)){for(;u>0&&this._getKey(this._array[u-1])===p;)u--;return u}i=u+1}}return i}}},7226:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let p=a(6114);class i{constructor(){this._tasks=[],this._i=0}enqueue(c){this._tasks.push(c),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(c){this._idleCallback=void 0;let f=0,l=0,o=c.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),l=Math.max(f,l),d=c.timeRemaining(),1.5*l>d)return o-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-f))}ms`),void this._start();o=d}this.clear()}}class r extends i{_requestCallback(c){return setTimeout(()=>c(this._createDeadline(16)))}_cancelCallback(c){clearTimeout(c)}_createDeadline(c){let f=Date.now()+c;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends i{_requestCallback(u){return requestIdleCallback(u)}_cancelCallback(u){cancelIdleCallback(u)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(u){this._queue.clear(),this._queue.enqueue(u)}flush(){this._queue.flush()}}},9282:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let p=a(643);s.updateWindowsModeWrappedState=function(i){let r=i.buffer.lines.get(i.buffer.ybase+i.buffer.y-1),u=r?.get(i.cols-1),c=i.buffer.lines.get(i.buffer.ybase+i.buffer.y);c&&u&&(c.isWrapped=u[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&u[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,u=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=u}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=p},9092:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let p=a(6349),i=a(7226),r=a(3734),u=a(8437),c=a(4634),f=a(511),l=a(643),o=a(4863),d=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(_,m,y){this._hasScrollback=_,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=u.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new i.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,m){return new u.BufferLine(this._bufferService.cols,this.getNullCell(_),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;let m=_+this._optionsService.rawOptions.scrollback;return m>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:m}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=u.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),b=0,S=this._getCorrectBufferLength(m);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<_)for(let g=0;g<this.lines.length;g++)b+=+this.lines.get(g).resize(_,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new u.BufferLine(_,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new u.BufferLine(_,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(_,m),this._cols>_))for(let D=0;D<this.lines.length;D++)b+=+this.lines.get(D).resize(_,y);this._cols=_,this._rows=m,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return _}get _isReflowEnabled(){let _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,m){this._cols!==_&&(_>this._cols?this._reflowLarger(_,m):this._reflowSmaller(_,m))}_reflowLarger(_,m){let y=(0,c.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(u.DEFAULT_ATTR_DATA));if(y.length>0){let b=(0,c.reflowLargerCreateNewLayout)(this.lines,y);(0,c.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(_,m,b.countRemoved)}}_reflowLargerAdjustViewport(_,m,y){let b=this.getNullCell(u.DEFAULT_ATTR_DATA),S=y;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new u.BufferLine(_,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(_,m){let y=this.getNullCell(u.DEFAULT_ATTR_DATA),b=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=_)continue;let C=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),C.unshift(g);let F=this.ybase+this.y;if(F>=D&&F<D+C.length)continue;let E=C[C.length-1].getTrimmedLength(),T=(0,c.reflowSmallerGetNewLineLengths)(C,this._cols,_),M=T.length-C.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let L=[];for(let k=0;k<M;k++){let H=this.getBlankLine(u.DEFAULT_ATTR_DATA,!0);L.push(H)}L.length>0&&(b.push({start:D+C.length+S,newLines:L}),S+=L.length),C.push(...L);let A=T.length-1,R=T[A];R===0&&(A--,R=T[A]);let x=C.length-M-1,I=E;for(;x>=0;){let k=Math.min(I,R);if(C[A]===void 0)break;if(C[A].copyCellsFrom(C[x],I-k,R-k,k,!0),R-=k,R===0&&(A--,R=T[A]),I-=k,I===0){x--;let H=Math.max(x,0);I=(0,c.getWrappedLineTrimmedLength)(C,H,this._cols)}}for(let k=0;k<C.length;k++)T[k]<_&&C[k].setCell(T[k],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(b.length>0){let D=[],g=[];for(let A=0;A<this.lines.length;A++)g.push(this.lines.get(A));let C=this.lines.length,F=C-1,E=0,T=b[E];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let A=Math.min(this.lines.maxLength-1,C+S-1);A>=0;A--)if(T&&T.start>F+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(A--,T.newLines[R]);A++,D.push({index:F+1,amount:T.newLines.length}),M+=T.newLines.length,T=b[++E]}else this.lines.set(A,g[F--]);let w=0;for(let A=D.length-1;A>=0;A--)D[A].index+=w,this.lines.onInsertEmitter.fire(D[A]),w+=D[A].amount;let L=Math.max(0,C+S-this.lines.maxLength);L>0&&this.lines.onTrimEmitter.fire(L)}}translateBufferLineToString(_,m,y=0,b){let S=this.lines.get(_);return S?S.translateToString(m,y,b):""}getWrappedRangeForLine(_){let m=_,y=_;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===_&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){let m=new o.Marker(_);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let p=a(3734),i=a(511),r=a(643),u=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let c=0;class f{constructor(o,d,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);let m=d||i.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]);for(let y=0;y<o;++y)this.setCell(y,m);this.length=o}get(o){let d=this._data[3*o+0],_=2097151&d;return[this._data[3*o+1],2097152&d?this._combined[o]:_?(0,u.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[o].charCodeAt(this._combined[o].length-1):_]}set(o,d){this._data[3*o+1]=d[r.CHAR_DATA_ATTR_INDEX],d[r.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=d[1],this._data[3*o+0]=2097152|o|d[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=d[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[r.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){let d=this._data[3*o+0];return 2097152&d?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&d}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){let d=this._data[3*o+0];return 2097152&d?this._combined[o]:2097151&d?(0,u.stringFromCodePoint)(2097151&d):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,d){return c=3*o,d.content=this._data[c+0],d.fg=this._data[c+1],d.bg=this._data[c+2],2097152&d.content&&(d.combinedData=this._combined[o]),268435456&d.bg&&(d.extended=this._extendedAttrs[o]),d}setCell(o,d){2097152&d.content&&(this._combined[o]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[o]=d.extended),this._data[3*o+0]=d.content,this._data[3*o+1]=d.fg,this._data[3*o+2]=d.bg}setCellFromCodePoint(o,d,_,m,y,b){268435456&y&&(this._extendedAttrs[o]=b),this._data[3*o+0]=d|_<<22,this._data[3*o+1]=m,this._data[3*o+2]=y}addCodepointToCell(o,d){let _=this._data[3*o+0];2097152&_?this._combined[o]+=(0,u.stringFromCodePoint)(d):(2097151&_?(this._combined[o]=(0,u.stringFromCodePoint)(2097151&_)+(0,u.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|4194304,this._data[3*o+0]=_)}insertCells(o,d,_,m){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length-o){let y=new i.CellData;for(let b=this.length-o-d-1;b>=0;--b)this.setCell(o+d+b,this.loadCell(o+b,y));for(let b=0;b<d;++b)this.setCell(o+b,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}deleteCells(o,d,_,m){if(o%=this.length,d<this.length-o){let y=new i.CellData;for(let b=0;b<this.length-o-d;++b)this.setCell(o+b,this.loadCell(o+d+b,y));for(let b=this.length-d;b<this.length;++b)this.setCell(b,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}replaceCells(o,d,_,m,y=!1){if(y)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);o<d&&o<this.length;)this.isProtected(o)||this.setCell(o,_),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);o<d&&o<this.length;)this.setCell(o++,_)}resize(o,d){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let m=new Uint32Array(_);m.set(this._data),this._data=m}for(let m=this.length;m<o;++m)this.setCell(m,d)}else{this._data=this._data.subarray(0,_);let m=Object.keys(this._combined);for(let b=0;b<m.length;b++){let S=parseInt(m[b],10);S>=o&&delete this._combined[S]}let y=Object.keys(this._extendedAttrs);for(let b=0;b<y.length;b++){let S=parseInt(y[b],10);S>=o&&delete this._extendedAttrs[S]}}return this.length=o,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,d=!1){if(d)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,o);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(let d in o._combined)this._combined[d]=o._combined[d];this._extendedAttrs={};for(let d in o._extendedAttrs)this._extendedAttrs[d]=o._extendedAttrs[d];this.isWrapped=o.isWrapped}clone(){let o=new f(0);o._data=new Uint32Array(this._data),o.length=this.length;for(let d in this._combined)o._combined[d]=this._combined[d];for(let d in this._extendedAttrs)o._extendedAttrs[d]=this._extendedAttrs[d];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,d,_,m,y){let b=o._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=b[3*(d+D)+g];268435456&b[3*(d+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[d+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=b[3*(d+D)+g];268435456&b[3*(d+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[d+D])}let S=Object.keys(o._combined);for(let D=0;D<S.length;D++){let g=parseInt(S[D],10);g>=d&&(this._combined[g-d+_]=o._combined[g])}}translateToString(o=!1,d=0,_=this.length){o&&(_=Math.min(_,this.getTrimmedLength()));let m="";for(;d<_;){let y=this._data[3*d+0],b=2097151&y;m+=2097152&y?this._combined[d]:b?(0,u.stringFromCodePoint)(b):r.WHITESPACE_CELL_CHAR,d+=y>>22||1}return m}}s.BufferLine=f},4841:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,p){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return p*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(v,s)=>{function a(p,i,r){if(i===p.length-1)return p[i].getTrimmedLength();let u=!p[i].hasContent(r-1)&&p[i].getWidth(r-1)===1,c=p[i+1].getWidth(0)===2;return u&&c?r-1:r}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(p,i,r,u,c){let f=[];for(let l=0;l<p.length-1;l++){let o=l,d=p.get(++o);if(!d.isWrapped)continue;let _=[p.get(l)];for(;o<p.length&&d.isWrapped;)_.push(d),d=p.get(++o);if(u>=l&&u<o){l+=_.length-1;continue}let m=0,y=a(_,m,i),b=1,S=0;for(;b<_.length;){let g=a(_,b,i),C=g-S,F=r-y,E=Math.min(C,F);_[m].copyCellsFrom(_[b],S,y,E,!1),y+=E,y===r&&(m++,y=0),S+=E,S===g&&(b++,S=0),y===0&&m!==0&&_[m-1].getWidth(r-1)===2&&(_[m].copyCellsFrom(_[m-1],r-1,y++,1,!1),_[m-1].setCell(r-1,c))}_[m].replaceCells(y,r,c);let D=0;for(let g=_.length-1;g>0&&(g>m||_[g].getTrimmedLength()===0);g--)D++;D>0&&(f.push(l+_.length-D),f.push(D)),l+=_.length-1}return f},s.reflowLargerCreateNewLayout=function(p,i){let r=[],u=0,c=i[u],f=0;for(let l=0;l<p.length;l++)if(c===l){let o=i[++u];p.onDeleteEmitter.fire({index:l-f,amount:o}),l+=o-1,f+=o,c=i[++u]}else r.push(l);return{layout:r,countRemoved:f}},s.reflowLargerApplyNewLayout=function(p,i){let r=[];for(let u=0;u<i.length;u++)r.push(p.get(i[u]));for(let u=0;u<r.length;u++)p.set(u,r[u]);p.length=i.length},s.reflowSmallerGetNewLineLengths=function(p,i,r){let u=[],c=p.map((d,_)=>a(p,_,i)).reduce((d,_)=>d+_),f=0,l=0,o=0;for(;o<c;){if(c-o<r){u.push(c-o);break}f+=r;let d=a(p,l,i);f>d&&(f-=d,l++);let _=p[l].getWidth(f-1)===2;_&&f--;let m=_?r-1:r;u.push(m),o+=m}return u},s.getWrappedLineTrimmedLength=a},5295:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let p=a(8460),i=a(844),r=a(9092);class u extends i.Disposable{constructor(f,l){super(),this._optionsService=f,this._bufferService=l,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new r.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new r.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(f){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(f),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(f,l){this._normal.resize(f,l),this._alt.resize(f,l),this.setupTabStops(f)}setupTabStops(f){this._normal.setupTabStops(f),this._alt.setupTabStops(f)}}s.BufferSet=u},511:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let p=a(482),i=a(643),r=a(3734);class u extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let l=new u;return l.setFromCharData(f),l}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[i.CHAR_DATA_ATTR_INDEX],this.bg=0;let l=!1;if(f[i.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(f[i.CHAR_DATA_CHAR_INDEX].length===2){let o=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let d=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(o-55296)+d-56320+65536|f[i.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=f[i.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[i.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=f[i.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[i.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=u},643:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let p=a(8460),i=a(844);class r{get id(){return this._id}constructor(c){this.line=c,this.isDisposed=!1,this._disposables=[],this._id=r._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,i.disposeArray)(this._disposables),this._disposables.length=0)}register(c){return this._disposables.push(c),c}}s.Marker=r,r._nextId=1},7116:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,s)=>{var a,p,i;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(r){r.NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="\x07",r.BS="\b",r.HT="	",r.LF=`
`,r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="\x1B",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="\x7F"}(a||(s.C0=a={})),function(r){r.PAD="\x80",r.HOP="\x81",r.BPH="\x82",r.NBH="\x83",r.IND="\x84",r.NEL="\x85",r.SSA="\x86",r.ESA="\x87",r.HTS="\x88",r.HTJ="\x89",r.VTS="\x8A",r.PLD="\x8B",r.PLU="\x8C",r.RI="\x8D",r.SS2="\x8E",r.SS3="\x8F",r.DCS="\x90",r.PU1="\x91",r.PU2="\x92",r.STS="\x93",r.CCH="\x94",r.MW="\x95",r.SPA="\x96",r.EPA="\x97",r.SOS="\x98",r.SGCI="\x99",r.SCI="\x9A",r.CSI="\x9B",r.ST="\x9C",r.OSC="\x9D",r.PM="\x9E",r.APC="\x9F"}(p||(s.C1=p={})),function(r){r.ST=`${a.ESC}\\`}(i||(s.C1_ESCAPED=i={}))},7399:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let p=a(2584),i={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(r,u,c,f){let l={type:0,cancel:!1,key:void 0},o=(r.shiftKey?1:0)|(r.altKey?2:0)|(r.ctrlKey?4:0)|(r.metaKey?8:0);switch(r.keyCode){case 0:r.key==="UIKeyInputUpArrow"?l.key=u?p.C0.ESC+"OA":p.C0.ESC+"[A":r.key==="UIKeyInputLeftArrow"?l.key=u?p.C0.ESC+"OD":p.C0.ESC+"[D":r.key==="UIKeyInputRightArrow"?l.key=u?p.C0.ESC+"OC":p.C0.ESC+"[C":r.key==="UIKeyInputDownArrow"&&(l.key=u?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(r.altKey){l.key=p.C0.ESC+p.C0.DEL;break}l.key=p.C0.DEL;break;case 9:if(r.shiftKey){l.key=p.C0.ESC+"[Z";break}l.key=p.C0.HT,l.cancel=!0;break;case 13:l.key=r.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,l.cancel=!0;break;case 27:l.key=p.C0.ESC,r.altKey&&(l.key=p.C0.ESC+p.C0.ESC),l.cancel=!0;break;case 37:if(r.metaKey)break;o?(l.key=p.C0.ESC+"[1;"+(o+1)+"D",l.key===p.C0.ESC+"[1;3D"&&(l.key=p.C0.ESC+(c?"b":"[1;5D"))):l.key=u?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(r.metaKey)break;o?(l.key=p.C0.ESC+"[1;"+(o+1)+"C",l.key===p.C0.ESC+"[1;3C"&&(l.key=p.C0.ESC+(c?"f":"[1;5C"))):l.key=u?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(r.metaKey)break;o?(l.key=p.C0.ESC+"[1;"+(o+1)+"A",c||l.key!==p.C0.ESC+"[1;3A"||(l.key=p.C0.ESC+"[1;5A")):l.key=u?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(r.metaKey)break;o?(l.key=p.C0.ESC+"[1;"+(o+1)+"B",c||l.key!==p.C0.ESC+"[1;3B"||(l.key=p.C0.ESC+"[1;5B")):l.key=u?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:r.shiftKey||r.ctrlKey||(l.key=p.C0.ESC+"[2~");break;case 46:l.key=o?p.C0.ESC+"[3;"+(o+1)+"~":p.C0.ESC+"[3~";break;case 36:l.key=o?p.C0.ESC+"[1;"+(o+1)+"H":u?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:l.key=o?p.C0.ESC+"[1;"+(o+1)+"F":u?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:r.shiftKey?l.type=2:r.ctrlKey?l.key=p.C0.ESC+"[5;"+(o+1)+"~":l.key=p.C0.ESC+"[5~";break;case 34:r.shiftKey?l.type=3:r.ctrlKey?l.key=p.C0.ESC+"[6;"+(o+1)+"~":l.key=p.C0.ESC+"[6~";break;case 112:l.key=o?p.C0.ESC+"[1;"+(o+1)+"P":p.C0.ESC+"OP";break;case 113:l.key=o?p.C0.ESC+"[1;"+(o+1)+"Q":p.C0.ESC+"OQ";break;case 114:l.key=o?p.C0.ESC+"[1;"+(o+1)+"R":p.C0.ESC+"OR";break;case 115:l.key=o?p.C0.ESC+"[1;"+(o+1)+"S":p.C0.ESC+"OS";break;case 116:l.key=o?p.C0.ESC+"[15;"+(o+1)+"~":p.C0.ESC+"[15~";break;case 117:l.key=o?p.C0.ESC+"[17;"+(o+1)+"~":p.C0.ESC+"[17~";break;case 118:l.key=o?p.C0.ESC+"[18;"+(o+1)+"~":p.C0.ESC+"[18~";break;case 119:l.key=o?p.C0.ESC+"[19;"+(o+1)+"~":p.C0.ESC+"[19~";break;case 120:l.key=o?p.C0.ESC+"[20;"+(o+1)+"~":p.C0.ESC+"[20~";break;case 121:l.key=o?p.C0.ESC+"[21;"+(o+1)+"~":p.C0.ESC+"[21~";break;case 122:l.key=o?p.C0.ESC+"[23;"+(o+1)+"~":p.C0.ESC+"[23~";break;case 123:l.key=o?p.C0.ESC+"[24;"+(o+1)+"~":p.C0.ESC+"[24~";break;default:if(!r.ctrlKey||r.shiftKey||r.altKey||r.metaKey)if(c&&!f||!r.altKey||r.metaKey)!c||r.altKey||r.ctrlKey||r.shiftKey||!r.metaKey?r.key&&!r.ctrlKey&&!r.altKey&&!r.metaKey&&r.keyCode>=48&&r.key.length===1?l.key=r.key:r.key&&r.ctrlKey&&(r.key==="_"&&(l.key=p.C0.US),r.key==="@"&&(l.key=p.C0.NUL)):r.keyCode===65&&(l.type=1);else{let d=i[r.keyCode],_=d?.[r.shiftKey?1:0];if(_)l.key=p.C0.ESC+_;else if(r.keyCode>=65&&r.keyCode<=90){let m=r.ctrlKey?r.keyCode-64:r.keyCode+32,y=String.fromCharCode(m);r.shiftKey&&(y=y.toUpperCase()),l.key=p.C0.ESC+y}else if(r.keyCode===32)l.key=p.C0.ESC+(r.ctrlKey?p.C0.NUL:" ");else if(r.key==="Dead"&&r.code.startsWith("Key")){let m=r.code.slice(3,4);r.shiftKey||(m=m.toLowerCase()),l.key=p.C0.ESC+m,l.cancel=!0}}else r.keyCode>=65&&r.keyCode<=90?l.key=String.fromCharCode(r.keyCode-64):r.keyCode===32?l.key=p.C0.NUL:r.keyCode>=51&&r.keyCode<=55?l.key=String.fromCharCode(r.keyCode-51+27):r.keyCode===56?l.key=p.C0.DEL:r.keyCode===219?l.key=p.C0.ESC:r.keyCode===220?l.key=p.C0.FS:r.keyCode===221&&(l.key=p.C0.GS)}return l}},482:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,p=0,i=a.length){let r="";for(let u=p;u<i;++u){let c=a[u];c>65535?(c-=65536,r+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):r+=String.fromCharCode(c)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let i=a.length;if(!i)return 0;let r=0,u=0;if(this._interim){let c=a.charCodeAt(u++);56320<=c&&c<=57343?p[r++]=1024*(this._interim-55296)+c-56320+65536:(p[r++]=this._interim,p[r++]=c),this._interim=0}for(let c=u;c<i;++c){let f=a.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=i)return this._interim=f,r;let l=a.charCodeAt(c);56320<=l&&l<=57343?p[r++]=1024*(f-55296)+l-56320+65536:(p[r++]=f,p[r++]=l)}else f!==65279&&(p[r++]=f)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let i=a.length;if(!i)return 0;let r,u,c,f,l=0,o=0,d=0;if(this.interim[0]){let y=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)b<<=6,b|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=g-D;for(;d<C;){if(d>=i)return 0;if(S=a[d++],(192&S)!=128){d--,y=!0;break}this.interim[D++]=S,b<<=6,b|=63&S}y||(g===2?b<128?d--:p[l++]=b:g===3?b<2048||b>=55296&&b<=57343||b===65279||(p[l++]=b):b<65536||b>1114111||(p[l++]=b)),this.interim.fill(0)}let _=i-4,m=d;for(;m<i;){for(;!(!(m<_)||128&(r=a[m])||128&(u=a[m+1])||128&(c=a[m+2])||128&(f=a[m+3]));)p[l++]=r,p[l++]=u,p[l++]=c,p[l++]=f,m+=4;if(r=a[m++],r<128)p[l++]=r;else if((224&r)==192){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(o=(31&r)<<6|63&u,o<128){m--;continue}p[l++]=o}else if((240&r)==224){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,l;if(c=a[m++],(192&c)!=128){m--;continue}if(o=(15&r)<<12|(63&u)<<6|63&c,o<2048||o>=55296&&o<=57343||o===65279)continue;p[l++]=o}else if((248&r)==240){if(m>=i)return this.interim[0]=r,l;if(u=a[m++],(192&u)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,l;if(c=a[m++],(192&c)!=128){m--;continue}if(m>=i)return this.interim[0]=r,this.interim[1]=u,this.interim[2]=c,l;if(f=a[m++],(192&f)!=128){m--;continue}if(o=(7&r)<<18|(63&u)<<12|(63&c)<<6|63&f,o<65536||o>1114111)continue;p[l++]=o}}return l}}},225:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],p=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],i;s.UnicodeV6=class{constructor(){if(this.version="6",!i){i=new Uint8Array(65536),i.fill(1),i[0]=0,i.fill(0,1,32),i.fill(0,127,160),i.fill(2,4352,4448),i[9001]=2,i[9002]=2,i.fill(2,11904,42192),i[12351]=1,i.fill(2,44032,55204),i.fill(2,63744,64256),i.fill(2,65040,65050),i.fill(2,65072,65136),i.fill(2,65280,65377),i.fill(2,65504,65511);for(let r=0;r<a.length;++r)i.fill(0,a[r][0],a[r][1]+1)}}wcwidth(r){return r<32?0:r<127?1:r<65536?i[r]:function(u,c){let f,l=0,o=c.length-1;if(u<c[0][0]||u>c[o][1])return!1;for(;o>=l;)if(f=l+o>>1,u>c[f][1])l=f+1;else{if(!(u<c[f][0]))return!0;o=f-1}return!1}(r,p)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1}}},5981:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let p=a(8460),i=a(844);class r extends i.Disposable{constructor(c){super(),this._action=c,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(c,f){if(f!==void 0&&this._syncCalls>f)return void(this._syncCalls=0);if(this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let l;for(this._isSyncWriting=!0;l=this._writeBuffer.shift();){this._action(l);let o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(c,f){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f)}_innerWrite(c=0,f=!0){let l=c||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let o=this._writeBuffer[this._bufferOffset],d=this._action(o,f);if(d){let m=y=>Date.now()-l>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(l,y);return void d.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-l>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=r},5941:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function i(r,u){let c=r.toString(16),f=c.length<2?"0"+c:c;switch(u){case 4:return c[0];case 8:return f;case 12:return(f+f).slice(0,3);default:return f+f}}s.parseColor=function(r){if(!r)return;let u=r.toLowerCase();if(u.indexOf("rgb:")===0){u=u.slice(4);let c=a.exec(u);if(c){let f=c[1]?15:c[4]?255:c[7]?4095:65535;return[Math.round(parseInt(c[1]||c[4]||c[7]||c[10],16)/f*255),Math.round(parseInt(c[2]||c[5]||c[8]||c[11],16)/f*255),Math.round(parseInt(c[3]||c[6]||c[9]||c[12],16)/f*255)]}}else if(u.indexOf("#")===0&&(u=u.slice(1),p.exec(u)&&[3,6,9,12].includes(u.length))){let c=u.length/3,f=[0,0,0];for(let l=0;l<3;++l){let o=parseInt(u.slice(c*l,c*l+c),16);f[l]=c===1?o<<4:c===2?o:c===3?o>>4:o>>8}return f}},s.toRgbString=function(r,u=16){let[c,f,l]=r;return`rgb:${i(c,u)}/${i(f,u)}/${i(l,u)}`}},5770:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let p=a(482),i=a(8742),r=a(5770),u=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=u,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=u}registerHandler(f,l){this._handlers[f]===void 0&&(this._handlers[f]=[]);let o=this._handlers[f];return o.push(l),{dispose:()=>{let d=o.indexOf(l);d!==-1&&o.splice(d,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}reset(){if(this._active.length)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].unhook(!1);this._stack.paused=!1,this._active=u,this._ident=0}hook(f,l){if(this.reset(),this._ident=f,this._active=this._handlers[f]||u,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(l);else this._handlerFb(this._ident,"HOOK",l)}put(f,l,o){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(f,l,o);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(f,l,o))}unhook(f,l=!0){if(this._active.length){let o=!1,d=this._active.length-1,_=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,o=l,_=this._stack.fallThrough,this._stack.paused=!1),!_&&o===!1){for(;d>=0&&(o=this._active[d].unhook(f),o!==!0);d--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,o;d--}for(;d>=0;d--)if(o=this._active[d].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",f);this._active=u,this._ident=0}};let c=new i.Params;c.addParam(0),s.DcsHandler=class{constructor(f){this._handler=f,this._data="",this._params=c,this._hitLimit=!1}hook(f){this._params=f.length>1||f.params[0]?f.clone():c,this._data="",this._hitLimit=!1}put(f,l,o){this._hitLimit||(this._data+=(0,p.utf32ToString)(f,l,o),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(f){let l=!1;if(this._hitLimit)l=!1;else if(f&&(l=this._handler(this._data,this._params),l instanceof Promise))return l.then(o=>(this._params=c,this._data="",this._hitLimit=!1,o));return this._params=c,this._data="",this._hitLimit=!1,l}}},2015:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let p=a(844),i=a(8742),r=a(6242),u=a(6351);class c{constructor(d){this.table=new Uint8Array(d)}setDefault(d,_){this.table.fill(d<<4|_)}add(d,_,m,y){this.table[_<<8|d]=m<<4|y}addMany(d,_,m,y){for(let b=0;b<d.length;b++)this.table[_<<8|d[b]]=m<<4|y}}s.TransitionTable=c;let f=160;s.VT500_TRANSITION_TABLE=function(){let o=new c(4095),d=Array.apply(null,Array(256)).map((D,g)=>g),_=(D,g)=>d.slice(D,g),m=_(32,127),y=_(0,24);y.push(25),y.push.apply(y,_(28,32));let b=_(0,14),S;for(S in o.setDefault(1,0),o.addMany(m,0,2,0),b)o.addMany([24,26,153,154],S,3,0),o.addMany(_(128,144),S,3,0),o.addMany(_(144,152),S,3,0),o.add(156,S,0,0),o.add(27,S,11,1),o.add(157,S,4,8),o.addMany([152,158,159],S,0,7),o.add(155,S,11,3),o.add(144,S,11,9);return o.addMany(y,0,3,0),o.addMany(y,1,3,1),o.add(127,1,0,1),o.addMany(y,8,0,8),o.addMany(y,3,3,3),o.add(127,3,0,3),o.addMany(y,4,3,4),o.add(127,4,0,4),o.addMany(y,6,3,6),o.addMany(y,5,3,5),o.add(127,5,0,5),o.addMany(y,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(m,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(_(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(m,7,0,7),o.addMany(y,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(_(64,127),3,7,0),o.addMany(_(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(_(48,60),4,8,4),o.addMany(_(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(_(32,64),6,0,6),o.add(127,6,0,6),o.addMany(_(64,127),6,0,0),o.addMany(_(32,48),3,9,5),o.addMany(_(32,48),5,9,5),o.addMany(_(48,64),5,0,6),o.addMany(_(64,127),5,7,0),o.addMany(_(32,48),4,9,5),o.addMany(_(32,48),1,9,2),o.addMany(_(32,48),2,9,2),o.addMany(_(48,127),2,10,0),o.addMany(_(48,80),1,10,0),o.addMany(_(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(_(96,127),1,10,0),o.add(80,1,11,9),o.addMany(y,9,0,9),o.add(127,9,0,9),o.addMany(_(28,32),9,0,9),o.addMany(_(32,48),9,9,12),o.addMany(_(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(y,11,0,11),o.addMany(_(32,128),11,0,11),o.addMany(_(28,32),11,0,11),o.addMany(y,10,0,10),o.add(127,10,0,10),o.addMany(_(28,32),10,0,10),o.addMany(_(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(_(32,48),10,9,12),o.addMany(y,12,0,12),o.add(127,12,0,12),o.addMany(_(28,32),12,0,12),o.addMany(_(32,48),12,9,12),o.addMany(_(48,64),12,0,11),o.addMany(_(64,127),12,12,13),o.addMany(_(64,127),10,12,13),o.addMany(_(64,127),9,12,13),o.addMany(y,13,13,13),o.addMany(m,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(f,0,2,0),o.add(f,8,5,8),o.add(f,6,0,6),o.add(f,11,0,11),o.add(f,13,13,13),o}();class l extends p.Disposable{constructor(d=s.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new i.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,m,y)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,m)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new r.OscParser),this._dcsParser=this.register(new u.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,_=[64,126]){let m=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=d.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<d.intermediates.length;++b){let S=d.intermediates.charCodeAt(b);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let y=d.final.charCodeAt(0);if(_[0]>y||y>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return m<<=8,m|=y,m}identToString(d){let _=[];for(;d;)_.push(String.fromCharCode(255&d)),d>>=8;return _.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,_){let m=this._identifier(d,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(_),{dispose:()=>{let b=y.indexOf(_);b!==-1&&y.splice(b,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,_){this._executeHandlers[d.charCodeAt(0)]=_}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,_){let m=this._identifier(d);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(_),{dispose:()=>{let b=y.indexOf(_);b!==-1&&y.splice(b,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,_){return this._dcsParser.registerHandler(this._identifier(d),_)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,_){return this._oscParser.registerHandler(d,_)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,_,m,y,b){this._parseStack.state=d,this._parseStack.handlers=_,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=b}parse(d,_,m){let y,b=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&C>-1){for(;C>=0&&(y=g[C](this._params),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&C>-1){for(;C>=0&&(y=g[C](),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 6:if(b=d[this._parseStack.chunkPos],y=this._dcsParser.unhook(b!==24&&b!==26,m),y)return y;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=d[this._parseStack.chunkPos],y=this._oscParser.end(b!==24&&b!==26,m),y)return y;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<_;++g){switch(b=d[g],S=this._transitions.table[this.currentState<<8|(b<160?b:f)],S>>4){case 2:for(let M=g+1;;++M){if(M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let C=this._csiHandlers[this._collect<<8|b],F=C?C.length-1:-1;for(;F>=0&&(y=C[F](this._params),y!==!0);F--)if(y instanceof Promise)return this._preserveStack(3,C,F,S,g),y;F<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++g<_&&(b=d[g])>47&&b<60);g--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let E=this._escHandlers[this._collect<<8|b],T=E?E.length-1:-1;for(;T>=0&&(y=E[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,E,T,S,g),y;T<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let M=g+1;;++M)if(M>=_||(b=d[M])===24||b===26||b===27||b>127&&b<f){this._dcsParser.put(d,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(b!==24&&b!==26),y)return this._preserveStack(6,[],0,S,g),y;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=_||(b=d[M])<32||b>127&&b<f){this._oscParser.put(d,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(b!==24&&b!==26),y)return this._preserveStack(5,[],0,S,g),y;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}s.EscapeSequenceParser=l},6242:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let p=a(5770),i=a(482),r=[];s.OscParser=class{constructor(){this._state=0,this._active=r,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(u,c){this._handlers[u]===void 0&&(this._handlers[u]=[]);let f=this._handlers[u];return f.push(c),{dispose:()=>{let l=f.indexOf(c);l!==-1&&f.splice(l,1)}}}clearHandler(u){this._handlers[u]&&delete this._handlers[u]}setHandlerFallback(u){this._handlerFb=u}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=r}reset(){if(this._state===2)for(let u=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;u>=0;--u)this._active[u].end(!1);this._stack.paused=!1,this._active=r,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||r,this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].start();else this._handlerFb(this._id,"START")}_put(u,c,f){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(u,c,f);else this._handlerFb(this._id,"PUT",(0,i.utf32ToString)(u,c,f))}start(){this.reset(),this._state=1}put(u,c,f){if(this._state!==3){if(this._state===1)for(;c<f;){let l=u[c++];if(l===59){this._state=2,this._start();break}if(l<48||57<l)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+l-48}this._state===2&&f-c>0&&this._put(u,c,f)}}end(u,c=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let f=!1,l=this._active.length-1,o=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,f=c,o=this._stack.fallThrough,this._stack.paused=!1),!o&&f===!1){for(;l>=0&&(f=this._active[l].end(u),f!==!0);l--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,f;l--}for(;l>=0;l--)if(f=this._active[l].end(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,f}else this._handlerFb(this._id,"END",u);this._active=r,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(u){this._handler=u,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(u,c,f){this._hitLimit||(this._data+=(0,i.utf32ToString)(u,c,f),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(u){let c=!1;if(this._hitLimit)c=!1;else if(u&&(c=this._handler(this._data),c instanceof Promise))return c.then(f=>(this._data="",this._hitLimit=!1,f));return this._data="",this._hitLimit=!1,c}}},8742:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let a=2147483647;class p{static fromArray(r){let u=new p;if(!r.length)return u;for(let c=Array.isArray(r[0])?1:0;c<r.length;++c){let f=r[c];if(Array.isArray(f))for(let l=0;l<f.length;++l)u.addSubParam(f[l]);else u.addParam(f)}return u}constructor(r=32,u=32){if(this.maxLength=r,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(r),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(r),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let r=new p(this.maxLength,this.maxSubParamsLength);return r.params.set(this.params),r.length=this.length,r._subParams.set(this._subParams),r._subParamsLength=this._subParamsLength,r._subParamsIdx.set(this._subParamsIdx),r._rejectDigits=this._rejectDigits,r._rejectSubDigits=this._rejectSubDigits,r._digitIsSub=this._digitIsSub,r}toArray(){let r=[];for(let u=0;u<this.length;++u){r.push(this.params[u]);let c=this._subParamsIdx[u]>>8,f=255&this._subParamsIdx[u];f-c>0&&r.push(Array.prototype.slice.call(this._subParams,c,f))}return r}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(r){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=r>a?a:r}}addSubParam(r){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=r>a?a:r,this._subParamsIdx[this.length-1]++}}hasSubParams(r){return(255&this._subParamsIdx[r])-(this._subParamsIdx[r]>>8)>0}getSubParams(r){let u=this._subParamsIdx[r]>>8,c=255&this._subParamsIdx[r];return c-u>0?this._subParams.subarray(u,c):null}getSubParamsAll(){let r={};for(let u=0;u<this.length;++u){let c=this._subParamsIdx[u]>>8,f=255&this._subParamsIdx[u];f-c>0&&(r[u]=this._subParams.slice(c,f))}return r}addDigit(r){let u;if(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let c=this._digitIsSub?this._subParams:this.params,f=c[u-1];c[u-1]=~f?Math.min(10*f+r,a):r}}s.Params=p},5741:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,p){let i={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(i),p.dispose=()=>this._wrappedAddonDispose(i),p.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let p=-1;for(let i=0;i<this._addons.length;i++)if(this._addons[i]===a){p=i;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(p,1)}}},8771:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let p=a(3785),i=a(511);s.BufferApiView=class{constructor(r,u){this._buffer=r,this.type=u}init(r){return this._buffer=r,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(r){let u=this._buffer.lines.get(r);if(u)return new p.BufferLineApiView(u)}getNullCell(){return new i.CellData}}},3785:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let p=a(511);s.BufferLineApiView=class{constructor(i){this._line=i}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(i,r){if(!(i<0||i>=this._line.length))return r?(this._line.loadCell(i,r),r):this._line.loadCell(i,new p.CellData)}translateToString(i,r,u){return this._line.translateToString(i,r,u)}}},8285:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let p=a(8771),i=a(8460),r=a(844);class u extends r.Disposable{constructor(f){super(),this._core=f,this._onBufferChange=this.register(new i.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=u},7975:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,p){return this._core.registerCsiHandler(a,i=>p(i.toArray()))}addCsiHandler(a,p){return this.registerCsiHandler(a,p)}registerDcsHandler(a,p){return this._core.registerDcsHandler(a,(i,r)=>p(i,r.toArray()))}addDcsHandler(a,p){return this.registerDcsHandler(a,p)}registerEscHandler(a,p){return this._core.registerEscHandler(a,p)}addEscHandler(a,p){return this.registerEscHandler(a,p)}registerOscHandler(a,p){return this._core.registerOscHandler(a,p)}addOscHandler(a,p){return this.registerOscHandler(a,p)}}},7090:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let r=a(8460),u=a(844),c=a(5295),f=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let l=s.BufferService=class extends u.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new c.BufferSet(o,this))}resize(o,d){this.cols=o,this.rows=d,this.buffers.resize(o,d),this._onResize.fire({cols:o,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,d=!1){let _=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===o.fg&&m.getBg(0)===o.bg||(m=_.getBlankLine(o,d),this._cachedBlankLine=m),m.isWrapped=d;let y=_.ybase+_.scrollTop,b=_.ybase+_.scrollBottom;if(_.scrollTop===0){let S=_.lines.isFull;b===_.lines.length-1?S?_.lines.recycle().copyFrom(m):_.lines.push(m.clone()):_.lines.splice(b+1,0,m.clone()),S?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let S=b-y+1;_.lines.shiftElements(y+1,S-1,-1),_.lines.set(b,m.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(o,d,_){let m=this.buffer;if(o<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else o+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+o,m.ybase),0),y!==m.ydisp&&(d||this._onScroll.fire(m.ydisp))}};s.BufferService=l=p([i(0,f.IOptionsService)],l)},7994:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,p){this._charsets[a]=p,this.glevel===a&&(this.charset=p)}}},1753:function(v,s,a){var p=this&&this.__decorate||function(m,y,b,S){var D,g=arguments.length,C=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,y,b,S);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(C=(g<3?D(C):g>3?D(y,b,C):D(y,b))||C);return g>3&&C&&Object.defineProperty(y,b,C),C},i=this&&this.__param||function(m,y){return function(b,S){y(b,S,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let r=a(2585),u=a(8460),c=a(844),f={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function l(m,y){let b=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(b|=64,b|=m.action):(b|=3&m.button,4&m.button&&(b|=64),8&m.button&&(b|=128),m.action===32?b|=32:m.action!==0||y||(b|=3)),b}let o=String.fromCharCode,d={DEFAULT:m=>{let y=[l(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${o(y[0])}${o(y[1])}${o(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${l(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${l(m,!0)};${m.x};${m.y}${y}`}},_=s.CoreMouseService=class extends c.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new u.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(f))this.addProtocol(b,f[b]);for(let b of Object.keys(d))this.addEncoding(b,d[b]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,b){if(b){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};s.CoreMouseService=_=p([i(0,r.IBufferService),i(1,r.ICoreService)],_)},6975:function(v,s,a){var p=this&&this.__decorate||function(_,m,y,b){var S,D=arguments.length,g=D<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,m,y,b);else for(var C=_.length-1;C>=0;C--)(S=_[C])&&(g=(D<3?S(g):D>3?S(m,y,g):S(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},i=this&&this.__param||function(_,m){return function(y,b){m(y,b,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let r=a(1439),u=a(8460),c=a(844),f=a(2585),l=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=s.CoreService=class extends c.Disposable{constructor(_,m,y){super(),this._bufferService=_,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new u.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new u.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new u.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new u.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,r.clone)(l),this.decPrivateModes=(0,r.clone)(o)}reset(){this.modes=(0,r.clone)(l),this.decPrivateModes=(0,r.clone)(o)}triggerDataEvent(_,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(b=>b.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(_))}};s.CoreService=d=p([i(0,f.IBufferService),i(1,f.ILogService),i(2,f.IOptionsService)],d)},9074:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let p=a(8055),i=a(8460),r=a(844),u=a(6106),c=0,f=0;class l extends r.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new u.SortedList(_=>_?.marker.line),this._onDecorationRegistered=this.register(new i.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new i.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,r.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;let m=new o(_);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,m,y){var b,S,D;let g=0,C=0;for(let F of this._decorations.getKeyIterator(m))g=(b=F.options.x)!==null&&b!==void 0?b:0,C=g+((S=F.options.width)!==null&&S!==void 0?S:1),_>=g&&_<C&&(!y||((D=F.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield F)}forEachDecorationAtCell(_,m,y,b){this._decorations.forEachByKey(m,S=>{var D,g,C;c=(D=S.options.x)!==null&&D!==void 0?D:0,f=c+((g=S.options.width)!==null&&g!==void 0?g:1),_>=c&&_<f&&(!y||((C=S.options.layer)!==null&&C!==void 0?C:"bottom")===y)&&b(S)})}}s.DecorationService=l;class o extends r.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new i.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new i.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let p=a(2585),i=a(8343);class r{constructor(...c){this._entries=new Map;for(let[f,l]of c)this.set(f,l)}set(c,f){let l=this._entries.get(c);return this._entries.set(c,f),l}forEach(c){for(let[f,l]of this._entries.entries())c(f,l)}has(c){return this._entries.has(c)}get(c){return this._entries.get(c)}}s.ServiceCollection=r,s.InstantiationService=class{constructor(){this._services=new r,this._services.set(p.IInstantiationService,this)}setService(u,c){this._services.set(u,c)}getService(u){return this._services.get(u)}createInstance(u,...c){let f=(0,i.getServiceDependencies)(u).sort((d,_)=>d.index-_.index),l=[];for(let d of f){let _=this._services.get(d.id);if(!_)throw new Error(`[createInstance] ${u.name} depends on UNKNOWN service ${d.id}.`);l.push(_)}let o=f.length>0?f[0].index:c.length;if(c.length!==o)throw new Error(`[createInstance] First service dependency of ${u.name} at position ${o+1} conflicts with ${c.length} static arguments`);return new u(...c,...l)}}},7866:function(v,s,a){var p=this&&this.__decorate||function(o,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,d,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},i=this&&this.__param||function(o,d){return function(_,m){d(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(844),u=a(2585),c={trace:u.LogLevelEnum.TRACE,debug:u.LogLevelEnum.DEBUG,info:u.LogLevelEnum.INFO,warn:u.LogLevelEnum.WARN,error:u.LogLevelEnum.ERROR,off:u.LogLevelEnum.OFF},f,l=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=u.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),f=this}_updateLogLevel(){this._logLevel=c[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let d=0;d<o.length;d++)typeof o[d]=="function"&&(o[d]=o[d]())}_log(o,d,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,..._)}trace(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,d)}debug(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,d)}info(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,d)}warn(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,d)}error(o,...d){var _,m;this._logLevel<=u.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,d)}};s.LogService=l=p([i(0,u.IOptionsService)],l),s.setTraceLogger=function(o){f=o},s.traceCall=function(o,d,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(f.logLevel!==u.LogLevelEnum.TRACE)return m.apply(this,y);f.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let b=m.apply(this,y);return f.trace(`GlyphRenderer#${m.name} return`,b),b}}},7302:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let p=a(8460),i=a(844),r=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:r.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let u=["normal","bold","100","200","300","400","500","600","700","800","900"];class c extends i.Disposable{constructor(l){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;let o=Object.assign({},s.DEFAULT_OPTIONS);for(let d in l)if(d in o)try{let _=l[d];o[d]=this._sanitizeAndValidateOption(d,_)}catch(_){console.error(_)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(l,o){return this.onOptionChange(d=>{d===l&&o(this.rawOptions[l])})}onMultipleOptionChange(l,o){return this.onOptionChange(d=>{l.indexOf(d)!==-1&&o()})}_setupOptions(){let l=d=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},o=(d,_)=>{if(!(d in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);_=this._sanitizeAndValidateOption(d,_),this.rawOptions[d]!==_&&(this.rawOptions[d]=_,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let _={get:l.bind(this,d),set:o.bind(this,d)};Object.defineProperty(this.options,d,_)}}_sanitizeAndValidateOption(l,o){switch(l){case"cursorStyle":if(o||(o=s.DEFAULT_OPTIONS[l]),!function(d){return d==="block"||d==="underline"||d==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${l}`);break;case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[l]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=u.includes(o)?o:s.DEFAULT_OPTIONS[l];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${l} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${l} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${l} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${l} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}s.OptionsService=c},2660:function(v,s,a){var p=this&&this.__decorate||function(c,f,l,o){var d,_=arguments.length,m=_<3?f:o===null?o=Object.getOwnPropertyDescriptor(f,l):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(c,f,l,o);else for(var y=c.length-1;y>=0;y--)(d=c[y])&&(m=(_<3?d(m):_>3?d(f,l,m):d(f,l))||m);return _>3&&m&&Object.defineProperty(f,l,m),m},i=this&&this.__param||function(c,f){return function(l,o){f(l,o,c)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let r=a(2585),u=s.OscLinkService=class{constructor(c){this._bufferService=c,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(c){let f=this._bufferService.buffer;if(c.id===void 0){let y=f.addMarker(f.ybase+f.y),b={data:c,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(b,y)),this._dataByLinkId.set(b.id,b),b.id}let l=c,o=this._getEntryIdKey(l),d=this._entriesWithId.get(o);if(d)return this.addLineToLink(d.id,f.ybase+f.y),d.id;let _=f.addMarker(f.ybase+f.y),m={id:this._nextId++,key:this._getEntryIdKey(l),data:l,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(c,f){let l=this._dataByLinkId.get(c);if(l&&l.lines.every(o=>o.line!==f)){let o=this._bufferService.buffer.addMarker(f);l.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(l,o))}}getLinkData(c){var f;return(f=this._dataByLinkId.get(c))===null||f===void 0?void 0:f.data}_getEntryIdKey(c){return`${c.id};;${c.uri}`}_removeMarkerFromLink(c,f){let l=c.lines.indexOf(f);l!==-1&&(c.lines.splice(l,1),c.lines.length===0&&(c.data.id!==void 0&&this._entriesWithId.delete(c.key),this._dataByLinkId.delete(c.id)))}};s.OscLinkService=u=p([i(0,r.IBufferService)],u)},8343:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",p="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(i){return i[p]||[]},s.createDecorator=function(i){if(s.serviceRegistry.has(i))return s.serviceRegistry.get(i);let r=function(u,c,f){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(l,o,d){o[a]===o?o[p].push({id:l,index:d}):(o[p]=[{id:l,index:d}],o[a]=o)})(r,u,f)};return r.toString=()=>i,s.serviceRegistry.set(i,r),r}},2585:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let p=a(8343);var i;s.IBufferService=(0,p.createDecorator)("BufferService"),s.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),s.ICoreService=(0,p.createDecorator)("CoreService"),s.ICharsetService=(0,p.createDecorator)("CharsetService"),s.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(i||(s.LogLevelEnum=i={})),s.ILogService=(0,p.createDecorator)("LogService"),s.IOptionsService=(0,p.createDecorator)("OptionsService"),s.IOscLinkService=(0,p.createDecorator)("OscLinkService"),s.IUnicodeService=(0,p.createDecorator)("UnicodeService"),s.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let p=a(8460),i=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;let r=new i.UnicodeV6;this.register(r),this._active=r.version,this._activeProvider=r}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(r){if(!this._providers[r])throw new Error(`unknown Unicode version "${r}"`);this._active=r,this._activeProvider=this._providers[r],this._onChange.fire(r)}register(r){this._providers[r.version]=r}wcwidth(r){return this._activeProvider.wcwidth(r)}getStringCellWidth(r){let u=0,c=r.length;for(let f=0;f<c;++f){let l=r.charCodeAt(f);if(55296<=l&&l<=56319){if(++f>=c)return u+this.wcwidth(l);let o=r.charCodeAt(f);56320<=o&&o<=57343?l=1024*(l-55296)+o-56320+65536:u+=this.wcwidth(o)}u+=this.wcwidth(l)}return u}}}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let s=n(9042),a=n(3236),p=n(844),i=n(5741),r=n(8285),u=n(7975),c=n(7090),f=["cols","rows"];class l extends p.Disposable{constructor(d){super(),this._core=this.register(new a.Terminal(d)),this._addonManager=this.register(new i.AddonManager),this._publicOptions=Object.assign({},this._core.options);let _=y=>this._core.options[y],m=(y,b)=>{this._checkReadonlyOptions(y),this._core.options[y]=b};for(let y in this._core.options){let b={get:_.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,b)}}_checkReadonlyOptions(d){if(f.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new u.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new r.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let d=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(let _ in d)this._publicOptions[_]=d[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,_){this._verifyIntegers(d,_),this._core.resize(d,_)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var _,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((_=d.x)!==null&&_!==void 0?_:0,(m=d.width)!==null&&m!==void 0?m:0,(y=d.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,_,m){this._verifyIntegers(d,_,m),this._core.select(d,_,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,_){this._verifyIntegers(d,_),this._core.selectLines(d,_)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,_){this._core.write(d,_)}writeln(d,_){this._core.write(d),this._core.write(`\r
`,_)}paste(d){this._core.paste(d)}refresh(d,_){this._verifyIntegers(d,_),this._core.refresh(d,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return s}_verifyIntegers(...d){for(let _ of d)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(let _ of d)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}v.Terminal=l})(),h})())});var Oh=ht((O1,kh)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(i,r,u){if(typeof i!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(u=r),n.modules[i]||(n.payloads[i]=u,n.modules[i]=null)};n.modules={},n.payloads={};var h=function(i,r,u){if(typeof r=="string"){var c=a(i,r);if(c!=null)return u&&u(),c}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var f=[],l=0,o=r.length;l<o;++l){var d=a(i,r[l]);if(d==null&&v.original)return;f.push(d)}return u&&u.apply(null,f)||!0}},v=function(i,r){var u=h("",i,r);return u==null&&v.original?v.original.apply(this,arguments):u},s=function(i,r){if(r.indexOf("!")!==-1){var u=r.split("!");return s(i,u[0])+"!"+s(i,u[1])}if(r.charAt(0)=="."){var c=i.split("/").slice(0,-1).join("/");for(r=c+"/"+r;r.indexOf(".")!==-1&&f!=r;){var f=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return r},a=function(i,r){r=s(i,r);var u=n.modules[r];if(!u){if(u=n.payloads[r],typeof u=="function"){var c={},f={id:r,uri:"",exports:c,packaged:!0},l=function(d,_){return h(r,d,_)},o=u(l,c,f);c=o||f.exports,n.modules[r]=c,delete n.payloads[r]}u=n.modules[r]=c||u}return u};function p(i){var r=t;i&&(t[i]||(t[i]={}),r=t[i]),(!r.define||!r.define.packaged)&&(n.original=r.define,r.define=n,r.define.packaged=!0),(!r.require||!r.require.packaged)&&(v.original=r.require,r.require=v,r.require.packaged=!0)}p(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function h(v,s,a){Object.defineProperty(v,s,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||h(String.prototype,"startsWith",function(v,s){return s=s||0,this.lastIndexOf(v,s)===s}),String.prototype.endsWith||h(String.prototype,"endsWith",function(v,s){var a=this;(s===void 0||s>a.length)&&(s=a.length),s-=v.length;var p=a.indexOf(v,s);return p!==-1&&p===s}),String.prototype.repeat||h(String.prototype,"repeat",function(v){for(var s="",a=this;v>0;)v&1&&(s+=a),(v>>=1)&&(a+=a);return s}),String.prototype.includes||h(String.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Object.assign||(Object.assign=function(v){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(v),a=1;a<arguments.length;a++){var p=arguments[a];p!=null&&Object.keys(p).forEach(function(i){s[i]=p[i]})}return s}),Object.values||(Object.values=function(v){return Object.keys(v).map(function(s){return v[s]})}),Array.prototype.find||h(Array.prototype,"find",function(v){for(var s=this.length,a=arguments[1],p=0;p<s;p++){var i=this[p];if(v.call(a,i,p,this))return i}}),Array.prototype.findIndex||h(Array.prototype,"findIndex",function(v){for(var s=this.length,a=arguments[1],p=0;p<s;p++){var i=this[p];if(v.call(a,i,p,this))return p}}),Array.prototype.includes||h(Array.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Array.prototype.fill||h(Array.prototype,"fill",function(v){for(var s=this,a=s.length>>>0,p=arguments[1],i=p>>0,r=i<0?Math.max(a+i,0):Math.min(i,a),u=arguments[2],c=u===void 0?a:u>>0,f=c<0?Math.max(a+c,0):Math.min(c,a);r<f;)s[r]=v,r++;return s}),Array.of||h(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function h(v){if(typeof v!="object"||!v)return v;var s;if(Array.isArray(v)){s=[];for(var a=0;a<v.length;a++)s[a]=h(v[a]);return s}if(Object.prototype.toString.call(v)!=="[object Object]")return v;s={};for(var a in v)s[a]=h(v[a]);return s}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(s){return s[s.length-1]},t.stringReverse=function(s){return s.split("").reverse().join("")},t.stringRepeat=function(s,a){for(var p="";a>0;)a&1&&(p+=s),(a>>=1)&&(s+=s);return p};var h=/^\s\s*/,v=/\s\s*$/;t.stringTrimLeft=function(s){return s.replace(h,"")},t.stringTrimRight=function(s){return s.replace(v,"")},t.copyObject=function(s){var a={};for(var p in s)a[p]=s[p];return a},t.copyArray=function(s){for(var a=[],p=0,i=s.length;p<i;p++)s[p]&&typeof s[p]=="object"?a[p]=this.copyObject(s[p]):a[p]=s[p];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(s){for(var a={},p=0;p<s.length;p++)a[s[p]]=1;return a},t.createMap=function(s){var a=Object.create(null);for(var p in s)a[p]=s[p];return a},t.arrayRemove=function(s,a){for(var p=0;p<=s.length;p++)a===s[p]&&s.splice(p,1)},t.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(s,a){var p=[];return s.replace(a,function(i){p.push({offset:arguments[arguments.length-2],length:i.length})}),p},t.deferredCall=function(s){var a=null,p=function(){a=null,s()},i=function(r){return i.cancel(),a=setTimeout(p,r||0),i};return i.schedule=i,i.call=function(){return this.cancel(),s(),i},i.cancel=function(){return clearTimeout(a),a=null,i},i.isPending=function(){return a},i},t.delayedCall=function(s,a){var p=null,i=function(){p=null,s()},r=function(u){p==null&&(p=setTimeout(i,u||a))};return r.delay=function(u){p&&clearTimeout(p),p=setTimeout(i,u||a)},r.schedule=r,r.call=function(){this.cancel(),s()},r.cancel=function(){p&&clearTimeout(p),p=null},r.isPending=function(){return p},r},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(s,a,p){return p&&s.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var h=typeof navigator=="object"?navigator:{},v=(/mac|win|linux/i.exec(h.platform)||["other"])[0].toLowerCase(),s=h.userAgent||"",a=h.appName||"";t.isWin=v=="win",t.isMac=v=="mac",t.isLinux=v=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(s.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./useragent"),v="http://www.w3.org/1999/xhtml";t.buildDom=function u(c,f,l){if(typeof c=="string"&&c){var o=document.createTextNode(c);return f&&f.appendChild(o),o}if(!Array.isArray(c))return c&&c.appendChild&&f&&f.appendChild(c),c;if(typeof c[0]!="string"||!c[0]){for(var d=[],_=0;_<c.length;_++){var m=u(c[_],f,l);m&&d.push(m)}return d}var y=document.createElement(c[0]),b=c[1],S=1;b&&typeof b=="object"&&!Array.isArray(b)&&(S=2);for(var _=S;_<c.length;_++)u(c[_],y,l);return S==2&&Object.keys(b).forEach(function(D){var g=b[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?l&&(l[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),f&&f.appendChild(y),y},t.getDocumentHead=function(u){return u||(u=document),u.head||u.getElementsByTagName("head")[0]||u.documentElement},t.createElement=function(u,c){return document.createElementNS?document.createElementNS(c||v,u):document.createElement(u)},t.removeChildren=function(u){u.innerHTML=""},t.createTextNode=function(u,c){var f=c?c.ownerDocument:document;return f.createTextNode(u)},t.createFragment=function(u){var c=u?u.ownerDocument:document;return c.createDocumentFragment()},t.hasCssClass=function(u,c){var f=(u.className+"").split(/\s+/g);return f.indexOf(c)!==-1},t.addCssClass=function(u,c){t.hasCssClass(u,c)||(u.className+=" "+c)},t.removeCssClass=function(u,c){for(var f=u.className.split(/\s+/g);;){var l=f.indexOf(c);if(l==-1)break;f.splice(l,1)}u.className=f.join(" ")},t.toggleCssClass=function(u,c){for(var f=u.className.split(/\s+/g),l=!0;;){var o=f.indexOf(c);if(o==-1)break;l=!1,f.splice(o,1)}return l&&f.push(c),u.className=f.join(" "),l},t.setCssClass=function(u,c,f){f?t.addCssClass(u,c):t.removeCssClass(u,c)},t.hasCssString=function(u,c){var f=0,l;if(c=c||document,l=c.querySelectorAll("style")){for(;f<l.length;)if(l[f++].id===u)return!0}},t.removeElementById=function(u,c){c=c||document,c.getElementById(u)&&c.getElementById(u).remove()};var s,a=[];t.useStrictCSP=function(u){s=u,u==!1?p():a||(a=[])};function p(){var u=a;a=null,u&&u.forEach(function(c){i(c[0],c[1])})}function i(u,c,f){if(!(typeof document>"u")){if(a){if(f)p();else if(f===!1)return a.push([u,c])}if(!s){var l=f;!f||!f.getRootNode?l=document:(l=f.getRootNode(),(!l||l==f)&&(l=document));var o=l.ownerDocument||l;if(c&&t.hasCssString(c,l))return null;c&&(u+=`
/*# sourceURL=ace/css/`+c+" */");var d=t.createElement("style");d.appendChild(o.createTextNode(u)),c&&(d.id=c),l==o&&(l=t.getDocumentHead(o)),l.insertBefore(d,l.firstChild)}}}if(t.importCssString=i,t.importCssStylsheet=function(u,c){t.buildDom(["link",{rel:"stylesheet",href:u}],t.getDocumentHead(c))},t.scrollbarWidth=function(u){var c=t.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";var f=t.createElement("ace_outer"),l=f.style;l.position="absolute",l.left="-10000px",l.overflow="hidden",l.width="200px",l.minWidth="0px",l.height="150px",l.display="block",f.appendChild(c);var o=u&&u.documentElement||document&&document.documentElement;if(!o)return 0;o.appendChild(f);var d=c.offsetWidth;l.overflow="scroll";var _=c.offsetWidth;return d===_&&(_=f.clientWidth),o.removeChild(f),d-_},t.computedStyle=function(u,c){return window.getComputedStyle(u,"")||{}},t.setStyle=function(u,c,f){u[c]!==f&&(u[c]=f)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=h.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,h.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var r=document.createElement("div");t.HI_DPI&&r.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!h.isEdge&&typeof r.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),r=null}t.HAS_CSS_TRANSFORMS?t.translate=function(u,c,f){u.style.transform="translate("+Math.round(c)+"px, "+Math.round(f)+"px)"}:t.translate=function(u,c,f){u.style.top=Math.round(f)+"px",u.style.left=Math.round(c)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./dom");t.get=function(v,s){var a=new XMLHttpRequest;a.open("GET",v,!0),a.onreadystatechange=function(){a.readyState===4&&s(a.responseText)},a.send(null)},t.loadScript=function(v,s){var a=h.getDocumentHead(),p=document.createElement("script");p.src=v,a.appendChild(p),p.onload=p.onreadystatechange=function(i,r){(r||!p.readyState||p.readyState=="loaded"||p.readyState=="complete")&&(p=p.onload=p.onreadystatechange=null,r||s())}},t.qualifyURL=function(v){var s=document.createElement("a");return s.href=v,s.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(h,v){h.super_=v,h.prototype=Object.create(v.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(h,v){for(var s in v)h[s]=v[s];return h},t.implement=function(h,v){t.mixin(h,v)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var h={},v=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};h._emit=h._dispatchEvent=function(a,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[a]||[],r=this._defaultHandlers[a];if(!(!i.length&&!r)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=a),p.stopPropagation||(p.stopPropagation=v),p.preventDefault||(p.preventDefault=s),i=i.slice();for(var u=0;u<i.length&&(i[u](p,this),!p.propagationStopped);u++);if(r&&!p.defaultPrevented)return r(p,this)}},h._signal=function(a,p){var i=(this._eventRegistry||{})[a];if(i){i=i.slice();for(var r=0;r<i.length;r++)i[r](p,this)}},h.once=function(a,p){var i=this;if(this.on(a,function r(){i.off(a,r),p.apply(null,arguments)}),!p)return new Promise(function(r){p=r})},h.setDefaultHandler=function(a,p){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[a]){var r=i[a],u=i._disabled_[a];u||(i._disabled_[a]=u=[]),u.push(r);var c=u.indexOf(p);c!=-1&&u.splice(c,1)}i[a]=p},h.removeDefaultHandler=function(a,p){var i=this._defaultHandlers;if(i){var r=i._disabled_[a];if(i[a]==p)r&&this.setDefaultHandler(a,r.pop());else if(r){var u=r.indexOf(p);u!=-1&&r.splice(u,1)}}},h.on=h.addEventListener=function(a,p,i){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[a];return r||(r=this._eventRegistry[a]=[]),r.indexOf(p)==-1&&r[i?"unshift":"push"](p),p},h.off=h.removeListener=h.removeEventListener=function(a,p){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[a];if(i){var r=i.indexOf(p);r!==-1&&i.splice(r,1)}},h.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=h});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(v,s){var a=new Error(v);a.data=s,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var h=e("./oop"),v=e("./event_emitter").EventEmitter,s=e("./report_error").reportError,a={setOptions:function(u){Object.keys(u).forEach(function(c){this.setOption(c,u[c])},this)},getOptions:function(u){var c={};if(u)Array.isArray(u)||(c=u,u=Object.keys(c));else{var f=this.$options;u=Object.keys(f).filter(function(l){return!f[l].hidden})}return u.forEach(function(l){c[l]=this.getOption(l)},this),c},setOption:function(u,c){if(this["$"+u]!==c){var f=this.$options[u];if(!f)return p('misspelled option "'+u+'"');if(f.forwardTo)return this[f.forwardTo]&&this[f.forwardTo].setOption(u,c);f.handlesSet||(this["$"+u]=c),f&&f.set&&f.set.call(this,c)}},getOption:function(u){var c=this.$options[u];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(u):c&&c.get?c.get.call(this):this["$"+u]:p('misspelled option "'+u+'"')}};function p(u){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var i,r=function(){function u(){this.$defaultOptions={}}return u.prototype.defineOptions=function(c,f,l){return c.$options||(this.$defaultOptions[f]=c.$options={}),Object.keys(l).forEach(function(o){var d=l[o];typeof d=="string"&&(d={forwardTo:d}),d.name||(d.name=o),c.$options[d.name]=d,"initialValue"in d&&(c["$"+d.name]=d.initialValue)}),h.implement(c,a),this},u.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(f){var l=c.$options[f];"value"in l&&c.setOption(f,l.value)})},u.prototype.setDefaultValue=function(c,f,l){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][f])break;if(!this.$defaultOptions[c][f])return!1}var o=this.$defaultOptions[c]||(this.$defaultOptions[c]={});o[f]&&(o.forwardTo?this.setDefaultValue(o.forwardTo,f,l):o[f].value=l)},u.prototype.setDefaultValues=function(c,f){Object.keys(f).forEach(function(l){this.setDefaultValue(c,l,f[l])},this)},u.prototype.setMessages=function(c){i=c},u.prototype.nls=function(c,f){i&&!i[c]&&p("No message found for '"+c+"' in the provided messages, falling back to default English message.");var l=i&&i[c]||c;return f&&(l=l.replace(/\$(\$|[\d]+)/g,function(o,d){return d=="$"?"$":f[d]})),l},u}();r.prototype.warn=p,r.prototype.reportError=s,h.implement(r.prototype,v),t.AppConfig=r});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var h=e("../lib/dom");h.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var h=e("./lib/lang"),v=e("./lib/net"),s=e("./lib/dom"),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var p={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(c){if(!p.hasOwnProperty(c))throw new Error("Unknown config key: "+c);return p[c]},t.set=function(c,f){if(p.hasOwnProperty(c))p[c]=f;else if(this.setDefaultValue("",c,f)==!1)throw new Error("Unknown config key: "+c);c=="useStrictCSP"&&s.useStrictCSP(f)},t.all=function(){return h.copyObject(p)},t.$modes={},t.moduleUrl=function(c,f){if(p.$moduleUrls[c])return p.$moduleUrls[c];var l=c.split("/");f=f||l[l.length-2]||"";var o=f=="snippets"?"/":"-",d=l[l.length-1];if(f=="worker"&&o=="-"){var _=new RegExp("^"+f+"[\\-_]|[\\-_]"+f+"$","g");d=d.replace(_,"")}(!d||d==f)&&l.length>1&&(d=l[l.length-2]);var m=p[f+"Path"];return m==null?m=p.basePath:o=="/"&&(f=o=""),m&&m.slice(-1)!="/"&&(m+="/"),m+f+o+d+this.get("suffix")},t.setModuleUrl=function(c,f){return p.$moduleUrls[c]=f};var i=function(c,f){if(c==="ace/theme/textmate"||c==="./theme/textmate")return f(null,e("./theme/textmate"));if(r)return r(c,f);console.error("loader is not configured")},r;t.setLoader=function(c){r=c},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(c,f){var l;if(Array.isArray(c))var o=c[0],d=c[1];else if(typeof c=="string")var d=c;var _=function(m){if(m&&!t.$loading[d])return f&&f(m);if(t.$loading[d]||(t.$loading[d]=[]),t.$loading[d].push(f),!(t.$loading[d].length>1)){var y=function(){i(d,function(b,S){S&&(t.$loaded[d]=S),t._emit("load.module",{name:d,module:S});var D=t.$loading[d];t.$loading[d]=null,D.forEach(function(g){g&&g(S)})})};if(!t.get("packaged"))return y();v.loadScript(t.moduleUrl(d,o),y),u()}};if(t.dynamicModules[d])t.dynamicModules[d]().then(function(m){m.default?_(m.default):_(m)});else{try{l=this.$require(d)}catch{}_(l||t.$loaded[d])}},t.$require=function(c){if(typeof n.require=="function"){var f="require";return n[f](c)}},t.setModuleLoader=function(c,f){t.dynamicModules[c]=f};var u=function(){!p.basePath&&!p.workerPath&&!p.modePath&&!p.themePath&&!Object.keys(p.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),u=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var h=e("./config");h.setLoader(function(p,i){e([p],function(r){i(null,r)})});var v=function(){return this||typeof window<"u"&&window}();n.exports=function(p){h.init=s,h.$require=e,p.require=e,typeof define=="function"&&(p.define=define)},s(!0);function s(p){if(!(!v||!v.document)){h.set("packaged",p||e.packaged||n.packaged||v.define&&define.packaged);var i={},r="",u=document.currentScript||document._currentScript,c=u&&u.ownerDocument||document;u&&u.src&&(r=u.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var f=c.getElementsByTagName("script"),l=0;l<f.length;l++){var o=f[l],d=o.src||o.getAttribute("src");if(d){for(var _=o.attributes,m=0,y=_.length;m<y;m++){var b=_[m];b.name.indexOf("data-ace-")===0&&(i[a(b.name.replace(/^data-ace-/,""))]=b.value)}var S=d.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(r=S[1])}}r&&(i.base=i.base||r,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var D in i)typeof i[D]<"u"&&h.set(D,i[D])}}function a(p){return p.replace(/-(.)/g,function(i,r){return r.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var h=function(){function v(s,a,p,i){this.start={row:s,column:a},this.end={row:p,column:i}}return v.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},v.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},v.prototype.contains=function(s,a){return this.compare(s,a)==0},v.prototype.compareRange=function(s){var a,p=s.end,i=s.start;return a=this.compare(p.row,p.column),a==1?(a=this.compare(i.row,i.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(i.row,i.column),a==-1?-1:a==1?42:0)},v.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},v.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},v.prototype.intersects=function(s){var a=this.compareRange(s);return a==-1||a==0||a==1},v.prototype.isEnd=function(s,a){return this.end.row==s&&this.end.column==a},v.prototype.isStart=function(s,a){return this.start.row==s&&this.start.column==a},v.prototype.setStart=function(s,a){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=a)},v.prototype.setEnd=function(s,a){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=a)},v.prototype.inside=function(s,a){return this.compare(s,a)==0?!(this.isEnd(s,a)||this.isStart(s,a)):!1},v.prototype.insideStart=function(s,a){return this.compare(s,a)==0?!this.isEnd(s,a):!1},v.prototype.insideEnd=function(s,a){return this.compare(s,a)==0?!this.isStart(s,a):!1},v.prototype.compare=function(s,a){return!this.isMultiLine()&&s===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?a>=this.start.column?0:-1:this.end.row===s?a<=this.end.column?0:1:0},v.prototype.compareStart=function(s,a){return this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.compareEnd=function(s,a){return this.end.row==s&&this.end.column==a?1:this.compare(s,a)},v.prototype.compareInside=function(s,a){return this.end.row==s&&this.end.column==a?1:this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.clipRows=function(s,a){if(this.end.row>a)var p={row:a+1,column:0};else if(this.end.row<s)var p={row:s,column:0};if(this.start.row>a)var i={row:a+1,column:0};else if(this.start.row<s)var i={row:s,column:0};return v.fromPoints(i||this.start,p||this.end)},v.prototype.extend=function(s,a){var p=this.compare(s,a);if(p==0)return this;if(p==-1)var i={row:s,column:a};else var r={row:s,column:a};return v.fromPoints(i||this.start,r||this.end)},v.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},v.prototype.isMultiLine=function(){return this.start.row!==this.end.row},v.prototype.clone=function(){return v.fromPoints(this.start,this.end)},v.prototype.collapseRows=function(){return this.end.column==0?new v(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new v(this.start.row,0,this.end.row,0)},v.prototype.toScreenRange=function(s){var a=s.documentToScreenPosition(this.start),p=s.documentToScreenPosition(this.end);return new v(a.row,a.column,p.row,p.column)},v.prototype.moveBy=function(s,a){this.start.row+=s,this.start.column+=a,this.end.row+=s,this.end.column+=a},v}();h.fromPoints=function(v,s){return new h(v.row,v.column,s.row,s.column)},h.comparePoints=function(v,s){return v.row-s.row||v.column-s.column},t.Range=h});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var h=e("./oop"),v=function(){var s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};s.PRINTABLE_KEYS[173]="-";var a,p;for(p in s.FUNCTION_KEYS)a=s.FUNCTION_KEYS[p].toLowerCase(),s[a]=parseInt(p,10);for(p in s.PRINTABLE_KEYS)a=s.PRINTABLE_KEYS[p].toLowerCase(),s[a]=parseInt(p,10);return h.mixin(s,s.MODIFIER_KEYS),h.mixin(s,s.PRINTABLE_KEYS),h.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var i=["cmd","ctrl","alt","shift"],r=Math.pow(2,i.length);r--;)s.KEY_MODS[r]=i.filter(function(u){return r&s.KEY_MODS[u]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",s}();h.mixin(t,v),t.default=t,t.keyCodeToString=function(s){var a=v[s];return typeof a!="string"&&(a=String.fromCharCode(s)),a.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./keys"),v=e("./useragent"),s=null,a=0,p;function i(){p=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return p={passive:!1},!0}})}catch{}}function r(){return p==null&&i(),p}function u(m,y,b){this.elem=m,this.type=y,this.callback=b}u.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var c=t.addListener=function(m,y,b,S){m.addEventListener(y,b,r()),S&&S.$toDestroy.push(new u(m,y,b))},f=t.removeListener=function(m,y,b){m.removeEventListener(y,b,r())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||v.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,b){var S=m&&m.ownerDocument||document;function D(g){y&&y(g),b&&b(g),f(S,"mousemove",y),f(S,"mouseup",D),f(S,"dragstart",D)}return c(S,"mousemove",y),c(S,"mouseup",D),c(S,"dragstart",D),D},t.addMouseWheelListener=function(m,y,b){c(m,"wheel",function(S){var D=.15,g=S.deltaX||0,C=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=g*D,S.wheelY=C*D;break;case S.DOM_DELTA_LINE:var F=15;S.wheelX=g*F,S.wheelY=C*F;break;case S.DOM_DELTA_PAGE:var E=150;S.wheelX=g*E,S.wheelY=C*E;break}y(S)},b)},t.addMultiMouseDownListener=function(m,y,b,S,D){var g=0,C,F,E,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,v.isIE){var L=Math.abs(w.clientX-C)>5||Math.abs(w.clientY-F)>5;(!E||L)&&(g=1),E&&clearTimeout(E),E=setTimeout(function(){E=null},y[g-1]||600),g==1&&(C=w.clientX,F=w.clientY)}if(w._clicks=g,b[S]("mousedown",w),g>4)g=0;else if(g>1)return b[S](T[g],w)}Array.isArray(m)||(m=[m]),m.forEach(function(w){c(w,"mousedown",M,D)})};var l=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return h.KEY_MODS[l(m)]};function o(m,y,b){var S=l(y);if(!v.isMac&&s){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(S|=8),s.altGr)if((3&S)!=3)s.altGr=0;else return;if(b===18||b===17){var D="location"in y?y.location:y.keyLocation;if(b===17&&D===1)s[b]==1&&(a=y.timeStamp);else if(b===18&&S===3&&D===2){var g=y.timeStamp-a;g<50&&(s.altGr=!0)}}}if(b in h.MODIFIER_KEYS&&(b=-1),!S&&b===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,S,-b),y.defaultPrevented))return}if(v.isChromeOS&&S&8){if(m(y,S,b),y.defaultPrevented)return;S&=-9}return!S&&!(b in h.FUNCTION_KEYS)&&!(b in h.PRINTABLE_KEYS)?!1:m(y,S,b)}t.addCommandKeyListener=function(m,y,b){var S=null;c(m,"keydown",function(D){s[D.keyCode]=(s[D.keyCode]||0)+1;var g=o(y,D,D.keyCode);return S=D.defaultPrevented,g},b),c(m,"keypress",function(D){S&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),S=null)},b),c(m,"keyup",function(D){s[D.keyCode]=null},b),s||(d(),c(window,"focus",d))};function d(){s=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!v.isOldIE){var _=1;t.nextTick=function(m,y){y=y||window;var b="zero-timeout-message-"+_++,S=function(D){D.data==b&&(t.stopPropagation(D),f(y,"message",S),m())};c(y,"message",S),y.postMessage(b,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function b(){t.$idleBlocked?setTimeout(b,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var h;n.exports={lineMode:!1,pasteCancelled:function(){return h&&h>Date.now()-50?!0:h=!1},cancel:function(){h=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../config").nls,s=e("../lib/useragent"),a=e("../lib/dom"),p=e("../lib/lang"),i=e("../clipboard"),r=s.isChrome<18,u=s.isIE,c=s.isChrome>63,f=400,l=e("../lib/keys"),o=l.KEY_MODS,d=s.isIOS,_=d?/\s/:/\n/,m=s.isMobile,y;y=function(b,S){var D=a.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",b.insertBefore(D,b.firstChild);var g=!1,C=!1,F=!1,E=!1,T="";m||(D.style.fontSize="1px");var M=!1,w=!1,L="",A=0,R=0,x=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,k=0;try{var H=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){k=0;return}k=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",v("editor")),S.session)){var re=S.session.selection.cursor.row;D.setAttribute("aria-label",v("Cursor at row $0",[re+1]))}},this.setAriaOptions({role:"textbox"}),h.addListener(D,"blur",function(j){w||(S.onBlur(j),H=!1)},S),h.addListener(D,"focus",function(j){if(!w){if(H=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(j),s.isEdge?setTimeout(q):q()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),T||c||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var re=D.getBoundingClientRect().top!=0}catch{return}var le=[];if(re)for(var Pe=D.parentElement;Pe&&Pe.nodeType==1;)le.push(Pe),Pe.setAttribute("ace_nocontext","true"),!Pe.parentElement&&Pe.getRootNode?Pe=Pe.getRootNode().host:Pe=Pe.parentElement;D.focus({preventScroll:!0}),re&&le.forEach(function(tt){tt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return H},S.on("beforeEndOperation",function(){var j=S.curOp,re=j&&j.command&&j.command.name;if(re!="insertstring"){var le=re&&(j.docChanged||j.selectionChanged);F&&le&&(L=D.value="",Dt()),q()}});var U=function(j,re){for(var le=re,Pe=1;Pe<=j-I&&Pe<2*k+1;Pe++)le+=S.session.getLine(j-Pe).length+1;return le},q=d?function(j){if(!(!H||g&&!j||E)){j||(j="");var re=`
 ab`+j+`cde fg
`;re!=D.value&&(D.value=L=re);var le=4,Pe=4+(j.length||(S.selection.isEmpty()?0:1));(A!=le||R!=Pe)&&D.setSelectionRange(le,Pe),A=le,R=Pe}}:function(){if(!(F||E)&&!(!H&&!B)){F=!0;var j=0,re=0,le="";if(S.session){var Pe=S.selection,tt=Pe.getRange(),st=Pe.cursor.row;st===$+1?(I=$+1,$=I+2*k):st===I-1?($=I-1,I=$-2*k):(st<I-1||st>$+1)&&(I=st>k?st-k:0,$=st>k?st+k:2*k);for(var qe=[],bt=I;bt<=$;bt++)qe.push(S.session.getLine(bt));if(le=qe.join(`
`),j=U(tt.start.row,tt.start.column),re=U(tt.end.row,tt.end.column),tt.start.row<I){var Ut=S.session.getLine(I-1);j=tt.start.row<I-1?0:j,re+=Ut.length+1,le=Ut+`
`+le}else if(tt.end.row>$){var Ct=S.session.getLine($+1);re=tt.end.row>$+1?Ct.length:tt.end.column,re+=le.length+1,le=le+`
`+Ct}else m&&st>0&&(le=`
`+le,re+=1,j+=1);le.length>f&&(j<f&&re<f?le=le.slice(0,f):(le=`
`,j==re?j=re=0:(j=0,re=1)));var En=le+`

`;En!=L&&(D.value=L=En,A=R=En.length)}if(B&&(A=D.selectionStart,R=D.selectionEnd),R!=re||A!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,re),A=j,R=re}catch{}F=!1}};this.resetSelection=q,H&&S.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=L.length&&j.value===L&&L&&j.selectionEnd!==R},K=function(j){F||(g?g=!1:N(D)?(S.selectAll(),q()):m&&D.selectionStart!=A&&q())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,W=function(j,re){if(B&&(B=!1),C)return q(),j&&S.onPaste(j),C=!1,"";for(var le=D.selectionStart,Pe=D.selectionEnd,tt=A,st=L.length-R,qe=j,bt=j.length-le,Ut=j.length-Pe,Ct=0;tt>0&&L[Ct]==j[Ct];)Ct++,tt--;for(qe=qe.slice(Ct),Ct=1;st>0&&L.length-Ct>A-1&&L[L.length-Ct]==j[j.length-Ct];)Ct++,st--;bt-=Ct-1,Ut-=Ct-1;var En=qe.length-Ct+1;if(En<0&&(tt=-En,En=0),qe=qe.slice(0,En),!re&&!qe&&!bt&&!tt&&!st&&!Ut)return"";E=!0;var Va=!1;return s.isAndroid&&qe==". "&&(qe="  ",Va=!0),qe&&!tt&&!st&&!bt&&!Ut||M?S.onTextInput(qe):S.onTextInput(qe,{extendLeft:tt,extendRight:st,restoreStart:bt,restoreEnd:Ut}),E=!1,L=j,A=le,R=Pe,x=Ut,Va?`
`:qe},P=function(j){if(F)return Ce();if(j&&j.inputType){if(j.inputType=="historyUndo")return S.execCommand("undo");if(j.inputType=="historyRedo")return S.execCommand("redo")}var re=D.value,le=W(re,!0);(re.length>f+100||_.test(le)||m&&A<1&&A==R)&&q()},Q=function(j,re,le){var Pe=j.clipboardData||window.clipboardData;if(!(!Pe||r)){var tt=u||le?"Text":"text/plain";try{return re?Pe.setData(tt,re)!==!1:Pe.getData(tt)}catch(st){if(!le)return Q(st,re,!0)}}},G=function(j,re){var le=S.getCopyText();if(!le)return h.preventDefault(j);Q(j,le)?(d&&(q(le),g=le,setTimeout(function(){g=!1},10)),re?S.onCut():S.onCopy(),h.preventDefault(j)):(g=!0,D.value=le,D.select(),setTimeout(function(){g=!1,q(),re?S.onCut():S.onCopy()}))},ve=function(j){G(j,!0)},Ee=function(j){G(j,!1)},ye=function(j){var re=Q(j);i.pasteCancelled()||(typeof re=="string"?(re&&S.onPaste(re,j),s.isIE&&setTimeout(q),h.preventDefault(j)):(D.value="",C=!0))};h.addCommandKeyListener(D,S.onCommandKey.bind(S),S),h.addListener(D,"select",K,S),h.addListener(D,"input",P,S),h.addListener(D,"cut",ve,S),h.addListener(D,"copy",Ee,S),h.addListener(D,"paste",ye,S),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&h.addListener(b,"keydown",function(j){if(!(s.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ee(j);break;case 86:ye(j);break;case 88:ve(j);break}},S);var ie=function(j){if(!(F||!S.onCompositionStart||S.$readOnly)&&(F={},!M)){j.data&&(F.useTextareaForIME=!1),setTimeout(Ce,0),S._signal("compositionStart"),S.on("mousedown",Vt);var re=S.getSelectionRange();re.end.row=re.start.row,re.end.column=re.start.column,F.markerRange=re,F.selectionStart=A,S.onCompositionStart(F),F.useTextareaForIME?(L=D.value="",A=0,R=0):(D.msGetInputContext&&(F.context=D.msGetInputContext()),D.getInputContext&&(F.context=D.getInputContext()))}},Ce=function(){if(!(!F||!S.onCompositionUpdate||S.$readOnly)){if(M)return Vt();if(F.useTextareaForIME)S.onCompositionUpdate(D.value);else{var j=D.value;W(j),F.markerRange&&(F.context&&(F.markerRange.start.column=F.selectionStart=F.context.compositionStartOffset),F.markerRange.end.column=F.markerRange.start.column+R-F.selectionStart+x)}}},Dt=function(j){!S.onCompositionEnd||S.$readOnly||(F=!1,S.onCompositionEnd(),S.off("mousedown",Vt),j&&P())};function Vt(){w=!0,D.blur(),D.focus(),w=!1}var Ot=p.delayedCall(Ce,50).schedule.bind(null,null);function Ye(j){j.keyCode==27&&D.value.length<D.selectionStart&&(F||(L=D.value),A=R=-1,q()),Ot()}h.addListener(D,"compositionstart",ie,S),h.addListener(D,"compositionupdate",Ce,S),h.addListener(D,"keyup",Ye,S),h.addListener(D,"keydown",Ot,S),h.addListener(D,"compositionend",Dt,S),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,q(),S._emit("nativecontextmenu",{target:S,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,re){T||(T=D.style.cssText),D.style.cssText=(re?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(A+R)*S.renderer.characterWidth*.5+"px;";var le=S.container.getBoundingClientRect(),Pe=a.computedStyle(S.container),tt=le.top+(parseInt(Pe.borderTopWidth)||0),st=le.left+(parseInt(le.borderLeftWidth)||0),qe=le.bottom-tt-D.clientHeight-2,bt=function(Ut){a.translate(D,Ut.clientX-st-2,Math.min(Ut.clientY-tt-2,qe))};bt(j),j.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(ue),s.isWin&&h.capture(S.container,bt,he))},this.onContextMenuClose=he;var ue;function he(){clearTimeout(ue),ue=setTimeout(function(){T&&(D.style.cssText=T,T=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var se=function(j){S.textInput.onContextMenu(j),he()};h.addListener(D,"mouseup",se,S),h.addListener(D,"mousedown",function(j){j.preventDefault(),he()},S),h.addListener(S.renderer.scroller,"contextmenu",se,S),h.addListener(D,"contextmenu",se,S),d&&ne(b,S,D);function ne(j,re,le){var Pe=null,tt=!1;le.addEventListener("keydown",function(qe){Pe&&clearTimeout(Pe),tt=!0},!0),le.addEventListener("keyup",function(qe){Pe=setTimeout(function(){tt=!1},100)},!0);var st=function(qe){if(document.activeElement===le&&!(tt||F||re.$mouseHandler.isMousePressed)&&!g){var bt=le.selectionStart,Ut=le.selectionEnd,Ct=null,En=0;if(bt==0?Ct=l.up:bt==1?Ct=l.home:Ut>R&&L[Ut]==`
`?Ct=l.end:bt<A&&L[bt-1]==" "?(Ct=l.left,En=o.option):bt<A||bt==A&&R!=A&&bt==Ut?Ct=l.left:Ut>R&&L.slice(0,Ut).split(`
`).length>2?Ct=l.down:Ut>R&&L[Ut-1]==" "?(Ct=l.right,En=o.option):(Ut>R||Ut==R&&R!=A&&bt==Ut)&&(Ct=l.right),bt!==Ut&&(En|=o.shift),Ct){var Va=re.onCommandKey({},En,Ct);if(!Va&&re.commands){Ct=l.keyCodeToString(Ct);var mb=re.commands.findKeyCommand(En,Ct);mb&&re.execCommand(mb)}A=bt,R=Ut,q("")}}};document.addEventListener("selectionchange",st),re.on("destroy",function(){document.removeEventListener("selectionchange",st)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(b,S){m=b,d=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/useragent"),v=0,s=550,a=function(){function r(u){u.$clickSelection=null;var c=u.editor;c.setDefaultHandler("mousedown",this.onMouseDown.bind(u)),c.setDefaultHandler("dblclick",this.onDoubleClick.bind(u)),c.setDefaultHandler("tripleclick",this.onTripleClick.bind(u)),c.setDefaultHandler("quadclick",this.onQuadClick.bind(u)),c.setDefaultHandler("mousewheel",this.onMouseWheel.bind(u));var f=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];f.forEach(function(l){u[l]=this[l]},this),u.selectByLines=this.extendSelectionBy.bind(u,"getLineRange"),u.selectByWords=this.extendSelectionBy.bind(u,"getWordRange")}return r.prototype.onMouseDown=function(u){var c=u.inSelection(),f=u.getDocumentPosition();this.mousedownEvent=u;var l=this.editor,o=u.getButton();if(o!==0){var d=l.getSelectionRange(),_=d.isEmpty();(_||o==1)&&l.selection.moveToPosition(f),o==2&&(l.textInput.onContextMenu(u.domEvent),h.isMozilla||u.preventDefault());return}if(this.mousedownEvent.time=Date.now(),c&&!l.isFocused()&&(l.focus(),this.$focusTimeout&&!this.$clickSelection&&!l.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(u);return}return this.captureMouse(u),this.startSelect(f,u.domEvent._clicks>1),u.preventDefault()},r.prototype.startSelect=function(u,c){u=u||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var f=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?f.selection.selectToPosition(u):c||f.selection.moveToPosition(u),c||this.select(),f.setStyle("ace_selecting"),this.setState("select"))},r.prototype.select=function(){var u,c=this.editor,f=c.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var l=this.$clickSelection.comparePoint(f);if(l==-1)u=this.$clickSelection.end;else if(l==1)u=this.$clickSelection.start;else{var o=i(this.$clickSelection,f);f=o.cursor,u=o.anchor}c.selection.setSelectionAnchor(u.row,u.column)}c.selection.selectToPosition(f),c.renderer.scrollCursorIntoView()},r.prototype.extendSelectionBy=function(u){var c,f=this.editor,l=f.renderer.screenToTextCoordinates(this.x,this.y),o=f.selection[u](l.row,l.column);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(o.start),_=this.$clickSelection.comparePoint(o.end);if(d==-1&&_<=0)c=this.$clickSelection.end,(o.end.row!=l.row||o.end.column!=l.column)&&(l=o.start);else if(_==1&&d>=0)c=this.$clickSelection.start,(o.start.row!=l.row||o.start.column!=l.column)&&(l=o.end);else if(d==-1&&_==1)l=o.end,c=o.start;else{var m=i(this.$clickSelection,l);l=m.cursor,c=m.anchor}f.selection.setSelectionAnchor(c.row,c.column)}f.selection.selectToPosition(l),f.renderer.scrollCursorIntoView()},r.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},r.prototype.focusWait=function(){var u=p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),c=Date.now();(u>v||c-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},r.prototype.onDoubleClick=function(u){var c=u.getDocumentPosition(),f=this.editor,l=f.session,o=l.getBracketRange(c);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=f.selection.getWordRange(c.row,c.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},r.prototype.onTripleClick=function(u){var c=u.getDocumentPosition(),f=this.editor;this.setState("selectByLines");var l=f.getSelectionRange();l.isMultiLine()&&l.contains(c.row,c.column)?(this.$clickSelection=f.selection.getLineRange(l.start.row),this.$clickSelection.end=f.selection.getLineRange(l.end.row).end):this.$clickSelection=f.selection.getLineRange(c.row),this.select()},r.prototype.onQuadClick=function(u){var c=this.editor;c.selectAll(),this.$clickSelection=c.getSelectionRange(),this.setState("selectAll")},r.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var c=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var f=this.$lastScroll,l=u.domEvent.timeStamp,o=l-f.t,d=o?u.wheelX/o:f.vx,_=o?u.wheelY/o:f.vy;o<s&&(d=(d+f.vx)/2,_=(_+f.vy)/2);var m=Math.abs(d/_),y=!1;if(m>=1&&c.renderer.isScrollableBy(u.wheelX*u.speed,0)&&(y=!0),m<=1&&c.renderer.isScrollableBy(0,u.wheelY*u.speed)&&(y=!0),y)f.allowed=l;else if(l-f.allowed<s){var b=Math.abs(d)<=1.5*Math.abs(f.vx)&&Math.abs(_)<=1.5*Math.abs(f.vy);b?(y=!0,f.allowed=l):f.allowed=0}if(f.t=l,f.vx=d,f.vy=_,y)return c.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}},r}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function p(r,u,c,f){return Math.sqrt(Math.pow(c-r,2)+Math.pow(f-u,2))}function i(r,u){if(r.start.row==r.end.row)var c=2*u.column-r.start.column-r.end.column;else if(r.start.row==r.end.row-1&&!r.start.column&&!r.end.column)var c=u.column-4;else var c=2*u.row-r.start.row-r.end.row;return c<0?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(v){v.stopPropagation();var s=v.currentTarget,a=s.scrollHeight>s.clientHeight;a||v.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var o=function(d,_){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},o(d,_)};return function(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");o(d,_);function m(){this.constructor=d}d.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),v=this&&this.__values||function(o){var d=typeof Symbol=="function"&&Symbol.iterator,_=d&&o[d],m=0;if(_)return _.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&m>=o.length&&(o=void 0),{value:o&&o[m++],done:!o}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/dom"),a=e("./lib/event"),p=e("./range").Range,i=e("./lib/scroll").preventParentScroll,r="ace_tooltip",u=function(){function o(d){this.isOpen=!1,this.$element=null,this.$parentNode=d}return o.prototype.$init=function(){return this.$element=s.createElement("div"),this.$element.className=r,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},o.prototype.getElement=function(){return this.$element||this.$init()},o.prototype.setText=function(d){this.getElement().textContent=d},o.prototype.setHtml=function(d){this.getElement().innerHTML=d},o.prototype.setPosition=function(d,_){this.getElement().style.left=d+"px",this.getElement().style.top=_+"px"},o.prototype.setClassName=function(d){s.addCssClass(this.getElement(),d)},o.prototype.setTheme=function(d){this.$element.className=r+" "+(d.isDark?"ace_dark ":"")+(d.cssClass||"")},o.prototype.show=function(d,_,m){d!=null&&this.setText(d),_!=null&&m!=null&&this.setPosition(_,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},o.prototype.hide=function(d){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=r,this.isOpen=!1)},o.prototype.getHeight=function(){return this.getElement().offsetHeight},o.prototype.getWidth=function(){return this.getElement().offsetWidth},o.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},o}(),c=function(){function o(){this.popups=[]}return o.prototype.addPopup=function(d){this.popups.push(d),this.updatePopups()},o.prototype.removePopup=function(d){var _=this.popups.indexOf(d);_!==-1&&(this.popups.splice(_,1),this.updatePopups())},o.prototype.updatePopups=function(){var d,_,m,y;this.popups.sort(function(M,w){return w.priority-M.priority});var b=[];try{for(var S=v(this.popups),D=S.next();!D.done;D=S.next()){var g=D.value,C=!0;try{for(var F=(m=void 0,v(b)),E=F.next();!E.done;E=F.next()){var T=E.value;if(this.doPopupsOverlap(T,g)){C=!1;break}}}catch(M){m={error:M}}finally{try{E&&!E.done&&(y=F.return)&&y.call(F)}finally{if(m)throw m.error}}C?b.push(g):g.hide()}}catch(M){d={error:M}}finally{try{D&&!D.done&&(_=S.return)&&_.call(S)}finally{if(d)throw d.error}}},o.prototype.doPopupsOverlap=function(d,_){var m=d.getElement().getBoundingClientRect(),y=_.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},o}(),f=new c;t.popupManager=f,t.Tooltip=u;var l=function(o){h(d,o);function d(_){_===void 0&&(_=document.body);var m=o.call(this,_)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",i),m}return d.prototype.addToEditor=function(_){_.on("mousemove",this.onMouseMove),_.on("mousedown",this.hide),_.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},d.prototype.removeFromEditor=function(_){_.off("mousemove",this.onMouseMove),_.off("mousedown",this.hide),_.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},d.prototype.onMouseMove=function(_,m){this.lastEvent=_,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var b=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(b.row,b.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=_,this.timeout=setTimeout(this.waitForHover,this.idleTime))},d.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var _=Date.now()-this.lastT;if(this.idleTime-_>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-_);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},d.prototype.isOutsideOfText=function(_){var m=_.editor,y=_.getDocumentPosition(),b=m.session.getLine(y.row);if(y.column==b.length){var S=m.renderer.pixelToScreenCoordinates(_.clientX,_.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=S.column||D.row!=S.row)return!0}return!1},d.prototype.setDataProvider=function(_){this.$gatherData=_},d.prototype.showForRange=function(_,m,y,b){var S=10;if(!(b&&b!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=_.renderer;this.isOpen||(f.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,_.session),this.range=p.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),C=D.scroller.getBoundingClientRect();g.pageX<C.left&&(g.pageX=C.left);var F=this.getElement();F.innerHTML="",F.appendChild(y),F.style.maxHeight="",F.style.display="block";var E=F.clientHeight,T=F.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-E<0&&g.pageY<M&&(w=!1),F.style.maxHeight=(w?g.pageY:M)-S+"px",F.style.top=w?"":g.pageY+D.lineHeight+"px",F.style.bottom=w?window.innerHeight-g.pageY+"px":"",F.style.left=Math.min(g.pageX,window.innerWidth-T-S)+"px"}},d.prototype.addMarker=function(_,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(_,"ace_highlight-marker","text")},d.prototype.hide=function(_){!_&&document.activeElement==this.getElement()||_&&_.target&&(_.type!="keydown"||_.ctrlKey||_.metaKey)&&this.$element.contains(_.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,f.removePopup(this)))},d.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},d.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},d.prototype.onMouseOut=function(_){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!_.relatedTarget||this.getElement().contains(_.relatedTarget)||_&&_.currentTarget.contains(_.relatedTarget)||_.relatedTarget.classList.contains("ace_content")||this.hide())},d}(u);t.HoverTooltip=l});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var c=function(f,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(o[_]=d[_])},c(f,l)};return function(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(f,l);function o(){this.constructor=f}f.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}(),v=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&c[f],o=0;if(l)return l.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&o>=c.length&&(c=void 0),{value:c&&c[o++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("../lib/dom"),a=e("../lib/event"),p=e("../tooltip").Tooltip,i=e("../config").nls;function r(c){var f=c.editor,l=f.renderer.$gutterLayer,o=new u(f);c.editor.setDefaultHandler("guttermousedown",function(S){if(!(!f.isFocused()||S.getButton()!=0)){var D=l.getRegion(S);if(D!="foldWidgets"){var g=S.getDocumentPosition().row,C=f.session.selection;if(S.getShiftKey())C.selectTo(g,0);else{if(S.domEvent.detail==2)return f.selectAll(),S.preventDefault();c.$clickSelection=f.selection.getLineRange(g)}return c.setState("selectByLines"),c.captureMouse(S),S.preventDefault()}}});var d,_;function m(){var S=_.getDocumentPosition().row,D=f.session.getLength();if(S==D){var g=f.renderer.pixelToScreenCoordinates(0,_.y).row,C=_.$pos;if(g>f.session.documentToScreenRow(C.row,C.column))return y()}if(o.showTooltip(S),!!o.isOpen)if(f.on("mousewheel",y),c.$tooltipFollowsMouse)b(_);else{var F=_.getGutterRow(),E=l.$lines.get(F);if(E){var T=E.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=o.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else b(_)}}function y(){d&&(d=clearTimeout(d)),o.isOpen&&(o.hideTooltip(),f.off("mousewheel",y))}function b(S){o.setPosition(S.x,S.y)}c.editor.setDefaultHandler("guttermousemove",function(S){var D=S.domEvent.target||S.domEvent.srcElement;if(s.hasCssClass(D,"ace_fold-widget"))return y();o.isOpen&&c.$tooltipFollowsMouse&&b(S),_=S,!d&&(d=setTimeout(function(){d=null,_&&!c.isMousePressed?m():y()},50))}),a.addListener(f.renderer.$gutter,"mouseout",function(S){_=null,!(!o.isOpen||d)&&(d=setTimeout(function(){d=null,y()},50))},f),f.on("changeSession",y),f.on("input",y)}t.GutterHandler=r;var u=function(c){h(f,c);function f(l){var o=c.call(this,l.container)||this;return o.editor=l,o}return f.prototype.setPosition=function(l,o){var d=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();l+=15,o+=15,l+m>d&&(l-=l+m-d),o+y>_&&(o-=20+y),p.prototype.setPosition.call(this,l,o)},Object.defineProperty(f,"annotationLabels",{get:function(){return{error:{singular:i("error"),plural:i("errors")},warning:{singular:i("warning"),plural:i("warnings")},info:{singular:i("information message"),plural:i("information messages")}}},enumerable:!1,configurable:!0}),f.prototype.showTooltip=function(l){var o=this.editor.renderer.$gutterLayer,d=o.$annotations[l],_;d?_={text:Array.from(d.text),type:Array.from(d.type)}:_={text:[],type:[]};var m=o.session.getFoldLine(l);if(m&&o.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},b,S=l+1;S<=m.end.row;S++)if(o.$annotations[S])for(var D=0;D<o.$annotations[S].text.length;D++){var g=o.$annotations[S].type[D];if(y[g].push(o.$annotations[S].text[D]),g==="error"){b="error_fold";continue}if(g==="warning"){b="warning_fold";continue}}if(b==="error_fold"||b==="warning_fold"){var C="".concat(f.annotationsToSummaryString(y)," in folded code.");_.text.push(C),_.type.push(b)}}if(_.text.length===0)return this.hide();for(var F={error:[],warning:[],info:[]},E=o.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=0;S<_.text.length;S++){var T="<span class='ace_".concat(_.type[S]," ").concat(E,"' aria-label='").concat(f.annotationLabels[_.type[S].replace("_fold","")].singular,"' role=img> </span> ").concat(_.text[S]);F[_.type[S].replace("_fold","")].push(T)}var M=[].concat(F.error,F.warning,F.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},f.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},f.annotationsToSummaryString=function(l){var o,d,_=[],m=["error","warning","info"];try{for(var y=v(m),b=y.next();!b.done;b=y.next()){var S=b.value;if(l[S].length){var D=l[S].length===1?f.annotationLabels[S].singular:f.annotationLabels[S].plural;_.push("".concat(l[S].length," ").concat(D))}}}catch(g){o={error:g}}finally{try{b&&!b.done&&(d=y.return)&&d.call(y)}finally{if(o)throw o.error}}return _.join(", ")},f}(p);t.GutterTooltip=u});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../lib/useragent"),s=function(){function a(p,i){this.speed,this.wheelX,this.wheelY,this.domEvent=p,this.editor=i,this.x=this.clientX=p.clientX,this.y=this.clientY=p.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){h.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){h.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var p=this.getDocumentPosition().row,i=this.editor.session.documentToScreenRow(p,0),r=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return i-r},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var p=this.editor,i=p.getSelectionRange();if(i.isEmpty())this.$inSelection=!1;else{var r=this.getDocumentPosition();this.$inSelection=i.contains(r.row,r.column)}return this.$inSelection},a.prototype.getButton=function(){return h.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return v.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=s});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/event"),s=e("../lib/useragent"),a=200,p=200,i=5;function r(c){var f=c.editor,l=h.createElement("div");l.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",l.textContent="\xA0";var o=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];o.forEach(function(U){c[U]=this[U]},this),f.on("mousedown",this.onMouseDown.bind(c));var d=f.container,_,m,y,b,S,D,g=0,C,F,E,T,M;this.onDragStart=function(U){if(this.cancelDrag||!d.draggable){var q=this;return setTimeout(function(){q.startSelect(),q.captureMouse(U)},0),U.preventDefault()}S=f.getSelectionRange();var N=U.dataTransfer;N.effectAllowed=f.getReadOnly()?"copy":"copyMove",f.container.appendChild(l),N.setDragImage&&N.setDragImage(l,0,0),setTimeout(function(){f.container.removeChild(l)}),N.clearData(),N.setData("Text",f.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(U){if(d.draggable=!1,F=!1,this.setState(null),!f.getReadOnly()){var q=U.dataTransfer.dropEffect;!C&&q=="move"&&f.session.remove(f.getSelectionRange()),f.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(f.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||R(),g++,U.dataTransfer.dropEffect=C=H(U),v.preventDefault(U)},this.onDragOver=function(U){if(!(f.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||(R(),g++),I!==null&&(I=null),U.dataTransfer.dropEffect=C=H(U),v.preventDefault(U)},this.onDragLeave=function(U){if(g--,g<=0&&_)return x(),C=null,v.preventDefault(U)},this.onDrop=function(U){if(D){var q=U.dataTransfer;if(F)switch(C){case"move":S.contains(D.row,D.column)?S={start:D,end:D}:S=f.moveText(S,D);break;case"copy":S=f.moveText(S,D,!0);break}else{var N=q.getData("Text");S={start:D,end:f.session.insert(D,N)},f.focus(),C=null}return x(),v.preventDefault(U)}},v.addListener(d,"dragstart",this.onDragStart.bind(c),f),v.addListener(d,"dragend",this.onDragEnd.bind(c),f),v.addListener(d,"dragenter",this.onDragEnter.bind(c),f),v.addListener(d,"dragover",this.onDragOver.bind(c),f),v.addListener(d,"dragleave",this.onDragLeave.bind(c),f),v.addListener(d,"drop",this.onDrop.bind(c),f);function w(U,q){var N=Date.now(),K=!q||U.row!=q.row,O=!q||U.column!=q.column;if(!T||K||O)f.moveCursorToPosition(U),T=N,M={x:m,y};else{var B=u(M.x,M.y,m,y);B>i?T=null:N-T>=p&&(f.renderer.scrollCursorIntoView(),T=null)}}function L(U,q){var N=Date.now(),K=f.renderer.layerConfig.lineHeight,O=f.renderer.layerConfig.characterWidth,B=f.renderer.scroller.getBoundingClientRect(),W={x:{left:m-B.left,right:B.right-m},y:{top:y-B.top,bottom:B.bottom-y}},P=Math.min(W.x.left,W.x.right),Q=Math.min(W.y.top,W.y.bottom),G={row:U.row,column:U.column};P/O<=2&&(G.column+=W.x.left<W.x.right?-3:2),Q/K<=1&&(G.row+=W.y.top<W.y.bottom?-1:1);var ve=U.row!=G.row,Ee=U.column!=G.column,ye=!q||U.row!=q.row;ve||Ee&&!ye?E?N-E>=a&&f.renderer.scrollCursorIntoView(G):E=N:E=null}function A(){var U=D;D=f.renderer.screenToTextCoordinates(m,y),w(D,U),L(D,U)}function R(){S=f.selection.toOrientedRange(),_=f.session.addMarker(S,"ace_selection",f.getSelectionStyle()),f.clearSelection(),f.isFocused()&&f.renderer.$cursorLayer.setBlinking(!1),clearInterval(b),A(),b=setInterval(A,20),g=0,v.addListener(document,"mousemove",$)}function x(){clearInterval(b),f.session.removeMarker(_),_=null,f.selection.fromOrientedRange(S),f.isFocused()&&!F&&f.$resetCursorStyle(),S=null,D=null,g=0,E=null,T=null,v.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&_&&x()},20))}function k(U){var q=U.types;return!q||Array.prototype.some.call(q,function(N){return N=="text/plain"||N=="Text"})}function H(U){var q=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],K=s.isMac?U.altKey:U.ctrlKey,O="uninitialized";try{O=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return K&&q.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":q.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var c=Date.now()-this.mousedownEvent.time;c>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var c=this.editor.container;c.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(c){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var c=this.editor,f=c.container;f.draggable=!0,c.renderer.$cursorLayer.setBlinking(!1),c.setStyle("ace_dragging");var l=s.isWin?"default":"move";c.renderer.setCursorStyle(l),this.setState("dragReady")},this.onMouseDrag=function(c){var f=this.editor.container;if(s.isIE&&this.state=="dragReady"){var l=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>3&&f.dragDrop()}if(this.state==="dragWait"){var l=u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>0&&(f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(c){if(this.$dragEnabled){this.mousedownEvent=c;var f=this.editor,l=c.inSelection(),o=c.getButton(),d=c.domEvent.detail||1;if(d===1&&o===0&&l){if(c.editor.inMultiSelectMode&&(c.getAccelKey()||c.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=c.domEvent.target||c.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),f.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var m=f.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(c,this.onMouseDrag.bind(this)),c.defaultPrevented=!0}}}}).call(r.prototype);function u(c,f,l,o){return Math.sqrt(Math.pow(l-c,2)+Math.pow(o-f,2))}t.DragdropHandler=r});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./mouse_event").MouseEvent,v=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(a,p){var i="scroll",r,u,c,f,l,o,d=0,_,m=0,y=0,b=0,S,D;function g(){var w=window.navigator&&window.navigator.clipboard,L=!1,A=function(){var x=p.getCopyText(),I=p.session.getUndoManager().hasUndo();D.replaceChild(s.buildDom(L?["span",!x&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],x&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],x&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(x){var I=x.target.getAttribute("action");if(I=="more"||!L)return L=!L,A();I=="paste"?w.readText().then(function($){p.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(I)),D.firstChild.style.display="none",L=!1,I!="openCommandPalette"&&p.focus()};D=s.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(x){i="menu",x.stopPropagation(),x.preventDefault(),p.textInput.focus()},ontouchend:function(x){x.stopPropagation(),x.preventDefault(),R(x)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}function C(){D||g();var w=p.selection.cursor,L=p.renderer.textToScreenCoordinates(w.row,w.column),A=p.renderer.textToScreenCoordinates(0,0).pageX,R=p.renderer.scrollLeft,x=p.container.getBoundingClientRect();D.style.top=L.pageY-x.top-3+"px",L.pageX-x.left<x.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=A+R-x.left+"px"),D.style.display="",D.firstChild.style.display="none",p.on("input",F)}function F(w){D&&(D.style.display="none"),p.off("input",F)}function E(){l=null,clearTimeout(l);var w=p.selection.getRange(),L=w.contains(_.row,_.column);(w.isEmpty()||!L)&&(p.selection.moveToPosition(_),p.selection.selectWord()),i="wait",C()}function T(){l=null,clearTimeout(l),p.selection.moveToPosition(_);var w=m>=2?p.selection.getLineRange(_.row):p.session.getBracketRange(_);w&&!w.isEmpty()?p.selection.setRange(w):p.selection.selectWord(),i="wait"}v.addListener(a,"contextmenu",function(w){if(S){var L=p.textInput.getElement();L.focus()}},p),v.addListener(a,"touchstart",function(w){var L=w.touches;if(l||L.length>1){clearTimeout(l),l=null,c=-1,i="zoom";return}S=p.$mouseHandler.isMousePressed=!0;var A=p.renderer.layerConfig.lineHeight,R=p.renderer.layerConfig.lineHeight,x=w.timeStamp;f=x;var I=L[0],$=I.clientX,k=I.clientY;Math.abs(r-$)+Math.abs(u-k)>A&&(c=-1),r=w.clientX=$,u=w.clientY=k,y=b=0;var H=new h(w,p);if(_=H.getDocumentPosition(),x-c<500&&L.length==1&&!d)m++,w.preventDefault(),w.button=0,T();else{m=0;var U=p.selection.cursor,q=p.selection.isEmpty()?U:p.selection.anchor,N=p.renderer.$cursorLayer.getPixelPosition(U,!0),K=p.renderer.$cursorLayer.getPixelPosition(q,!0),O=p.renderer.scroller.getBoundingClientRect(),B=p.renderer.layerConfig.offset,W=p.renderer.scrollLeft,P=function(ve,Ee){return ve=ve/R,Ee=Ee/A-.75,ve*ve+Ee*Ee};if(w.clientX<O.left){i="zoom";return}var Q=P(w.clientX-O.left-N.left+W,w.clientY-O.top-N.top+B),G=P(w.clientX-O.left-K.left+W,w.clientY-O.top-K.top+B);Q<3.5&&G<3.5&&(i=Q>G?"cursor":"anchor"),G<3.5?i="anchor":Q<3.5?i="cursor":i="scroll",l=setTimeout(E,450)}c=x},p),v.addListener(a,"touchend",function(w){S=p.$mouseHandler.isMousePressed=!1,o&&clearInterval(o),i=="zoom"?(i="",d=0):l?(p.selection.moveToPosition(_),d=0,C()):i=="scroll"?(M(),F()):C(),clearTimeout(l),l=null},p),v.addListener(a,"touchmove",function(w){l&&(clearTimeout(l),l=null);var L=w.touches;if(!(L.length>1||i=="zoom")){var A=L[0],R=r-A.clientX,x=u-A.clientY;if(i=="wait")if(R*R+x*x>4)i="cursor";else return w.preventDefault();r=A.clientX,u=A.clientY,w.clientX=A.clientX,w.clientY=A.clientY;var I=w.timeStamp,$=I-f;if(f=I,i=="scroll"){var k=new h(w,p);k.speed=1,k.wheelX=R,k.wheelY=x,10*Math.abs(R)<Math.abs(x)&&(R=0),10*Math.abs(x)<Math.abs(R)&&(x=0),$!=0&&(y=R/$,b=x/$),p._emit("mousewheel",k),k.propagationStopped||(y=b=0)}else{var H=new h(w,p),U=H.getDocumentPosition();i=="cursor"?p.selection.moveCursorToPosition(U):i=="anchor"&&p.selection.setSelectionAnchor(U.row,U.column),p.renderer.scrollCursorIntoView(U),w.preventDefault()}}},p);function M(){d+=60,o=setInterval(function(){d--<=0&&(clearInterval(o),o=null),Math.abs(y)<.01&&(y=0),Math.abs(b)<.01&&(b=0),d<20&&(y=.9*y),d<20&&(b=.9*b);var w=p.session.getScrollTop();p.renderer.scrollBy(10*y,10*b),w==p.session.getScrollTop()&&(d=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,p=e("./mouse_event").MouseEvent,i=e("./dragdrop_handler").DragdropHandler,r=e("./touch_handler").addTouchListeners,u=e("../config"),c=function(){function f(l){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var o=this;this.editor=l,new s(this),new a(this),new i(this);var d=function(y){var b=!document.hasFocus||!document.hasFocus()||!l.isFocused()&&document.activeElement==(l.textInput&&l.textInput.getElement());b&&window.focus(),l.focus(),setTimeout(function(){l.isFocused()||l.focus()})},_=l.renderer.getMouseEventTarget();h.addListener(_,"click",this.onMouseEvent.bind(this,"click"),l),h.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),l),h.addMultiMouseDownListener([_,l.renderer.scrollBarV&&l.renderer.scrollBarV.inner,l.renderer.scrollBarH&&l.renderer.scrollBarH.inner,l.textInput&&l.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",l),h.addMouseWheelListener(l.container,this.onMouseWheel.bind(this,"mousewheel"),l),r(l.container,l);var m=l.renderer.$gutter;h.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),l),h.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),l),h.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),l),h.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),l),h.addListener(_,"mousedown",d,l),h.addListener(m,"mousedown",d,l),v.isIE&&l.renderer.scrollBarV&&(h.addListener(l.renderer.scrollBarV.element,"mousedown",d,l),h.addListener(l.renderer.scrollBarH.element,"mousedown",d,l)),l.on("mousemove",function(y){if(!(o.state||o.$dragDelay||!o.$dragEnabled)){var b=l.renderer.screenToTextCoordinates(y.x,y.y),S=l.session.selection.getRange(),D=l.renderer;!S.isEmpty()&&S.insideStart(b.row,b.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},l)}return f.prototype.onMouseEvent=function(l,o){this.editor.session&&this.editor._emit(l,new p(o,this.editor))},f.prototype.onMouseMove=function(l,o){var d=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!d||!d.length||this.editor._emit(l,new p(o,this.editor))},f.prototype.onMouseWheel=function(l,o){var d=new p(o,this.editor);d.speed=this.$scrollSpeed*2,d.wheelX=o.wheelX,d.wheelY=o.wheelY,this.editor._emit(l,d)},f.prototype.setState=function(l){this.state=l},f.prototype.captureMouse=function(l,o){this.x=l.x,this.y=l.y,this.isMousePressed=!0;var d=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var m=this,y=function(C){if(C){if(v.isWebKit&&!C.which&&m.releaseMouse)return m.releaseMouse();m.x=C.clientX,m.y=C.clientY,o&&o(C),m.mouseEvent=new p(C,m.editor),m.$mouseMoved=!0}},b=function(C){d.off("beforeEndOperation",D),clearInterval(g),d.session&&S(),m[m.state+"End"]&&m[m.state+"End"](C),m.state="",m.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,C&&m.onMouseEvent("mouseup",C),d.endOperation()},S=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(v.isOldIE&&l.domEvent.type=="dblclick")return setTimeout(function(){b(l)});var D=function(C){m.releaseMouse&&d.curOp.command.name&&d.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};d.on("beforeEndOperation",D),d.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=h.capture(this.editor.container,y,b);var g=setInterval(S,20)},f.prototype.cancelContextMenu=function(){var l=function(o){o&&o.domEvent&&o.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",l),o&&o.domEvent&&h.stopEvent(o.domEvent))}.bind(this);setTimeout(l,10),this.editor.on("nativecontextmenu",l)},f.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},f}();c.prototype.releaseMouse=null,u.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:v.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function s(a){a.on("click",function(p){var i=p.getDocumentPosition(),r=a.session,u=r.getFoldAt(i.row,i.column,1);u&&(p.getAccelKey()?r.removeFold(u):r.expandFold(u),p.stop());var c=p.domEvent&&p.domEvent.target;c&&h.hasCssClass(c,"ace_inline_button")&&h.hasCssClass(c,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(p){var i=a.renderer.$gutterLayer.getRegion(p);if(i=="foldWidgets"){var r=p.getDocumentPosition().row,u=a.session;u.foldWidgets&&u.foldWidgets[r]&&a.session.onFoldWidgetClick(r,p),a.isFocused()||a.focus(),p.stop()}}),a.on("gutterdblclick",function(p){var i=a.renderer.$gutterLayer.getRegion(p);if(i=="foldWidgets"){var r=p.getDocumentPosition().row,u=a.session,c=u.getParentFoldRangeData(r,!0),f=c.range||c.firstRange;if(f){r=f.start.row;var l=u.getFoldAt(r,u.getLine(r).length,1);l?u.removeFold(l):(u.addFold("...",f),a.renderer.scrollCursorIntoView({row:f.start.row,column:0}))}p.stop()}})}return s}();t.FoldHandler=v});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var h=e("../lib/keys"),v=e("../lib/event"),s=function(){function a(p){this.$editor=p,this.$data={editor:p},this.$handlers=[],this.setDefaultHandler(p.commands)}return a.prototype.setDefaultHandler=function(p){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=p,this.addKeyboardHandler(p,0)},a.prototype.setKeyboardHandler=function(p){var i=this.$handlers;if(i[i.length-1]!=p){for(;i[i.length-1]&&i[i.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(i[i.length-1]);this.addKeyboardHandler(p,1)}},a.prototype.addKeyboardHandler=function(p,i){if(p){typeof p=="function"&&!p.handleKeyboard&&(p.handleKeyboard=p);var r=this.$handlers.indexOf(p);r!=-1&&this.$handlers.splice(r,1),i==null?this.$handlers.push(p):this.$handlers.splice(i,0,p),r==-1&&p.attach&&p.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(p){var i=this.$handlers.indexOf(p);return i==-1?!1:(this.$handlers.splice(i,1),p.detach&&p.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var p=this.$data,i=p.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(i,p)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(p,i,r,u){for(var c,f=!1,l=this.$editor.commands,o=this.$handlers.length;o--&&(c=this.$handlers[o].handleKeyboard(this.$data,p,i,r,u),!(!(!c||!c.command)&&(c.command=="null"?f=!0:f=l.exec(c.command,this.$editor,c.args,u),f&&u&&p!=-1&&c.passEvent!=!0&&c.command.passEvent!=!0&&v.stopEvent(u),f))););return!f&&p==-1&&(c={command:"insertstring"},f=l.exec("insertstring",this.$editor,i)),f&&this.$editor._signal&&this.$editor._signal("keyboardActivity",c),f},a.prototype.onCommandKey=function(p,i,r){var u=h.keyCodeToString(r);return this.$callKeyboardHandlers(i,u,r,p)},a.prototype.onTextInput=function(p){return this.$callKeyboardHandlers(-1,p)},a}();t.KeyBinding=s});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var h=["\u0621","\u0641"],v=["\u063A","\u064A"],s=0,a=0,p=!1,i=!1,r=!1,u=!1,c=!1,f=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d=0,_=1,m=0,y=1,b=2,S=3,D=4,g=5,C=6,F=7,E=8,T=9,M=10,w=11,L=12,A=13,R=14,x=15,I=16,$=17,k=18,H=[k,k,k,k,k,k,k,k,k,C,g,C,E,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,C,E,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,b,b,b,b,b,b,b,b,b,b,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,k,k,k,k,k,k,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,T,D,w,w,w,w,D,D,D,D,m,D,D,k,D,D,w,w,b,b,D,m,D,D,D,b,m,D,D,D,D,D],U=[E,E,E,E,E,E,E,E,E,E,E,k,k,k,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,g,A,R,x,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E];function q(W,P,Q,G){var ve=s?o:l,Ee=null,ye=null,ie=null,Ce=0,Dt=null,Vt=null,Ot=-1,Ye=null,ue=null,he=[];if(!G)for(Ye=0,G=[];Ye<Q;Ye++)G[Ye]=O(W[Ye]);for(a=s,p=!1,i=!1,r=!1,u=!1,ue=0;ue<Q;ue++){if(Ee=Ce,he[ue]=ye=K(W,G,he,ue),Ce=ve[Ee][ye],Dt=Ce&240,Ce&=15,P[ue]=ie=ve[Ce][5],Dt>0)if(Dt==16){for(Ye=Ot;Ye<ue;Ye++)P[Ye]=1;Ot=-1}else Ot=-1;if(Vt=ve[Ce][6],Vt)Ot==-1&&(Ot=ue);else if(Ot>-1){for(Ye=Ot;Ye<ue;Ye++)P[Ye]=ie;Ot=-1}G[ue]==g&&(P[ue]=0),a|=ie}if(u){for(Ye=0;Ye<Q;Ye++)if(G[Ye]==C){P[Ye]=s;for(var se=Ye-1;se>=0&&G[se]==E;se--)P[se]=s}}}function N(W,P,Q){if(!(a<W)){if(W==1&&s==_&&!r){Q.reverse();return}for(var G=Q.length,ve=0,Ee,ye,ie,Ce;ve<G;){if(P[ve]>=W){for(Ee=ve+1;Ee<G&&P[Ee]>=W;)Ee++;for(ye=ve,ie=Ee-1;ye<ie;ye++,ie--)Ce=Q[ye],Q[ye]=Q[ie],Q[ie]=Ce;ve=Ee}ve++}}}function K(W,P,Q,G){var ve=P[G],Ee,ye,ie,Ce;switch(ve){case m:case y:p=!1;case D:case S:return ve;case b:return p?S:b;case F:return p=!0,i=!0,y;case E:return D;case T:return G<1||G+1>=P.length||(Ee=Q[G-1])!=b&&Ee!=S||(ye=P[G+1])!=b&&ye!=S?D:(p&&(ye=S),ye==Ee?ye:D);case M:return Ee=G>0?Q[G-1]:g,Ee==b&&G+1<P.length&&P[G+1]==b?b:D;case w:if(G>0&&Q[G-1]==b)return b;if(p)return D;for(Ce=G+1,ie=P.length;Ce<ie&&P[Ce]==w;)Ce++;return Ce<ie&&P[Ce]==b?b:D;case L:for(ie=P.length,Ce=G+1;Ce<ie&&P[Ce]==L;)Ce++;if(Ce<ie){var Dt=W[G],Vt=Dt>=1425&&Dt<=2303||Dt==64286;if(Ee=P[Ce],Vt&&(Ee==y||Ee==F))return y}return G<1||(Ee=P[G-1])==g?D:Q[G-1];case g:return p=!1,r=!0,s;case C:return u=!0,D;case A:case R:case I:case $:case x:p=!1;case k:return D}}function O(W){var P=W.charCodeAt(0),Q=P>>8;return Q==0?P>191?m:H[P]:Q==5?/[\u0591-\u05f4]/.test(W)?y:m:Q==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?L:/[\u0660-\u0669\u066b-\u066c]/.test(W)?S:P==1642?w:/[\u06f0-\u06f9]/.test(W)?b:F:Q==32&&P<=8287?U[P&255]:Q==254&&P>=65136?F:D}function B(W){return W>="\u064B"&&W<="\u0655"}t.L=m,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(W,P,Q){if(W.length<2)return{};var G=W.split(""),ve=new Array(G.length),Ee=new Array(G.length),ye=[];s=Q?_:d,q(G,ye,G.length,P);for(var ie=0;ie<ve.length;ve[ie]=ie,ie++);N(2,ye,ve),N(1,ye,ve);for(var ie=0;ie<ve.length-1;ie++)P[ie]===S?ye[ie]=t.AN:ye[ie]===y&&(P[ie]>F&&P[ie]<A||P[ie]===D||P[ie]===k)?ye[ie]=t.ON_R:ie>0&&G[ie-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(G[ie])&&(ye[ie-1]=ye[ie]=t.R_H,ie++);G[G.length-1]===t.DOT&&(ye[G.length-1]=t.B),G[0]==="\u202B"&&(ye[0]=t.RLE);for(var ie=0;ie<ve.length;ie++)Ee[ie]=ye[ve[ie]];return{logicalFromVisual:ve,bidiLevels:Ee}},t.hasBidiCharacters=function(W,P){for(var Q=!1,G=0;G<W.length;G++)P[G]=O(W.charAt(G)),!Q&&(P[G]==y||P[G]==F||P[G]==S)&&(Q=!0);return Q},t.getVisualFromLogicalIdx=function(W,P){for(var Q=0;Q<P.logicalFromVisual.length;Q++)if(P.logicalFromVisual[Q]==W)return Q;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var h=e("./lib/bidiutil"),v=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function p(i){this.session=i,this.bidiMap={},this.currentRow=null,this.bidiUtil=h,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(i.getValue())}return p.prototype.isBidiRow=function(i,r,u){return this.seenBidi?(i!==this.currentRow&&(this.currentRow=i,this.updateRowLine(r,u),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},p.prototype.onChange=function(i){this.seenBidi?this.currentRow=null:i.action=="insert"&&s.test(i.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},p.prototype.getDocumentRow=function(){var i=0,r=this.session.$screenRowCache;if(r.length){var u=this.session.$getRowCacheIndex(r,this.currentRow);u>=0&&(i=this.session.$docRowCache[u])}return i},p.prototype.getSplitIndex=function(){var i=0,r=this.session.$screenRowCache;if(r.length)for(var u,c=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-i>0&&(u=this.session.$getRowCacheIndex(r,this.currentRow-i-1),u===c);)c=u,i++;else i=this.currentRow;return i},p.prototype.updateRowLine=function(i,r){i===void 0&&(i=this.getDocumentRow());var u=i===this.session.getLength()-1,c=u?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(i),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var f=this.session.$wrapData[i];f&&(r===void 0&&(r=this.getSplitIndex()),r>0&&f.length?(this.wrapIndent=f.indent,this.wrapOffset=this.wrapIndent*this.charWidths[h.L],this.line=r<f.length?this.line.substring(f[r-1],f[r]):this.line.substring(f[f.length-1])):this.line=this.line.substring(0,f[r]),r==f.length&&(this.line+=this.showInvisibles?c:h.DOT))}else this.line+=this.showInvisibles?c:h.DOT;var l=this.session,o=0,d;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,m){return _==="	"||l.isFullWidth(_.charCodeAt(0))?(d=_==="	"?l.getScreenTabSize(m+o):2,o+=d-1,v.stringRepeat(h.DOT,d)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==h.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},p.prototype.updateBidiMap=function(){var i=[];h.hasBidiCharacters(this.line,i)||this.isRtlDir?this.bidiMap=h.doBidiReorder(this.line,i,this.isRtlDir):this.bidiMap={}},p.prototype.markAsDirty=function(){this.currentRow=null},p.prototype.updateCharacterWidths=function(i){if(this.characterWidth!==i.$characterSize.width){this.fontMetrics=i;var r=this.characterWidth=i.$characterSize.width,u=i.$measureCharWidth("\u05D4");this.charWidths[h.L]=this.charWidths[h.EN]=this.charWidths[h.ON_R]=r,this.charWidths[h.R]=this.charWidths[h.AN]=u,this.charWidths[h.R_H]=u*.45,this.charWidths[h.B]=this.charWidths[h.RLE]=0,this.currentRow=null}},p.prototype.setShowInvisibles=function(i){this.showInvisibles=i,this.currentRow=null},p.prototype.setEolChar=function(i){this.EOL=i},p.prototype.setContentWidth=function(i){this.contentWidth=i},p.prototype.isRtlLine=function(i){return this.$isRtl?!0:i!=null?this.session.getLine(i).charAt(0)==this.RLE:this.isRtlDir},p.prototype.setRtlDirection=function(i,r){for(var u=i.getCursorPosition(),c=i.selection.getSelectionAnchor().row;c<=u.row;c++)!r&&i.session.getLine(c).charAt(0)===i.session.$bidiHandler.RLE?i.session.doc.removeInLine(c,0,1):r&&i.session.getLine(c).charAt(0)!==i.session.$bidiHandler.RLE&&i.session.doc.insert({column:0,row:c},i.session.$bidiHandler.RLE)},p.prototype.getPosLeft=function(i){i-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,u=i>r?this.session.getOverwrite()?i:i-1:r,c=h.getVisualFromLogicalIdx(u,this.bidiMap),f=this.bidiMap.bidiLevels,l=0;!this.session.getOverwrite()&&i<=r&&f[c]%2!==0&&c++;for(var o=0;o<c;o++)l+=this.charWidths[f[o]];return!this.session.getOverwrite()&&i>r&&f[c]%2===0&&(l+=this.charWidths[f[c]]),this.wrapIndent&&(l+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(l+=this.rtlLineOffset),l},p.prototype.getSelections=function(i,r){var u=this.bidiMap,c=u.bidiLevels,f,l=[],o=0,d=Math.min(i,r)-this.wrapIndent,_=Math.max(i,r)-this.wrapIndent,m=!1,y=!1,b=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,D=0;D<c.length;D++)S=u.logicalFromVisual[D],f=c[D],m=S>=d&&S<_,m&&!y?b=o:!m&&y&&l.push({left:b,width:o-b}),o+=this.charWidths[f],y=m;if(m&&D===c.length&&l.push({left:b,width:o-b}),this.isRtlDir)for(var g=0;g<l.length;g++)l[g].left+=this.rtlLineOffset;return l},p.prototype.offsetToCol=function(u){this.isRtlDir&&(u-=this.rtlLineOffset);var r=0,u=Math.max(u,0),c=0,f=0,l=this.bidiMap.bidiLevels,o=this.charWidths[l[f]];for(this.wrapIndent&&(u-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);u>c+o/2;){if(c+=o,f===l.length-1){o=0;break}o=this.charWidths[l[++f]]}return f>0&&l[f-1]%2!==0&&l[f]%2===0?(u<c&&f--,r=this.bidiMap.logicalFromVisual[f]):f>0&&l[f-1]%2===0&&l[f]%2!==0?r=1+(u>c?this.bidiMap.logicalFromVisual[f]:this.bidiMap.logicalFromVisual[f-1]):this.isRtlDir&&f===l.length-1&&o===0&&l[f-1]%2===0||!this.isRtlDir&&f===0&&l[f]%2!==0?r=1+this.bidiMap.logicalFromVisual[f]:(f>0&&l[f-1]%2!==0&&o!==0&&f--,r=this.bidiMap.logicalFromVisual[f]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent},p}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=function(){function i(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var u=this;this.cursor.on("change",function(c){u.$cursorChanged=!0,u.$silent||u._emit("changeCursor"),!u.$isEmpty&&!u.$silent&&u._emit("changeSelection"),!u.$keepDesiredColumnOnChange&&c.old.column!=c.value.column&&(u.$desiredColumn=null)}),this.anchor.on("change",function(){u.$anchorChanged=!0,!u.$isEmpty&&!u.$silent&&u._emit("changeSelection")})}return i.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},i.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},i.prototype.getCursor=function(){return this.lead.getPosition()},i.prototype.setAnchor=function(r,u){this.$isEmpty=!1,this.anchor.setPosition(r,u)},i.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},i.prototype.getSelectionLead=function(){return this.lead.getPosition()},i.prototype.isBackwards=function(){var r=this.anchor,u=this.lead;return r.row>u.row||r.row==u.row&&r.column>u.column},i.prototype.getRange=function(){var r=this.anchor,u=this.lead;return this.$isEmpty?a.fromPoints(u,u):this.isBackwards()?a.fromPoints(u,r):a.fromPoints(r,u)},i.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},i.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},i.prototype.setRange=function(r,u){var c=u?r.end:r.start,f=u?r.start:r.end;this.$setSelection(c.row,c.column,f.row,f.column)},i.prototype.$setSelection=function(r,u,c,f){if(!this.$silent){var l=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,u),this.cursor.setPosition(c,f),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||l!=this.$isEmpty||o)&&this._emit("changeSelection")}},i.prototype.$moveSelection=function(r){var u=this.lead;this.$isEmpty&&this.setSelectionAnchor(u.row,u.column),r.call(this)},i.prototype.selectTo=function(r,u){this.$moveSelection(function(){this.moveCursorTo(r,u)})},i.prototype.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},i.prototype.moveTo=function(r,u){this.clearSelection(),this.moveCursorTo(r,u)},i.prototype.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},i.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},i.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},i.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},i.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},i.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},i.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},i.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},i.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},i.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},i.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},i.prototype.getWordRange=function(r,u){if(typeof u>"u"){var c=r||this.lead;r=c.row,u=c.column}return this.session.getWordRange(r,u)},i.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},i.prototype.selectAWord=function(){var r=this.getCursor(),u=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(u)},i.prototype.getLineRange=function(r,u){var c=typeof r=="number"?r:this.lead.row,f,l=this.session.getFoldLine(c);return l?(c=l.start.row,f=l.end.row):f=c,u===!0?new a(c,0,f,this.session.getLine(f).length):new a(c,0,f+1,0)},i.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},i.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},i.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},i.prototype.wouldMoveIntoSoftTab=function(r,u,c){var f=r.column,l=r.column+u;return c<0&&(f=r.column-u,l=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(f,l).split(" ").length-1==u},i.prototype.moveCursorLeft=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(u.start.row,u.start.column);else if(r.column===0)r.row>0&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var c=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,c,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},i.prototype.moveCursorRight=function(){var r=this.lead.getPosition(),u;if(u=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(u.end.row,u.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),r=this.lead;this.wouldMoveIntoSoftTab(r,c,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},i.prototype.moveCursorLineStart=function(){var r=this.lead.row,u=this.lead.column,c=this.session.documentToScreenRow(r,u),f=this.session.screenToDocumentPosition(c,0),l=this.session.getDisplayLine(r,null,f.row,f.column),o=l.match(/^\s*/);o[0].length!=u&&!this.session.$useEmacsStyleLineStart&&(f.column+=o[0].length),this.moveCursorToPosition(f)},i.prototype.moveCursorLineEnd=function(){var r=this.lead,u=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==u.column){var c=this.session.getLine(u.row);if(u.column==c.length){var f=c.search(/\s+$/);f>0&&(u.column=f)}}this.moveCursorTo(u.row,u.column)},i.prototype.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,u=this.doc.getLine(r).length;this.moveCursorTo(r,u)},i.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},i.prototype.moveCursorLongWordRight=function(){var r=this.lead.row,u=this.lead.column,c=this.doc.getLine(r),f=c.substring(u);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var l=this.session.getFoldAt(r,u,1);if(l){this.moveCursorTo(l.end.row,l.end.column);return}if(this.session.nonTokenRe.exec(f)&&(u+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,f=c.substring(u)),u>=c.length){this.moveCursorTo(r,c.length),this.moveCursorRight(),r<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(f)&&(u+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.moveCursorLongWordLeft=function(){var r=this.lead.row,u=this.lead.column,c;if(c=this.session.getFoldAt(r,u,-1)){this.moveCursorTo(c.start.row,c.start.column);return}var f=this.session.getFoldStringAt(r,u,-1);f==null&&(f=this.doc.getLine(r).substring(0,u));var l=v.stringReverse(f);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(u-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),u<=0){this.moveCursorTo(r,0),this.moveCursorLeft(),r>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(l)&&(u-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,u)},i.prototype.$shortWordEndIndex=function(r){var u=0,c,f=/\s/,l=this.session.tokenRe;if(l.lastIndex=0,this.session.tokenRe.exec(r))u=this.session.tokenRe.lastIndex;else{for(;(c=r[u])&&f.test(c);)u++;if(u<1){for(l.lastIndex=0;(c=r[u])&&!l.test(c);)if(l.lastIndex=0,u++,f.test(c))if(u>2){u--;break}else{for(;(c=r[u])&&f.test(c);)u++;if(u>2)break}}}return l.lastIndex=0,u},i.prototype.moveCursorShortWordRight=function(){var r=this.lead.row,u=this.lead.column,c=this.doc.getLine(r),f=c.substring(u),l=this.session.getFoldAt(r,u,1);if(l)return this.moveCursorTo(l.end.row,l.end.column);if(u==c.length){var o=this.doc.getLength();do r++,f=this.doc.getLine(r);while(r<o&&/^\s*$/.test(f));/^\s+/.test(f)||(f=""),u=0}var d=this.$shortWordEndIndex(f);this.moveCursorTo(r,u+d)},i.prototype.moveCursorShortWordLeft=function(){var r=this.lead.row,u=this.lead.column,c;if(c=this.session.getFoldAt(r,u,-1))return this.moveCursorTo(c.start.row,c.start.column);var f=this.session.getLine(r).substring(0,u);if(u===0){do r--,f=this.doc.getLine(r);while(r>0&&/^\s*$/.test(f));u=f.length,/\s+$/.test(f)||(f="")}var l=v.stringReverse(f),o=this.$shortWordEndIndex(l);return this.moveCursorTo(r,u-o)},i.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},i.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},i.prototype.moveCursorBy=function(r,u){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column),f;if(u===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(c.row,this.lead.row)?(f=this.session.$bidiHandler.getPosLeft(c.column),c.column=Math.round(f/this.session.$bidiHandler.charWidths[0])):f=c.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column),r!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var l=this.session.lineWidgets[this.lead.row];r<0?r-=l.rowsAbove||0:r>0&&(r+=l.rowCount-(l.rowsAbove||0))}var o=this.session.screenToDocumentPosition(c.row+r,c.column,f);r!==0&&u===0&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+u,u===0)},i.prototype.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},i.prototype.moveCursorTo=function(r,u,c){var f=this.session.getFoldAt(r,u,1);f&&(r=f.start.row,u=f.start.column),this.$keepDesiredColumnOnChange=!0;var l=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(l.charAt(u))&&l.charAt(u-1)&&(this.lead.row==r&&this.lead.column==u+1?u=u-1:u=u+1),this.lead.setPosition(r,u),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},i.prototype.moveCursorToScreen=function(r,u,c){var f=this.session.screenToDocumentPosition(r,u);this.moveCursorTo(f.row,f.column,c)},i.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},i.prototype.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},i.prototype.toOrientedRange=function(r){var u=this.getRange();return r?(r.start.column=u.start.column,r.start.row=u.start.row,r.end.column=u.end.column,r.end.row=u.end.row):r=u,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},i.prototype.getRangeOfMovements=function(r){var u=this.getCursor();try{r(this);var c=this.getCursor();return a.fromPoints(u,c)}catch{return a.fromPoints(u,u)}finally{this.moveCursorToPosition(u)}},i.prototype.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(u){var c=u.clone();return c.isBackwards=u.cursor==u.start,c});else{var r=this.getRange();r.isBackwards=this.isBackwards()}return r},i.prototype.fromJSON=function(r){if(r.start==null)if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var u=r.length;u--;){var c=a.fromPoints(r[u].start,r[u].end);r[u].isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}else r=r[0];this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},i.prototype.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var u=this.ranges.length;u--;)if(!this.ranges[u].isEqual(r[u]))return!1;return!0},i}();p.prototype.setSelectionAnchor=p.prototype.setAnchor,p.prototype.getSelectionAnchor=p.prototype.getAnchor,p.prototype.setSelectionRange=p.prototype.setRange,h.implement(p.prototype,s),t.Selection=p});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var h=e("./lib/report_error").reportError,v=2e3,s=function(){function a(p){this.splitRegex,this.states=p,this.regExps={},this.matchMappings={};for(var i in this.states){for(var r=this.states[i],u=[],c=0,f=this.matchMappings[i]={defaultToken:"text"},l="g",o=[],d=0;d<r.length;d++){var _=r[d];if(_.defaultToken&&(f.defaultToken=_.defaultToken),_.caseInsensitive&&l.indexOf("i")===-1&&(l+="i"),_.unicode&&l.indexOf("u")===-1&&(l+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var m=_.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?m=_.regex.replace(/\\([0-9]+)/g,function(b,S){return"\\"+(parseInt(S,10)+c+1)}):(y=1,m=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&o.push(_)),f[c]=d,c+=y,u.push(m),_.onMatch||(_.onMatch=null)}}u.length||(f[0]=0,u.push("$")),o.forEach(function(b){b.splitRegex=this.createSplitterRegexp(b.regex,l)},this),this.regExps[i]=new RegExp("("+u.join(")|(")+")|($)",l)}}return a.prototype.$setMaxTokenCount=function(p){v=p|0},a.prototype.$applyToken=function(p){var i=this.splitRegex.exec(p).slice(1),r=this.token.apply(this,i);if(typeof r=="string")return[{type:r,value:p}];for(var u=[],c=0,f=r.length;c<f;c++)i[c]&&(u[u.length]={type:r[c],value:i[c]});return u},a.prototype.$arrayTokens=function(p){if(!p)return[];var i=this.splitRegex.exec(p);if(!i)return"text";for(var r=[],u=this.tokenArray,c=0,f=u.length;c<f;c++)i[c+1]&&(r[r.length]={type:u[c],value:i[c+1]});return r},a.prototype.removeCapturingGroups=function(p){var i=p.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(r,u){return u?"(?:":r});return i},a.prototype.createSplitterRegexp=function(p,i){if(p.indexOf("(?=")!=-1){var r=0,u=!1,c={};p.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(f,l,o,d,_,m){return u?u=_!="]":_?u=!0:d?(r==c.stack&&(c.end=m+1,c.stack=-1),r--):o&&(r++,o.length!=1&&(c.stack=r,c.start=m)),f}),c.end!=null&&/^\)*$/.test(p.substr(c.end))&&(p=p.substring(0,c.start)+p.substr(c.end))}return p.charAt(0)!="^"&&(p="^"+p),p.charAt(p.length-1)!="$"&&(p+="$"),new RegExp(p,(i||"").replace("g",""))},a.prototype.getLineTokens=function(p,i){if(i&&typeof i!="string"){var r=i.slice(0);i=r[0],i==="#tmp"&&(r.shift(),i=r.shift())}else var r=[];var u=i||"start",c=this.states[u];c||(u="start",c=this.states[u]);var f=this.matchMappings[u],l=this.regExps[u];l.lastIndex=0;for(var o,d=[],_=0,m=0,y={type:null,value:""};o=l.exec(p);){var b=f.defaultToken,S=null,D=o[0],g=l.lastIndex;if(g-D.length>_){var C=p.substring(_,g-D.length);y.type==b?y.value+=C:(y.type&&d.push(y),y={type:b,value:C})}for(var F=0;F<o.length-2;F++)if(o[F+1]!==void 0){S=c[f[F]],S.onMatch?b=S.onMatch(D,u,r,p):b=S.token,S.next&&(typeof S.next=="string"?u=S.next:u=S.next(u,r),c=this.states[u],c||(this.reportError("state doesn't exist",u),u="start",c=this.states[u]),f=this.matchMappings[u],_=g,l=this.regExps[u],l.lastIndex=g),S.consumeLineEnd&&(_=g);break}if(D){if(typeof b=="string")(!S||S.merge!==!1)&&y.type===b?y.value+=D:(y.type&&d.push(y),y={type:b,value:D});else if(b){y.type&&d.push(y),y={type:null,value:""};for(var F=0;F<b.length;F++)d.push(b[F])}}if(_==p.length)break;if(_=g,m++>v){for(m>2*p.length&&this.reportError("infinite loop with in ace tokenizer",{startState:i,line:p});_<p.length;)y.type&&d.push(y),y={value:p.substring(_,_+=500),type:"overflow"};u="start",r=[];break}}return y.type&&d.push(y),r.length>1&&r[0]!==u&&r.unshift("#tmp",u),{tokens:d,state:r.length?r:u}},a}();s.prototype.reportError=h,t.Tokenizer=s});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var h=e("../lib/deep_copy").deepCopy,v;v=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(p,i){if(!i){for(var r in p)this.$rules[r]=p[r];return}for(var r in p){for(var u=p[r],c=0;c<u.length;c++){var f=u[c];(f.next||f.onMatch)&&(typeof f.next=="string"&&f.next.indexOf(i)!==0&&(f.next=i+f.next),f.nextState&&f.nextState.indexOf(i)!==0&&(f.nextState=i+f.nextState))}this.$rules[i+r]=u}},this.getRules=function(){return this.$rules},this.embedRules=function(p,i,r,u,c){var f=typeof p=="function"?new p().getRules():p;if(u)for(var l=0;l<u.length;l++)u[l]=i+u[l];else{u=[];for(var o in f)u.push(i+o)}if(this.addRules(f,i),r)for(var d=Array.prototype[c?"push":"unshift"],l=0;l<u.length;l++)d.apply(this.$rules[u[l]],h(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(i)},this.getEmbeds=function(){return this.$embeds};var s=function(p,i){return(p!="start"||i.length)&&i.unshift(this.nextState,p),this.nextState},a=function(p,i){return i.shift(),i.shift()||"start"};this.normalizeRules=function(){var p=0,i=this.$rules;function r(u){var c=i[u];c.processed=!0;for(var f=0;f<c.length;f++){var l=c[f],o=null;Array.isArray(l)&&(o=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var d=l.next||l.push;if(d&&Array.isArray(d)){var _=l.stateName;_||(_=l.token,typeof _!="string"&&(_=_[0]||""),i[_]&&(_+=p++)),i[_]=d,l.next=_,r(_)}else d=="pop"&&(l.next=a);if(l.push&&(l.nextState=l.next||l.push,l.next=s,delete l.push),l.rules)for(var m in l.rules)i[m]?i[m].push&&i[m].push.apply(i[m],l.rules[m]):i[m]=l.rules[m];var y=typeof l=="string"?l:l.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?o=y.map(function(S){return i[S]}):o=i[y]),o){var b=[f,1].concat(o);l.noEscape&&(b=b.filter(function(S){return!S.next})),c.splice.apply(c,b),f--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}Object.keys(i).forEach(r,this)},this.createKeywordMapper=function(p,i,r,u){var c=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(f){for(var l=p[f],o=l.split(u||"|"),d=o.length;d--;){var _=o[d];this.$keywordList.push(_),r&&(_=_.toLowerCase()),c[_]=f}},this),p=null,r?function(f){return c[f.toLowerCase()]||i}:function(f){return c[f]||i}},this.getKeywords=function(){return this.$keywords}}.call(v.prototype),t.TextHighlightRules=v});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var h;h=function(){this.$behaviours={}},function(){this.add=function(v,s,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[v]:this.$behaviours[v]={}}this.$behaviours[v][s]=a},this.addBehaviours=function(v){for(var s in v)for(var a in v[s])this.add(s,a,v[s][a])},this.remove=function(v){this.$behaviours&&this.$behaviours[v]&&delete this.$behaviours[v]},this.inherit=function(v,s){if(typeof v=="function")var a=new v().getBehaviours(s);else var a=v.getBehaviours(s);this.addBehaviours(a)},this.getBehaviours=function(v){if(v){for(var s={},a=0;a<v.length;a++)this.$behaviours[v[a]]&&(s[v[a]]=this.$behaviours[v[a]]);return s}else return this.$behaviours}}.call(h.prototype),t.Behaviour=h});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("./range").Range,v=function(){function s(a,p,i){this.$session=a,this.$row=p,this.$rowTokens=a.getTokens(p);var r=a.getTokenAt(p,i);this.$tokenIndex=r?r.index:-1}return s.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},s.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentTokenRow=function(){return this.$row},s.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,p=this.$tokenIndex,i=a[p].start;if(i!==void 0)return i;for(i=0;p>0;)p-=1,i+=a[p].value.length;return i},s.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},s.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],p=this.getCurrentTokenColumn();return new h(this.$row,p,this.$row,p+a.value.length)},s}();t.TokenIterator=v});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var h=e("../../lib/oop"),v=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),p=["text","paren.rparen","rparen","paren","punctuation.operator"],i=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],r,u={},c={'"':'"',"'":"'"},f=function(d){var _=-1;if(d.multiSelect&&(_=d.selection.index,u.rangeCount!=d.multiSelect.rangeCount&&(u={rangeCount:d.multiSelect.rangeCount})),u[_])return r=u[_];r=u[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},l=function(d,_,m,y){var b=d.end.row-d.start.row;return{text:m+_+y,selection:[0,d.start.column+1,b,d.end.column+(b?0:1)]}},o;o=function(d){d=d||{},this.add("braces","insertion",function(_,m,y,b,S){var D=y.getCursorPosition(),g=b.doc.getLine(D.row);if(S=="{"){f(y);var C=y.getSelectionRange(),F=b.doc.getTextRange(C);if(F!==""&&F!=="{"&&y.getWrapBehavioursEnabled())return l(C,F,"{","}");if(o.isSaneInsertion(y,b))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||d.braces?(o.recordAutoInsert(y,b,"}"),{text:"{}",selection:[1,1]}):(o.recordMaybeInsert(y,b,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){f(y);var E=g.substring(D.column,D.column+1);if(E=="}"){var T=b.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&o.isAutoInsertedClosing(D,g,S))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){f(y);var M="";o.isMaybeInsertedClosing(D,g)&&(M=a.stringRepeat("}",r.maybeInsertedBrackets),o.clearMaybeInsertedClosing());var E=g.substring(D.column,D.column+1);if(E==="}"){var w=b.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var L=this.$getIndent(b.getLine(w.row))}else if(M)var L=this.$getIndent(g);else{o.clearMaybeInsertedClosing();return}var A=L+b.getTabString();return{text:`
`+A+`
`+L+M,selection:[1,A.length,1,A.length]}}else o.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="{"){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.end.column,S.end.column+1);if(C=="}")return S.end.column++,S;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,m,y,b,S){if(S=="("){f(y);var D=y.getSelectionRange(),g=b.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return l(D,g,"(",")");if(o.isSaneInsertion(y,b))return o.recordAutoInsert(y,b,")"),{text:"()",selection:[1,1]}}else if(S==")"){f(y);var C=y.getCursorPosition(),F=b.doc.getLine(C.row),E=F.substring(C.column,C.column+1);if(E==")"){var T=b.$findOpeningBracket(")",{column:C.column+1,row:C.row});if(T!==null&&o.isAutoInsertedClosing(C,F,S))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="("){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.start.column+1,S.start.column+2);if(C==")")return S.end.column++,S}}),this.add("brackets","insertion",function(_,m,y,b,S){if(S=="["){f(y);var D=y.getSelectionRange(),g=b.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return l(D,g,"[","]");if(o.isSaneInsertion(y,b))return o.recordAutoInsert(y,b,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){f(y);var C=y.getCursorPosition(),F=b.doc.getLine(C.row),E=F.substring(C.column,C.column+1);if(E=="]"){var T=b.$findOpeningBracket("]",{column:C.column+1,row:C.row});if(T!==null&&o.isAutoInsertedClosing(C,F,S))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="["){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.start.column+1,S.start.column+2);if(C=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(_,m,y,b,S){var D=b.$mode.$quotes||c;if(S.length==1&&D[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;f(y);var g=S,C=y.getSelectionRange(),F=b.doc.getTextRange(C);if(F!==""&&(F.length!=1||!D[F])&&y.getWrapBehavioursEnabled())return l(C,F,g,g);if(!F){var E=y.getCursorPosition(),T=b.doc.getLine(E.row),M=T.substring(E.column-1,E.column),w=T.substring(E.column,E.column+1),L=b.getTokenAt(E.row,E.column),A=b.getTokenAt(E.row,E.column+1);if(M=="\\"&&L&&/escape/.test(L.type))return null;var R=L&&/string|escape/.test(L.type),x=!A||/string|escape/.test(A.type),I;if(w==g)I=R!==x,I&&/string\.end/.test(A.type)&&(I=!1);else{if(R&&!x||R&&x)return null;var $=b.$mode.tokenRe;$.lastIndex=0;var k=$.test(M);$.lastIndex=0;var H=$.test(w),U=b.$mode.$pairQuotesAfter,q=U&&U[g]&&U[g].test(M);if(!q&&k||H||w&&!/[\s;,.})\]\\]/.test(w))return null;var N=T[E.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,m,y,b,S){var D=b.$mode.$quotes||c,g=b.doc.getTextRange(S);if(!S.isMultiLine()&&D.hasOwnProperty(g)){f(y);var C=b.doc.getLine(S.start.row),F=C.substring(S.start.column+1,S.start.column+2);if(F==g)return S.end.column++,S}}),d.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,m,y,b,S){if(_==="doc-start"&&(S===`
`||S===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=b.doc.getLine(D.row),C=b.doc.getLine(D.row+1),F=this.$getIndent(g);if(/\s*\*/.test(C))return/^\s*\*/.test(g)?{text:S+F+"* ",selection:[1,3+F.length,1,3+F.length]}:{text:S+F+" * ",selection:[1,3+F.length,1,3+F.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:S+F+" * "+S+" "+F+"*/",selection:[1,4+F.length,1,4+F.length]}}})},o.isSaneInsertion=function(d,_){var m=d.getCursorPosition(),y=new s(_,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",p)){if(/[)}\]]/.test(d.session.getLine(m.row)[m.column]))return!0;var b=new s(_,m.row,m.column+1);if(!this.$matchTokenType(b.getCurrentToken()||"text",p))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",i)},o.$matchTokenType=function(d,_){return _.indexOf(d.type||d)>-1},o.recordAutoInsert=function(d,_,m){var y=d.getCursorPosition(),b=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,b,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=y.row,r.autoInsertedLineEnd=m+b.substr(y.column),r.autoInsertedBrackets++},o.recordMaybeInsert=function(d,_,m){var y=d.getCursorPosition(),b=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,b)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=y.row,r.maybeInsertedLineStart=b.substr(0,y.column)+m,r.maybeInsertedLineEnd=b.substr(y.column),r.maybeInsertedBrackets++},o.isAutoInsertedClosing=function(d,_,m){return r.autoInsertedBrackets>0&&d.row===r.autoInsertedRow&&m===r.autoInsertedLineEnd[0]&&_.substr(d.column)===r.autoInsertedLineEnd},o.isMaybeInsertedClosing=function(d,_){return r.maybeInsertedBrackets>0&&d.row===r.maybeInsertedRow&&_.substr(d.column)===r.maybeInsertedLineEnd&&_.substr(0,d.column)==r.maybeInsertedLineStart},o.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},o.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},h.inherits(o,v),t.CstyleBehaviour=o});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var h=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],v=0,s=[],a=0;a<h.length;a+=2)s.push(v+=h[a]),h[a+1]&&s.push(45,v+=h[a+1]);t.wordChars=String.fromCharCode.apply(null,s)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var h=e("../config"),v=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,p=e("../unicode"),i=e("../lib/lang"),r=e("../token_iterator").TokenIterator,u=e("../range").Range,c;c=function(){this.HighlightRules=s},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+p.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+p.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new v(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(f,l,o,d){var _=l.doc,m=!0,y=!0,b=1/0,S=l.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(i.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var F=i.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),D=l.getUseSoftTabs();var M=function(H,U){var q=H.match(F);if(q){var N=q[1].length,K=q[0].length;!A(H,N,K)&&q[0][K-1]==" "&&K--,_.removeInLine(U,N,K)}},L=g+" ",T=function(H,U){(!m||/\S/.test(H))&&(A(H,b,b)?_.insertInLine({row:U,column:b},L):_.insertInLine({row:U,column:b},g))},w=function(H,U){return F.test(H)},A=function(H,U,q){for(var N=0;U--&&H.charAt(U)==" ";)N++;if(N%S!=0)return!1;for(var N=0;H.charAt(q++)==" ";)N++;return S>2?N%S!=S-1:N%S==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,C=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+i.escapeRegExp(g)+")"),E=new RegExp("(?:"+i.escapeRegExp(C)+")\\s*$"),T=function(I,$){w(I,$)||(!m||/\S/.test(I))&&(_.insertInLine({row:$,column:I.length},C),_.insertInLine({row:$,column:b},g))},M=function(I,$){var k;(k=I.match(E))&&_.removeInLine($,I.length-k[0].length,I.length),(k=I.match(F))&&_.removeInLine($,k[1].length,k[0].length)},w=function(I,$){if(F.test(I))return!0;for(var k=l.getTokens($),H=0;H<k.length;H++)if(k[H].type==="comment")return!0}}function R(I){for(var $=o;$<=d;$++)I(_.getLine($),$)}var x=1/0;R(function(I,$){var k=I.search(/\S/);k!==-1?(k<b&&(b=k),y&&!w(I,$)&&(y=!1)):x>I.length&&(x=I.length)}),b==1/0&&(b=x,m=!1,y=!1),D&&b%S!=0&&(b=Math.floor(b/S)*S),R(y?M:T)},this.toggleBlockComment=function(f,l,o,d){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var m=new r(l,d.row,d.column),y=m.getCurrentToken(),b=l.selection,S=l.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var C,F;y&&/comment/.test(y.type);){var E=y.value.indexOf(_.start);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;C=new u(T,M,T,M+_.start.length);break}y=m.stepBackward()}for(var m=new r(l,d.row,d.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var E=y.value.indexOf(_.end);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;F=new u(T,M,T,M+_.end.length);break}y=m.stepForward()}F&&l.remove(F),C&&(l.remove(C),D=C.start.row,g=-_.start.length)}else g=_.start.length,D=o.start.row,l.insert(o.end,_.end),l.insert(o.start,_.start);S.start.row==D&&(S.start.column+=g),S.end.row==D&&(S.end.column+=g),l.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(f,l,o){return this.$getIndent(l)},this.checkOutdent=function(f,l,o){return!1},this.autoOutdent=function(f,l,o){},this.$getIndent=function(f){return f.match(/^\s*/)[0]},this.createWorker=function(f){return null},this.createModeDelegates=function(f){this.$embeds=[],this.$modes={};for(var l in f)if(f[l]){var o=f[l],d=o.prototype.$id,_=h.$modes[d];_||(h.$modes[d]=_=new o),h.$modes[l]||(h.$modes[l]=_),this.$embeds.push(l),this.$modes[l]=_}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(S){(function(D){var g=m[S],C=D[g];D[m[S]]=function(){return this.$delegator(g,arguments,C)}})(b)},b=this,l=0;l<m.length;l++)y(l)},this.$delegator=function(f,l,o){var d=l[0]||"start";if(typeof d!="string"){if(Array.isArray(d[2])){var _=d[2][d[2].length-1],m=this.$modes[_];if(m)return m[f].apply(m,[d[1]].concat([].slice.call(l,1)))}d=d[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var b=d.split(this.$embeds[y]);if(!b[0]&&b[1]){l[0]=b[1];var m=this.$modes[this.$embeds[y]];return m[f].apply(m,l)}}var S=o.apply(this,l);return o?S:void 0},this.transformAction=function(f,l,o,d,_){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][l]){var b=m[y][l].apply(this,arguments);if(b)return b}}},this.getKeywords=function(f){if(!this.completionKeywords){var l=this.$tokenizer.rules,o=[];for(var d in l)for(var _=l[d],m=0,y=_.length;m<y;m++)if(typeof _[m].token=="string")/keyword|support|storage/.test(_[m].token)&&o.push(_[m].regex);else if(typeof _[m].token=="object"){for(var b=0,S=_[m].token.length;b<S;b++)if(/keyword|support|storage/.test(_[m].token[b])){var d=_[m].regex.match(/\(.+?\)/g)[b];o.push(d.substr(1,d.length-2))}}this.completionKeywords=o}return f?o.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(f,l,o,d){var _=this.$keywordList||this.$createKeywordList();return _.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(c.prototype),t.Mode=c});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function h(a,p){throw console.log("Invalid Delta:",a),"Invalid Delta: "+p}function v(a,p){return p.row>=0&&p.row<a.length&&p.column>=0&&p.column<=a[p.row].length}function s(a,p){p.action!="insert"&&p.action!="remove"&&h(p,"delta.action must be 'insert' or 'remove'"),p.lines instanceof Array||h(p,"delta.lines must be an Array"),(!p.start||!p.end)&&h(p,"delta.start/end must be an present");var i=p.start;v(a,p.start)||h(p,"delta.start must be contained in document");var r=p.end;p.action=="remove"&&!v(a,r)&&h(p,"delta.end must contained in document for 'remove' actions");var u=r.row-i.row,c=r.column-(u==0?i.column:0);(u!=p.lines.length-1||p.lines[u].length!=c)&&h(p,"delta.range must match delta lines")}t.applyDelta=function(a,p,i){var r=p.start.row,u=p.start.column,c=a[r]||"";switch(p.action){case"insert":var f=p.lines;if(f.length===1)a[r]=c.substring(0,u)+p.lines[0]+c.substring(u);else{var l=[r,1].concat(p.lines);a.splice.apply(a,l),a[r]=c.substring(0,u)+a[r],a[r+p.lines.length-1]+=c.substring(u)}break;case"remove":var o=p.end.column,d=p.end.row;r===d?a[r]=c.substring(0,u)+c.substring(o):a.splice(r,d-r+1,c.substring(0,u)+a[d].substring(o));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function i(r,u,c){this.$onChange=this.onChange.bind(this),this.attach(r),typeof u!="number"?this.setPosition(u.row,u.column):this.setPosition(u,c)}return i.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},i.prototype.getDocument=function(){return this.document},i.prototype.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row)&&!(r.start.row>this.row)){var u=p(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(u.row,u.column,!0)}},i.prototype.setPosition=function(r,u,c){var f;if(c?f={row:r,column:u}:f=this.$clipPositionToDocument(r,u),!(this.row==f.row&&this.column==f.column)){var l={row:this.row,column:this.column};this.row=f.row,this.column=f.column,this._signal("change",{old:l,value:f})}},i.prototype.detach=function(){this.document.off("change",this.$onChange)},i.prototype.attach=function(r){this.document=r||this.document,this.document.on("change",this.$onChange)},i.prototype.$clipPositionToDocument=function(r,u){var c={};return r>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):r<0?(c.row=0,c.column=0):(c.row=r,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,u))),u<0&&(c.column=0),c},i}();s.prototype.$insertRight=!1,h.implement(s.prototype,v);function a(i,r,u){var c=u?i.column<=r.column:i.column<r.column;return i.row<r.row||i.row==r.row&&c}function p(i,r,u){var c=i.action=="insert",f=(c?1:-1)*(i.end.row-i.start.row),l=(c?1:-1)*(i.end.column-i.start.column),o=i.start,d=c?o:i.end;return a(r,o,u)?{row:r.row,column:r.column}:a(d,r,!u)?{row:r.row+f,column:r.column+(r.row==d.row?l:0)}:{row:o.row,column:o.column}}t.Anchor=s});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=e("./anchor").Anchor,i=function(){function r(u){this.$lines=[""],u.length===0?this.$lines=[""]:Array.isArray(u)?this.insertMergedLines({row:0,column:0},u):this.insert({row:0,column:0},u)}return r.prototype.setValue=function(u){var c=this.getLength()-1;this.remove(new a(0,0,c,this.getLine(c).length)),this.insert({row:0,column:0},u||"")},r.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},r.prototype.createAnchor=function(u,c){return new p(this,u,c)},r.prototype.$detectNewLine=function(u){var c=u.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=c?c[1]:`
`,this._signal("changeNewLineMode")},r.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},r.prototype.setNewLineMode=function(u){this.$newLineMode!==u&&(this.$newLineMode=u,this._signal("changeNewLineMode"))},r.prototype.getNewLineMode=function(){return this.$newLineMode},r.prototype.isNewLine=function(u){return u==`\r
`||u=="\r"||u==`
`},r.prototype.getLine=function(u){return this.$lines[u]||""},r.prototype.getLines=function(u,c){return this.$lines.slice(u,c+1)},r.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},r.prototype.getLength=function(){return this.$lines.length},r.prototype.getTextRange=function(u){return this.getLinesForRange(u).join(this.getNewLineCharacter())},r.prototype.getLinesForRange=function(u){var c;if(u.start.row===u.end.row)c=[this.getLine(u.start.row).substring(u.start.column,u.end.column)];else{c=this.getLines(u.start.row,u.end.row),c[0]=(c[0]||"").substring(u.start.column);var f=c.length-1;u.end.row-u.start.row==f&&(c[f]=c[f].substring(0,u.end.column))}return c},r.prototype.insertLines=function(u,c){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(u,c)},r.prototype.removeLines=function(u,c){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(u,c)},r.prototype.insertNewLine=function(u){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(u,["",""])},r.prototype.insert=function(u,c){return this.getLength()<=1&&this.$detectNewLine(c),this.insertMergedLines(u,this.$split(c))},r.prototype.insertInLine=function(u,c){var f=this.clippedPos(u.row,u.column),l=this.pos(u.row,u.column+c.length);return this.applyDelta({start:f,end:l,action:"insert",lines:[c]},!0),this.clonePos(l)},r.prototype.clippedPos=function(u,c){var f=this.getLength();u===void 0?u=f:u<0?u=0:u>=f&&(u=f-1,c=void 0);var l=this.getLine(u);return c==null&&(c=l.length),c=Math.min(Math.max(c,0),l.length),{row:u,column:c}},r.prototype.clonePos=function(u){return{row:u.row,column:u.column}},r.prototype.pos=function(u,c){return{row:u,column:c}},r.prototype.$clipPosition=function(u){var c=this.getLength();return u.row>=c?(u.row=Math.max(0,c-1),u.column=this.getLine(c-1).length):(u.row=Math.max(0,u.row),u.column=Math.min(Math.max(u.column,0),this.getLine(u.row).length)),u},r.prototype.insertFullLines=function(u,c){u=Math.min(Math.max(u,0),this.getLength());var f=0;u<this.getLength()?(c=c.concat([""]),f=0):(c=[""].concat(c),u--,f=this.$lines[u].length),this.insertMergedLines({row:u,column:f},c)},r.prototype.insertMergedLines=function(u,c){var f=this.clippedPos(u.row,u.column),l={row:f.row+c.length-1,column:(c.length==1?f.column:0)+c[c.length-1].length};return this.applyDelta({start:f,end:l,action:"insert",lines:c}),this.clonePos(l)},r.prototype.remove=function(u){var c=this.clippedPos(u.start.row,u.start.column),f=this.clippedPos(u.end.row,u.end.column);return this.applyDelta({start:c,end:f,action:"remove",lines:this.getLinesForRange({start:c,end:f})}),this.clonePos(c)},r.prototype.removeInLine=function(u,c,f){var l=this.clippedPos(u,c),o=this.clippedPos(u,f);return this.applyDelta({start:l,end:o,action:"remove",lines:this.getLinesForRange({start:l,end:o})},!0),this.clonePos(l)},r.prototype.removeFullLines=function(u,c){u=Math.min(Math.max(0,u),this.getLength()-1),c=Math.min(Math.max(0,c),this.getLength()-1);var f=c==this.getLength()-1&&u>0,l=c<this.getLength()-1,o=f?u-1:u,d=f?this.getLine(o).length:0,_=l?c+1:c,m=l?0:this.getLine(_).length,y=new a(o,d,_,m),b=this.$lines.slice(u,c+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),b},r.prototype.removeNewLine=function(u){u<this.getLength()-1&&u>=0&&this.applyDelta({start:this.pos(u,this.getLine(u).length),end:this.pos(u+1,0),action:"remove",lines:["",""]})},r.prototype.replace=function(u,c){if(u instanceof a||(u=a.fromPoints(u.start,u.end)),c.length===0&&u.isEmpty())return u.start;if(c==this.getTextRange(u))return u.end;this.remove(u);var f;return c?f=this.insert(u.start,c):f=u.start,f},r.prototype.applyDeltas=function(u){for(var c=0;c<u.length;c++)this.applyDelta(u[c])},r.prototype.revertDeltas=function(u){for(var c=u.length-1;c>=0;c--)this.revertDelta(u[c])},r.prototype.applyDelta=function(u,c){var f=u.action=="insert";(f?u.lines.length<=1&&!u.lines[0]:!a.comparePoints(u.start,u.end))||(f&&u.lines.length>2e4?this.$splitAndapplyLargeDelta(u,2e4):(v(this.$lines,u,c),this._signal("change",u)))},r.prototype.$safeApplyDelta=function(u){var c=this.$lines.length;(u.action=="remove"&&u.start.row<c&&u.end.row<c||u.action=="insert"&&u.start.row<=c)&&this.applyDelta(u)},r.prototype.$splitAndapplyLargeDelta=function(u,c){for(var f=u.lines,l=f.length-c+1,o=u.start.row,d=u.start.column,_=0,m=0;_<l;_=m){m+=c-1;var y=f.slice(_,m);y.push(""),this.applyDelta({start:this.pos(o+_,d),end:this.pos(o+m,d=0),action:u.action,lines:y},!0)}u.lines=f.slice(_),u.start.row=o+_,u.start.column=d,this.applyDelta(u,!0)},r.prototype.revertDelta=function(u){this.$safeApplyDelta({start:this.clonePos(u.start),end:this.clonePos(u.end),action:u.action=="insert"?"remove":"insert",lines:u.lines.slice()})},r.prototype.indexToPosition=function(u,c){for(var f=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,o=c||0,d=f.length;o<d;o++)if(u-=f[o].length+l,u<0)return{row:o,column:u+f[o].length+l};return{row:d-1,column:u+f[d-1].length+l}},r.prototype.positionToIndex=function(u,c){for(var f=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,o=0,d=Math.min(u.row,f.length),_=c||0;_<d;++_)o+=f[_].length+l;return o+u.column},r.prototype.$split=function(u){return u.split(/\r\n|\r|\n/)},r}();i.prototype.$autoNewLine="",i.prototype.$newLineMode="auto",h.implement(i.prototype,s),t.Document=i});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function a(p,i){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=p;var r=this;this.$worker=function(){if(r.running){for(var u=new Date,c=r.currentLine,f=-1,l=r.doc,o=c;r.lines[c];)c++;var d=l.getLength(),_=0;for(r.running=!1;c<d;){r.$tokenizeRow(c),f=c;do c++;while(r.lines[c]);if(_++,_%5===0&&new Date-u>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=c,f==-1&&(f=c),o<=f&&r.fireUpdateEvent(o,f)}}}return a.prototype.setTokenizer=function(p){this.tokenizer=p,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(p){this.doc=p,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(p,i){var r={first:p,last:i};this._signal("update",{data:r})},a.prototype.start=function(p){this.currentLine=Math.min(p||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(p){var i=p.start.row,r=p.end.row-i;if(r===0)this.lines[i]=null;else if(p.action=="remove")this.lines.splice(i,r+1,null),this.states.splice(i,r+1,null);else{var u=Array(r+1);u.unshift(i,1),this.lines.splice.apply(this.lines,u),this.states.splice.apply(this.states,u)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(p){return this.lines[p]||this.$tokenizeRow(p)},a.prototype.getState=function(p){return this.currentLine==p&&this.$tokenizeRow(p),this.states[p]||"start"},a.prototype.$tokenizeRow=function(p){var i=this.doc.getLine(p),r=this.states[p-1],u=this.tokenizer.getLineTokens(i,r,p);return this.states[p]+""!=u.state+""?(this.states[p]=u.state,this.lines[p+1]=null,this.currentLine>p+1&&(this.currentLine=p+1)):this.currentLine==p&&(this.currentLine=p+1),this.lines[p]=u.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();h.implement(s.prototype,v),t.BackgroundTokenizer=s});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var h=e("./lib/lang"),v=e("./range").Range,s=function(){function a(p,i,r){r===void 0&&(r="text"),this.setRegexp(p),this.clazz=i,this.type=r}return a.prototype.setRegexp=function(p){this.regExp+""!=p+""&&(this.regExp=p,this.cache=[])},a.prototype.update=function(p,i,r,u){if(this.regExp)for(var c=u.firstRow,f=u.lastRow,l={},o=c;o<=f;o++){var d=this.cache[o];d==null&&(d=h.getMatchOffsets(r.getLine(o),this.regExp),d.length>this.MAX_RANGES&&(d=d.slice(0,this.MAX_RANGES)),d=d.map(function(b){return new v(o,b.offset,o,b.offset+b.length)}),this.cache[o]=d.length?d:"");for(var _=d.length;_--;){var m=d[_].toScreenRange(r),y=m.toString();l[y]||(l[y]=!0,i.drawSingleLineMarker(p,m,this.clazz,u))}}},a}();s.prototype.MAX_RANGES=500,t.SearchHighlight=s});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,C,F){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),C===!1||!this.lastDeltas){this.lastDeltas=[];var E=this.$undoStack.length;E>this.$undoDepth-1&&this.$undoStack.splice(0,E-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,C){this.selections.push({value:g,rev:C||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,C){C==null&&(C=this.$rev+1);for(var F=this.$undoStack,E=F.length;E--;){var T=F[E][0];if(T.id<=g)break;T.id<C&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,C){for(var F=this.selections,E=F.length;E--;){var T=F[E];if(T.rev<g)return C&&(T=F[E+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,C){C==null&&(C=this.$rev+1);for(var F=this.$undoStack,E=null,T=0,M=F.length;M--;){var w=F[M][0];if(w.id<C&&!E&&(E=M+1),w.id<=g){T=M+1;break}}return F.slice(T,E)},D.prototype.getChangedRanges=function(g,C){C==null&&(C=this.$rev+1)},D.prototype.getChangedLines=function(g,C){C==null&&(C=this.$rev+1)},D.prototype.undo=function(g,C){this.lastDeltas=null;var F=this.$undoStack;if(v(F,F.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var E=F.pop(),T=null;return E&&(T=g.undoChanges(E,C),this.$redoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,C){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var F=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,F),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var E=this.$redoStack.pop(),T=null;return E&&(T=g.redoChanges(E,C),this.$undoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,C=g[g.length-1],F=C&&C[0].id||0;this.$redoStackBaseRev=F,this.$rev=F},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?c(g):c(this.$undoStack)+`
---
`+c(this.$redoStack)},D}();h.prototype.hasUndo=h.prototype.canUndo,h.prototype.hasRedo=h.prototype.canRedo,h.prototype.isClean=h.prototype.isAtBookmark,h.prototype.markClean=h.prototype.bookmark;function v(D,g){for(var C=g;C--;){var F=D[C];if(F&&!F[0].ignore){for(;C<g-1;){var E=o(D[C],D[C+1]);D[C]=E[0],D[C+1]=E[1],C++}return!0}}}var s=e("./range").Range,a=s.comparePoints,p=s.comparePoints;function i(D){var g=D.action=="insert",C=D.start,F=D.end,E=(F.row-C.row)*(g?1:-1),T=(F.column-C.column)*(g?1:-1);g&&(F=C);for(var M in this.marks){var w=this.marks[M],L=p(w,C);if(!(L<0)){if(L===0&&g)if(w.bias==1)L=1;else{w.bias==-1;continue}var A=g?L:p(w,F);if(A>0){w.row+=E,w.column+=w.row==F.row?T:0;continue}!g&&A<=0&&(w.row=C.row,w.column=C.column,A===0&&(w.bias=1))}}}function r(D){return{row:D.row,column:D.column}}function u(D){return{start:r(D.start),end:r(D.end),action:D.action,lines:D.lines.slice()}}function c(D){if(D=D||this,Array.isArray(D))return D.map(c).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(f).join(`
`):g=f(D.value)),D.start&&(g+=f(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function f(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function l(D,g){var C=D.action=="insert",F=g.action=="insert";if(C&&F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(C&&!F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;else if(!C&&F)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(!C&&!F)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;return[g,D]}function o(D,g){for(var C=D.length;C--;)for(var F=0;F<g.length;F++)if(!l(D[C],g[F])){for(;C<D.length;){for(;F--;)l(g[F],D[C]);F=g.length,C++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function d(D,g){var C=D.action=="insert",F=g.action=="insert";if(C&&F)a(D.start,g.start)<0?_(g,D,1):_(D,g,1);else if(C&&!F)a(D.start,g.end)>=0?_(D,g,-1):(a(D.start,g.start)<=0||_(D,s.fromPoints(g.start,D.start),-1),_(g,D,1));else if(!C&&F)a(g.start,D.end)>=0?_(g,D,-1):(a(g.start,D.start)<=0||_(g,s.fromPoints(D.start,g.start),-1),_(D,g,1));else if(!C&&!F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else{var E,T;return a(D.start,g.start)<0&&(E=D,D=y(D,g.start)),a(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!E&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,E,T].filter(Boolean)}return[g,D]}function _(D,g,C){m(D.start,g.start,g.end,C),m(D.end,g.start,g.end,C)}function m(D,g,C,F){D.row==(F==1?g:C).row&&(D.column+=F*(C.column-g.column)),D.row+=F*(C.row-g.row)}function y(D,g){var C=D.lines,F=D.end;D.end=r(g);var E=D.end.row-D.start.row,T=C.splice(E,C.length),M=E?g.column:g.column-D.start.column;C.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:r(g),end:F,lines:T,action:D.action};return w}function b(D,g){g=u(g);for(var C=D.length;C--;){for(var F=D[C],E=0;E<F.length;E++){var T=F[E],M=d(T,g);g=M[0],M.length!=2&&(M[2]?(F.splice(E+1,1,M[1],M[2]),E++):M[1]||(F.splice(E,1),E--))}F.length||D.splice(C,1)}return D}function S(D,g){for(var C=0;C<g.length;C++)for(var F=g[C],E=0;E<F.length;E++)b(D,F[E])}t.UndoManager=h});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("../range").Range,v=function(){function s(a,p){this.foldData=a,Array.isArray(p)?this.folds=p:p=this.folds=[p];var i=p[p.length-1];this.range=new h(p[0].start.row,p[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}return s.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(p){p.start.row+=a,p.end.row+=a})},s.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(p,i){return-p.range.compareEnd(i.start.row,i.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},s.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},s.prototype.walk=function(a,p,i){var r=0,u=this.folds,c,f,l,o=!0;p==null&&(p=this.end.row,i=this.end.column);for(var d=0;d<u.length;d++){if(c=u[d],f=c.range.compareStart(p,i),f==-1){a(null,p,i,r,o);return}if(l=a(null,c.start.row,c.start.column,r,o),l=!l&&a(c.placeholder,c.start.row,c.start.column,r),l||f===0)return;o=!c.sameRow,r=c.end.column}a(null,p,i,r,o)},s.prototype.getNextFoldTo=function(a,p){for(var i,r,u=0;u<this.folds.length;u++){if(i=this.folds[u],r=i.range.compareEnd(a,p),r==-1)return{fold:i,kind:"after"};if(r===0)return{fold:i,kind:"inside"}}return null},s.prototype.addRemoveChars=function(a,p,i){var r=this.getNextFoldTo(a,p),u,c;if(r){if(u=r.fold,r.kind=="inside"&&u.start.column!=p&&u.start.row!=a)window.console&&window.console.log(a,p,u);else if(u.start.row==a){c=this.folds;var f=c.indexOf(u);for(f===0&&(this.start.column+=i),f;f<c.length;f++){if(u=c[f],u.start.column+=i,!u.sameRow)return;u.end.column+=i}this.end.column+=i}}},s.prototype.split=function(a,p){var i=this.getNextFoldTo(a,p);if(!i||i.kind=="inside")return null;var r=i.fold,u=this.folds,c=this.foldData,f=u.indexOf(r),l=u[f-1];this.end.row=l.end.row,this.end.column=l.end.column,u=u.splice(f,u.length-f);var o=new s(c,u);return c.splice(c.indexOf(this)+1,0,o),o},s.prototype.merge=function(a){for(var p=a.folds,i=0;i<p.length;i++)this.addFold(p[i]);var r=this.foldData;r.splice(r.indexOf(a),1)},s.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(p){a.push("  "+p.toString())}),a.push("]"),a.join(`
`)},s.prototype.idxToPosition=function(a){for(var p=0,i=0;i<this.folds.length;i++){var r=this.folds[i];if(a-=r.start.column-p,a<0)return{row:r.start.row,column:r.start.column+a};if(a-=r.placeholder.length,a<0)return r.start;p=r.end.column}return{row:this.end.row,column:this.end.column+a}},s}();t.FoldLine=v});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("./range").Range,v=h.comparePoints,s=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(p,i,r){for(var u=this.ranges,c=r||0;c<u.length;c++){var f=u[c],l=v(p,f.end);if(!(l>0)){var o=v(p,f.start);return l===0?i&&o!==0?-c-2:c:o>0||o===0&&!i?c:-c-1}}return-c-1},a.prototype.add=function(p){var i=!p.isEmpty(),r=this.pointIndex(p.start,i);r<0&&(r=-r-1);var u=this.pointIndex(p.end,i,r);return u<0?u=-u-1:u++,this.ranges.splice(r,u-r,p)},a.prototype.addList=function(p){for(var i=[],r=p.length;r--;)i.push.apply(i,this.add(p[r]));return i},a.prototype.substractPoint=function(p){var i=this.pointIndex(p);if(i>=0)return this.ranges.splice(i,1)},a.prototype.merge=function(){var p=[],i=this.ranges;i=i.sort(function(l,o){return v(l.start,o.start)});for(var r=i[0],u,c=1;c<i.length;c++){u=r,r=i[c];var f=v(u.end,r.start);f<0||f==0&&!u.isEmpty()&&!r.isEmpty()||(v(u.end,r.end)<0&&(u.end.row=r.end.row,u.end.column=r.end.column),i.splice(c,1),p.push(r),r=u,c--)}return this.ranges=i,p},a.prototype.contains=function(p,i){return this.pointIndex({row:p,column:i})>=0},a.prototype.containsPoint=function(p){return this.pointIndex(p)>=0},a.prototype.rangeAtPoint=function(p){var i=this.pointIndex(p);if(i>=0)return this.ranges[i]},a.prototype.clipRows=function(p,i){var r=this.ranges;if(r[0].start.row>i||r[r.length-1].start.row<p)return[];var u=this.pointIndex({row:p,column:0});u<0&&(u=-u-1);var c=this.pointIndex({row:i,column:0},u);c<0&&(c=-c-1);for(var f=[],l=u;l<c;l++)f.push(r[l]);return f},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(p){for(var i=p.start,r=p.end,u=i.row,c=r.row,f=this.ranges,l=0,o=f.length;l<o;l++){var d=f[l];if(d.end.row>=u)break}if(p.action=="insert")for(var _=c-u,m=-i.column+r.column;l<o;l++){var d=f[l];if(d.start.row>u)break;if(d.start.row==u&&d.start.column>=i.column&&(d.start.column==i.column&&this.$bias<=0||(d.start.column+=m,d.start.row+=_)),d.end.row==u&&d.end.column>=i.column){if(d.end.column==i.column&&this.$bias<0)continue;d.end.column==i.column&&m>0&&l<o-1&&d.end.column>d.start.column&&d.end.column==f[l+1].start.column&&(d.end.column-=m),d.end.column+=m,d.end.row+=_}}else for(var _=u-c,m=i.column-r.column;l<o;l++){var d=f[l];if(d.start.row>c)break;d.end.row<c&&(u<d.end.row||u==d.end.row&&i.column<d.end.column)?(d.end.row=u,d.end.column=i.column):d.end.row==c?d.end.column<=r.column?(_||d.end.column>i.column)&&(d.end.column=i.column,d.end.row=i.row):(d.end.column+=m,d.end.row+=_):d.end.row>c&&(d.end.row+=_),d.start.row<c&&(u<d.start.row||u==d.start.row&&i.column<d.start.column)?(d.start.row=u,d.start.column=i.column):d.start.row==c?d.start.column<=r.column?(_||d.start.column>i.column)&&(d.start.column=i.column,d.start.row=i.row):(d.start.column+=m,d.start.row+=_):d.start.row>c&&(d.start.row+=_)}if(_!=0&&l<o)for(;l<o;l++){var d=f[l];d.start.row+=_,d.end.row+=_}},a}();s.prototype.comparePoints=v,t.RangeList=s});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(l[d]=o[d])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function l(){this.constructor=c}c.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}(),v=e("../range_list").RangeList,s=function(u){h(c,u);function c(f,l){var o=u.call(this)||this;return o.foldLine=null,o.placeholder=l,o.range=f,o.start=f.start,o.end=f.end,o.sameRow=f.start.row==f.end.row,o.subFolds=o.ranges=[],o}return c.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},c.prototype.setFoldLine=function(f){this.foldLine=f,this.subFolds.forEach(function(l){l.setFoldLine(f)})},c.prototype.clone=function(){var f=this.range.clone(),l=new c(f,this.placeholder);return this.subFolds.forEach(function(o){l.subFolds.push(o.clone())}),l.collapseChildren=this.collapseChildren,l},c.prototype.addSubFold=function(f){if(!this.range.isEqual(f)){p(f,this.start);for(var m=f.start.row,y=f.start.column,l=0,o=-1;l<this.subFolds.length&&(o=this.subFolds[l].range.compare(m,y),o==1);l++);var d=this.subFolds[l],_=0;if(o==0){if(d.range.containsRange(f))return d.addSubFold(f);_=1}for(var m=f.range.end.row,y=f.range.end.column,b=l,o=-1;b<this.subFolds.length&&(o=this.subFolds[b].range.compare(m,y),o==1);b++);o==0&&b++;for(var S=this.subFolds.splice(l,b-l,f),D=o==0?S.length-1:S.length,g=_;g<D;g++)f.addSubFold(S[g]);return f.setFoldLine(this.foldLine),f}},c.prototype.restoreRange=function(f){return r(f,this.start)},c}(v);function a(u,c){u.row-=c.row,u.row==0&&(u.column-=c.column)}function p(u,c){a(u.start,c),a(u.end,c)}function i(u,c){u.row==0&&(u.column+=c.column),u.row+=c.row}function r(u,c){i(u.start,c),i(u.end,c)}t.Fold=s});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var h=e("../range").Range,v=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator,p=e("../mouse/mouse_event").MouseEvent;function i(){this.getFoldAt=function(r,u,c){var f=this.getFoldLine(r);if(!f)return null;for(var l=f.folds,o=0;o<l.length;o++){var d=l[o].range;if(d.contains(r,u)){if(c==1&&d.isEnd(r,u)&&!d.isEmpty())continue;if(c==-1&&d.isStart(r,u)&&!d.isEmpty())continue;return l[o]}}},this.getFoldsInRange=function(r){var u=r.start,c=r.end,f=this.$foldData,l=[];u.column+=1,c.column-=1;for(var o=0;o<f.length;o++){var d=f[o].range.compareRange(r);if(d!=2){if(d==-2)break;for(var _=f[o].folds,m=0;m<_.length;m++){var y=_[m];if(d=y.range.compareRange(r),d==-2)break;if(d==2)continue;if(d==42)break;l.push(y)}}}return u.column-=1,c.column+=1,l},this.getFoldsInRangeList=function(r){if(Array.isArray(r)){var u=[];r.forEach(function(c){u=u.concat(this.getFoldsInRange(c))},this)}else var u=this.getFoldsInRange(r);return u},this.getAllFolds=function(){for(var r=[],u=this.$foldData,c=0;c<u.length;c++)for(var f=0;f<u[c].folds.length;f++)r.push(u[c].folds[f]);return r},this.getFoldStringAt=function(r,u,c,f){if(f=f||this.getFoldLine(r),!f)return null;for(var l={end:{column:0}},o,d,_=0;_<f.folds.length;_++){d=f.folds[_];var m=d.range.compareEnd(r,u);if(m==-1){o=this.getLine(d.start.row).substring(l.end.column,d.start.column);break}else if(m===0)return null;l=d}return o||(o=this.getLine(d.start.row).substring(l.end.column)),c==-1?o.substring(0,u-l.end.column):c==1?o.substring(u-l.end.column):o},this.getFoldLine=function(r,u){var c=this.$foldData,f=0;for(u&&(f=c.indexOf(u)),f==-1&&(f=0),f;f<c.length;f++){var l=c[f];if(l.start.row<=r&&l.end.row>=r)return l;if(l.end.row>r)return null}return null},this.getNextFoldLine=function(r,u){var c=this.$foldData,f=0;for(u&&(f=c.indexOf(u)),f==-1&&(f=0),f;f<c.length;f++){var l=c[f];if(l.end.row>=r)return l}return null},this.getFoldedRowCount=function(r,u){for(var c=this.$foldData,f=u-r+1,l=0;l<c.length;l++){var o=c[l],d=o.end.row,_=o.start.row;if(d>=u){_<u&&(_>=r?f-=u-_:f=0);break}else d>=r&&(_>=r?f-=d-_:f-=d-r+1)}return f},this.$addFoldLine=function(r){return this.$foldData.push(r),this.$foldData.sort(function(u,c){return u.start.row-c.start.row}),r},this.addFold=function(r,u){var c=this.$foldData,f=!1,l;r instanceof s?l=r:(l=new s(u,r),l.collapseChildren=u.collapseChildren),this.$clipRangeToDocument(l.range);var o=l.start.row,d=l.start.column,_=l.end.row,m=l.end.column,y=this.getFoldAt(o,d,1),b=this.getFoldAt(_,m,-1);if(y&&b==y)return y.addSubFold(l);y&&!y.range.isStart(o,d)&&this.removeFold(y),b&&!b.range.isEnd(_,m)&&this.removeFold(b);var S=this.getFoldsInRange(l.range);S.length>0&&(this.removeFolds(S),l.collapseChildren||S.forEach(function(F){l.addSubFold(F)}));for(var D=0;D<c.length;D++){var g=c[D];if(_==g.start.row){g.addFold(l),f=!0;break}else if(o==g.end.row){if(g.addFold(l),f=!0,!l.sameRow){var C=c[D+1];if(C&&C.start.row==_){g.merge(C);break}}break}else if(_<=g.start.row)break}return f||(g=this.$addFoldLine(new v(this.$foldData,l))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:l,action:"add"}),l},this.addFolds=function(r){r.forEach(function(u){this.addFold(u)},this)},this.removeFold=function(r){var u=r.foldLine,c=u.start.row,f=u.end.row,l=this.$foldData,o=u.folds;if(o.length==1)l.splice(l.indexOf(u),1);else if(u.range.isEnd(r.end.row,r.end.column))o.pop(),u.end.row=o[o.length-1].end.row,u.end.column=o[o.length-1].end.column;else if(u.range.isStart(r.start.row,r.start.column))o.shift(),u.start.row=o[0].start.row,u.start.column=o[0].start.column;else if(r.sameRow)o.splice(o.indexOf(r),1);else{var d=u.split(r.start.row,r.start.column);o=d.folds,o.shift(),d.start.row=o[0].start.row,d.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,f):this.$updateRowLengthCache(c,f)),this.$modified=!0,this._signal("changeFold",{data:r,action:"remove"})},this.removeFolds=function(r){for(var u=[],c=0;c<r.length;c++)u.push(r[c]);u.forEach(function(f){this.removeFold(f)},this),this.$modified=!0},this.expandFold=function(r){this.removeFold(r),r.subFolds.forEach(function(u){r.restoreRange(u),this.addFold(u)},this),r.collapseChildren>0&&this.foldAll(r.start.row+1,r.end.row,r.collapseChildren-1),r.subFolds=[]},this.expandFolds=function(r){r.forEach(function(u){this.expandFold(u)},this)},this.unfold=function(r,u){var c,f;if(r==null)c=new h(0,0,this.getLength(),0),u==null&&(u=!0);else if(typeof r=="number")c=new h(r,0,r,this.getLine(r).length);else if("row"in r)c=h.fromPoints(r,r);else{if(Array.isArray(r))return f=[],r.forEach(function(o){f=f.concat(this.unfold(o))},this),f;c=r}f=this.getFoldsInRangeList(c);for(var l=f;f.length==1&&h.comparePoints(f[0].start,c.start)<0&&h.comparePoints(f[0].end,c.end)>0;)this.expandFolds(f),f=this.getFoldsInRangeList(c);if(u!=!1?this.removeFolds(f):this.expandFolds(f),l.length)return l},this.isRowFolded=function(r,u){return!!this.getFoldLine(r,u)},this.getRowFoldEnd=function(r,u){var c=this.getFoldLine(r,u);return c?c.end.row:r},this.getRowFoldStart=function(r,u){var c=this.getFoldLine(r,u);return c?c.start.row:r},this.getFoldDisplayLine=function(r,u,c,f,l){f==null&&(f=r.start.row),l==null&&(l=0),u==null&&(u=r.end.row),c==null&&(c=this.getLine(u).length);var o=this.doc,d="";return r.walk(function(_,m,y,b){if(!(m<f)){if(m==f){if(y<l)return;b=Math.max(l,b)}_!=null?d+=_:d+=o.getLine(m).substring(b,y)}},u,c),d},this.getDisplayLine=function(r,u,c,f){var l=this.getFoldLine(r);if(l)return this.getFoldDisplayLine(l,r,u,c,f);var o;return o=this.doc.getLine(r),o.substring(f||0,u||o.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(u){var c=u.folds.map(function(f){return f.clone()});return new v(r,c)}),r},this.toggleFold=function(r){var u=this.selection,c=u.getRange(),f,l;if(c.isEmpty()){var o=c.start;if(f=this.getFoldAt(o.row,o.column),f){this.expandFold(f);return}else(l=this.findMatchingBracket(o))?c.comparePoint(l)==1?c.end=l:(c.start=l,c.start.column++,c.end.column--):(l=this.findMatchingBracket({row:o.row,column:o.column+1}))?(c.comparePoint(l)==1?c.end=l:c.start=l,c.start.column++):c=this.getCommentFoldRange(o.row,o.column)||c}else{var d=this.getFoldsInRange(c);if(r&&d.length){this.expandFolds(d);return}else d.length==1&&(f=d[0])}if(f||(f=this.getFoldAt(c.start.row,c.start.column)),f&&f.range.toString()==c.toString()){this.expandFold(f);return}var _="...";if(!c.isMultiLine()){if(_=this.getTextRange(c),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,c)},this.getCommentFoldRange=function(r,u,c){var f=new a(this,r,u),l=f.getCurrentToken(),o=l&&l.type;if(l&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],o=="comment"&&(o+="|doc-start|\\.doc");var d=new RegExp(o),_=new h;if(c!=1){do l=f.stepBackward();while(l&&d.test(l.type)&&!/^comment.end/.test(l.type));l=f.stepForward()}if(_.start.row=f.getCurrentTokenRow(),_.start.column=f.getCurrentTokenColumn()+(/^comment.start/.test(l.type)?l.value.length:2),f=new a(this,r,u),c!=-1){var m=-1;do if(l=f.stepForward(),m==-1){var y=this.getState(f.$row);d.test(y)||(m=f.$row)}else if(f.$row>m)break;while(l&&d.test(l.type)&&!/^comment.start/.test(l.type));l=f.stepBackward()}else l=f.getCurrentToken();return _.end.row=f.getCurrentTokenRow(),_.end.column=f.getCurrentTokenColumn(),/^comment.end/.test(l.type)||(_.end.column+=l.value.length-2),_}},this.foldAll=function(r,u,c,f){c==null&&(c=1e5);var l=this.foldWidgets;if(l){u=u||this.getLength(),r=r||0;for(var o=r;o<u;o++)if(l[o]==null&&(l[o]=this.getFoldWidget(o)),l[o]=="start"&&!(f&&!f(o))){var d=this.getFoldWidgetRange(o);d&&d.isMultiLine()&&d.end.row<=u&&d.start.row>=r&&(o=d.end.row,d.collapseChildren=c,this.addFold("...",d))}}},this.foldToLevel=function(r){for(this.foldAll();r-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var r=this;this.foldAll(null,null,null,function(u){for(var c=r.getTokens(u),f=0;f<c.length;f++){var l=c[f];if(!(l.type=="text"&&/^\s+$/.test(l.value)))return!!/comment/.test(l.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(r){if(!this.$foldStyles[r])throw new Error("invalid fold style: "+r+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=r){this.$foldStyle=r,r=="manual"&&this.unfold();var u=this.$foldMode;this.$setFolding(null),this.$setFolding(u)}},this.$setFolding=function(r){if(this.$foldMode!=r){if(this.$foldMode=r,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!r||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=r.getFoldWidget.bind(r,this,this.$foldStyle),this.getFoldWidgetRange=r.getFoldWidgetRange.bind(r,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(r,u){var c=this.foldWidgets;if(!c||u&&c[r])return{};for(var f=r-1,l;f>=0;){var o=c[f];if(o==null&&(o=c[f]=this.getFoldWidget(f)),o=="start"){var d=this.getFoldWidgetRange(f);if(l||(l=d),d&&d.end.row>=r)break}f--}return{range:f!==-1&&d,firstRange:l}},this.onFoldWidgetClick=function(r,u){u instanceof p&&(u=u.domEvent);var c={children:u.shiftKey,all:u.ctrlKey||u.metaKey,siblings:u.altKey},f=this.$toggleFoldWidget(r,c);if(!f){var l=u.target||u.srcElement;l&&/ace_fold-widget/.test(l.className)&&(l.className+=" ace_invalid")}},this.$toggleFoldWidget=function(r,u){if(this.getFoldWidget){var c=this.getFoldWidget(r),f=this.getLine(r),l=c==="end"?-1:1,o=this.getFoldAt(r,l===-1?0:f.length,l);if(o)return u.children||u.all?this.removeFold(o):this.expandFold(o),o;var d=this.getFoldWidgetRange(r,!0);if(d&&!d.isMultiLine()&&(o=this.getFoldAt(d.start.row,d.start.column,1),o&&d.isEqual(o.range)))return this.removeFold(o),o;if(u.siblings){var _=this.getParentFoldRangeData(r);if(_.range)var m=_.range.start.row+1,y=_.range.end.row;this.foldAll(m,y,u.all?1e4:0)}else u.children?(y=d?d.end.row:this.getLength(),this.foldAll(r+1,y,u.all?1e4:0)):d&&(u.all&&(d.collapseChildren=1e4),this.addFold("...",d));return d}},this.toggleFoldWidget=function(r){var u=this.selection.getCursor().row;u=this.getRowFoldStart(u);var c=this.$toggleFoldWidget(u,{});if(!c){var f=this.getParentFoldRangeData(u,!0);if(c=f.range||f.firstRange,c){u=c.start.row;var l=this.getFoldAt(u,this.getLine(u).length,1);l?this.removeFold(l):this.addFold("...",c)}}},this.updateFoldWidgets=function(r){var u=r.start.row,c=r.end.row-u;if(c===0)this.foldWidgets[u]=null;else if(r.action=="remove")this.foldWidgets.splice(u,c+1,null);else{var f=Array(c+1);f.unshift(u,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}},this.tokenizerUpdateFoldWidgets=function(r){var u=r.data;u.first!=u.last&&this.foldWidgets.length>u.first&&this.foldWidgets.splice(u.first,this.foldWidgets.length)}}t.Folding=i});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var h=e("../token_iterator").TokenIterator,v=e("../range").Range;function s(){this.findMatchingBracket=function(a,p){if(a.column==0)return null;var i=p||this.getLine(a.row).charAt(a.column-1);if(i=="")return null;var r=i.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],a):this.$findOpeningBracket(r[2],a):null},this.getBracketRange=function(a){var p=this.getLine(a.row),i=!0,r,u=p.charAt(a.column-1),c=u&&u.match(/([\(\[\{])|([\)\]\}])/);if(c||(u=p.charAt(a.column),a={row:a.row,column:a.column+1},c=u&&u.match(/([\(\[\{])|([\)\]\}])/),i=!1),!c)return null;if(c[1]){var f=this.$findClosingBracket(c[1],a);if(!f)return null;r=v.fromPoints(a,f),i||(r.end.column++,r.start.column--),r.cursor=r.end}else{var f=this.$findOpeningBracket(c[2],a);if(!f)return null;r=v.fromPoints(f,a),i||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(a,p){var i=this.getLine(a.row),r=/([\(\[\{])|([\)\]\}])/,u=!p&&i.charAt(a.column-1),c=u&&u.match(r);if(c||(u=(p===void 0||p)&&i.charAt(a.column),a={row:a.row,column:a.column+1},c=u&&u.match(r)),!c)return null;var f=new v(a.row,a.column-1,a.row,a.column),l=c[1]?this.$findClosingBracket(c[1],a):this.$findOpeningBracket(c[2],a);if(!l)return[f];var o=new v(l.row,l.column,l.row,l.column+1);return[f,o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,p,i){var r=this.$brackets[a],u=1,c=new h(this,p.row,p.column),f=c.getCurrentToken();if(f||(f=c.stepForward()),!!f){i||(i=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var l=p.column-c.getCurrentTokenColumn()-2,o=f.value;;){for(;l>=0;){var d=o.charAt(l);if(d==r){if(u-=1,u==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else d==a&&(u+=1);l-=1}do f=c.stepBackward();while(f&&!i.test(f.type));if(f==null)break;o=f.value,l=o.length-1}return null}},this.$findClosingBracket=function(a,p,i){var r=this.$brackets[a],u=1,c=new h(this,p.row,p.column),f=c.getCurrentToken();if(f||(f=c.stepForward()),!!f){i||(i=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var l=p.column-c.getCurrentTokenColumn();;){for(var o=f.value,d=o.length;l<d;){var _=o.charAt(l);if(_==r){if(u-=1,u==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else _==a&&(u+=1);l+=1}do f=c.stepForward();while(f&&!i.test(f.type));if(f==null)break;l=0}return null}},this.getMatchingTags=function(a){var p=new h(this,a.row,a.column),i=this.$findTagName(p);if(i){var r=p.stepBackward();return r.value==="<"?this.$findClosingTag(p,i):this.$findOpeningTag(p,i)}},this.$findTagName=function(a){var p=a.getCurrentToken(),i=!1,r=!1;if(p&&p.type.indexOf("tag-name")===-1)do r?p=a.stepBackward():p=a.stepForward(),p&&(p.value==="/>"?r=!0:p.type.indexOf("tag-name")!==-1&&(i=!0));while(p&&!i);return p},this.$findClosingTag=function(a,p){var i,r=p.value,u=p.value,c=0,f=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);p=a.stepForward();var l=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length),o=!1;do if(i=p,p=a.stepForward(),p){if(p.value===">"&&!o){var d=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);o=!0}if(p.type.indexOf("tag-name")!==-1){if(r=p.value,u===r){if(i.value==="<")c++;else if(i.value==="</"&&(c--,c<0)){a.stepBackward();var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);p=a.stepForward();var m=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),p&&p.value===">")var y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(u===r&&p.value==="/>"&&(c--,c<0))var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),m=_,y=m,d=new v(l.end.row,l.end.column,l.end.row,l.end.column+1)}while(p&&c>=0);if(f&&d&&_&&y&&l&&m)return{openTag:new v(f.start.row,f.start.column,d.end.row,d.end.column),closeTag:new v(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:l,closeTagName:m}},this.$findOpeningTag=function(a,p){var i=a.getCurrentToken(),r=p.value,u=0,c=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),l=f+2,o=new v(c,f,c,l);a.stepForward();var d=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),!(!p||p.value!==">")){var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(p=i,c=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),l=f+p.value.length,i=a.stepBackward(),p){if(p.type.indexOf("tag-name")!==-1){if(r===p.value)if(i.value==="<"){if(u++,u>0){var m=new v(c,f,c,l),y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do p=a.stepForward();while(p&&p.value!==">");var b=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else i.value==="</"&&u--}else if(p.value==="/>"){for(var S=0,D=i;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===r){u--;break}else if(D.value==="<")break;D=a.stepBackward(),S++}for(var g=0;g<S;g++)a.stepForward()}}while(i&&u<=0);if(y&&b&&o&&_&&m&&d)return{openTag:new v(y.start.row,y.start.column,b.end.row,b.end.column),closeTag:new v(o.start.row,o.start.column,_.end.row,_.end.column),openTagName:m,closeTagName:d}}}}t.BracketMatch=s});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/lang"),s=e("./bidihandler").BidiHandler,a=e("./config"),p=e("./lib/event_emitter").EventEmitter,i=e("./selection").Selection,r=e("./mode/text").Mode,u=e("./range").Range,c=e("./document").Document,f=e("./background_tokenizer").BackgroundTokenizer,l=e("./search_highlight").SearchHighlight,o=e("./undomanager").UndoManager,d=function(){function E(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++E.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new f(new r().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(L){w._signal("tokenizerUpdate",L)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new c(T)),this.setDocument(T),this.selection=new i(this),this.$bidiHandler=new s(this),a.resetOptions(this),this.setMode(M),a._signal("session",this),this.destroyed=!1}return E.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},E.prototype.getDocument=function(){return this.doc},E.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},E.prototype.$getRowCacheIndex=function(T,M){for(var w=0,L=T.length-1;w<=L;){var A=w+L>>1,R=T[A];if(M>R)w=A+1;else if(M<R)L=A-1;else return A}return w-1},E.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},E.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},E.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},E.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},E.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new o;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new E(T.value);return T.folds.forEach(function(L){w.addFold("...",u.fromPoints(L.start,L.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},E.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},E.prototype.toString=function(){return this.doc.getValue()},E.prototype.getSelection=function(){return this.selection},E.prototype.getState=function(T){return this.bgTokenizer.getState(T)},E.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},E.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),L,A=0;if(M==null){var R=w.length-1;A=this.getLine(T).length}else for(var R=0;R<w.length&&(A+=w[R].value.length,!(A>=M));R++);return L=w[R],L?(L.index=R,L.start=A-L.value.length,L):null},E.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=v.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},E.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},E.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},E.prototype.getTabString=function(){return this.getUseSoftTabs()?v.stringRepeat(" ",this.getTabSize()):"	"},E.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},E.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},E.prototype.setTabSize=function(T){this.setOption("tabSize",T)},E.prototype.getTabSize=function(){return this.$tabSize},E.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},E.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},E.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},E.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},E.prototype.getOverwrite=function(){return this.$overwrite},E.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},E.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},E.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},E.prototype.getBreakpoints=function(){return this.$breakpoints},E.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},E.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.addMarker=function(T,M,w,L){var A=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!L,id:A};return L?(this.$frontMarkers[A]=R,this._signal("changeFrontMarker")):(this.$backMarkers[A]=R,this._signal("changeBackMarker")),A},E.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},E.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},E.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},E.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new l(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},E.prototype.highlightLines=function(T,M,w,L){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var A=new u(T,0,M,1/0);return A.id=this.addMarker(A,w,"fullLine",L),A},E.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},E.prototype.getAnnotations=function(){return this.$annotations||[]},E.prototype.clearAnnotations=function(){this.setAnnotations([])},E.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},E.prototype.getWordRange=function(T,M){var w=this.getLine(T),L=!1;if(M>0&&(L=!!w.charAt(M-1).match(this.tokenRe)),L||(L=!!w.charAt(M).match(this.tokenRe)),L)var A=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var A=/\s/;else var A=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(A));R++}for(var x=M;x<w.length&&w.charAt(x).match(A);)x++;return new u(T,R,T,x)},E.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),L=this.getLine(w.end.row);L.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},E.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},E.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},E.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},E.prototype.getUseWorker=function(){return this.$useWorker},E.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},E.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,L=w.path}else L=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new r),this.$modes[L]&&!w){this.$onChangeMode(this.$modes[L]),M&&M();return}this.$modeId=L,a.loadModule(["mode",L],function(A){if(this.$modeId!==L)return M&&M();this.$modes[L]&&!w?this.$onChangeMode(this.$modes[L]):A&&A.Mode&&(A=new A.Mode(w),w||(this.$modes[L]=A,A.$id=L),this.$onChangeMode(A)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},E.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var L=T.getTokenizer();if(L.on!==void 0){var A=this.onReloadTokenizer.bind(this);L.on("update",A)}this.bgTokenizer.setTokenizer(L),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},E.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},E.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){a.warn("Could not load worker",T),this.$worker=null}},E.prototype.getMode=function(){return this.$mode},E.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},E.prototype.getScrollTop=function(){return this.$scrollTop},E.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},E.prototype.getScrollLeft=function(){return this.$scrollLeft},E.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},E.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},E.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,L=0,A=0,R=this.$foldData[A],x=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>x){if($=R.end.row+1,$>=I)break;R=this.$foldData[A++],x=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>L&&(L=w[$])}this.screenWidth=L}},E.prototype.getLine=function(T){return this.doc.getLine(T)},E.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},E.prototype.getLength=function(){return this.doc.getLength()},E.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},E.prototype.insert=function(T,M){return this.doc.insert(T,M)},E.prototype.remove=function(T){return this.doc.remove(T)},E.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},E.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var L=T[w];L.action=="insert"||L.action=="remove"?this.doc.revertDelta(L):L.folds&&this.addFolds(L.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},E.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var L=T[w];(L.action=="insert"||L.action=="remove")&&this.doc.$safeApplyDelta(L)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},E.prototype.setUndoSelect=function(T){this.$undoSelect=T},E.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var L,A,R=0;R<T.length;R++){var x=T[R];if(x.start){if(!L){w(x)?L=u.fromPoints(x.start,x.end):L=u.fromPoints(x.start,x.start);continue}w(x)?(A=x.start,L.compare(A.row,A.column)==-1&&L.setStart(A),A=x.end,L.compare(A.row,A.column)==1&&L.setEnd(A)):(A=x.start,L.compare(A.row,A.column)==-1&&(L=u.fromPoints(x.start,x.start)))}}return L},E.prototype.replace=function(T,M){return this.doc.replace(T,M)},E.prototype.moveText=function(T,M,w){var L=this.getTextRange(T),A=this.getFoldsInRange(T),R=u.fromPoints(M,M);if(!w){this.remove(T);var x=T.start.row-T.end.row,I=x?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),x&&R.start.row>=T.end.row&&(R.start.row+=x,R.end.row+=x)}if(R.end=this.insert(R.start,L),A.length){var $=T.start,k=R.start,x=k.row-$.row,I=k.column-$.column;this.addFolds(A.map(function(q){return q=q.clone(),q.start.row==$.row&&(q.start.column+=I),q.end.row==$.row&&(q.end.column+=I),q.start.row+=x,q.end.row+=x,q}))}return R},E.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var L=T;L<=M;L++)this.doc.insertInLine({row:L,column:0},w)},E.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new u(0,0,0,0),L=this.getTabSize(),A=M.start.row;A<=M.end.row;++A){var R=this.getLine(A);w.start.row=A,w.end.row=A;for(var x=0;x<L&&R.charAt(x)==" ";++x);x<L&&R.charAt(x)=="	"?(w.start.column=x,w.end.column=x+1):(w.start.column=0,w.end.column=x),this.remove(w)}},E.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var L=this.getRowFoldStart(T+w);if(L<0)return 0;var A=L-T}else if(w>0){var L=this.getRowFoldEnd(M+w);if(L>this.doc.getLength()-1)return 0;var A=L-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var A=M-T+1}var R=new u(T,0,M,Number.MAX_VALUE),x=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=A,$.end.row+=A,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+A,I),x.length&&this.addFolds(x),A},E.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},E.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},E.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},E.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},E.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},E.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},E.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},E.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},E.prototype.getUseWrapMode=function(){return this.$useWrapMode},E.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},E.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var L=this.$constrainWrapLimit(T,w.min,w.max);return L!=this.$wrapLimit&&L>1?(this.$wrapLimit=L,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},E.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},E.prototype.getWrapLimit=function(){return this.$wrapLimit},E.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},E.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},E.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,L=T.start,A=T.end,R=L.row,x=A.row,I=x-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var k=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var H=this.getFoldLine(A.row),U=0;if(H){H.addRemoveChars(A.row,A.column,L.column-A.column),H.shiftRow(-I);var q=this.getFoldLine(R);q&&q!==H&&(q.merge(H),H=q),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=A.row&&H.shiftRow(-I)}x=R}else{var N=Array(I);N.unshift(R,0);var K=M?this.$wrapData:this.$rowLengthCache;K.splice.apply(K,N);var k=this.$foldData,H=this.getFoldLine(R),U=0;if(H){var O=H.range.compareInside(L.row,L.column);O==0?(H=H.split(L.row,L.column),H&&(H.shiftRow(I),H.addRemoveChars(x,0,A.column-L.column))):O==-1&&(H.addRemoveChars(R,0,A.column-L.column),H.shiftRow(I)),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=R&&H.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var H=this.getFoldLine(R);H&&H.addRemoveChars(R,L.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,x):this.$updateRowLengthCache(R,x),$},E.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},E.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),L=this.getTabSize(),A=this.$wrapData,R=this.$wrapLimit,x,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(x=[],I.walk(function(k,H,U,q){var N;if(k!=null){N=this.$getDisplayTokens(k,x.length),N[0]=y;for(var K=1;K<N.length;K++)N[K]=b}else N=this.$getDisplayTokens(w[H].substring(q,U),x.length);x=x.concat(N)}.bind(this),I.end.row,w[I.end.row].length+1),A[I.start.row]=this.$computeWrapSplits(x,R,L),$=I.end.row+1):(x=this.$getDisplayTokens(w[$]),A[$]=this.$computeWrapSplits(x,R,L),$++)},E.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var L=[],A=T.length,R=0,x=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,k=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function H(){var O=0;if(k===0)return O;if($)for(var B=0;B<T.length;B++){var W=T[B];if(W==D)O+=1;else if(W==g)O+=w;else{if(W==C)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,k)}function U(O){for(var B=O-R,W=R;W<O;W++){var P=T[W];(P===12||P===2)&&(B-=1)}L.length||(q=H(),L.indent=q),x+=B,L.push(x),R=O}for(var q=0;A-R>M-q;){var N=R+M-q;if(T[N-1]>=D&&T[N]>=D){U(N);continue}if(T[N]==y||T[N]==b){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){U(N);continue}for(N=R+M,N;N<T.length&&T[N]==b;N++);if(N==T.length)break;U(N);continue}for(var K=Math.max(N-(M-(M>>2)),R-1);N>K&&T[N]<y;)N--;if(I){for(;N>K&&T[N]<y;)N--;for(;N>K&&T[N]==S;)N--}else for(;N>K&&T[N]<D;)N--;if(N>K){U(++N);continue}N=R+M,T[N]==m&&N--,U(N-q)}return L},E.prototype.$getDisplayTokens=function(T,M){var w=[],L;M=M||0;for(var A=0;A<T.length;A++){var R=T.charCodeAt(A);if(R==9){L=this.getScreenTabSize(w.length+M),w.push(g);for(var x=1;x<L;x++)w.push(C)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(S):R>=4352&&F(R)?w.push(_,m):w.push(_)}return w},E.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var L,A;for(A=0;A<T.length&&(L=T.charCodeAt(A),L==9?w+=this.getScreenTabSize(w):L>=4352&&F(L)?w+=2:w+=1,!(w>M));A++);return[w,A]},E.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},E.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},E.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},E.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},E.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},E.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},E.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},E.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},E.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},E.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},E.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var L,A=0,R=0,x,I=0,$=0,k=this.$screenRowCache,H=this.$getRowCacheIndex(k,T),U=k.length;if(U&&H>=0)var I=k[H],A=this.$docRowCache[H],q=T>k[U-1];else var q=!U;for(var N=this.getLength()-1,K=this.getNextFoldLine(A),O=K?K.start.row:1/0;I<=T&&($=this.getRowLength(A),!(I+$>T||A>=N));)I+=$,A++,A>O&&(A=K.end.row+1,K=this.getNextFoldLine(A,K),O=K?K.start.row:1/0),q&&(this.$docRowCache.push(A),this.$screenRowCache.push(I));if(K&&K.start.row<=A)L=this.getFoldDisplayLine(K),A=K.start.row;else{if(I+$<=T||A>N)return{row:N,column:this.getLine(N).length};L=this.getLine(A),K=null}var B=0,W=Math.floor(T-I);if(this.$useWrapMode){var P=this.$wrapData[A];P&&(x=P[W],W>0&&P.length&&(B=P.indent,R=P[W-1]||P[P.length-1],L=L.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+W,A,W)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(L,M-B)[1],this.$useWrapMode&&R>=x&&(R=x-1),K?K.idxToPosition(R):{row:A,column:R}},E.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var L=0,A=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var x,I=0,$=this.$docRowCache,k=this.$getRowCacheIndex($,T),H=$.length;if(H&&k>=0)var I=$[k],L=this.$screenRowCache[k],U=T>$[H-1];else var U=!H;for(var q=this.getNextFoldLine(I),N=q?q.start.row:1/0;I<T;){if(I>=N){if(x=q.end.row+1,x>T)break;q=this.getNextFoldLine(x,q),N=q?q.start.row:1/0}else x=I+1;L+=this.getRowLength(I),I=x,U&&(this.$docRowCache.push(I),this.$screenRowCache.push(L))}var K="";q&&I>=N?(K=this.getFoldDisplayLine(q,T,M),A=q.start.row):(K=this.getLine(T).substring(0,M),A=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[A];if(B){for(var W=0;K.length>=B[W];)L++,W++;K=K.substring(B[W-1]||0,K.length),O=W>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(L+=this.lineWidgets[I].rowsAbove),{row:L,column:O+this.$getStringScreenWidth(K)[0]}},E.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},E.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},E.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var A=this.$wrapData.length,R=0,L=0,M=this.$foldData[L++],x=M?M.start.row:1/0;R<A;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>x&&(R=M.end.row+1,M=this.$foldData[L++],x=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,L=0;L<w.length;L++)M=w[L],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},E.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,L){if(w===0)return[0,0];w||(w=1/0),L=L||0;var A,R;for(R=0;R<M.length&&(A=M.charAt(R),A==="	"?L+=this.getScreenTabSize(L):L+=T.getCharacterWidth(A),!(L>w));R++);return[L,R]})},E.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},E}();d.$uid=0,d.prototype.$modes=a.$modes,d.prototype.getValue=d.prototype.toString,d.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},d.prototype.$overwrite=!1,d.prototype.$mode=null,d.prototype.$modeId=null,d.prototype.$scrollTop=0,d.prototype.$scrollLeft=0,d.prototype.$wrapLimit=80,d.prototype.$useWrapMode=!1,d.prototype.$wrapLimitRange={min:null,max:null},d.prototype.lineWidgets=null,d.prototype.isFullWidth=F,h.implement(d.prototype,p);var _=1,m=2,y=3,b=4,S=9,D=10,g=11,C=12;function F(E){return E<4352?!1:E>=4352&&E<=4447||E>=4515&&E<=4519||E>=4602&&E<=4607||E>=9001&&E<=9002||E>=11904&&E<=11929||E>=11931&&E<=12019||E>=12032&&E<=12245||E>=12272&&E<=12283||E>=12288&&E<=12350||E>=12353&&E<=12438||E>=12441&&E<=12543||E>=12549&&E<=12589||E>=12593&&E<=12686||E>=12688&&E<=12730||E>=12736&&E<=12771||E>=12784&&E<=12830||E>=12832&&E<=12871||E>=12880&&E<=13054||E>=13056&&E<=19903||E>=19968&&E<=42124||E>=42128&&E<=42182||E>=43360&&E<=43388||E>=44032&&E<=55203||E>=55216&&E<=55238||E>=55243&&E<=55291||E>=63744&&E<=64255||E>=65040&&E<=65049||E>=65072&&E<=65106||E>=65108&&E<=65126||E>=65128&&E<=65131||E>=65281&&E<=65376||E>=65504&&E<=65510}e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),a.defineOptions(d.prototype,"session",{wrap:{set:function(E){if(!E||E=="off"?E=!1:E=="free"?E=!0:E=="printMargin"?E=-1:typeof E=="string"&&(E=parseInt(E,10)||!1),this.$wrap!=E)if(this.$wrap=E,!E)this.setUseWrapMode(!1);else{var T=typeof E=="number"?E:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(E){E=E=="auto"?this.$mode.type!="text":E!="text",E!=this.$wrapAsCode&&(this.$wrapAsCode=E,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(E){this.$useWorker=E,this.$stopWorker(),E&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(E){E=parseInt(E),E>0&&this.$tabSize!==E&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=E,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(E){this.setFoldStyle(E)},handlesSet:!0},overwrite:{set:function(E){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(E){this.doc.setNewLineMode(E)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(E){this.setMode(E)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var h=e("./lib/lang"),v=e("./lib/oop"),s=e("./range").Range,a=function(){function i(){this.$options={}}return i.prototype.set=function(r){return v.mixin(this.$options,r),this},i.prototype.getOptions=function(){return h.copyObject(this.$options)},i.prototype.setOptions=function(r){this.$options=r},i.prototype.find=function(r){var u=this.$options,c=this.$matchIterator(r,u);if(!c)return!1;var f=null;return c.forEach(function(l,o,d,_){return f=new s(l,o,d,_),o==_&&u.start&&u.start.start&&u.skipCurrent!=!1&&f.isEqual(u.start)?(f=null,!1):!0}),f},i.prototype.findAll=function(r){var u=this.$options;if(!u.needle)return[];this.$assembleRegExp(u);var c=u.range,f=c?r.getLines(c.start.row,c.end.row):r.doc.getAllLines(),l=[],o=u.re;if(u.$isMultiLine){var d=o.length,_=f.length-d,m;e:for(var y=o.offset||0;y<=_;y++){for(var b=0;b<d;b++)if(f[y+b].search(o[b])==-1)continue e;var S=f[y],D=f[y+d-1],g=S.length-S.match(o[0])[0].length,C=D.match(o[d-1])[0].length;m&&m.end.row===y&&m.end.column>g||(l.push(m=new s(y,g,y+d-1,C)),d>2&&(y=y+d-2))}}else for(var F=0;F<f.length;F++)for(var E=h.getMatchOffsets(f[F],o),b=0;b<E.length;b++){var T=E[b];l.push(new s(F,T.offset,F,T.offset+T.length))}if(c){for(var M=c.start.column,w=c.end.column,F=0,b=l.length-1;F<b&&l[F].start.column<M&&l[F].start.row==0;)F++;for(var L=c.end.row-c.start.row;F<b&&l[b].end.column>w&&l[b].end.row==L;)b--;for(l=l.slice(F,b+1),F=0,b=l.length;F<b;F++)l[F].start.row+=c.start.row,l[F].end.row+=c.start.row}return l},i.prototype.replace=function(r,u){var c=this.$options,f=this.$assembleRegExp(c);if(c.$isMultiLine)return u;if(f){var l=f.exec(r);if(!l||l[0].length!=r.length)return null;if(u=r.replace(f,u),c.preserveCase){u=u.split("");for(var o=Math.min(r.length,r.length);o--;){var d=r[o];d&&d.toLowerCase()!=d?u[o]=u[o].toUpperCase():u[o]=u[o].toLowerCase()}u=u.join("")}return u}},i.prototype.$assembleRegExp=function(r,u){if(r.needle instanceof RegExp)return r.re=r.needle;var c=r.needle;if(!r.needle)return r.re=!1;r.regExp||(c=h.escapeRegExp(c));var f=r.caseSensitive?"gm":"gmi";try{new RegExp(c,"u"),r.$supportsUnicodeFlag=!0,f+="u"}catch{r.$supportsUnicodeFlag=!1}if(r.wholeWord&&(c=p(c,r)),r.$isMultiLine=!u&&/[\n\r]/.test(c),r.$isMultiLine)return r.re=this.$assembleMultilineRegExp(c,f);try{var l=new RegExp(c,f)}catch{l=!1}return r.re=l},i.prototype.$assembleMultilineRegExp=function(r,u){for(var c=r.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),f=[],l=0;l<c.length;l++)try{f.push(new RegExp(c[l],u))}catch{return!1}return f},i.prototype.$matchIterator=function(r,u){var c=this.$assembleRegExp(u);if(!c)return!1;var f=u.backwards==!0,l=u.skipCurrent!=!1,o=c.unicode,d=u.range,_=u.start;_||(_=d?d[f?"end":"start"]:r.selection.getRange()),_.start&&(_=_[l!=f?"end":"start"]);var m=d?d.start.row:0,y=d?d.end.row:r.getLength()-1;if(f)var b=function(g){var C=_.row;if(!D(C,_.column,g)){for(C--;C>=m;C--)if(D(C,Number.MAX_VALUE,g))return;if(u.wrap!=!1){for(C=y,m=_.row;C>=m;C--)if(D(C,Number.MAX_VALUE,g))return}}};else var b=function(C){var F=_.row;if(!D(F,_.column,C)){for(F=F+1;F<=y;F++)if(D(F,0,C))return;if(u.wrap!=!1){for(F=m,y=_.row;F<=y;F++)if(D(F,0,C))return}}};if(u.$isMultiLine)var S=c.length,D=function(g,C,F){var E=f?g-S+1:g;if(!(E<0||E+S>r.getLength())){var T=r.getLine(E),M=T.search(c[0]);if(!(!f&&M<C||M===-1)){for(var w=1;w<S;w++)if(T=r.getLine(E+w),T.search(c[w])==-1)return;var L=T.match(c[S-1])[0].length;if(!(f&&L>C)&&F(E,M,E+S-1,L))return!0}}};else if(f)var D=function(C,F,E){var T=r.getLine(C),M=[],w,L=0;for(c.lastIndex=0;w=c.exec(T);){var A=w[0].length;if(L=w.index,!A){if(L>=T.length)break;c.lastIndex=L+=h.skipEmptyMatch(T,L,o)}if(w.index+A>F)break;M.push(w.index,A)}for(var R=M.length-1;R>=0;R-=2){var x=M[R-1],A=M[R];if(E(C,x,C,x+A))return!0}};else var D=function(C,F,E){var T=r.getLine(C),M,w;for(c.lastIndex=F;w=c.exec(T);){var L=w[0].length;if(M=w.index,E(C,M,C,M+L))return!0;if(!L&&(c.lastIndex=M+=h.skipEmptyMatch(T,M,o),M>=T.length))return!1}};return{forEach:b}},i}();function p(i,r){var u=h.supportsLookbehind();function c(d,_){_===void 0&&(_=!0);var m=u&&r.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(d)||r.regExp?u&&r.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var f=Array.from(i),l=f[0],o=f[f.length-1];return c(l)+i+c(o,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var u=function(c,f){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(l[d]=o[d])},u(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");u(c,f);function l(){this.constructor=c}c.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}(),v=e("../lib/keys"),s=e("../lib/useragent"),a=v.KEY_MODS,p=function(){function u(c,f){this.$init(c,f,!1)}return u.prototype.$init=function(c,f,l){this.platform=f||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(c),this.$singleCommand=l},u.prototype.addCommand=function(c){this.commands[c.name]&&this.removeCommand(c),this.commands[c.name]=c,c.bindKey&&this._buildKeyHash(c)},u.prototype.removeCommand=function(c,f){var l=c&&(typeof c=="string"?c:c.name);c=this.commands[l],f||delete this.commands[l];var o=this.commandKeyBinding;for(var d in o){var _=o[d];if(_==c)delete o[d];else if(Array.isArray(_)){var m=_.indexOf(c);m!=-1&&(_.splice(m,1),_.length==1&&(o[d]=_[0]))}}},u.prototype.bindKey=function(c,f,l){if(typeof c=="object"&&c&&(l==null&&(l=c.position),c=c[this.platform]),!!c){if(typeof f=="function")return this.addCommand({exec:f,bindKey:c,name:f.name||c});c.split("|").forEach(function(o){var d="";if(o.indexOf(" ")!=-1){var _=o.split(/\s+/);o=_.pop(),_.forEach(function(b){var S=this.parseKeys(b),D=a[S.hashId]+S.key;d+=(d?" ":"")+D,this._addCommandToBinding(d,"chainKeys")},this),d+=" "}var m=this.parseKeys(o),y=a[m.hashId]+m.key;this._addCommandToBinding(d+y,f,l)},this)}},u.prototype._addCommandToBinding=function(c,f,l){var o=this.commandKeyBinding,d;if(!f)delete o[c];else if(!o[c]||this.$singleCommand)o[c]=f;else{Array.isArray(o[c])?(d=o[c].indexOf(f))!=-1&&o[c].splice(d,1):o[c]=[o[c]],typeof l!="number"&&(l=i(f));var _=o[c];for(d=0;d<_.length;d++){var m=_[d],y=i(m);if(y>l)break}_.splice(d,0,f)}},u.prototype.addCommands=function(c){c&&Object.keys(c).forEach(function(f){var l=c[f];if(l){if(typeof l=="string")return this.bindKey(l,f);typeof l=="function"&&(l={exec:l}),typeof l=="object"&&(l.name||(l.name=f),this.addCommand(l))}},this)},u.prototype.removeCommands=function(c){Object.keys(c).forEach(function(f){this.removeCommand(c[f])},this)},u.prototype.bindKeys=function(c){Object.keys(c).forEach(function(f){this.bindKey(f,c[f])},this)},u.prototype._buildKeyHash=function(c){this.bindKey(c.bindKey,c)},u.prototype.parseKeys=function(c){var f=c.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),l=f.pop(),o=v[l];if(v.FUNCTION_KEYS[o])l=v.FUNCTION_KEYS[o].toLowerCase();else if(f.length){if(f.length==1&&f[0]=="shift")return{key:l.toUpperCase(),hashId:-1}}else return{key:l,hashId:-1};for(var d=0,_=f.length;_--;){var m=v.KEY_MODS[f[_]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+f[_]+" in "+c),!1;d|=m}return{key:l,hashId:d}},u.prototype.findKeyCommand=function(c,f){var l=a[c]+f;return this.commandKeyBinding[l]},u.prototype.handleKeyboard=function(c,f,l,o){if(!(o<0)){var d=a[f]+l,_=this.commandKeyBinding[d];return c.$keyChain&&(c.$keyChain+=" "+d,_=this.commandKeyBinding[c.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(c.$keyChain=c.$keyChain||d,{command:"null"}):(c.$keyChain&&((!f||f==4)&&l.length==1?c.$keyChain=c.$keyChain.slice(0,-d.length-1):(f==-1||o>0)&&(c.$keyChain="")),{command:_})}},u.prototype.getStatusText=function(c,f){return f.$keyChain||""},u}();function i(u){return typeof u=="object"&&u.bindKey&&u.bindKey.position||(u.isDefault?-100:0)}var r=function(u){h(c,u);function c(f,l){var o=u.call(this,f,l)||this;return o.$singleCommand=!0,o}return c}(p);r.call=function(u,c,f){p.prototype.$init.call(u,c,f,!0)},p.call=function(u,c,f){p.prototype.$init.call(u,c,f,!1)},t.HashHandler=r,t.MultiHashHandler=p});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var i=function(r,u){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(c[l]=f[l])},i(r,u)};return function(r,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");i(r,u);function c(){this.constructor=r}r.prototype=u===null?Object.create(u):(c.prototype=u.prototype,new c)}}(),v=e("../lib/oop"),s=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,p=function(i){h(r,i);function r(u,c){var f=i.call(this,c,u)||this;return f.byName=f.commands,f.setDefaultHandler("exec",function(l){return l.args?l.command.exec(l.editor,l.args,l.event,!1):l.command.exec(l.editor,{},l.event,!0)}),f}return r.prototype.exec=function(u,c,f){if(Array.isArray(u)){for(var l=u.length;l--;)if(this.exec(u[l],c,f))return!0;return!1}if(typeof u=="string"&&(u=this.commands[u]),!u||c&&c.$readOnly&&!u.readOnly||this.$checkCommandState!=!1&&u.isAvailable&&!u.isAvailable(c))return!1;var o={editor:c,command:u,args:f};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),o.returnValue!==!1},r.prototype.toggleRecording=function(u){if(!this.$inReplay)return u&&u._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(c){this.macro.push([c.command,c.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},r.prototype.replay=function(u){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(u);try{this.$inReplay=!0,this.macro.forEach(function(c){typeof c=="string"?this.exec(c,u):this.exec(c[0],u,c[1])},this)}finally{this.$inReplay=!1}}},r.prototype.trimMacro=function(u){return u.map(function(c){return typeof c[0]!="string"&&(c[0]=c[0].name),c[1]||(c=c[0]),c})},r}(s);v.implement(p.prototype,a),t.CommandManager=p});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var h=e("../lib/lang"),v=e("../config"),s=e("../range").Range;function a(i,r){return{win:i,mac:r}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(i){v.loadModule("ace/ext/settings_menu",function(r){r.init(i),i.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(i){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(i,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(i){i.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(i){i.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(i,r){typeof r=="number"&&!isNaN(r)&&i.gotoLine(r),i.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(i){i.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(i){i.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(i){i.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(i){i.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(i){i.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(i){i.session.foldAll(),i.session.unfold(i.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(i){i.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(i){i.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(i){i.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(i){i.selection.isEmpty()?i.selection.selectWord():i.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(i){i.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(i){i.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(i){i.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(i){i.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(i,r){i.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(i){i.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(i){i.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(i){i.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(i,r){i.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(i){i.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(i){i.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(i){i.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(i){i.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(i,r){i.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(i){i.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(i){i.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(i){i.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(i){i.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(i,r){i.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(i){i.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(i){i.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(i){i.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(i){i.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(i){i.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(i){i.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(i){i.renderer.scrollBy(0,-2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(i){i.renderer.scrollBy(0,2*i.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(i){i.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(i){i.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(i){i.commands.toggleRecording(i)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(i){i.commands.replay(i)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(i){i.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(i){i.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(i){i.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(i){},readOnly:!0},{name:"cut",description:"Cut",exec:function(i){var r=i.$copyWithEmptySelection&&i.selection.isEmpty(),u=r?i.selection.getLineRange():i.selection.getRange();i._emit("cut",u),u.isEmpty()||i.session.remove(u),i.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(i,r){i.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(i){i.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(i){i.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(i){i.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(i){i.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(i){i.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(i){i.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(i){i.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(i){v.loadModule("ace/ext/searchbox",function(r){r.Search(i,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(i){i.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(i){i.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(i){i.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(i){i.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(i){i.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(i){i.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(i){i.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(i){i.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(i){if(i.selection.isEmpty())i.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(i){i.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(i){i.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(i){var r=i.selection.getRange();r.start.column=0,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(i){var r=i.selection.getRange();r.end.column=Number.MAX_VALUE,i.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(i){i.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(i){i.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(i){i.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(i){i.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(i){i.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(i){i.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(i,r){i.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(i,r){i.insert(h.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(i){i.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(i){i.transposeLetters()},multiSelectAction:function(i){i.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(i){i.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(i){i.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(i){i.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(i){var r=i.selection.getRange();r.start.column=r.end.column=0,r.end.row++,i.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(i){i.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(i){for(var r=i.selection.isBackwards(),u=r?i.selection.getSelectionLead():i.selection.getSelectionAnchor(),c=r?i.selection.getSelectionAnchor():i.selection.getSelectionLead(),f=i.session.doc.getLine(u.row).length,l=i.session.doc.getTextRange(i.selection.getRange()),o=l.replace(/\n\s*/," ").length,d=i.session.doc.getLine(u.row),_=u.row+1;_<=c.row+1;_++){var m=h.stringTrimLeft(h.stringTrimRight(i.session.doc.getLine(_)));m.length!==0&&(m=" "+m),d+=m}c.row+1<i.session.doc.getLength()-1&&(d+=i.session.doc.getNewLineCharacter()),i.clearSelection(),i.session.doc.replace(new s(u.row,0,c.row+2,0),d),o>0?(i.selection.moveCursorTo(u.row,u.column),i.selection.selectTo(u.row,u.column+o)):(f=i.session.doc.getLine(u.row).length>f?f+1:f,i.selection.moveCursorTo(u.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(i){var r=i.session.doc.getLength()-1,u=i.session.doc.getLine(r).length,c=i.selection.rangeList.ranges,f=[];c.length<1&&(c=[i.selection.getRange()]);for(var l=0;l<c.length;l++)l==c.length-1&&(c[l].end.row===r&&c[l].end.column===u||f.push(new s(c[l].end.row,c[l].end.column,r,u))),l===0?c[l].start.row===0&&c[l].start.column===0||f.push(new s(0,0,c[l].start.row,c[l].start.column)):f.push(new s(c[l-1].end.row,c[l-1].end.column,c[l].start.row,c[l].start.column));i.exitMultiSelectMode(),i.clearSelection();for(var l=0;l<f.length;l++)i.selection.addRange(f[l],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(i){i.selection.clearSelection(),i.navigateLineEnd(),i.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(i){i.selection.clearSelection();var r=i.getCursorPosition();i.selection.moveTo(r.row-1,Number.MAX_VALUE),i.insert(`
`),r.row===0&&i.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(i){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),i.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(i){i.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(i){i.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)t.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(i){i.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./lib/dom"),v=function(){function s(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return s.prototype.getRowLength=function(a){var p;return this.lineWidgets?p=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:p=0,!this.$useWrapMode||!this.$wrapData[a]?1+p:this.$wrapData[a].length+1+p},s.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(p){p&&p.rowCount&&!p.hidden&&(a+=p.rowCount)}),a},s.prototype.$onChangeEditor=function(a){this.attach(a.editor)},s.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},s.prototype.detach=function(a){var p=this.editor;if(p){this.editor=null,p.widgetManager=null,p.renderer.off("beforeRender",this.measureWidgets),p.renderer.off("afterRender",this.renderWidgets);var i=this.session.lineWidgets;i&&i.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},s.prototype.updateOnFold=function(a,p){var i=p.lineWidgets;if(!(!i||!a.action)){for(var r=a.data,u=r.start.row,c=r.end.row,f=a.action=="add",l=u+1;l<c;l++)i[l]&&(i[l].hidden=f);i[c]&&(f?i[u]?i[c].hidden=f:i[u]=i[c]:(i[u]==i[c]&&(i[u]=void 0),i[c].hidden=f))}},s.prototype.updateOnChange=function(a){var p=this.session.lineWidgets;if(p){var i=a.start.row,r=a.end.row-i;if(r!==0)if(a.action=="remove"){var u=p.splice(i+1,r);!p[i]&&u[u.length-1]&&(p[i]=u.pop()),u.forEach(function(f){f&&this.removeLineWidget(f)},this),this.$updateRows()}else{var c=new Array(r);p[i]&&p[i].column!=null&&a.start.column>p[i].column&&i++,c.unshift(i,0),p.splice.apply(p,c),this.$updateRows()}}},s.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var p=!0;a.forEach(function(i,r){if(i)for(p=!1,i.row=r;i.$oldWidget;)i.$oldWidget.row=r,i=i.$oldWidget}),p&&(this.session.lineWidgets=null)}},s.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var p=this.session.lineWidgets[a.row];return p&&(a.$oldWidget=p,p.el&&p.el.parentNode&&(p.el.parentNode.removeChild(p.el),p._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},s.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var p=this.editor.renderer;a.html&&!a.el&&(a.el=h.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=h.createElement("div"),a.el.textContent=a.text),a.el&&(h.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&h.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",p.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/p.layerConfig.lineHeight);var i=this.session.getFoldAt(a.row,0);if(a.$fold=i,i){var r=this.session.lineWidgets;a.row==i.end.row&&!r[i.start.row]?r[i.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,p),this.onWidgetChanged(a),a},s.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var p=this.session.lineWidgets[a.row];if(p==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;p;){if(p.$oldWidget==a){p.$oldWidget=a.$oldWidget;break}p=p.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},s.prototype.getWidgetsAtRow=function(a){for(var p=this.session.lineWidgets,i=p&&p[a],r=[];i;)r.push(i),i=i.$oldWidget;return r},s.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},s.prototype.measureWidgets=function(a,p){var i=this.session._changedWidgets,r=p.layerConfig;if(!(!i||!i.length)){for(var u=1/0,c=0;c<i.length;c++){var f=i[c];if(!(!f||!f.el)&&f.session==this.session){if(!f._inDocument){if(this.session.lineWidgets[f.row]!=f)continue;f._inDocument=!0,p.container.appendChild(f.el)}f.h=f.el.offsetHeight,f.fixedWidth||(f.w=f.el.offsetWidth,f.screenWidth=Math.ceil(f.w/r.characterWidth));var l=f.h/r.lineHeight;f.coverLine&&(l-=this.session.getRowLineCount(f.row),l<0&&(l=0)),f.rowCount!=l&&(f.rowCount=l,f.row<u&&(u=f.row))}}u!=1/0&&(this.session._emit("changeFold",{data:{start:{row:u}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},s.prototype.renderWidgets=function(a,p){var i=p.layerConfig,r=this.session.lineWidgets;if(r){for(var u=Math.min(this.firstRow,i.firstRow),c=Math.max(this.lastRow,i.lastRow,r.length);u>0&&!r[u];)u--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,p.$cursorLayer.config=i;for(var f=u;f<=c;f++){var l=r[f];if(!(!l||!l.el)){if(l.hidden){l.el.style.top=-100-(l.pixelHeight||0)+"px";continue}l._inDocument||(l._inDocument=!0,p.container.appendChild(l.el));var o=p.$cursorLayer.getPixelPosition({row:f,column:0},!0).top;l.coverLine||(o+=i.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=o-i.offset+"px";var d=l.coverGutter?0:p.gutterWidth;l.fixedWidth||(d-=p.scrollLeft),l.el.style.left=d+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=i.width+2*i.padding+"px"),l.fixedWidth?l.el.style.right=p.scrollBar.getWidth()+"px":l.el.style.right=""}}}},s}();t.LineWidgets=v});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var h=e("../lib/keys"),v=e("../mouse/default_gutter_handler").GutterTooltip,s=function(){function p(i){this.editor=i,this.gutterLayer=i.renderer.$gutterLayer,this.element=i.renderer.$gutter,this.lines=i.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new v(this.editor)}return p.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},p.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},p.prototype.$onGutterKeyDown=function(i){if(this.annotationTooltip.isOpen){i.preventDefault(),i.keyCode===h.escape&&this.annotationTooltip.hideTooltip();return}if(i.target===this.element){if(i.keyCode!=h.enter)return;i.preventDefault();var r=this.editor.getCursorPosition().row;this.editor.isRowVisible(r)||this.editor.scrollToLine(r,!0,!0),setTimeout(function(){var u=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),c=this.$findNearestFoldWidget(u),f=this.$findNearestAnnotation(u);if(!(c===null&&f===null)){if(c===null&&f!==null){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(c!==null&&f===null){this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(f-u)<Math.abs(c-u)){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(i),setTimeout(function(){this.editor._signal("gutterkeydown",new a(i,this))}.bind(this),10)},p.prototype.$handleGutterKeyboardInteraction=function(i){if(i.keyCode===h.tab){i.preventDefault();return}if(i.keyCode===h.escape){i.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(i.keyCode===h.up){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(i.keyCode===h.down){switch(i.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(i.keyCode===h.left){i.preventDefault(),this.$switchLane("annotation");return}if(i.keyCode===h.right){i.preventDefault(),this.$switchLane("fold");return}if(i.keyCode===h.enter||i.keyCode===h.space){switch(i.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var r=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),i),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==r&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(r),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var u=this.lines.cells[this.activeRowIndex].element.childNodes[2],c=u.getBoundingClientRect(),f=this.annotationTooltip.getElement().style;f.left=c.right+"px",f.top=c.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},p.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},p.prototype.$isFoldWidgetVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getFoldWidget(i).style.display!=="none";return r&&u},p.prototype.$isAnnotationVisible=function(i){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(i)),u=this.$getAnnotation(i).style.display!=="none";return r&&u},p.prototype.$getFoldWidget=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[1]},p.prototype.$getAnnotation=function(i){var r=this.lines.get(i),u=r.element;return u.childNodes[2]},p.prototype.$findNearestFoldWidget=function(i){if(this.$isFoldWidgetVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isFoldWidgetVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(i+r))return i+r}return null},p.prototype.$findNearestAnnotation=function(i){if(this.$isAnnotationVisible(i))return i;for(var r=0;i-r>0||i+r<this.lines.getLength()-1;){if(r++,i-r>=0&&this.$isAnnotationVisible(i-r))return i-r;if(i+r<=this.lines.getLength()-1&&this.$isAnnotationVisible(i+r))return i+r}return null},p.prototype.$focusFoldWidget=function(i){if(i!=null){var r=this.$getFoldWidget(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},p.prototype.$focusAnnotation=function(i){if(i!=null){var r=this.$getAnnotation(i);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},p.prototype.$blurFoldWidget=function(i){var r=this.$getFoldWidget(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},p.prototype.$blurAnnotation=function(i){var r=this.$getAnnotation(i);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},p.prototype.$moveFoldWidgetUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveFoldWidgetDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isFoldWidgetVisible(i)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveAnnotationUp=function(){for(var i=this.activeRowIndex;i>0;)if(i--,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$moveAnnotationDown=function(){for(var i=this.activeRowIndex;i<this.lines.getLength()-1;)if(i++,this.$isAnnotationVisible(i)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$switchLane=function(i){switch(i){case"annotation":if(this.activeLane==="annotation")break;var r=this.$findNearestAnnotation(this.activeRowIndex);if(r==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var u=this.$findNearestFoldWidget(this.activeRowIndex);if(u==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);break}},p.prototype.$rowIndexToRow=function(i){var r=this.lines.get(i);return r?r.row:null},p.prototype.$rowToRowIndex=function(i){for(var r=0;r<this.lines.getLength();r++){var u=this.lines.get(r);if(u.row==i)return r}return null},p}();t.GutterKeyboardHandler=s;var a=function(){function p(i,r){this.gutterKeyboardHandler=r,this.domEvent=i}return p.prototype.getKey=function(){return h.keyCodeToString(this.domEvent.keyCode)},p.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},p.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},p.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},p}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var h=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,L=w&&M[w],A=0;if(L)return L.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&A>=M.length&&(M=void 0),{value:M&&M[A++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/lang"),p=e("./lib/useragent"),i=e("./keyboard/textinput").TextInput,r=e("./mouse/mouse_handler").MouseHandler,u=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,f=e("./edit_session").EditSession,l=e("./search").Search,o=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,_=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),b=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,C=e("./clipboard"),F=e("./lib/keys"),E=function(){function M(w,L,A){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new _(p.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new i(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new u(this)),this.keyBinding=new c(this),this.$search=new l().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(x,I){I._$emitInputEvent.schedule(31)}),this.setSession(L||A&&A.session||new f("")),y.resetOptions(this),A&&this.setOptions(A),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var L=this.curOp.command,A=L&&L.scrollIntoView;if(A){switch(A){case"center-animate":A="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),x=this.renderer.layerConfig;(R.start.row>=x.lastRow||R.end.row<=x.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}A=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var L=this.prevOp,A=this.$mergeableCommands,R=L.command&&w.command.name==L.command.name;if(w.command.name=="insertstring"){var x=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(x)||/\s/.test(L.args)),this.mergeNextCommand=!0}else R=R&&A.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:A.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,L){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var A=this;y.loadModule(["keybinding",w],function(R){A.$keybindingId==w&&A.keyBinding.setKeyboardHandler(R&&R.handler),L&&L()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),L&&L()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var L=this.session;if(L){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var A=this.session.getSelection();A.off("changeCursor",this.$onCursorChange),A.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:L}),this.curOp=null,L&&L._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,L){return this.session.doc.setValue(w),L?L==1?this.navigateFileEnd():L==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,L){this.renderer.setTheme(w,L)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var L=w.session;if(!(!L||L.destroyed)){L.$bracketHighlight&&(L.$bracketHighlight.markerIds.forEach(function(q){L.removeMarker(q)}),L.$bracketHighlight=null);var A=w.getCursorPosition(),R=w.getKeyboardHandler(),x=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=L.getMatchingBracketRanges(A,x);if(!I){var $=new b(L,A.row,A.column),k=$.getCurrentToken();if(k&&/\b(?:tag-open|tag-name)/.test(k.type)){var H=L.getMatchingTags(A);H&&(I=[H.openTagName,H.closeTagName])}}if(!I&&L.$mode.getMatching&&(I=L.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(I)?I.length==1&&(U="ace_error_bracket"):I=[I],I.length==2&&(o.comparePoints(I[0].end,I[1].start)==0?I=[o.fromPoints(I[0].start,I[1].end)]:o.comparePoints(I[0].start,I[1].end)==0&&(I=[o.fromPoints(I[1].start,I[0].end)])),L.$bracketHighlight={ranges:I,markerIds:I.map(function(q){return L.addMarker(q,U,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var L=this.session.$useWrapMode,A=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,A,L),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var L=w.data;this.renderer.updateLines(L.first,L.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),L;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(L=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(L=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(L=!1)),w.$highlightLineMarker&&!L)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&L){var A=new o(L.row,L.column,L.row,1/0);A.id=w.addMarker(A,"ace_active-line","screenLine"),w.$highlightLineMarker=A}else L&&(w.$highlightLineMarker.start.row=L.row,w.$highlightLineMarker.end.row=L.row,w.$highlightLineMarker.start.column=L.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var L=this.session;if(L.$selectionMarker&&L.removeMarker(L.$selectionMarker),L.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var A=this.selection.getRange(),R=this.getSelectionStyle();L.$selectionMarker=L.addMarker(A,"ace_selection",R)}var x=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(x),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,L=this.getSelectionRange();if(!(L.isEmpty()||L.isMultiLine())){var A=L.start.column,R=L.end.column,x=w.getLine(L.start.row),I=x.substring(A,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),k=x.substring(A-1,R+1);if($.test(k))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),L=this.session.doc.getNewLineCharacter(),A=!1;if(!w&&this.$copyWithEmptySelection){A=!0;for(var R=this.selection.getAllRanges(),x=0;x<R.length;x++){var I=R[x];x&&R[x-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+L)}}var $={text:w};return this._signal("copy",$),C.lineMode=A?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,L){var A={text:w,event:L};this.commands.exec("paste",this,A)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var L=w.text,A=L===C.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)A?R.insert({row:this.selection.lead.row,column:0},L):this.insert(L);else if(A)this.selection.rangeList.ranges.forEach(function(U){R.insert({row:U.start.row,column:0},L)});else{var x=L.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=x.length==2&&(!x[0]||!x[1]);if(x.length!=I.length||$)return this.commands.exec("insertstring",this,L);for(var k=I.length;k--;){var H=I[k];H.isEmpty()||R.remove(H),R.insert(H.start,x[k])}}},M.prototype.execCommand=function(w,L){return this.commands.exec(w,this,L)},M.prototype.insert=function(w,L){var A=this.session,R=A.getMode(),x=this.getCursorPosition();if(this.getBehavioursEnabled()&&!L){var I=R.transformAction(A.getState(x.row),"insertion",this,A,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=o.fromPoints(x,x);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();x=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var q=A.getLine(x.row);if(x.column>q.search(/\S|$/)){var k=q.substr(x.column).search(/\S|$/);A.doc.removeInLine(x.row,x.column,x.column+k)}}this.clearSelection();var H=x.column,U=A.getState(x.row),q=A.getLine(x.row),N=R.checkOutdent(U,q,w);if(A.insert(x,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new o(x.row,H+I.selection[0],x.row,H+I.selection[1])):this.selection.setSelectionRange(new o(x.row+I.selection[0],I.selection[1],x.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(A.getDocument().isNewLine(w)){var K=R.getNextLineIndent(U,q.slice(0,x.column),A.getTabString());A.insert({row:x.row+1,column:0},K)}N&&R.autoOutdent(U,A,x.row)}},M.prototype.autoIndent=function(){var w=this.session,L=w.getMode(),A,R;if(this.selection.isEmpty())A=0,R=w.doc.getLength()-1;else{var x=this.getSelectionRange();A=x.start.row,R=x.end.row}for(var I="",$="",k="",H,U,q,N=w.getTabString(),K=A;K<=R;K++)K>0&&(I=w.getState(K-1),$=w.getLine(K-1),k=L.getNextLineIndent(I,$,N)),H=w.getLine(K),U=L.$getIndent(H),k!==U&&(U.length>0&&(q=new o(K,0,K,U.length),w.remove(q)),k.length>0&&w.insert({row:K,column:0},k)),L.autoOutdent(I,w,K)},M.prototype.onTextInput=function(w,L){if(!L)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var A=this.applyComposition.bind(this,w,L);this.selection.rangeCount?this.forEachSelection(A):A(),this.endOperation()},M.prototype.applyComposition=function(w,L){if(L.extendLeft||L.extendRight){var A=this.selection.getRange();A.start.column-=L.extendLeft,A.end.column+=L.extendRight,A.start.column<0&&(A.start.row--,A.start.column+=this.session.getLine(A.start.row).length+1),this.selection.setRange(A),!w&&!A.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),L.restoreStart||L.restoreEnd){var A=this.selection.getRange();A.start.column-=L.restoreStart,A.end.column-=L.restoreEnd,this.selection.setRange(A)}},M.prototype.onCommandKey=function(w,L,A){return this.keyBinding.onCommandKey(w,L,A)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var L=this.getSelectionRange();if(this.getBehavioursEnabled()){var A=this.session,R=A.getState(L.start.row),x=A.getMode().transformAction(R,"deletion",this,A,L);if(L.end.column===0){var I=A.getTextRange(L);if(I[I.length-1]==`
`){var $=A.getLine(L.end.row);/^\s+$/.test($)&&(L.end.column=$.length)}}x&&(L=x)}this.session.remove(L),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,L){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,L)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),L=w.column;if(L!==0){var A=this.session.getLine(w.row),R,x;L<A.length?(R=A.charAt(L)+A.charAt(L-1),x=new o(w.row,L-1,w.row,L+1)):(R=A.charAt(L-1)+A.charAt(L-2),x=new o(w.row,L-2,w.row,L)),this.session.replace(x,R),this.session.selection.moveToPosition(x.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),A=this.session.getTextRange(L);this.session.replace(L,A.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),A=this.session.getTextRange(L);this.session.replace(L,A.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,L=this.getSelectionRange();if(L.start.row<L.end.row){var A=this.$getSelectedRows();w.indentRows(A.first,A.last,"	");return}else if(L.start.column<L.end.column){var R=w.getTextRange(L);if(!/^\s+$/.test(R)){var A=this.$getSelectedRows();w.indentRows(A.first,A.last,"	");return}}var x=w.getLine(L.start.row),I=L.start,$=w.getTabSize(),k=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var H=$-k%$,U=a.stringRepeat(" ",H);else{for(var H=k%$;x[L.start.column-1]==" "&&H;)L.start.column--,H--;this.selection.setSelectionRange(L),U="	"}return this.insert(U)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),L=this.session,A=[],R=w.first;R<=w.last;R++)A.push(L.getLine(R));A.sort(function($,k){return $.toLowerCase()<k.toLowerCase()?-1:$.toLowerCase()>k.toLowerCase()?1:0});for(var x=new o(0,0,0,0),R=w.first;R<=w.last;R++){var I=L.getLine(R);x.start.row=R,x.end.row=R,x.end.column=I.length,L.replace(x,A[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),L=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,L.first,L.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),L=this.session.getState(w.row),A=this.getSelectionRange();this.session.getMode().toggleBlockComment(L,this.session,A,w)},M.prototype.getNumberAt=function(w,L){var A=/[\-]?[0-9]+(?:\.[0-9]+)?/g;A.lastIndex=0;for(var R=this.session.getLine(w);A.lastIndex<L;){var x=A.exec(R);if(x.index<=L&&x.index+x[0].length>=L){var I={value:x[0],start:x.index,end:x.index+x[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var L=this.selection.getCursor().row,A=this.selection.getCursor().column,R=new o(L,A-1,L,A),x=this.session.getTextRange(R);if(!isNaN(parseFloat(x))&&isFinite(x)){var I=this.getNumberAt(L,A);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,k=I.start+I.value.length-$,H=parseFloat(I.value);H*=Math.pow(10,k),$!==I.end&&A<$?w*=Math.pow(10,I.end-A-1):w*=Math.pow(10,I.end-A),H+=w,H/=Math.pow(10,k);var U=H.toFixed(k),q=new o(L,I.start,L,I.end);this.session.replace(q,U),this.moveCursorTo(L,Math.max(I.start+1,A+U.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,L=this.selection.getCursor().column;this.selection.selectWord();var A=this.getSelectedText(),R=this.selection.getWordRange().start.column,x=A.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=L-R-1;I<0&&(I=0);var $=0,k=0,H=this;A.match(/[A-Za-z0-9_]+/)&&x.forEach(function(Q,G){k=$+Q.length,I>=$&&I<=k&&(A=Q,H.selection.clearSelection(),H.moveCursorTo(w,$+R),H.selection.selectTo(w,k+R)),$=k});for(var U=this.$toggleWordPairs,q,N=0;N<U.length;N++)for(var K=U[N],O=0;O<=1;O++){var B=+!O,W=A.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[O])+")\\s?$","i"));if(W){var P=A.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(W[1])+")($|\\s)","g"));P&&(q=A.replace(new RegExp(a.escapeRegExp(K[O]),"i"),function(Q){var G=K[B];return Q.toUpperCase()==Q?G=G.toUpperCase():Q.charAt(0).toUpperCase()==Q.charAt(0)&&(G=G.substr(0,0)+K[B].charAt(0).toUpperCase()+G.substr(1)),G}),this.insert(q),q="")}}},M.prototype.findLinkAt=function(w,L){var A,R,x=this.session.getLine(w),I=x.split(/((?:https?|ftp):\/\/[\S]+)/),$=L;$<0&&($=0);var k=0,H=0,U;try{for(var q=h(I),N=q.next();!N.done;N=q.next()){var K=N.value;if(H=k+K.length,$>=k&&$<=H&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}k=H}}catch(O){A={error:O}}finally{try{N&&!N.done&&(R=q.return)&&R.call(q)}finally{if(A)throw A.error}}return U},M.prototype.openLink=function(){var w=this.selection.getCursor(),L=this.findLinkAt(w.row,w.column);return L&&window.open(L,"_blank"),L!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,L=this.session,A=w.getRange(),R=w.isBackwards();if(A.isEmpty()){var x=A.start.row;L.duplicateLines(x,x)}else{var I=R?A.start:A.end,$=L.insert(I,L.getTextRange(A));A.start=I,A.end=$,w.setSelectionRange(A,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,L,A){return this.session.moveText(w,L,A)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,L){var A,R,x=this.selection;if(!x.inMultiSelectMode||this.inVirtualSelectionMode){var I=x.toOrientedRange();A=this.$getSelectedRows(I),R=this.session.$moveLines(A.first,A.last,L?0:w),L&&w==-1&&(R=0),I.moveBy(R,0),x.fromOrientedRange(I)}else{var $=x.rangeList.ranges;x.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var k=0,H=0,U=$.length,q=0;q<U;q++){var N=q;$[q].moveBy(k,0),A=this.$getSelectedRows($[q]);for(var K=A.first,O=A.last;++q<U;){H&&$[q].moveBy(H,0);var B=this.$getSelectedRows($[q]);if(L&&B.first!=O)break;if(!L&&B.first>O+1)break;O=B.last}for(q--,k=this.session.$moveLines(K,O,L?0:w),L&&w==-1&&(N=q+1);N<=q;)$[N].moveBy(k,0),N++;L||(k=0),H+=k}x.fromOrientedRange(x.ranges[0]),x.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,L){var A=this.renderer,R=this.renderer.layerConfig,x=w*Math.floor(R.height/R.lineHeight);L===!0?this.selection.$moveSelection(function(){this.moveCursorBy(x,0)}):L===!1&&(this.selection.moveCursorBy(x,0),this.selection.clearSelection());var I=A.scrollTop;A.scrollBy(0,x*R.lineHeight),L!=null&&A.scrollCursorIntoView(null,.5),A.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,L,A,R){this.renderer.scrollToLine(w,L,A,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),L={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(L,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,L){this.selection.moveCursorTo(w,L)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,L){var A=this.getCursorPosition(),R=new b(this.session,A.row,A.column),x=R.getCurrentToken(),I=0;x&&x.type.indexOf("tag-name")!==-1&&(x=R.stepBackward());var $=x||R.stepForward();if($){var k,H=!1,U={},q=A.column-$.start,N,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;q<$.value.length&&!H;q++)if(K[$.value[q]])switch(N=K[$.value[q]]+"."+$.type.replace("rparen","lparen"),isNaN(U[N])&&(U[N]=0),$.value[q]){case"(":case"[":case"{":U[N]++;break;case")":case"]":case"}":U[N]--,U[N]===-1&&(k="bracket",H=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(U[$.value])&&(U[$.value]=0),x.value==="<"&&I>1?U[$.value]++:x.value==="</"&&U[$.value]--,U[$.value]===-1&&(k="tag",H=!0));H||(x=$,I++,$=R.stepForward(),q=0)}while($&&!H);if(k){var O,B;if(k==="bracket")O=this.session.getBracketRange(A),O||(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1),B=O.start,(L||B.row===A.row&&Math.abs(B.column-A.column)<2)&&(O=this.session.getBracketRange(B)));else if(k==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(A.row,A.column)===0){var W=this.session.getMatchingTags(A);W&&(W.openTag.contains(A.row,A.column)?(O=W.closeTag,B=O.start):(O=W.openTag,W.closeTag.start.row===A.row&&W.closeTag.start.column===A.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(w?O&&L?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(w,L,A){this.selection.clearSelection(),this.session.unfold({row:w-1,column:L||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,L||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,A)},M.prototype.navigateTo=function(w,L){this.selection.moveTo(w,L)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var L=this.getSelectionRange().start;this.moveCursorToPosition(L)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var L=this.getSelectionRange().end;this.moveCursorToPosition(L)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,L){L&&this.$search.set(L);var A=this.$search.find(this.session),R=0;return A&&(this.$tryReplace(A,w)&&(R=1),this.selection.setSelectionRange(A),this.renderer.scrollSelectionIntoView(A.start,A.end)),R},M.prototype.replaceAll=function(w,L){L&&this.$search.set(L);var A=this.$search.findAll(this.session),R=0;if(!A.length)return R;var x=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=A.length-1;I>=0;--I)this.$tryReplace(A[I],w)&&R++;return this.selection.setSelectionRange(x),R},M.prototype.$tryReplace=function(w,L){var A=this.session.getTextRange(w);return L=this.$search.replace(A,L),L!==null?(w.end=this.session.replace(w,L),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,L,A){L||(L={}),typeof w=="string"||w instanceof RegExp?L.needle=w:typeof w=="object"&&v.mixin(L,w);var R=this.selection.getRange();L.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(L),L.start||this.$search.set({start:R});var x=this.$search.find(this.session);if(L.preventScroll)return x;if(x)return this.revealRange(x,A),x;L.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,L){this.find({skipCurrent:!0,backwards:!1},w,L)},M.prototype.findPrevious=function(w,L){this.find(w,{skipCurrent:!0,backwards:!0},L)},M.prototype.revealRange=function(w,L){this.session.unfold(w),this.selection.setSelectionRange(w);var A=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),L!==!1&&this.renderer.animateScrolling(A)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var L,A=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var x=this.$scrollAnchor;x.style.cssText="position:absolute",this.container.insertBefore(x,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(L=A.renderer.container.getBoundingClientRect())}),k=this.renderer.on("afterRender",function(){if(R&&L&&(A.isFocused()||A.searchBox&&A.searchBox.isFocused())){var H=A.renderer,U=H.$cursorLayer.$pixelPos,q=H.layerConfig,N=U.top-q.offset;U.top>=0&&N+L.top<0?R=!0:U.top<q.height&&U.top+L.top+q.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(x.style.top=N+"px",x.style.left=U.left+"px",x.style.height=q.lineHeight+"px",x.scrollIntoView(R)),R=L=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",k),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",L=this.renderer.$cursorLayer;L&&(L.setSmoothBlinking(/smooth/.test(w)),L.isBlinking=!this.$readOnly&&w!="wide",s.setCssClass(L.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,L,A){var R=this;y.loadModule("ace/ext/prompt",function(x){x.prompt(R,w,L,A)})},M}();E.$uid=0,E.prototype.curOp=null,E.prototype.prevOp={},E.prototype.$mergeableCommands=["backspace","del","insertstring"],E.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],v.implement(E.prototype,d),y.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var L=s.createElement("div");L.className="ace_placeholder",L.textContent=this.$placeholder||"",this.renderer.placeholderNode=L,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},L=function(R){if(R.target==this.renderer.scroller&&R.keyCode===F.enter){R.preventDefault();var x=this.getCursorPosition().row;this.isRowVisible(x)||this.scrollToLine(x,!0,!0),this.focus()}},A;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(p.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",L.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),A||(A=new D(this)),A.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",L.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),A&&A.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,L){return Math.max(w.toString().length,(L.lastRow+1).toString().length,2)*L.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=E});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function s(a,p){this.element=a,this.canvasHeight=p||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return s.prototype.moveContainer=function(a){h.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},s.prototype.pageChanged=function(a,p){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)},s.prototype.computeLineTop=function(a,p,i){var r=p.firstRowScreen*p.lineHeight,u=Math.floor(r/this.canvasHeight),c=i.documentToScreenRow(a,0)*p.lineHeight;return c-u*this.canvasHeight},s.prototype.computeLineHeight=function(a,p,i){return p.lineHeight*i.getRowLineCount(a)},s.prototype.getLength=function(){return this.cells.length},s.prototype.get=function(a){return this.cells[a]},s.prototype.shift=function(){this.$cacheCell(this.cells.shift())},s.prototype.pop=function(){this.$cacheCell(this.cells.pop())},s.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var p=h.createFragment(this.element),i=0;i<a.length;i++)p.appendChild(a[i].element);this.element.appendChild(p)}else this.cells.push(a),this.element.appendChild(a.element)},s.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var p=h.createFragment(this.element),i=0;i<a.length;i++)p.appendChild(a[i].element);this.element.firstChild?this.element.insertBefore(p,this.element.firstChild):this.element.appendChild(p)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},s.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},s.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},s.prototype.createCell=function(a,p,i,r){var u=this.cellCache.pop();if(!u){var c=h.createElement("div");r&&r(c),this.element.appendChild(c),u={element:c,text:"",row:a}}return u.row=a,u},s}();t.Lines=v});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,p=e("./lines").Lines,i=e("../config").nls,r=function(){function c(f){this.element=h.createElement("div"),this.element.className="ace_layer ace_gutter-layer",f.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new p(this.element),this.$lines.$offsetCoefficient=1}return c.prototype.setSession=function(f){this.session&&this.session.off("change",this.$updateAnnotations),this.session=f,f&&f.on("change",this.$updateAnnotations)},c.prototype.addGutterDecoration=function(f,l){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(f,l)},c.prototype.removeGutterDecoration=function(f,l){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(f,l)},c.prototype.setAnnotations=function(f){this.$annotations=[];for(var l=0;l<f.length;l++){var o=f[l],d=o.row,_=this.$annotations[d];_||(_=this.$annotations[d]={text:[],type:[]});var m=o.text,y=o.type;m=m?s.escapeHTML(m):o.html||"",_.text.indexOf(m)===-1&&(_.text.push(m),_.type.push(y));var b=o.className;b?_.className=b:y=="error"?_.className=" ace_error":y=="warning"&&_.className!=" ace_error"?_.className=" ace_warning":y=="info"&&!_.className&&(_.className=" ace_info")}},c.prototype.$updateAnnotations=function(f){if(this.$annotations.length){var l=f.start.row,o=f.end.row-l;if(o!==0)if(f.action=="remove")this.$annotations.splice(l,o+1,null);else{var d=new Array(o+1);d.unshift(l,1),this.$annotations.splice.apply(this.$annotations,d)}}},c.prototype.update=function(f){this.config=f;var l=this.session,o=f.firstRow,d=Math.min(f.lastRow+f.gutterOffset,l.getLength()-1);this.oldLastRow=d,this.config=f,this.$lines.moveContainer(f),this.$updateCursorRow();for(var _=l.getNextFoldLine(o),m=_?_.start.row:1/0,y=null,b=-1,S=o;;){if(S>m&&(S=_.end.row+1,_=l.getNextFoldLine(S,_),m=_?_.start.row:1/0),S>d){for(;this.$lines.getLength()>b+1;)this.$lines.pop();break}y=this.$lines.get(++b),y?y.row=S:(y=this.$lines.createCell(S,f,this.session,u),this.$lines.push(y)),this.$renderCell(y,f,_,S),S++}this._signal("afterRender"),this.$updateGutterWidth(f)},c.prototype.$updateGutterWidth=function(f){var l=this.session,o=l.gutterRenderer||this.$renderer,d=l.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||l.$useWrapMode)&&(_=l.getLength()+d-1);var m=o?o.getWidth(l,_,f):_.toString().length*f.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},c.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var f=this.session.selection.getCursor();this.$cursorRow!==f.row&&(this.$cursorRow=f.row)}},c.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var f=this.session.selection.cursor.row;if(this.$cursorRow=f,!(this.$cursorCell&&this.$cursorCell.row==f)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var l=this.$lines.cells;this.$cursorCell=null;for(var o=0;o<l.length;o++){var d=l[o];if(d.row>=this.$cursorRow){if(d.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(o>0&&_&&_.start.row==l[o-1].row)d=l[o-1];else break}d.element.className="ace_gutter-active-line "+d.element.className,this.$cursorCell=d;break}}}}},c.prototype.scrollLines=function(f){var l=this.config;if(this.config=f,this.$updateCursorRow(),this.$lines.pageChanged(l,f))return this.update(f);this.$lines.moveContainer(f);var o=Math.min(f.lastRow+f.gutterOffset,this.session.getLength()-1),d=this.oldLastRow;if(this.oldLastRow=o,!l||d<f.firstRow)return this.update(f);if(o<l.firstRow)return this.update(f);if(l.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(l.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(d>o)for(var _=this.session.getFoldedRowCount(o+1,d);_>0;_--)this.$lines.pop();f.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLines(f,f.firstRow,l.firstRow-1)),o>d&&this.$lines.push(this.$renderLines(f,d+1,o)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(f)},c.prototype.$renderLines=function(f,l,o){for(var d=[],_=l,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var b=this.$lines.createCell(_,f,this.session,u);this.$renderCell(b,f,m,_),d.push(b),_++}return d},c.prototype.$renderCell=function(f,l,o,d){var _=f.element,m=this.session,y=_.childNodes[0],b=_.childNodes[1],S=_.childNodes[2],D=S.firstChild,g=m.$firstLineNumber,C=m.$breakpoints,F=m.$decorations,E=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=o?o.start.row:Number.MAX_VALUE,w=l.lineHeight+"px",L=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",A=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(E?E.getText(m,d):d+g).toString();if(this.$highlightGutterLine&&(d==this.$cursorRow||o&&d<this.$cursorRow&&d>=M&&this.$cursorRow<=o.end.row)&&(L+="ace_gutter-active-line ",this.$cursorCell!=f&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=f)),C[d]&&(L+=C[d]),F[d]&&(L+=F[d]),this.$annotations[d]&&d!==M&&(L+=this.$annotations[d].className),T){var x=T[d];x==null&&(x=T[d]=m.getFoldWidget(d))}if(x){var I="ace_fold-widget ace_"+x,$=x=="start"&&d==M&&d<o.end.row;if($){I+=" ace_closed";for(var k="",H=!1,U=d+1;U<=o.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){H=!0,k=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){H=!0,k=" ace_warning_fold";continue}}L+=k}else I+=" ace_open";b.className!=I&&(b.className=I),h.setStyle(b.style,"height",w),h.setStyle(b.style,"display","inline-block"),b.setAttribute("role","button"),b.setAttribute("tabindex","-1");var q=m.getFoldWidgetRange(d);q?b.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[q.start.row+1,q.end.row+1])):o?b.setAttribute("aria-label",i("Toggle code folding, rows $0 through $1",[o.start.row+1,o.end.row+1])):b.setAttribute("aria-label",i("Toggle code folding, row $0",[d+1])),$?(b.setAttribute("aria-expanded","false"),b.setAttribute("title",i("Unfold code"))):(b.setAttribute("aria-expanded","true"),b.setAttribute("title",i("Fold code")))}else b&&(h.setStyle(b.style,"display","none"),b.setAttribute("tabindex","0"),b.removeAttribute("role"),b.removeAttribute("aria-label"));return H&&this.$showFoldedAnnotations?(S.className="ace_gutter_annotation",D.className=A,D.className+=k,h.setStyle(D.style,"height",w),h.setStyle(S.style,"display","block"),h.setStyle(S.style,"height",w),S.setAttribute("aria-label",i("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):this.$annotations[d]?(S.className="ace_gutter_annotation",D.className=A,this.$useSvgGutterIcons?D.className+=this.$annotations[d].className:_.classList.add(this.$annotations[d].className.replace(" ","")),h.setStyle(D.style,"height",w),h.setStyle(S.style,"display","block"),h.setStyle(S.style,"height",w),S.setAttribute("aria-label",i("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):(h.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),_.className!=L&&(_.className=L),h.setStyle(f.element.style,"height",this.$lines.computeLineHeight(d,l,m)+"px"),h.setStyle(f.element.style,"top",this.$lines.computeLineTop(d,l,m)+"px"),f.text=R,S.style.display==="none"&&b.style.display==="none"?f.element.setAttribute("aria-hidden",!0):f.element.setAttribute("aria-hidden",!1),f},c.prototype.setHighlightGutterLine=function(f){this.$highlightGutterLine=f},c.prototype.setShowLineNumbers=function(f){this.$renderer=!f&&{getWidth:function(){return 0},getText:function(){return""}}},c.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},c.prototype.setShowFoldWidgets=function(f){f?h.addCssClass(this.element,"ace_folding-enabled"):h.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=f,this.$padding=null},c.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},c.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var f=h.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(f.borderLeftWidth)||0)+(parseInt(f.paddingLeft)||0)+1,this.$padding.right=(parseInt(f.borderRightWidth)||0)+(parseInt(f.paddingRight)||0),this.$padding},c.prototype.getRegion=function(f){var l=this.$padding||this.$computePadding(),o=this.element.getBoundingClientRect();if(f.x<l.left+o.left)return"markers";if(this.$showFoldWidgets&&f.x>o.right-l.right)return"foldWidgets"},c}();r.prototype.$fixedWidth=!1,r.prototype.$highlightGutterLine=!0,r.prototype.$renderer="",r.prototype.$showLineNumbers=!0,r.prototype.$showFoldWidgets=!0,v.implement(r.prototype,a);function u(c){var f=document.createTextNode("");c.appendChild(f);var l=h.createElement("span");c.appendChild(l);var o=h.createElement("span");c.appendChild(o);var d=h.createElement("span");return o.appendChild(d),c}t.Gutter=r});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../range").Range,v=e("../lib/dom"),s=function(){function p(i){this.element=v.createElement("div"),this.element.className="ace_layer ace_marker-layer",i.appendChild(this.element)}return p.prototype.setPadding=function(i){this.$padding=i},p.prototype.setSession=function(i){this.session=i},p.prototype.setMarkers=function(i){this.markers=i},p.prototype.elt=function(i,r){var u=this.i!=-1&&this.element.childNodes[this.i];u?this.i++:(u=document.createElement("div"),this.element.appendChild(u),this.i=-1),u.style.cssText=r,u.className=i},p.prototype.update=function(i){if(i){this.config=i,this.i=0;var r;for(var u in this.markers){var c=this.markers[u];if(!c.range){c.update(r,this,this.session,i);continue}var f=c.range.clipRows(i.firstRow,i.lastRow);if(!f.isEmpty())if(f=f.toScreenRange(this.session),c.renderer){var l=this.$getTop(f.start.row,i),o=this.$padding+f.start.column*i.characterWidth;c.renderer(r,f,o,l,i)}else c.type=="fullLine"?this.drawFullLineMarker(r,f,c.clazz,i):c.type=="screenLine"?this.drawScreenLineMarker(r,f,c.clazz,i):f.isMultiLine()?c.type=="text"?this.drawTextMarker(r,f,c.clazz,i):this.drawMultiLineMarker(r,f,c.clazz,i):this.drawSingleLineMarker(r,f,c.clazz+" ace_start ace_br15",i)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},p.prototype.$getTop=function(i,r){return(i-r.firstRowScreen)*r.lineHeight},p.prototype.drawTextMarker=function(i,r,u,c,f){for(var l=this.session,o=r.start.row,d=r.end.row,_=o,m=0,y=0,b=l.getScreenLastRowColumn(_),S=new h(_,r.start.column,_,y);_<=d;_++)S.start.row=S.end.row=_,S.start.column=_==o?r.start.column:l.getRowWrapIndent(_),S.end.column=b,m=y,y=b,b=_+1<d?l.getScreenLastRowColumn(_+1):_==d?0:r.end.column,this.drawSingleLineMarker(i,S,u+(_==o?" ace_start":"")+" ace_br"+a(_==o||_==o+1&&r.start.column,m<y,y>b,_==d),c,_==d?0:1,f)},p.prototype.drawMultiLineMarker=function(i,r,u,c,f){var l=this.$padding,o=c.lineHeight,d=this.$getTop(r.start.row,c),_=l+r.start.column*c.characterWidth;if(f=f||"",this.session.$bidiHandler.isBidiRow(r.start.row)){var m=r.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(i,m,u+" ace_br1 ace_start",c,null,f)}else this.elt(u+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+d+"px;left:"+_+"px;"+(f||""));if(this.session.$bidiHandler.isBidiRow(r.end.row)){var m=r.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(i,m,u+" ace_br12",c,null,f)}else{d=this.$getTop(r.end.row,c);var y=r.end.column*c.characterWidth;this.elt(u+" ace_br12","height:"+o+"px;width:"+y+"px;top:"+d+"px;left:"+l+"px;"+(f||""))}if(o=(r.end.row-r.start.row-1)*c.lineHeight,!(o<=0)){d=this.$getTop(r.start.row+1,c);var b=(r.start.column?1:0)|(r.end.column?0:8);this.elt(u+(b?" ace_br"+b:""),"height:"+o+"px;right:0;top:"+d+"px;left:"+l+"px;"+(f||""))}},p.prototype.drawSingleLineMarker=function(i,r,u,c,f,l){if(this.session.$bidiHandler.isBidiRow(r.start.row))return this.drawBidiSingleLineMarker(i,r,u,c,f,l);var o=c.lineHeight,d=(r.end.column+(f||0)-r.start.column)*c.characterWidth,_=this.$getTop(r.start.row,c),m=this.$padding+r.start.column*c.characterWidth;this.elt(u,"height:"+o+"px;width:"+d+"px;top:"+_+"px;left:"+m+"px;"+(l||""))},p.prototype.drawBidiSingleLineMarker=function(i,r,u,c,f,l){var o=c.lineHeight,d=this.$getTop(r.start.row,c),_=this.$padding,m=this.session.$bidiHandler.getSelections(r.start.column,r.end.column);m.forEach(function(y){this.elt(u,"height:"+o+"px;width:"+(y.width+(f||0))+"px;top:"+d+"px;left:"+(_+y.left)+"px;"+(l||""))},this)},p.prototype.drawFullLineMarker=function(i,r,u,c,f){var l=this.$getTop(r.start.row,c),o=c.lineHeight;r.start.row!=r.end.row&&(o+=this.$getTop(r.end.row,c)-l),this.elt(u,"height:"+o+"px;top:"+l+"px;left:0;right:0;"+(f||""))},p.prototype.drawScreenLineMarker=function(i,r,u,c,f){var l=this.$getTop(r.start.row,c),o=c.lineHeight;this.elt(u,"height:"+o+"px;top:"+l+"px;left:0;right:0;"+(f||""))},p}();s.prototype.$padding=0;function a(p,i,r,u){return(p?1:0)|(i?2:0)|(r?4:0)|(u?8:0)}t.Marker=s});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var h=new Set(["text","rparen","lparen"]);t.isTextToken=function(v){return h.has(v)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var h=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("./lines").Lines,p=e("../lib/event_emitter").EventEmitter,i=e("../config").nls,r=e("./text_util").isTextToken,u=function(){function c(f){this.dom=v,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",f.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return c.prototype.$updateEolChar=function(){var f=this.session.doc,l=f.getNewLineCharacter()==`
`&&f.getNewLineMode()!="windows",o=l?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=o)return this.EOL_CHAR=o,!0},c.prototype.setPadding=function(f){this.$padding=f,this.element.style.margin="0 "+f+"px"},c.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},c.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},c.prototype.$setFontMetrics=function(f){this.$fontMetrics=f,this.$fontMetrics.on("changeCharacterSize",function(l){this._signal("changeCharacterSize",l)}.bind(this)),this.$pollSizeChanges()},c.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},c.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},c.prototype.setSession=function(f){this.session=f,f&&this.$computeTabString()},c.prototype.setShowInvisibles=function(f){return this.showInvisibles==f?!1:(this.showInvisibles=f,typeof f=="string"?(this.showSpaces=/tab/i.test(f),this.showTabs=/space/i.test(f),this.showEOL=/eol/i.test(f)):this.showSpaces=this.showTabs=this.showEOL=f,this.$computeTabString(),!0)},c.prototype.setDisplayIndentGuides=function(f){return this.displayIndentGuides==f?!1:(this.displayIndentGuides=f,this.$computeTabString(),!0)},c.prototype.setHighlightIndentGuides=function(f){return this.$highlightIndentGuides===f?!1:(this.$highlightIndentGuides=f,f)},c.prototype.$computeTabString=function(){var f=this.session.getTabSize();this.tabSize=f;for(var l=this.$tabStrings=[0],o=1;o<f+1;o++)if(this.showTabs){var d=this.dom.createElement("span");d.className="ace_invisible ace_invisible_tab",d.textContent=s.stringRepeat(this.TAB_CHAR,o),l.push(d)}else l.push(this.dom.createTextNode(s.stringRepeat(" ",o),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),b=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):y,d=this.dom.createElement("span");d.className=_+m,d.textContent=y,this.$tabStrings[" "]=d;var d=this.dom.createElement("span");d.className=_+b,d.textContent=S,this.$tabStrings["	"]=d}},c.prototype.updateLines=function(f,l,o){if(this.config.lastRow!=f.lastRow||this.config.firstRow!=f.firstRow)return this.update(f);this.config=f;for(var d=Math.max(l,f.firstRow),_=Math.min(o,f.lastRow),m=this.element.childNodes,y=0,S=f.firstRow;S<d;S++){var D=this.session.getFoldLine(S);if(D)if(D.containsRow(d)){d=D.start.row;break}else S=D.end.row;y++}for(var b=!1,S=d,D=this.session.getNextFoldLine(S),g=D?D.start.row:1/0;S>g&&(S=D.end.row+1,D=this.session.getNextFoldLine(S,D),g=D?D.start.row:1/0),!(S>_);){var C=m[y++];if(C){this.dom.removeChildren(C),this.$renderLine(C,S,S==g?D:!1),b&&(C.style.top=this.$lines.computeLineTop(S,f,this.session)+"px");var F=f.lineHeight*this.session.getRowLength(S)+"px";C.style.height!=F&&(b=!0,C.style.height=F)}S++}if(b)for(;y<this.$lines.cells.length;){var E=this.$lines.cells[y++];E.element.style.top=this.$lines.computeLineTop(E.row,f,this.session)+"px"}},c.prototype.scrollLines=function(f){var l=this.config;if(this.config=f,this.$lines.pageChanged(l,f))return this.update(f);this.$lines.moveContainer(f);var o=f.lastRow,d=l?l.lastRow:-1;if(!l||d<f.firstRow)return this.update(f);if(o<l.firstRow)return this.update(f);if(!l||l.lastRow<f.firstRow)return this.update(f);if(f.lastRow<l.firstRow)return this.update(f);if(l.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(l.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(l.lastRow>f.lastRow)for(var _=this.session.getFoldedRowCount(f.lastRow+1,l.lastRow);_>0;_--)this.$lines.pop();f.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLinesFragment(f,f.firstRow,l.firstRow-1)),f.lastRow>l.lastRow&&this.$lines.push(this.$renderLinesFragment(f,l.lastRow+1,f.lastRow)),this.$highlightIndentGuide()},c.prototype.$renderLinesFragment=function(f,l,o){for(var d=[],_=l,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var b=this.$lines.createCell(_,f,this.session),S=b.element;this.dom.removeChildren(S),v.setStyle(S.style,"height",this.$lines.computeLineHeight(_,f,this.session)+"px"),v.setStyle(S.style,"top",this.$lines.computeLineTop(_,f,this.session)+"px"),this.$renderLine(S,_,_==y?m:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",d.push(b),_++}return d},c.prototype.update=function(f){this.$lines.moveContainer(f),this.config=f;for(var l=f.firstRow,o=f.lastRow,d=this.$lines;d.getLength();)d.pop();d.push(this.$renderLinesFragment(f,l,o))},c.prototype.$renderToken=function(f,l,o,d){for(var _=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),b,S=0;b=m.exec(d);){var D=b[1],g=b[2],C=b[3],F=b[4],E=b[5];if(!(!_.showSpaces&&g)){var T=S!=b.index?d.slice(S,b.index):"";if(S=b.index+b[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=_.session.getScreenTabSize(l+b.index);y.appendChild(_.$tabStrings[M].cloneNode(!0)),l+=M-1}else if(g)if(_.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=s.stringRepeat(_.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(C){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=s.stringRepeat(_.SPACE_CHAR,C.length),y.appendChild(w)}else if(F){l+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=_.showSpaces?_.SPACE_CHAR:F,y.appendChild(w)}else if(E){l+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=E,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(S?d.slice(S):d,this.element)),r(o.type))f.appendChild(y);else{var L="ace_"+o.type.replace(/\./g," ace_"),w=this.dom.createElement("span");o.type=="fold"&&(w.style.width=o.value.length*this.config.characterWidth+"px",w.setAttribute("title",i("Unfold code"))),w.className=L,w.appendChild(y),f.appendChild(w)}return l+d.length},c.prototype.renderIndentGuide=function(f,l,o){var d=l.search(this.$indentGuideRe);if(d<=0||d>=o)return l;if(l[0]==" "){d-=d%this.tabSize;for(var _=d/this.tabSize,m=0;m<_;m++)f.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(d)}else if(l[0]=="	"){for(var m=0;m<d;m++)f.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(d)}return this.$highlightIndentGuide(),l},c.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var f=this.session.doc.$lines;if(f){var l=this.session.selection.getCursor(),o=/^\s*/.exec(this.session.doc.getLine(l.row))[0].length,d=Math.floor(o/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:d,start:l.row};var _=this.session.$bracketHighlight;if(_){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(l.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,l.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&f[l.row]!==""&&l.column===f[l.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=l.row+1;y<f.length;y++){var b=f[y],S=/^\s*/.exec(b)[0].length;if(b!==""&&(this.$highlightIndentGuideMarker.end=y,S<=o))break}}this.$renderHighlightIndentGuide()}}},c.prototype.$clearActiveIndentGuide=function(){for(var f=this.$lines.cells,l=0;l<f.length;l++){var o=f[l],d=o.element.childNodes;if(d.length>0){for(var _=0;_<d.length;_++)if(d[_].classList&&d[_].classList.contains("ace_indent-guide-active")){d[_].classList.remove("ace_indent-guide-active");break}}}},c.prototype.$setIndentGuideActive=function(f,l){var o=this.session.doc.getLine(f.row);if(o!==""){var d=f.element.childNodes;if(d){var _=d[l-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},c.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var f=this.$lines.cells;this.$clearActiveIndentGuide();var l=this.$highlightIndentGuideMarker.indentLevel;if(l!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var o=0;o<f.length;o++){var d=f[o];if(this.$highlightIndentGuideMarker.end&&d.row>=this.$highlightIndentGuideMarker.start+1){if(d.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,l)}}else for(var o=f.length-1;o>=0;o--){var d=f[o];if(this.$highlightIndentGuideMarker.end&&d.row<this.$highlightIndentGuideMarker.start){if(d.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,l)}}}},c.prototype.$createLineElement=function(f){var l=this.dom.createElement("div");return l.className="ace_line",l.style.height=this.config.lineHeight+"px",l},c.prototype.$renderWrappedLine=function(f,l,o){var d=0,_=0,m=o[0],y=0,b=this.$createLineElement();f.appendChild(b);for(var S=0;S<l.length;S++){var D=l[S],g=D.value;if(S==0&&this.displayIndentGuides){if(d=g.length,g=this.renderIndentGuide(b,g,m),!g)continue;d-=g.length}if(d+g.length<m)y=this.$renderToken(b,y,D,g),d+=g.length;else{for(;d+g.length>=m;)y=this.$renderToken(b,y,D,g.substring(0,m-d)),g=g.substring(m-d),d=m,b=this.$createLineElement(),f.appendChild(b),b.appendChild(this.dom.createTextNode(s.stringRepeat("\xA0",o.indent),this.element)),_++,y=0,m=o[_]||Number.MAX_VALUE;g.length!=0&&(d+=g.length,y=this.$renderToken(b,y,D,g))}}o[o.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(b,y,null,"",!0)},c.prototype.$renderSimpleLine=function(f,l){for(var o=0,d=0;d<l.length;d++){var _=l[d],m=_.value;if(!(d==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(f,m),!m))){if(o+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(f,o,_,m);o=this.$renderToken(f,o,_,m)}}},c.prototype.$renderOverflowMessage=function(f,l,o,d,_){o&&this.$renderToken(f,l,o,d.slice(0,this.MAX_LINE_LENGTH-l));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=_?"<hide>":"<click to see more...>",f.appendChild(m)},c.prototype.$renderLine=function(f,l,o){if(!o&&o!=!1&&(o=this.session.getFoldLine(l)),o)var d=this.$getFoldLineTokens(l,o);else var d=this.session.getTokens(l);var _=f;if(d.length){var m=this.session.getRowSplitData(l);if(m&&m.length){this.$renderWrappedLine(f,d,m);var _=f.lastChild}else{var _=f;this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_)),this.$renderSimpleLine(_,d)}}else this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_));if(this.showEOL&&_){o&&(l=o.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=l==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},c.prototype.$getFoldLineTokens=function(f,l){var o=this.session,d=[];function _(y,b,S){for(var D=0,g=0;g+y[D].value.length<b;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=b){var C=y[D].value.substring(b-g);C.length>S-b&&(C=C.substring(0,S-b)),d.push({type:y[D].type,value:C}),g=b+C.length,D+=1}for(;g<S&&D<y.length;){var C=y[D].value;C.length+g>S?d.push({type:y[D].type,value:C.substring(0,S-g)}):d.push(y[D]),g+=C.length,D+=1}}var m=o.getTokens(f);return l.walk(function(y,b,S,D,g){y!=null?d.push({type:"fold",value:y}):(g&&(m=o.getTokens(b)),m.length&&_(m,D,S))},l.end.row,this.session.getLine(l.end.row).length),d},c.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},c}();u.prototype.EOF_CHAR="\xB6",u.prototype.EOL_CHAR_LF="\xAC",u.prototype.EOL_CHAR_CRLF="\xA4",u.prototype.EOL_CHAR=u.prototype.EOL_CHAR_LF,u.prototype.TAB_CHAR="\u2014",u.prototype.SPACE_CHAR="\xB7",u.prototype.$padding=0,u.prototype.MAX_LINE_LENGTH=1e4,u.prototype.showInvisibles=!1,u.prototype.showSpaces=!1,u.prototype.showTabs=!1,u.prototype.showEOL=!1,u.prototype.displayIndentGuides=!0,u.prototype.$highlightIndentGuides=!0,u.prototype.$tabStrings=[],u.prototype.destroy={},u.prototype.onChangeTabSize=u.prototype.$computeTabString,h.implement(u.prototype,p),t.Text=u});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function s(a){this.element=h.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),h.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return s.prototype.$updateOpacity=function(a){for(var p=this.cursors,i=p.length;i--;)h.setStyle(p[i].style,"opacity",a?"":"0")},s.prototype.$startCssAnimation=function(){for(var a=this.cursors,p=a.length;p--;)a[p].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&h.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},s.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,h.removeCssClass(this.element,"ace_animate-blinking")},s.prototype.setPadding=function(a){this.$padding=a},s.prototype.setSession=function(a){this.session=a},s.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},s.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},s.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,h.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},s.prototype.addCursor=function(){var a=h.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},s.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},s.prototype.hideCursor=function(){this.isVisible=!1,h.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.showCursor=function(){this.isVisible=!0,h.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,h.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&h.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),h.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var p=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),p()},this.blinkInterval),p()}},s.prototype.getPixelPosition=function(a,p){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(a),r=this.$padding+(this.session.$bidiHandler.isBidiRow(i.row,a.row)?this.session.$bidiHandler.getPosLeft(i.column):i.column*this.config.characterWidth),u=(i.row-(p?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:u}},s.prototype.isCursorInView=function(a,p){return a.top>=0&&a.top<p.maxHeight},s.prototype.update=function(a){this.config=a;var p=this.session.$selectionMarkers,i=0,r=0;(p===void 0||p.length===0)&&(p=[{cursor:null}]);for(var i=0,u=p.length;i<u;i++){var c=this.getPixelPosition(p[i].cursor,!0);if(!((c.top>a.height+a.offset||c.top<0)&&i>1)){var f=this.cursors[r++]||this.addCursor(),l=f.style;this.drawCursor?this.drawCursor(f,c,a,p[i],this.session):this.isCursorInView(c,a)?(h.setStyle(l,"display","block"),h.translate(f,c.left,c.top),h.setStyle(l,"width",Math.round(a.characterWidth)+"px"),h.setStyle(l,"height",a.lineHeight+"px")):h.setStyle(l,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var o=this.session.getOverwrite();this.$setOverwrite(o),this.$pixelPos=c,this.restartTimer()},s.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?h.addCssClass(this.element,"ace_overwrite-cursors"):h.removeCssClass(this.element,"ace_overwrite-cursors"))},s.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},s}();v.prototype.$padding=0,v.prototype.drawCursor=null,t.Cursor=v});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var f=function(l,o){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,_){d.__proto__=_}||function(d,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(d[m]=_[m])},f(l,o)};return function(l,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");f(l,o);function d(){this.constructor=l}l.prototype=o===null?Object.create(o):(d.prototype=o.prototype,new d)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter,i=32768,r=function(){function f(l,o){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+o,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return f.prototype.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1},f}();v.implement(r.prototype,p);var u=function(f){h(l,f);function l(o,d){var _=f.call(this,o,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,d.$scrollbarWidth=_.width=s.scrollbarWidth(o.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return l.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var o=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-o)/(this.coeff-o)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},l.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},l.prototype.setHeight=function(o){this.element.style.height=o+"px"},l.prototype.setScrollHeight=function(o){this.scrollHeight=o,o>i?(this.coeff=i/o,o=i):this.coeff!=1&&(this.coeff=1),this.inner.style.height=o+"px"},l.prototype.setScrollTop=function(o){this.scrollTop!=o&&(this.skipEvent=!0,this.scrollTop=o,this.element.scrollTop=o*this.coeff)},l}(r);u.prototype.setInnerHeight=u.prototype.setScrollHeight;var c=function(f){h(l,f);function l(o,d){var _=f.call(this,o,"-h")||this;return _.scrollLeft=0,_.height=d.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return l.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},l.prototype.getHeight=function(){return this.isVisible?this.height:0},l.prototype.setWidth=function(o){this.element.style.width=o+"px"},l.prototype.setInnerWidth=function(o){this.inner.style.width=o+"px"},l.prototype.setScrollWidth=function(o){this.inner.style.width=o+"px"},l.prototype.setScrollLeft=function(o){this.scrollLeft!=o&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=o)},l}(r);t.ScrollBar=u,t.ScrollBarV=u,t.ScrollBarH=c,t.VScrollBar=u,t.HScrollBar=c});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var c=function(f,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,d){o.__proto__=d}||function(o,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(o[_]=d[_])},c(f,l)};return function(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(f,l);function o(){this.constructor=f}f.prototype=l===null?Object.create(l):(o.prototype=l.prototype,new o)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter;s.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var i=function(){function c(f,l){this.element=s.createElement("div"),this.element.className="ace_sb"+l,this.inner=s.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return c.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},c}();v.implement(i.prototype,p);var r=function(c){h(f,c);function f(l,o){var d=c.call(this,l,"-v")||this;return d.scrollTop=0,d.scrollHeight=0,d.parent=l,d.width=d.VScrollWidth,d.renderer=o,d.inner.style.width=d.element.style.width=(d.width||15)+"px",d.$minWidth=0,d}return f.prototype.onMouseDown=function(l,o){if(l==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var d=this,_=o.clientY,m=function(F){_=F.clientY},y=function(){clearInterval(g)},b=o.clientY,S=this.thumbTop,D=function(){if(_!==void 0){var F=d.scrollTopFromThumbTop(S+_-b);F!==d.scrollTop&&d._emit("scroll",{data:F})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var C=o.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(C)}),a.preventDefault(o)}},f.prototype.getHeight=function(){return this.height},f.prototype.scrollTopFromThumbTop=function(l){var o=l*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return o=o>>0,o<0?o=0:o>this.pageHeight-this.viewHeight&&(o=this.pageHeight-this.viewHeight),o},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(l){this.height=Math.max(0,l),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},f.prototype.setScrollHeight=function(l,o){this.pageHeight===l&&!o||(this.pageHeight=l,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},f.prototype.setScrollTop=function(l){this.scrollTop=l,l<0&&(l=0),this.thumbTop=l*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},f}(i);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var u=function(c){h(f,c);function f(l,o){var d=c.call(this,l,"-h")||this;return d.scrollLeft=0,d.scrollWidth=0,d.height=d.HScrollHeight,d.inner.style.height=d.element.style.height=(d.height||12)+"px",d.renderer=o,d}return f.prototype.onMouseDown=function(l,o){if(l==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var d=this,_=o.clientX,m=function(F){_=F.clientX},y=function(){clearInterval(g)},b=o.clientX,S=this.thumbLeft,D=function(){if(_!==void 0){var F=d.scrollLeftFromThumbLeft(S+_-b);F!==d.scrollLeft&&d._emit("scroll",{data:F})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var C=o.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(C)}),a.preventDefault(o)}},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.scrollLeftFromThumbLeft=function(l){var o=l*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return o=o>>0,o<0?o=0:o>this.pageWidth-this.viewWidth&&(o=this.pageWidth-this.viewWidth),o},f.prototype.setWidth=function(l){this.width=Math.max(0,l),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},f.prototype.setScrollWidth=function(l,o){this.pageWidth===l&&!o||(this.pageWidth=l,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},f.prototype.setScrollLeft=function(l){this.scrollLeft=l,l<0&&(l=0),this.thumbLeft=l*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},f}(i);u.prototype.setInnerWidth=u.prototype.setScrollWidth,t.ScrollBar=r,t.ScrollBarV=r,t.ScrollBarH=u,t.VScrollBar=r,t.HScrollBar=u});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var h=e("./lib/event"),v=function(){function s(a,p){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=p||window;var i=this;this._flush=function(r){i.pending=!1;var u=i.changes;if(u&&(h.blockIdle(100),i.changes=0,i.onRender(u)),i.changes){if(i.$recursionLimit--<0)return;i.schedule()}else i.$recursionLimit=2}}return s.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(h.nextFrame(this._flush),this.pending=!0)},s.prototype.clear=function(a){var p=this.changes;return this.changes=0,p},s}();t.RenderLoop=v});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var h=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("../lib/event"),p=e("../lib/useragent"),i=e("../lib/event_emitter").EventEmitter,r=512,u=typeof ResizeObserver=="function",c=200,f=function(){function l(o){this.el=v.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=v.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=v.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),o.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",r),this.$characterSize={width:0,height:0},u?this.$addObserver():this.checkForSizeChanges()}return l.prototype.$setMeasureNodeStyles=function(o,d){o.width=o.height="auto",o.left=o.top="0px",o.visibility="hidden",o.position="absolute",o.whiteSpace="pre",p.isIE<8?o["font-family"]="inherit":o.font="inherit",o.overflow=d?"hidden":"visible"},l.prototype.checkForSizeChanges=function(o){if(o===void 0&&(o=this.$measureSizes()),o&&(this.$characterSize.width!==o.width||this.$characterSize.height!==o.height)){this.$measureNode.style.fontWeight="bold";var d=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=o,this.charSizes=Object.create(null),this.allowBoldFonts=d&&d.width===o.width&&d.height===o.height,this._emit("changeCharacterSize",{data:o})}},l.prototype.$addObserver=function(){var o=this;this.$observer=new window.ResizeObserver(function(d){o.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},l.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var o=this;return this.$pollSizeChangesTimer=a.onIdle(function d(){o.checkForSizeChanges(),a.onIdle(d,500)},500)},l.prototype.setPolling=function(o){o?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},l.prototype.$measureSizes=function(o){var d={height:(o||this.$measureNode).clientHeight,width:(o||this.$measureNode).clientWidth/r};return d.width===0||d.height===0?null:d},l.prototype.$measureCharWidth=function(o){this.$main.textContent=s.stringRepeat(o,r);var d=this.$main.getBoundingClientRect();return d.width/r},l.prototype.getCharacterWidth=function(o){var d=this.charSizes[o];return d===void 0&&(d=this.charSizes[o]=this.$measureCharWidth(o)/this.$characterSize.width),d},l.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},l.prototype.$getZoom=function(o){return!o||!o.parentElement?1:(window.getComputedStyle(o).zoom||1)*this.$getZoom(o.parentElement)},l.prototype.$initTransformMeasureNodes=function(){var o=function(d,_){return["div",{style:"position: absolute;top:"+d+"px;left:"+_+"px;"}]};this.els=v.buildDom([o(0,0),o(c,0),o(0,c),o(c,c)],this.el)},l.prototype.transformCoordinates=function(o,d){if(o){var _=this.$getZoom(this.el);o=S(1/_,o)}function m($,k,H){var U=$[1]*k[0]-$[0]*k[1];return[(-k[1]*H[0]+k[0]*H[1])/U,(+$[1]*H[0]-$[0]*H[1])/U]}function y($,k){return[$[0]-k[0],$[1]-k[1]]}function b($,k){return[$[0]+k[0],$[1]+k[1]]}function S($,k){return[$*k[0],$*k[1]]}this.els||this.$initTransformMeasureNodes();function D($){var k=$.getBoundingClientRect();return[k.left,k.top]}var g=D(this.els[0]),C=D(this.els[1]),F=D(this.els[2]),E=D(this.els[3]),T=m(y(E,C),y(E,F),y(b(C,F),b(E,g))),M=S(1+T[0],y(C,g)),w=S(1+T[1],y(F,g));if(d){var L=d,A=T[0]*L[0]/c+T[1]*L[1]/c+1,R=b(S(L[0],M),S(L[1],w));return b(S(1/A/c,R),g)}var x=y(o,g),I=m(y(M,S(T[0],x)),y(w,S(T[1],x)),x);return S(c,I)},l}();f.prototype.$characterSize={width:0,height:0},h.implement(f.prototype,i),t.FontMetrics=f});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/event_emitter").EventEmitter,a=function(){function p(i,r){this.canvas=h.createElement("canvas"),this.renderer=r,this.pixelRatio=1,this.maxHeight=r.layerConfig.maxHeight,this.lineHeight=r.layerConfig.lineHeight,this.canvasHeight=i.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=i.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},i.element.appendChild(this.canvas)}return p.prototype.$updateDecorators=function(i){var r=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(i){this.maxHeight=i.maxHeight,this.lineHeight=i.lineHeight,this.canvasHeight=i.height;var u=(i.lastRow+1)*this.lineHeight;u<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var c=this.canvas.getContext("2d");function f(E,T){return E.priority<T.priority?-1:E.priority>T.priority?1:0}var l=this.renderer.session.$annotations;if(c.clearRect(0,0,this.canvas.width,this.canvas.height),l){var o={info:1,warning:2,error:3};l.forEach(function(E){E.priority=o[E.type]||null}),l=l.sort(f);for(var d=this.renderer.session.$foldData,_=0;_<l.length;_++){var m=l[_].row,y=this.compensateFoldRows(m,d),b=Math.round((m-y)*this.lineHeight*this.heightRatio),S=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-S;if(g<this.minDecorationHeight){var C=(S+D)/2|0;C<this.halfMinDecorationHeight?C=this.halfMinDecorationHeight:C+this.halfMinDecorationHeight>this.canvasHeight&&(C=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(C-this.halfMinDecorationHeight),D=Math.round(C+this.halfMinDecorationHeight)}c.fillStyle=r[l[_].type]||null,c.fillRect(0,b,this.canvasWidth,D-S)}}var F=this.renderer.session.selection.getCursor();if(F){var y=this.compensateFoldRows(F.row,d),b=Math.round((F.row-y)*this.lineHeight*this.heightRatio);c.fillStyle="rgba(0, 0, 0, 0.5)",c.fillRect(0,b,this.canvasWidth,2)}},p.prototype.compensateFoldRows=function(i,r){var u=0;if(r&&r.length>0)for(var c=0;c<r.length;c++)i>r[c].start.row&&i<r[c].end.row?u+=i-r[c].start.row:i>=r[c].end.row&&(u+=r[c].end.row-r[c].start.row);return u},p}();v.implement(a.prototype,s),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/dom"),s=e("./lib/lang"),a=e("./config"),p=e("./layer/gutter").Gutter,i=e("./layer/marker").Marker,r=e("./layer/text").Text,u=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,f=e("./scrollbar").VScrollBar,l=e("./scrollbar_custom").HScrollBar,o=e("./scrollbar_custom").VScrollBar,d=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),b=e("./layer/decorators").Decorator,S=e("./lib/useragent");v.importCssString(y,"ace_editor.css",!1);var D=function(){function g(C,F){var E=this;this.container=C||v.createElement("div"),v.addCssClass(this.container,"ace_editor"),v.HI_DPI&&v.addCssClass(this.container,"ace_hidpi"),this.setTheme(F),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=v.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=v.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=v.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new i(this.content);var T=this.$textLayer=new r(this.content);this.canvas=T.element,this.$markerFront=new i(this.content),this.$cursorLayer=new u(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollTop(M.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollLeft(M.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),v.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(C){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=C,C&&this.scrollMargin.top&&C.getScrollTop()<=0&&C.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(C),this.$markerBack.setSession(C),this.$markerFront.setSession(C),this.$gutterLayer.setSession(C),this.$textLayer.setSession(C),C&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(C,F,E){if(F===void 0&&(F=1/0),this.$changedLines?(this.$changedLines.firstRow>C&&(this.$changedLines.firstRow=C),this.$changedLines.lastRow<F&&(this.$changedLines.lastRow=F)):this.$changedLines={firstRow:C,lastRow:F},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(C){C?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(C,F,E,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=C?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),E||(E=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(C,F,E,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!E&&!T)return this.resizing=0;C&&(this.$gutterLayer.$padding=null),C?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(C,F,E,T){T-=this.$extraHeight||0;var M=0,w=this.$size,L={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(C||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),E&&(C||w.width!=E)){M|=this.CHANGE_SIZE,w.width=E,F==null&&(F=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=F,v.setStyle(this.scrollBarH.element.style,"left",F+"px"),v.setStyle(this.scroller.style,"left",F+this.margin.left+"px"),w.scrollerWidth=Math.max(0,E-F-this.scrollBarV.getWidth()-this.margin.h),v.setStyle(this.$gutter.style,"left",this.margin.left+"px");var A=this.scrollBarV.getWidth()+"px";v.setStyle(this.scrollBarH.element.style,"right",A),v.setStyle(this.scroller.style,"right",A),v.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||C)&&(M|=this.CHANGE_FULL)}return w.$dirty=!E||!T,M&&this._signal("resize",L),M},g.prototype.onGutterResize=function(C){var F=this.$showGutter?C:0;F!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,F,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var C=this.$size.scrollerWidth-this.$padding*2,F=Math.floor(C/this.characterWidth);return this.session.adjustWrapLimit(F,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(C){this.setOption("animatedScroll",C)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(C){this.setOption("showInvisibles",C),this.session.$bidiHandler.setShowInvisibles(C)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(C){this.setOption("displayIndentGuides",C)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(C){this.setOption("highlightIndentGuides",C)},g.prototype.setShowPrintMargin=function(C){this.setOption("showPrintMargin",C)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(C){this.setOption("printMarginColumn",C)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(C){return this.setOption("showGutter",C)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},g.prototype.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var C=v.createElement("div");C.className="ace_layer ace_print-margin-layer",this.$printMarginEl=v.createElement("div"),this.$printMarginEl.className="ace_print-margin",C.appendChild(this.$printMarginEl),this.content.insertBefore(C,this.content.firstChild)}var F=this.$printMarginEl.style;F.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",F.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var C=this.textarea.style,F=this.$composition;if(!this.$keepTextAreaAtCursor&&!F){v.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){F&&F.markerRange&&(E=this.$cursorLayer.getPixelPosition(F.markerRange.start,!0));var T=this.layerConfig,M=E.top,w=E.left;M-=T.offset;var L=F&&F.useTextareaForIME||S.isMobile?this.lineHeight:1;if(M<0||M>T.height-L){v.translate(this.textarea,0,0);return}var A=1,R=this.$size.height-L;if(!F)M+=this.lineHeight;else if(F.useTextareaForIME){var x=this.textarea.value;A=this.characterWidth*this.session.$getStringScreenWidth(x)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-A&&(w=this.$size.scrollerWidth-A),w+=this.gutterWidth+this.margin.left,v.setStyle(C,"height",L+"px"),v.setStyle(C,"width",A+"px"),v.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-A),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var C=this.layerConfig,F=C.lastRow,E=this.session.documentToScreenRow(F,0)*C.lineHeight;return E-this.session.getScrollTop()>C.height-C.lineHeight?F-1:F},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(C){this.$padding=C,this.$textLayer.setPadding(C),this.$cursorLayer.setPadding(C),this.$markerFront.setPadding(C),this.$markerBack.setPadding(C),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(C,F,E,T){var M=this.scrollMargin;M.top=C|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(C,F,E,T){var M=this.margin;M.top=C|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(C){this.setOption("hScrollBarAlwaysVisible",C)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(C){this.setOption("vScrollBarAlwaysVisible",C)},g.prototype.$updateScrollBarV=function(){var C=this.layerConfig.maxHeight,F=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(C-=(F-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>C-F&&(C=this.scrollTop+F,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(C+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(C,F){if(this.$changes&&(C|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!C&&!F){this.$changes|=C;return}if(this.$size.$dirty)return this.$changes|=C,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",C),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(C&this.CHANGE_FULL||C&this.CHANGE_SIZE||C&this.CHANGE_TEXT||C&this.CHANGE_LINES||C&this.CHANGE_SCROLL||C&this.CHANGE_H_SCROLL){if(C|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(E.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,C=C|this.CHANGE_SCROLL,C|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),C&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),v.translate(this.content,-this.scrollLeft,-E.offset);var M=E.width+2*this.$padding+"px",w=E.minHeight+"px";v.setStyle(this.content.style,"width",M),v.setStyle(this.content.style,"height",w)}if(C&this.CHANGE_H_SCROLL&&(v.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),C&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}if(C&this.CHANGE_SCROLL){this.$changedLines=null,C&this.CHANGE_TEXT||C&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(C&this.CHANGE_GUTTER||C&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}C&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_LINES?((this.$updateLines()||C&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_TEXT||C&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)),C&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",C)},g.prototype.$autosize=function(){var C=this.session.getScreenLength()*this.lineHeight,F=this.$maxLines*this.lineHeight,E=Math.min(F,Math.max((this.$minLines||1)*this.lineHeight,C))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var T=E<=2*this.lineHeight,M=!T&&C>F;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,E),this.desiredHeight=E,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var C=this.session,F=this.$size,E=F.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),L=!E&&(this.$hScrollBarAlwaysVisible||F.scrollerWidth-w-2*this.$padding<0),A=this.$horizScroll!==L;A&&(this.$horizScroll=L,this.scrollBarH.setVisible(L));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var x=F.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(F.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-F.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-F.scrollerWidth+$.right)));var k=!E&&(this.$vScrollBarAlwaysVisible||F.scrollerHeight-M+I<0||this.scrollTop>$.top),H=R!==k;H&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var U=this.scrollTop%this.lineHeight,q=Math.ceil(x/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),K=N+q,O,B,W=this.lineHeight;N=C.screenToDocumentRow(N,0);var P=C.getFoldLine(N);P&&(N=P.start.row),O=C.documentToScreenRow(N,0),B=C.getRowLength(N)*W,K=Math.min(C.screenToDocumentRow(K,0),C.getLength()-1),x=F.scrollerHeight+C.getRowLength(K)*W+B,U=this.scrollTop-O*W;var Q=0;return(this.layerConfig.width!=w||A)&&(Q=this.CHANGE_H_SCROLL),(A||H)&&(Q|=this.$updateCachedSize(!0,this.gutterWidth,F.width,F.height),this._signal("scrollbarVisibilityChanged"),H&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:K,lineHeight:W,characterWidth:this.characterWidth,minHeight:x,maxHeight:M,offset:U,gutterOffset:W?Math.max(0,Math.ceil((U+F.height-F.scrollerHeight)/W)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),Q},g.prototype.$updateLines=function(){if(this.$changedLines){var C=this.$changedLines.firstRow,F=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(C>E.lastRow+1)&&!(F<E.firstRow)){if(F===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,C,F),!0}}},g.prototype.$getLongestLine=function(){var C=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(C+=1),this.$textLayer&&C>this.$textLayer.MAX_LINE_LENGTH&&(C=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(C*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(C,F){this.$gutterLayer.addGutterDecoration(C,F)},g.prototype.removeGutterDecoration=function(C,F){this.$gutterLayer.removeGutterDecoration(C,F)},g.prototype.updateBreakpoints=function(C){this._rows=C,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(C){this.$gutterLayer.setAnnotations(C),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(C,F,E){this.scrollCursorIntoView(C,E),this.scrollCursorIntoView(F,E)},g.prototype.scrollCursorIntoView=function(C,F,E){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(C),M=T.left,w=T.top,L=E&&E.top||0,A=E&&E.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+L>w?(F&&R+L>w+this.lineHeight&&(w-=F*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-A<w+this.lineHeight&&(F&&R+this.$size.scrollerHeight-A<w-this.lineHeight&&(w+=F*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+A-this.$size.scrollerHeight));var x=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<x?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,x+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):x<=this.$padding&&M-x<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(C){this.session.setScrollTop(C*this.lineHeight)},g.prototype.alignCursor=function(C,F){typeof C=="number"&&(C={row:C,column:0});var E=this.$cursorLayer.getPixelPosition(C),T=this.$size.scrollerHeight-this.lineHeight,M=E.top-T*(F||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(C,F){var E=0,T=this.STEPS,M=[],w=function(L,A,R){return R*(Math.pow(L-1,3)+1)+A};for(E=0;E<T;++E)M.push(w(E/this.STEPS,C,F-C));return M},g.prototype.scrollToLine=function(C,F,E,T){var M=this.$cursorLayer.getPixelPosition({row:C,column:0}),w=M.top;F&&(w-=this.$size.scrollerHeight/2);var L=this.scrollTop;this.session.setScrollTop(w),E!==!1&&this.animateScrolling(L,T)},g.prototype.animateScrolling=function(C,F){var E=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(C==E)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(C=M[0],C==E))return}var w=T.$calcSteps(C,E);this.$scrollAnimation={from:C,to:E,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=E;function L(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,F&&F()}this.$timer=setInterval(function(){if(T.$stopAnimation){L();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=E):E!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(E),E=null):L()},10)},g.prototype.scrollToY=function(C){this.scrollTop!==C&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=C)},g.prototype.scrollToX=function(C){this.scrollLeft!==C&&(this.scrollLeft=C),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(C,F){this.session.setScrollTop(F),this.session.setScrollLeft(C)},g.prototype.scrollBy=function(C,F){F&&this.session.setScrollTop(this.session.getScrollTop()+F),C&&this.session.setScrollLeft(this.session.getScrollLeft()+C)},g.prototype.isScrollableBy=function(C,F){if(F<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||F>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||C<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||C>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(C,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([C,F]);C=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=C+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,L=Math.floor((F+this.scrollTop-E.top)/this.lineHeight),A=this.$blockCursor?Math.floor(w):Math.round(w);return{row:L,column:A,side:w-A>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(C,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([C,F]);C=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=C+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,L=this.$blockCursor?Math.floor(w):Math.round(w),A=Math.floor((F+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(A,Math.max(L,0),M)},g.prototype.textToScreenCoordinates=function(C,F){var E=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(C,F),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,C)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:E.left+M-this.scrollLeft,pageY:E.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){v.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){v.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(C){this.$composition=C,C.cssText||(C.cssText=this.textarea.style.cssText),C.useTextareaForIME==null&&(C.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(v.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):C.markerId=this.session.addMarker(C.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(C){var F=this.session.selection.cursor;this.addToken(C,"composition_placeholder",F.row,F.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),v.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var C=this.session.selection.cursor;this.removeExtraToken(C.row,C.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(C,F){var E=this.session.selection.cursor,T=F||{row:E.row,column:E.column};this.removeGhostText();var M=C.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:C,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),L=this.container,A=L.getBoundingClientRect().height,R=M.length*this.lineHeight,x=R<A-w.top;if(x)return;R<A?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var C=this.$ghostText.position;this.removeExtraToken(C.row,C.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(C,F,E,T){var M=this.session;M.bgTokenizer.lines[E]=null;var w={type:F,value:C},L=M.getTokens(E);if(T==null||!L.length)L.push(w);else for(var A=0,R=0;R<L.length;R++){var x=L[R];if(A+=x.value.length,T<=A){var I=x.value.length-(A-T),$=x.value.slice(0,I),k=x.value.slice(I);L.splice(R,1,{type:x.type,value:$},w,{type:x.type,value:k});break}}this.updateLines(E,E)},g.prototype.removeExtraToken=function(C,F){this.session.bgTokenizer.lines[C]=null,this.updateLines(C,C)},g.prototype.setTheme=function(C,F){var E=this;if(this.$themeId=C,E._dispatchEvent("themeChange",{theme:C}),!C||typeof C=="string"){var T=C||this.$options.theme.initialValue;a.loadModule(["theme",T],M)}else M(C);function M(w){if(E.$themeId!=C)return F&&F();if(!w||!w.cssClass)throw new Error("couldn't load module "+C+" or it didn't call define");w.$id&&(E.$themeId=w.$id),v.importCssString(w.cssText,w.cssClass,E.container),E.theme&&v.removeCssClass(E.container,E.theme.cssClass);var L="padding"in w?w.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&L!=E.$padding&&E.setPadding(L),E.$theme=w.cssClass,E.theme=w,v.addCssClass(E.container,w.cssClass),v.setCssClass(E.container,"ace_dark",w.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:w}),F&&F()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(C,F){v.setCssClass(this.container,C,F!==!1)},g.prototype.unsetStyle=function(C){v.removeCssClass(this.container,C)},g.prototype.setCursorStyle=function(C){v.setStyle(this.scroller.style,"cursor",C)},g.prototype.setMouseCursor=function(C){v.setStyle(this.scroller.style,"cursor",C)},g.prototype.attachToShadowRoot=function(){v.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(C){var F=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,C===!0?(this.scrollBarV=new o(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}),this.$scrollDecorator=new b(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new f(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var C=this;this.$resizeTimer=s.delayedCall(function(){C.destroyed||C.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(F){var E=F[0].contentRect.width,T=F[0].contentRect.height;Math.abs(C.$size.width-E)>1||Math.abs(C.$size.height-T)>1?C.$resizeTimer.delay():C.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,h.implement(D.prototype,m),a.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){v.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var h=e("../lib/oop"),v=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,a=e("../config");function p(c){var f="importScripts('"+v.qualifyURL(c)+"');";try{return new Blob([f],{type:"application/javascript"})}catch{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new l;return o.append(f),o.getBlob("application/javascript")}}function i(c){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var f=p(c),l=window.URL||window.webkitURL,o=l.createObjectURL(f);return new Worker(o)}return new Worker(c)}var r=function(c){c.postMessage||(c=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=c,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){h.implement(this,s),this.$createWorkerFromOldConfig=function(c,f,l,o,d){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)o=o||a.moduleUrl(f,"worker");else{var _=this.$normalizePath;o=o||_(e.toUrl("ace/worker/worker.js",null,"_"));var m={};c.forEach(function(y){m[y]=_(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=i(o),d&&this.send("importScripts",d),this.$worker.postMessage({init:!0,tlns:m,module:f,classname:l}),this.$worker},this.onMessage=function(c){var f=c.data;switch(f.type){case"event":this._signal(f.name,{data:f.data});break;case"call":var l=this.callbacks[f.id];l&&(l(f.data),delete this.callbacks[f.id]);break;case"error":this.reportError(f.data);break;case"log":window.console&&console.log&&console.log.apply(console,f.data);break}},this.reportError=function(c){window.console&&console.error&&console.error(c)},this.$normalizePath=function(c){return v.qualifyURL(c)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(c){c.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(c,f){this.$worker.postMessage({command:c,args:f})},this.call=function(c,f,l){if(l){var o=this.callbackId++;this.callbacks[o]=l,f.push(o)}this.send(c,f)},this.emit=function(c,f){try{f.data&&f.data.err&&(f.data.err={message:f.data.err.message,stack:f.data.err.stack,code:f.data.err.code}),this.$worker&&this.$worker.postMessage({event:c,data:{data:f.data}})}catch(l){console.error(l.stack)}},this.attachToDocument=function(c){this.$doc&&this.terminate(),this.$doc=c,this.call("setValue",[c.getValue()]),c.on("change",this.changeListener,!0)},this.changeListener=function(c){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),c.action=="insert"?this.deltaQueue.push(c.start,c.lines):this.deltaQueue.push(c.start,c.end)},this.$sendDeltaQueue=function(){var c=this.deltaQueue;c&&(this.deltaQueue=null,c.length>50&&c.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:c}))}}).call(r.prototype);var u=function(c,f,l){var o=null,d=!1,_=Object.create(s),m=[],y=new r({messageBuffer:m,terminate:function(){},postMessage:function(S){m.push(S),o&&(d?setTimeout(b):b())}});y.setEmitSync=function(S){d=S};var b=function(){var S=m.shift();S.command?o[S.command].apply(o,S.args):S.event&&_._signal(S.event,S.data)};return _.postMessage=function(S){y.onMessage({data:S})},_.callback=function(S,D){this.postMessage({type:"call",id:D,data:S})},_.emit=function(S,D){this.postMessage({type:"event",name:S,data:D})},a.loadModule(["worker",f],function(S){for(o=new S[l](_);m.length;)b()}),y};t.UIWorkerClient=u,t.WorkerClient=r,t.createWorker=i});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var h=e("./range").Range,v=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),a=function(){function p(i,r,u,c,f,l){var o=this;this.length=r,this.session=i,this.doc=i.getDocument(),this.mainClass=f,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=c,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=u;var d=i.getUndoManager().$undoStack||i.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=d.length,this.setup(),i.selection.on("changeCursor",this.$onCursorChange)}return p.prototype.setup=function(){var i=this,r=this.doc,u=this.session;this.selectionBefore=u.selection.toJSON(),u.selection.inMultiSelectMode&&u.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var c=this.pos;c.$insertRight=!0,c.detach(),c.markerId=u.addMarker(new h(c.row,c.column,c.row,c.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(f){var l=r.createAnchor(f.row,f.column);l.$insertRight=!0,l.detach(),i.others.push(l)}),u.setUndoSelect(!1)},p.prototype.showOtherMarkers=function(){if(!this.othersActive){var i=this.session,r=this;this.othersActive=!0,this.others.forEach(function(u){u.markerId=i.addMarker(new h(u.row,u.column,u.row,u.column+r.length),r.othersClass,null,!1)})}},p.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var i=0;i<this.others.length;i++)this.session.removeMarker(this.others[i].markerId)}},p.prototype.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var r=i;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var u=i.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,c=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,f=r.start.column-this.pos.column;if(this.updateAnchors(i),c&&(this.length+=u),c&&!this.session.$fromUndo){if(i.action==="insert")for(var l=this.others.length-1;l>=0;l--){var o=this.others[l],d={row:o.row,column:o.column+f};this.doc.insertMergedLines(d,i.lines)}else if(i.action==="remove")for(var l=this.others.length-1;l>=0;l--){var o=this.others[l],d={row:o.row,column:o.column+f};this.doc.remove(new h(d.row,d.column,d.row,d.column-u))}}this.$updating=!1,this.updateMarkers()}},p.prototype.updateAnchors=function(i){this.pos.onChange(i);for(var r=this.others.length;r--;)this.others[r].onChange(i);this.updateMarkers()},p.prototype.updateMarkers=function(){if(!this.$updating){var i=this,r=this.session,u=function(f,l){r.removeMarker(f.markerId),f.markerId=r.addMarker(new h(f.row,f.column,f.row,f.column+i.length),l,null,!1)};u(this.pos,this.mainClass);for(var c=this.others.length;c--;)u(this.others[c],this.othersClass)}},p.prototype.onCursorChange=function(i){if(!(this.$updating||!this.session)){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",i)):(this.hideOtherMarkers(),this._emit("cursorLeave",i))}},p.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},p.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var i=this.session.getUndoManager(),r=(i.$undoStack||i.$undostack).length-this.$undoStackDepth,u=0;u<r;u++)i.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},p}();s.implement(a.prototype,v),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var h=e("../lib/event"),v=e("../lib/useragent");function s(p,i){return p.row==i.row&&p.column==i.column}function a(p){var i=p.domEvent,r=i.altKey,u=i.shiftKey,c=i.ctrlKey,f=p.getAccelKey(),l=p.getButton();if(c&&v.isMac&&(l=i.button),p.editor.inMultiSelectMode&&l==2){p.editor.textInput.onContextMenu(p.domEvent);return}if(!c&&!r&&!f){l===0&&p.editor.inMultiSelectMode&&p.editor.exitMultiSelectMode();return}if(l===0){var o=p.editor,d=o.selection,_=o.inMultiSelectMode,m=p.getDocumentPosition(),y=d.getCursor(),b=p.inSelection()||d.isEmpty()&&s(m,y),S=p.x,D=p.y,g=function(k){S=k.clientX,D=k.clientY},C=o.session,F=o.renderer.pixelToScreenCoordinates(S,D),E=F,T;if(o.$mouseHandler.$enableJumpToDef)c&&r||f&&r?T=u?"block":"add":r&&o.$blockSelectEnabled&&(T="block");else if(f&&!r){if(T="add",!_&&u)return}else r&&o.$blockSelectEnabled&&(T="block");if(T&&v.isMac&&i.ctrlKey&&o.$mouseHandler.cancelContextMenu(),T=="add"){if(!_&&b)return;if(!_){var M=d.toOrientedRange();o.addSelectionMarker(M)}var w=d.rangeList.rangeAtPoint(m);o.inVirtualSelectionMode=!0,u&&(w=null,M=d.ranges[0]||M,o.removeSelectionMarker(M)),o.once("mouseup",function(){var k=d.toOrientedRange();w&&k.isEmpty()&&s(w.cursor,k.cursor)?d.substractPoint(k.cursor):(u?d.substractPoint(M.cursor):M&&(o.removeSelectionMarker(M),d.addRange(M)),d.addRange(k)),o.inVirtualSelectionMode=!1})}else if(T=="block"){p.stop(),o.inVirtualSelectionMode=!0;var L,A=[],R=function(){var k=o.renderer.pixelToScreenCoordinates(S,D),H=C.screenToDocumentPosition(k.row,k.column,k.offsetX);s(E,k)&&s(H,d.lead)||(E=k,o.selection.moveToPosition(H),o.renderer.scrollCursorIntoView(),o.removeSelectionMarkers(A),A=d.rectangularRangeBlock(E,F),o.$mouseHandler.$clickSelection&&A.length==1&&A[0].isEmpty()&&(A[0]=o.$mouseHandler.$clickSelection.clone()),A.forEach(o.addSelectionMarker,o),o.updateSelectionMarkers())};_&&!f?d.toSingleRange():!_&&f&&(L=d.toOrientedRange(),o.addSelectionMarker(L)),u?F=C.documentToScreenPosition(d.lead):d.moveToPosition(m),E={row:-1,column:-1};var x=function(k){R(),clearInterval($),o.removeSelectionMarkers(A),A.length||(A=[d.toOrientedRange()]),L&&(o.removeSelectionMarker(L),d.toSingleRange(L));for(var H=0;H<A.length;H++)d.addRange(A[H]);o.inVirtualSelectionMode=!1,o.$mouseHandler.$clickSelection=null},I=R;h.capture(o.container,g,x);var $=setInterval(function(){I()},20);return p.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(v){v.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(v){v.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(v){v.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(v){v.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(v){v.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(v){v.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(v){v.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(v){v.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(v){v.multiSelect.rangeCount>1?v.multiSelect.joinSelections():v.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(v){v.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(v){v.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(v){v.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(v){v.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(v){return v&&v.inMultiSelectMode}}];var h=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new h(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var h=e("./range_list").RangeList,v=e("./range").Range,s=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,p=e("./lib/event"),i=e("./lib/lang"),r=e("./commands/multi_select_commands");t.commands=r.defaultCommands.concat(r.multiSelectCommands);var u=e("./search").Search,c=new u;function f(y,b,S){return c.$options.wrap=!0,c.$options.needle=b,c.$options.backwards=S==-1,c.find(y)}var l=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(l.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,b){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),b||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var b=this.rangeList.substractPoint(y);if(b)return this.$onRemoveRange(b),b[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();y.push(b),this.rangeCount=0}for(var S=y.length;S--;){var D=this.ranges.indexOf(y[S]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],b=[],S=0;S<y.length;S++){var D=y[S],g=D.start.row,C=D.end.row;if(g===C)b.push(D.clone());else{for(b.push(new v(g,D.start.column,g,this.session.getLine(g).length));++g<C;)b.push(this.getLineRange(g,!0));b.push(new v(C,0,C,D.end.column))}S==0&&!this.isBackwards()&&(b=b.reverse())}this.toSingleRange();for(var S=b.length;S--;)this.addRange(b[S])},this.joinSelections=function(){var y=this.rangeList.ranges,b=y[y.length-1],S=v.fromPoints(y[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,b=y[y.length-1],S=v.fromPoints(y[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),C=this.rectangularRangeBlock(D,g);C.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,b,S){var D=[],g=y.column<b.column;if(g)var C=y.column,F=b.column,E=y.offsetX,T=b.offsetX;else var C=b.column,F=y.column,E=b.offsetX,T=y.offsetX;var M=y.row<b.row;if(M)var w=y.row,L=b.row;else var w=b.row,L=y.row;C<0&&(C=0),w<0&&(w=0),w==L&&(S=!0);for(var A,R=w;R<=L;R++){var x=v.fromPoints(this.session.screenToDocumentPosition(R,C,E),this.session.screenToDocumentPosition(R,F,T));if(x.isEmpty()){if(A&&d(x.end,A))break;A=x.end}x.cursor=g?x.start:x.end,D.push(x)}if(M&&D.reverse(),!S){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var k=I;k>=$;k--)D[k].isEmpty()&&D.splice(k,1)}return D}}.call(s.prototype);var o=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var b=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",b),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var b=this.session.$selectionMarkers.indexOf(y);b!=-1&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var b=this.session.$selectionMarkers,S=y.length;S--;){var D=y[S];if(D.marker){this.session.removeMarker(D.marker);var g=b.indexOf(D);g!=-1&&b.splice(g,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(r.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(r.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var b=y.command,S=y.editor;if(S.multiSelect){if(b.multiSelectAction)b.multiSelectAction=="forEach"?D=S.forEachSelection(b,y.args):b.multiSelectAction=="forEachLine"?D=S.forEachSelection(b,y.args,!0):b.multiSelectAction=="single"?(S.exitMultiSelectMode(),D=b.exec(S,y.args||{})):D=b.multiSelectAction(S,y.args||{});else{var D=b.exec(S,y.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,b,S){if(!this.inVirtualSelectionMode){var D=S&&S.keepOrder,g=S==!0||S&&S.$byLines,C=this.session,F=this.selection,E=F.rangeList,T=(D?F:E).ranges,M;if(!T.length)return y.exec?y.exec(this,b||{}):y(this,b||{});var w=F._eventRegistry;F._eventRegistry={};var L=new s(C);this.inVirtualSelectionMode=!0;for(var A=T.length;A--;){if(g)for(;A>0&&T[A].start.row==T[A-1].end.row;)A--;L.fromOrientedRange(T[A]),L.index=A,this.selection=C.selection=L;var R=y.exec?y.exec(this,b||{}):y(this,b||{});!M&&R!==void 0&&(M=R),L.toOrientedRange(T[A])}L.detach(),this.selection=C.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=w,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var x=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),x&&x.from==x.to&&this.renderer.animateScrolling(x.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,S=[],D=0;D<b.length;D++)S.push(this.session.getTextRange(b[D]));var g=this.session.getDocument().getNewLineCharacter();y=S.join(g),y.length==(S.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)return;var D=b==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;D.row!=b.row||this.session.$clipPositionToDocument(D.row,D.column).column!=b.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,b,S){if(b=b||{},b.needle=y||b.needle,b.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();b.needle=this.session.getTextRange(D)}this.$search.set(b);var g=this.$search.findAll(this.session);if(!g.length)return 0;var C=this.multiSelect;S||C.toSingleRange(g[0]);for(var F=g.length;F--;)C.addRange(g[F],!0);return D&&C.rangeList.rangeAtPoint(D.start)&&C.addRange(D,!0),g.length},this.selectMoreLines=function(y,b){var S=this.selection.toOrientedRange(),D=S.cursor==S.end,g=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var C=this.session.screenToDocumentPosition(g.row+y,g.column);if(S.isEmpty())var E=C;else var F=this.session.documentToScreenPosition(D?S.end:S.start),E=this.session.screenToDocumentPosition(F.row+y,F.column);if(D){var T=v.fromPoints(C,E);T.cursor=T.start}else{var T=v.fromPoints(E,C);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(b)var M=S.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var b=this.session,S=b.multiSelect,D=S.ranges,g=D.length;g--;){var C=D[g];if(C.isEmpty()){var F=b.getWordRange(C.start.row,C.start.column);C.start.row=F.start.row,C.start.column=F.start.column,C.end.row=F.end.row,C.end.column=F.end.column}}S.mergeOverlappingRanges();for(var E=[],g=D.length;g--;){var C=D[g];E.unshift(b.getTextRange(C))}y<0?E.unshift(E.pop()):E.push(E.shift());for(var g=D.length;g--;){var C=D[g],T=C.clone();b.replace(C,E[g]),C.start.row=T.start.row,C.start.column=T.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(y,b,S){var D=this.session,g=D.multiSelect,C=g.toOrientedRange();if(!(C.isEmpty()&&(C=D.getWordRange(C.start.row,C.start.column),C.cursor=y==-1?C.start:C.end,this.multiSelect.addRange(C),S))){var F=D.getTextRange(C),E=f(D,F,y);E&&(E.cursor=y==-1?E.start:E.end,this.session.unfold(E),this.multiSelect.addRange(E),this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(C.cursor)}},this.alignCursors=function(){var y=this.session,b=y.multiSelect,S=b.ranges,D=-1,g=S.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!S.length||g.length==S.length-1){var C=this.selection.getRange(),F=C.start.row,E=C.end.row,T=F==E;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(E);while(/[=:]/.test(w)&&++E<M);do w=this.session.getLine(F);while(/[=:]/.test(w)&&--F>0);F<0&&(F=0),E>=M&&(E=M-1)}var L=this.session.removeFullLines(F,E);L=this.$reAlignText(L,T),this.session.insert({row:F,column:0},L.join(`
`)+`
`),T||(C.start.column=0,C.end.column=L[L.length-1].length),this.selection.setRange(C)}else{g.forEach(function(I){b.substractPoint(I.cursor)});var A=0,R=1/0,x=S.map(function(I){var $=I.cursor,k=y.getLine($.row),H=k.substr($.column).search(/\S/g);return H==-1&&(H=0),$.column>A&&(A=$.column),H<R&&(R=H),H});S.forEach(function(I,$){var k=I.cursor,H=A-k.column,U=x[$]-R;H>U?y.insert(k,i.stringRepeat(" ",H-U)):y.remove(new v(k.row,k.column,k.row,k.column-H+U)),I.start.column=I.end.column=A,I.start.row=I.end.row=k.row,I.cursor=I.end}),b.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,b){var S=!0,D=!0,g,C,F;return y.map(function(L){var A=L.match(/(\s*)(.*?)(\s*)([=:].*)/);return A?g==null?(g=A[1].length,C=A[2].length,F=A[3].length,A):(g+C+F!=A[1].length+A[2].length+A[3].length&&(D=!1),g!=A[1].length&&(S=!1),g>A[1].length&&(g=A[1].length),C<A[2].length&&(C=A[2].length),F>A[3].length&&(F=A[3].length),A):[L]}).map(b?T:S?D?M:T:w);function E(L){return i.stringRepeat(" ",L)}function T(L){return L[2]?E(g)+L[2]+E(C-L[2].length+F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}function M(L){return L[2]?E(g+C-L[2].length)+L[2]+E(F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}function w(L){return L[2]?E(g)+L[2]+E(F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}}}).call(o.prototype);function d(y,b){return y.row==b.row&&y.column==b.column}t.onSessionChange=function(y){var b=y.session;b&&!b.multiSelect&&(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b&&b.multiSelect;var S=y.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),b&&(b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),b.multiSelect.lead.on("change",this.$checkMultiselectChange),b.multiSelect.anchor.on("change",this.$checkMultiselectChange)),b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(r.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var b=y.textInput.getElement(),S=!1;p.addListener(b,"keydown",function(g){var C=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&C?S||(y.renderer.setMouseCursor("crosshair"),S=!0):S&&D()},y),p.addListener(b,"keyup",D,y),p.addListener(b,"blur",D,y);function D(g){S&&(y.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=_,e("./config").defineOptions(o.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("../../range").Range,v=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(s,a,p){var i=s.getLine(p);return this.foldingStartMarker.test(i)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(i)?"end":""},this.getFoldWidgetRange=function(s,a,p){return null},this.indentationBlock=function(s,a,p){var i=/\S/,r=s.getLine(a),u=r.search(i);if(u!=-1){for(var c=p||r.length,f=s.getLength(),l=a,o=a;++a<f;){var d=s.getLine(a).search(i);if(d!=-1){if(d<=u){var _=s.getTokenAt(a,0);if(!_||_.type!=="string")break}o=a}}if(o>l){var m=s.getLine(o).length;return new h(l,c,o,m)}}},this.openingBracketBlock=function(s,a,p,i,r){var u={row:p,column:i+1},c=s.$findClosingBracket(a,u,r);if(c){var f=s.foldWidgets[c.row];return f==null&&(f=s.getFoldWidget(c.row)),f=="start"&&c.row>u.row&&(c.row--,c.column=s.getLine(c.row).length),h.fromPoints(u,c)}},this.closingBracketBlock=function(s,a,p,i,r){var u={row:p,column:i},c=s.$findOpeningBracket(a,u);if(c)return c.column++,u.column--,h.fromPoints(c,u)}}).call(v.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var h=e("../line_widgets").LineWidgets,v=e("../lib/dom"),s=e("../range").Range,a=e("../config").nls;function p(r,u,c){for(var f=0,l=r.length-1;f<=l;){var o=f+l>>1,d=c(u,r[o]);if(d>0)f=o+1;else if(d<0)l=o-1;else return o}return-(f+1)}function i(r,u,c){var f=r.getAnnotations().sort(s.comparePoints);if(f.length){var l=p(f,{row:u,column:-1},s.comparePoints);l<0&&(l=-l-1),l>=f.length?l=c>0?0:f.length-1:l===0&&c<0&&(l=f.length-1);var o=f[l];if(!(!o||!c)){if(o.row===u){do o=f[l+=c];while(o&&o.row===u);if(!o)return f.slice()}var d=[];u=o.row;do d[c<0?"unshift":"push"](o),o=f[l+=c];while(o&&o.row==u);return d.length&&d}}}t.showErrorMarker=function(r,u){var c=r.session;c.widgetManager||(c.widgetManager=new h(c),c.widgetManager.attach(r));var f=r.getCursorPosition(),l=f.row,o=c.widgetManager.getWidgetsAtRow(l).filter(function(C){return C.type=="errorMarker"})[0];o?o.destroy():l-=u;var d=i(c,l,u),_;if(d){var m=d[0];f.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,f.row=m.row,_=r.renderer.$gutterLayer.$annotations[f.row]}else{if(o)return;_={text:[a("Looks good!")],className:"ace_ok"}}r.session.unfold(f.row),r.selection.moveToPosition(f);var y={row:f.row,fixedWidth:!0,coverGutter:!0,el:v.createElement("div"),type:"errorMarker"},b=y.el.appendChild(v.createElement("div")),S=y.el.appendChild(v.createElement("div"));S.className="error_widget_arrow "+_.className;var D=r.renderer.$cursorLayer.getPixelPosition(f).left;S.style.left=D+r.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",b.className="error_widget "+_.className,b.innerHTML=_.text.join("<br>"),b.appendChild(v.createElement("div"));var g=function(C,F,E){if(F===0&&(E==="esc"||E==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(g),c.widgetManager.removeLineWidget(y),r.off("changeSelection",y.destroy),r.off("changeSession",y.destroy),r.off("mouseup",y.destroy),r.off("change",y.destroy))},r.keyBinding.addKeyboardHandler(g),r.on("changeSelection",y.destroy),r.on("changeSession",y.destroy),r.on("mouseup",y.destroy),r.on("change",y.destroy),r.session.widgetManager.addLineWidget(y),y.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},v.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var h=e("./lib/dom"),v=e("./range").Range,s=e("./editor").Editor,a=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,i=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(r,u){if(typeof r=="string"){var c=r;if(r=document.getElementById(c),!r)throw new Error("ace.edit can't find div #"+c)}if(r&&r.env&&r.env.editor instanceof s)return r.env.editor;var f="";if(r&&/input|textarea/i.test(r.tagName)){var l=r;f=l.value,r=h.createElement("pre"),l.parentNode.replaceChild(r,l)}else r&&(f=r.textContent,r.innerHTML="");var o=t.createEditSession(f),d=new s(new i(r),o,u),_={document:o,editor:d,onResize:d.resize.bind(d,null)};return l&&(_.textarea=l),d.on("destroy",function(){_.editor.container.env=null}),d.container.env=d.env=_,d},t.createEditSession=function(r,u){var c=new a(r,u);return c.setUndoManager(new p),c},t.Range=v,t.Editor=s,t.EditSession=a,t.UndoManager=p,t.VirtualRenderer=i,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof kh=="object"&&typeof O1=="object"&&kh&&(kh.exports=t.ace)})})()});var kM=ht($M=>{"use strict";$M.supports=function(...t){let n=t.reduce((h,v)=>Object.assign(h,v),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var yo=ht((Gfe,OM)=>{"use strict";OM.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var NM=ht(Kh=>{"use strict";Kh.byteLength=nW;Kh.toByteArray=oW;Kh.fromByteArray=uW;var Ko=[],oo=[],tW=typeof Uint8Array<"u"?Uint8Array:Array,y0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Qu=0,HM=y0.length;Qu<HM;++Qu)Ko[Qu]=y0[Qu],oo[y0.charCodeAt(Qu)]=Qu;var Qu,HM;oo["-".charCodeAt(0)]=62;oo["_".charCodeAt(0)]=63;function PM(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var h=n===t?0:4-n%4;return[n,h]}function nW(e){var t=PM(e),n=t[0],h=t[1];return(n+h)*3/4-h}function rW(e,t,n){return(t+n)*3/4-n}function oW(e){var t,n=PM(e),h=n[0],v=n[1],s=new tW(rW(e,h,v)),a=0,p=v>0?h-4:h,i;for(i=0;i<p;i+=4)t=oo[e.charCodeAt(i)]<<18|oo[e.charCodeAt(i+1)]<<12|oo[e.charCodeAt(i+2)]<<6|oo[e.charCodeAt(i+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return v===2&&(t=oo[e.charCodeAt(i)]<<2|oo[e.charCodeAt(i+1)]>>4,s[a++]=t&255),v===1&&(t=oo[e.charCodeAt(i)]<<10|oo[e.charCodeAt(i+1)]<<4|oo[e.charCodeAt(i+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function aW(e){return Ko[e>>18&63]+Ko[e>>12&63]+Ko[e>>6&63]+Ko[e&63]}function iW(e,t,n){for(var h,v=[],s=t;s<n;s+=3)h=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),v.push(aW(h));return v.join("")}function uW(e){for(var t,n=e.length,h=n%3,v=[],s=16383,a=0,p=n-h;a<p;a+=s)v.push(iW(e,a,a+s>p?p:a+s));return h===1?(t=e[n-1],v.push(Ko[t>>2]+Ko[t<<4&63]+"==")):h===2&&(t=(e[n-2]<<8)+e[n-1],v.push(Ko[t>>10]+Ko[t>>4&63]+Ko[t<<2&63]+"=")),v.join("")}});var BM=ht(D0=>{D0.read=function(e,t,n,h,v){var s,a,p=v*8-h-1,i=(1<<p)-1,r=i>>1,u=-7,c=n?v-1:0,f=n?-1:1,l=e[t+c];for(c+=f,s=l&(1<<-u)-1,l>>=-u,u+=p;u>0;s=s*256+e[t+c],c+=f,u-=8);for(a=s&(1<<-u)-1,s>>=-u,u+=h;u>0;a=a*256+e[t+c],c+=f,u-=8);if(s===0)s=1-r;else{if(s===i)return a?NaN:(l?-1:1)*(1/0);a=a+Math.pow(2,h),s=s-r}return(l?-1:1)*a*Math.pow(2,s-h)};D0.write=function(e,t,n,h,v,s){var a,p,i,r=s*8-v-1,u=(1<<r)-1,c=u>>1,f=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=h?0:s-1,o=h?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(i=Math.pow(2,-a))<1&&(a--,i*=2),a+c>=1?t+=f/i:t+=f*Math.pow(2,1-c),t*i>=2&&(a++,i/=2),a+c>=u?(p=0,a=u):a+c>=1?(p=(t*i-1)*Math.pow(2,v),a=a+c):(p=t*Math.pow(2,c-1)*Math.pow(2,v),a=0));v>=8;e[n+l]=p&255,l+=o,p/=256,v-=8);for(a=a<<v|p,r+=v;r>0;e[n+l]=a&255,l+=o,a/=256,r-=8);e[n+l-o]|=d*128}});var Yh=ht(Ec=>{"use strict";var b0=NM(),wc=BM(),WM=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ec.Buffer=Y;Ec.SlowBuffer=pW;Ec.INSPECT_MAX_BYTES=50;var Qh=2147483647;Ec.kMaxLength=Qh;Y.TYPED_ARRAY_SUPPORT=sW();!Y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function sW(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(Y.prototype,"parent",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.buffer}});Object.defineProperty(Y.prototype,"offset",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.byteOffset}});function $a(e){if(e>Qh)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,Y.prototype),t}function Y(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E0(e)}return VM(e,t,n)}Y.poolSize=8192;function VM(e,t,n){if(typeof e=="string")return lW(e,t);if(ArrayBuffer.isView(e))return fW(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Qo(e,ArrayBuffer)||e&&Qo(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Qo(e,SharedArrayBuffer)||e&&Qo(e.buffer,SharedArrayBuffer)))return w0(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return Y.from(h,t,n);let v=dW(e);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return Y.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}Y.from=function(e,t,n){return VM(e,t,n)};Object.setPrototypeOf(Y.prototype,Uint8Array.prototype);Object.setPrototypeOf(Y,Uint8Array);function GM(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function cW(e,t,n){return GM(e),e<=0?$a(e):t!==void 0?typeof n=="string"?$a(e).fill(t,n):$a(e).fill(t):$a(e)}Y.alloc=function(e,t,n){return cW(e,t,n)};function E0(e){return GM(e),$a(e<0?0:T0(e)|0)}Y.allocUnsafe=function(e){return E0(e)};Y.allocUnsafeSlow=function(e){return E0(e)};function lW(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Y.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=jM(e,t)|0,h=$a(n),v=h.write(e,t);return v!==n&&(h=h.slice(0,v)),h}function C0(e){let t=e.length<0?0:T0(e.length)|0,n=$a(t);for(let h=0;h<t;h+=1)n[h]=e[h]&255;return n}function fW(e){if(Qo(e,Uint8Array)){let t=new Uint8Array(e);return w0(t.buffer,t.byteOffset,t.byteLength)}return C0(e)}function w0(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let h;return t===void 0&&n===void 0?h=new Uint8Array(e):n===void 0?h=new Uint8Array(e,t):h=new Uint8Array(e,t,n),Object.setPrototypeOf(h,Y.prototype),h}function dW(e){if(Y.isBuffer(e)){let t=T0(e.length)|0,n=$a(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||L0(e.length)?$a(0):C0(e);if(e.type==="Buffer"&&Array.isArray(e.data))return C0(e.data)}function T0(e){if(e>=Qh)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Qh.toString(16)+" bytes");return e|0}function pW(e){return+e!=e&&(e=0),Y.alloc(+e)}Y.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Y.prototype};Y.compare=function(t,n){if(Qo(t,Uint8Array)&&(t=Y.from(t,t.offset,t.byteLength)),Qo(n,Uint8Array)&&(n=Y.from(n,n.offset,n.byteLength)),!Y.isBuffer(t)||!Y.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let h=t.length,v=n.length;for(let s=0,a=Math.min(h,v);s<a;++s)if(t[s]!==n[s]){h=t[s],v=n[s];break}return h<v?-1:v<h?1:0};Y.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Y.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Y.alloc(0);let h;if(n===void 0)for(n=0,h=0;h<t.length;++h)n+=t[h].length;let v=Y.allocUnsafe(n),s=0;for(h=0;h<t.length;++h){let a=t[h];if(Qo(a,Uint8Array))s+a.length>v.length?(Y.isBuffer(a)||(a=Y.from(a)),a.copy(v,s)):Uint8Array.prototype.set.call(v,a,s);else if(Y.isBuffer(a))a.copy(v,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return v};function jM(e,t){if(Y.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Qo(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&n===0)return 0;let v=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return S0(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return nL(e).length;default:if(v)return h?-1:S0(e).length;t=(""+t).toLowerCase(),v=!0}}Y.byteLength=jM;function hW(e,t,n){let h=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return SW(this,t,n);case"utf8":case"utf-8":return KM(this,t,n);case"ascii":return CW(this,t,n);case"latin1":case"binary":return wW(this,t,n);case"base64":return DW(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return EW(this,t,n);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}Y.prototype._isBuffer=!0;function Xu(e,t,n){let h=e[t];e[t]=e[n],e[n]=h}Y.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Xu(this,n,n+1);return this};Y.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Xu(this,n,n+3),Xu(this,n+1,n+2);return this};Y.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Xu(this,n,n+7),Xu(this,n+1,n+6),Xu(this,n+2,n+5),Xu(this,n+3,n+4);return this};Y.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?KM(this,0,t):hW.apply(this,arguments)};Y.prototype.toLocaleString=Y.prototype.toString;Y.prototype.equals=function(t){if(!Y.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Y.compare(this,t)===0};Y.prototype.inspect=function(){let t="",n=Ec.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};WM&&(Y.prototype[WM]=Y.prototype.inspect);Y.prototype.compare=function(t,n,h,v,s){if(Qo(t,Uint8Array)&&(t=Y.from(t,t.offset,t.byteLength)),!Y.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),h===void 0&&(h=t?t.length:0),v===void 0&&(v=0),s===void 0&&(s=this.length),n<0||h>t.length||v<0||s>this.length)throw new RangeError("out of range index");if(v>=s&&n>=h)return 0;if(v>=s)return-1;if(n>=h)return 1;if(n>>>=0,h>>>=0,v>>>=0,s>>>=0,this===t)return 0;let a=s-v,p=h-n,i=Math.min(a,p),r=this.slice(v,s),u=t.slice(n,h);for(let c=0;c<i;++c)if(r[c]!==u[c]){a=r[c],p=u[c];break}return a<p?-1:p<a?1:0};function JM(e,t,n,h,v){if(e.length===0)return-1;if(typeof n=="string"?(h=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,L0(n)&&(n=v?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(v)return-1;n=e.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=Y.from(t,h)),Y.isBuffer(t))return t.length===0?-1:UM(e,t,n,h,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):UM(e,[t],n,h,v);throw new TypeError("val must be string, number or Buffer")}function UM(e,t,n,h,v){let s=1,a=e.length,p=t.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,p/=2,n/=2}function i(u,c){return s===1?u[c]:u.readUInt16BE(c*s)}let r;if(v){let u=-1;for(r=n;r<a;r++)if(i(e,r)===i(t,u===-1?0:r-u)){if(u===-1&&(u=r),r-u+1===p)return u*s}else u!==-1&&(r-=r-u),u=-1}else for(n+p>a&&(n=a-p),r=n;r>=0;r--){let u=!0;for(let c=0;c<p;c++)if(i(e,r+c)!==i(t,c)){u=!1;break}if(u)return r}return-1}Y.prototype.includes=function(t,n,h){return this.indexOf(t,n,h)!==-1};Y.prototype.indexOf=function(t,n,h){return JM(this,t,n,h,!0)};Y.prototype.lastIndexOf=function(t,n,h){return JM(this,t,n,h,!1)};function _W(e,t,n,h){n=Number(n)||0;let v=e.length-n;h?(h=Number(h),h>v&&(h=v)):h=v;let s=t.length;h>s/2&&(h=s/2);let a;for(a=0;a<h;++a){let p=parseInt(t.substr(a*2,2),16);if(L0(p))return a;e[n+a]=p}return a}function vW(e,t,n,h){return Xh(S0(t,e.length-n),e,n,h)}function mW(e,t,n,h){return Xh(FW(t),e,n,h)}function gW(e,t,n,h){return Xh(nL(t),e,n,h)}function yW(e,t,n,h){return Xh(AW(t,e.length-n),e,n,h)}Y.prototype.write=function(t,n,h,v){if(n===void 0)v="utf8",h=this.length,n=0;else if(h===void 0&&typeof n=="string")v=n,h=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(h)?(h=h>>>0,v===void 0&&(v="utf8")):(v=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-n;if((h===void 0||h>s)&&(h=s),t.length>0&&(h<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let a=!1;for(;;)switch(v){case"hex":return _W(this,t,n,h);case"utf8":case"utf-8":return vW(this,t,n,h);case"ascii":case"latin1":case"binary":return mW(this,t,n,h);case"base64":return gW(this,t,n,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yW(this,t,n,h);default:if(a)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),a=!0}};Y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function DW(e,t,n){return t===0&&n===e.length?b0.fromByteArray(e):b0.fromByteArray(e.slice(t,n))}function KM(e,t,n){n=Math.min(e.length,n);let h=[],v=t;for(;v<n;){let s=e[v],a=null,p=s>239?4:s>223?3:s>191?2:1;if(v+p<=n){let i,r,u,c;switch(p){case 1:s<128&&(a=s);break;case 2:i=e[v+1],(i&192)===128&&(c=(s&31)<<6|i&63,c>127&&(a=c));break;case 3:i=e[v+1],r=e[v+2],(i&192)===128&&(r&192)===128&&(c=(s&15)<<12|(i&63)<<6|r&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:i=e[v+1],r=e[v+2],u=e[v+3],(i&192)===128&&(r&192)===128&&(u&192)===128&&(c=(s&15)<<18|(i&63)<<12|(r&63)<<6|u&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,p=1):a>65535&&(a-=65536,h.push(a>>>10&1023|55296),a=56320|a&1023),h.push(a),v+=p}return bW(h)}var qM=4096;function bW(e){let t=e.length;if(t<=qM)return String.fromCharCode.apply(String,e);let n="",h=0;for(;h<t;)n+=String.fromCharCode.apply(String,e.slice(h,h+=qM));return n}function CW(e,t,n){let h="";n=Math.min(e.length,n);for(let v=t;v<n;++v)h+=String.fromCharCode(e[v]&127);return h}function wW(e,t,n){let h="";n=Math.min(e.length,n);for(let v=t;v<n;++v)h+=String.fromCharCode(e[v]);return h}function SW(e,t,n){let h=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>h)&&(n=h);let v="";for(let s=t;s<n;++s)v+=xW[e[s]];return v}function EW(e,t,n){let h=e.slice(t,n),v="";for(let s=0;s<h.length-1;s+=2)v+=String.fromCharCode(h[s]+h[s+1]*256);return v}Y.prototype.slice=function(t,n){let h=this.length;t=~~t,n=n===void 0?h:~~n,t<0?(t+=h,t<0&&(t=0)):t>h&&(t=h),n<0?(n+=h,n<0&&(n=0)):n>h&&(n=h),n<t&&(n=t);let v=this.subarray(t,n);return Object.setPrototypeOf(v,Y.prototype),v};function Rn(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}Y.prototype.readUintLE=Y.prototype.readUIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||Rn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return v};Y.prototype.readUintBE=Y.prototype.readUIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||Rn(t,n,this.length);let v=this[t+--n],s=1;for(;n>0&&(s*=256);)v+=this[t+--n]*s;return v};Y.prototype.readUint8=Y.prototype.readUInt8=function(t,n){return t=t>>>0,n||Rn(t,1,this.length),this[t]};Y.prototype.readUint16LE=Y.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||Rn(t,2,this.length),this[t]|this[t+1]<<8};Y.prototype.readUint16BE=Y.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||Rn(t,2,this.length),this[t]<<8|this[t+1]};Y.prototype.readUint32LE=Y.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Y.prototype.readUint32BE=Y.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Y.prototype.readBigUInt64LE=Gi(function(t){t=t>>>0,Sc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&Lf(t,this.length-8);let v=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,s=this[++t]+this[++t]*2**8+this[++t]*2**16+h*2**24;return BigInt(v)+(BigInt(s)<<BigInt(32))});Y.prototype.readBigUInt64BE=Gi(function(t){t=t>>>0,Sc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&Lf(t,this.length-8);let v=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h;return(BigInt(v)<<BigInt(32))+BigInt(s)});Y.prototype.readIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||Rn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return s*=128,v>=s&&(v-=Math.pow(2,8*n)),v};Y.prototype.readIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||Rn(t,n,this.length);let v=n,s=1,a=this[t+--v];for(;v>0&&(s*=256);)a+=this[t+--v]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*n)),a};Y.prototype.readInt8=function(t,n){return t=t>>>0,n||Rn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Y.prototype.readInt16LE=function(t,n){t=t>>>0,n||Rn(t,2,this.length);let h=this[t]|this[t+1]<<8;return h&32768?h|4294901760:h};Y.prototype.readInt16BE=function(t,n){t=t>>>0,n||Rn(t,2,this.length);let h=this[t+1]|this[t]<<8;return h&32768?h|4294901760:h};Y.prototype.readInt32LE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Y.prototype.readInt32BE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Y.prototype.readBigInt64LE=Gi(function(t){t=t>>>0,Sc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&Lf(t,this.length-8);let v=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(h<<24);return(BigInt(v)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Y.prototype.readBigInt64BE=Gi(function(t){t=t>>>0,Sc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&Lf(t,this.length-8);let v=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(v)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h)});Y.prototype.readFloatLE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),wc.read(this,t,!0,23,4)};Y.prototype.readFloatBE=function(t,n){return t=t>>>0,n||Rn(t,4,this.length),wc.read(this,t,!1,23,4)};Y.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||Rn(t,8,this.length),wc.read(this,t,!0,52,8)};Y.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||Rn(t,8,this.length),wc.read(this,t,!1,52,8)};function Er(e,t,n,h,v,s){if(!Y.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<s)throw new RangeError('"value" argument is out of bounds');if(n+h>e.length)throw new RangeError("Index out of range")}Y.prototype.writeUintLE=Y.prototype.writeUIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){let p=Math.pow(2,8*h)-1;Er(this,t,n,h,p,0)}let s=1,a=0;for(this[n]=t&255;++a<h&&(s*=256);)this[n+a]=t/s&255;return n+h};Y.prototype.writeUintBE=Y.prototype.writeUIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){let p=Math.pow(2,8*h)-1;Er(this,t,n,h,p,0)}let s=h-1,a=1;for(this[n+s]=t&255;--s>=0&&(a*=256);)this[n+s]=t/a&255;return n+h};Y.prototype.writeUint8=Y.prototype.writeUInt8=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,1,255,0),this[n]=t&255,n+1};Y.prototype.writeUint16LE=Y.prototype.writeUInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};Y.prototype.writeUint16BE=Y.prototype.writeUInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};Y.prototype.writeUint32LE=Y.prototype.writeUInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};Y.prototype.writeUint32BE=Y.prototype.writeUInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function QM(e,t,n,h,v){tL(t,h,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,n}function XM(e,t,n,h,v){tL(t,h,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s=s>>8,e[n+6]=s,s=s>>8,e[n+5]=s,s=s>>8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a=a>>8,e[n+2]=a,a=a>>8,e[n+1]=a,a=a>>8,e[n]=a,n+8}Y.prototype.writeBigUInt64LE=Gi(function(t,n=0){return QM(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeBigUInt64BE=Gi(function(t,n=0){return XM(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*h-1);Er(this,t,n,h,i-1,-i)}let s=0,a=1,p=0;for(this[n]=t&255;++s<h&&(a*=256);)t<0&&p===0&&this[n+s-1]!==0&&(p=1),this[n+s]=(t/a>>0)-p&255;return n+h};Y.prototype.writeIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){let i=Math.pow(2,8*h-1);Er(this,t,n,h,i-1,-i)}let s=h-1,a=1,p=0;for(this[n+s]=t&255;--s>=0&&(a*=256);)t<0&&p===0&&this[n+s+1]!==0&&(p=1),this[n+s]=(t/a>>0)-p&255;return n+h};Y.prototype.writeInt8=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};Y.prototype.writeInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};Y.prototype.writeInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};Y.prototype.writeInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};Y.prototype.writeInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||Er(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};Y.prototype.writeBigInt64LE=Gi(function(t,n=0){return QM(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Y.prototype.writeBigInt64BE=Gi(function(t,n=0){return XM(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function YM(e,t,n,h,v,s){if(n+h>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ZM(e,t,n,h,v){return t=+t,n=n>>>0,v||YM(e,t,n,4,34028234663852886e22,-34028234663852886e22),wc.write(e,t,n,h,23,4),n+4}Y.prototype.writeFloatLE=function(t,n,h){return ZM(this,t,n,!0,h)};Y.prototype.writeFloatBE=function(t,n,h){return ZM(this,t,n,!1,h)};function eL(e,t,n,h,v){return t=+t,n=n>>>0,v||YM(e,t,n,8,17976931348623157e292,-17976931348623157e292),wc.write(e,t,n,h,52,8),n+8}Y.prototype.writeDoubleLE=function(t,n,h){return eL(this,t,n,!0,h)};Y.prototype.writeDoubleBE=function(t,n,h){return eL(this,t,n,!1,h)};Y.prototype.copy=function(t,n,h,v){if(!Y.isBuffer(t))throw new TypeError("argument should be a Buffer");if(h||(h=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<h&&(v=h),v===h||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-h&&(v=t.length-n+h);let s=v-h;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,h,v):Uint8Array.prototype.set.call(t,this.subarray(h,v),n),s};Y.prototype.fill=function(t,n,h,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,h=this.length):typeof h=="string"&&(v=h,h=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!Y.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){let a=t.charCodeAt(0);(v==="utf8"&&a<128||v==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<h)throw new RangeError("Out of range index");if(h<=n)return this;n=n>>>0,h=h===void 0?this.length:h>>>0,t||(t=0);let s;if(typeof t=="number")for(s=n;s<h;++s)this[s]=t;else{let a=Y.isBuffer(t)?t:Y.from(t,v),p=a.length;if(p===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<h-n;++s)this[s+n]=a[s%p]}return this};var Cc={};function M0(e,t,n){Cc[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}M0("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);M0("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);M0("ERR_OUT_OF_RANGE",function(e,t,n){let h=`The value of "${e}" is out of range.`,v=n;return Number.isInteger(n)&&Math.abs(n)>2**32?v=zM(String(n)):typeof n=="bigint"&&(v=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(v=zM(v)),v+="n"),h+=` It must be ${t}. Received ${v}`,h},RangeError);function zM(e){let t="",n=e.length,h=e[0]==="-"?1:0;for(;n>=h+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function TW(e,t,n){Sc(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&Lf(t,e.length-(n+1))}function tL(e,t,n,h,v,s){if(e>n||e<t){let a=typeof t=="bigint"?"n":"",p;throw s>3?t===0||t===BigInt(0)?p=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:p=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:p=`>= ${t}${a} and <= ${n}${a}`,new Cc.ERR_OUT_OF_RANGE("value",p,e)}TW(h,v,s)}function Sc(e,t){if(typeof e!="number")throw new Cc.ERR_INVALID_ARG_TYPE(t,"number",e)}function Lf(e,t,n){throw Math.floor(e)!==e?(Sc(e,n),new Cc.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new Cc.ERR_BUFFER_OUT_OF_BOUNDS:new Cc.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var MW=/[^+/0-9A-Za-z-_]/g;function LW(e){if(e=e.split("=")[0],e=e.trim().replace(MW,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function S0(e,t){t=t||1/0;let n,h=e.length,v=null,s=[];for(let a=0;a<h;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===h){(t-=3)>-1&&s.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&s.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function FW(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function AW(e,t){let n,h,v,s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),h=n>>8,v=n%256,s.push(v),s.push(h);return s}function nL(e){return b0.toByteArray(LW(e))}function Xh(e,t,n,h){let v;for(v=0;v<h&&!(v+n>=t.length||v>=e.length);++v)t[v+n]=e[v];return v}function Qo(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function L0(e){return e!==e}var xW=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let h=n*16;for(let v=0;v<16;++v)t[h+v]=e[n]+e[v]}return t}();function Gi(e){return typeof BigInt>"u"?IW:e}function IW(){throw new Error("BigInt not supported")}});var A0=ht((Xfe,rL)=>{"use strict";var F0=null;rL.exports=function(){return F0===null&&(F0={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),F0}});var R0=ht(oL=>{"use strict";var x0=yo(),RW=new Set(["buffer","view","utf8"]),I0=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!RW.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new x0(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new x0(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new x0(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};oL.Encoding=I0});var H0=ht(Zh=>{"use strict";var{Buffer:k0}=Yh()||{},{Encoding:O0}=R0(),$W=A0(),Ff=class extends O0{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new Af({encode:this.encode,decode:t=>this.decode(k0.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Af=class extends O0{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new Ff({encode:t=>{let n=this.encode(t);return k0.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},$0=class extends O0{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new Ff({encode:t=>k0.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=$W();return new Af({encode:h=>t.encode(this.encode(h)),decode:h=>this.decode(n.decode(h)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};Zh.BufferFormat=Ff;Zh.ViewFormat=Af;Zh.UTF8Format=$0});var sL=ht(Yu=>{"use strict";var{Buffer:Yn}=Yh()||{Buffer:{isBuffer:()=>!1}},{textEncoder:iL,textDecoder:aL}=A0()(),{BufferFormat:xf,ViewFormat:P0,UTF8Format:uL}=H0(),e_=e=>e;Yu.utf8=new uL({encode:function(e){return Yn.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?aL.decode(e):String(e)},decode:e_,name:"utf8",createViewTranscoder(){return new P0({encode:function(e){return ArrayBuffer.isView(e)?e:iL.encode(e)},decode:function(e){return aL.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new xf({encode:function(e){return Yn.isBuffer(e)?e:ArrayBuffer.isView(e)?Yn.from(e.buffer,e.byteOffset,e.byteLength):Yn.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Yu.json=new uL({encode:JSON.stringify,decode:JSON.parse,name:"json"});Yu.buffer=new xf({encode:function(e){return Yn.isBuffer(e)?e:ArrayBuffer.isView(e)?Yn.from(e.buffer,e.byteOffset,e.byteLength):Yn.from(String(e),"utf8")},decode:e_,name:"buffer",createViewTranscoder(){return new P0({encode:function(e){return ArrayBuffer.isView(e)?e:Yn.from(String(e),"utf8")},decode:function(e){return Yn.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Yu.view=new P0({encode:function(e){return ArrayBuffer.isView(e)?e:iL.encode(e)},decode:e_,name:"view",createBufferTranscoder(){return new xf({encode:function(e){return Yn.isBuffer(e)?e:ArrayBuffer.isView(e)?Yn.from(e.buffer,e.byteOffset,e.byteLength):Yn.from(String(e),"utf8")},decode:e_,name:`${this.name}+buffer`})}});Yu.hex=new xf({encode:function(e){return Yn.isBuffer(e)?e:Yn.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Yu.base64=new xf({encode:function(e){return Yn.isBuffer(e)?e:Yn.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var fL=ht(lL=>{"use strict";var cL=yo(),n_=sL(),{Encoding:kW}=R0(),{BufferFormat:OW,ViewFormat:HW,UTF8Format:PW}=H0(),If=Symbol("formats"),t_=Symbol("encodings"),NW=new Set(["buffer","view","utf8"]),N0=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>NW.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[t_]=new Map,this[If]=new Set(t);for(let n in n_)try{this.encoding(n)}catch(h){if(h.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw h}}encodings(){return Array.from(new Set(this[t_].values()))}encoding(t){let n=this[t_].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=qW[t],!n)throw new cL(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=BW(t)}let{name:h,format:v}=n;if(!this[If].has(v))if(this[If].has("view"))n=n.createViewTranscoder();else if(this[If].has("buffer"))n=n.createBufferTranscoder();else if(this[If].has("utf8"))n=n.createUTF8Transcoder();else throw new cL(`Encoding '${h}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[t,h,n.name,n.commonName])this[t_].set(s,n)}return n}};lL.Transcoder=N0;function BW(e){if(e instanceof kW)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${zW++}`;switch(WW(e)){case"view":return new HW({...e,name:n});case"utf8":return new PW({...e,name:n});case"buffer":return new OW({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function WW(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var UW={binary:n_.buffer,"utf-8":n_.utf8},qW={...n_,...UW},zW=0});var CL=ht((nde,B0)=>{"use strict";var Tc=typeof Reflect=="object"?Reflect:null,dL=Tc&&typeof Tc.apply=="function"?Tc.apply:function(t,n,h){return Function.prototype.apply.call(t,n,h)},r_;Tc&&typeof Tc.ownKeys=="function"?r_=Tc.ownKeys:Object.getOwnPropertySymbols?r_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:r_=function(t){return Object.getOwnPropertyNames(t)};function VW(e){console&&console.warn&&console.warn(e)}var hL=Number.isNaN||function(t){return t!==t};function zt(){zt.init.call(this)}B0.exports=zt;B0.exports.once=KW;zt.EventEmitter=zt;zt.prototype._events=void 0;zt.prototype._eventsCount=0;zt.prototype._maxListeners=void 0;var pL=10;function o_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(zt,"defaultMaxListeners",{enumerable:!0,get:function(){return pL},set:function(e){if(typeof e!="number"||e<0||hL(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");pL=e}});zt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};zt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||hL(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function _L(e){return e._maxListeners===void 0?zt.defaultMaxListeners:e._maxListeners}zt.prototype.getMaxListeners=function(){return _L(this)};zt.prototype.emit=function(t){for(var n=[],h=1;h<arguments.length;h++)n.push(arguments[h]);var v=t==="error",s=this._events;if(s!==void 0)v=v&&s.error===void 0;else if(!v)return!1;if(v){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var p=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw p.context=a,p}var i=s[t];if(i===void 0)return!1;if(typeof i=="function")dL(i,this,n);else for(var r=i.length,u=DL(i,r),h=0;h<r;++h)dL(u[h],this,n);return!0};function vL(e,t,n,h){var v,s,a;if(o_(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=h?[n,a]:[a,n]:h?a.unshift(n):a.push(n),v=_L(e),v>0&&a.length>v&&!a.warned){a.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=a.length,VW(p)}return e}zt.prototype.addListener=function(t,n){return vL(this,t,n,!1)};zt.prototype.on=zt.prototype.addListener;zt.prototype.prependListener=function(t,n){return vL(this,t,n,!0)};function GW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function mL(e,t,n){var h={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},v=GW.bind(h);return v.listener=n,h.wrapFn=v,v}zt.prototype.once=function(t,n){return o_(n),this.on(t,mL(this,t,n)),this};zt.prototype.prependOnceListener=function(t,n){return o_(n),this.prependListener(t,mL(this,t,n)),this};zt.prototype.removeListener=function(t,n){var h,v,s,a,p;if(o_(n),v=this._events,v===void 0)return this;if(h=v[t],h===void 0)return this;if(h===n||h.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete v[t],v.removeListener&&this.emit("removeListener",t,h.listener||n));else if(typeof h!="function"){for(s=-1,a=h.length-1;a>=0;a--)if(h[a]===n||h[a].listener===n){p=h[a].listener,s=a;break}if(s<0)return this;s===0?h.shift():jW(h,s),h.length===1&&(v[t]=h[0]),v.removeListener!==void 0&&this.emit("removeListener",t,p||n)}return this};zt.prototype.off=zt.prototype.removeListener;zt.prototype.removeAllListeners=function(t){var n,h,v;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[t]),this;if(arguments.length===0){var s=Object.keys(h),a;for(v=0;v<s.length;++v)a=s[v],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=h[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(v=n.length-1;v>=0;v--)this.removeListener(t,n[v]);return this};function gL(e,t,n){var h=e._events;if(h===void 0)return[];var v=h[t];return v===void 0?[]:typeof v=="function"?n?[v.listener||v]:[v]:n?JW(v):DL(v,v.length)}zt.prototype.listeners=function(t){return gL(this,t,!0)};zt.prototype.rawListeners=function(t){return gL(this,t,!1)};zt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):yL.call(e,t)};zt.prototype.listenerCount=yL;function yL(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}zt.prototype.eventNames=function(){return this._eventsCount>0?r_(this._events):[]};function DL(e,t){for(var n=new Array(t),h=0;h<t;++h)n[h]=e[h];return n}function jW(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function JW(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function KW(e,t){return new Promise(function(n,h){function v(a){e.removeListener(t,s),h(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",v),n([].slice.call(arguments))}bL(e,t,s,{once:!0}),t!=="error"&&QW(e,v,{once:!0})})}function QW(e,t,n){typeof e.on=="function"&&bL(e,"error",t,n)}function bL(e,t,n,h){if(typeof e.on=="function")h.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function v(s){h.once&&e.removeEventListener(t,v),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var SL=ht((rde,wL)=>{wL.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var Rf=ht(W0=>{"use strict";var EL=SL();W0.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(h,v){e=function(s,a){s?v(s):h(a)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};W0.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){EL(()=>t(null,n))}).catch(function(n){EL(()=>t(n))})}});var a_=ht(U0=>{"use strict";U0.getCallback=function(e,t){return typeof e=="function"?e:t};U0.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Yi=ht(c_=>{"use strict";var{fromCallback:q0}=Rf(),Br=yo(),{getOptions:z0,getCallback:TL}=a_(),Zu=Symbol("promise"),Mc=Symbol("callback"),Xo=Symbol("working"),es=Symbol("handleOne"),ka=Symbol("handleMany"),V0=Symbol("autoClose"),Qi=Symbol("finishWork"),Yo=Symbol("returnMany"),ji=Symbol("closing"),$f=Symbol("handleClose"),i_=Symbol("closed"),kf=Symbol("closeCallbacks"),Ki=Symbol("keyEncoding"),ts=Symbol("valueEncoding"),G0=Symbol("abortOnClose"),u_=Symbol("legacy"),j0=Symbol("keys"),J0=Symbol("values"),Ji=Symbol("limit"),ao=Symbol("count"),s_=Object.freeze({}),XW=()=>{},ML=!1,Of=class{constructor(t,n,h){if(typeof t!="object"||t===null){let v=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${v}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[i_]=!1,this[kf]=[],this[Xo]=!1,this[ji]=!1,this[V0]=!1,this[Mc]=null,this[es]=this[es].bind(this),this[ka]=this[ka].bind(this),this[$f]=this[$f].bind(this),this[Ki]=n[Ki],this[ts]=n[ts],this[u_]=h,this[Ji]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[ao]=0,this[G0]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[ao]}get limit(){return this[Ji]}next(t){let n;if(t===void 0)n=new Promise((h,v)=>{t=(s,a,p)=>{s?v(s):this[u_]?a===void 0&&p===void 0?h():h([a,p]):h(a)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[ji]?this.nextTick(t,new Br("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xo]?this.nextTick(t,new Br("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Xo]=!0,this[Mc]=t,this[ao]>=this[Ji]?this.nextTick(this[es],null):this._next(this[es])),n}_next(t){this.nextTick(t)}nextv(t,n,h){return h=TL(n,h),h=q0(h,Zu),n=z0(n,s_),Number.isInteger(t)?(this[ji]?this.nextTick(h,new Br("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xo]?this.nextTick(h,new Br("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Ji]<1/0&&(t=Math.min(t,this[Ji]-this[ao])),this[Xo]=!0,this[Mc]=h,t<=0?this.nextTick(this[ka],null,[]):this._nextv(t,n,this[ka])),h[Zu]):(this.nextTick(h,new TypeError("The first argument 'size' must be an integer")),h[Zu])}_nextv(t,n,h){let v=[],s=(a,p,i)=>{if(a)return h(a);if(this[u_]?p===void 0&&i===void 0:p===void 0)return h(null,v);v.push(this[u_]?[p,i]:p),v.length===t?h(null,v):this._next(s)};this._next(s)}all(t,n){return n=TL(t,n),n=q0(n,Zu),t=z0(t,s_),this[ji]?this.nextTick(n,new Br("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Xo]?this.nextTick(n,new Br("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Xo]=!0,this[Mc]=n,this[V0]=!0,this[ao]>=this[Ji]?this.nextTick(this[ka],null,[]):this._all(t,this[ka])),n[Zu]}_all(t,n){let h=this[ao],v=[],s=()=>{let p=this[Ji]<1/0?Math.min(1e3,this[Ji]-h):1e3;p<=0?this.nextTick(n,null,v):this._nextv(p,s_,a)},a=(p,i)=>{p?n(p):i.length===0?n(null,v):(v.push.apply(v,i),h+=i.length,s())};s()}[Qi](){let t=this[Mc];return this[G0]&&t===null?XW:(this[Xo]=!1,this[Mc]=null,this[ji]&&this._close(this[$f]),t)}[Yo](t,n,h){this[V0]?this.close(t.bind(null,n,h)):t(n,h)}seek(t,n){if(n=z0(n,s_),!this[ji]){if(this[Xo])throw new Br("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let h=this.db.keyEncoding(n.keyEncoding||this[Ki]),v=h.format;n.keyEncoding!==v&&(n={...n,keyEncoding:v});let s=this.db.prefixKey(h.encode(t),v);this._seek(s,n)}}}_seek(t,n){throw new Br("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=q0(t,Zu),this[i_]?this.nextTick(t):this[ji]?this[kf].push(t):(this[ji]=!0,this[kf].push(t),this[Xo]?this[G0]&&this[Qi]()(new Br("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[$f])),t[Zu]}_close(t){this.nextTick(t)}[$f](){this[i_]=!0,this.db.detachResource(this);let t=this[kf];this[kf]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[i_]||await this.close()}}},Lc=class extends Of{constructor(t,n){super(t,n,!0),this[j0]=n.keys!==!1,this[J0]=n.values!==!1}[es](t,n,h){let v=this[Qi]();if(t)return v(t);try{n=this[j0]&&n!==void 0?this[Ki].decode(n):void 0,h=this[J0]&&h!==void 0?this[ts].decode(h):void 0}catch(s){return v(new Xi("entry",s))}n===void 0&&h===void 0||this[ao]++,v(null,n,h)}[ka](t,n){let h=this[Qi]();if(t)return this[Yo](h,t);try{for(let v of n){let s=v[0],a=v[1];v[0]=this[j0]&&s!==void 0?this[Ki].decode(s):void 0,v[1]=this[J0]&&a!==void 0?this[ts].decode(a):void 0}}catch(v){return this[Yo](h,new Xi("entries",v))}this[ao]+=n.length,this[Yo](h,null,n)}end(t){return!ML&&typeof console<"u"&&(ML=!0,console.warn(new Br("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},K0=class extends Of{constructor(t,n){super(t,n,!1)}[es](t,n){let h=this[Qi]();if(t)return h(t);try{n=n!==void 0?this[Ki].decode(n):void 0}catch(v){return h(new Xi("key",v))}n!==void 0&&this[ao]++,h(null,n)}[ka](t,n){let h=this[Qi]();if(t)return this[Yo](h,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[Ki].decode(s):void 0}}catch(v){return this[Yo](h,new Xi("keys",v))}this[ao]+=n.length,this[Yo](h,null,n)}},Q0=class extends Of{constructor(t,n){super(t,n,!1)}[es](t,n){let h=this[Qi]();if(t)return h(t);try{n=n!==void 0?this[ts].decode(n):void 0}catch(v){return h(new Xi("value",v))}n!==void 0&&this[ao]++,h(null,n)}[ka](t,n){let h=this[Qi]();if(t)return this[Yo](h,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[ts].decode(s):void 0}}catch(v){return this[Yo](h,new Xi("values",v))}this[ao]+=n.length,this[Yo](h,null,n)}},Xi=class extends Br{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Lc.prototype,e.split(" ")[0],{get(){throw new Br(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Br(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Lc.keyEncoding=Ki;Lc.valueEncoding=ts;c_.AbstractIterator=Lc;c_.AbstractKeyIterator=K0;c_.AbstractValueIterator=Q0});var LL=ht(X0=>{"use strict";var{AbstractKeyIterator:YW,AbstractValueIterator:ZW}=Yi(),ns=Symbol("iterator"),Hf=Symbol("callback"),Fc=Symbol("handleOne"),rs=Symbol("handleMany"),Pf=class extends YW{constructor(t,n){super(t,n),this[ns]=t.iterator({...n,keys:!0,values:!1}),this[Fc]=this[Fc].bind(this),this[rs]=this[rs].bind(this)}},l_=class extends ZW{constructor(t,n){super(t,n),this[ns]=t.iterator({...n,keys:!1,values:!0}),this[Fc]=this[Fc].bind(this),this[rs]=this[rs].bind(this)}};for(let e of[Pf,l_]){let t=e===Pf,n=t?h=>h[0]:h=>h[1];e.prototype._next=function(h){this[Hf]=h,this[ns].next(this[Fc])},e.prototype[Fc]=function(h,v,s){let a=this[Hf];h?a(h):a(null,t?v:s)},e.prototype._nextv=function(h,v,s){this[Hf]=s,this[ns].nextv(h,v,this[rs])},e.prototype._all=function(h,v){this[Hf]=v,this[ns].all(h,this[rs])},e.prototype[rs]=function(h,v){let s=this[Hf];h?s(h):s(null,v.map(n))},e.prototype._seek=function(h,v){this[ns].seek(h,v)},e.prototype._close=function(h){this[ns].close(h)}}X0.DefaultKeyIterator=Pf;X0.DefaultValueIterator=l_});var FL=ht(v_=>{"use strict";var{AbstractIterator:e3,AbstractKeyIterator:t3,AbstractValueIterator:n3}=Yi(),Y0=yo(),Tr=Symbol("nut"),h_=Symbol("undefer"),__=Symbol("factory"),f_=class extends e3{constructor(t,n){super(t,n),this[Tr]=null,this[__]=()=>t.iterator(n),this.db.defer(()=>this[h_]())}},d_=class extends t3{constructor(t,n){super(t,n),this[Tr]=null,this[__]=()=>t.keys(n),this.db.defer(()=>this[h_]())}},p_=class extends n3{constructor(t,n){super(t,n),this[Tr]=null,this[__]=()=>t.values(n),this.db.defer(()=>this[h_]())}};for(let e of[f_,d_,p_])e.prototype[h_]=function(){this.db.status==="open"&&(this[Tr]=this[__]())},e.prototype._next=function(t){this[Tr]!==null?this[Tr].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new Y0("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,h){this[Tr]!==null?this[Tr].nextv(t,n,h):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,h)):this.nextTick(h,new Y0("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[Tr]!==null?this[Tr].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new Y0("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[Tr]!==null?this[Tr]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[Tr]!==null?this[Tr].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};v_.DeferredIterator=f_;v_.DeferredKeyIterator=d_;v_.DeferredValueIterator=p_});var eD=ht(xL=>{"use strict";var{fromCallback:AL}=Rf(),m_=yo(),{getCallback:r3,getOptions:o3}=a_(),g_=Symbol("promise"),io=Symbol("status"),Ac=Symbol("operations"),Nf=Symbol("finishClose"),xc=Symbol("closeCallbacks"),Z0=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Ac]=[],this[xc]=[],this[io]="open",this[Nf]=this[Nf].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Ac].length}put(t,n,h){if(this[io]!=="open")throw new m_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let v=this.db._checkKey(t)||this.db._checkValue(n);if(v)throw v;let s=h&&h.sublevel!=null?h.sublevel:this.db,a=h,p=s.keyEncoding(h&&h.keyEncoding),i=s.valueEncoding(h&&h.valueEncoding),r=p.format;h={...h,keyEncoding:r,valueEncoding:i.format},s!==this.db&&(h.sublevel=null);let u=s.prefixKey(p.encode(t),r),c=i.encode(n);return this._put(u,c,h),this[Ac].push({...a,type:"put",key:t,value:n}),this}_put(t,n,h){}del(t,n){if(this[io]!=="open")throw new m_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let h=this.db._checkKey(t);if(h)throw h;let v=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=v.keyEncoding(n&&n.keyEncoding),p=a.format;return n={...n,keyEncoding:p},v!==this.db&&(n.sublevel=null),this._del(v.prefixKey(a.encode(t),p),n),this[Ac].push({...s,type:"del",key:t}),this}_del(t,n){}clear(){if(this[io]!=="open")throw new m_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ac]=[],this}_clear(){}write(t,n){return n=r3(t,n),n=AL(n,g_),t=o3(t),this[io]!=="open"?this.nextTick(n,new m_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[io]="writing",this._write(t,h=>{this[io]="closing",this[xc].push(()=>n(h)),h||this.db.emit("batch",this[Ac]),this._close(this[Nf])})),n[g_]}_write(t,n){}close(t){return t=AL(t,g_),this[io]==="closing"?this[xc].push(t):this[io]==="closed"?this.nextTick(t):(this[xc].push(t),this[io]!=="writing"&&(this[io]="closing",this._close(this[Nf]))),t[g_]}_close(t){this.nextTick(t)}[Nf](){this[io]="closed",this.db.detachResource(this);let t=this[xc];this[xc]=[];for(let n of t)n()}};xL.AbstractChainedBatch=Z0});var RL=ht(IL=>{"use strict";var{AbstractChainedBatch:a3}=eD(),i3=yo(),Ic=Symbol("encoded"),tD=class extends a3{constructor(t){super(t),this[Ic]=[]}_put(t,n,h){this[Ic].push({...h,type:"put",key:t,value:n})}_del(t,n){this[Ic].push({...n,type:"del",key:t})}_clear(){this[Ic]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[Ic].length===0?this.nextTick(n):this.db._batch(this[Ic],t,n):this.nextTick(n,new i3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};IL.DefaultChainedBatch=tD});var OL=ht((fde,kL)=>{"use strict";var $L=yo(),u3=Object.prototype.hasOwnProperty,s3=new Set(["lt","lte","gt","gte"]);kL.exports=function(e,t){let n={};for(let h in e)if(u3.call(e,h)&&!(h==="keyEncoding"||h==="valueEncoding")){if(h==="start"||h==="end")throw new $L(`The legacy range option '${h}' has been removed`,{code:"LEVEL_LEGACY"});if(h==="encoding")throw new $L("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});s3.has(h)?n[h]=t.encode(e[h]):n[h]=e[h]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var nD=ht((dde,PL)=>{var HL;PL.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(HL||(HL=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var WL=ht((pde,BL)=>{"use strict";var NL=nD();BL.exports=function(e,...t){t.length===0?NL(e):NL(()=>e(...t))}});var UL=ht(y_=>{"use strict";var{AbstractIterator:c3,AbstractKeyIterator:l3,AbstractValueIterator:f3}=Yi(),Rc=Symbol("unfix"),Do=Symbol("iterator"),os=Symbol("handleOne"),Zi=Symbol("handleMany"),Oa=Symbol("callback"),Bf=class extends c3{constructor(t,n,h,v){super(t,n),this[Do]=h,this[Rc]=v,this[os]=this[os].bind(this),this[Zi]=this[Zi].bind(this),this[Oa]=null}[os](t,n,h){let v=this[Oa];if(t)return v(t);n!==void 0&&(n=this[Rc](n)),v(t,n,h)}[Zi](t,n){let h=this[Oa];if(t)return h(t);for(let v of n){let s=v[0];s!==void 0&&(v[0]=this[Rc](s))}h(t,n)}},Wf=class extends l3{constructor(t,n,h,v){super(t,n),this[Do]=h,this[Rc]=v,this[os]=this[os].bind(this),this[Zi]=this[Zi].bind(this),this[Oa]=null}[os](t,n){let h=this[Oa];if(t)return h(t);n!==void 0&&(n=this[Rc](n)),h(t,n)}[Zi](t,n){let h=this[Oa];if(t)return h(t);for(let v=0;v<n.length;v++){let s=n[v];s!==void 0&&(n[v]=this[Rc](s))}h(t,n)}},Uf=class extends f3{constructor(t,n,h){super(t,n),this[Do]=h}};for(let e of[Bf,Wf])e.prototype._next=function(t){this[Oa]=t,this[Do].next(this[os])},e.prototype._nextv=function(t,n,h){this[Oa]=h,this[Do].nextv(t,n,this[Zi])},e.prototype._all=function(t,n){this[Oa]=n,this[Do].all(t,this[Zi])};for(let e of[Uf])e.prototype._next=function(t){this[Do].next(t)},e.prototype._nextv=function(t,n,h){this[Do].nextv(t,n,h)},e.prototype._all=function(t,n){this[Do].all(t,n)};for(let e of[Bf,Wf,Uf])e.prototype._seek=function(t,n){this[Do].seek(t,n)},e.prototype._close=function(t){this[Do].close(t)};y_.AbstractSublevelIterator=Bf;y_.AbstractSublevelKeyIterator=Wf;y_.AbstractSublevelValueIterator=Uf});var GL=ht((_de,VL)=>{"use strict";var rD=yo(),{Buffer:iD}=Yh()||{},{AbstractSublevelIterator:d3,AbstractSublevelKeyIterator:p3,AbstractSublevelValueIterator:h3}=UL(),Ha=Symbol("prefix"),qL=Symbol("upperBound"),qf=Symbol("prefixRange"),Wr=Symbol("parent"),oD=Symbol("unfix"),zL=new TextEncoder,_3={separator:"!"};VL.exports=function({AbstractLevel:e}){class t extends e{static defaults(h){if(typeof h=="string")throw new rD("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(h&&h.open)throw new rD("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return h==null?_3:h.separator?h:{...h,separator:"!"}}constructor(h,v,s){let{separator:a,manifest:p,...i}=t.defaults(s);v=m3(v,a);let r=a.charCodeAt(0)+1,u=h[Wr]||h;if(!zL.encode(v).every(l=>l>r&&l<127))throw new rD(`Prefix must use bytes > ${r} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(v3(u,p),i);let c=(h.prefix||"")+a+v+a,f=c.slice(0,-1)+String.fromCharCode(r);this[Wr]=u,this[Ha]=new D_(c),this[qL]=new D_(f),this[oD]=new uD,this.nextTick=u.nextTick}prefixKey(h,v){if(v==="utf8")return this[Ha].utf8+h;if(h.byteLength===0)return this[Ha][v];if(v==="view"){let s=this[Ha].view,a=new Uint8Array(s.byteLength+h.byteLength);return a.set(s,0),a.set(h,s.byteLength),a}else{let s=this[Ha].buffer;return iD.concat([s,h],s.byteLength+h.byteLength)}}[qf](h,v){h.gte!==void 0?h.gte=this.prefixKey(h.gte,v):h.gt!==void 0?h.gt=this.prefixKey(h.gt,v):h.gte=this[Ha][v],h.lte!==void 0?h.lte=this.prefixKey(h.lte,v):h.lt!==void 0?h.lt=this.prefixKey(h.lt,v):h.lte=this[qL][v]}get prefix(){return this[Ha].utf8}get db(){return this[Wr]}_open(h,v){this[Wr].open({passive:!0},v)}_put(h,v,s,a){this[Wr].put(h,v,s,a)}_get(h,v,s){this[Wr].get(h,v,s)}_getMany(h,v,s){this[Wr].getMany(h,v,s)}_del(h,v,s){this[Wr].del(h,v,s)}_batch(h,v,s){this[Wr].batch(h,v,s)}_clear(h,v){this[qf](h,h.keyEncoding),this[Wr].clear(h,v)}_iterator(h){this[qf](h,h.keyEncoding);let v=this[Wr].iterator(h),s=this[oD].get(this[Ha].utf8.length,h.keyEncoding);return new d3(this,h,v,s)}_keys(h){this[qf](h,h.keyEncoding);let v=this[Wr].keys(h),s=this[oD].get(this[Ha].utf8.length,h.keyEncoding);return new p3(this,h,v,s)}_values(h){this[qf](h,h.keyEncoding);let v=this[Wr].values(h);return new h3(this,h,v)}}return{AbstractSublevel:t}};var v3=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:aD(e,"utf8"),buffer:aD(e,"buffer"),view:aD(e,"view")}}},aD=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},D_=class{constructor(t){this.utf8=t,this.view=zL.encode(t),this.buffer=iD?iD.from(this.view.buffer,0,this.view.byteLength):{}}},uD=class{constructor(){this.cache=new Map}get(t,n){let h=this.cache.get(n);return h===void 0&&(n==="view"?h=function(v,s){return s.subarray(v)}.bind(null,t):h=function(v,s){return s.slice(v)}.bind(null,t),this.cache.set(n,h)),h}},m3=function(e,t){let n=0,h=e.length;for(;n<h&&e[n]===t;)n++;for(;h>n&&e[h-1]===t;)h--;return e.slice(n,h)}});var dD=ht(fD=>{"use strict";var{supports:g3}=kM(),{Transcoder:y3}=fL(),{EventEmitter:D3}=CL(),{fromCallback:eu}=Rf(),bo=yo(),{AbstractIterator:as}=Yi(),{DefaultKeyIterator:b3,DefaultValueIterator:C3}=LL(),{DeferredIterator:w3,DeferredKeyIterator:S3,DeferredValueIterator:E3}=FL(),{DefaultChainedBatch:jL}=RL(),{getCallback:is,getOptions:tu}=a_(),b_=OL(),dt=Symbol("promise"),Pa=Symbol("landed"),us=Symbol("resources"),sD=Symbol("closeResources"),zf=Symbol("operations"),Vf=Symbol("undefer"),C_=Symbol("deferOpen"),JL=Symbol("options"),mt=Symbol("status"),ss=Symbol("defaultOptions"),$c=Symbol("transcoder"),w_=Symbol("keyEncoding"),cD=Symbol("valueEncoding"),T3=()=>{},Gf=class extends D3{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=tu(n);let{keyEncoding:h,valueEncoding:v,passive:s,...a}=n;this[us]=new Set,this[zf]=[],this[C_]=!0,this[JL]=a,this[mt]="opening",this.supports=g3(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[$c]=new y3(M3(this)),this[w_]=this[$c].encoding(h||"utf8"),this[cD]=this[$c].encoding(v||"utf8");for(let p of this[$c].encodings())this.supports.encodings[p.commonName]||(this.supports.encodings[p.commonName]=!0);this[ss]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[w_].commonName,valueEncoding:this[cD].commonName}),key:Object.freeze({keyEncoding:this[w_].commonName})},this.nextTick(()=>{this[C_]&&this.open({passive:!1},T3)})}get status(){return this[mt]}keyEncoding(t){return this[$c].encoding(t??this[w_])}valueEncoding(t){return this[$c].encoding(t??this[cD])}open(t,n){n=is(t,n),n=eu(n,dt),t={...this[JL],...tu(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let h=v=>{this[mt]==="closing"||this[mt]==="opening"?this.once(Pa,v?()=>h(v):h):this[mt]!=="open"?n(new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:v})):n()};return t.passive?this[mt]==="opening"?this.once(Pa,h):this.nextTick(h):this[mt]==="closed"||this[C_]?(this[C_]=!1,this[mt]="opening",this.emit("opening"),this._open(t,v=>{if(v){this[mt]="closed",this[sD](()=>{this.emit(Pa),h(v)}),this[Vf]();return}this[mt]="open",this[Vf](),this.emit(Pa),this[mt]==="open"&&this.emit("open"),this[mt]==="open"&&this.emit("ready"),h()})):this[mt]==="open"?this.nextTick(h):this.once(Pa,()=>this.open(t,n)),n[dt]}_open(t,n){this.nextTick(n)}close(t){t=eu(t,dt);let n=h=>{this[mt]==="opening"||this[mt]==="closing"?this.once(Pa,h?n(h):n):this[mt]!=="closed"?t(new bo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:h})):t()};if(this[mt]==="open"){this[mt]="closing",this.emit("closing");let h=v=>{this[mt]="open",this[Vf](),this.emit(Pa),n(v)};this[sD](()=>{this._close(v=>{if(v)return h(v);this[mt]="closed",this[Vf](),this.emit(Pa),this[mt]==="closed"&&this.emit("closed"),n()})})}else this[mt]==="closed"?this.nextTick(n):this.once(Pa,()=>this.close(t));return t[dt]}[sD](t){if(this[us].size===0)return this.nextTick(t);let n=this[us].size,h=!0,v=()=>{--n===0&&(h?this.nextTick(t):t())};for(let s of this[us])s.close(v);h=!1,this[us].clear()}_close(t){this.nextTick(t)}get(t,n,h){if(h=is(n,h),h=eu(h,dt),n=tu(n,this[ss].entry),this[mt]==="opening")return this.defer(()=>this.get(t,n,h)),h[dt];if(kc(this,h))return h[dt];let v=this._checkKey(t);if(v)return this.nextTick(h,v),h[dt];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),p=s.format,i=a.format;return(n.keyEncoding!==p||n.valueEncoding!==i)&&(n=Object.assign({},n,{keyEncoding:p,valueEncoding:i})),this._get(this.prefixKey(s.encode(t),p),n,(r,u)=>{if(r)return(r.code==="LEVEL_NOT_FOUND"||r.notFound||/NotFound/i.test(r))&&(r.code||(r.code="LEVEL_NOT_FOUND"),r.notFound||(r.notFound=!0),r.status||(r.status=404)),h(r);try{u=a.decode(u)}catch(c){return h(new bo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:c}))}h(null,u)}),h[dt]}_get(t,n,h){this.nextTick(h,new Error("NotFound"))}getMany(t,n,h){if(h=is(n,h),h=eu(h,dt),n=tu(n,this[ss].entry),this[mt]==="opening")return this.defer(()=>this.getMany(t,n,h)),h[dt];if(kc(this,h))return h[dt];if(!Array.isArray(t))return this.nextTick(h,new TypeError("The first argument 'keys' must be an array")),h[dt];if(t.length===0)return this.nextTick(h,null,[]),h[dt];let v=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),a=v.format,p=s.format;(n.keyEncoding!==a||n.valueEncoding!==p)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:p}));let i=new Array(t.length);for(let r=0;r<t.length;r++){let u=t[r],c=this._checkKey(u);if(c)return this.nextTick(h,c),h[dt];i[r]=this.prefixKey(v.encode(u),a)}return this._getMany(i,n,(r,u)=>{if(r)return h(r);try{for(let c=0;c<u.length;c++)u[c]!==void 0&&(u[c]=s.decode(u[c]))}catch(c){return h(new bo(`Could not decode one or more of ${u.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:c}))}h(null,u)}),h[dt]}_getMany(t,n,h){this.nextTick(h,null,new Array(t.length).fill(void 0))}put(t,n,h,v){if(v=is(h,v),v=eu(v,dt),h=tu(h,this[ss].entry),this[mt]==="opening")return this.defer(()=>this.put(t,n,h,v)),v[dt];if(kc(this,v))return v[dt];let s=this._checkKey(t)||this._checkValue(n);if(s)return this.nextTick(v,s),v[dt];let a=this.keyEncoding(h.keyEncoding),p=this.valueEncoding(h.valueEncoding),i=a.format,r=p.format;(h.keyEncoding!==i||h.valueEncoding!==r)&&(h=Object.assign({},h,{keyEncoding:i,valueEncoding:r}));let u=this.prefixKey(a.encode(t),i),c=p.encode(n);return this._put(u,c,h,f=>{if(f)return v(f);this.emit("put",t,n),v()}),v[dt]}_put(t,n,h,v){this.nextTick(v)}del(t,n,h){if(h=is(n,h),h=eu(h,dt),n=tu(n,this[ss].key),this[mt]==="opening")return this.defer(()=>this.del(t,n,h)),h[dt];if(kc(this,h))return h[dt];let v=this._checkKey(t);if(v)return this.nextTick(h,v),h[dt];let s=this.keyEncoding(n.keyEncoding),a=s.format;return n.keyEncoding!==a&&(n=Object.assign({},n,{keyEncoding:a})),this._del(this.prefixKey(s.encode(t),a),n,p=>{if(p)return h(p);this.emit("del",t),h()}),h[dt]}_del(t,n,h){this.nextTick(h)}batch(t,n,h){if(!arguments.length){if(this[mt]==="opening")return new jL(this);if(this[mt]!=="open")throw new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?h=t:h=is(n,h),h=eu(h,dt),n=tu(n,this[ss].empty),this[mt]==="opening")return this.defer(()=>this.batch(t,n,h)),h[dt];if(kc(this,h))return h[dt];if(!Array.isArray(t))return this.nextTick(h,new TypeError("The first argument 'operations' must be an array")),h[dt];if(t.length===0)return this.nextTick(h),h[dt];let v=new Array(t.length),{keyEncoding:s,valueEncoding:a,...p}=n;for(let i=0;i<t.length;i++){if(typeof t[i]!="object"||t[i]===null)return this.nextTick(h,new TypeError("A batch operation must be an object")),h[dt];let r=Object.assign({},t[i]);if(r.type!=="put"&&r.type!=="del")return this.nextTick(h,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),h[dt];let u=this._checkKey(r.key);if(u)return this.nextTick(h,u),h[dt];let c=r.sublevel!=null?r.sublevel:this,f=c.keyEncoding(r.keyEncoding||s),l=f.format;if(r.key=c.prefixKey(f.encode(r.key),l),r.keyEncoding=l,r.type==="put"){let o=this._checkValue(r.value);if(o)return this.nextTick(h,o),h[dt];let d=c.valueEncoding(r.valueEncoding||a);r.value=d.encode(r.value),r.valueEncoding=d.format}c!==this&&(r.sublevel=null),v[i]=r}return this._batch(v,p,i=>{if(i)return h(i);this.emit("batch",t),h()}),h[dt]}_batch(t,n,h){this.nextTick(h)}sublevel(t,n){return this._sublevel(t,lD.defaults(n))}_sublevel(t,n){return new lD(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=is(t,n),n=eu(n,dt),t=tu(t,this[ss].empty),this[mt]==="opening")return this.defer(()=>this.clear(t,n)),n[dt];if(kc(this,n))return n[dt];let h=t,v=this.keyEncoding(t.keyEncoding);return t=b_(t,v),t.keyEncoding=v.format,t.limit===0?this.nextTick(n):this._clear(t,s=>{if(s)return n(s);this.emit("clear",h),n()}),n[dt]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=b_(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[as.keyEncoding]=n,t[as.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[mt]==="opening")return new w3(this,t);if(this[mt]!=="open")throw new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new as(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=b_(t,n),t[as.keyEncoding]=n,t[as.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[mt]==="opening")return new S3(this,t);if(this[mt]!=="open")throw new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new b3(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=b_(t,n),t[as.keyEncoding]=n,t[as.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[mt]==="opening")return new E3(this,t);if(this[mt]!=="open")throw new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new C3(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[zf].push(t)}[Vf](){if(this[zf].length===0)return;let t=this[zf];this[zf]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[us].add(t)}detachResource(t){this[us].delete(t)}_chainedBatch(){return new jL(this)}_checkKey(t){if(t==null)return new bo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new bo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Gf.prototype.nextTick=WL();var{AbstractSublevel:lD}=GL()({AbstractLevel:Gf});fD.AbstractLevel=Gf;fD.AbstractSublevel=lD;var kc=function(e,t){return e[mt]!=="open"?(e.nextTick(t,new bo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},M3=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var pD=ht(cs=>{"use strict";cs.AbstractLevel=dD().AbstractLevel;cs.AbstractSublevel=dD().AbstractSublevel;cs.AbstractIterator=Yi().AbstractIterator;cs.AbstractKeyIterator=Yi().AbstractKeyIterator;cs.AbstractValueIterator=Yi().AbstractValueIterator;cs.AbstractChainedBatch=eD().AbstractChainedBatch});var QL=ht((gde,KL)=>{KL.exports=F3;var L3=nD();function F3(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let h,v,s,a,p,i=!0,r;Array.isArray(e)?(h=[],s=v=e.length):(a=Object.keys(e),h={},s=v=a.length);function u(f){function l(){n&&n(f,h),n=null}i?L3(l):l()}function c(f,l,o){if(h[f]=o,l&&(p=!0),--s===0||l)u(l);else if(!p&&r<v){let d;a?(d=a[r],r+=1,e[d](function(_,m){c(d,_,m)})):(d=r,r+=1,e[d](function(_,m){c(d,_,m)}))}}r=t,s?a?a.some(function(f,l){return e[f](function(o,d){c(f,o,d)}),l===t-1}):e.some(function(f,l){return f(function(o,d){c(l,o,d)}),l===t-1}):u(null),i=!1}});var hD=ht((yde,XL)=>{"use strict";XL.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,h=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,v=t.gte===void 0,s=t.lte===void 0;return n!==void 0&&h!==void 0?IDBKeyRange.bound(n,h,v,s):n!==void 0?IDBKeyRange.lowerBound(n,v):h!==void 0?IDBKeyRange.upperBound(h,s):null}});var _D=ht((Dde,YL)=>{"use strict";var A3=new TextEncoder;YL.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):A3.encode(e)}});var rF=ht(nF=>{"use strict";var{AbstractIterator:x3}=pD(),ZL=hD(),S_=_D(),Zo=Symbol("cache"),Na=Symbol("finished"),Ur=Symbol("options"),Ba=Symbol("currentOptions"),ls=Symbol("position"),vD=Symbol("location"),Oc=Symbol("first"),eF={},mD=class extends x3{constructor(t,n,h){super(t,h),this[Zo]=[],this[Na]=this.limit===0,this[Ur]=h,this[Ba]={...h},this[ls]=void 0,this[vD]=n,this[Oc]=!0}_nextv(t,n,h){if(this[Oc]=!1,this[Na])return this.nextTick(h,null,[]);if(this[Zo].length>0)return t=Math.min(t,this[Zo].length),this.nextTick(h,null,this[Zo].splice(0,t));this[ls]!==void 0&&(this[Ur].reverse?(this[Ba].lt=this[ls],this[Ba].lte=void 0):(this[Ba].gt=this[ls],this[Ba].gte=void 0));let v;try{v=ZL(this[Ba])}catch{return this[Na]=!0,this.nextTick(h,null,[])}let s=this.db.db.transaction([this[vD]],"readonly"),a=s.objectStore(this[vD]),p=[];if(this[Ur].reverse){let i=!this[Ur].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[i](v,"prev").onsuccess=r=>{let u=r.target.result;if(u){let{key:c,value:f}=u;this[ls]=c,p.push([this[Ur].keys&&c!==void 0?S_(c):void 0,this[Ur].values&&f!==void 0?S_(f):void 0]),p.length<t?u.continue():tF(s)}else this[Na]=!0}}else{let i,r,u=()=>{if(i===void 0||r===void 0)return;let c=Math.max(i.length,r.length);c===0||t===1/0?this[Na]=!0:this[ls]=i[c-1],p.length=c;for(let f=0;f<c;f++){let l=i[f],o=r[f];p[f]=[this[Ur].keys&&l!==void 0?S_(l):void 0,this[Ur].values&&o!==void 0?S_(o):void 0]}tF(s)};this[Ur].keys||t<1/0?a.getAllKeys(v,t<1/0?t:void 0).onsuccess=c=>{i=c.target.result,u()}:(i=[],this.nextTick(u)),this[Ur].values?a.getAll(v,t<1/0?t:void 0).onsuccess=c=>{r=c.target.result,u()}:(r=[],this.nextTick(u))}s.onabort=()=>{h(s.error||new Error("aborted by user")),h=null},s.oncomplete=()=>{h(null,p),h=null}}_next(t){if(this[Zo].length>0){let[n,h]=this[Zo].shift();this.nextTick(t,null,n,h)}else if(this[Na])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[Oc]&&(this[Oc]=!1,n=1),this._nextv(n,eF,(h,v)=>{if(h)return t(h);this[Zo]=v,this._next(t)})}}_all(t,n){this[Oc]=!1;let h=this[Zo].splice(0,this[Zo].length),v=this.limit-this.count-h.length;if(v<=0)return this.nextTick(n,null,h);this._nextv(v,eF,(s,a)=>{if(s)return n(s);h.length>0&&(a=h.concat(a)),n(null,a)})}_seek(t,n){this[Oc]=!0,this[Zo]=[],this[Na]=!1,this[ls]=void 0,this[Ba]={...this[Ur]};let h;try{h=ZL(this[Ur])}catch{this[Na]=!0;return}h!==null&&!h.includes(t)?this[Na]=!0:this[Ur].reverse?this[Ba].lte=t:this[Ba].gte=t}};nF.Iterator=mD;function tF(e){typeof e.commit=="function"&&e.commit()}});var aF=ht((Cde,oF)=>{"use strict";oF.exports=function(t,n,h,v,s){if(v.limit===0)return t.nextTick(s);let a=t.db.transaction([n],"readwrite"),p=a.objectStore(n),i=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};let r=p.openKeyCursor?"openKeyCursor":"openCursor",u=v.reverse?"prev":"next";p[r](h,u).onsuccess=function(c){let f=c.target.result;f&&(p.delete(f.key).onsuccess=function(){(v.limit<=0||++i<v.limit)&&f.continue()})}}});var fF=ht(lF=>{"use strict";var{AbstractLevel:I3}=pD(),iF=yo(),R3=QL(),{fromCallback:$3}=Rf(),{Iterator:k3}=rF(),uF=_D(),O3=aF(),H3=hD(),cF="level-js-",jf=Symbol("idb"),gD=Symbol("namePrefix"),Wa=Symbol("location"),yD=Symbol("version"),fs=Symbol("store"),Jf=Symbol("onComplete"),sF=Symbol("promise"),E_=class extends I3{constructor(t,n,h){if(typeof n=="function"||typeof h=="function")throw new iF("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:v,version:s,...a}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof t!="string")throw new Error("constructor requires a location string argument");this[Wa]=t,this[gD]=v??cF,this[yD]=parseInt(s||1,10),this[jf]=null}get location(){return this[Wa]}get namePrefix(){return this[gD]}get version(){return this[yD]}get db(){return this[jf]}get type(){return"browser-level"}_open(t,n){let h=indexedDB.open(this[gD]+this[Wa],this[yD]);h.onerror=function(){n(h.error||new Error("unknown error"))},h.onsuccess=()=>{this[jf]=h.result,n()},h.onupgradeneeded=v=>{let s=v.target.result;s.objectStoreNames.contains(this[Wa])||s.createObjectStore(this[Wa])}}[fs](t){return this[jf].transaction([this[Wa]],t).objectStore(this[Wa])}[Jf](t,n){let h=t.transaction;h.onabort=function(){n(h.error||new Error("aborted by user"))},h.oncomplete=function(){n(null,t.result)}}_get(t,n,h){let v=this[fs]("readonly"),s;try{s=v.get(t)}catch(a){return this.nextTick(h,a)}this[Jf](s,function(a,p){if(a)return h(a);if(p===void 0)return h(new iF("Entry not found",{code:"LEVEL_NOT_FOUND"}));h(null,uF(p))})}_getMany(t,n,h){let v=this[fs]("readonly"),s=t.map(a=>p=>{let i;try{i=v.get(a)}catch(r){return p(r)}i.onsuccess=()=>{let r=i.result;p(null,r===void 0?r:uF(r))},i.onerror=r=>{r.stopPropagation(),p(i.error)}});R3(s,16,h)}_del(t,n,h){let v=this[fs]("readwrite"),s;try{s=v.delete(t)}catch(a){return this.nextTick(h,a)}this[Jf](s,h)}_put(t,n,h,v){let s=this[fs]("readwrite"),a;try{a=s.put(n,t)}catch(p){return this.nextTick(v,p)}this[Jf](a,v)}_iterator(t){return new k3(this,this[Wa],t)}_batch(t,n,h){let v=this[fs]("readwrite"),s=v.transaction,a=0,p;s.onabort=function(){h(p||s.error||new Error("aborted by user"))},s.oncomplete=function(){h()};function i(){let r=t[a++],u=r.key,c;try{c=r.type==="del"?v.delete(u):v.put(r.value,u)}catch(f){p=f,s.abort();return}a<t.length?c.onsuccess=i:typeof s.commit=="function"&&s.commit()}i()}_clear(t,n){let h,v;try{h=H3(t)}catch{return this.nextTick(n)}if(t.limit>=0)return O3(this,this[Wa],h,t,n);try{let s=this[fs]("readwrite");v=h?s.delete(h):s.clear()}catch(s){return this.nextTick(n,s)}this[Jf](v,n)}_close(t){this[jf].close(),this.nextTick(t)}};E_.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=cF),n=$3(n,sF);let h=indexedDB.deleteDatabase(t+e);return h.onsuccess=function(){n()},h.onerror=function(v){n(v)},n[sF]};lF.BrowserLevel=E_});var DD=ht(dF=>{dF.Level=fF().BrowserLevel});var yb=function(e){return function(t){for(var n=e.length,h=t.length,v=new Array(n*h),s=0,a=0;a<n;a++)for(var p=e[a],i=0;i<h;i++)v[s++]=p(t[i]);return v}};var ud={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var De=function(e){return e.identity},be={identity:function(e){return e},Semigroupoid0:function(){return ud}};var _n=!0;var Qe=function(e){return function(t){return function(n){return e(n)(t)}}},Te=function(e){return function(t){return e}};var Db=function(e){return function(t){return t(e)}};var bb=function(e){return function(t){for(var n=t.length,h=new Array(n),v=0;v<n;v++)h[v]=e(t[v]);return h}};var dn=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var Ht=function(e){return V(e)(Te(void 0))},gs=function(e){var t=V(e);return function(n){return function(h){return t(Te(h))(n)}}},cd=function(e){var t=V(e);return function(n){return t(Te(n))}};var wt={map:bb};var eI=De(be);var iu={apply:yb,Functor0:function(){return wt}},ut=function(e){return e.apply};var oa=function(e){var t=ut(e),n=V(e.Functor0());return function(h){return function(v){return t(n(Te(eI))(h))(v)}}};var Cb=function(e){return function(t){for(var n=[],h=0,v=e.length;h<v;h++)Array.prototype.push.apply(n,t(e[h]));return n}};var te=function(e){return e.pure},qc=function(e){var t=te(e);return function(n){return function(h){if(!n)return h;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,h.constructor.name])}}},Lr=function(e){var t=te(e);return function(n){return function(h){if(n)return h;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,h.constructor.name])}}},zc=function(e){var t=ut(e.Apply0()),n=te(e);return function(h){return function(v){return t(n(h))(v)}}};var ys={pure:function(e){return[e]},Apply0:function(){return iu}};var Pt=function(e){return e.discard};var Ga={bind:Cb,Apply0:function(){return iu}},fe=function(e){return e.bind},tn=function(e){return Qe(fe(e))},Ds=function(e){var t=tn(e);return function(n){return function(h){return function(v){return t(n)(h(v))}}}};var Nt={discard:function(e){return fe(e)}};var Sb=function(e){var t=fe(e.Bind1()),n=qc(e.Applicative0());return function(h){return function(v){return t(h)(function(s){return n(s)(v)})}}};var Eb=function(e){var t=fe(e.Bind1()),n=te(e.Applicative0());return function(h){return function(v){return t(v)(function(s){return n(h(s))})}}},jn=function(e){var t=fe(e.Bind1()),n=te(e.Applicative0());return function(h){return function(v){return t(h)(function(s){return t(v)(function(a){return n(s(a))})})}}};var Tb=function(e){return function(t){return e+t}},Mb=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var Tn=function(e){return e.reflectSymbol};var su={append:Tb};var Gt={append:Mb};var me=function(e){return e.append};var ev={alt:me(Gt),Functor0:function(){return wt}},vn=function(e){return e.alt};var Lb=String.fromCharCode(65535),Fb=String.fromCharCode(0),iI=Number.POSITIVE_INFINITY,uI=Number.NEGATIVE_INFINITY;var fd=function(e){return function(t){return function(n){return function(h){return function(v){return h<v?e:h===v?t:n}}}}};var Ab=fd,xb=fd,Ib=fd,Rb=fd,$b=function(e){return function(t){return function(n){for(var h=0,v=t.length,s=n.length;h<v&&h<s;){var a=t[h],p=n[h],i=e(a)(p);if(i!==0)return i;h++}return v===s?0:v>s?-1:1}}};var dd=function(e){return function(t){return e===t}};var kb=dd,Ob=dd,Hb=dd,Pb=dd,Nb=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var h=0;h<t.length;h++)if(!e(t[h])(n[h]))return!1;return!0}}};var pd={eq:function(e){return function(t){return!0}}},er={eq:Pb};var Vc={eq:Ob},bs={eq:kb},Bb={eq:Hb};var Ne=function(e){return e.eq};var Lo=function(e){return{eq:Nb(Ne(e))}};var ce=function(){function e(){}return e.value=new e,e}(),pe=function(){function e(){}return e.value=new e,e}(),Ie=function(){function e(){}return e.value=new e,e}();var Wb=function(e){return function(t){return e+t|0}},Ub=function(e){return function(t){return e*t|0}};var Cs={add:Wb,zero:0,mul:Ub,one:1};var so=function(e){return e.one};var cr=function(e){return e.add};var Ss={compare:function(e){return function(t){return Ie.value}},Eq0:function(){return pd}},jt=function(){return{compare:Ib(ce.value)(Ie.value)(pe.value),Eq0:function(){return er}}}();var Es=function(){return{compare:xb(ce.value)(Ie.value)(pe.value),Eq0:function(){return Vc}}}(),bn=function(){return{compare:Ab(ce.value)(Ie.value)(pe.value),Eq0:function(){return bs}}}(),hd=function(){return{compare:Rb(ce.value)(Ie.value)(pe.value),Eq0:function(){return Bb}}}();var Me=function(e){return e.compare},_I=Me(bn);var _d=function(e){var t=Me(e);return function(n){return function(h){var v=t(n)(h);if(v instanceof ce)return h;if(v instanceof Ie||v instanceof pe)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},nv=function(e){var t=Me(e);return function(n){return function(h){var v=t(n)(h);if(v instanceof ce||v instanceof Ie)return n;if(v instanceof pe)return h;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},Ja=function(e){var t=Me(e),n=Lo(e.Eq0());return{compare:function(){var h=function(v){return function(s){var a=t(v)(s);if(a instanceof Ie)return 0;if(a instanceof ce)return 1;if(a instanceof pe)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[a.constructor.name])}};return function(v){return function(s){return _I(0)($b(h)(v)(s))}}}(),Eq0:function(){return n}}};var jb=function(e){var t=nv(e),n=_d(e);return function(h){return function(v){return function(s){return t(v)(n(h)(s))}}}};var Fo=function(e){return e.top};var vd={top:2147483647,bottom:-2147483648,Ord0:function(){return bn}},jc={top:Lb,bottom:Fb,Ord0:function(){return hd}};var ua=function(e){return e.bottom};var Jb=function(e){return e.toString()},Kb=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var Qb=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,h){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var v=h+1,s=v<t&&e[v]>="0"&&e[v]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+s})+'"'};var ca={show:Qb};var co={show:Kb},xo={show:Jb};var Xb={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Le=function(e){return e.show};var bI=De(be),J=function(){function e(){}return e.value=new e,e}(),z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var rv=function(e){var t=me(e);return{append:function(n){return function(h){if(n instanceof J)return h;if(h instanceof J)return n;if(n instanceof z&&h instanceof z)return new z(t(n.value0)(h.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,h.constructor.name])}}}};var Zb=function(e){var t=rv(e);return{mempty:J.value,Semigroup0:function(){return t}}};var rt=function(e){return function(t){return function(n){if(n instanceof J)return e;if(n instanceof z)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},la=rt(!0)(Te(!1)),Ms=rt(!1)(Te(!0));var St={map:function(e){return function(t){return t instanceof z?new z(e(t.value0)):J.value}}},CI=V(St);var Cn=function(e){return rt(e)(bI)},Vr=function(){return function(e){if(e instanceof z)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var yd={apply:function(e){return function(t){if(e instanceof z)return CI(e.value0)(t);if(e instanceof J)return J.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return St}};var tr={bind:function(e){return function(t){if(e instanceof z)return t(e.value0);if(e instanceof J)return J.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return yd}};var Be=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ke=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Qa={map:function(e){return function(t){if(t instanceof Be)return new Be(t.value0);if(t instanceof ke)return new ke(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},wI=V(Qa);var pn=function(e){return function(t){return function(n){if(n instanceof Be)return e(n.value0);if(n instanceof ke)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Dd=function(){return pn(Te(J.value))(z.create)}();var eC=pn(Te(!1))(Te(!0));var tC={apply:function(e){return function(t){if(e instanceof Be)return new Be(e.value0);if(e instanceof ke)return wI(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Qa}};var cu=function(){return{pure:ke.create,Apply0:function(){return tC}}}();var Io=function(e){return e};var fa={map:function(e){return function(t){return e(t)}}};var bd={apply:function(e){return function(t){return e(t)}},Functor0:function(){return fa}},ov={bind:function(e){return function(t){return t(e)}},Apply0:function(){return bd}},Cd={pure:Io,Apply0:function(){return bd}},da={Applicative0:function(){return Cd},Bind1:function(){return ov}};var pa={mempty:"",Semigroup0:function(){return su}};var lu={mempty:[],Semigroup0:function(){return Gt}};var ot=function(e){return e.mempty};var oC=function(e){return function(){return e}},aC=function(e){return function(t){return function(){return t(e())()}}};var iC=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}},Ro={Applicative0:function(){return Qt},Bind1:function(){return Fr}},Fr={bind:aC,Apply0:function(){return sC(0)}},Qt={pure:oC,Apply0:function(){return sC(0)}},uC=iC("functorEffect","Effect",function(){return{map:zc(Qt)}}),sC=iC("applyEffect","Effect",function(){return{apply:jn(Ro),Functor0:function(){return uC(0)}}}),Ge=uC(20);var cC=function(e){return function(){return{value:e}}};var Je=function(e){return function(){return e.value}},lC=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},It=function(e){return function(t){return function(){t.value=e}}};var xI=Ht(Ge),Yt=cC,uv=lC,fC=function(e){return uv(function(t){var n=e(t);return{state:n,value:n}})},Ar=function(e){return function(t){return xI(fC(e)(t))}};var $I=tn(Fr),kI=V(Ge),un=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Zt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qn=function(e){return e.tailRecM};var Sd={tailRecM:function(e){return function(t){var n=function(h){if(h instanceof Zt)return h.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[h.constructor.name])};return function(){var v=$I(Yt)(e(t))();return function(){for(;!function(){var a=Je(v)();if(a instanceof un){var p=e(a.value0)();return It(p)(v)(),!1}if(a instanceof Zt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[a.constructor.name])}(););return{}}(),kI(n)(Je(v))()}}},Monad0:function(){return Ro}};var dC=function(e){return function(t){return function(n){for(var h=t,v=n.length,s=v-1;s>=0;s--)h=e(n[s])(h);return h}}},pC=function(e){return function(t){return function(n){for(var h=t,v=n.length,s=0;s<v;s++)h=e(h)(n[s]);return h}}};var hC={empty:[],Alt0:function(){return ev}},fr=function(e){return e.empty};var vC=function(e){return function(t){return e&&t}},mC=function(e){return function(t){return e||t}},gC=function(e){return!e};var Kc=function(e){return e.tt};var $o=function(e){return e.not};var dv=function(e){return e.implies};var Qc=function(e){return e.ff};var fu=function(e){return e.disj},jr={ff:!1,tt:!0,implies:function(e){return function(t){return fu(jr)($o(jr)(e))(t)}},conj:vC,disj:mC,not:gC};var Ls=function(e){return e.conj},Xc=function(e){var t=Qc(e),n=Kc(e),h=dv(e),v=Ls(e),s=fu(e),a=$o(e);return{ff:function(p){return t},tt:function(p){return n},implies:function(p){return function(i){return function(r){return h(p(r))(i(r))}}},conj:function(p){return function(i){return function(r){return v(p(r))(i(r))}}},disj:function(p){return function(i){return function(r){return s(p(r))(i(r))}}},not:function(p){return function(i){return a(p(i))}}}};var ee=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ha=function(e){return function(t){return e(t.value0)(t.value1)}};var sn=function(e){return e.value1};var _a={map:function(e){return function(t){return new ee(t.value0,e(t.value1))}}};var An=function(e){return e.value0};var Td=function(e){var t=Ne(e);return function(n){var h=Ne(n);return{eq:function(v){return function(s){return t(v.value0)(s.value0)&&h(v.value1)(s.value1)}}}}},du=function(e){var t=Me(e),n=Td(e.Eq0());return function(h){var v=Me(h),s=n(h.Eq0());return{compare:function(a){return function(p){var i=t(a.value0)(p.value0);return i instanceof ce?ce.value:i instanceof pe?pe.value:v(a.value1)(p.value1)}},Eq0:function(){return s}}}};var Ir=function(e){return e.bimap};var GI={append:function(e){return function(t){return e instanceof z?e:t}}};var DC=function(){return{mempty:J.value,Semigroup0:function(){return GI}}}();var Z=function(e){return e};var Fd=function(){return Z};var jI=Fd();var cn=function(){return jI};var JI=De(be);var KI=cn();var Rt=function(e){return e.foldr};var At=function(e){var t=oa(e.Apply0()),n=te(e);return function(h){var v=Rt(h);return function(s){return v(function(a){return t(s(a))})(n(void 0))}}},Ad=function(e){var t=At(e);return function(n){return Qe(t(n))}};var xt=function(e){return e.foldl};var lo=function(e){var t=xt(e);return function(n){var h=me(n.Semigroup0()),v=ot(n);return function(s){return function(a){var p=function(i){return function(r){return i.init?{init:!1,acc:r}:{init:!1,acc:h(i.acc)(h(s)(r))}}};return t(p)({init:!0,acc:v})(a).acc}}}};var ln={foldr:function(e){return function(t){return function(n){if(n instanceof J)return t;if(n instanceof z)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof J)return t;if(n instanceof z)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ot(e);return function(n){return function(h){if(h instanceof J)return t;if(h instanceof z)return n(h.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,h.constructor.name])}}}};var xd={foldr:function(e){return function(t){return function(n){if(n instanceof Be)return t;if(n instanceof ke)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Be)return t;if(n instanceof ke)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ot(e);return function(n){return function(h){if(h instanceof Be)return t;if(h instanceof ke)return n(h.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,h.constructor.name])}}}};var TC=function(e){var t=Rt(e);return function(n){var h=me(n.Semigroup0()),v=ot(n);return function(s){return t(function(a){return function(p){return h(s(a))(p)}})(v)}}},Et={foldr:dC,foldl:pC,foldMap:function(e){return TC(Et)(e)}};var Bt=function(e){return e.foldMap};var Id=function(e){var t=Bt(e)(DC);return function(n){var h=Ne(n);return function(v){var s=t(function(a){var p=h(v)(a.value0);return p?new z(a.value1):J.value});return function(a){return KI(s(a))}}}};var hu=function(e){var t=Bt(e);return function(n){return t(n)(JI)}};var kd=function(e){return e.foldl1};var $C=function(){function e(v){return[v]}function t(v){return function(s){return[v,s]}}function n(v){return function(s){return function(a){return[v,s,a]}}}function h(v){return function(s){return v.concat(s)}}return function(v){return function(s){return function(a){return function(p){return function(i){function r(u,c){switch(c-u){case 0:return a([]);case 1:return s(e)(p(i[u]));case 2:return v(s(t)(p(i[u])))(p(i[u+1]));case 3:return v(v(s(n)(p(i[u])))(p(i[u+1])))(p(i[u+2]));default:var f=u+Math.floor((c-u)/4)*2;return v(s(h)(r(u,f)))(r(f,c))}}return r(0,i.length)}}}}}}();var IR=De(be),mn=function(e){return e.traverse};var Tv={traverse:function(e){var t=te(e),n=V(e.Apply0().Functor0());return function(h){return function(v){if(v instanceof J)return t(J.value);if(v instanceof z)return n(z.create)(h(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[h.constructor.name,v.constructor.name])}}},sequence:function(e){var t=te(e),n=V(e.Apply0().Functor0());return function(h){if(h instanceof J)return t(J.value);if(h instanceof z)return n(z.create)(h.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[h.constructor.name])}},Functor0:function(){return St},Foldable1:function(){return ln}};var PC=function(e){var t=mn(e);return function(n){return t(n)(IR)}},ni={traverse:function(e){var t=e.Apply0();return $C(ut(t))(V(t.Functor0()))(te(e))},sequence:function(e){return PC(ni)(e)},Functor0:function(){return wt},Foldable1:function(){return Et}};var NC=function(e){return function(t){return function(n){return function(h){return function(v){return function(s){for(var a=[],p=s;;){var i=v(p);if(e(i))return a;var r=t(i);a.push(n(r)),p=h(r)}}}}}}};var BC=function(e){return function(t){return function(n){return function(h){return function(v){return function(s){for(var a=[],p=s;;){var i=v(p);a.push(n(i));var r=h(i);if(e(r))return a;p=t(r)}}}}}}};var BR=Vr();var Lv={unfoldr1:BC(la)(BR)(An)(sn)};var UR=Vr(),fo=function(e){return e.unfoldr};var oi={unfoldr:NC(la)(UR)(An)(sn),Unfoldable10:function(){return Lv}};var Pn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Pd=function(e){var t=fr(e);return function(n){return new Pn(n,t)}};var Nd=function(e){var t=vn(e.Plus1().Alt0()),n=te(e.Applicative0());return function(h){return t(n(h.value0))(h.value1)}};var Rs=function(e){var t=V(e);return{map:function(n){return function(h){return new Pn(n(h.value0),t(n)(h.value1))}}}};var sl=function(e){var t=Bt(e),n=xt(e),h=Rt(e);return{foldMap:function(v){var s=me(v.Semigroup0()),a=t(v);return function(p){return function(i){return s(p(i.value0))(a(p)(i.value1))}}},foldl:function(v){return function(s){return function(a){return n(v)(v(s)(a.value0))(a.value1)}}},foldr:function(v){return function(s){return function(a){return v(a.value0)(h(v)(s)(a.value1))}}}}};var Iv=function(e){var t=xt(e),n=Rt(e),h=sl(e);return{foldMap1:function(v){var s=me(v);return function(a){return function(p){return t(function(i){return function(r){return s(i)(a(r))}})(a(p.value0))(p.value1)}}},foldr1:function(v){return function(s){return rt(s.value0)(v(s.value0))(n(function(a){var p=rt(a)(v(a));return function(i){return z.create(p(i))}})(J.value)(s.value1))}},foldl1:function(v){return function(s){return t(v)(s.value0)(s.value1)}},Foldable0:function(){return h}}};var Ke=function(){function e(){}return e.value=new e,e}(),Se=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rv=function(e){return e},JR=function(e){return new Se(e.value0,e.value1)};var KR=function(e){var t=function(n){return function(h){var v=n,s=!1,a;function p(i,r){if(r instanceof Se&&r.value1 instanceof Se&&r.value1.value1 instanceof Se){v=new Se(r,i),h=r.value1.value1.value1;return}var u=function(f){return f instanceof Se&&f.value1 instanceof Se&&f.value1.value1 instanceof Ke?new Se(e(f.value0),new Se(e(f.value1.value0),Ke.value)):f instanceof Se&&f.value1 instanceof Ke?new Se(e(f.value0),Ke.value):Ke.value},c=function(f){return function(l){var o=f,d=!1,_;function m(y,b){if(y instanceof Se&&y.value0 instanceof Se&&y.value0.value1 instanceof Se&&y.value0.value1.value1 instanceof Se){o=y.value1,l=new Se(e(y.value0.value0),new Se(e(y.value0.value1.value0),new Se(e(y.value0.value1.value1.value0),b)));return}return d=!0,b}for(;!d;)_=m(o,l);return _}};return s=!0,c(i)(u(r))}for(;!s;)a=p(v,h);return a}};return t(Ke.value)},$v={map:KR};var pr={foldr:function(e){return function(t){var n=function(){var v=function(s){return function(a){var p=s,i=!1,r;function u(c,f){if(f instanceof Ke)return i=!0,c;if(f instanceof Se){p=new Se(f.value0,c),a=f.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[c.constructor.name,f.constructor.name])}for(;!i;)r=u(p,a);return r}};return v(Ke.value)}(),h=xt(pr)(Qe(e))(t);return function(v){return h(n(v))}}},foldl:function(e){var t=function(n){return function(h){var v=n,s=!1,a;function p(i,r){if(r instanceof Ke)return s=!0,i;if(r instanceof Se){v=e(i)(r.value0),h=r.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[r.constructor.name])}for(;!s;)a=p(v,h);return a}};return t},foldMap:function(e){var t=me(e.Semigroup0()),n=ot(e);return function(h){return xt(pr)(function(v){var s=t(v);return function(a){return s(h(a))}})(n)}}};var QR=Rt(pr);var Bd={append:function(e){return function(t){return QR(Se.create)(t)(e)}}},VC=me(Bd);var GC={append:function(e){return function(t){return new Pn(e.value0,VC(e.value1)(JR(t)))}}};var XR={alt:VC,Functor0:function(){return $v}},jC=function(){return{empty:Ke.value,Alt0:function(){return XR}}}();var vu=function(){var e=function(t){return function(n){var h=t,v=!1,s;function a(p,i){if(i instanceof Ke)return v=!0,p;if(i instanceof Se){h=new Se(i.value0,p),n=i.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[p.constructor.name,i.constructor.name])}for(;!v;)s=a(h,n);return s}};return e(Ke.value)}();var YC=function(e){return e instanceof Ke};var Ud=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ew=function(e){var t=!1,n;function h(v){if(v.value0 instanceof Ke&&v.value1 instanceof Ke)return t=!0,J.value;if(v.value0 instanceof Ke){e=new Ud(vu(v.value1),Ke.value);return}if(v.value0 instanceof Se)return t=!0,new z(new ee(v.value0.value0,new Ud(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=h(e);return n},tw=function(e){return function(t){return new Ud(e.value0,new Se(t,e.value1))}};var nw=function(e){return e.value0 instanceof Ke&&e.value1 instanceof Ke};var rw=function(){return new Ud(Ke.value,Ke.value)}();var $s=function(){function e(){}return e.value=new e,e}(),qd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ow=function(e){return function(t){if(e instanceof $s)return t;if(t instanceof $s)return e;if(e instanceof qd)return new qd(e.value0,tw(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},a$=function(e){return function(t){return function(n){var h=function(s){return function(a){return function(p){var i=s,r=a,u=!1,c;function f(l,o,d){if(d instanceof Ke)return u=!0,o;if(d instanceof Se){i=l,r=l(o)(d.value0),p=d.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[l.constructor.name,o.constructor.name,d.constructor.name])}for(;!u;)c=f(i,r,p);return c}}},v=function(s){return function(a){var p=s,i=!1,r;function u(c,f){var l=ew(c);if(l instanceof J)return i=!0,h(function(o){return function(d){return d(o)}})(t)(f);if(l instanceof z){p=l.value0.value1,a=new Se(e(l.value0.value0),f);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[l.constructor.name])}for(;!i;)r=u(p,a);return r}};return v(n)(Ke.value)}}},aw=function(e){if(e instanceof $s)return J.value;if(e instanceof qd)return new z(new ee(e.value0,function(){var t=nw(e.value1);return t?$s.value:a$(ow)($s.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var iw=function(){return $s.value}(),uw=ow;var sw={append:uw};var cw=function(e){return function(t){return uw(e)(new qd(t,rw))}};var u$=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}},s$=me(sw);var kv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ll=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lw=function(e){var t=!1,n;function h(v){var s=function(i){return i},a=function(i){return function(r){return new kv(i.value0,s$(i.value1)(r))}};if(v.value0 instanceof cl){var p=aw(v.value1);if(p instanceof J)return t=!0,new cl(v.value0.value0);if(p instanceof z){e=a(s(p.value0.value0)(v.value0.value0))(p.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[p.constructor.name])}if(v.value0 instanceof ll)return t=!0,new ll(v.value0.value0,function(i){return a(v.value0.value1(i))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=h(e);return n},ai=function(e){var t=V(e);return function(n){var h=n.Monad0(),v=V(h.Bind1().Apply0().Functor0()),s=te(h.Applicative0()),a=Qn(n);return function(p){var i=function(r){var u=lw(r);if(u instanceof cl)return v(Zt.create)(s(u.value0));if(u instanceof ll)return v(un.create)(p(t(u.value1)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[u.constructor.name])};return a(i)}}};var fw=function(e){return new kv(e,iw)};var fl={Applicative0:function(){return Rr},Bind1:function(){return Nn}},gu={map:function(e){return function(t){return tn(Nn)(function(){var n=te(Rr);return function(h){return n(e(h))}}())(t)}}},Nn={bind:function(e){return function(t){return new kv(e.value0,cw(e.value1)(t))}},Apply0:function(){return Ov(0)}},Rr={pure:function(e){return fw(cl.create(e))},Apply0:function(){return Ov(0)}},Ov=u$("freeApply","Control.Monad.Free",function(){return{apply:jn(fl),Functor0:function(){return gu}}}),Hv=Ov(77);var c$=te(Rr);var yt=function(e){return fw(new ll(e,function(t){return c$(t)}))};var dw=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),h=te(t.Applicative0()),v=Qn(e);return function(s){var a=function(p){var i=lw(p);if(i instanceof cl)return n(Zt.create)(h(i.value0));if(i instanceof ll)return n(function(r){return un.create(i.value1(r))})(s(i.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[i.constructor.name])};return v(a)}};var Kr=function(e){return e.state},dl=function(e){var t=Kr(e);return function(n){return t(function(h){return new ee(void 0,n)})}},Oo=function(e){var t=Kr(e);return function(n){return t(function(h){return new ee(void 0,n(h))})}},ks=function(e){var t=Kr(e);return function(n){return t(function(h){var v=n(h);return new ee(v,v)})}},Os=function(e){var t=Kr(e);return function(n){return t(function(h){return new ee(n(h),h)})}},yu=function(e){return Kr(e)(function(t){return new ee(t,t)})};var f$={dimap:function(e){return function(t){return function(n){return function(h){return n(e(h))}}}}},va={first:function(e){return function(t){return e(An(t))}},second:function(e){return function(t){return e(sn(t))}},Profunctor0:function(){return f$}};var zd={dimap:function(e){return function(t){return function(n){return function(h){return t(n(e(h)))}}}}},Du=function(e){return e.dimap};var $r={first:function(e){return function(t){return new ee(e(t.value0),t.value1)}},second:V(_a),Profunctor0:function(){return zd}},bu=function(e){return e.second},Hs=function(e){return e.first};var C$=cn(),w$=De(be);var S$=function(e){return C$(e(w$))},Xn=function(e){return function(t){return S$(t)(e)}};var Gd=function(e){return e},Qr=function(e){return function(t){return Gd(e)(Te(t))}};var qv=function(e){return function(t){return t.split(e)}};var _r=function(e){return function(t){return t.join(e)}};var zv=function(e){return e===""};var xn=function(){var e={},t="Pure",n="Throw",h="Catch",v="Sync",s="Async",a="Bind",p="Bracket",i="Fork",r="Sequential",u="Map",c="Apply",f="Alt",l="Cons",o="Resume",d="Release",_="Finalizer",m="Finalized",y="Forked",b="Fiber",S="Thunk";function D(N,K,O,B){this.tag=N,this._1=K,this._2=O,this._3=B}function g(N){var K=function(O,B,W){return new D(N,O,B,W)};return K.tag=N,K}function C(N){return new D(t,void 0)}function F(N){try{N()}catch(K){setTimeout(function(){throw K},0)}}function E(N,K,O){try{return K(O())}catch(B){return N(B)}}function T(N,K,O){try{return K(O)()}catch(B){return O(N(B))(),C}}var M=function(){var N=1024,K=0,O=0,B=new Array(N),W=!1;function P(){var Q;for(W=!0;K!==0;)K--,Q=B[O],B[O]=void 0,O=(O+1)%N,Q();W=!1}return{isDraining:function(){return W},enqueue:function(Q){var G,ve;K===N&&(ve=W,P(),W=ve),B[(O+K)%N]=Q,K++,W||P()}}}();function w(N){var K={},O=0,B=0;return{register:function(W){var P=O++;W.onComplete({rethrow:!0,handler:function(Q){return function(){B--,delete K[P]}}})(),K[P]=W,B++},isEmpty:function(){return B===0},killAll:function(W,P){return function(){if(B===0)return P();var Q=0,G={};function ve(ye){G[ye]=K[ye].kill(W,function(ie){return function(){delete G[ye],Q--,N.isLeft(ie)&&N.fromLeft(ie)&&setTimeout(function(){throw N.fromLeft(ie)},0),Q===0&&P()}})()}for(var Ee in K)K.hasOwnProperty(Ee)&&(Q++,ve(Ee));return K={},O=0,B=0,function(ye){return new D(v,function(){for(var ie in G)G.hasOwnProperty(ie)&&G[ie]()})}}}}}var L=0,A=1,R=2,x=3,I=4,$=5,k=6;function H(N,K,O){var B=0,W=L,P=O,Q=null,G=null,ve=null,Ee=null,ye=null,ie=0,Ce=0,Dt=null,Vt=!0;function Ot(se){for(var ne,j,re;;)switch(ne=null,j=null,re=null,W){case R:W=A;try{P=ve(P),Ee===null?ve=null:(ve=Ee._1,Ee=Ee._2)}catch(Pe){W=$,Q=N.left(Pe),P=null}break;case x:N.isLeft(P)?(W=$,Q=P,P=null):ve===null?W=$:(W=R,P=N.fromRight(P));break;case A:switch(P.tag){case a:ve&&(Ee=new D(l,ve,Ee)),ve=P._2,W=A,P=P._1;break;case t:ve===null?(W=$,P=N.right(P._1)):(W=R,P=P._1);break;case v:W=x,P=E(N.left,N.right,P._1);break;case s:W=I,P=T(N.left,P._1,function(Pe){return function(){B===se&&(B++,M.enqueue(function(){B===se+1&&(W=x,P=Pe,Ot(B))}))}});return;case n:W=$,Q=N.left(P._1),P=null;break;case h:ve===null?ye=new D(l,P,ye,G):ye=new D(l,P,new D(l,new D(o,ve,Ee),ye,G),G),ve=null,Ee=null,W=A,P=P._1;break;case p:ie++,ve===null?ye=new D(l,P,ye,G):ye=new D(l,P,new D(l,new D(o,ve,Ee),ye,G),G),ve=null,Ee=null,W=A,P=P._1;break;case i:W=x,ne=H(N,K,P._2),K&&K.register(ne),P._1&&ne.run(),P=N.right(ne);break;case r:W=A,P=q(N,K,P._1);break}break;case $:if(ve=null,Ee=null,ye===null)W=k,P=G||Q||P;else switch(ne=ye._3,re=ye._1,ye=ye._2,re.tag){case h:G&&G!==ne&&ie===0?W=$:Q&&(W=A,P=re._2(N.fromLeft(Q)),Q=null);break;case o:G&&G!==ne&&ie===0||Q?W=$:(ve=re._1,Ee=re._2,W=R,P=N.fromRight(P));break;case p:ie--,Q===null&&(j=N.fromRight(P),ye=new D(l,new D(d,re._2,j),ye,ne),(G===ne||ie>0)&&(W=A,P=re._3(j)));break;case d:ye=new D(l,new D(m,P,Q),ye,G),W=A,G&&G!==ne&&ie===0?P=re._1.killed(N.fromLeft(G))(re._2):Q?P=re._1.failed(N.fromLeft(Q))(re._2):P=re._1.completed(N.fromRight(P))(re._2),Q=null,ie++;break;case _:ie++,ye=new D(l,new D(m,P,Q),ye,G),W=A,P=re._1;break;case m:ie--,W=$,P=re._1,Q=re._2;break}break;case k:for(var le in Dt)Dt.hasOwnProperty(le)&&(Vt=Vt&&Dt[le].rethrow,F(Dt[le].handler(P)));Dt=null,G&&Q?setTimeout(function(){throw N.fromLeft(Q)},0):N.isLeft(P)&&Vt&&setTimeout(function(){if(Vt)throw N.fromLeft(P)},0);return;case L:W=A;break;case I:return}}function Ye(se){return function(){if(W===k)return Vt=Vt&&se.rethrow,se.handler(P)(),function(){};var ne=Ce++;return Dt=Dt||{},Dt[ne]=se,function(){Dt!==null&&delete Dt[ne]}}}function ue(se,ne){return function(){if(W===k)return ne(N.right(void 0))(),function(){};var j=Ye({rethrow:!1,handler:function(){return ne(N.right(void 0))}})();switch(W){case L:G=N.left(se),W=k,P=G,Ot(B);break;case I:G===null&&(G=N.left(se)),ie===0&&(W===I&&(ye=new D(l,new D(_,P(se)),ye,G)),W=$,P=null,Q=null,Ot(++B));break;default:G===null&&(G=N.left(se)),ie===0&&(W=$,P=null,Q=null)}return j}}function he(se){return function(){var ne=Ye({rethrow:!1,handler:se})();return W===L&&Ot(B),ne}}return{kill:ue,join:he,onComplete:Ye,isSuspended:function(){return W===L},run:function(){W===L&&(M.isDraining()?Ot(B):M.enqueue(function(){Ot(B)}))}}}function U(N,K,O,B){var W=0,P={},Q=0,G={},ve=new Error("[ParAff] Early exit"),Ee=null,ye=e;function ie(Ye,ue,he){var se=ue,ne=null,j=null,re=0,le={},Pe,tt;e:for(;;)switch(Pe=null,se.tag){case y:if(se._3===e&&(Pe=P[se._1],le[re++]=Pe.kill(Ye,function(st){return function(){re--,re===0&&he(st)()}})),ne===null)break e;se=ne._2,j===null?ne=null:(ne=j._1,j=j._2);break;case u:se=se._2;break;case c:case f:ne&&(j=new D(l,ne,j)),ne=se,se=se._1;break}if(re===0)he(N.right(void 0))();else for(tt=0,Pe=re;tt<Pe;tt++)le[tt]=le[tt]();return le}function Ce(Ye,ue,he){var se,ne,j,re,le,Pe;N.isLeft(Ye)?(se=Ye,ne=null):(ne=Ye,se=null);e:for(;;){if(j=null,re=null,le=null,Pe=null,Ee!==null)return;if(ue===null){B(se||ne)();return}if(ue._3!==e)return;switch(ue.tag){case u:se===null?(ue._3=N.right(ue._1(N.fromRight(ne))),ne=ue._3):ue._3=se;break;case c:if(j=ue._1._3,re=ue._2._3,se){if(ue._3=se,le=!0,Pe=Q++,G[Pe]=ie(ve,se===j?ue._2:ue._1,function(){return function(){delete G[Pe],le?le=!1:he===null?Ce(se,null,null):Ce(se,he._1,he._2)}}),le){le=!1;return}}else{if(j===e||re===e)return;ne=N.right(N.fromRight(j)(N.fromRight(re))),ue._3=ne}break;case f:if(j=ue._1._3,re=ue._2._3,j===e&&N.isLeft(re)||re===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&re!==e&&N.isLeft(re))se=ne===j?re:j,ne=null,ue._3=se;else if(ue._3=ne,le=!0,Pe=Q++,G[Pe]=ie(ve,ne===j?ue._2:ue._1,function(){return function(){delete G[Pe],le?le=!1:he===null?Ce(ne,null,null):Ce(ne,he._1,he._2)}}),le){le=!1;return}break}he===null?ue=null:(ue=he._1,he=he._2)}}function Dt(Ye){return function(ue){return function(){delete P[Ye._1],Ye._3=ue,Ce(ue,Ye._2._1,Ye._2._2)}}}function Vt(){var Ye=A,ue=O,he=null,se=null,ne,j;e:for(;;)switch(ne=null,j=null,Ye){case A:switch(ue.tag){case u:he&&(se=new D(l,he,se)),he=new D(u,ue._1,e,e),ue=ue._2;break;case c:he&&(se=new D(l,he,se)),he=new D(c,e,ue._2,e),ue=ue._1;break;case f:he&&(se=new D(l,he,se)),he=new D(f,e,ue._2,e),ue=ue._1;break;default:j=W++,Ye=$,ne=ue,ue=new D(y,j,new D(l,he,se),e),ne=H(N,K,ne),ne.onComplete({rethrow:!1,handler:Dt(ue)})(),P[j]=ne,K&&K.register(ne)}break;case $:if(he===null)break e;he._1===e?(he._1=ue,Ye=A,ue=he._2,he._2=e):(he._2=ue,ue=he,se===null?he=null:(he=se._1,se=se._2))}for(ye=ue,j=0;j<W;j++)P[j].run()}function Ot(Ye,ue){Ee=N.left(Ye);var he;for(var se in G)if(G.hasOwnProperty(se)){he=G[se];for(se in he)he.hasOwnProperty(se)&&he[se]()}G=null;var ne=ie(Ye,ye,ue);return function(j){return new D(s,function(re){return function(){for(var le in ne)ne.hasOwnProperty(le)&&ne[le]();return C}})}}return Vt(),function(Ye){return new D(s,function(ue){return function(){return Ot(Ye,ue)}})}}function q(N,K,O){return new D(s,function(B){return function(){return U(N,K,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(h),D.Sync=g(v),D.Async=g(s),D.Bind=g(a),D.Bracket=g(p),D.Fork=g(i),D.Seq=g(r),D.ParMap=g(u),D.ParApply=g(c),D.ParAlt=g(f),D.Fiber=H,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=C,D}(),ww=xn.Pure,Sw=xn.Throw;function Ew(e){return function(t){return xn.Catch(e,t)}}function Tw(e){return function(t){return t.tag===xn.Pure.tag?xn.Pure(e(t._1)):xn.Bind(t,function(n){return xn.Pure(e(n))})}}function Mw(e){return function(t){return xn.Bind(e,t)}}function Vv(e){return function(t){return xn.Fork(e,t)}}var Lw=xn.Sync;function Fw(e){return function(t){return xn.ParMap(e,t)}}function Aw(e){return function(t){return xn.ParApply(e,t)}}var _o=xn.Async;function jd(e){return function(t){return function(n){return xn.Bracket(e,t,n)}}}function xw(e,t){return function(){return xn.Fiber(e,null,t)}}var L$=function(){function e(n,h){return n===0&&typeof setImmediate<"u"?setImmediate(h):setTimeout(h,n)}function t(n,h){return n===0&&typeof clearImmediate<"u"?clearImmediate(h):clearTimeout(h)}return function(n,h){return xn.Async(function(v){return function(){var s=e(h,v(n()));return function(){return xn.Sync(function(){return n(t(h,s))})}}})}}(),Iw=xn.Seq;function Bn(e){return new Error(e)}function Yr(e){return function(){throw e}}function Jd(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var Rw=function(e){return Yr(Bn(e))};var nr=function(e){return e.throwError};var I$={throwError:Yr,Monad0:function(){return Ro}};var $w={catchError:Qe(Jd),MonadThrow0:function(){return I$}};var Ho=function(e){return e.catchError};var pl=function(e){var t=Ho(e),n=e.MonadThrow0().Monad0(),h=V(n.Bind1().Apply0().Functor0()),v=te(n.Applicative0());return function(s){return t(h(ke.create)(s))(function(a){return v(Be.create(a))})}};var kw=function(e){return function(t){return function(){return e(t())}}};var Kd=function(e){return function(t){return function(){for(var n=0,h=e.length;n<h;n++)t(e[n])()}}};var Qd={map:kw};var kr=function(e){return e.ask};var $t=function(e){return e.lift};var Xd={liftEffect:De(be),Monad0:function(){return Ro}},Ze=function(e){return e.liftEffect};var ga=function(e){return e.tell};var N$=V(Qa);var Gv=function(e){return e};var jv=function(e){return e};var Yd=function(e){return function(t){return e(t)}},Zd=function(e){var t=V(e);return{map:function(n){return Yd(t(N$(n)))}}};var Jv=function(e){return{Applicative0:function(){return yl(e)},Bind1:function(){return ep(e)}}},ep=function(e){var t=fe(e.Bind1()),n=te(e.Applicative0());return{bind:function(h){return function(v){return t(h)(pn(function(s){return n(Be.create(s))})(function(s){var a=v(s);return a}))}},Apply0:function(){return Bw(e)}}},Bw=function(e){var t=Zd(e.Bind1().Apply0().Functor0());return{apply:jn(Jv(e)),Functor0:function(){return t}}},yl=function(e){return{pure:function(){var t=te(e.Applicative0());return function(n){return Gv(t(ke.create(n)))}}(),Apply0:function(){return Bw(e)}}};var Ww=function(e){var t=Jv(e);return{throwError:function(){var n=te(e.Applicative0());return function(h){return Gv(n(Be.create(h)))}}(),Monad0:function(){return t}}};var Uw=function(e){var t=me(e);return function(n){var h=n.Bind1(),v=fe(h),s=te(n.Applicative0()),a=Zd(h.Apply0().Functor0());return{alt:function(p){return function(i){return v(p)(function(r){if(r instanceof ke)return s(new ke(r.value0));if(r instanceof Be)return v(i)(function(u){if(u instanceof ke)return s(new ke(u.value0));if(u instanceof Be)return s(new Be(t(r.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[r.constructor.name])})}},Functor0:function(){return a}}}};var B$=V(St);var Kv=function(e){return e},qw=function(e){return e};var tp={lift:function(e){var t=Eb(e)(z.create);return function(n){return Kv(t(n))}}},W$=$t(tp);var U$=function(e){var t=V(e);return{map:function(n){return function(h){return t(B$(n))(h)}}}},np=function(e){return{Applicative0:function(){return Xv(e)},Bind1:function(){return Qv(e)}}},Qv=function(e){var t=fe(e.Bind1()),n=te(e.Applicative0());return{bind:function(h){return function(v){return t(h)(function(s){if(s instanceof J)return n(J.value);if(s instanceof z){var a=v(s.value0);return a}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[s.constructor.name])})}},Apply0:function(){return zw(e)}}},zw=function(e){var t=U$(e.Bind1().Apply0().Functor0());return{apply:jn(np(e)),Functor0:function(){return t}}},Xv=function(e){return{pure:function(){var t=te(e.Applicative0());return function(n){return Kv(t(z.create(n)))}}(),Apply0:function(){return zw(e)}}};var Vw=function(e){var t=Qn(e),n=e.Monad0(),h=fe(n.Bind1()),v=te(n.Applicative0()),s=np(n);return{tailRecM:function(a){var p=t(function(i){var r=a(i);return h(r)(function(u){return v(function(){if(u instanceof J)return new Zt(J.value);if(u instanceof z&&u.value0 instanceof un)return new un(u.value0.value0);if(u instanceof z&&u.value0 instanceof Zt)return new Zt(new z(u.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[u.constructor.name])}())})});return function(i){return Kv(p(i))}},Monad0:function(){return s}}},Gw=function(e){var t=e.Monad0(),n=W$(t),h=Kr(e),v=np(t);return{state:function(s){return n(h(s))},Monad0:function(){return v}}};var jw=function(e){return e};var si=function(e){return e};var rp={lift:function(e){return function(t){return jw(Te(t))}}},q$=$t(rp),Jw=function(e){return function(t){return function(n){return e(t(n))}}},z$=function(e){return{map:function(){var t=V(e);return function(n){return Jw(t(n))}}()}};var Kw=function(e){var t=ut(e),n=z$(e.Functor0());return{apply:function(h){return function(v){return function(s){return t(h(s))(v(s))}}},Functor0:function(){return n}}},wu=function(e){var t=fe(e),n=Kw(e.Apply0());return{bind:function(h){return function(v){return function(s){return t(h(s))(function(a){var p=v(a);return p(s)})}}},Apply0:function(){return n}}};var op=function(e){var t=Kw(e.Apply0());return{pure:function(){var n=te(e);return function(h){return jw(Te(n(h)))}}(),Apply0:function(){return t}}},Dl=function(e){var t=op(e.Applicative0()),n=wu(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Ws=function(e){var t=Dl(e);return{ask:te(e.Applicative0()),Monad0:function(){return t}}};var ci=function(e){var t=e.Monad0(),n=Dl(t);return{liftEffect:function(){var h=q$(t),v=Ze(e);return function(s){return h(v(s))}}(),Monad0:function(){return n}}},Us=function(e){var t=e.Monad0(),n=tn(t.Bind1()),h=te(t.Applicative0()),v=Qn(e),s=Dl(t);return{tailRecM:function(a){return function(p){var i=function(r){return function(u){var c=a(u);return n(h)(c(r))}};return function(r){return v(i(r))(p)}}},Monad0:function(){return s}}};var Zv=function(e){return e},em=function(e){return e};var ap=function(e){return function(t){return e(t)}},tm=function(e){var t=V(e);return{map:function(n){return ap(t(function(h){return new ee(n(h.value0),h.value1)}))}}};var ip=function(e){var t=me(e);return function(n){var h=ut(n),v=n.Functor0(),s=V(v),a=tm(v);return{apply:function(p){return function(i){var r=function(u){return function(c){return new ee(u.value0(c.value0),t(u.value1)(c.value1))}};return h(s(r)(p))(i)}},Functor0:function(){return a}}}},nm=function(e){var t=me(e),n=ip(e);return function(h){var v=fe(h),s=h.Apply0(),a=V(s.Functor0()),p=n(s);return{bind:function(i){return function(r){return v(i)(function(u){var c=r(u.value0);return a(function(f){return new ee(f.value0,t(u.value1)(f.value1))})(c)})}},Apply0:function(){return p}}}};var rm=function(e){var t=ot(e),n=ip(e.Semigroup0());return function(h){var v=te(h),s=n(h.Apply0());return{pure:function(a){return v(new ee(a,t))},Apply0:function(){return s}}}},Qw=function(e){var t=rm(e),n=nm(e.Semigroup0());return function(h){var v=t(h.Applicative0()),s=n(h.Bind1());return{Applicative0:function(){return v},Bind1:function(){return s}}}};var Xw=function(e){var t=e.Semigroup0(),n=Qw(e);return function(h){var v=n(h);return{tell:function(){var s=te(h.Applicative0()),a=ee.create(void 0);return function(p){return Zv(s(a(p)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var qs=function(e){return e.sequential},li=function(e){return e.parallel};var K$=De(be),Q$=function(e){var t=qs(e),n=At(e.Applicative1()),h=li(e);return function(v){var s=n(v);return function(a){var p=s(function(i){return h(a(i))});return function(i){return t(p(i))}}}};var zs=function(e){var t=Q$(e);return function(n){return t(n)(K$)}};var bl=function(e){return e()};var Zw=function(e){return e()};var eS=function(e){throw new Error(e)};var tS=function(){return eS};var tk=tS(),nk=Zw,fi=function(e){return nk(function(){return tk(e)})};var nS=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}},rk=te(Qt),sm=Ht(Ge),rS=V(Ge);var ok=function(e){return e},oS=Vv(!1);var ak={map:Fw},di={map:Tw},ik=V(di),aS=Vv(!0),uk=function(){var e=function(h){if(h instanceof ke)return h.value0;if(h instanceof Be)return fi("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[h.constructor.name])},t=function(h){if(h instanceof Be)return h.value0;if(h instanceof ke)return fi("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[h.constructor.name])},n=function(h){if(h instanceof Be)return!0;if(h instanceof ke)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[h.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:Be.create,right:ke.create}}(),iS=function(e){return xw(uk,e)},uS=function(e){return function(){var n=iS(e)();return n.run(),n}},cm=function(e){return sm(uS(e))};var sk=function(e){return function(t){return jd(e)({killed:Te(t),failed:Te(t),completed:Te(t)})}},ck={apply:Aw,Functor0:function(){return ak}};var Eu={Applicative0:function(){return eo},Bind1:function(){return wn}},wn={bind:Mw,Apply0:function(){return sS(0)}},eo={pure:ww,Apply0:function(){return sS(0)}},sS=nS("applyAff","Effect.Aff",function(){return{apply:jn(Eu),Functor0:function(){return di}}});var cp=te(eo),cS=fe(wn);var lk=tn(wn);var lS=function(e){return function(t){return sk(cp(void 0))(Te(e))(Te(t))}};var Sn={liftEffect:Lw,Monad0:function(){return Eu}},sp=Ze(Sn),Tu=function(e){return ok(Te(sp(e)))},Cl=function(e){return _o(function(t){return rS(Tu)(e.join(t))})},fS={map:function(e){return function(t){return bl(iS(ik(e)(Cl(t))))}}};var wl=function(e){return function(t){return cS(sp(t.isSuspended))(function(n){return n?sp(sm(t.kill(e,Te(rk(void 0))))):_o(function(h){return rS(Tu)(t.kill(e,h))})})}};var lp={throwError:Sw,Monad0:function(){return Eu}},dS={catchError:Ew,MonadThrow0:function(){return lp}},fk=pl(dS);var dk=function(e){return function(t){return uS(lk(function(n){return sp(e(n))})(fk(t)))}},Sl=function(e){return function(t){return sm(dk(e)(t))}};var pi={parallel:Z,sequential:Iw,Monad0:function(){return Eu},Applicative1:function(){return pS(0)}},pS=nS("applicativeParAff","Effect.Aff",function(){return{pure:function(){var e=li(pi);return function(t){return e(cp(t))}}(),Apply0:function(){return ck}}}),lm=pS(136);var pk=zs(pi)(Et);var hk={append:function(e){return function(t){return function(n){return pk([e(n),t(n)])}}}};var Mu={tailRecM:function(e){var t=function(n){return cS(e(n))(function(h){if(h instanceof Zt)return cp(h.value0);if(h instanceof un)return t(h.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[h.constructor.name])})};return t},Monad0:function(){return Eu}};var fm=Te(cp(void 0)),hS={mempty:fm,Semigroup0:function(){return hk}};var hi=function(){function e(){this.head=null,this.last=null,this.size=0}function t(u,c){this.queue=u,this.value=c,this.next=null,this.prev=null}function n(u){this.draining=!1,this.error=null,this.value=u,this.takes=new e,this.reads=new e,this.puts=new e}var h={};function v(u){try{u()}catch(c){setTimeout(function(){throw c},0)}}function s(u,c){var f=new t(u,c);switch(u.size){case 0:u.head=f;break;case 1:f.prev=u.head,u.head.next=f,u.last=f;break;default:f.prev=u.last,u.last.next=f,u.last=f}return u.size++,f}function a(u){var c;switch(u.size){case 0:return null;case 1:c=u.head,u.head=null;break;case 2:c=u.last,u.head.next=null,u.last=null;break;default:c=u.last,u.last=c.prev,u.last.next=null}return c.prev=null,c.queue=null,u.size--,c.value}function p(u){var c;switch(u.size){case 0:return null;case 1:c=u.head,u.head=null;break;case 2:c=u.head,u.last.prev=null,u.head=u.last,u.last=null;break;default:c=u.head,u.head=c.next,u.head.prev=null}return c.next=null,c.queue=null,u.size--,c.value}function i(u){if(u.queue!==null){if(u.queue.last===u){a(u.queue);return}if(u.queue.head===u){p(u.queue);return}u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),u.queue.size--,u.queue=null,u.value=null,u.next=null,u.prev=null}}function r(u,c){if(!c.draining){var f=c.puts,l=c.takes,o=c.reads,d,_,m,y,b;for(c.draining=!0;;){if(d=null,_=null,m=null,y=c.value,b=o.size,c.error!==null){for(y=u.left(c.error);d=p(f);)v(d.cb(y));for(;_=p(o);)v(_(y));for(;m=p(l);)v(m(y));break}if(y===h&&(d=p(f))&&(c.value=y=d.value),y!==h){for(m=p(l);b--&&(_=p(o));)v(_(u.right(y)));m!==null&&(c.value=h,v(m(u.right(y))))}if(d!==null&&v(d.cb(u.right(void 0))),c.value===h&&f.size===0||c.value!==h&&l.size===0)break}c.draining=!1}}return n.EMPTY=h,n.putLast=s,n.takeLast=a,n.takeHead=p,n.deleteCell=i,n.drainVar=r,n}();function dm(){return new hi(hi.EMPTY)}function _S(e,t,n,h){return function(){var v=hi.putLast(n.puts,{cb:h,value:t});return hi.drainVar(e,n),function(){hi.deleteCell(v)}}}function vS(e,t,n){return function(){var h=hi.putLast(t.takes,n);return hi.drainVar(e,t),function(){hi.deleteCell(h)}}}var mS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yS=function(){function e(){}return e.value=new e,e}();var DS=function(){return{left:Be.create,right:ke.create,nothing:J.value,just:z.create,killed:mS.create,filled:gS.create,empty:yS.value}}();var bS=function(e){return function(t){return function(n){return _S(DS,e,t,n)}}};var CS=function(e){return function(t){return vS(DS,e,t)}};var mk=Ze(Sn);var pm=function(e){return _o(function(t){return function(){var h=CS(e)(t)();return Tu(h)}})};var El=function(e){return function(t){return _o(function(n){return function(){var v=bS(e)(t)(n)();return Tu(v)}})}};var Tl=mk(dm);var wk=$t(rp);var Vs={liftAff:De(be),MonadEffect0:function(){return Sn}},rr=function(e){return e.liftAff};var ES=function(e){var t=e.MonadEffect0(),n=ci(t);return{liftAff:function(){var h=wk(t.Monad0()),v=rr(e);return function(s){return h(v(s))}}(),MonadEffect0:function(){return n}}};var Po=Z,vm=Z;var Sk=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var LS=function(e){return function(t){return Po(function(n){return e(n.value0)(n.value1)})(t)}};var FS=function(e){return function(t){return vm(new Sk(e,t))}},mm={map:function(e){return function(t){return Po(function(n){return FS(function(h){return e(n.value0(h))})(n.value1)})(t)}}};var AS=FS(De(be));var Ue=function(){function e(){}return e.value=new e,e}(),Xe=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),_t=function(){function e(t,n,h,v,s,a,p){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=s,this.value5=a,this.value6=p}return e.create=function(t){return function(n){return function(h){return function(v){return function(s){return function(a){return function(p){return new e(t,n,h,v,s,a,p)}}}}}}},e}(),_i=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),ya=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),vi=function(){function e(t,n,h,v,s,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(s){return function(a){return new e(t,n,h,v,s,a)}}}}}},e}(),No=function(){function e(t,n,h,v,s,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(s){return function(a){return new e(t,n,h,v,s,a)}}}}}},e}(),mi=function(){function e(t,n,h,v,s,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(s){return function(a){return new e(t,n,h,v,s,a)}}}}}},e}(),fp=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}();var Ll=function(e){return function(t){return new Xe(Ue.value,e,t,Ue.value)}},Dm=function(e){var t=fo(e);return function(n){var h=function(v){var s=!1,a;function p(i){if(i instanceof Ke)return s=!0,J.value;if(i instanceof Se){if(i.value0 instanceof Ue){v=i.value1;return}if(i.value0 instanceof Xe&&i.value0.value0 instanceof Ue&&i.value0.value3 instanceof Ue)return s=!0,new z(new ee(new ee(i.value0.value1,i.value0.value2),i.value1));if(i.value0 instanceof Xe&&i.value0.value0 instanceof Ue)return s=!0,new z(new ee(new ee(i.value0.value1,i.value0.value2),new Se(i.value0.value3,i.value1)));if(i.value0 instanceof Xe){v=new Se(i.value0.value0,new Se(Ll(i.value0.value1)(i.value0.value2),new Se(i.value0.value3,i.value1)));return}if(i.value0 instanceof _t){v=new Se(i.value0.value0,new Se(Ll(i.value0.value1)(i.value0.value2),new Se(i.value0.value3,new Se(Ll(i.value0.value4)(i.value0.value5),new Se(i.value0.value6,i.value1)))));return}throw new Error("Failed pattern match at Data.Map.Internal (line 624, column 18 - line 633, column 71): "+[i.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 623, column 3 - line 623, column 19): "+[i.constructor.name])}for(;!s;)a=p(v);return a};return t(h)(new Se(n,Ke.value))}};var Da=function(e){var t=Me(e);return function(n){var h=function(v){var s=!1,a;function p(i){if(i instanceof Ue)return s=!0,J.value;if(i instanceof Xe){var r=t(n)(i.value1);if(r instanceof Ie)return s=!0,new z(i.value2);if(r instanceof ce){v=i.value0;return}v=i.value3;return}if(i instanceof _t){var u=t(n)(i.value1);if(u instanceof Ie)return s=!0,new z(i.value2);var c=t(n)(i.value4);if(c instanceof Ie)return s=!0,new z(i.value5);if(u instanceof ce){v=i.value0;return}if(c instanceof pe){v=i.value6;return}v=i.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[i.constructor.name])}for(;!s;)a=p(v);return a};return h}};var IS=function(e){return function(t){return function(n){var h=e,v=t,s=!1,a;function p(i,r,u){if(r instanceof Ke)return s=!0,u;if(r instanceof Se){if(r.value0 instanceof _i){h=i,v=r.value1,n=new Xe(u,r.value0.value0,r.value0.value1,r.value0.value2);return}if(r.value0 instanceof ya){h=i,v=r.value1,n=new Xe(r.value0.value0,r.value0.value1,r.value0.value2,u);return}if(r.value0 instanceof vi){h=i,v=r.value1,n=new _t(u,r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof No){h=i,v=r.value1,n=new _t(r.value0.value0,r.value0.value1,r.value0.value2,u,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof mi){h=i,v=r.value1,n=new _t(r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5,u);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[r.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[r.constructor.name,u.constructor.name])}for(;!s;)a=p(h,v,n);return a}}},Or=function(e){var t=IS(e),n=Me(e);return function(h){return function(v){var s=function(p){return function(i){var r=p,u=!1,c;function f(l,o){if(l instanceof Ke)return u=!0,new Xe(o.value0,o.value1,o.value2,o.value3);if(l instanceof Se){if(l.value0 instanceof _i)return u=!0,t(l.value1)(new _t(o.value0,o.value1,o.value2,o.value3,l.value0.value0,l.value0.value1,l.value0.value2));if(l.value0 instanceof ya)return u=!0,t(l.value1)(new _t(l.value0.value0,l.value0.value1,l.value0.value2,o.value0,o.value1,o.value2,o.value3));if(l.value0 instanceof vi){r=l.value1,i=new fp(new Xe(o.value0,o.value1,o.value2,o.value3),l.value0.value0,l.value0.value1,new Xe(l.value0.value2,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof No){r=l.value1,i=new fp(new Xe(l.value0.value0,l.value0.value1,l.value0.value2,o.value0),o.value1,o.value2,new Xe(o.value3,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof mi){r=l.value1,i=new fp(new Xe(l.value0.value0,l.value0.value1,l.value0.value2,l.value0.value3),l.value0.value4,l.value0.value5,new Xe(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[l.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[l.constructor.name,o.constructor.name])}for(;!u;)c=f(r,i);return c}},a=function(p){return function(i){var r=p,u=!1,c;function f(l,o){if(o instanceof Ue)return u=!0,s(l)(new fp(Ue.value,h,v,Ue.value));if(o instanceof Xe){var d=n(h)(o.value1);if(d instanceof Ie)return u=!0,t(l)(new Xe(o.value0,h,v,o.value3));if(d instanceof ce){r=new Se(new _i(o.value1,o.value2,o.value3),l),i=o.value0;return}r=new Se(new ya(o.value0,o.value1,o.value2),l),i=o.value3;return}if(o instanceof _t){var d=n(h)(o.value1);if(d instanceof Ie)return u=!0,t(l)(new _t(o.value0,h,v,o.value3,o.value4,o.value5,o.value6));var _=n(h)(o.value4);if(_ instanceof Ie)return u=!0,t(l)(new _t(o.value0,o.value1,o.value2,o.value3,h,v,o.value6));if(d instanceof ce){r=new Se(new vi(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),l),i=o.value0;return}if(d instanceof pe&&_ instanceof ce){r=new Se(new No(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),l),i=o.value3;return}r=new Se(new mi(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),l),i=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[l.constructor.name,o.constructor.name])}for(;!u;)c=f(r,i);return c}};return a(Ke.value)}}},bm=function(e){var t=IS(e),n=Me(e);return function(h){var v=function(i){return function(r){var u=i,c=!1,f;function l(o,d){if(o instanceof Ke)return c=!0,d;if(o instanceof Se){if(o.value0 instanceof _i&&o.value0.value2 instanceof Ue&&d instanceof Ue)return c=!0,t(o.value1)(new Xe(Ue.value,o.value0.value0,o.value0.value1,Ue.value));if(o.value0 instanceof ya&&o.value0.value0 instanceof Ue&&d instanceof Ue)return c=!0,t(o.value1)(new Xe(Ue.value,o.value0.value1,o.value0.value2,Ue.value));if(o.value0 instanceof _i&&o.value0.value2 instanceof Xe){u=o.value1,r=new _t(d,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof ya&&o.value0.value0 instanceof Xe){u=o.value1,r=new _t(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,d);return}return o.value0 instanceof _i&&o.value0.value2 instanceof _t?(c=!0,t(o.value1)(new Xe(new Xe(d,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Xe(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof ya&&o.value0.value0 instanceof _t?(c=!0,t(o.value1)(new Xe(new Xe(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Xe(o.value0.value0.value6,o.value0.value1,o.value0.value2,d)))):o.value0 instanceof vi&&o.value0.value2 instanceof Ue&&o.value0.value5 instanceof Ue&&d instanceof Ue?(c=!0,t(o.value1)(new _t(Ue.value,o.value0.value0,o.value0.value1,Ue.value,o.value0.value3,o.value0.value4,Ue.value))):o.value0 instanceof No&&o.value0.value0 instanceof Ue&&o.value0.value5 instanceof Ue&&d instanceof Ue?(c=!0,t(o.value1)(new _t(Ue.value,o.value0.value1,o.value0.value2,Ue.value,o.value0.value3,o.value0.value4,Ue.value))):o.value0 instanceof mi&&o.value0.value0 instanceof Ue&&o.value0.value3 instanceof Ue&&d instanceof Ue?(c=!0,t(o.value1)(new _t(Ue.value,o.value0.value1,o.value0.value2,Ue.value,o.value0.value4,o.value0.value5,Ue.value))):o.value0 instanceof vi&&o.value0.value2 instanceof Xe?(c=!0,t(o.value1)(new Xe(new _t(d,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof No&&o.value0.value0 instanceof Xe?(c=!0,t(o.value1)(new Xe(new _t(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,d),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof No&&o.value0.value5 instanceof Xe?(c=!0,t(o.value1)(new Xe(o.value0.value0,o.value0.value1,o.value0.value2,new _t(d,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof mi&&o.value0.value3 instanceof Xe?(c=!0,t(o.value1)(new Xe(o.value0.value0,o.value0.value1,o.value0.value2,new _t(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,d)))):o.value0 instanceof vi&&o.value0.value2 instanceof _t?(c=!0,t(o.value1)(new _t(new Xe(d,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new Xe(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof No&&o.value0.value0 instanceof _t?(c=!0,t(o.value1)(new _t(new Xe(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new Xe(o.value0.value0.value6,o.value0.value1,o.value0.value2,d),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof No&&o.value0.value5 instanceof _t?(c=!0,t(o.value1)(new _t(o.value0.value0,o.value0.value1,o.value0.value2,new Xe(d,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new Xe(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof mi&&o.value0.value3 instanceof _t?(c=!0,t(o.value1)(new _t(o.value0.value0,o.value0.value1,o.value0.value2,new Xe(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new Xe(o.value0.value3.value6,o.value0.value4,o.value0.value5,d)))):(c=!0,fi("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!c;)f=l(u,r);return f}},s=function(i){return function(r){var u=i,c=!1,f;function l(o,d){if(d instanceof Xe&&d.value0 instanceof Ue&&d.value3 instanceof Ue)return c=!0,v(o)(Ue.value);if(d instanceof Xe){u=new Se(new ya(d.value0,d.value1,d.value2),o),r=d.value3;return}if(d instanceof _t&&d.value0 instanceof Ue&&d.value3 instanceof Ue&&d.value6 instanceof Ue)return c=!0,v(new Se(new ya(Ue.value,d.value1,d.value2),o))(Ue.value);if(d instanceof _t){u=new Se(new mi(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),o),r=d.value6;return}return c=!0,fi("The impossible happened in partial function `removeMaxNode`.")}for(;!c;)f=l(u,r);return f}},a=function(i){var r=!1,u;function c(f){if(f instanceof Xe&&f.value3 instanceof Ue)return r=!0,{key:f.value1,value:f.value2};if(f instanceof Xe){i=f.value3;return}if(f instanceof _t&&f.value6 instanceof Ue)return r=!0,{key:f.value4,value:f.value5};if(f instanceof _t){i=f.value6;return}return r=!0,fi("The impossible happened in partial function `maxNode`.")}for(;!r;)u=c(i);return u},p=function(i){return function(r){var u=i,c=!1,f;function l(o,d){if(d instanceof Ue)return c=!0,J.value;if(d instanceof Xe){var _=n(h)(d.value1);if(d.value3 instanceof Ue&&_ instanceof Ie)return c=!0,new z(new ee(d.value2,v(o)(Ue.value)));if(_ instanceof Ie){var m=a(d.value0);return c=!0,new z(new ee(d.value2,s(new Se(new _i(m.key,m.value,d.value3),o))(d.value0)))}if(_ instanceof ce){u=new Se(new _i(d.value1,d.value2,d.value3),o),r=d.value0;return}u=new Se(new ya(d.value0,d.value1,d.value2),o),r=d.value3;return}if(d instanceof _t){var y=function(){return d.value0 instanceof Ue&&d.value3 instanceof Ue&&d.value6 instanceof Ue}(),_=n(h)(d.value4),b=n(h)(d.value1);if(y&&b instanceof Ie)return c=!0,new z(new ee(d.value2,t(o)(new Xe(Ue.value,d.value4,d.value5,Ue.value))));if(y&&_ instanceof Ie)return c=!0,new z(new ee(d.value5,t(o)(new Xe(Ue.value,d.value1,d.value2,Ue.value))));if(b instanceof Ie){var m=a(d.value0);return c=!0,new z(new ee(d.value2,s(new Se(new vi(m.key,m.value,d.value3,d.value4,d.value5,d.value6),o))(d.value0)))}if(_ instanceof Ie){var m=a(d.value3);return c=!0,new z(new ee(d.value5,s(new Se(new No(d.value0,d.value1,d.value2,m.key,m.value,d.value6),o))(d.value3)))}if(b instanceof ce){u=new Se(new vi(d.value1,d.value2,d.value3,d.value4,d.value5,d.value6),o),r=d.value0;return}if(b instanceof pe&&_ instanceof ce){u=new Se(new No(d.value0,d.value1,d.value2,d.value4,d.value5,d.value6),o),r=d.value3;return}u=new Se(new mi(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),o),r=d.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[d.constructor.name])}for(;!c;)f=l(u,r);return f}};return p(Ke.value)}},Ln={foldr:function(e){return function(t){return function(n){if(n instanceof Ue)return t;if(n instanceof Xe)return Rt(Ln)(e)(e(n.value2)(Rt(Ln)(e)(t)(n.value3)))(n.value0);if(n instanceof _t)return Rt(Ln)(e)(e(n.value2)(Rt(Ln)(e)(e(n.value5)(Rt(Ln)(e)(t)(n.value6)))(n.value3)))(n.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Ue)return t;if(n instanceof Xe)return xt(Ln)(e)(e(xt(Ln)(e)(t)(n.value0))(n.value2))(n.value3);if(n instanceof _t)return xt(Ln)(e)(e(xt(Ln)(e)(e(xt(Ln)(e)(t)(n.value0))(n.value2))(n.value3))(n.value5))(n.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[n.constructor.name])}}},foldMap:function(e){var t=ot(e),n=me(e.Semigroup0());return function(h){return function(v){if(v instanceof Ue)return t;if(v instanceof Xe)return n(Bt(Ln)(e)(h)(v.value0))(n(h(v.value2))(Bt(Ln)(e)(h)(v.value3)));if(v instanceof _t)return n(Bt(Ln)(e)(h)(v.value0))(n(h(v.value2))(n(Bt(Ln)(e)(h)(v.value3))(n(h(v.value5))(Bt(Ln)(e)(h)(v.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[v.constructor.name])}}}};var Cm=function(){var e=function(t){return function(n){var h=t,v=!1,s;function a(p,i){if(i instanceof Ue)return v=!0,p;if(i instanceof Xe){h=new z({key:i.value1,value:i.value2}),n=i.value3;return}if(i instanceof _t){h=new z({key:i.value4,value:i.value5}),n=i.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 330, column 5 - line 330, column 22): "+[p.constructor.name,i.constructor.name])}for(;!v;)s=a(h,n);return s}};return e(J.value)}();var Hr=function(){return Ue.value}(),wm=function(e){var t=Or(e);return function(n){return xt(n)(function(h){return function(v){return t(v.value0)(v.value1)(h)}})(Hr)}};var js=function(e){var t=bm(e);return function(n){return function(h){return rt(h)(sn)(t(n)(h))}}};var Sm=function(e){var t=Da(e),n=js(e),h=Or(e);return function(v){return function(s){return function(a){var p=v(t(s)(a));if(p instanceof J)return n(s)(a);if(p instanceof z)return h(s)(p.value0)(a);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[p.constructor.name])}}}};var Bk=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}();var dp=function(e){return Bk.create(Ne(e.Eq0()))(Me(e))},Wk={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},RS={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return Wk}};var Tm=du(jt)(RS);var qk=bm(Tm),zk=Da(Tm),Vk=Or(Tm);var $S=function(){return function(e){var t=Tn(e);return function(n){var h=dp(n);return function(v){return function(s){return function(a){return qk(new ee(t(v),h(s)))(a)}}}}}},pp=function(){return function(e){var t=Tn(e);return function(n){var h=dp(n);return function(v){return function(s){return function(a){return zk(new ee(t(v),h(s)))(a)}}}}}},kS=function(){return function(e){var t=Tn(e);return function(n){var h=dp(n);return function(v){return function(s){return function(a){return function(p){return Vk(new ee(t(v),h(s)))(a)(p)}}}}}}},OS=function(e){var t=At(e)(Ln);return function(n){return function(h){return t(function(v){return h(v)})(n)}}},Js=Hr;var _p=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Lu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var sO=function(e){return function(t){if(e<1)return[];var n=new Array(e);return n.fill(t)}},cO=function(e){return function(t){for(var n=[],h=0,v=0;v<e;v++)n[h++]=t;return n}},HS=typeof Array.prototype.fill=="function"?sO:cO,PS=function(){function e(v,s){this.head=v,this.tail=s}var t={};function n(v){return function(s){return new e(v,s)}}function h(v){for(var s=[],a=0,p=v;p!==t;)s[a++]=p.head,p=p.tail;return s}return function(v){return function(s){return h(v(n)(t)(s))}}}(),Pr=function(e){return e.length},Mm=function(e){return function(t){return function(n){return n.length===0?e({}):t(n[0])(n.slice(1))}}},NS=function(e){return function(t){return function(n){return function(h){return h<0||h>=n.length?t:e(n[h])}}}};var BS=function(e){return function(t){return function(n){return function(h){for(var v=0,s=h.length;v<s;v++)if(n(h[v]))return e(v);return t}}}};var WS=function(e){return function(t){return function(n){return function(h){if(n<0||n>=h.length)return t;var v=h.slice();return v.splice(n,1),e(v)}}}};var Al=function(e){return function(t){return t.filter(e)}};var US=function(){function e(t,n,h,v,s,a){var p,i,r,u,c,f,l;for(p=s+(a-s>>1),p-s>1&&e(t,n,v,h,s,p),a-p>1&&e(t,n,v,h,p,a),i=s,r=p,u=s;i<p&&r<a;)c=v[i],f=v[r],l=n(t(c)(f)),l>0?(h[u++]=f,++r):(h[u++]=c,++i);for(;i<p;)h[u++]=v[i++];for(;r<a;)h[u++]=v[r++]}return function(t){return function(n){return function(h){var v;return h.length<2?h:(v=h.slice(0),e(t,n,v,h.slice(0),0,h.length),v)}}}}(),vp=function(e){return function(t){return function(n){return n.slice(e,t)}}};var fO=function(){function e(t,n,h,v,s,a){var p,i,r,u,c,f,l;for(p=s+(a-s>>1),p-s>1&&e(t,n,v,h,s,p),a-p>1&&e(t,n,v,h,p,a),i=s,r=p,u=s;i<p&&r<a;)c=v[i],f=v[r],l=n(t(c)(f)),l>0?(h[u++]=f,++r):(h[u++]=c,++i);for(;i<p;)h[u++]=v[i++];for(;r<a;)h[u++]=v[r++]}return function(t){return function(n){return function(h){return function(){return h.length<2||e(t,n,h,h.slice(0),0,h.length),h}}}}}();var EO=Vr();var TO=me(Gt);var mp=function(){return Mm(Te(J.value))(function(e){return function(t){return new z({head:e,tail:t})}})}();var Am=function(){return Mm(Te(J.value))(function(e){return function(t){return new z(t)}})}();var XS=function(e){return US(e)(function(t){if(t instanceof pe)return 1;if(t instanceof Ie)return 0;if(t instanceof ce)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[t.constructor.name])})};var xm=function(e){var t=Me(e);return function(n){return XS(t)(n)}};var Ks=function(e){return[e]},YS=function(e){return Pr(e)===0};var ZS=function(){return NS(z.create)(J.value)}();var Qs=function(e){return ZS(e)(0)};var gp=function(e){return PS(Rt(e))};var eE=function(){return BS(z.create)(J.value)}();var Im=function(e){return function(t){var n=e<1;return n?t:vp(e)(Pr(t))(t)}};var tE=function(){return WS(z.create)(J.value)}(),Rm=function(e){return function(t){return function(n){return n.length===0?[]:rt(n)(function(h){return EO(tE(h)(n))})(eE(e(t))(n))}}};var Wn=function(e){return function(t){return TO([e])(t)}};var $m=Qe(fe(Ga)),Wo=function(e){return $m(function(){var t=rt([])(Ks);return function(n){return t(e(n))}}())};function nE(e,t,n){return e==null?t:n(e)}function km(e){return e}var mo=rt(null)(km),Xt=function(e){return nE(e,J.value,z.create)};var on=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),Il=Z,vr=function(e,t){return e.value2(e.value1,t)},an=Z,mr=function(e){return e.value3(e.value1)},Un=Il(function(e){return e.value0});var rE=V(wt),FO=V(_a);var gi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ba=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),yi=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),Di=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ca=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AO=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),oE=function(e){return function(t){return e(t)}};var xO=Z;var IO={bimap:function(e){return function(t){return oE(function(n){return xO(new AO(function(h){return e(n.value0(h))},function(h){return t(n.value1(h))},n.value2))})}}},RO=Ir(IO);var Fu=oE(function(e){var t=function(n){if(n instanceof gi)return new gi(n.value0);if(n instanceof ba)return new ba(n.value0,n.value1,e.value0(n.value2),rE(t)(n.value3));if(n instanceof yi)return new yi(n.value0,n.value1,e.value0(n.value2),rE(FO(t))(n.value3));if(n instanceof Di)return new Di(e.value1(n.value0));if(n instanceof Ca)return new Ca(RO(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Au(e,t){return t[e]}function Hm(e,t){return t.hasOwnProperty(e)}function wa(e,t,n){n[e]=t}function Pm(e,t){for(var n=[],h=0;h<e.length;h++)n.push(t(h,e[h]));return n}function Nm(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Bm(e,t){for(var n=Object.keys(e),h=0;h<n.length;h++){var v=n[h];t(v,e[v])}}function Wm(e,t,n,h,v){for(var s=[],a=e.length,p=t.length,i=0;;){if(i<a)i<p?s.push(n(i,e[i],t[i])):h(i,e[i]);else if(i<p)s.push(v(i,t[i]));else break;i++}return s}function Rl(e,t,n){for(var h={},v=0;v<e.length;v++){var s=e[v],a=t(s);h[a]=n(a,v,s)}return h}function $l(e,t,n,h,v,s){for(var a={},p=0;p<t.length;p++){var i=t[p],r=n(i);e.hasOwnProperty(r)?a[r]=h(r,p,e[r],i):a[r]=s(r,p,i)}for(var r in e)r in a||v(r,e[r]);return a}function xu(e,t){return e===t}function Um(e,t){return t.createTextNode(e)}function qm(e,t){t.textContent=e}function Dp(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function bi(e,t,n){var h=n.childNodes.item(e)||null;h!==t&&n.insertBefore(t,h)}function kl(e,t){t&&e.parentNode===t&&t.removeChild(e)}function Ol(e){return e.parentNode}function bp(e,t,n,h){e!=null?h.setAttributeNS(e,t,n):h.setAttribute(t,n)}function Cp(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function zm(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Vm(e,t,n){n.addEventListener(e,t,!1)}function Gm(e,t,n){n.removeEventListener(e,t,!1)}var jm=void 0;var Hl=function(){return{}};function Jm(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var Km=Au,Qm=Z,Xm=wa,Ym=Hl;var wp=function(e){return function(t){return t[e]}},PO=wp("namespaceURI"),NO=wp("prefix"),BO=wp("localName"),WO=wp("tagName");var Sp=function(e){return function(t){return function(){return t[e]}}},qO=Sp("children"),zO=Sp("firstElementChild"),VO=Sp("lastElementChild"),GO=Sp("childElementCount");function iE(e){return function(t){return function(){return t.querySelector(e)}}}var JO=V(Ge);var uE=function(e){var t=JO(Xt),n=iE(e);return function(h){return t(n(h))}};var eg=Z;var Pl=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}};var tg=function(e){return mr(e.widget)},ng=Pl("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ca)return ng(291)(e,Fu(t.value0));if(t instanceof Di){var n=vr(e.widget,t.value0),h=Il(function(v){return an(new on(v.value0,{build:e.build,widget:n},ng(296),tg))})(n);return h}return tg(e),e.build(t)}}),e2=ng(286),Ep=function(e){var t=Ol(e.node);return kl(e.node,t)},Tp=Pl("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ca)return Tp(82)(e,Fu(t.value0));if(t instanceof gi){if(e.value===t.value0)return an(new on(e.node,e,Tp(85),Ep));if(_n){var n={build:e.build,node:e.node,value:t.value0};return qm(t.value0,e.node),an(new on(e.node,n,Tp(89),Ep))}}return Ep(e),e.build(t)}}),t2=Tp(77),Mp=function(e){var t=Ol(e.node);return kl(e.node,t),Bm(e.children,function(n,h){return mr(h)}),mr(e.attrs)},Lp=function(e){var t=Ol(e.node);return kl(e.node,t),Nm(e.children,mr),mr(e.attrs)},sE=function(e,t,n,h){var v=t===h;return v?e instanceof z&&n instanceof z&&e.value0===n.value0||e instanceof J&&n instanceof J:!1},Fp=Pl("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ca)return Fp(135)(e,Fu(t.value0));if(t instanceof ba&&sE(e.ns,e.name,t.value0,t.value1)){var n=Pr(t.value3),h=Pr(e.children);if(h===0&&n===0){var i=vr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:e.children};return an(new on(e.node,r,Fp(149),Lp))}var v=function(u,c){return mr(c)},s=function(u,c,f){var l=vr(c,f);return bi(u,Un(l),e.node),l},a=function(u,c){var f=e.build(c);return bi(u,Un(f),e.node),f},p=Wm(e.children,t.value3,s,v,a),i=vr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:i,ns:t.value0,name:t.value1,children:p};return an(new on(e.node,r,Fp(172),Lp))}return Lp(e),e.build(t)}}),n2=Fp(130),Ap=Pl("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ca)return Ap(222)(e,Fu(t.value0));if(t instanceof yi&&sE(e.ns,e.name,t.value0,t.value1)){var n=Pr(t.value3);if(e.length===0&&n===0){var p=vr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:e.children,length:0};return an(new on(e.node,i,Ap(237),Mp))}var h=function(r,u){return mr(u)},v=function(r,u,c,f){var l=vr(c,f.value1);return bi(u,Un(l),e.node),l},s=function(r,u,c){var f=e.build(c.value1);return bi(u,Un(f),e.node),f},a=$l(e.children,t.value3,An,v,h,s),p=vr(e.attrs,t.value2),i={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:a,length:n};return an(new on(e.node,i,Ap(261),Mp))}return Mp(e),e.build(t)}}),r2=Ap(217),o2=function(e,t,n){var h=e.buildWidget(e)(n),v=Il(function(s){return an(new on(s.value0,{build:t,widget:h},e2,tg))})(h);return v},a2=function(e,t,n){var h=Um(n,e.document),v={build:t,node:h,value:n};return an(new on(h,v,t2,Ep))},i2=function(e,t,n,h,v,s){var a=Dp(mo(n),h,e.document),p=eg(a),i=function(f,l,o){var d=t(o.value1);return bi(l,Un(d),p),d},r=Rl(s,An,i),u=e.buildAttributes(a)(v),c={build:t,node:p,attrs:u,ns:n,name:h,children:r,length:Pr(s)};return an(new on(p,c,r2,Mp))},u2=function(e,t,n,h,v,s){var a=Dp(mo(n),h,e.document),p=eg(a),i=function(f,l){var o=t(l);return bi(f,Un(o),p),o},r=Pm(s,i),u=e.buildAttributes(a)(v),c={build:t,node:p,attrs:u,ns:n,name:h,children:r};return an(new on(p,c,n2,Lp))},Nl=function(e){var t=Pl("build","Halogen.VDom.DOM",function(){return function(h){if(h instanceof gi)return a2(e,t(59),h.value0);if(h instanceof ba)return u2(e,t(60),h.value0,h.value1,h.value2,h.value3);if(h instanceof yi)return i2(e,t(61),h.value0,h.value1,h.value2,h.value3);if(h instanceof Di)return o2(e,t(62),h.value0);if(h instanceof Ca)return t(63)(Fu(h.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[h.constructor.name])}}),n=t(58);return n};function xp(e){return typeof e}function Ip(e){return Object.prototype.toString.call(e).slice(8,-1)}function Bl(e){return e===void 0}var lE=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var fE=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Iu=function(e){return e};var Rp=isFinite;var ag=Math.round;var pE=Fo(vd),hE=ua(vd);var ig=function(){return fE(z.create)(J.value)}(),b2=function(e){if(!Rp(e))return 0;if(e>=Iu(pE))return pE;if(e<=Iu(hE))return hE;if(_n)return Cn(0)(ig(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},vE=function(e){return b2(ag(e))};var $p=function(){var e=Pd(jC);return function(t){return Rv(e(t))}}();var mE=function(e){return function(t){return new Pn(e,new Se(t.value0,t.value1))}};var Ru=function(e){return e.length};var Op=function(e){return function(t){return t.substr(0,e)}},Xs=function(e){return function(t){return t.substring(e)}};var Ci=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var DE=function(e){return function(t){return Xs(Ru(t)-e|0)(t)}};var Hp=function(e){return function(t){return Op(Ru(t)-e|0)(t)}};var ug=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var $u=Z,Pp=Z;var sg=function(e){var t=nr(Ww(e));return function(n){return t($p(n))}};var cg=function(e){var t=te(yl(e)),n=sg(e);return function(h){return function(v){if(Ip(v)===h)return t(Pp(v));if(_n)return n(new ug(h,Ip(v)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[h.constructor.name,v.constructor.name])}}};var Np=function(e){return cg(e)("String")};function lg(e){return e()}function CE(e){return function(t){return function(n){return function(h){var v=n;function s(p){return function(i){return t(i)(p)(h[p])}}for(var a in h)hasOwnProperty.call(h,a)&&(v=e(v)(s(a)));return v}}}}function wE(e,t,n,h){return n in h?t(h[n]):e}function fg(e){return function(t){var n=[];for(var h in t)hasOwnProperty.call(t,h)&&n.push(e(h)(t[h]));return n}}var L2=Object.keys||fg(function(e){return function(){return e}});var dg=function(e){return function(t){return function(n){return function(h){return function(v){return e(t,n,h,v)}}}}};var k2=Ht(Qd);var Bp=function(){return dg(wE)(J.value)(z.create)}();var Ul=function(e){var t=gp(e);return function(n){return lg(function(){var v=Hl();return Kd(t(n))(function(s){return k2(Jm(s.value0)(s.value1)(v))})(),v})}};var O2=CE(Db),SE=function(e){var t=me(e.Semigroup0()),n=ot(e);return function(h){return O2(function(v){return function(s){return function(a){return t(v)(h(s)(a))}}})(n)}};function ql(e){return function(){return function(t){return e(t)()}}}function _g(e){return function(t){return function(n){return function(h){return function(){return h.addEventListener(e,t,n)}}}}}function vg(e){return function(t){return function(n){return function(h){return function(){return h.removeEventListener(e,t,n)}}}}}var H2=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}};var gg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sa=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),Si=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ei=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ku=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),P2=Au,mg=wa,N2=function(e,t){var n=zm(null,e,t);if(n)return Cp(null,e,t);var h=xp(Au(e,t));return h==="string"?wa(e,"",t):e==="rowSpan"?wa(e,1,t):e==="colSpan"?wa(e,1,t):wa(e,jm,t)},TE=function(e){if(e instanceof Sa&&e.value0 instanceof z)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Sa)return"attr/:"+e.value1;if(e instanceof Si)return"prop/"+e.value0;if(e instanceof Ei)return"handler/"+e.value0;if(e instanceof ku)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},ME=Z;var LE=function(e){return function(t){var n=function(u){return function(c,f){if(f instanceof Sa)return Cp(mo(f.value0),f.value1,t);if(f instanceof Si)return N2(f.value0,t);if(f instanceof Ei){var l=Km(f.value0,u);return Gm(f.value0,An(l),t)}if(f instanceof ku)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[f.constructor.name])}},h=function(u){return u instanceof z?e(u.value0)():void 0},v=function(u){var c=Bp("ref")(u.props);return c instanceof z&&c.value0 instanceof ku?h(c.value0.value0(new yg(t))):void 0},s=function(u,c){return function(f,l,o,d){if(o instanceof Sa&&d instanceof Sa){var _=o.value2===d.value2;return _||bp(mo(d.value0),d.value1,d.value2,t),d}if(o instanceof Si&&d instanceof Si){var m=xu(o.value1,d.value1);if(m)return d;if(d.value0==="value"){var y=P2("value",t),b=xu(y,d.value1);return b||mg(d.value0,d.value1,t),d}return mg(d.value0,d.value1,t),d}if(o instanceof Ei&&d instanceof Ei){var S=Km(d.value0,u);return It(d.value1)(sn(S))(),Xm(d.value0,S,c),d}return d}},a=function(u){return function(c,f,l){if(l instanceof Sa)return bp(mo(l.value0),l.value1,l.value2,t),l;if(l instanceof Si)return mg(l.value0,l.value1,t),l;if(l instanceof Ei){var o=Au(l.value0,u);if(Hm(l.value0,u))return It(l.value1)(sn(o))(),l;var d=Yt(l.value1)(),_=ql(function(m){return function(){var b=Je(d)();return h(b(m))}})();return Xm(l.value0,new ee(_,d),u),Vm(l.value0,_,t),l}if(l instanceof ku)return h(l.value0(new gg(t))),l;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[l.constructor.name])}},p=H2("patchProp","Halogen.VDom.DOM.Prop",function(){return function(u,c){var f=Ym(),l=n(u.events),o=s(u.events,f),d=a(f),_=$l(u.props,c,TE,o,l,d),m={events:Qm(f),props:_};return an(new on(void 0,m,p(100),v))}}),i=p(87),r=function(u){var c=Ym(),f=Rl(u,TE,a(c)),l={events:Qm(c),props:f};return an(new on(void 0,l,i,v))};return r}};var bg=function(e){return e},IE=function(e){return bg(Di.create(e))},U2=function(e){return e.toPropValue},Ti=function(e){return bg(gi.create(e))},RE=function(e){return new ku(function(t){return e(function(n){if(n instanceof gg)return new z(n.value0);if(n instanceof yg)return J.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},$E=function(e){var t=U2(e);return function(n){var h=Si.create(n);return function(v){return h(t(v))}}};var Cg={toPropValue:function(){var e=cn();return function(t){return ME(e(t))}}()};var wg=function(){return Ei.create}(),kE=function(e){return function(t){return function(n){return function(h){return new ba(e,t,n,h)}}}};var OE=function(e){return function(t){return Sa.create(e)(t)}};var q2=De(be);var Wp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HE=function(e){return function(t){return new Eg(e,t)}},PE=function(){return Sg.create}(),NE=function(e){var t=te(e);return function(n){return function(h){return function(v){return function(s){return function(a){if(s instanceof Wp)return new ee(new Se({func:t(s.value0),count:a},n),h);if(s instanceof Sg)return new ee(new Se({func:v(s.value0),count:a},n),h);if(s instanceof Eg)return NE(e)(n)(mE(s.value1)(h))(v)(s.value0)(a+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[s.constructor.name])}}}}}},BE=function(e){var t=ut(e.Apply0());return function(n){return function(h){return function(v){if(n instanceof Ke)return new Be(v);if(n instanceof Se){var s=t(n.value0.func)(v),a=n.value0.count===1;if(a)return n.value1 instanceof Ke?new Be(s):BE(e)(n.value1)(h)(s);if(h instanceof Ke)return new Be(s);if(h instanceof Se)return new ke(new ee(new Se({func:s,count:n.value0.count-1|0},n.value1),new Pn(h.value0,h.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[h.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},WE={map:function(e){return function(t){return HE(new Wp(e))(t)}}},UE=function(e){var t=BE(e),n=te(e),h=NE(e);return function(v){return function(s){var a=function(p){var i=!1,r;function u(c){if(c.value1.value0 instanceof Wp){var f=t(c.value0)(c.value1.value1)(n(c.value1.value0.value0));if(f instanceof Be)return i=!0,f.value0;if(f instanceof ke){p=f.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[f.constructor.name])}if(c.value1.value0 instanceof Sg){var f=t(c.value0)(c.value1.value1)(v(c.value1.value0.value0));if(f instanceof Be)return i=!0,f.value0;if(f instanceof ke){p=f.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[f.constructor.name])}if(c.value1.value0 instanceof Eg){var l=new Pn(c.value1.value0.value1,c.value1.value1);p=h(c.value0)(l)(v)(c.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[c.value1.value0.constructor.name])}for(;!i;)r=u(p);return r};return a(new ee(Ke.value,$p(s)))}}},qE=function(e){return UE(e)(q2)},zE={apply:function(e){return function(t){return HE(e)(t)}},Functor0:function(){return WE}},VE=function(){return{pure:Wp.create,Apply0:function(){return zE}}}(),z2=UE(VE),Tg=function(e){return z2(function(t){return PE(e(t))})};var jE=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),JE=Z,KE=Z;function Mg(e){return function(t){return e===t}}var Zs=Mg;var J2=Ht(Ge);var K2=fe(Fr);var Q2=me(Gt),X2=At(Qt),Y2=X2(Et);var Up=function(e){return e},XE=function(e){return function(t){return e(function(n){return J2(t(n))})}};var gr=function(e){return function(t){return e(t)}};var yr=function(){var t=Yt([])();return{emitter:function(n){return function(){return Ar(function(v){return Q2(v)([n])})(t)(),Ar(Rm(Zs)(n))(t)}},listener:function(n){return K2(Je(t))(Y2(function(h){return h(n)}))}}};var Fg=De(be);var Z2=pp();var YE=function(e){return e},ZE=function(e){return e},zl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ou=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Jl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ec=function(e){return e};var Dr=function(e){return yt(new Vl(function(t){return e},Fg))};var qo=function(e){return yt(new jl(e,void 0))};var tc=function(){return function(e){var t=Z2(e);return function(n){var h=t(n);return function(v){return function(s){return function(a){return yt(new Gl(KE(new jE(function(p){var i=te(p);return function(r){var u=rt(i(J.value))(r),c=h(v)(s);return function(f){return u(c(f))}}},a,Fg))))}}}}}},Ag=bn,Kp=bn;var eT={lift:function(e){return function(t){return ec(yt(Ou.create(t)))}}},Hu=fl,no={state:function(e){return ec(yt(zl.create(e)))},Monad0:function(){return Hu}};var Ea=function(e){return{liftEffect:function(){var t=Ze(e);return function(n){return ec(yt(Ou.create(t(n))))}}(),Monad0:function(){return Hu}}};var Qp=function(e){var t=Ea(e.MonadEffect0());return{liftAff:function(){var n=rr(e);return function(h){return ec(yt(Ou.create(n(h))))}}(),MonadEffect0:function(){return t}}};var Pu=function(e){return yt(new Jl(e,Fg))},Li=gu;var ro=Nn,eH=fe(ro);var zo=Rr,tH=te(zo),xg={tailRecM:function(e){return function(t){return eH(e(t))(function(n){if(n instanceof un)return Qn(xg)(e)(n.value0);if(n instanceof Zt)return tH(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return Hu}};var nc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ac=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ic=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var nH=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}};var rH=function(e,t){return xu(e.value0,t.value0)&&xu(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var tT=function(e){return e.value2(e.value3)};var nT=function(e){var t=function(s){return mr(s.vdom)},n=nH("patchThunk","Halogen.VDom.Thunk",function(){return function(s,a){var p=rH(s.thunk,a);if(p)return an(new on(Un(s.vdom),s,n(112),t));var i=vr(s.vdom,e(tT(a)));return an(new on(Un(i),{vdom:i,thunk:a},n(115),t))}}),h=n(108),v=function(s){return function(a){var p=Nl(s)(e(tT(a)));return an(new on(Un(p),{thunk:a,vdom:p},h,t))}};return v};var Xp=gs(Li),$g=At(zo)(ln),oH=V(Li);var rT=te(zo),aH=pp(),iH=$S(),uH=kS(),Kl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kg=Z,Og=Z,Ta=function(e){return function(t){if(t instanceof nc)return Xp($g(e.handleAction)(e.initialize))(t.value0);if(t instanceof rc)return Xp($g(e.handleAction)(e.finalize))(t.value0);if(t instanceof oc)return Xp($g(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof ac)return Xp(e.handleAction(t.value0))(t.value1);if(t instanceof ic)return LS(function(n){var h=oH(rt(t.value1(void 0))(n));return function(v){return h(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},sH=Z,Ma=Z;var br=function(){return{handleAction:Te(rT(void 0)),handleQuery:Te(rT(J.value)),receive:Te(J.value),initialize:J.value,finalize:J.value}}(),Hg=function(){return function(e){var t=aH(e),n=iH(e),h=uH(e);return function(v){var s=t(v),a=n(v),p=h(v);return function(i){return function(r){return function(u){return function(c){return function(f){return sH({get:s(i)(r),pop:a(i)(r),set:p(i)(r),component:u,input:c,output:f})}}}}}}}};var Zp=function(){return kE(J.value)}();var Pg=Zp("style");var Wu=Zp("div"),Fi=Wu([]);var uc=Zp("button");var lH=cn();var Ng=function(e){return lH(jv(e))};function sc(e){return function(){return e.stopPropagation()}}function Ai(e){return e.charCodeAt(0)}function iT(e){return String.fromCharCode(e)}var Xl={Applicative0:function(){return ys},Plus1:function(){return hC}};var uT=ua(jc),sT=Fo(jc);var cT=function(e){return e.fromEnum};var Uu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},qu=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var Bg=function(e){return e>=Ai(uT)&&e<=Ai(sT)?new z(iT(e)):J.value},vH={succ:Uu(Bg)(Ai),pred:qu(Bg)(Ai),Ord0:function(){return hd}};var lT=function(){return{cardinality:Ai(sT)-Ai(uT)|0,toEnum:Bg,fromEnum:Ai,Bounded0:function(){return jc},Enum1:function(){return vH}}}();var Ug="DOMContentLoaded";var pT="click";var FH=Z;var AH=function(e){return function(t){return wg(e)(function(n){return new z(new Lu(t(n)))})}};var Zl=function(){var e=AH(pT);return function(t){return e(FH(t))}}();var xH=V(gu),_T=De(be),vT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ef=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),of=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),th=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),af=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),uf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sf=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),mT=function(e){return e};var qg=Cs,cf=bn,IH={lift:function(e){return function(t){return mT(yt(tf.create(t)))}}},gT=$t(IH),RH=fl;var cc=function(e){return{liftEffect:function(){var t=gT(e.Monad0()),n=Ze(e);return function(h){return t(n(h))}}(),Monad0:function(){return RH}}},yT=function(e){var t=e.MonadEffect0(),n=cc(t);return{liftAff:function(){var h=gT(t.Monad0()),v=rr(e);return function(s){return h(v(s))}}(),MonadEffect0:function(){return n}}};var DT=function(e){var t=V(e);return{map:function(n){return function(h){if(h instanceof ef)return new ef(xH(n)(h.value0));if(h instanceof tf)return new tf(t(n)(h.value0));if(h instanceof nf)return new nf(function(v){return n(h.value0(v))});if(h instanceof rf)return new rf(h.value0,n(h.value1));if(h instanceof of)return new of(h.value0,n(h.value1));if(h instanceof th)return new th(h.value0,n(h.value1));if(h instanceof af)return new af(h.value0,h.value1,function(v){return n(h.value2(v))});if(h instanceof uf)return new uf(h.value0,n(h.value1));if(h instanceof sf)return new sf(h.value0,h.value1,n(h.value2));throw new Error("Failed pattern match at Halogen.Shell.Free (line 34, column 1 - line 43, column 38): "+[n.constructor.name,h.constructor.name])}}}};var Go=Nn,$H=fe(Go),bT=Hv,xi=Rr,kt=function(e){return mT(yt(ef.create(e)))},CT=function(e){return function(t){return yt(new sf(e,t,void 0))}},kH=function(e){return yt(new rf(e,void 0))};var wT=function(e){return yt(new uf(e,void 0))},lc=function(e){return yt(new of(e,void 0))},Cr=function(){return yt(new nf(_T))}(),qn=function(e){return $H(Cr)(function(t){return kH(e(t))})},zg=function(e){return function(t){return yt(new af(e,t,_T))}};var ST=e=>()=>e.type,Vg=e=>()=>e.cursorY,Gg=e=>()=>e.cursorX,jg=e=>()=>e.viewportY,Jg=e=>()=>e.baseY,Kg=e=>()=>e.length,ET=e=>t=>()=>e.getLine(t),Qg=e=>()=>e.getNullCell();var fc=function(e){return Bl(e)?J.value:new z(Pp(e))};var HH=V(Ge),PH=function(){function e(){}return e.value=new e,e}(),NH=function(){function e(){}return e.value=new e,e}(),TT=function(e){return function(t){return HH(fc)(ET(e)(t))}},MT=function(e){return function(){var n=ST(e)();return n==="normal"?PH.value:NH.value}};var Yg=e=>()=>e.isWrapped,Zg=e=>()=>e.length;var ih=De(be),jo=V(Ge),ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ty=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ny=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ry=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ay=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qH={map:function(e){return function(t){if(t instanceof ey)return new ey(function(n){return e(t.value0(n))});if(t instanceof nh)return new nh(function(n){return e(t.value0(n))});if(t instanceof ty)return new ty(function(n){return e(t.value0(n))});if(t instanceof ny)return new ny(function(n){return e(t.value0(n))});if(t instanceof ry)return new ry(function(n){return e(t.value0(n))});if(t instanceof rh)return new rh(function(n){return e(t.value0(n))});if(t instanceof oh)return new oh(t.value0,function(n){return e(t.value1(n))});if(t instanceof oy)return new oy(t.value0,function(n){return e(t.value1(n))});if(t instanceof ah)return new ah(t.value0,function(n){return e(t.value1(n))});if(t instanceof ay)return new ay(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},zH=ai(qH);var LT=function(e){var t=e.Monad0(),n=fe(wu(t.Bind1())),h=kr(Ws(t)),v=Ze(ci(e));return function(s){var a=function(p){if(p instanceof ey)return n(h)(function(i){return v(jo(p.value0)(MT(i)))});if(p instanceof nh)return n(h)(function(i){return v(jo(p.value0)(Gg(i)))});if(p instanceof ty)return n(h)(function(i){return v(jo(p.value0)(Vg(i)))});if(p instanceof ny)return n(h)(function(i){return v(jo(p.value0)(jg(i)))});if(p instanceof ry)return n(h)(function(i){return v(jo(p.value0)(Jg(i)))});if(p instanceof rh)return n(h)(function(i){return v(jo(p.value0)(Kg(i)))});if(p instanceof oh)return n(h)(function(i){return v(jo(p.value1)(TT(i)(p.value0)))});if(p instanceof oy)return v(jo(p.value1)(Yg(p.value0)));if(p instanceof ah)return v(jo(p.value1)(Zg(p.value0)));if(p instanceof ay)return n(h)(function(i){return v(jo(p.value0)(Qg(i)))});throw new Error("Failed pattern match at Halogen.Buffer.Free (line 19, column 5 - line 21, column 40): "+[p.constructor.name])};return zH(Us(s))(a)}},FT=function(e){return yt(new ah(e,ih))};var AT=function(e){return yt(new oh(e,ih))};var xT=function(){return yt(new nh(ih))}();var IT=function(){return yt(new rh(ih))}();var iy=e=>()=>e.cursorBlink,uy=e=>t=>()=>e.cursorBlink=t,sy=e=>()=>e.fontFamily,cy=e=>t=>()=>e.fontFamily=t;var $T={fromString:De(be)},Tt=function(e){return e.fromString};var VH=function(){function e(a){this.fn=a}var t={},n=function(a,p){this.head=a,this.tail=p};function h(a){return new n(a,t)}function v(a){return function(p){return new n(a,p)}}function s(a){for(var p=[],i=a;i!==t;)p.push(i.head),i=i.tail;return p}return function(a){return function(p){return function(i){var r=function(c,f){return a(p(v)(i(c)))(f)},u=function(c,f,l){if(f===0)return c;var o=l[f-1];return new e(function(){var d=u(r(o,c),f-1,l);return d})};return function(c){for(var f=p(h)(i(c[c.length-1])),l=u(f,c.length-1,c);l instanceof e;)l=l.fn();return p(s)(l)}}}}}();var QH=typeof Array.from=="function",hoe=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",_oe=typeof String.prototype.fromCodePoint=="function",XH=typeof String.prototype.codePointAt=="function",OT=function(e){return XH?function(t){return t.codePointAt(0)}:e};var HT=function(e){return function(t){return QH?function(n){return Array.from(n,t)}:e}};var ff=cT(lT),nP=V(St),rP=fo(oi);var NT=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var BT=function(e){return 56320<=e&&e<=57343},WT=function(e){return 55296<=e&&e<=56319},oP=function(e){var t=Ru(e);if(t===0)return J.value;if(t===1)return new z({head:ff(Ci(0)(e)),tail:""});var n=ff(Ci(1)(e)),h=ff(Ci(0)(e)),v=WT(h)&&BT(n);return v?new z({head:NT(h)(n),tail:Xs(2)(e)}):new z({head:h,tail:Xs(1)(e)})},aP=function(e){return nP(function(t){return new ee(t.head,t.tail)})(oP(e))},iP=function(e){return rP(aP)(e)},uP=function(e){var t=ff(Ci(0)(e)),n=WT(t)&&Ru(e)>1;if(n){var h=ff(Ci(1)(e)),v=BT(h);return v?NT(t)(h):t}return t},sP=OT(uP),cP=HT(iP)(sP),uh=function(e){return Pr(cP(e))};var fy=jb(Es);var UT=Le(co);var pP=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}();var hP=function(e){return function(t){return function(n){return function(h){var v=fy(0)(1)(t),s=fy(0)(1)(n),a=fy(0)(1)(h);return new pP(e,v,s,a)}}}};var qT=function(e){return function(t){return function(n){return hP(e)(t)(n)(1)}}},zT=qT(0)(0)(1);var VT=function(e){var t=function(p){return UT(Iu(vE(100*p))/100)},n=t(e.value1*100)+"%",h=t(e.value2*100)+"%",v=t(e.value0),s=UT(e.value3),a=e.value3===1;return a?"hsl("+(v+(", "+(n+(", "+(h+")"))))):"hsla("+(v+(", "+(n+(", "+(h+(", "+(s+")")))))))};var dy=qT(0)(0)(0);var GT=V(wt),jT=bu($r),_P=me(Gt),vP=Id(Et)(er);var ar=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ir=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mP=function(e){return e};var gP=function(e){return e},Jo=function(e){return e.value};var dc={append:function(e){return function(t){if(e instanceof ir&&t instanceof ir)return new ir(e.value0+t.value0);if(e instanceof ir&&t instanceof ar)return new ar(GT(jT(function(n){return e.value0+n}))(t.value0));if(e instanceof ar&&t instanceof ir)return new ar(GT(jT(function(n){return t.value0+n}))(e.value0));if(e instanceof ar&&t instanceof ar)return new ar(_P(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},yP=me(dc),py={append:function(e){return function(t){return yP(e)(t)}}},JT=me(py);var pf=function(e){if(e instanceof ar)return Cn("")(vP("")(e.value0));if(e instanceof ir)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var ch=function(){return{fromString:ir.create}}(),KT=Tt(ch),zn={fromString:function(e){return mP(KT(e))}},lh=Tt(zn);var hf={value:function(e){return lh(VT(e))}};var zu={value:function(){var e=Le(co);return function(t){return lh(e(t))}}()},Ii={value:lh},pc=function(e){var t=Jo(e);return function(n){var h=Jo(n);return{value:function(v){return JT(t(v.value0))(JT(lh(" "))(h(v.value1)))}}}};var Fn={fromString:function(e){return gP(KT(e))}};var QT=function(e){return e};var fh=function(e){return e};var DP=Ul(Et);var XT=Gt,_f=function(e){return $u(DP(e))};var YT=lu;var bP=function(e){return function(t){return[new ee(e,$u(t))]}},Vu=function(e){return fh(bP(e))},_y=cn();var ZT=Vu("fontFamily");var e1=Vu("cursorBlink");var n1=V(Ge),LP=Pt(Nt),r1=De(be),dh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ph=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),FP={map:function(e){return function(t){if(t instanceof dh)return new dh(function(n){return e(t.value0(n))});if(t instanceof ph)return new ph(t.value0,e(t.value1));if(t instanceof hh)return new hh(function(n){return e(t.value0(n))});if(t instanceof vy)return new vy(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},AP=ai(FP);var ju=function(e){return yt(new ph(e,void 0))},o1=function(e){var t=e.Monad0(),n=wu(t.Bind1()),h=fe(n),v=kr(Ws(t)),s=Ze(ci(e)),a=LP(n),p=te(op(t.Applicative0()));return function(i){var r=function(u){if(u instanceof dh)return h(v)(function(c){return s(n1(u.value0)(iy(c)))});if(u instanceof ph)return h(v)(function(c){return a(s(uy(c)(u.value0)))(function(){return p(u.value1)})});if(u instanceof hh)return h(v)(function(c){return s(n1(u.value0)(sy(c)))});if(u instanceof vy)return h(v)(function(c){return a(s(cy(c)(u.value0)))(function(){return p(u.value1)})});throw new Error("Failed pattern match at Halogen.Terminal.Free.Options (line 19, column 5 - line 21, column 49): "+[u.constructor.name])};return AP(Us(i))(r)}},a1=function(){return yt(new hh(r1))}(),i1=function(){return yt(new dh(r1))}();var s1=ra(u1(),1),vh=()=>new s1.FitAddon;var l1=ra(c1(),1),gh=()=>new l1.WebglAddon;var d1=ra(f1(),1),Dh=()=>new d1.WebLinksAddon;var p1={addon:Z},h1={addon:Z},_1={addon:De(be)};var bh=function(e){return e.addon};var by=e=>e.active,Cy=e=>e.normal,wy=e=>e.alternate;var y1=ra(g1(),1),D1=e=>t=>()=>new y1.Terminal(e,t),b1=e=>()=>e.element,C1=e=>()=>e.textarea,Ey=e=>()=>e.rows,Ty=e=>()=>e.cols,vf=e=>e.buffer,My=e=>()=>e.markers;var Ly=e=>e.options,Fy=e=>t=>()=>e.onBell(t),Ay=e=>t=>()=>e.onBinary(n=>t(n)());var xy=e=>t=>()=>e.onData(n=>t(n)()),Iy=e=>t=>()=>e.onKey(n=>t(n)()),Ry=e=>t=>()=>e.onLineFeed(t),$y=e=>t=>()=>e.onRender(n=>t(n)()),ky=e=>t=>()=>e.onWriteParsed(t),Oy=e=>t=>()=>e.onResize(n=>t(n)()),Hy=e=>t=>()=>e.onScroll(n=>t(n)()),Py=e=>t=>()=>e.onSelectionChange(t),Ny=e=>t=>()=>e.onTitleChange(n=>t(n)());var By=e=>t=>()=>e.open(t);var Wy=e=>t=>n=>()=>e.write(t,n),Uy=e=>t=>n=>()=>e.writeln(t,n);var w1=e=>t=>()=>e.loadAddon(t);var S1=V(Ge);var E1=function(){var e=S1(fc);return function(t){return e(C1(t))}}();var T1=function(e){return function(t){return D1(_f(e))(_f(t))}},M1=function(e){var t=bh(e);return function(n){return function(h){return w1(n)(t(h))}}};var L1=function(){var e=S1(fc);return function(t){return e(b1(t))}}();var wh=V(gu),$h=De(be),La=V(Ge),zy=LT(Xd)(Sd),F1=Pt(Nt),Sh=pl($w),GP=M1(_1),Eh=fe(Nn),Vy=F1(Nn),hc=Lr(Rr),Th=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ky=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ah=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Yy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ih=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Rh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jP={map:function(e){return function(t){if(t instanceof Th)return new Th(wh(e)(t.value0));if(t instanceof Gy)return new Gy(function(n){return e(t.value0(n))});if(t instanceof jy)return new jy(function(n){return e(t.value0(n))});if(t instanceof Mh)return new Mh(function(n){return e(t.value0(n))});if(t instanceof Jy)return new Jy(function(n){return e(t.value0(n))});if(t instanceof Lh)return new Lh(wh(e)(t.value0));if(t instanceof Ky)return new Ky(wh(e)(t.value0));if(t instanceof Qy)return new Qy(wh(e)(t.value0));if(t instanceof Xy)return new Xy(function(n){return e(t.value0(n))});if(t instanceof Fh)return new Fh(t.value0,e(t.value1));if(t instanceof Ah)return new Ah(t.value0,e(t.value1));if(t instanceof Yy)return new Yy(function(n){return e(t.value0(n))});if(t instanceof xh)return new xh(function(n){return e(t.value0(n))});if(t instanceof Ih)return new Ih(function(n){return e(t.value0(n))});if(t instanceof Rh)return new Rh(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},JP=ai(jP),Vn=function(e){return yt(new Ah(e,void 0))},Kt=function(e){return yt(new Fh(e,void 0))};var Zy=function(e){return yt(new Lh(e))},KP=function(){return yt(new xh($h))}(),QP=function(){return yt(new Ih($h))}();var A1=function(e){var t=e.MonadEffect0(),n=t.Monad0(),h=wu(n.Bind1()),v=fe(h),s=kr(Ws(n)),a=ci(t),p=o1(a),i=Ze(a),r=rr(ES(e)),u=F1(h);return function(c){var f=Us(c),l=p(f),o=function(d){if(d instanceof Th)return v(s)(function(_){return si(l(d.value0))(Ly(_))});if(d instanceof Gy)return v(s)(function(_){return i(La(d.value0)(L1(_)))});if(d instanceof jy)return v(s)(function(_){return i(La(d.value0)(E1(_)))});if(d instanceof Mh)return v(s)(function(_){return i(La(d.value0)(Ey(_)))});if(d instanceof Jy)return v(s)(function(_){return i(La(d.value0)(Ty(_)))});if(d instanceof Lh)return v(s)(function(_){return i(si(zy(d.value0))(by(vf(_))))});if(d instanceof Ky)return v(s)(function(_){return i(si(zy(d.value0))(Cy(vf(_))))});if(d instanceof Qy)return v(s)(function(_){return i(si(zy(d.value0))(wy(vf(_))))});if(d instanceof Xy)return v(s)(function(_){return i(La(d.value0)(My(_)))});if(d instanceof Fh)return v(s)(function(_){return v(r(Tl))(function(m){return u(i(Wy(_)(d.value0)(cm(El(d.value1)(m)))))(function(){return r(pm(m))})})});if(d instanceof Ah)return v(s)(function(_){return v(r(Tl))(function(m){return u(i(Uy(_)(d.value0)(cm(El(d.value1)(m)))))(function(){return r(pm(m))})})});if(d instanceof Yy)return i(La(function(_){return d.value0(Dd(_))})(Sh(vh)));if(d instanceof xh)return i(La(function(_){return d.value0(Dd(_))})(Sh(Dh)));if(d instanceof Ih)return i(La(function(_){return d.value0(Dd(_))})(Sh(gh)));if(d instanceof Rh)return v(s)(function(_){return i(La(function(m){return d.value1(eC(m))})(Sh(GP(_)(d.value0))))});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 32, column 5 - line 34, column 55): "+[d.constructor.name])};return JP(f)(o)}},e0=function(){return yt(new Mh($h))}(),Fa=function(e){return yt(Th.create(e))};var x1=function(e){var t=bh(e);return function(n){return yt(new Rh(t(n),$h))}},XP=x1(h1),YP=x1(p1),I1=function(e){return Eh(QP)(function(t){return Vy(function(){if(t instanceof J)return hc(e)(Vn("WebGL Addon unavailable"));if(t instanceof z)return Vy(hc(e)(Kt("Loading WebGL ")))(function(){return Eh(XP(t.value0))(function(n){return hc(e)(function(){return Vn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Eh(KP)(function(n){if(n instanceof J)return hc(e)(Vn("WebLinks Addon unavailable"));if(n instanceof z)return Vy(hc(e)(Kt("Loading WebLinks ")))(function(){return Eh(YP(n.value0))(function(h){return hc(e)(function(){return Vn(h?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.Terminal.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var gf=Z;var $1=Pt(Nt)(ro),eN=dl(no),tN=te(zo),nN=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rN=function(e){return function(t){return uc([Zl(function(n){return nN.create(gf(n))})])([Ti(t)])}},oN=function(e){return function(t){return $1(eN(t.value0))(function(){return tN(new z(t.value1))})}},aN=function(e){var t=Ze(Ea(e.MonadEffect0()));return function(n){return $1(t(sc(n.value0)))(function(){return qo(kt(Kt(`click!\r
`)))})}},k1=function(e){return Ma({initialState:_r(" "),render:rN(e),eval:Ta({handleAction:aN(e),handleQuery:oN(e),receive:br.receive,initialize:br.initialize,finalize:br.finalize})})};var Hh=ra(Oh(),1);function H1(e,t){return function(){return t.edit(e)}}var P1=function(e){return function(t){return H1(e,t)}};var cN=ra(Oh(),1);function N1(e,t){return function(){return t.setValue(e)}}function t0(e){return function(){return e.getValue()}}var W1=function(e){return function(t){return N1(e,t)}};var dN=ra(Oh(),1);function oe(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Ph(e){return function(t){return function(){return t[e]}}}function pN(e){return function(t,n){return function(){n[e]=t}}}var hN=Ph("text"),_N=pN("text"),vN=Ph("renderer"),mN=Ph("inMultiSelectMode"),gN=oe("selectMoreLines"),yN=Ph("container"),DN=oe("setKeyboardHandler"),bN=oe("getKeyboardHandler"),CN=oe("setSession"),n0=oe("getSession"),wN=oe("setValue"),SN=oe("getValue"),EN=oe("getSelection"),TN=oe("resize"),MN=oe("setTheme"),LN=oe("getTheme"),FN=oe("setStyle"),AN=oe("unsetStyle"),xN=oe("setFontSize"),IN=oe("focus"),RN=oe("isFocused"),$N=oe("blur"),kN=oe("getCopyText"),ON=oe("insert"),HN=oe("setOverwrite"),PN=oe("getOverwrite"),NN=oe("toggleOverwrite"),BN=oe("setScrollSpeed"),WN=oe("getScrollSpeed"),UN=oe("setDragDelay"),qN=oe("getDragDelay"),zN=oe("setSelectionStyle"),VN=oe("getSelectionStyle"),GN=oe("setHighlightActiveLine"),jN=oe("getHighlightActiveLine"),JN=oe("setHighlightSelectedWord"),KN=oe("getHighlightSelectedWord"),QN=oe("setShowInvisibles"),XN=oe("getShowInvisibles"),YN=oe("setShowPrintMargin"),ZN=oe("getShowPrintMargin"),e5=oe("setPrintMarginColumn"),t5=oe("getPrintMarginColumn"),n5=oe("setReadOnly"),r5=oe("getReadOnly"),o5=oe("setBehavioursEnabled"),a5=oe("getBehavioursEnabled"),i5=oe("setWrapBehavioursEnabled"),u5=oe("getWrapBehavioursEnabled"),s5=oe("setShowFoldWidgets"),c5=oe("getShowFoldWidgets"),l5=oe("remove"),f5=oe("removeWordRight"),d5=oe("removeWordLeft"),p5=oe("removeToLineStart"),h5=oe("removeToLineEnd"),_5=oe("splitLine"),v5=oe("transposeLetters"),m5=oe("toLowerCase"),g5=oe("toUpperCase"),y5=oe("indent"),D5=oe("blockIndent"),b5=oe("blockOutdent"),C5=oe("toggleCommentLines"),w5=oe("getNumberAt"),S5=oe("modifyNumber"),E5=oe("removeLines"),T5=oe("moveLinesDown"),M5=oe("moveLinesUp"),L5=oe("copyLinesUp"),F5=oe("copyLinesDown"),A5=oe("getFirstVisibleRow"),x5=oe("getLastVisibleRow"),I5=oe("isRowVisible"),R5=oe("isRowFullyVisible"),$5=oe("selectPageDown"),k5=oe("selectPageUp"),O5=oe("gotoPageDown"),H5=oe("gotoPageUp"),P5=oe("scrollPageDown"),N5=oe("scrollPageUp"),B5=oe("scrollToRow"),W5=oe("scrollToLine"),U5=oe("centerSelection"),q5=oe("getCursorPosition"),z5=oe("getCursorPositionScreen"),V5=oe("getSelectionRange"),G5=oe("selectAll"),j5=oe("clearSelection"),J5=oe("moveCursorTo"),K5=oe("moveCursorToPosition"),Q5=oe("jumpToMatching"),X5=oe("gotoLine"),Y5=oe("navigateTo"),Z5=oe("navigateUp"),eB=oe("navigateDown"),tB=oe("navigateLeft"),nB=oe("navigateRight"),rB=oe("navigateLineStart"),oB=oe("navigateLineEnd"),aB=oe("navigateFileEnd"),iB=oe("navigateFileStart"),uB=oe("navigateWordRight"),sB=oe("navigateWordLeft"),cB=oe("replace"),lB=oe("replaceAll"),fB=oe("getLastSearchOptions"),dB=oe("find"),pB=oe("findNext"),hB=oe("findPrevious"),_B=oe("undo"),vB=oe("redo"),mB=oe("destroy");var yf=function(){return new ar([new ee("-webkit-",""),new ee("-moz-",""),new ee("-ms-",""),new ee("-o-",""),new ee("","")])}();var DB=me(Gt),U1=te(ys),bB=Ne(Lo(er)),Gn=Me(jt),CB=Me(Ja(jt)),Ri=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Aa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$i=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ki=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Oi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Pi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ni=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_c=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),q1=function(e){return e},Nh=function(){function e(){}return e.value=new e,e}(),r0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),o0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),a0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),z1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),V1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),bf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),at=function(e){return function(t){return new bf(DB(e.value0)(t),e.value1)}},Lt=function(){return new bf([],Nh.value)}(),G1=function(e){return q1(U1(xa.create(e)))};var wB={eq:function(e){return function(t){return e instanceof Ri&&t instanceof Ri||e instanceof Aa&&t instanceof Aa||e instanceof $i&&t instanceof $i?e.value0===t.value0:e instanceof ki&&t instanceof ki||e instanceof Oi&&t instanceof Oi||e instanceof Hi&&t instanceof Hi||e instanceof Pi&&t instanceof Pi||e instanceof Ni&&t instanceof Ni||e instanceof Bi&&t instanceof Bi?e.value0===t.value0&&e.value1===t.value1:e instanceof xa&&t instanceof xa?e.value0===t.value0:e instanceof _c&&t instanceof _c?e.value0===t.value0&&bB(e.value1)(t.value1):!1}}};var j1={compare:function(e){return function(t){if(e instanceof Ri&&t instanceof Ri)return Gn(e.value0)(t.value0);if(e instanceof Ri)return ce.value;if(t instanceof Ri)return pe.value;if(e instanceof Aa&&t instanceof Aa)return Gn(e.value0)(t.value0);if(e instanceof Aa)return ce.value;if(t instanceof Aa)return pe.value;if(e instanceof $i&&t instanceof $i)return Gn(e.value0)(t.value0);if(e instanceof $i)return ce.value;if(t instanceof $i)return pe.value;if(e instanceof ki&&t instanceof ki){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof ki)return ce.value;if(t instanceof ki)return pe.value;if(e instanceof Oi&&t instanceof Oi){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof Oi)return ce.value;if(t instanceof Oi)return pe.value;if(e instanceof Hi&&t instanceof Hi){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof Hi)return ce.value;if(t instanceof Hi)return pe.value;if(e instanceof Pi&&t instanceof Pi){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof Pi)return ce.value;if(t instanceof Pi)return pe.value;if(e instanceof Ni&&t instanceof Ni){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof Ni)return ce.value;if(t instanceof Ni)return pe.value;if(e instanceof Bi&&t instanceof Bi){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:Gn(e.value1)(t.value1)}if(e instanceof Bi)return ce.value;if(t instanceof Bi)return pe.value;if(e instanceof xa&&t instanceof xa)return Gn(e.value0)(t.value0);if(e instanceof xa)return ce.value;if(t instanceof xa)return pe.value;if(e instanceof _c&&t instanceof _c){var n=Gn(e.value0)(t.value0);return n instanceof ce?ce.value:n instanceof pe?pe.value:CB(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return wB}};var Bh=function(e){return new bf([],new r0(e))},gn=function(e){return function(t){return new bf([],new a0(e,t))}},J1=function(e){return function(t){return new bf([],new o0(e,t))}};var ct=function(e){return q1(U1(Aa.create(e)))};var SB=cn();var EB=function(e){return SB(em(e))};var K1=function(e){return sn(EB(e))};var MB=V(tm(fa));var LB=ut(ip(Gt)(bd)),FB=fe(nm(Gt)(ov));var Q1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),X1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Z1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),u0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),s0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var AB=function(e){return e},wf=function(e){return K1(e)},oM=function(){var e=ga(Xw(lu)(da));return function(t){return AB(e(Ks(t)))}}(),vt=function(e){return function(t){return oM(new s0(new u0(e),wf(t)))}};var en=function(e){var t=Jo(e);return function(n){return function(h){return oM(new Cf(QT(n),t(h)))}}},c0=function(e){var t=en(e);return function(n){return t(n)}};var xB={map:function(e){return function(t){return MB(e)(t)}}};var IB={apply:function(e){return function(t){return LB(e)(t)}},Functor0:function(){return xB}},Wh={bind:function(e){return function(t){return FB(e)(function(n){return function(h){return h}(t(n))})}},Apply0:function(){return IB}};var Uh=Tt(Fn),vc=Tt(zn);var Ia=function(){var e=en(Ii)(Uh("z-index")),t=Le(xo);return function(n){return e(t(n))}}();var RB={value:function(e){return e}};var $B={value:function(e){return e}};var qh=vc("relative"),Sr=en(RB)(Uh("position")),aM=en(zu)(Uh("opacity"));var iM=vc("inline-block");var uM=vc("flex");var sM=vc("none");var mc=en($B)(Uh("display"));var cM=vc("block"),go=vc("absolute");var dM=me(py),pM=Jo(zu),hM=Tt(zn),fM=Le(co),kB=me(dc);var zh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),OB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),PB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),NB=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Ju=function(e){if(e instanceof zh)return pf(e.value0);if(e instanceof OB)return Po(function(t){return Po(function(n){return"("+(Ju(t)+(" + "+(Ju(n)+")")))})(e.value1)})(e.value0);if(e instanceof HB)return Po(function(t){return Po(function(n){return"("+(Ju(t)+(" - "+(Ju(n)+")")))})(e.value1)})(e.value0);if(e instanceof PB)return Po(function(t){return"("+(fM(e.value0)+(" * "+(Ju(t)+")")))})(e.value1);if(e instanceof NB)return Po(function(t){return"("+(Ju(t)+(" / "+(fM(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},Ra={value:function(e){return e instanceof zh?e.value0:kB(yf)(new ir("calc"+Ju(e)))}};var Ft=function(e){return new zh(dM(pM(e))(hM("px")))};var f0=function(e){return new zh(dM(pM(e))(hM("em")))};var BB=Tt(zn);var WB=Tt(Fn);var UB={value:function(e){return e}};var _M=BB("row");var vM=en(UB)(WB("flex-direction"));var gc=en(Ra),zi=Tt(Fn),mM=pc(Ra)(Ra),gM=en(pc(mM)(mM)),Sf=gc(zi("width")),Vi=gc(zi("top")),Vh=gc(zi("right"));var yM=function(e){return function(t){return function(n){return function(h){return gM(zi("padding"))(new ee(new ee(e,t),new ee(n,h)))}}}};var DM=function(e){return function(t){return function(n){return function(h){return gM(zi("margin"))(new ee(new ee(e,t),new ee(n,h)))}}}};var Ku=gc(zi("left")),Ef=gc(zi("height")),d0=gc(zi("bottom"));function In(e){return e}function p0(e){return JSON.stringify(e)}function CM(e,t,n,h,v,s,a){return a==null?e():typeof a=="boolean"?t(a):typeof a=="number"?n(a):typeof a=="string"?h(a):Object.prototype.toString.call(a)==="[object Array]"?v(a):s(a)}var wM=function(e){return function(t){return function(n){return CM(Te(e),Te(e),Te(e),t,Te(e),Te(e),n)}}};var h0=Le(ca),GB=Le(xo);var Gh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),SM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),v0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),EM=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m0=function(){function e(){}return e.value=new e,e}(),Tf={show:function(e){if(e instanceof Gh)return"(TypeMismatch "+(h0(e.value0)+")");if(e instanceof _0)return"(UnexpectedValue "+(p0(e.value0)+")");if(e instanceof SM)return"(AtIndex "+(GB(e.value0)+(" "+(Le(Tf)(e.value1)+")")));if(e instanceof v0)return"(AtKey "+(h0(e.value0)+(" "+(Le(Tf)(e.value1)+")")));if(e instanceof EM)return"(Named "+(h0(e.value0)+(" "+(Le(Tf)(e.value1)+")")));if(e instanceof m0)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var FM=function(){return wM(new Be(new Gh("String")))(ke.create)}();var Dc={decodeJson:FM};var Jh=function(e){return e.decodeJson};var IM=In;var bc={encodeJson:IM};var Mf=function(e){return e.encodeJson};var Ede=ra(DD(),1),P3={keyEncoding:"json",valueEncoding:"json"},bD=e=>t=>n=>()=>e.put(t,n),CD=e=>t=>()=>new Promise((h,v)=>{let s=(a,p)=>{h(p)};e.get(t,P3,s)});var wD=e=>t=>()=>e.del(t);var SD=e=>()=>e.keys().all();function pF(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var W3=cd(Ge),U3=ot(hS),q3=De(be),z3=vn(Uw(GC)(da)),V3=cg(da),G3=V(Zd(fa)),j3=Np(da),J3=fe(wn),K3=Ze(Sn),Q3=function(e){return function(t){return _o(function(n){return W3(U3)(pF(t)(function(h){return n(Be.create(e(h)))()})(function(h){return n(ke.create(h))()}))})}};var X3=function(e){return pn(function(t){return Bn("Promise failed, couldn't extract JS Error or String")})(q3)(Ng(z3(V3("Error")(e))(G3(Bn)(j3(e)))))},Y3=Q3(X3),Hc=function(e){return J3(K3(e))(Y3)};var T_=e=>e===void 0;var _F=Le(Tf),vF=fe(wn),sU=mn(ni),cU=sU(cu),mF=Ze(Sn),ED=te(eo);var gF=function(e){var t=Mf(e);return function(n){return function(h){var v=Mf(h);return function(s){return function(a){return function(p){return function(i){return Hc(bD(a.value0)(t(p))(v(i)))}}}}}}};var yF=function(e){var t=Mf(e);return function(n){return function(h){return function(v){var s=Jh(v);return function(a){return function(p){return vF(Hc(CD(a.value0)(t(p))))(function(i){var r=T_(i);if(r)return ED(J.value);var u=s(i);if(u instanceof Be)return mF(Yr(Bn(_F(u.value0))));if(u instanceof ke)return ED(new z(u.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[u.constructor.name])})}}}}}};var DF=function(e){var t=Mf(e);return function(n){return function(h){return function(v){return function(s){return function(a){return Hc(wD(s.value0)(t(a)))}}}}}},bF=function(e){var t=Jh(e);return function(n){return function(h){return vF(Hc(SD(h.value0)))(function(v){var s=cU(t)(v);if(s instanceof Be)return mF(Yr(Bn(_F(s.value0))));if(s instanceof ke)return ED(s.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[s.constructor.name])})}}};var CF=ra(DD(),1),fU={keyEncoding:"json",valueEncoding:"json"},TD=e=>()=>new CF.Level(e,fU);var _U=V(Ge),vU=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var wF=function(e){return _U(vU.create)(TD(e))};var MD=bc,M_=Dc,gU=gF(MD)(M_)(bc)(Dc),yU=yF(MD)(M_)(bc)(Dc),DU=DF(MD)(M_)(bc)(Dc),SF=function(e){return function(t){return function(n){return gU(e)(t)(n)}}},EF=function(e){return function(t){return yU(e)(t)}},Kf=wF("filesystem"),TF=bF(M_)(Dc),MF=function(e){return function(t){return DU(e)(t)}};var LD=function(e){return function(t){var n=Du(t.Profunctor0()),h=Hs(t);return function(v){return n(e)(function(s){return s.value1(s.value0)})(h(v))}}};var nu=function(e){return function(){console.log(e)}},L_=function(e){return function(){console.warn(e)}};var ea=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var AF=function(e){return e instanceof sr?new z(e.value1):e instanceof Mr?new z(e.value0):J.value},xF=function(e){return e instanceof sr?new z(e.value0):e instanceof ea?new z(e.value0):J.value};var IF=function(e){var t=me(e);return function(n){var h=me(n);return{append:function(v){return function(s){if(v instanceof ea&&s instanceof ea)return new ea(t(v.value0)(s.value0));if(v instanceof ea&&s instanceof Mr)return new sr(v.value0,s.value0);if(v instanceof ea&&s instanceof sr)return new sr(t(v.value0)(s.value0),s.value1);if(v instanceof Mr&&s instanceof ea)return new sr(s.value0,v.value0);if(v instanceof Mr&&s instanceof Mr)return new Mr(h(v.value0)(s.value0));if(v instanceof Mr&&s instanceof sr)return new sr(s.value0,h(v.value0)(s.value1));if(v instanceof sr&&s instanceof ea)return new sr(t(v.value0)(s.value0),v.value1);if(v instanceof sr&&s instanceof Mr)return new sr(v.value0,h(v.value1)(s.value0));if(v instanceof sr&&s instanceof sr)return new sr(t(v.value0)(s.value0),h(v.value1)(s.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,s.constructor.name])}}}}};var OU=me(su),HU=ot(pa),$F=hu(Et),kF=$F(pa),x_=lo(Et)(pa),ta=V(wt),AD=ut(iu),PU=me(Gt),OF=Bt(Et),NU=OF(pa),BU=xm(j1),I_=V(St),WU=Tt($T),HF=fe(tr),UU=kd(Iv(Et)),PF=V(Rs(wt));var qU=Id(Et)(er),zU=fe(Ga),VU=Nd(Xl),GU=$o(Xc(jr)),jU=lo(sl(Et))(pa),JU=Le(co),R_=function(e){return e},KU=function(e){return e},xD=function(e){return function(t){return function(n){return t+(e+n)}}},QU={append:function(e){return function(t){return e+t}}},XU={append:function(e){return function(t){return e+t}}},NF=IF(QU)(XU),BF=Zb(NF),A_=OF(BF),YU=$F(BF),Qf=me(rv(NF)),RF=function(e){var t=pn(function(n){return HU})(function(n){return kF([n.value0,": ",n.value1])});return x_("; ")(ta(t)(e))},ZU=function(e){if(e instanceof Ri)return"#"+e.value0;if(e instanceof Aa)return"."+e.value0;if(e instanceof $i)return"["+(e.value0+"]");if(e instanceof ki)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Oi)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Hi)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof Pi)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof Ni)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof Bi)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof xa)return":"+e.value0;if(e instanceof _c)return":"+(e.value0+("("+(x_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},e4=function(e){return function(t){if(e.length===0&&t instanceof Nh)return["*"];if(t instanceof Nh)return[""];if(t instanceof r0)return[t.value0];if(t instanceof o0)return AD(ta(xD(" > "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof a0)return AD(ta(xD(" "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof z1)return AD(ta(xD(" + "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof V1)return PU(Ua(t.value0))(Ua(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},Ua=function(e){return ta(function(t){return t+NU(ZU)(BU(e.value0))})(e4(e.value0)(e.value1))},t4=function(){var e=x_(", ");return function(t){return e(Ua(t))}}(),ds=function(e){return e.length===0?J.value:I_(function(t){return new Pn(t.head,t.tail)})(mp(e))};var Pc=function(e){if(e.value0 instanceof Z1)return rt(e.value0.value0)(function(t){return J1(Pc(t))(e.value0.value0)})(ds(e.value1));if(e.value0 instanceof u0)return rt(e.value0.value0)(function(t){return gn(Pc(t))(e.value0.value0)})(ds(e.value1));if(e.value0 instanceof X1)return rt(e.value0.value0)(function(t){return gn(e.value0.value0)(Pc(t))})(ds(e.value1));if(e.value0 instanceof Y1)return rt(Bh("TODO"))(Pc)(ds(Im(e.value0.value0)(Wn(e.value0)(e.value1))));if(e.value0 instanceof Q1)return rt(at(Lt)(e.value0.value0))(function(t){return at(Pc(t))(e.value0.value0)})(ds(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},n4=function(e){return pf(e)},r4=function(e){return z.create(Mr.create(R_(WU("@import url("+(e+`);
`)))))},o4=function(e){return e},ID=function(e){return HF(e)(function(){var t=I_(o4);return function(n){return t(AF(n))}}())},a4=function(e){return e},WF=function(e){return HF(e)(function(){var t=I_(a4);return function(n){return t(xF(n))}}())},i4=function(e){return rt(e.value0)(function(t){return"("+(e.value0+(": "+(pf(t)+")")))})(e.value1)},u4=function(e){return"@media "+(n4(e.value1)+UU(OU)(PF(function(t){return function(n){return" and "+n}(i4(t))})(e.value2)))};var s4=function(e){return function(t){if(e instanceof ir&&t instanceof ir)return[new ke(new ee(e.value0,t.value0))];if(e instanceof ar&&t instanceof ir)return ta(function(n){return new ke(new ee(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof ir&&t instanceof ar)return ta(function(n){return new ke(new ee(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof ar&&t instanceof ar)return ta(function(n){return rt(new Be(n.value0+n.value1))(function(){var h=ee.create(n.value0+n.value1);return function(v){return ke.create(h(function(s){return n.value0+s}(v)))}}())(qU(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},RD=function(e){return s4(e.value0)(e.value1)},c4=function(e){return function(t){var n=zU(t)(RD),h=I_(function(s){return ea.create(KU(RF(VU(s))))})(ds(n)),v=function(s){return z.create(Mr.create(R_(x_(" ")([t4(Pc(s)),"{",RF(n),`}
`]))))};return rt(h)(v)(ds(e))}},Xf=function(e){return function(t){var n=function(d){return d instanceof eM?new z(new ee(d.value0,d.value1)):J.value},h=A_(ha(Qe(l4)(e)))(Wo(n)(t)),v=function(d){return d instanceof Cf?new z(new ee(d.value0,d.value1)):J.value},s=function(){var d=Wo(v)(t),_=GU(YS)(d);return _?c4(e)(d):J.value}(),a=function(d){return Xf(Wn(d)(e))},p=function(d){return d instanceof s0?new z(new ee(d.value0,d.value1)):J.value},i=YU(ta(ha(a))(Wo(p)(t))),r=function(d){return d instanceof nM?new z(d.value0):J.value},u=A_(f4)(Wo(r)(t)),c=function(d){return d instanceof rM?new z(d.value0):J.value},f=A_(r4)(Wo(c)(t)),l=function(d){return d instanceof tM?new z(d.value0):J.value},o=A_(p4)(Wo(l)(t));return Qf(s)(Qf(f)(Qf(u)(Qf(o)(Qf(i)(h)))))}},l4=function(e){return function(t){return function(n){return z.create(Mr.create(R_(u4(e)+(" { "+(Cn("")(ID(Xf(t)(n)))+` }
`)))))}}},f4=function(e){var t=" "+(e.value0+(" { "+(jU(" ")(PF(ha(d4))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],h=kF(ta(function(v){return v+t})(n));return new z(new Mr(h))},d4=function(e){return function(t){var n=Cn("")(WF(Xf([])(t)));return JU(e)+("% "+("{ "+(n+" }")))}},p4=function(e){return z.create(Mr.create(R_("@font-face { "+(Cn("")(WF(Xf([])(e)))+` }
`))))},UF=function(){var e=Xf([]);return function(t){return e(wf(t))}}();var $_=function(){var e=function(t){return function(n){return new z(new _p(t,n))}};return function(t){return RE(e(t))}}(),qF=function(e){return $E(e)};var zF=function(e){return qF(e)("type")};var $D=function(){return OE(J.value)}();var _4=zF(Cg),v4=fe(Ga),m4=Ul(Et),VF=function(e){var t=Cn("")(ID(UF(e)));return Pg([_4("text/css")])([Ti(t)])},OD=function(){var e=function(){var s=_r("; "),a=SE(lu)(function(p){return function(i){return[p+(": "+i)]}});return function(p){return s(a(p))}}(),t=$m(Bt(xd)(lu)(Ks)),n=function(s){return s instanceof Cf?new z(new ee(s.value0,s.value1)):J.value},h=function(s){var a=v4(Wo(n)(s))(function(p){return t(RD(p))});return m4(a)},v=$D("style");return function(s){return v(e(h(wf(s))))}}();var D4=Tt(Fn),b4=en(hf);var HD=b4(D4("background-color"));var Mt=Tt(zn),jF=function(){function e(){}return e.value=new e,e}(),w4=function(){function e(){}return e.value=new e,e}(),JF=function(){function e(){}return e.value=new e,e}(),S4=function(){function e(){}return e.value=new e,e}(),E4=function(){function e(){}return e.value=new e,e}(),T4=function(){function e(){}return e.value=new e,e}(),KF=function(){function e(){}return e.value=new e,e}(),PD=function(){function e(){}return e.value=new e,e}(),M4=function(){function e(){}return e.value=new e,e}(),L4=function(){function e(){}return e.value=new e,e}(),F4=function(){function e(){}return e.value=new e,e}(),A4=function(){function e(){}return e.value=new e,e}(),x4=function(){function e(){}return e.value=new e,e}(),I4=function(){function e(){}return e.value=new e,e}(),R4=function(){function e(){}return e.value=new e,e}(),$4=function(){function e(){}return e.value=new e,e}(),k4=function(){function e(){}return e.value=new e,e}(),O4=function(){function e(){}return e.value=new e,e}(),H4=function(){function e(){}return e.value=new e,e}(),P4=function(){function e(){}return e.value=new e,e}(),N4=function(){function e(){}return e.value=new e,e}(),B4=function(){function e(){}return e.value=new e,e}(),W4=function(){function e(){}return e.value=new e,e}(),U4=function(){function e(){}return e.value=new e,e}(),q4=function(){function e(){}return e.value=new e,e}(),z4=function(){function e(){}return e.value=new e,e}(),V4=function(){function e(){}return e.value=new e,e}(),G4=function(){function e(){}return e.value=new e,e}(),j4=function(){function e(){}return e.value=new e,e}(),J4=function(){function e(){}return e.value=new e,e}(),K4=function(){function e(){}return e.value=new e,e}(),Q4=function(){function e(){}return e.value=new e,e}(),X4=function(){function e(){}return e.value=new e,e}();var Y4={value:function(e){if(e instanceof jF)return Mt("default");if(e instanceof w4)return Mt("help");if(e instanceof JF)return Mt("pointer");if(e instanceof S4)return Mt("progress");if(e instanceof E4)return Mt("wait");if(e instanceof T4)return Mt("cell");if(e instanceof KF)return Mt("crosshair");if(e instanceof PD)return Mt("text");if(e instanceof M4)return Mt("vertical-text");if(e instanceof L4)return Mt("alias");if(e instanceof F4)return Mt("copy");if(e instanceof A4)return Mt("move");if(e instanceof x4)return Mt("no-drop");if(e instanceof I4)return Mt("not-allowed");if(e instanceof R4)return Mt("grab");if(e instanceof $4)return Mt("grabbing");if(e instanceof k4)return Mt("all-scroll");if(e instanceof O4)return Mt("col-resize");if(e instanceof H4)return Mt("row-resize");if(e instanceof P4)return Mt("n-resize");if(e instanceof N4)return Mt("e-resize");if(e instanceof B4)return Mt("s-resize");if(e instanceof W4)return Mt("w-resize");if(e instanceof U4)return Mt("ne-resize");if(e instanceof q4)return Mt("nw-resize");if(e instanceof z4)return Mt("se-resize");if(e instanceof V4)return Mt("sw-resize");if(e instanceof G4)return Mt("ew-resize");if(e instanceof j4)return Mt("ns-resize");if(e instanceof J4)return Mt("nesw-resize");if(e instanceof K4)return Mt("nwse-resize");if(e instanceof Q4)return Mt("zoom-in");if(e instanceof X4)return Mt("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var ND=function(){return JF.value}();var BD=function(){return jF.value}(),ps=en(Y4)(Tt(Fn)("cursor")),QF=function(){return KF.value}();var e6=Tt(Fn);var XF=en(hf)(e6("color"));var YF=Tt(zn),ZF=Tt(Fn);var n6={value:function(e){return e}},eA=en(n6),tA=YF("scroll"),nA=eA(ZF("overflow-y"));var WD=eA(ZF("overflow")),UD=YF("hidden");var qD=Tt(zn),o6=Tt(Fn);var a6={value:function(e){return e}},rA=qD("underline"),k_=en(a6)(o6("text-decoration")),oA=qD("overline");var aA=qD("line-through");var ge=Pt(Nt)(Wh),yn=en(Ii),hn=Tt(Fn),u6=c0(Ii),s6=me(dc),c6=Tt(ch),l6=en(zu),iA=function(){var e=at(Lt)(ct("xterm")),t=at(Lt)(ct("xterm-viewport")),n=ge(vt(at(Lt)(ct("xterm-underline-1")))(k_(rA)))(function(){return ge(vt(at(Lt)(ct("xterm-underline-2")))(yn(hn("text-decoration"))("double underline")))(function(){return ge(vt(at(Lt)(ct("xterm-underline-3")))(yn(hn("text-decoration"))("wavy underline")))(function(){return ge(vt(at(Lt)(ct("xterm-underline-4")))(yn(hn("text-decoration"))("dotted underline")))(function(){return vt(at(Lt)(ct("xterm-underline-5")))(yn(hn("text-decoration"))("dashed underline"))})})})}),h=at(Lt)(ct("xterm-scroll-area")),v=at(Lt)(ct("xterm-screen")),s=at(Lt)(ct("xterm-decoration-overview-ruler")),a=ge(vt(at(Lt)(ct("xterm-overline")))(k_(oA)))(function(){return ge(vt(at(at(Lt)(ct("xterm-underline-1")))(ct("xterm-overline")))(yn(hn("text-decoration"))("overline underline")))(function(){return ge(vt(at(at(Lt)(ct("xterm-underline-2")))(ct("xterm-overline")))(yn(hn("text-decoration"))("overline double underline")))(function(){return ge(vt(at(at(Lt)(ct("xterm-underline-3")))(ct("xterm-overline")))(yn(hn("text-decoration"))("overline wavy underline")))(function(){return ge(vt(at(at(Lt)(ct("xterm-underline-4")))(ct("xterm-overline")))(yn(hn("text-decoration"))("overline dotted underline")))(function(){return vt(at(at(Lt)(ct("xterm-underline-5")))(ct("xterm-overline")))(yn(hn("text-decoration"))("overline dashed underline"))})})})})}),p=at(Lt)(ct("xterm-message")),i=at(Lt)(ct("live-region")),r=at(Lt)(ct("xterm-helper-textarea")),u=at(Lt)(ct("xterm-helpers")),c=at(Lt)(ct("xterm-dim")),f=at(Lt)(ct("xterm-decoration-top")),l=at(Lt)(ct("xterm-decoration-container")),o=at(Lt)(ct("xterm-decoration")),d=at(Lt)(ct("composition-view")),_=at(Lt)(ct("xterm-char-measure-element")),m=ge(Sr(go))(function(){return ge(Ku(Ft(0)))(function(){return ge(Vi(Ft(0)))(function(){return ge(d0(Ft(0)))(function(){return ge(Vh(Ft(0)))(function(){return ge(Ia(10))(function(){return ge(yn(hn("color"))("transparent"))(function(){return yn(hn("pointer-events"))("none")})})})})})})}),y=at(Lt)(ct("xterm-accessibility"));return ge(vt(e)(ge(ps(PD.value))(function(){return ge(Sr(qh))(function(){return u6(s6(yf)(c6("user-select")))("none")})})))(function(){return ge(vt(at(e)(ct("focus")))(yn(hn("outline"))("none")))(function(){return ge(vt(at(e)(G1("focus")))(yn(hn("outline"))("none")))(function(){return ge(vt(gn(e)(u))(ge(Sr(go))(function(){return ge(Vi(Ft(0)))(function(){return Ia(5)})})))(function(){return ge(vt(gn(e)(r))(ge(yM(Ft(0))(Ft(0))(Ft(0))(Ft(0)))(function(){return ge(l6(hn("border"))(0))(function(){return ge(DM(Ft(0))(Ft(0))(Ft(0))(Ft(0)))(function(){return ge(Sr(go))(function(){return ge(aM(0))(function(){return ge(Ku(f0(-9999)))(function(){return ge(Vi(Ft(0)))(function(){return ge(Sf(Ft(0)))(function(){return ge(Ef(Ft(0)))(function(){return ge(Ia(-5))(function(){return ge(yn(hn("whitespace"))("nowrap"))(function(){return ge(WD(UD))(function(){return yn(hn("resize"))("none")})})})})})})})})})})})})))(function(){return ge(vt(gn(e)(d))(ge(HD(dy))(function(){return ge(XF(zT))(function(){return ge(mc(sM))(function(){return ge(Sr(go))(function(){return ge(yn(hn("white-space"))("nowrap"))(function(){return Ia(1)})})})})})))(function(){return ge(vt(gn(e)(at(d)(ct("active"))))(mc(cM)))(function(){return ge(vt(gn(e)(t))(ge(HD(dy))(function(){return ge(nA(tA))(function(){return ge(ps(BD))(function(){return ge(Sr(go))(function(){return ge(Vh(Ft(0)))(function(){return ge(Ku(Ft(0)))(function(){return ge(Vi(Ft(0)))(function(){return d0(Ft(0))})})})})})})})))(function(){return ge(vt(gn(e)(v))(Sr(qh)))(function(){return ge(vt(gn(e)(gn(v)(Bh("canvas"))))(ge(Sr(go))(function(){return ge(Ku(Ft(0)))(function(){return Vi(Ft(0))})})))(function(){return ge(vt(gn(e)(h))(yn(hn("visibility"))("hidden")))(function(){return ge(vt(_)(ge(mc(iM))(function(){return ge(yn(hn("visibility"))("hidden"))(function(){return ge(Sr(go))(function(){return ge(Vi(Ft(0)))(function(){return ge(Ku(f0(-9999)))(function(){return yn(hn("line-height"))("normal")})})})})})))(function(){return ge(vt(at(e)(ct("enable-mouse-events")))(ps(BD)))(function(){return ge(vt(at(e)(ct("xterm-cursor-pointer")))(ps(ND)))(function(){return ge(vt(gn(e)(at(Lt)(ct("xterm-cursor-pointer"))))(ps(ND)))(function(){return ge(vt(at(at(e)(ct("column-select")))(ct("focus")))(ps(QF)))(function(){return ge(vt(gn(e)(y))(m))(function(){return ge(vt(gn(e)(p))(m))(function(){return ge(vt(gn(e)(i))(ge(Sr(go))(function(){return ge(Ku(Ft(-9999)))(function(){return ge(Sf(Ft(1)))(function(){return ge(Ef(Ft(1)))(function(){return WD(UD)})})})})))(function(){return ge(vt(c)(yn(hn("opacity"))("1 !important")))(function(){return ge(n)(function(){return ge(a)(function(){return ge(vt(at(Lt)(ct("xterm-strikethrough")))(k_(aA)))(function(){return ge(vt(gn(gn(v)(l))(o))(ge(Ia(6))(function(){return Sr(go)})))(function(){return ge(vt(gn(gn(v)(l))(at(o)(ct("xterm-decoration-top-layer"))))(Ia(7)))(function(){return ge(vt(s)(ge(Ia(8))(function(){return ge(Sr(go))(function(){return ge(Vi(Ft(0)))(function(){return ge(Vh(Ft(0)))(function(){return yn(hn("pointer-events"))("none")})})})})))(function(){return vt(f)(ge(Ia(2))(function(){return Sr(qh)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var uA=e=>()=>e.dispose();var sA={toDisposable:De(be)},p6=function(e){return e.toDisposable},cA=function(e){return{dispose:function(){var t=p6(e);return function(n){return uA(t(n))}}()}},lA=function(e){return e.dispose};var gt=fe(ro),zD=yu(no),_6=V(di),v6=A1(Vs)(Mu),Co=Oo(no),wo=Pt(Nt)(ro),m6=At(Qt)(Et),g6=lA(cA(sA)),VD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),D6=function(){function e(){}return e.value=new e,e}(),b6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),GD=function(){function e(){}return e.value=new e,e}(),C6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),w6=function(){function e(){}return e.value=new e,e}(),S6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),E6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),T6=function(){function e(){}return e.value=new e,e}(),M6=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fA=function(){function e(){}return e.value=new e,e}(),dA=function(){function e(){}return e.value=new e,e}(),uo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),L6=function(e){return function(t){return Fi([VF(iA),Wu([$_("terminal")])([])])}},F6=function(e){var t=rr(Qp(e));return function(n){return gt(zD)(function(h){return t(_6(z.create)(si(v6(n))(h.terminal)))})}},A6=function(e){var t=Ze(Ea(e.MonadEffect0())),n=function(l){return gt(t(yr))(function(o){return gt(t(ky(l)(gr(o.listener)(new uo(w6.value)))))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},h=function(l){return gt(t(yr))(function(o){return gt(t(Ny(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(M6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},v=function(l){return gt(t(yr))(function(o){return gt(t(Py(l)(gr(o.listener)(new uo(T6.value)))))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},s=function(l){return gt(t(yr))(function(o){return gt(t(Hy(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(E6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},a=function(l){return gt(t(yr))(function(o){return gt(t(Oy(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(S6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},p=function(l){return gt(t(yr))(function(o){return gt(t($y(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(C6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},i=function(l){return gt(t(yr))(function(o){return gt(t(Ry(l)(gr(o.listener)(new uo(GD.value)))))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},r=function(l){return gt(t(yr))(function(o){return gt(t(Iy(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(b6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},u=function(l){return gt(t(yr))(function(o){return gt(t(xy(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(VD.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},c=function(l){return gt(t(yr))(function(o){return gt(t(Ay(l)(function(){var d=gr(o.listener);return function(_){return d(uo.create(y6.create(_)))}}())))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})},f=function(l){return gt(t(yr))(function(o){return gt(t(Fy(l)(gr(o.listener)(new uo(D6.value)))))(function(d){return gt(Dr(o.emitter))(function(){return Co(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Wn(d)(_.disposables),m})})})})};return function(l){if(l instanceof fA)return gt(Pu("terminal"))(function(o){if(o instanceof J)return t(nu("no terminal element"));if(o instanceof z)return gt(zD)(function(d){return wo(t(By(d.terminal)(o.value0)))(function(){return wo(f(d.terminal))(function(){return wo(c(d.terminal))(function(){return wo(r(d.terminal))(function(){return wo(i(d.terminal))(function(){return wo(p(d.terminal))(function(){return wo(n(d.terminal))(function(){return wo(a(d.terminal))(function(){return wo(s(d.terminal))(function(){return wo(v(d.terminal))(function(){return wo(h(d.terminal))(function(){return u(d.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.Terminal (line 73, column 5 - line 88, column 28): "+[o.constructor.name])});if(l instanceof dA)return gt(zD)(function(o){return t(m6(g6)(o.disposables))});if(l instanceof uo)return qo(l.value0);throw new Error("Failed pattern match at Halogen.Terminal (line 70, column 16 - line 92, column 23): "+[l.constructor.name])}},pA=function(e){return Ma({initialState:function(t){return{terminal:t,disposables:[]}},render:L6(e),eval:Ta({handleAction:A6(e),handleQuery:F6(e),receive:br.receive,initialize:new z(fA.value),finalize:new z(dA.value)})})};var _A=te(xi),vA=fe(Go),mA=Pt(Nt),H_=mA(Go),P_=mA(Nn),x6=Lr(Rr),O_=fe(Nn),I6=mn(Tv)(Rr),R6=At(Rr)(ln);var Yf=function(e){var t=Ze(cc(e));return function(n){return function(h){return h instanceof VD?n(h.value0):h instanceof GD?t(nu("line feed")):_A(void 0)}}},Nc=function(e){return e.prompt},Bc=function(e){return e.cmd};var $6=function(e){return function(t){var n=Bc(t),h=n(va),v=Nc(t)(va),s=n($r);return vA(Cr)(function(a){return H_(kt(O_(Zy(xT))(function(p){var i=p===0;return i?P_(Kt("\x1BM"))(function(){return O_(Zy(O_(IT)(function(r){return O_(AT(r-1|0))(function(u){return I6(FT)(u)})})))(function(r){return P_(Kt("\x9BK"))(function(){return Qe(R6)(r)(function(u){var c=(uh(Xn(a)(h))-1|0)<=u;return c?P_(Kt(Xn(a)(v)))(function(){return Kt(Hp(1)(Xn(a)(h)))}):Kt(Hp(1)(DE(u)(Xn(a)(h))))})})})}):x6(uh(Xn(a)(h))>0)(Kt("\b \b"))})))(function(){return qn(Gd(s)(Hp(1)))})})}},Zf=function(e){var t=$6(e),n=Ze(cc(e));return function(h){var v=Bc(h)($r),s=Nc(h)(va),a=t(h);return function(p){return function(i){return i===""?H_(qn(Qr(v)("")))(function(){return vA(Cr)(function(r){return kt(P_(Kt("^C"))(function(){return Kt(`\r
`+Xn(r)(s))}))})}):i==="\r"?p:i==="\x7F"?a:i>=" "&&i<="~"||i>="\xA0"?H_(qn(Gd(v)(function(r){return r+i})))(function(){return kt(Kt(i))}):H_(n(nu("non-printable: "+i)))(function(){return _A(void 0)})}}}};var yA=V(wt),DA=Pt(Nt),qr=DA(Go),hs=fe(Go),k6=Or(jt),O6=wm(jt)(Et),H6=Da(jt),P6=De(be),bA=At(xi)(ln),N6=DA(Nn);var ru={cmd:function(e){return LD(function(t){return new ee(t.command,function(n){return{prompt:t.prompt,command:n,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)},prompt:function(e){return LD(function(t){return new ee(t.prompt,function(n){return{prompt:n,command:t.command,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)}},N_=Nc(ru)(va),CA=Bc(ru),ed=CA($r),wA=CA(va),B6=function(e){return function(t){return function(n){var h=function(s){var a=`\r
  help\r
    show this help text`,p=function(i){return`\r
  `+(i.name+(`\r
    `+_r(`\r
    `)(i.description)))};return a+_r("")(yA(p)(s))},v=function(s){return qr(kt(Vn(h(n))))(function(){return hs(Cr)(function(a){return qr(kt(Kt(Xn(a)(N_))))(function(){return qn(Qr(ed)(""))})})})};return k6("help")(v)(O6(yA(function(s){return new ee(s.name,s.cmd)})(n)))}}},jD=function(e){var t=B6(e);return function(n){var h=t(n);return function(v){var s=h(v);return hs(Cr)(function(a){var p=Al(function(u){return!zv(u)})(qv(" ")(Xn(a)(wA))),i=Qs(p);if(i instanceof J)return qr(kt(Vn("")))(function(){return hs(Cr)(function(u){return qr(kt(Kt(Xn(u)(N_))))(function(){return qn(Qr(ed)(""))})})});if(i instanceof z){var r=H6(i.value0)(s);if(r instanceof z)return r.value0(rt([])(P6)(Am(p)));if(r instanceof J)return qr(kt(Vn(`\r
unrecognised command "`+(i.value0+'" - type "help" to see the available commands'))))(function(){return hs(Cr)(function(u){return qr(kt(Kt(Xn(u)(N_))))(function(){return qn(Qr(ed)(""))})})});throw new Error("Failed pattern match at Example.Shell (line 100, column 7 - line 107, column 34): "+[r.constructor.name])}throw new Error("Failed pattern match at Example.Shell (line 92, column 3 - line 107, column 34): "+[i.constructor.name])})}}},JD=function(e){var t=e.MonadEffect0(),n=Yf(t),h=Zf(t)(ru),v=jD(e);return function(s){var a=v(s);return hs(Cr)(function(p){return qr(Qe(bA)(p.foreground)(function(i){return wT(i)}))(function(){return qr(qn(function(i){return{prompt:i.prompt,command:i.command,commandEnv:i.commandEnv,foreground:J.value}}))(function(){return qr(qn(Qr(ed)("")))(function(){return hs(Cr)(function(i){return qr(kt(N6(Fa(ju(!0)))(function(){return Kt(`\r
`+Xn(i)(N_))})))(function(){return lc(n(h(a(p.commandEnv))))})})})})})})}},W6=function(e){return hs(Cr)(function(t){return qr(Qe(bA)(t.foreground)(function(n){return CT(n)(Xn(t)(wA))}))(function(){return qr(kt(Kt(`\r
`)))(function(){return qn(Qr(ed)(""))})})})},SA=function(e){var t=e.MonadEffect0(),n=Yf(t),h=JD(e),v=Zf(t)(ru),s=W6(e);return function(a){var p=h(a);return n(function(i){return i===""?qr(kt(Kt("^C")))(function(){return p}):v(s)(i)})}};function TA(e,t,n){var h=Object.prototype.toString.call(n);return h.indexOf("[object HTML")===0&&h.indexOf("Element]")===h.length-8?t(n):e}var MA=Z;var td=function(e){return TA(J.value,z.create,e)};var FA=Pt(Nt),LA=FA(Wh),qa=fe(ro),KD=Os(no),W_=At(zo)(ln),QD=FA(ro),q6=Oo(no),z6=De(be),AA=function(){function e(){}return e.value=new e,e}(),xA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),IA=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),V6=function(e){return function(t){var n=Fi([Wu([$_("editor"),OD(LA(Sf(Ft(500)))(function(){return Ef(Ft(500))}))])([]),uc([Zl(function(h){return xA.create(gf(h))})])([Ti("Save")]),uc([Zl(function(h){return IA.create(gf(h))})])([Ti("Exit")])]);return Wu([OD(LA(mc(uM))(function(){return vM(_M)}))])([n])}},G6=function(e){var t=Ze(Ea(e.MonadEffect0())),n=rr(Qp(e)),h=JD(e);return function(v){var s=h(v);return function(a){if(a instanceof AA)return qa(t(Kf))(function(p){return qa(KD(function(i){return i.filePath}))(function(i){return qa(n(EF(p)(i)))(function(r){return qa(Pu("editor"))(function(u){return Qe(W_)(u)(function(c){return Qe(W_)(td(c))(function(f){return qa(t(P1(f)(Hh.default)))(function(l){return qa(t(n0(l)))(function(o){return QD(Qe(W_)(r)(function(d){return t(W1(d)(o))}))(function(){return q6(function(d){var _={};for(var m in d)({}).hasOwnProperty.call(d,m)&&(_[m]=d[m]);return _.editSession=new z(new ee(p,new ee(l,o))),_})})})})})})})})})});if(a instanceof xA)return QD(t(sc(a.value0)))(function(){return qa(KD(function(p){return p.editSession}))(function(p){return qa(KD(function(i){return i.filePath}))(function(i){return Qe(W_)(p)(function(r){return qa(t(t0(r.value1.value1)))(function(u){return n(SF(r.value0)(i)(u))})})})})});if(a instanceof IA)return QD(t(sc(a.value0)))(function(){return qo(s)});throw new Error("Failed pattern match at Example.Editor (line 79, column 16 - line 101, column 29): "+[a.constructor.name])}}},RA=function(e){var t=V6(e),n=G6(e);return function(h){return Ma({initialState:function(v){return{editSession:J.value,filePath:rt("uhoh")(z6)(Qs(v))}},render:t,eval:Ta({handleAction:n(h),handleQuery:br.handleQuery,receive:br.receive,initialize:new z(AA.value),finalize:br.finalize})})}};var _s=function(){return window};function $A(e){return e.readyState}var nd=function(){function e(){}return e.value=new e,e}(),X6=function(){function e(){}return e.value=new e,e}(),Y6=function(){function e(){}return e.value=new e,e}();var kA=function(e){return e==="loading"?new z(nd.value):e==="interactive"?new z(X6.value):e==="complete"?new z(Y6.value):J.value};var eq=V(Ge);var HA=Z;var PA=Z;var NA=function(e){return eq(function(){var t=Cn(nd.value);return function(n){return t(kA(n))}}())(function(){return $A(e)})};function Wc(e){return function(){return e.document}}var qA=Z;var GA=fe(wn),Vq=Ze(Sn),XD=tn(Fr),Gq=Ds(Fr),jA=te(eo),jq=tn(tr),Jq=te(Qt),Kq=V(Ge),Qq=Pt(Nt),Xq=nr(lp),Yq=function(e){return GA(Vq(XD(Gq(function(){var t=uE(e);return function(n){return t(HA(n))}}())(Wc))(_s)))(function(t){return jA(jq(td)(t))})},JA=Sl(pn(Yr)(Te(Jq(void 0)))),Zq=_o(function(e){return function(){var n=XD(NA)(XD(Wc)(_s))();if(n instanceof nd){var h=Kq(qA)(_s)(),v=ql(function(s){return e(new ke(void 0))})();return _g(Ug)(v)(!1)(h)(),Tu(vg(Ug)(v)(!1)(h))}return e(new ke(void 0))(),fm}}),KA=Qq(wn)(Zq)(function(){return GA(Yq("body"))(function(e){return rt(Xq(Bn("Could not find body")))(jA)(e)})});var t8=Hg();var QA=function(){return function(e){var t=t8(e);return function(n){var h=t(n);return function(v){return function(s){return function(a){return function(p){return function(i){return IE(new Kl(h(v)(s)(a)(p)(function(r){return z.create(i(r))})))}}}}}}}};var c8=Ht(Li);var l8=tc();var YD=function(){return function(e){var t=l8(e);return function(n){var h=t(n);return function(v){return function(s){return function(a){return c8(h(v)(s)(a(void 0)))}}}}}};var d8=me(Gt),YA=QA(),ZA={reflectSymbol:function(){return"terminal"}},p8=YA(ZA)(Ss),h8=V(wt),ex={reflectSymbol:function(){return"process"}},_8=YA(ex)(cf),v8=Dm(oi),tx=Qv(Hu),ZD=fe(tx),U_=$t(tp)(Hu),m8=tc()(ZA)(Ss),nx=te(zo),g8=V(Li),y8=$t(eT),q_=yu(no),vs=te(Xv(Hu)),rx=Pt(Nt),rd=rx(tx),ox=Gw(no),eb=Oo(ox),D8=ks(ox),b8=Or(cf),C8=cr(qg),w8=so(qg),S8=js(cf),E8=YD()(ex)(cf),T8=Vw(xg),od=fe(ro),M8=me(XT),L8=ot(YT),F8=rx(ro),A8=Oo(no),tb=Ht(Li),x8=V(St),I8=te(xi);var ax=function(){function e(){}return e.value=new e,e}(),ix=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ux=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sx=function(){return dn.value}(),cx=function(){return dn.value}(),R8=function(e){var t=pA(e);return function(n){return Fi(d8([function(){if(n.terminal instanceof J)return Fi([]);if(n.terminal instanceof z)return p8(sx)(void 0)(t)(n.terminal.value0)(ix.create);throw new Error("Failed pattern match at Halogen.Shell (line 69, column 8 - line 71, column 80): "+[n.terminal.constructor.name])}()])(h8(function(h){return _8(cx)(h.value0)(h.value1.value0)(h.value1.value1)(ux.create)})(v8(n.processes))))}},lx=function(e){var t=e.MonadEffect0().Monad0(),n=y8(t),h=ai(DT(t.Bind1().Apply0().Functor0()))(T8);return function(v){var s=function(a){if(a instanceof ef)return ZD(U_(m8(sx)(void 0)(a.value0)))(function(i){return nx(i)});if(a instanceof tf)return g8(z.create)(n(a.value0));if(a instanceof nf)return ZD(U_(q_))(function(i){return vs(a.value0(i.shell.shell))});if(a instanceof rf)return rd(eb(function(i){var r={};for(var u in i)({}).hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r.shell=function(){var c={};for(var f in i.shell)({}).hasOwnProperty.call(i.shell,f)&&(c[f]=i.shell[f]);return c.shell=a.value0,c}(),r}))(function(){return vs(a.value1)});if(a instanceof of)return rd(eb(function(i){var r={};for(var u in i)({}).hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r.interpreter=a.value0,r}))(function(){return vs(a.value1)});if(a instanceof th)return rd(U_(qo(a.value0)))(function(){return vs(a.value1)});if(a instanceof af){var p=function(i){return rt(0)(function(r){return r.key})(Cm(i))};return ZD(D8(function(i){var r={};for(var u in i)({}).hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r.processes=b8(C8(w8)(p(i.processes)))(new ee(a.value0,a.value1))(i.processes),r}))(function(i){return vs(a.value2(p(i.processes)))})}if(a instanceof uf)return rd(eb(function(i){var r={};for(var u in i)({}).hasOwnProperty.call(i,u)&&(r[u]=i[u]);return r.processes=S8(a.value0)(i.processes),r}))(function(){return vs(a.value1)});if(a instanceof sf)return rd(U_(E8(cx)(a.value0)(vT.create(a.value1))))(function(){return vs(a.value2)});throw new Error("Failed pattern match at Halogen.Shell (line 111, column 5 - line 113, column 22): "+[a.constructor.name])};return qw(h(s)(v))}},$8=function(e){var t=Ze(Ea(e.MonadEffect0())),n=lx(e);return function(h){if(h instanceof ax)return od(t(T1(M8(_y(ZT)('"Cascadia Code", Menlo, monospace'))(_y(e1)(!0)))(L8)))(function(v){return F8(A8(function(s){var a={};for(var p in s)({}).hasOwnProperty.call(s,p)&&(a[p]=s[p]);return a.terminal=new z(v),a}))(function(){return od(q_)(function(s){return tb(n(s.shell.init))})})});if(h instanceof ix)return od(q_)(function(v){return tb(n(v.interpreter(h.value0)))});if(h instanceof ux)return tb(n(h.value0));throw new Error("Failed pattern match at Halogen.Shell (line 80, column 16 - line 91, column 51): "+[h.constructor.name])}},k8=function(e){var t=lx(e);return function(n){return od(q_)(function(h){return od(t(h.shell.query(n.value0)))(function(v){return nx(x8(n.value1)(v))})})}},fx=function(e){return Ma({initialState:function(t){return{shell:t,interpreter:Te(I8(void 0)),terminal:J.value,processes:Hr}},render:R8(e),eval:Ta({handleAction:$8(e),handleQuery:k8(e),receive:br.receive,initialize:new z(ax.value),finalize:br.finalize})})};var z_={suspend:oS,fork:aS,join:Cl,Monad0:function(){return Eu},Functor1:function(){return fS}};var V_=function(e){return e.fork};var px=Z,So=Z,hx=function(e){var t=At(e)(ln);return function(n){return So(function(h){return t(n)(h.rendering)})}},H8=Z,_x=function(e){return function(t){return So(function(n){return H8(t(n.rendering))})}},P8=Z,G_=function(e){return function(t){return e(t)}},vx=function(e){return function(t){return function(n){return function(h){return function(){var s=Yt({})(),a=Yt(Js)(),p=Yt(Js)(),i=Yt(n)(),r=Yt(new z(Ke.value))(),u=Yt(new z(Ke.value))(),c=Yt(J.value)(),f=Yt(1)(),l=Yt(new z(Hr))(),o=Yt(Hr)(),d={component:e,state:e.initialState(t),refs:Hr,children:Js,childrenIn:a,childrenOut:p,selfRef:s,handlerRef:i,pendingQueries:r,pendingOuts:u,pendingHandlers:c,rendering:J.value,fresh:f,subscriptions:l,forks:o,lifecycleHandlers:h};return It(d)(s)(),P8(s)}}}}};var N8=At(Qt)(ln),B8=tn(tr),W8=Da(Ag),fn=fe(wn),Wt=Ze(Sn),U8=Pt(Nt),Eo=U8(wn),Cx=At(eo),q8=Cx(pr),wx=V_(z_),z8=zs(pi)(pr),na=te(eo),V8=V(mm),mx=li(pi),G8=V(di),gx=qs(pi),j8=V(St),J8=Or(Ag),K8=qE(lm),Q8=js(Kp),X8=Sb(Ro),Y8=Or(Kp),yx=Cx(ln),Dx=Da(Kp),Z8=Da(jt),ez=dw(Mu),tz=Sm(jt),nz=function(e){return function(t){return function(){var h=Je(t)(),v=Je(h.subscriptions)();return N8(Up)(B8(W8(e))(v))()}}},j_=function(e){return function(t){return fn(Wt(Je(e)))(function(n){if(n instanceof J)return t;if(n instanceof z)return Wt(It(new z(new Se(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},J_=function(e){return function(t){return Eo(Wt(It({initializers:Ke.value,finalizers:Ke.value})(e)))(function(){return fn(Wt(t))(function(n){return fn(Wt(Je(e)))(function(h){return Eo(q8(wx)(h.finalizers))(function(){return Eo(z8(h.initializers))(function(){return na(n)})})})})})}},ms=Sl(pn(Yr)(Te(te(Qt)(void 0)))),bx=function(e){return function(t){return fn(Wt(Je(t)))(function(n){return Wt(uv(function(h){return{state:h+1|0,value:e(h)}})(n.fresh))})}},rb=function(e){return function(t){return function(n){return fn(Wt(Je(t)))(function(h){return ou(e)(t)(h.component.eval(new ic(V8(z.create)(AS(n)),Te(J.value))))})}}},ou=function(e){return function(t){return function(n){var h=function(s){return function(a){return fn(Wt(Je(s)))(function(p){return JE(function(i){var r=function(u){return mx(fn(Wt(Je(u)))(function(c){return So(function(f){return rb(e)(f.selfRef)(i.value1)})(c)}))};return G8(i.value2)(gx(i.value0(lm)(r)(p.children)))})(a)})}},v=function(s){return function(a){if(a instanceof zl)return fn(Wt(Je(s)))(function(p){var i=a.value0(p.state);if(Zs(p.state)(i.value1))return na(i.value0);if(_n)return Eo(Wt(It({component:p.component,state:i.value1,refs:p.refs,children:p.children,childrenIn:p.childrenIn,childrenOut:p.childrenOut,selfRef:p.selfRef,handlerRef:p.handlerRef,pendingQueries:p.pendingQueries,pendingOuts:p.pendingOuts,pendingHandlers:p.pendingHandlers,rendering:p.rendering,fresh:p.fresh,subscriptions:p.subscriptions,forks:p.forks,lifecycleHandlers:p.lifecycleHandlers})(s)))(function(){return Eo(J_(p.lifecycleHandlers)(e(p.lifecycleHandlers)(s)))(function(){return na(i.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[i.constructor.name])});if(a instanceof Vl)return fn(bx(YE)(s))(function(p){return fn(Wt(XE(a.value0(p))(function(i){return ms(ob(e)(s)(new Lu(i)))})))(function(i){return fn(Wt(Je(s)))(function(r){return Eo(Wt(Ar(j8(J8(p)(i)))(r.subscriptions)))(function(){return na(a.value1(p))})})})});if(a instanceof zp)return Eo(Wt(nz(a.value0)(s)))(function(){return na(a.value1)});if(a instanceof Ou)return a.value0;if(a instanceof Gl)return h(s)(a.value0);if(a instanceof jl)return fn(Wt(Je(s)))(function(p){return fn(Wt(Je(p.handlerRef)))(function(i){return Eo(j_(p.pendingOuts)(i(a.value0)))(function(){return na(a.value1)})})});if(a instanceof Vp)return gx(K8(Tg(function(){var p=ou(e)(s);return function(i){return mx(p(i))}}())(a.value0)));if(a instanceof Gp)return fn(bx(ZE)(s))(function(p){return fn(Wt(Je(s)))(function(i){return fn(Wt(Yt(!1)))(function(r){return fn(wx(lS(Wt(function(){return Ar(Q8(p))(i.forks)(),It(!0)(r)()}))(ou(e)(s)(a.value0))))(function(u){return Eo(Wt(X8(Je(r))(Ar(Y8(p)(u))(i.forks))))(function(){return na(a.value1(p))})})})})});if(a instanceof jp)return fn(Wt(Je(s)))(function(p){return fn(Wt(Je(p.forks)))(function(i){return Eo(yx(Cl)(Dx(a.value0)(i)))(function(){return na(a.value1)})})});if(a instanceof Jp)return fn(Wt(Je(s)))(function(p){return fn(Wt(Je(p.forks)))(function(i){return Eo(yx(wl(Bn("Cancelled")))(Dx(a.value0)(i)))(function(){return na(a.value1)})})});if(a instanceof Jl)return fn(Wt(Je(s)))(function(p){return na(a.value1(Z8(a.value0)(p.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[a.constructor.name])}};return ez(v(t))(n)}}},ob=function(e){return function(t){return function(n){if(n instanceof _p)return Wt(Qe(Ar)(t)(G_(function(h){return{component:h.component,state:h.state,refs:tz(Te(n.value1))(n.value0)(h.refs),children:h.children,childrenIn:h.childrenIn,childrenOut:h.childrenOut,selfRef:h.selfRef,handlerRef:h.handlerRef,pendingQueries:h.pendingQueries,pendingOuts:h.pendingOuts,pendingHandlers:h.pendingHandlers,rendering:h.rendering,fresh:h.fresh,subscriptions:h.subscriptions,forks:h.forks,lifecycleHandlers:h.lifecycleHandlers}})));if(n instanceof Lu)return fn(Wt(Je(t)))(function(h){return ou(e)(t)(h.component.eval(new ac(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var oz=fe(Fr),az=Pt(Nt),Ax=Ad(Qt)(ln),xx=At(eo)(pr),Ix=V_(z_),id=tn(Fr),Rx=At(Qt),$x=Rx(ln),Sx=Rx(Ln),Ex=az(wn),iz=zs(pi)(pr),ad=Ze(Sn),Tx=te(Qt),ab=V(Ge),ib=te(eo),ub=Lr(Qt),uz=_x(Ge),sz=Ht(di),Mx=OS(Qt),cz=hx(Qt),lz=Qn(Sd),fz=gs(Ge),sb=fe(wn),dz=Ze(Xd),Lx=function(){return Yt({initializers:Ke.value,finalizers:Ke.value})}(),Fx=function(e){return function(){var n=Je(e)();return It(J.value)(e)(),Ax(n)(function(){var h=xx(Ix);return function(v){return ms(h(vu(v)))}}())()}},pz=function(e){return function(){return id($x(Sx(Up)))(Je(e.subscriptions))(),It(J.value)(e.subscriptions)(),id(Sx(function(){var n=wl(Bn("finalized"));return function(h){return ms(n(h))}}()))(Je(e.forks))(),It(Hr)(e.forks)()}},kx=function(e){return function(t){return function(n){var h=function(u){return function(c){return So(function(f){var l=ou(a)(f.selfRef)(f.component.eval(new nc(void 0)));return Ar(function(o){return{initializers:new Se(Ex(iz(vu(o.initializers)))(function(){return Ex(l)(function(){return ad(function(){return Fx(f.pendingQueries)(),Fx(f.pendingOuts)()})})}),c),finalizers:o.finalizers}})(u)})}},v=function(u){return function(c){return function(f){return Og(function(l){return function(){var d=Lx(),_=vx(l)(f)(c)(d)(),m=Je(u)();return It({initializers:Ke.value,finalizers:m.finalizers})(u)(),id(So(function(){var y=a(u);return function(b){return y(function(S){return S.selfRef}(b))}}()))(Je(_))(),id(h(u)(m.initializers))(Je(_))(),_}})}}},s=function(u){return function(c){return function(f){return function(l){return kg(function(o){return function(){var _=ab(o.pop)(Je(f))(),m=function(){if(_ instanceof z){It(_.value0.value1)(f)();var b=Je(_.value0.value0)();return So(function(S){return function(){return Qe(It)(S.handlerRef)(function(){var g=rt(ib(void 0))(c);return function(C){return g(o.output(C))}}())(),ms(ou(a)(S.selfRef)(S.component.eval(new oc(o.input,void 0))))()}})(b)(),_.value0.value0}if(_ instanceof J)return v(u)(function(){var S=rt(ib(void 0))(c);return function(D){return S(o.output(D))}}())(o.input)(o.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[_.constructor.name])}(),y=ab(function(b){return Ms(o.get(b))})(Je(l))();return ub(y)(L_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Ar(o.set(m))(l)(),oz(Je(m))(uz(function(b){if(b instanceof J)return Rw("Halogen internal error: child was not initialized in renderChild");if(b instanceof z)return Tx(e.renderChild(b.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[b.constructor.name])}))()}})}}}},a=function(u){return function(c){return function(){var l=Je(c)(),o=ab(la)(Je(l.pendingHandlers))();ub(o)(It(new z(Ke.value))(l.pendingHandlers))(),It(Js)(l.childrenOut)(),It(l.children)(l.childrenIn)();var d=function(){var S=j_(l.pendingHandlers),D=ob(a)(l.selfRef);return function(g){return S(sz(D(g)))}}(),_=function(){var S=j_(l.pendingQueries);return function(D){return S(d(Lu.create(D)))}}(),m=e.render(function(S){return ms(d(S))})(s(u)(_)(l.childrenIn)(l.childrenOut))(l.component.render(l.state))(l.rendering)(),y=Je(l.childrenOut)(),b=Je(l.childrenIn)();return Mx(b)(function(S){return function(){var g=Je(S)();return cz(e.removeChild)(g)(),p(u)(g)()}})(),Qe(Ar)(l.selfRef)(G_(function(S){return{component:S.component,state:S.state,refs:S.refs,children:y,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,rendering:new z(m),fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers}}))(),ub(o)(Qe(lz)(void 0)(function(S){return function(){var g=Je(l.pendingHandlers)();It(new z(Ke.value))(l.pendingHandlers)(),$x(function(){var E=xx(Ix);return function(T){return ms(E(vu(T)))}}())(g)();var C=Je(l.pendingHandlers)(),F=rt(!1)(YC)(C);return F?fz(It(J.value)(l.pendingHandlers))(new Zt(void 0))():new un(void 0)}}))()}}},p=function(u){return So(function(c){return function(){pz(c)();var l=ou(a)(c.selfRef)(c.component.eval(new rc(void 0)));return Ar(function(o){return{initializers:o.initializers,finalizers:new Se(l,o.finalizers)}})(u)(),Mx(c.children)(function(o){return function(){var _=Je(o)();return p(u)(_)()}})()}})},i=function(u){return function(c){return function(f){return sb(ad(Je(u)))(function(l){return l?ib(J.value):rb(a)(c)(f)})}}},r=function(u){return function(c){return function(f){return J_(c)(function(){var o=Je(u)();return o?void 0:(It(!0)(u)(),p(c)(f)(),So(function(d){return function(){var m=dz(Je(d.selfRef))();return Ax(m.rendering)(e.dispose)()}})(f)())})}}};return sb(ad(Lx))(function(u){return sb(ad(Yt(!1)))(function(c){return J_(u)(function(){var l=yr(),o=id(Je)(v(u)(function(){var d=gr(l.listener);return function(_){return ad(d(_))}}())(n)(t))();return So(function(d){return Tx({query:i(c)(d.selfRef),messages:l.emitter,dispose:r(c)(u)(o)})})(o)()})})})}}};var To=function(e){return function(t){return function(){return t[e]}}};var _z=To("baseURI"),vz=To("ownerDocument"),Ox=To("parentNode"),mz=To("parentElement");var gz=To("childNodes"),yz=To("firstChild"),Dz=To("lastChild"),bz=To("previousSibling"),Hx=To("nextSibling"),Cz=To("nodeValue");var wz=To("textContent");function cb(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function K_(e){return function(t){return function(){t.appendChild(e)}}}function lb(e){return function(t){return function(){t.removeChild(e)}}}var Px=V(Ge);var fb=function(){var e=Px(Xt);return function(t){return e(Ox(t))}}();var Nx=function(){var e=Px(Xt);return function(t){return e(Hx(t))}}();var db=function(e,t,n){var h=0,v;return function(s){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return h=1,v=n(),h=2,v}},pb=Ht(Ge),Lz=te(Qt),Fz=At(Qt)(ln),Az=cn(),xz=Lr(Qt),Iz=$o(Xc(Xc(jr))),Rz=De(be),$z=fe(wn),kz=Ze(Sn),Oz=V(Ge),Hz=tn(Fr);var Pz=function(e){return function(t){return function(n){return t instanceof z&&n instanceof z?pb(cb(e)(t.value0)(n.value0)):t instanceof J&&n instanceof z?pb(K_(e)(n.value0)):Lz(void 0)}}},Bx=function(e){return function(){var n=fb(e.node)();return Fz(function(h){return lb(e.node)(h)})(n)()}},Nz=function(e){return function(t){return function(n){var h=px(function(p){return p.node}),v=function(p){return p instanceof z?mr(p.value0):void 0},s=function(p){var i=nT(Az)(p),r=db("patch","Halogen.VDom.Driver",function(){return function(d,_){if(d instanceof z){if(_ instanceof Kl)return mr(d.value0),c(100)(_.value0);if(_ instanceof Yp){var m=vr(d.value0,_.value0);return an(new on(Un(m),new z(m),r(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[_.constructor.name])}return u(104)(_)}}),u=db("render","Halogen.VDom.Driver",function(){return function(d){if(d instanceof Kl)return c(86)(d.value0);if(d instanceof Yp){var _=i(d.value0);return an(new on(Un(_),new z(_),r(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[d.constructor.name])}}),c=db("renderComponentSlot","Halogen.VDom.Driver",function(){return function(d){var _=Je(t)(),m=_(d)(),y=h(m);return an(new on(y,J.value,r(117),v))}}),f=r(91),l=u(82),o=c(109);return l},a=LE(e);return{buildWidget:s,buildAttributes:a,document:n}}}},Bz=function(e){return function(t){var n=function(h){return function(v){return function(s){return function(a){if(a instanceof J)return function(){var i=Yt(v)(),r=Nz(h)(i)(e),u=Nl(r)(s),c=Un(u);return pb(K_(c)(MA(t)))(),{machine:u,node:c,renderChildRef:i}};if(a instanceof z)return function(){It(v)(a.value0.renderChildRef)();var i=fb(a.value0.node)(),r=Nx(a.value0.node)(),u=vr(a.value0.machine,s),c=Un(u);return xz(Iz(Zs)(a.value0.node)(c))(Pz(c)(r)(i))(),{machine:u,node:c,renderChildRef:a.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[a.constructor.name])}}}};return{render:n,renderChild:Rz,removeChild:Bx,dispose:Bx}}},Wx=function(e){return function(t){return function(n){return $z(kz(Oz(PA)(Hz(Wc)(_s))))(function(h){return kx(Bz(h)(n))(e)(t)})}}};var Uc=fe(Go),zx=Pt(Nt),za=zx(Go),Q_=me(su),Uz=Nc(ru)(va),hb=Bc(ru)($r),qz=oa(bT),X_=fe(Nn),Ux=Le(xo),zz=Le(Xb),Vz=Le(ca),vb=zx(Nn),Gz=V(wt),jz=At(xi)(Et),_b=fe(wn),Jz=Yf(Sn),Kz=Zf(Sn)(ru),Qz=jD(Vs)(Mu),Xz=fx(Vs),Yz=function(e){var t=k1(e),n=SA(e),h=RA(e),v=Ze(cc(e.MonadEffect0())),s=rr(yT(e));return function(a){var p=n(a),i=h(a),r=Uc(Cr)(function(c){return za(kt(Kt(`\r
`+Xn(c)(Uz))))(function(){return qn(Qr(hb)(""))})}),u=function(c){return Te(qz(c)(r))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:u(kt(X_(e0)(function(){var c=Q_(`\r
`);return function(f){return Vn(c(Ux(f)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:u(kt(X_(e0)(function(){var c=Q_(`\r
`);return function(f){return Vn(c(Ux(f)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:u(kt(X_(Fa(i1))(function(){var c=Q_(`\r
`);return function(f){return Vn(c(zz(f)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:u(kt(Fa(ju(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:u(kt(Fa(ju(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:u(kt(X_(Fa(a1))(function(){var c=Q_(`\r
`);return function(f){return Vn(c(Vz(f)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(c){return za(qn(Qr(hb)("")))(function(){return Uc(zg(t)(c))(function(f){return za(qn(function(l){return{prompt:l.prompt,command:l.command,commandEnv:l.commandEnv,foreground:new z(f)}}))(function(){return za(kt(vb(Fa(ju(!1)))(function(){return Kt(`\r
`)})))(function(){return lc(p)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(c){return c.length===1?za(qn(Qr(hb)("")))(function(){return Uc(zg(i)(c))(function(f){return za(qn(function(l){return{prompt:l.prompt,command:l.command,commandEnv:l.commandEnv,foreground:new z(f)}}))(function(){return za(kt(vb(Fa(ju(!1)))(function(){return Kt(`\r
`)})))(function(){return lc(p)})})})}):u(kt(Vn(`\r
this command expects a single file name as its argument`)))(c)}},{name:"ls",description:["lists files in the file system"],cmd:u(Uc(v(Kf))(function(c){return Uc(s(TF(c)))(function(f){return kt(Vn(`\r
`+_r(" ")(Gz(function(l){return l})(f))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(c){return Uc(v(Kf))(function(f){return za(jz(function(l){return s(MF(f)(l))})(c))(function(){return r})})}}]}},qx=Yz(Vs)(Mu),Vx=JA(_b(KA)(function(e){return _b(Tl)(function(t){var n={init:za(kt(vb(I1(!0))(function(){return Kt("> ")})))(function(){return lc(Jz(Kz(Qz(qx))))}),query:function(h){return kt(Kt(h))},shell:{prompt:"> ",command:"",foreground:J.value,commandEnv:qx}};return _b(Wx(Xz)(n)(e))(function(h){return El(h.query)(t)})})}));Vx();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
