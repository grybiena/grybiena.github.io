(()=>{var Gx=Object.create;var gb=Object.defineProperty;var jx=Object.getOwnPropertyDescriptor;var Jx=Object.getOwnPropertyNames;var Kx=Object.getPrototypeOf,Qx=Object.prototype.hasOwnProperty;var ht=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Xx=(e,t,n,h)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of Jx(t))!Qx.call(e,v)&&v!==n&&gb(e,v,{get:()=>t[v],enumerable:!(h=jx(t,v))||h.enumerable});return e};var ra=(e,t,n)=>(n=e!=null?Gx(Kx(e)):{},Xx(t||!e||!e.__esModule?gb(n,"default",{value:e,enumerable:!0}):n,e));var Yp=ht((MT,Xp)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(s,o,i){if(typeof s!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(i=o),n.modules[s]||(n.payloads[s]=i,n.modules[s]=null)};n.modules={},n.payloads={};var h=function(s,o,i){if(typeof o=="string"){var c=a(s,o);if(c!=null)return i&&i(),c}else if(Object.prototype.toString.call(o)==="[object Array]"){for(var f=[],l=0,r=o.length;l<r;++l){var d=a(s,o[l]);if(d==null&&v.original)return;f.push(d)}return i&&i.apply(null,f)||!0}},v=function(s,o){var i=h("",s,o);return i==null&&v.original?v.original.apply(this,arguments):i},u=function(s,o){if(o.indexOf("!")!==-1){var i=o.split("!");return u(s,i[0])+"!"+u(s,i[1])}if(o.charAt(0)=="."){var c=s.split("/").slice(0,-1).join("/");for(o=c+"/"+o;o.indexOf(".")!==-1&&f!=o;){var f=o;o=o.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return o},a=function(s,o){o=u(s,o);var i=n.modules[o];if(!i){if(i=n.payloads[o],typeof i=="function"){var c={},f={id:o,uri:"",exports:c,packaged:!0},l=function(d,_){return h(o,d,_)},r=i(l,c,f);c=r||f.exports,n.modules[o]=c,delete n.payloads[o]}i=n.modules[o]=c||i}return i};function p(s){var o=t;s&&(t[s]||(t[s]={}),o=t[s]),(!o.define||!o.define.packaged)&&(n.original=o.define,o.define=n,o.define.packaged=!0),(!o.require||!o.require.packaged)&&(v.original=o.require,o.require=v,o.require.packaged=!0)}p(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function h(v,u,a){Object.defineProperty(v,u,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||h(String.prototype,"startsWith",function(v,u){return u=u||0,this.lastIndexOf(v,u)===u}),String.prototype.endsWith||h(String.prototype,"endsWith",function(v,u){var a=this;(u===void 0||u>a.length)&&(u=a.length),u-=v.length;var p=a.indexOf(v,u);return p!==-1&&p===u}),String.prototype.repeat||h(String.prototype,"repeat",function(v){for(var u="",a=this;v>0;)v&1&&(u+=a),(v>>=1)&&(a+=a);return u}),String.prototype.includes||h(String.prototype,"includes",function(v,u){return this.indexOf(v,u)!=-1}),Object.assign||(Object.assign=function(v){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var u=Object(v),a=1;a<arguments.length;a++){var p=arguments[a];p!=null&&Object.keys(p).forEach(function(s){u[s]=p[s]})}return u}),Object.values||(Object.values=function(v){return Object.keys(v).map(function(u){return v[u]})}),Array.prototype.find||h(Array.prototype,"find",function(v){for(var u=this.length,a=arguments[1],p=0;p<u;p++){var s=this[p];if(v.call(a,s,p,this))return s}}),Array.prototype.findIndex||h(Array.prototype,"findIndex",function(v){for(var u=this.length,a=arguments[1],p=0;p<u;p++){var s=this[p];if(v.call(a,s,p,this))return p}}),Array.prototype.includes||h(Array.prototype,"includes",function(v,u){return this.indexOf(v,u)!=-1}),Array.prototype.fill||h(Array.prototype,"fill",function(v){for(var u=this,a=u.length>>>0,p=arguments[1],s=p>>0,o=s<0?Math.max(a+s,0):Math.min(s,a),i=arguments[2],c=i===void 0?a:i>>0,f=c<0?Math.max(a+c,0):Math.min(c,a);o<f;)u[o]=v,o++;return u}),Array.of||h(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function h(v){if(typeof v!="object"||!v)return v;var u;if(Array.isArray(v)){u=[];for(var a=0;a<v.length;a++)u[a]=h(v[a]);return u}if(Object.prototype.toString.call(v)!=="[object Object]")return v;u={};for(var a in v)u[a]=h(v[a]);return u}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(u){return u[u.length-1]},t.stringReverse=function(u){return u.split("").reverse().join("")},t.stringRepeat=function(u,a){for(var p="";a>0;)a&1&&(p+=u),(a>>=1)&&(u+=u);return p};var h=/^\s\s*/,v=/\s\s*$/;t.stringTrimLeft=function(u){return u.replace(h,"")},t.stringTrimRight=function(u){return u.replace(v,"")},t.copyObject=function(u){var a={};for(var p in u)a[p]=u[p];return a},t.copyArray=function(u){for(var a=[],p=0,s=u.length;p<s;p++)u[p]&&typeof u[p]=="object"?a[p]=this.copyObject(u[p]):a[p]=u[p];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(u){for(var a={},p=0;p<u.length;p++)a[u[p]]=1;return a},t.createMap=function(u){var a=Object.create(null);for(var p in u)a[p]=u[p];return a},t.arrayRemove=function(u,a){for(var p=0;p<=u.length;p++)a===u[p]&&u.splice(p,1)},t.escapeRegExp=function(u){return u.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(u){return(""+u).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(u,a){var p=[];return u.replace(a,function(s){p.push({offset:arguments[arguments.length-2],length:s.length})}),p},t.deferredCall=function(u){var a=null,p=function(){a=null,u()},s=function(o){return s.cancel(),a=setTimeout(p,o||0),s};return s.schedule=s,s.call=function(){return this.cancel(),u(),s},s.cancel=function(){return clearTimeout(a),a=null,s},s.isPending=function(){return a},s},t.delayedCall=function(u,a){var p=null,s=function(){p=null,u()},o=function(i){p==null&&(p=setTimeout(s,i||a))};return o.delay=function(i){p&&clearTimeout(p),p=setTimeout(s,i||a)},o.schedule=o,o.call=function(){this.cancel(),u()},o.cancel=function(){p&&clearTimeout(p),p=null},o.isPending=function(){return p},o},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(u,a,p){return p&&u.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var h=typeof navigator=="object"?navigator:{},v=(/mac|win|linux/i.exec(h.platform)||["other"])[0].toLowerCase(),u=h.userAgent||"",a=h.appName||"";t.isWin=v=="win",t.isMac=v=="mac",t.isLinux=v=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((u.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((u.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=u.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(u.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(u.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(u.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(u.split(" Edge/")[1])||void 0,t.isAIR=u.indexOf("AdobeAIR")>=0,t.isAndroid=u.indexOf("Android")>=0,t.isChromeOS=u.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(u)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./useragent"),v="http://www.w3.org/1999/xhtml";t.buildDom=function i(c,f,l){if(typeof c=="string"&&c){var r=document.createTextNode(c);return f&&f.appendChild(r),r}if(!Array.isArray(c))return c&&c.appendChild&&f&&f.appendChild(c),c;if(typeof c[0]!="string"||!c[0]){for(var d=[],_=0;_<c.length;_++){var m=i(c[_],f,l);m&&d.push(m)}return d}var y=document.createElement(c[0]),b=c[1],S=1;b&&typeof b=="object"&&!Array.isArray(b)&&(S=2);for(var _=S;_<c.length;_++)i(c[_],y,l);return S==2&&Object.keys(b).forEach(function(D){var g=b[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?l&&(l[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),f&&f.appendChild(y),y},t.getDocumentHead=function(i){return i||(i=document),i.head||i.getElementsByTagName("head")[0]||i.documentElement},t.createElement=function(i,c){return document.createElementNS?document.createElementNS(c||v,i):document.createElement(i)},t.removeChildren=function(i){i.innerHTML=""},t.createTextNode=function(i,c){var f=c?c.ownerDocument:document;return f.createTextNode(i)},t.createFragment=function(i){var c=i?i.ownerDocument:document;return c.createDocumentFragment()},t.hasCssClass=function(i,c){var f=(i.className+"").split(/\s+/g);return f.indexOf(c)!==-1},t.addCssClass=function(i,c){t.hasCssClass(i,c)||(i.className+=" "+c)},t.removeCssClass=function(i,c){for(var f=i.className.split(/\s+/g);;){var l=f.indexOf(c);if(l==-1)break;f.splice(l,1)}i.className=f.join(" ")},t.toggleCssClass=function(i,c){for(var f=i.className.split(/\s+/g),l=!0;;){var r=f.indexOf(c);if(r==-1)break;l=!1,f.splice(r,1)}return l&&f.push(c),i.className=f.join(" "),l},t.setCssClass=function(i,c,f){f?t.addCssClass(i,c):t.removeCssClass(i,c)},t.hasCssString=function(i,c){var f=0,l;if(c=c||document,l=c.querySelectorAll("style")){for(;f<l.length;)if(l[f++].id===i)return!0}},t.removeElementById=function(i,c){c=c||document,c.getElementById(i)&&c.getElementById(i).remove()};var u,a=[];t.useStrictCSP=function(i){u=i,i==!1?p():a||(a=[])};function p(){var i=a;a=null,i&&i.forEach(function(c){s(c[0],c[1])})}function s(i,c,f){if(!(typeof document>"u")){if(a){if(f)p();else if(f===!1)return a.push([i,c])}if(!u){var l=f;!f||!f.getRootNode?l=document:(l=f.getRootNode(),(!l||l==f)&&(l=document));var r=l.ownerDocument||l;if(c&&t.hasCssString(c,l))return null;c&&(i+=`
/*# sourceURL=ace/css/`+c+" */");var d=t.createElement("style");d.appendChild(r.createTextNode(i)),c&&(d.id=c),l==r&&(l=t.getDocumentHead(r)),l.insertBefore(d,l.firstChild)}}}if(t.importCssString=s,t.importCssStylsheet=function(i,c){t.buildDom(["link",{rel:"stylesheet",href:i}],t.getDocumentHead(c))},t.scrollbarWidth=function(i){var c=t.createElement("ace_inner");c.style.width="100%",c.style.minWidth="0px",c.style.height="200px",c.style.display="block";var f=t.createElement("ace_outer"),l=f.style;l.position="absolute",l.left="-10000px",l.overflow="hidden",l.width="200px",l.minWidth="0px",l.height="150px",l.display="block",f.appendChild(c);var r=i&&i.documentElement||document&&document.documentElement;if(!r)return 0;r.appendChild(f);var d=c.offsetWidth;l.overflow="scroll";var _=c.offsetWidth;return d===_&&(_=f.clientWidth),r.removeChild(f),d-_},t.computedStyle=function(i,c){return window.getComputedStyle(i,"")||{}},t.setStyle=function(i,c,f){i[c]!==f&&(i[c]=f)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=h.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,h.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var o=document.createElement("div");t.HI_DPI&&o.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!h.isEdge&&typeof o.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),o=null}t.HAS_CSS_TRANSFORMS?t.translate=function(i,c,f){i.style.transform="translate("+Math.round(c)+"px, "+Math.round(f)+"px)"}:t.translate=function(i,c,f){i.style.top=Math.round(f)+"px",i.style.left=Math.round(c)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./dom");t.get=function(v,u){var a=new XMLHttpRequest;a.open("GET",v,!0),a.onreadystatechange=function(){a.readyState===4&&u(a.responseText)},a.send(null)},t.loadScript=function(v,u){var a=h.getDocumentHead(),p=document.createElement("script");p.src=v,a.appendChild(p),p.onload=p.onreadystatechange=function(s,o){(o||!p.readyState||p.readyState=="loaded"||p.readyState=="complete")&&(p=p.onload=p.onreadystatechange=null,o||u())}},t.qualifyURL=function(v){var u=document.createElement("a");return u.href=v,u.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(h,v){h.super_=v,h.prototype=Object.create(v.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(h,v){for(var u in v)h[u]=v[u];return h},t.implement=function(h,v){t.mixin(h,v)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var h={},v=function(){this.propagationStopped=!0},u=function(){this.defaultPrevented=!0};h._emit=h._dispatchEvent=function(a,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var s=this._eventRegistry[a]||[],o=this._defaultHandlers[a];if(!(!s.length&&!o)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=a),p.stopPropagation||(p.stopPropagation=v),p.preventDefault||(p.preventDefault=u),s=s.slice();for(var i=0;i<s.length&&(s[i](p,this),!p.propagationStopped);i++);if(o&&!p.defaultPrevented)return o(p,this)}},h._signal=function(a,p){var s=(this._eventRegistry||{})[a];if(s){s=s.slice();for(var o=0;o<s.length;o++)s[o](p,this)}},h.once=function(a,p){var s=this;if(this.on(a,function o(){s.off(a,o),p.apply(null,arguments)}),!p)return new Promise(function(o){p=o})},h.setDefaultHandler=function(a,p){var s=this._defaultHandlers;if(s||(s=this._defaultHandlers={_disabled_:{}}),s[a]){var o=s[a],i=s._disabled_[a];i||(s._disabled_[a]=i=[]),i.push(o);var c=i.indexOf(p);c!=-1&&i.splice(c,1)}s[a]=p},h.removeDefaultHandler=function(a,p){var s=this._defaultHandlers;if(s){var o=s._disabled_[a];if(s[a]==p)o&&this.setDefaultHandler(a,o.pop());else if(o){var i=o.indexOf(p);i!=-1&&o.splice(i,1)}}},h.on=h.addEventListener=function(a,p,s){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[a];return o||(o=this._eventRegistry[a]=[]),o.indexOf(p)==-1&&o[s?"unshift":"push"](p),p},h.off=h.removeListener=h.removeEventListener=function(a,p){this._eventRegistry=this._eventRegistry||{};var s=this._eventRegistry[a];if(s){var o=s.indexOf(p);o!==-1&&s.splice(o,1)}},h.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=h});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(v,u){var a=new Error(v);a.data=u,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var h=e("./oop"),v=e("./event_emitter").EventEmitter,u=e("./report_error").reportError,a={setOptions:function(i){Object.keys(i).forEach(function(c){this.setOption(c,i[c])},this)},getOptions:function(i){var c={};if(i)Array.isArray(i)||(c=i,i=Object.keys(c));else{var f=this.$options;i=Object.keys(f).filter(function(l){return!f[l].hidden})}return i.forEach(function(l){c[l]=this.getOption(l)},this),c},setOption:function(i,c){if(this["$"+i]!==c){var f=this.$options[i];if(!f)return p('misspelled option "'+i+'"');if(f.forwardTo)return this[f.forwardTo]&&this[f.forwardTo].setOption(i,c);f.handlesSet||(this["$"+i]=c),f&&f.set&&f.set.call(this,c)}},getOption:function(i){var c=this.$options[i];return c?c.forwardTo?this[c.forwardTo]&&this[c.forwardTo].getOption(i):c&&c.get?c.get.call(this):this["$"+i]:p('misspelled option "'+i+'"')}};function p(i){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var s,o=function(){function i(){this.$defaultOptions={}}return i.prototype.defineOptions=function(c,f,l){return c.$options||(this.$defaultOptions[f]=c.$options={}),Object.keys(l).forEach(function(r){var d=l[r];typeof d=="string"&&(d={forwardTo:d}),d.name||(d.name=r),c.$options[d.name]=d,"initialValue"in d&&(c["$"+d.name]=d.initialValue)}),h.implement(c,a),this},i.prototype.resetOptions=function(c){Object.keys(c.$options).forEach(function(f){var l=c.$options[f];"value"in l&&c.setOption(f,l.value)})},i.prototype.setDefaultValue=function(c,f,l){if(!c){for(c in this.$defaultOptions)if(this.$defaultOptions[c][f])break;if(!this.$defaultOptions[c][f])return!1}var r=this.$defaultOptions[c]||(this.$defaultOptions[c]={});r[f]&&(r.forwardTo?this.setDefaultValue(r.forwardTo,f,l):r[f].value=l)},i.prototype.setDefaultValues=function(c,f){Object.keys(f).forEach(function(l){this.setDefaultValue(c,l,f[l])},this)},i.prototype.setMessages=function(c){s=c},i.prototype.nls=function(c,f){s&&!s[c]&&p("No message found for '"+c+"' in the provided messages, falling back to default English message.");var l=s&&s[c]||c;return f&&(l=l.replace(/\$(\$|[\d]+)/g,function(r,d){return d=="$"?"$":f[d]})),l},i}();o.prototype.warn=p,o.prototype.reportError=u,h.implement(o.prototype,v),t.AppConfig=o});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var h=e("../lib/dom");h.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var h=e("./lib/lang"),v=e("./lib/net"),u=e("./lib/dom"),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var p={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(c){if(!p.hasOwnProperty(c))throw new Error("Unknown config key: "+c);return p[c]},t.set=function(c,f){if(p.hasOwnProperty(c))p[c]=f;else if(this.setDefaultValue("",c,f)==!1)throw new Error("Unknown config key: "+c);c=="useStrictCSP"&&u.useStrictCSP(f)},t.all=function(){return h.copyObject(p)},t.$modes={},t.moduleUrl=function(c,f){if(p.$moduleUrls[c])return p.$moduleUrls[c];var l=c.split("/");f=f||l[l.length-2]||"";var r=f=="snippets"?"/":"-",d=l[l.length-1];if(f=="worker"&&r=="-"){var _=new RegExp("^"+f+"[\\-_]|[\\-_]"+f+"$","g");d=d.replace(_,"")}(!d||d==f)&&l.length>1&&(d=l[l.length-2]);var m=p[f+"Path"];return m==null?m=p.basePath:r=="/"&&(f=r=""),m&&m.slice(-1)!="/"&&(m+="/"),m+f+r+d+this.get("suffix")},t.setModuleUrl=function(c,f){return p.$moduleUrls[c]=f};var s=function(c,f){if(c==="ace/theme/textmate"||c==="./theme/textmate")return f(null,e("./theme/textmate"));if(o)return o(c,f);console.error("loader is not configured")},o;t.setLoader=function(c){o=c},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(c,f){var l;if(Array.isArray(c))var r=c[0],d=c[1];else if(typeof c=="string")var d=c;var _=function(m){if(m&&!t.$loading[d])return f&&f(m);if(t.$loading[d]||(t.$loading[d]=[]),t.$loading[d].push(f),!(t.$loading[d].length>1)){var y=function(){s(d,function(b,S){S&&(t.$loaded[d]=S),t._emit("load.module",{name:d,module:S});var D=t.$loading[d];t.$loading[d]=null,D.forEach(function(g){g&&g(S)})})};if(!t.get("packaged"))return y();v.loadScript(t.moduleUrl(d,r),y),i()}};if(t.dynamicModules[d])t.dynamicModules[d]().then(function(m){m.default?_(m.default):_(m)});else{try{l=this.$require(d)}catch{}_(l||t.$loaded[d])}},t.$require=function(c){if(typeof n.require=="function"){var f="require";return n[f](c)}},t.setModuleLoader=function(c,f){t.dynamicModules[c]=f};var i=function(){!p.basePath&&!p.workerPath&&!p.modePath&&!p.themePath&&!Object.keys(p.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),i=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var h=e("./config");h.setLoader(function(p,s){e([p],function(o){s(null,o)})});var v=function(){return this||typeof window<"u"&&window}();n.exports=function(p){h.init=u,h.$require=e,p.require=e,typeof define=="function"&&(p.define=define)},u(!0);function u(p){if(!(!v||!v.document)){h.set("packaged",p||e.packaged||n.packaged||v.define&&define.packaged);var s={},o="",i=document.currentScript||document._currentScript,c=i&&i.ownerDocument||document;i&&i.src&&(o=i.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var f=c.getElementsByTagName("script"),l=0;l<f.length;l++){var r=f[l],d=r.src||r.getAttribute("src");if(d){for(var _=r.attributes,m=0,y=_.length;m<y;m++){var b=_[m];b.name.indexOf("data-ace-")===0&&(s[a(b.name.replace(/^data-ace-/,""))]=b.value)}var S=d.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);S&&(o=S[1])}}o&&(s.base=s.base||o,s.packaged=!0),s.basePath=s.base,s.workerPath=s.workerPath||s.base,s.modePath=s.modePath||s.base,s.themePath=s.themePath||s.base,delete s.base;for(var D in s)typeof s[D]<"u"&&h.set(D,s[D])}}function a(p){return p.replace(/-(.)/g,function(s,o){return o.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var h=function(){function v(u,a,p,s){this.start={row:u,column:a},this.end={row:p,column:s}}return v.prototype.isEqual=function(u){return this.start.row===u.start.row&&this.end.row===u.end.row&&this.start.column===u.start.column&&this.end.column===u.end.column},v.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},v.prototype.contains=function(u,a){return this.compare(u,a)==0},v.prototype.compareRange=function(u){var a,p=u.end,s=u.start;return a=this.compare(p.row,p.column),a==1?(a=this.compare(s.row,s.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(s.row,s.column),a==-1?-1:a==1?42:0)},v.prototype.comparePoint=function(u){return this.compare(u.row,u.column)},v.prototype.containsRange=function(u){return this.comparePoint(u.start)==0&&this.comparePoint(u.end)==0},v.prototype.intersects=function(u){var a=this.compareRange(u);return a==-1||a==0||a==1},v.prototype.isEnd=function(u,a){return this.end.row==u&&this.end.column==a},v.prototype.isStart=function(u,a){return this.start.row==u&&this.start.column==a},v.prototype.setStart=function(u,a){typeof u=="object"?(this.start.column=u.column,this.start.row=u.row):(this.start.row=u,this.start.column=a)},v.prototype.setEnd=function(u,a){typeof u=="object"?(this.end.column=u.column,this.end.row=u.row):(this.end.row=u,this.end.column=a)},v.prototype.inside=function(u,a){return this.compare(u,a)==0?!(this.isEnd(u,a)||this.isStart(u,a)):!1},v.prototype.insideStart=function(u,a){return this.compare(u,a)==0?!this.isEnd(u,a):!1},v.prototype.insideEnd=function(u,a){return this.compare(u,a)==0?!this.isStart(u,a):!1},v.prototype.compare=function(u,a){return!this.isMultiLine()&&u===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:u<this.start.row?-1:u>this.end.row?1:this.start.row===u?a>=this.start.column?0:-1:this.end.row===u?a<=this.end.column?0:1:0},v.prototype.compareStart=function(u,a){return this.start.row==u&&this.start.column==a?-1:this.compare(u,a)},v.prototype.compareEnd=function(u,a){return this.end.row==u&&this.end.column==a?1:this.compare(u,a)},v.prototype.compareInside=function(u,a){return this.end.row==u&&this.end.column==a?1:this.start.row==u&&this.start.column==a?-1:this.compare(u,a)},v.prototype.clipRows=function(u,a){if(this.end.row>a)var p={row:a+1,column:0};else if(this.end.row<u)var p={row:u,column:0};if(this.start.row>a)var s={row:a+1,column:0};else if(this.start.row<u)var s={row:u,column:0};return v.fromPoints(s||this.start,p||this.end)},v.prototype.extend=function(u,a){var p=this.compare(u,a);if(p==0)return this;if(p==-1)var s={row:u,column:a};else var o={row:u,column:a};return v.fromPoints(s||this.start,o||this.end)},v.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},v.prototype.isMultiLine=function(){return this.start.row!==this.end.row},v.prototype.clone=function(){return v.fromPoints(this.start,this.end)},v.prototype.collapseRows=function(){return this.end.column==0?new v(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new v(this.start.row,0,this.end.row,0)},v.prototype.toScreenRange=function(u){var a=u.documentToScreenPosition(this.start),p=u.documentToScreenPosition(this.end);return new v(a.row,a.column,p.row,p.column)},v.prototype.moveBy=function(u,a){this.start.row+=u,this.start.column+=a,this.end.row+=u,this.end.column+=a},v}();h.fromPoints=function(v,u){return new h(v.row,v.column,u.row,u.column)},h.comparePoints=function(v,u){return v.row-u.row||v.column-u.column},t.Range=h});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var h=e("./oop"),v=function(){var u={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};u.PRINTABLE_KEYS[173]="-";var a,p;for(p in u.FUNCTION_KEYS)a=u.FUNCTION_KEYS[p].toLowerCase(),u[a]=parseInt(p,10);for(p in u.PRINTABLE_KEYS)a=u.PRINTABLE_KEYS[p].toLowerCase(),u[a]=parseInt(p,10);return h.mixin(u,u.MODIFIER_KEYS),h.mixin(u,u.PRINTABLE_KEYS),h.mixin(u,u.FUNCTION_KEYS),u.enter=u.return,u.escape=u.esc,u.del=u.delete,function(){for(var s=["cmd","ctrl","alt","shift"],o=Math.pow(2,s.length);o--;)u.KEY_MODS[o]=s.filter(function(i){return o&u.KEY_MODS[i]}).join("-")+"-"}(),u.KEY_MODS[0]="",u.KEY_MODS[-1]="input-",u}();h.mixin(t,v),t.default=t,t.keyCodeToString=function(u){var a=v[u];return typeof a!="string"&&(a=String.fromCharCode(u)),a.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./keys"),v=e("./useragent"),u=null,a=0,p;function s(){p=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return p={passive:!1},!0}})}catch{}}function o(){return p==null&&s(),p}function i(m,y,b){this.elem=m,this.type=y,this.callback=b}i.prototype.destroy=function(){f(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var c=t.addListener=function(m,y,b,S){m.addEventListener(y,b,o()),S&&S.$toDestroy.push(new i(m,y,b))},f=t.removeListener=function(m,y,b){m.removeEventListener(y,b,o())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||v.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,b){var S=m&&m.ownerDocument||document;function D(g){y&&y(g),b&&b(g),f(S,"mousemove",y),f(S,"mouseup",D),f(S,"dragstart",D)}return c(S,"mousemove",y),c(S,"mouseup",D),c(S,"dragstart",D),D},t.addMouseWheelListener=function(m,y,b){c(m,"wheel",function(S){var D=.15,g=S.deltaX||0,C=S.deltaY||0;switch(S.deltaMode){case S.DOM_DELTA_PIXEL:S.wheelX=g*D,S.wheelY=C*D;break;case S.DOM_DELTA_LINE:var F=15;S.wheelX=g*F,S.wheelY=C*F;break;case S.DOM_DELTA_PAGE:var E=150;S.wheelX=g*E,S.wheelY=C*E;break}y(S)},b)},t.addMultiMouseDownListener=function(m,y,b,S,D){var g=0,C,F,E,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,v.isIE){var L=Math.abs(w.clientX-C)>5||Math.abs(w.clientY-F)>5;(!E||L)&&(g=1),E&&clearTimeout(E),E=setTimeout(function(){E=null},y[g-1]||600),g==1&&(C=w.clientX,F=w.clientY)}if(w._clicks=g,b[S]("mousedown",w),g>4)g=0;else if(g>1)return b[S](T[g],w)}Array.isArray(m)||(m=[m]),m.forEach(function(w){c(w,"mousedown",M,D)})};var l=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return h.KEY_MODS[l(m)]};function r(m,y,b){var S=l(y);if(!v.isMac&&u){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(S|=8),u.altGr)if((3&S)!=3)u.altGr=0;else return;if(b===18||b===17){var D="location"in y?y.location:y.keyLocation;if(b===17&&D===1)u[b]==1&&(a=y.timeStamp);else if(b===18&&S===3&&D===2){var g=y.timeStamp-a;g<50&&(u.altGr=!0)}}}if(b in h.MODIFIER_KEYS&&(b=-1),!S&&b===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,S,-b),y.defaultPrevented))return}if(v.isChromeOS&&S&8){if(m(y,S,b),y.defaultPrevented)return;S&=-9}return!S&&!(b in h.FUNCTION_KEYS)&&!(b in h.PRINTABLE_KEYS)?!1:m(y,S,b)}t.addCommandKeyListener=function(m,y,b){var S=null;c(m,"keydown",function(D){u[D.keyCode]=(u[D.keyCode]||0)+1;var g=r(y,D,D.keyCode);return S=D.defaultPrevented,g},b),c(m,"keypress",function(D){S&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),S=null)},b),c(m,"keyup",function(D){u[D.keyCode]=null},b),u||(d(),c(window,"focus",d))};function d(){u=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!v.isOldIE){var _=1;t.nextTick=function(m,y){y=y||window;var b="zero-timeout-message-"+_++,S=function(D){D.data==b&&(t.stopPropagation(D),f(y,"message",S),m())};c(y,"message",S),y.postMessage(b,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function b(){t.$idleBlocked?setTimeout(b,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var h;n.exports={lineMode:!1,pasteCancelled:function(){return h&&h>Date.now()-50?!0:h=!1},cancel:function(){h=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../config").nls,u=e("../lib/useragent"),a=e("../lib/dom"),p=e("../lib/lang"),s=e("../clipboard"),o=u.isChrome<18,i=u.isIE,c=u.isChrome>63,f=400,l=e("../lib/keys"),r=l.KEY_MODS,d=u.isIOS,_=d?/\s/:/\n/,m=u.isMobile,y;y=function(b,S){var D=a.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",b.insertBefore(D,b.firstChild);var g=!1,C=!1,F=!1,E=!1,T="";m||(D.style.fontSize="1px");var M=!1,w=!1,L="",A=0,R=0,x=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,k=0;try{var H=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){k=0;return}k=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",v("editor")),S.session)){var re=S.session.selection.cursor.row;D.setAttribute("aria-label",v("Cursor at row $0",[re+1]))}},this.setAriaOptions({role:"textbox"}),h.addListener(D,"blur",function(j){w||(S.onBlur(j),H=!1)},S),h.addListener(D,"focus",function(j){if(!w){if(H=!0,u.isEdge)try{if(!document.hasFocus())return}catch{}S.onFocus(j),u.isEdge?setTimeout(q):q()}},S),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:S.renderer.enableKeyboardAccessibility}),T||c||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var re=D.getBoundingClientRect().top!=0}catch{return}var fe=[];if(re)for(var Pe=D.parentElement;Pe&&Pe.nodeType==1;)fe.push(Pe),Pe.setAttribute("ace_nocontext","true"),!Pe.parentElement&&Pe.getRootNode?Pe=Pe.getRootNode().host:Pe=Pe.parentElement;D.focus({preventScroll:!0}),re&&fe.forEach(function(tt){tt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return H},S.on("beforeEndOperation",function(){var j=S.curOp,re=j&&j.command&&j.command.name;if(re!="insertstring"){var fe=re&&(j.docChanged||j.selectionChanged);F&&fe&&(L=D.value="",yt()),q()}});var U=function(j,re){for(var fe=re,Pe=1;Pe<=j-I&&Pe<2*k+1;Pe++)fe+=S.session.getLine(j-Pe).length+1;return fe},q=d?function(j){if(!(!H||g&&!j||E)){j||(j="");var re=`
 ab`+j+`cde fg
`;re!=D.value&&(D.value=L=re);var fe=4,Pe=4+(j.length||(S.selection.isEmpty()?0:1));(A!=fe||R!=Pe)&&D.setSelectionRange(fe,Pe),A=fe,R=Pe}}:function(){if(!(F||E)&&!(!H&&!B)){F=!0;var j=0,re=0,fe="";if(S.session){var Pe=S.selection,tt=Pe.getRange(),st=Pe.cursor.row;st===$+1?(I=$+1,$=I+2*k):st===I-1?($=I-1,I=$-2*k):(st<I-1||st>$+1)&&(I=st>k?st-k:0,$=st>k?st+k:2*k);for(var Ue=[],Dt=I;Dt<=$;Dt++)Ue.push(S.session.getLine(Dt));if(fe=Ue.join(`
`),j=U(tt.start.row,tt.start.column),re=U(tt.end.row,tt.end.column),tt.start.row<I){var Bt=S.session.getLine(I-1);j=tt.start.row<I-1?0:j,re+=Bt.length+1,fe=Bt+`
`+fe}else if(tt.end.row>$){var Ct=S.session.getLine($+1);re=tt.end.row>$+1?Ct.length:tt.end.column,re+=fe.length+1,fe=fe+`
`+Ct}else m&&st>0&&(fe=`
`+fe,re+=1,j+=1);fe.length>f&&(j<f&&re<f?fe=fe.slice(0,f):(fe=`
`,j==re?j=re=0:(j=0,re=1)));var Sn=fe+`

`;Sn!=L&&(D.value=L=Sn,A=R=Sn.length)}if(B&&(A=D.selectionStart,R=D.selectionEnd),R!=re||A!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,re),A=j,R=re}catch{}F=!1}};this.resetSelection=q,H&&S.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=L.length&&j.value===L&&L&&j.selectionEnd!==R},K=function(j){F||(g?g=!1:N(D)?(S.selectAll(),q()):m&&D.selectionStart!=A&&q())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,W=function(j,re){if(B&&(B=!1),C)return q(),j&&S.onPaste(j),C=!1,"";for(var fe=D.selectionStart,Pe=D.selectionEnd,tt=A,st=L.length-R,Ue=j,Dt=j.length-fe,Bt=j.length-Pe,Ct=0;tt>0&&L[Ct]==j[Ct];)Ct++,tt--;for(Ue=Ue.slice(Ct),Ct=1;st>0&&L.length-Ct>A-1&&L[L.length-Ct]==j[j.length-Ct];)Ct++,st--;Dt-=Ct-1,Bt-=Ct-1;var Sn=Ue.length-Ct+1;if(Sn<0&&(tt=-Sn,Sn=0),Ue=Ue.slice(0,Sn),!re&&!Ue&&!Dt&&!tt&&!st&&!Bt)return"";E=!0;var Ja=!1;return u.isAndroid&&Ue==". "&&(Ue="  ",Ja=!0),Ue&&!tt&&!st&&!Dt&&!Bt||M?S.onTextInput(Ue):S.onTextInput(Ue,{extendLeft:tt,extendRight:st,restoreStart:Dt,restoreEnd:Bt}),E=!1,L=j,A=fe,R=Pe,x=Bt,Ja?`
`:Ue},P=function(j){if(F)return Ce();if(j&&j.inputType){if(j.inputType=="historyUndo")return S.execCommand("undo");if(j.inputType=="historyRedo")return S.execCommand("redo")}var re=D.value,fe=W(re,!0);(re.length>f+100||_.test(fe)||m&&A<1&&A==R)&&q()},Q=function(j,re,fe){var Pe=j.clipboardData||window.clipboardData;if(!(!Pe||o)){var tt=i||fe?"Text":"text/plain";try{return re?Pe.setData(tt,re)!==!1:Pe.getData(tt)}catch(st){if(!fe)return Q(st,re,!0)}}},G=function(j,re){var fe=S.getCopyText();if(!fe)return h.preventDefault(j);Q(j,fe)?(d&&(q(fe),g=fe,setTimeout(function(){g=!1},10)),re?S.onCut():S.onCopy(),h.preventDefault(j)):(g=!0,D.value=fe,D.select(),setTimeout(function(){g=!1,q(),re?S.onCut():S.onCopy()}))},ve=function(j){G(j,!0)},Ee=function(j){G(j,!1)},ye=function(j){var re=Q(j);s.pasteCancelled()||(typeof re=="string"?(re&&S.onPaste(re,j),u.isIE&&setTimeout(q),h.preventDefault(j)):(D.value="",C=!0))};h.addCommandKeyListener(D,S.onCommandKey.bind(S),S),h.addListener(D,"select",K,S),h.addListener(D,"input",P,S),h.addListener(D,"cut",ve,S),h.addListener(D,"copy",Ee,S),h.addListener(D,"paste",ye,S),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&h.addListener(b,"keydown",function(j){if(!(u.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ee(j);break;case 86:ye(j);break;case 88:ve(j);break}},S);var ue=function(j){if(!(F||!S.onCompositionStart||S.$readOnly)&&(F={},!M)){j.data&&(F.useTextareaForIME=!1),setTimeout(Ce,0),S._signal("compositionStart"),S.on("mousedown",qt);var re=S.getSelectionRange();re.end.row=re.start.row,re.end.column=re.start.column,F.markerRange=re,F.selectionStart=A,S.onCompositionStart(F),F.useTextareaForIME?(L=D.value="",A=0,R=0):(D.msGetInputContext&&(F.context=D.msGetInputContext()),D.getInputContext&&(F.context=D.getInputContext()))}},Ce=function(){if(!(!F||!S.onCompositionUpdate||S.$readOnly)){if(M)return qt();if(F.useTextareaForIME)S.onCompositionUpdate(D.value);else{var j=D.value;W(j),F.markerRange&&(F.context&&(F.markerRange.start.column=F.selectionStart=F.context.compositionStartOffset),F.markerRange.end.column=F.markerRange.start.column+R-F.selectionStart+x)}}},yt=function(j){!S.onCompositionEnd||S.$readOnly||(F=!1,S.onCompositionEnd(),S.off("mousedown",qt),j&&P())};function qt(){w=!0,D.blur(),D.focus(),w=!1}var Ot=p.delayedCall(Ce,50).schedule.bind(null,null);function Xe(j){j.keyCode==27&&D.value.length<D.selectionStart&&(F||(L=D.value),A=R=-1,q()),Ot()}h.addListener(D,"compositionstart",ue,S),h.addListener(D,"compositionupdate",Ce,S),h.addListener(D,"keyup",Xe,S),h.addListener(D,"keydown",Ot,S),h.addListener(D,"compositionend",yt,S),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,q(),S._emit("nativecontextmenu",{target:S,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,re){T||(T=D.style.cssText),D.style.cssText=(re?"z-index:100000;":"")+(u.isIE?"opacity:0.1;":"")+"text-indent: -"+(A+R)*S.renderer.characterWidth*.5+"px;";var fe=S.container.getBoundingClientRect(),Pe=a.computedStyle(S.container),tt=fe.top+(parseInt(Pe.borderTopWidth)||0),st=fe.left+(parseInt(fe.borderLeftWidth)||0),Ue=fe.bottom-tt-D.clientHeight-2,Dt=function(Bt){a.translate(D,Bt.clientX-st-2,Math.min(Bt.clientY-tt-2,Ue))};Dt(j),j.type=="mousedown"&&(S.renderer.$isMousePressed=!0,clearTimeout(se),u.isWin&&h.capture(S.container,Dt,he))},this.onContextMenuClose=he;var se;function he(){clearTimeout(se),se=setTimeout(function(){T&&(D.style.cssText=T,T=""),S.renderer.$isMousePressed=!1,S.renderer.$keepTextAreaAtCursor&&S.renderer.$moveTextAreaToCursor()},0)}var ce=function(j){S.textInput.onContextMenu(j),he()};h.addListener(D,"mouseup",ce,S),h.addListener(D,"mousedown",function(j){j.preventDefault(),he()},S),h.addListener(S.renderer.scroller,"contextmenu",ce,S),h.addListener(D,"contextmenu",ce,S),d&&ne(b,S,D);function ne(j,re,fe){var Pe=null,tt=!1;fe.addEventListener("keydown",function(Ue){Pe&&clearTimeout(Pe),tt=!0},!0),fe.addEventListener("keyup",function(Ue){Pe=setTimeout(function(){tt=!1},100)},!0);var st=function(Ue){if(document.activeElement===fe&&!(tt||F||re.$mouseHandler.isMousePressed)&&!g){var Dt=fe.selectionStart,Bt=fe.selectionEnd,Ct=null,Sn=0;if(Dt==0?Ct=l.up:Dt==1?Ct=l.home:Bt>R&&L[Bt]==`
`?Ct=l.end:Dt<A&&L[Dt-1]==" "?(Ct=l.left,Sn=r.option):Dt<A||Dt==A&&R!=A&&Dt==Bt?Ct=l.left:Bt>R&&L.slice(0,Bt).split(`
`).length>2?Ct=l.down:Bt>R&&L[Bt-1]==" "?(Ct=l.right,Sn=r.option):(Bt>R||Bt==R&&R!=A&&Dt==Bt)&&(Ct=l.right),Dt!==Bt&&(Sn|=r.shift),Ct){var Ja=re.onCommandKey({},Sn,Ct);if(!Ja&&re.commands){Ct=l.keyCodeToString(Ct);var mb=re.commands.findKeyCommand(Sn,Ct);mb&&re.execCommand(mb)}A=Dt,R=Bt,q("")}}};document.addEventListener("selectionchange",st),re.on("destroy",function(){document.removeEventListener("selectionchange",st)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(b,S){m=b,d=S}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/useragent"),v=0,u=550,a=function(){function o(i){i.$clickSelection=null;var c=i.editor;c.setDefaultHandler("mousedown",this.onMouseDown.bind(i)),c.setDefaultHandler("dblclick",this.onDoubleClick.bind(i)),c.setDefaultHandler("tripleclick",this.onTripleClick.bind(i)),c.setDefaultHandler("quadclick",this.onQuadClick.bind(i)),c.setDefaultHandler("mousewheel",this.onMouseWheel.bind(i));var f=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];f.forEach(function(l){i[l]=this[l]},this),i.selectByLines=this.extendSelectionBy.bind(i,"getLineRange"),i.selectByWords=this.extendSelectionBy.bind(i,"getWordRange")}return o.prototype.onMouseDown=function(i){var c=i.inSelection(),f=i.getDocumentPosition();this.mousedownEvent=i;var l=this.editor,r=i.getButton();if(r!==0){var d=l.getSelectionRange(),_=d.isEmpty();(_||r==1)&&l.selection.moveToPosition(f),r==2&&(l.textInput.onContextMenu(i.domEvent),h.isMozilla||i.preventDefault());return}if(this.mousedownEvent.time=Date.now(),c&&!l.isFocused()&&(l.focus(),this.$focusTimeout&&!this.$clickSelection&&!l.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(i);return}return this.captureMouse(i),this.startSelect(f,i.domEvent._clicks>1),i.preventDefault()},o.prototype.startSelect=function(i,c){i=i||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var f=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?f.selection.selectToPosition(i):c||f.selection.moveToPosition(i),c||this.select(),f.setStyle("ace_selecting"),this.setState("select"))},o.prototype.select=function(){var i,c=this.editor,f=c.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var l=this.$clickSelection.comparePoint(f);if(l==-1)i=this.$clickSelection.end;else if(l==1)i=this.$clickSelection.start;else{var r=s(this.$clickSelection,f);f=r.cursor,i=r.anchor}c.selection.setSelectionAnchor(i.row,i.column)}c.selection.selectToPosition(f),c.renderer.scrollCursorIntoView()},o.prototype.extendSelectionBy=function(i){var c,f=this.editor,l=f.renderer.screenToTextCoordinates(this.x,this.y),r=f.selection[i](l.row,l.column);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(r.start),_=this.$clickSelection.comparePoint(r.end);if(d==-1&&_<=0)c=this.$clickSelection.end,(r.end.row!=l.row||r.end.column!=l.column)&&(l=r.start);else if(_==1&&d>=0)c=this.$clickSelection.start,(r.start.row!=l.row||r.start.column!=l.column)&&(l=r.end);else if(d==-1&&_==1)l=r.end,c=r.start;else{var m=s(this.$clickSelection,l);l=m.cursor,c=m.anchor}f.selection.setSelectionAnchor(c.row,c.column)}f.selection.selectToPosition(l),f.renderer.scrollCursorIntoView()},o.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},o.prototype.focusWait=function(){var i=p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),c=Date.now();(i>v||c-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},o.prototype.onDoubleClick=function(i){var c=i.getDocumentPosition(),f=this.editor,l=f.session,r=l.getBracketRange(c);r?(r.isEmpty()&&(r.start.column--,r.end.column++),this.setState("select")):(r=f.selection.getWordRange(c.row,c.column),this.setState("selectByWords")),this.$clickSelection=r,this.select()},o.prototype.onTripleClick=function(i){var c=i.getDocumentPosition(),f=this.editor;this.setState("selectByLines");var l=f.getSelectionRange();l.isMultiLine()&&l.contains(c.row,c.column)?(this.$clickSelection=f.selection.getLineRange(l.start.row),this.$clickSelection.end=f.selection.getLineRange(l.end.row).end):this.$clickSelection=f.selection.getLineRange(c.row),this.select()},o.prototype.onQuadClick=function(i){var c=this.editor;c.selectAll(),this.$clickSelection=c.getSelectionRange(),this.setState("selectAll")},o.prototype.onMouseWheel=function(i){if(!i.getAccelKey()){i.getShiftKey()&&i.wheelY&&!i.wheelX&&(i.wheelX=i.wheelY,i.wheelY=0);var c=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var f=this.$lastScroll,l=i.domEvent.timeStamp,r=l-f.t,d=r?i.wheelX/r:f.vx,_=r?i.wheelY/r:f.vy;r<u&&(d=(d+f.vx)/2,_=(_+f.vy)/2);var m=Math.abs(d/_),y=!1;if(m>=1&&c.renderer.isScrollableBy(i.wheelX*i.speed,0)&&(y=!0),m<=1&&c.renderer.isScrollableBy(0,i.wheelY*i.speed)&&(y=!0),y)f.allowed=l;else if(l-f.allowed<u){var b=Math.abs(d)<=1.5*Math.abs(f.vx)&&Math.abs(_)<=1.5*Math.abs(f.vy);b?(y=!0,f.allowed=l):f.allowed=0}if(f.t=l,f.vx=d,f.vy=_,y)return c.renderer.scrollBy(i.wheelX*i.speed,i.wheelY*i.speed),i.stop()}},o}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function p(o,i,c,f){return Math.sqrt(Math.pow(c-o,2)+Math.pow(f-i,2))}function s(o,i){if(o.start.row==o.end.row)var c=2*i.column-o.start.column-o.end.column;else if(o.start.row==o.end.row-1&&!o.start.column&&!o.end.column)var c=i.column-4;else var c=2*i.row-o.start.row-o.end.row;return c<0?{cursor:o.start,anchor:o.end}:{cursor:o.end,anchor:o.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(v){v.stopPropagation();var u=v.currentTarget,a=u.scrollHeight>u.clientHeight;a||v.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var r=function(d,_){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])},r(d,_)};return function(d,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");r(d,_);function m(){this.constructor=d}d.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),v=this&&this.__values||function(r){var d=typeof Symbol=="function"&&Symbol.iterator,_=d&&r[d],m=0;if(_)return _.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&m>=r.length&&(r=void 0),{value:r&&r[m++],done:!r}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},u=e("./lib/dom"),a=e("./lib/event"),p=e("./range").Range,s=e("./lib/scroll").preventParentScroll,o="ace_tooltip",i=function(){function r(d){this.isOpen=!1,this.$element=null,this.$parentNode=d}return r.prototype.$init=function(){return this.$element=u.createElement("div"),this.$element.className=o,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},r.prototype.getElement=function(){return this.$element||this.$init()},r.prototype.setText=function(d){this.getElement().textContent=d},r.prototype.setHtml=function(d){this.getElement().innerHTML=d},r.prototype.setPosition=function(d,_){this.getElement().style.left=d+"px",this.getElement().style.top=_+"px"},r.prototype.setClassName=function(d){u.addCssClass(this.getElement(),d)},r.prototype.setTheme=function(d){this.$element.className=o+" "+(d.isDark?"ace_dark ":"")+(d.cssClass||"")},r.prototype.show=function(d,_,m){d!=null&&this.setText(d),_!=null&&m!=null&&this.setPosition(_,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},r.prototype.hide=function(d){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=o,this.isOpen=!1)},r.prototype.getHeight=function(){return this.getElement().offsetHeight},r.prototype.getWidth=function(){return this.getElement().offsetWidth},r.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},r}(),c=function(){function r(){this.popups=[]}return r.prototype.addPopup=function(d){this.popups.push(d),this.updatePopups()},r.prototype.removePopup=function(d){var _=this.popups.indexOf(d);_!==-1&&(this.popups.splice(_,1),this.updatePopups())},r.prototype.updatePopups=function(){var d,_,m,y;this.popups.sort(function(M,w){return w.priority-M.priority});var b=[];try{for(var S=v(this.popups),D=S.next();!D.done;D=S.next()){var g=D.value,C=!0;try{for(var F=(m=void 0,v(b)),E=F.next();!E.done;E=F.next()){var T=E.value;if(this.doPopupsOverlap(T,g)){C=!1;break}}}catch(M){m={error:M}}finally{try{E&&!E.done&&(y=F.return)&&y.call(F)}finally{if(m)throw m.error}}C?b.push(g):g.hide()}}catch(M){d={error:M}}finally{try{D&&!D.done&&(_=S.return)&&_.call(S)}finally{if(d)throw d.error}}},r.prototype.doPopupsOverlap=function(d,_){var m=d.getElement().getBoundingClientRect(),y=_.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},r}(),f=new c;t.popupManager=f,t.Tooltip=i;var l=function(r){h(d,r);function d(_){_===void 0&&(_=document.body);var m=r.call(this,_)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",s),m}return d.prototype.addToEditor=function(_){_.on("mousemove",this.onMouseMove),_.on("mousedown",this.hide),_.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},d.prototype.removeFromEditor=function(_){_.off("mousemove",this.onMouseMove),_.off("mousedown",this.hide),_.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},d.prototype.onMouseMove=function(_,m){this.lastEvent=_,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var b=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(b.row,b.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=_,this.timeout=setTimeout(this.waitForHover,this.idleTime))},d.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var _=Date.now()-this.lastT;if(this.idleTime-_>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-_);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},d.prototype.isOutsideOfText=function(_){var m=_.editor,y=_.getDocumentPosition(),b=m.session.getLine(y.row);if(y.column==b.length){var S=m.renderer.pixelToScreenCoordinates(_.clientX,_.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=S.column||D.row!=S.row)return!0}return!1},d.prototype.setDataProvider=function(_){this.$gatherData=_},d.prototype.showForRange=function(_,m,y,b){var S=10;if(!(b&&b!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=_.renderer;this.isOpen||(f.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,_.session),this.range=p.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),C=D.scroller.getBoundingClientRect();g.pageX<C.left&&(g.pageX=C.left);var F=this.getElement();F.innerHTML="",F.appendChild(y),F.style.maxHeight="",F.style.display="block";var E=F.clientHeight,T=F.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-E<0&&g.pageY<M&&(w=!1),F.style.maxHeight=(w?g.pageY:M)-S+"px",F.style.top=w?"":g.pageY+D.lineHeight+"px",F.style.bottom=w?window.innerHeight-g.pageY+"px":"",F.style.left=Math.min(g.pageX,window.innerWidth-T-S)+"px"}},d.prototype.addMarker=function(_,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(_,"ace_highlight-marker","text")},d.prototype.hide=function(_){!_&&document.activeElement==this.getElement()||_&&_.target&&(_.type!="keydown"||_.ctrlKey||_.metaKey)&&this.$element.contains(_.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,f.removePopup(this)))},d.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},d.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},d.prototype.onMouseOut=function(_){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!_.relatedTarget||this.getElement().contains(_.relatedTarget)||_&&_.currentTarget.contains(_.relatedTarget)||_.relatedTarget.classList.contains("ace_content")||this.hide())},d}(i);t.HoverTooltip=l});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var c=function(f,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,d){r.__proto__=d}||function(r,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(r[_]=d[_])},c(f,l)};return function(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(f,l);function r(){this.constructor=f}f.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}}(),v=this&&this.__values||function(c){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&c[f],r=0;if(l)return l.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&r>=c.length&&(c=void 0),{value:c&&c[r++],done:!c}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")},u=e("../lib/dom"),a=e("../lib/event"),p=e("../tooltip").Tooltip,s=e("../config").nls;function o(c){var f=c.editor,l=f.renderer.$gutterLayer,r=new i(f);c.editor.setDefaultHandler("guttermousedown",function(S){if(!(!f.isFocused()||S.getButton()!=0)){var D=l.getRegion(S);if(D!="foldWidgets"){var g=S.getDocumentPosition().row,C=f.session.selection;if(S.getShiftKey())C.selectTo(g,0);else{if(S.domEvent.detail==2)return f.selectAll(),S.preventDefault();c.$clickSelection=f.selection.getLineRange(g)}return c.setState("selectByLines"),c.captureMouse(S),S.preventDefault()}}});var d,_;function m(){var S=_.getDocumentPosition().row,D=f.session.getLength();if(S==D){var g=f.renderer.pixelToScreenCoordinates(0,_.y).row,C=_.$pos;if(g>f.session.documentToScreenRow(C.row,C.column))return y()}if(r.showTooltip(S),!!r.isOpen)if(f.on("mousewheel",y),c.$tooltipFollowsMouse)b(_);else{var F=_.getGutterRow(),E=l.$lines.get(F);if(E){var T=E.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=r.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else b(_)}}function y(){d&&(d=clearTimeout(d)),r.isOpen&&(r.hideTooltip(),f.off("mousewheel",y))}function b(S){r.setPosition(S.x,S.y)}c.editor.setDefaultHandler("guttermousemove",function(S){var D=S.domEvent.target||S.domEvent.srcElement;if(u.hasCssClass(D,"ace_fold-widget"))return y();r.isOpen&&c.$tooltipFollowsMouse&&b(S),_=S,!d&&(d=setTimeout(function(){d=null,_&&!c.isMousePressed?m():y()},50))}),a.addListener(f.renderer.$gutter,"mouseout",function(S){_=null,!(!r.isOpen||d)&&(d=setTimeout(function(){d=null,y()},50))},f),f.on("changeSession",y),f.on("input",y)}t.GutterHandler=o;var i=function(c){h(f,c);function f(l){var r=c.call(this,l.container)||this;return r.editor=l,r}return f.prototype.setPosition=function(l,r){var d=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();l+=15,r+=15,l+m>d&&(l-=l+m-d),r+y>_&&(r-=20+y),p.prototype.setPosition.call(this,l,r)},Object.defineProperty(f,"annotationLabels",{get:function(){return{error:{singular:s("error"),plural:s("errors")},warning:{singular:s("warning"),plural:s("warnings")},info:{singular:s("information message"),plural:s("information messages")}}},enumerable:!1,configurable:!0}),f.prototype.showTooltip=function(l){var r=this.editor.renderer.$gutterLayer,d=r.$annotations[l],_;d?_={text:Array.from(d.text),type:Array.from(d.type)}:_={text:[],type:[]};var m=r.session.getFoldLine(l);if(m&&r.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},b,S=l+1;S<=m.end.row;S++)if(r.$annotations[S])for(var D=0;D<r.$annotations[S].text.length;D++){var g=r.$annotations[S].type[D];if(y[g].push(r.$annotations[S].text[D]),g==="error"){b="error_fold";continue}if(g==="warning"){b="warning_fold";continue}}if(b==="error_fold"||b==="warning_fold"){var C="".concat(f.annotationsToSummaryString(y)," in folded code.");_.text.push(C),_.type.push(b)}}if(_.text.length===0)return this.hide();for(var F={error:[],warning:[],info:[]},E=r.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",S=0;S<_.text.length;S++){var T="<span class='ace_".concat(_.type[S]," ").concat(E,"' aria-label='").concat(f.annotationLabels[_.type[S].replace("_fold","")].singular,"' role=img> </span> ").concat(_.text[S]);F[_.type[S].replace("_fold","")].push(T)}var M=[].concat(F.error,F.warning,F.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},f.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},f.annotationsToSummaryString=function(l){var r,d,_=[],m=["error","warning","info"];try{for(var y=v(m),b=y.next();!b.done;b=y.next()){var S=b.value;if(l[S].length){var D=l[S].length===1?f.annotationLabels[S].singular:f.annotationLabels[S].plural;_.push("".concat(l[S].length," ").concat(D))}}}catch(g){r={error:g}}finally{try{b&&!b.done&&(d=y.return)&&d.call(y)}finally{if(r)throw r.error}}return _.join(", ")},f}(p);t.GutterTooltip=i});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../lib/useragent"),u=function(){function a(p,s){this.speed,this.wheelX,this.wheelY,this.domEvent=p,this.editor=s,this.x=this.clientX=p.clientX,this.y=this.clientY=p.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){h.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){h.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var p=this.getDocumentPosition().row,s=this.editor.session.documentToScreenRow(p,0),o=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return s-o},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var p=this.editor,s=p.getSelectionRange();if(s.isEmpty())this.$inSelection=!1;else{var o=this.getDocumentPosition();this.$inSelection=s.contains(o.row,o.column)}return this.$inSelection},a.prototype.getButton=function(){return h.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return v.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=u});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/event"),u=e("../lib/useragent"),a=200,p=200,s=5;function o(c){var f=c.editor,l=h.createElement("div");l.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",l.textContent="\xA0";var r=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];r.forEach(function(U){c[U]=this[U]},this),f.on("mousedown",this.onMouseDown.bind(c));var d=f.container,_,m,y,b,S,D,g=0,C,F,E,T,M;this.onDragStart=function(U){if(this.cancelDrag||!d.draggable){var q=this;return setTimeout(function(){q.startSelect(),q.captureMouse(U)},0),U.preventDefault()}S=f.getSelectionRange();var N=U.dataTransfer;N.effectAllowed=f.getReadOnly()?"copy":"copyMove",f.container.appendChild(l),N.setDragImage&&N.setDragImage(l,0,0),setTimeout(function(){f.container.removeChild(l)}),N.clearData(),N.setData("Text",f.session.getTextRange()),F=!0,this.setState("drag")},this.onDragEnd=function(U){if(d.draggable=!1,F=!1,this.setState(null),!f.getReadOnly()){var q=U.dataTransfer.dropEffect;!C&&q=="move"&&f.session.remove(f.getSelectionRange()),f.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(f.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||R(),g++,U.dataTransfer.dropEffect=C=H(U),v.preventDefault(U)},this.onDragOver=function(U){if(!(f.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||(R(),g++),I!==null&&(I=null),U.dataTransfer.dropEffect=C=H(U),v.preventDefault(U)},this.onDragLeave=function(U){if(g--,g<=0&&_)return x(),C=null,v.preventDefault(U)},this.onDrop=function(U){if(D){var q=U.dataTransfer;if(F)switch(C){case"move":S.contains(D.row,D.column)?S={start:D,end:D}:S=f.moveText(S,D);break;case"copy":S=f.moveText(S,D,!0);break}else{var N=q.getData("Text");S={start:D,end:f.session.insert(D,N)},f.focus(),C=null}return x(),v.preventDefault(U)}},v.addListener(d,"dragstart",this.onDragStart.bind(c),f),v.addListener(d,"dragend",this.onDragEnd.bind(c),f),v.addListener(d,"dragenter",this.onDragEnter.bind(c),f),v.addListener(d,"dragover",this.onDragOver.bind(c),f),v.addListener(d,"dragleave",this.onDragLeave.bind(c),f),v.addListener(d,"drop",this.onDrop.bind(c),f);function w(U,q){var N=Date.now(),K=!q||U.row!=q.row,O=!q||U.column!=q.column;if(!T||K||O)f.moveCursorToPosition(U),T=N,M={x:m,y};else{var B=i(M.x,M.y,m,y);B>s?T=null:N-T>=p&&(f.renderer.scrollCursorIntoView(),T=null)}}function L(U,q){var N=Date.now(),K=f.renderer.layerConfig.lineHeight,O=f.renderer.layerConfig.characterWidth,B=f.renderer.scroller.getBoundingClientRect(),W={x:{left:m-B.left,right:B.right-m},y:{top:y-B.top,bottom:B.bottom-y}},P=Math.min(W.x.left,W.x.right),Q=Math.min(W.y.top,W.y.bottom),G={row:U.row,column:U.column};P/O<=2&&(G.column+=W.x.left<W.x.right?-3:2),Q/K<=1&&(G.row+=W.y.top<W.y.bottom?-1:1);var ve=U.row!=G.row,Ee=U.column!=G.column,ye=!q||U.row!=q.row;ve||Ee&&!ye?E?N-E>=a&&f.renderer.scrollCursorIntoView(G):E=N:E=null}function A(){var U=D;D=f.renderer.screenToTextCoordinates(m,y),w(D,U),L(D,U)}function R(){S=f.selection.toOrientedRange(),_=f.session.addMarker(S,"ace_selection",f.getSelectionStyle()),f.clearSelection(),f.isFocused()&&f.renderer.$cursorLayer.setBlinking(!1),clearInterval(b),A(),b=setInterval(A,20),g=0,v.addListener(document,"mousemove",$)}function x(){clearInterval(b),f.session.removeMarker(_),_=null,f.selection.fromOrientedRange(S),f.isFocused()&&!F&&f.$resetCursorStyle(),S=null,D=null,g=0,E=null,T=null,v.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&_&&x()},20))}function k(U){var q=U.types;return!q||Array.prototype.some.call(q,function(N){return N=="text/plain"||N=="Text"})}function H(U){var q=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],K=u.isMac?U.altKey:U.ctrlKey,O="uninitialized";try{O=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return K&&q.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":q.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var c=Date.now()-this.mousedownEvent.time;c>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var c=this.editor.container;c.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(c){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var c=this.editor,f=c.container;f.draggable=!0,c.renderer.$cursorLayer.setBlinking(!1),c.setStyle("ace_dragging");var l=u.isWin?"default":"move";c.renderer.setCursorStyle(l),this.setState("dragReady")},this.onMouseDrag=function(c){var f=this.editor.container;if(u.isIE&&this.state=="dragReady"){var l=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>3&&f.dragDrop()}if(this.state==="dragWait"){var l=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);l>0&&(f.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(c){if(this.$dragEnabled){this.mousedownEvent=c;var f=this.editor,l=c.inSelection(),r=c.getButton(),d=c.domEvent.detail||1;if(d===1&&r===0&&l){if(c.editor.inMultiSelectMode&&(c.getAccelKey()||c.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=c.domEvent.target||c.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),f.getDragDelay()){if(u.isWebKit){this.cancelDrag=!0;var m=f.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(c,this.onMouseDrag.bind(this)),c.defaultPrevented=!0}}}}).call(o.prototype);function i(c,f,l,r){return Math.sqrt(Math.pow(l-c,2)+Math.pow(r-f,2))}t.DragdropHandler=o});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./mouse_event").MouseEvent,v=e("../lib/event"),u=e("../lib/dom");t.addTouchListeners=function(a,p){var s="scroll",o,i,c,f,l,r,d=0,_,m=0,y=0,b=0,S,D;function g(){var w=window.navigator&&window.navigator.clipboard,L=!1,A=function(){var x=p.getCopyText(),I=p.session.getUndoManager().hasUndo();D.replaceChild(u.buildDom(L?["span",!x&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],x&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],x&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(x){var I=x.target.getAttribute("action");if(I=="more"||!L)return L=!L,A();I=="paste"?w.readText().then(function($){p.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(I)),D.firstChild.style.display="none",L=!1,I!="openCommandPalette"&&p.focus()};D=u.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(x){s="menu",x.stopPropagation(),x.preventDefault(),p.textInput.focus()},ontouchend:function(x){x.stopPropagation(),x.preventDefault(),R(x)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}function C(){D||g();var w=p.selection.cursor,L=p.renderer.textToScreenCoordinates(w.row,w.column),A=p.renderer.textToScreenCoordinates(0,0).pageX,R=p.renderer.scrollLeft,x=p.container.getBoundingClientRect();D.style.top=L.pageY-x.top-3+"px",L.pageX-x.left<x.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=A+R-x.left+"px"),D.style.display="",D.firstChild.style.display="none",p.on("input",F)}function F(w){D&&(D.style.display="none"),p.off("input",F)}function E(){l=null,clearTimeout(l);var w=p.selection.getRange(),L=w.contains(_.row,_.column);(w.isEmpty()||!L)&&(p.selection.moveToPosition(_),p.selection.selectWord()),s="wait",C()}function T(){l=null,clearTimeout(l),p.selection.moveToPosition(_);var w=m>=2?p.selection.getLineRange(_.row):p.session.getBracketRange(_);w&&!w.isEmpty()?p.selection.setRange(w):p.selection.selectWord(),s="wait"}v.addListener(a,"contextmenu",function(w){if(S){var L=p.textInput.getElement();L.focus()}},p),v.addListener(a,"touchstart",function(w){var L=w.touches;if(l||L.length>1){clearTimeout(l),l=null,c=-1,s="zoom";return}S=p.$mouseHandler.isMousePressed=!0;var A=p.renderer.layerConfig.lineHeight,R=p.renderer.layerConfig.lineHeight,x=w.timeStamp;f=x;var I=L[0],$=I.clientX,k=I.clientY;Math.abs(o-$)+Math.abs(i-k)>A&&(c=-1),o=w.clientX=$,i=w.clientY=k,y=b=0;var H=new h(w,p);if(_=H.getDocumentPosition(),x-c<500&&L.length==1&&!d)m++,w.preventDefault(),w.button=0,T();else{m=0;var U=p.selection.cursor,q=p.selection.isEmpty()?U:p.selection.anchor,N=p.renderer.$cursorLayer.getPixelPosition(U,!0),K=p.renderer.$cursorLayer.getPixelPosition(q,!0),O=p.renderer.scroller.getBoundingClientRect(),B=p.renderer.layerConfig.offset,W=p.renderer.scrollLeft,P=function(ve,Ee){return ve=ve/R,Ee=Ee/A-.75,ve*ve+Ee*Ee};if(w.clientX<O.left){s="zoom";return}var Q=P(w.clientX-O.left-N.left+W,w.clientY-O.top-N.top+B),G=P(w.clientX-O.left-K.left+W,w.clientY-O.top-K.top+B);Q<3.5&&G<3.5&&(s=Q>G?"cursor":"anchor"),G<3.5?s="anchor":Q<3.5?s="cursor":s="scroll",l=setTimeout(E,450)}c=x},p),v.addListener(a,"touchend",function(w){S=p.$mouseHandler.isMousePressed=!1,r&&clearInterval(r),s=="zoom"?(s="",d=0):l?(p.selection.moveToPosition(_),d=0,C()):s=="scroll"?(M(),F()):C(),clearTimeout(l),l=null},p),v.addListener(a,"touchmove",function(w){l&&(clearTimeout(l),l=null);var L=w.touches;if(!(L.length>1||s=="zoom")){var A=L[0],R=o-A.clientX,x=i-A.clientY;if(s=="wait")if(R*R+x*x>4)s="cursor";else return w.preventDefault();o=A.clientX,i=A.clientY,w.clientX=A.clientX,w.clientY=A.clientY;var I=w.timeStamp,$=I-f;if(f=I,s=="scroll"){var k=new h(w,p);k.speed=1,k.wheelX=R,k.wheelY=x,10*Math.abs(R)<Math.abs(x)&&(R=0),10*Math.abs(x)<Math.abs(R)&&(x=0),$!=0&&(y=R/$,b=x/$),p._emit("mousewheel",k),k.propagationStopped||(y=b=0)}else{var H=new h(w,p),U=H.getDocumentPosition();s=="cursor"?p.selection.moveCursorToPosition(U):s=="anchor"&&p.selection.setSelectionAnchor(U.row,U.column),p.renderer.scrollCursorIntoView(U),w.preventDefault()}}},p);function M(){d+=60,r=setInterval(function(){d--<=0&&(clearInterval(r),r=null),Math.abs(y)<.01&&(y=0),Math.abs(b)<.01&&(b=0),d<20&&(y=.9*y),d<20&&(b=.9*b);var w=p.session.getScrollTop();p.renderer.scrollBy(10*y,10*b),w==p.session.getScrollTop()&&(d=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var h=e("../lib/event"),v=e("../lib/useragent"),u=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,p=e("./mouse_event").MouseEvent,s=e("./dragdrop_handler").DragdropHandler,o=e("./touch_handler").addTouchListeners,i=e("../config"),c=function(){function f(l){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var r=this;this.editor=l,new u(this),new a(this),new s(this);var d=function(y){var b=!document.hasFocus||!document.hasFocus()||!l.isFocused()&&document.activeElement==(l.textInput&&l.textInput.getElement());b&&window.focus(),l.focus(),setTimeout(function(){l.isFocused()||l.focus()})},_=l.renderer.getMouseEventTarget();h.addListener(_,"click",this.onMouseEvent.bind(this,"click"),l),h.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),l),h.addMultiMouseDownListener([_,l.renderer.scrollBarV&&l.renderer.scrollBarV.inner,l.renderer.scrollBarH&&l.renderer.scrollBarH.inner,l.textInput&&l.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",l),h.addMouseWheelListener(l.container,this.onMouseWheel.bind(this,"mousewheel"),l),o(l.container,l);var m=l.renderer.$gutter;h.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),l),h.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),l),h.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),l),h.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),l),h.addListener(_,"mousedown",d,l),h.addListener(m,"mousedown",d,l),v.isIE&&l.renderer.scrollBarV&&(h.addListener(l.renderer.scrollBarV.element,"mousedown",d,l),h.addListener(l.renderer.scrollBarH.element,"mousedown",d,l)),l.on("mousemove",function(y){if(!(r.state||r.$dragDelay||!r.$dragEnabled)){var b=l.renderer.screenToTextCoordinates(y.x,y.y),S=l.session.selection.getRange(),D=l.renderer;!S.isEmpty()&&S.insideStart(b.row,b.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},l)}return f.prototype.onMouseEvent=function(l,r){this.editor.session&&this.editor._emit(l,new p(r,this.editor))},f.prototype.onMouseMove=function(l,r){var d=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!d||!d.length||this.editor._emit(l,new p(r,this.editor))},f.prototype.onMouseWheel=function(l,r){var d=new p(r,this.editor);d.speed=this.$scrollSpeed*2,d.wheelX=r.wheelX,d.wheelY=r.wheelY,this.editor._emit(l,d)},f.prototype.setState=function(l){this.state=l},f.prototype.captureMouse=function(l,r){this.x=l.x,this.y=l.y,this.isMousePressed=!0;var d=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var m=this,y=function(C){if(C){if(v.isWebKit&&!C.which&&m.releaseMouse)return m.releaseMouse();m.x=C.clientX,m.y=C.clientY,r&&r(C),m.mouseEvent=new p(C,m.editor),m.$mouseMoved=!0}},b=function(C){d.off("beforeEndOperation",D),clearInterval(g),d.session&&S(),m[m.state+"End"]&&m[m.state+"End"](C),m.state="",m.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,C&&m.onMouseEvent("mouseup",C),d.endOperation()},S=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(v.isOldIE&&l.domEvent.type=="dblclick")return setTimeout(function(){b(l)});var D=function(C){m.releaseMouse&&d.curOp.command.name&&d.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};d.on("beforeEndOperation",D),d.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=h.capture(this.editor.container,y,b);var g=setInterval(S,20)},f.prototype.cancelContextMenu=function(){var l=function(r){r&&r.domEvent&&r.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",l),r&&r.domEvent&&h.stopEvent(r.domEvent))}.bind(this);setTimeout(l,10),this.editor.on("nativecontextmenu",l)},f.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},f}();c.prototype.releaseMouse=null,i.defineOptions(c.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:v.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=c});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function u(a){a.on("click",function(p){var s=p.getDocumentPosition(),o=a.session,i=o.getFoldAt(s.row,s.column,1);i&&(p.getAccelKey()?o.removeFold(i):o.expandFold(i),p.stop());var c=p.domEvent&&p.domEvent.target;c&&h.hasCssClass(c,"ace_inline_button")&&h.hasCssClass(c,"ace_toggle_wrap")&&(o.setOption("wrap",!o.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(p){var s=a.renderer.$gutterLayer.getRegion(p);if(s=="foldWidgets"){var o=p.getDocumentPosition().row,i=a.session;i.foldWidgets&&i.foldWidgets[o]&&a.session.onFoldWidgetClick(o,p),a.isFocused()||a.focus(),p.stop()}}),a.on("gutterdblclick",function(p){var s=a.renderer.$gutterLayer.getRegion(p);if(s=="foldWidgets"){var o=p.getDocumentPosition().row,i=a.session,c=i.getParentFoldRangeData(o,!0),f=c.range||c.firstRange;if(f){o=f.start.row;var l=i.getFoldAt(o,i.getLine(o).length,1);l?i.removeFold(l):(i.addFold("...",f),a.renderer.scrollCursorIntoView({row:f.start.row,column:0}))}p.stop()}})}return u}();t.FoldHandler=v});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var h=e("../lib/keys"),v=e("../lib/event"),u=function(){function a(p){this.$editor=p,this.$data={editor:p},this.$handlers=[],this.setDefaultHandler(p.commands)}return a.prototype.setDefaultHandler=function(p){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=p,this.addKeyboardHandler(p,0)},a.prototype.setKeyboardHandler=function(p){var s=this.$handlers;if(s[s.length-1]!=p){for(;s[s.length-1]&&s[s.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(s[s.length-1]);this.addKeyboardHandler(p,1)}},a.prototype.addKeyboardHandler=function(p,s){if(p){typeof p=="function"&&!p.handleKeyboard&&(p.handleKeyboard=p);var o=this.$handlers.indexOf(p);o!=-1&&this.$handlers.splice(o,1),s==null?this.$handlers.push(p):this.$handlers.splice(s,0,p),o==-1&&p.attach&&p.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(p){var s=this.$handlers.indexOf(p);return s==-1?!1:(this.$handlers.splice(s,1),p.detach&&p.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var p=this.$data,s=p.editor;return this.$handlers.map(function(o){return o.getStatusText&&o.getStatusText(s,p)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(p,s,o,i){for(var c,f=!1,l=this.$editor.commands,r=this.$handlers.length;r--&&(c=this.$handlers[r].handleKeyboard(this.$data,p,s,o,i),!(!(!c||!c.command)&&(c.command=="null"?f=!0:f=l.exec(c.command,this.$editor,c.args,i),f&&i&&p!=-1&&c.passEvent!=!0&&c.command.passEvent!=!0&&v.stopEvent(i),f))););return!f&&p==-1&&(c={command:"insertstring"},f=l.exec("insertstring",this.$editor,s)),f&&this.$editor._signal&&this.$editor._signal("keyboardActivity",c),f},a.prototype.onCommandKey=function(p,s,o){var i=h.keyCodeToString(o);return this.$callKeyboardHandlers(s,i,o,p)},a.prototype.onTextInput=function(p){return this.$callKeyboardHandlers(-1,p)},a}();t.KeyBinding=u});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var h=["\u0621","\u0641"],v=["\u063A","\u064A"],u=0,a=0,p=!1,s=!1,o=!1,i=!1,c=!1,f=!1,l=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],r=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d=0,_=1,m=0,y=1,b=2,S=3,D=4,g=5,C=6,F=7,E=8,T=9,M=10,w=11,L=12,A=13,R=14,x=15,I=16,$=17,k=18,H=[k,k,k,k,k,k,k,k,k,C,g,C,E,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,C,E,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,b,b,b,b,b,b,b,b,b,b,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,k,k,k,k,k,k,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,T,D,w,w,w,w,D,D,D,D,m,D,D,k,D,D,w,w,b,b,D,m,D,D,D,b,m,D,D,D,D,D],U=[E,E,E,E,E,E,E,E,E,E,E,k,k,k,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E,g,A,R,x,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,E];function q(W,P,Q,G){var ve=u?r:l,Ee=null,ye=null,ue=null,Ce=0,yt=null,qt=null,Ot=-1,Xe=null,se=null,he=[];if(!G)for(Xe=0,G=[];Xe<Q;Xe++)G[Xe]=O(W[Xe]);for(a=u,p=!1,s=!1,o=!1,i=!1,se=0;se<Q;se++){if(Ee=Ce,he[se]=ye=K(W,G,he,se),Ce=ve[Ee][ye],yt=Ce&240,Ce&=15,P[se]=ue=ve[Ce][5],yt>0)if(yt==16){for(Xe=Ot;Xe<se;Xe++)P[Xe]=1;Ot=-1}else Ot=-1;if(qt=ve[Ce][6],qt)Ot==-1&&(Ot=se);else if(Ot>-1){for(Xe=Ot;Xe<se;Xe++)P[Xe]=ue;Ot=-1}G[se]==g&&(P[se]=0),a|=ue}if(i){for(Xe=0;Xe<Q;Xe++)if(G[Xe]==C){P[Xe]=u;for(var ce=Xe-1;ce>=0&&G[ce]==E;ce--)P[ce]=u}}}function N(W,P,Q){if(!(a<W)){if(W==1&&u==_&&!o){Q.reverse();return}for(var G=Q.length,ve=0,Ee,ye,ue,Ce;ve<G;){if(P[ve]>=W){for(Ee=ve+1;Ee<G&&P[Ee]>=W;)Ee++;for(ye=ve,ue=Ee-1;ye<ue;ye++,ue--)Ce=Q[ye],Q[ye]=Q[ue],Q[ue]=Ce;ve=Ee}ve++}}}function K(W,P,Q,G){var ve=P[G],Ee,ye,ue,Ce;switch(ve){case m:case y:p=!1;case D:case S:return ve;case b:return p?S:b;case F:return p=!0,s=!0,y;case E:return D;case T:return G<1||G+1>=P.length||(Ee=Q[G-1])!=b&&Ee!=S||(ye=P[G+1])!=b&&ye!=S?D:(p&&(ye=S),ye==Ee?ye:D);case M:return Ee=G>0?Q[G-1]:g,Ee==b&&G+1<P.length&&P[G+1]==b?b:D;case w:if(G>0&&Q[G-1]==b)return b;if(p)return D;for(Ce=G+1,ue=P.length;Ce<ue&&P[Ce]==w;)Ce++;return Ce<ue&&P[Ce]==b?b:D;case L:for(ue=P.length,Ce=G+1;Ce<ue&&P[Ce]==L;)Ce++;if(Ce<ue){var yt=W[G],qt=yt>=1425&&yt<=2303||yt==64286;if(Ee=P[Ce],qt&&(Ee==y||Ee==F))return y}return G<1||(Ee=P[G-1])==g?D:Q[G-1];case g:return p=!1,o=!0,u;case C:return i=!0,D;case A:case R:case I:case $:case x:p=!1;case k:return D}}function O(W){var P=W.charCodeAt(0),Q=P>>8;return Q==0?P>191?m:H[P]:Q==5?/[\u0591-\u05f4]/.test(W)?y:m:Q==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?L:/[\u0660-\u0669\u066b-\u066c]/.test(W)?S:P==1642?w:/[\u06f0-\u06f9]/.test(W)?b:F:Q==32&&P<=8287?U[P&255]:Q==254&&P>=65136?F:D}function B(W){return W>="\u064B"&&W<="\u0655"}t.L=m,t.R=y,t.EN=b,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(W,P,Q){if(W.length<2)return{};var G=W.split(""),ve=new Array(G.length),Ee=new Array(G.length),ye=[];u=Q?_:d,q(G,ye,G.length,P);for(var ue=0;ue<ve.length;ve[ue]=ue,ue++);N(2,ye,ve),N(1,ye,ve);for(var ue=0;ue<ve.length-1;ue++)P[ue]===S?ye[ue]=t.AN:ye[ue]===y&&(P[ue]>F&&P[ue]<A||P[ue]===D||P[ue]===k)?ye[ue]=t.ON_R:ue>0&&G[ue-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(G[ue])&&(ye[ue-1]=ye[ue]=t.R_H,ue++);G[G.length-1]===t.DOT&&(ye[G.length-1]=t.B),G[0]==="\u202B"&&(ye[0]=t.RLE);for(var ue=0;ue<ve.length;ue++)Ee[ue]=ye[ve[ue]];return{logicalFromVisual:ve,bidiLevels:Ee}},t.hasBidiCharacters=function(W,P){for(var Q=!1,G=0;G<W.length;G++)P[G]=O(W.charAt(G)),!Q&&(P[G]==y||P[G]==F||P[G]==S)&&(Q=!0);return Q},t.getVisualFromLogicalIdx=function(W,P){for(var Q=0;Q<P.logicalFromVisual.length;Q++)if(P.logicalFromVisual[Q]==W)return Q;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var h=e("./lib/bidiutil"),v=e("./lib/lang"),u=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function p(s){this.session=s,this.bidiMap={},this.currentRow=null,this.bidiUtil=h,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=u.test(s.getValue())}return p.prototype.isBidiRow=function(s,o,i){return this.seenBidi?(s!==this.currentRow&&(this.currentRow=s,this.updateRowLine(o,i),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},p.prototype.onChange=function(s){this.seenBidi?this.currentRow=null:s.action=="insert"&&u.test(s.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},p.prototype.getDocumentRow=function(){var s=0,o=this.session.$screenRowCache;if(o.length){var i=this.session.$getRowCacheIndex(o,this.currentRow);i>=0&&(s=this.session.$docRowCache[i])}return s},p.prototype.getSplitIndex=function(){var s=0,o=this.session.$screenRowCache;if(o.length)for(var i,c=this.session.$getRowCacheIndex(o,this.currentRow);this.currentRow-s>0&&(i=this.session.$getRowCacheIndex(o,this.currentRow-s-1),i===c);)c=i,s++;else s=this.currentRow;return s},p.prototype.updateRowLine=function(s,o){s===void 0&&(s=this.getDocumentRow());var i=s===this.session.getLength()-1,c=i?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(s),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var f=this.session.$wrapData[s];f&&(o===void 0&&(o=this.getSplitIndex()),o>0&&f.length?(this.wrapIndent=f.indent,this.wrapOffset=this.wrapIndent*this.charWidths[h.L],this.line=o<f.length?this.line.substring(f[o-1],f[o]):this.line.substring(f[f.length-1])):this.line=this.line.substring(0,f[o]),o==f.length&&(this.line+=this.showInvisibles?c:h.DOT))}else this.line+=this.showInvisibles?c:h.DOT;var l=this.session,r=0,d;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,m){return _==="	"||l.isFullWidth(_.charCodeAt(0))?(d=_==="	"?l.getScreenTabSize(m+r):2,r+=d-1,v.stringRepeat(h.DOT,d)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==h.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},p.prototype.updateBidiMap=function(){var s=[];h.hasBidiCharacters(this.line,s)||this.isRtlDir?this.bidiMap=h.doBidiReorder(this.line,s,this.isRtlDir):this.bidiMap={}},p.prototype.markAsDirty=function(){this.currentRow=null},p.prototype.updateCharacterWidths=function(s){if(this.characterWidth!==s.$characterSize.width){this.fontMetrics=s;var o=this.characterWidth=s.$characterSize.width,i=s.$measureCharWidth("\u05D4");this.charWidths[h.L]=this.charWidths[h.EN]=this.charWidths[h.ON_R]=o,this.charWidths[h.R]=this.charWidths[h.AN]=i,this.charWidths[h.R_H]=i*.45,this.charWidths[h.B]=this.charWidths[h.RLE]=0,this.currentRow=null}},p.prototype.setShowInvisibles=function(s){this.showInvisibles=s,this.currentRow=null},p.prototype.setEolChar=function(s){this.EOL=s},p.prototype.setContentWidth=function(s){this.contentWidth=s},p.prototype.isRtlLine=function(s){return this.$isRtl?!0:s!=null?this.session.getLine(s).charAt(0)==this.RLE:this.isRtlDir},p.prototype.setRtlDirection=function(s,o){for(var i=s.getCursorPosition(),c=s.selection.getSelectionAnchor().row;c<=i.row;c++)!o&&s.session.getLine(c).charAt(0)===s.session.$bidiHandler.RLE?s.session.doc.removeInLine(c,0,1):o&&s.session.getLine(c).charAt(0)!==s.session.$bidiHandler.RLE&&s.session.doc.insert({column:0,row:c},s.session.$bidiHandler.RLE)},p.prototype.getPosLeft=function(s){s-=this.wrapIndent;var o=this.line.charAt(0)===this.RLE?1:0,i=s>o?this.session.getOverwrite()?s:s-1:o,c=h.getVisualFromLogicalIdx(i,this.bidiMap),f=this.bidiMap.bidiLevels,l=0;!this.session.getOverwrite()&&s<=o&&f[c]%2!==0&&c++;for(var r=0;r<c;r++)l+=this.charWidths[f[r]];return!this.session.getOverwrite()&&s>o&&f[c]%2===0&&(l+=this.charWidths[f[c]]),this.wrapIndent&&(l+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(l+=this.rtlLineOffset),l},p.prototype.getSelections=function(s,o){var i=this.bidiMap,c=i.bidiLevels,f,l=[],r=0,d=Math.min(s,o)-this.wrapIndent,_=Math.max(s,o)-this.wrapIndent,m=!1,y=!1,b=0;this.wrapIndent&&(r+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var S,D=0;D<c.length;D++)S=i.logicalFromVisual[D],f=c[D],m=S>=d&&S<_,m&&!y?b=r:!m&&y&&l.push({left:b,width:r-b}),r+=this.charWidths[f],y=m;if(m&&D===c.length&&l.push({left:b,width:r-b}),this.isRtlDir)for(var g=0;g<l.length;g++)l[g].left+=this.rtlLineOffset;return l},p.prototype.offsetToCol=function(i){this.isRtlDir&&(i-=this.rtlLineOffset);var o=0,i=Math.max(i,0),c=0,f=0,l=this.bidiMap.bidiLevels,r=this.charWidths[l[f]];for(this.wrapIndent&&(i-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);i>c+r/2;){if(c+=r,f===l.length-1){r=0;break}r=this.charWidths[l[++f]]}return f>0&&l[f-1]%2!==0&&l[f]%2===0?(i<c&&f--,o=this.bidiMap.logicalFromVisual[f]):f>0&&l[f-1]%2===0&&l[f]%2!==0?o=1+(i>c?this.bidiMap.logicalFromVisual[f]:this.bidiMap.logicalFromVisual[f-1]):this.isRtlDir&&f===l.length-1&&r===0&&l[f-1]%2===0||!this.isRtlDir&&f===0&&l[f]%2!==0?o=1+this.bidiMap.logicalFromVisual[f]:(f>0&&l[f-1]%2!==0&&r!==0&&f--,o=this.bidiMap.logicalFromVisual[f]),o===0&&this.isRtlDir&&o++,o+this.wrapIndent},p}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/lang"),u=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=function(){function s(o){this.session=o,this.doc=o.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var i=this;this.cursor.on("change",function(c){i.$cursorChanged=!0,i.$silent||i._emit("changeCursor"),!i.$isEmpty&&!i.$silent&&i._emit("changeSelection"),!i.$keepDesiredColumnOnChange&&c.old.column!=c.value.column&&(i.$desiredColumn=null)}),this.anchor.on("change",function(){i.$anchorChanged=!0,!i.$isEmpty&&!i.$silent&&i._emit("changeSelection")})}return s.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},s.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},s.prototype.getCursor=function(){return this.lead.getPosition()},s.prototype.setAnchor=function(o,i){this.$isEmpty=!1,this.anchor.setPosition(o,i)},s.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},s.prototype.getSelectionLead=function(){return this.lead.getPosition()},s.prototype.isBackwards=function(){var o=this.anchor,i=this.lead;return o.row>i.row||o.row==i.row&&o.column>i.column},s.prototype.getRange=function(){var o=this.anchor,i=this.lead;return this.$isEmpty?a.fromPoints(i,i):this.isBackwards()?a.fromPoints(i,o):a.fromPoints(o,i)},s.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},s.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},s.prototype.setRange=function(o,i){var c=i?o.end:o.start,f=i?o.start:o.end;this.$setSelection(c.row,c.column,f.row,f.column)},s.prototype.$setSelection=function(o,i,c,f){if(!this.$silent){var l=this.$isEmpty,r=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(o,i),this.cursor.setPosition(c,f),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||l!=this.$isEmpty||r)&&this._emit("changeSelection")}},s.prototype.$moveSelection=function(o){var i=this.lead;this.$isEmpty&&this.setSelectionAnchor(i.row,i.column),o.call(this)},s.prototype.selectTo=function(o,i){this.$moveSelection(function(){this.moveCursorTo(o,i)})},s.prototype.selectToPosition=function(o){this.$moveSelection(function(){this.moveCursorToPosition(o)})},s.prototype.moveTo=function(o,i){this.clearSelection(),this.moveCursorTo(o,i)},s.prototype.moveToPosition=function(o){this.clearSelection(),this.moveCursorToPosition(o)},s.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},s.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},s.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},s.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},s.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},s.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},s.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},s.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},s.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},s.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},s.prototype.getWordRange=function(o,i){if(typeof i>"u"){var c=o||this.lead;o=c.row,i=c.column}return this.session.getWordRange(o,i)},s.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},s.prototype.selectAWord=function(){var o=this.getCursor(),i=this.session.getAWordRange(o.row,o.column);this.setSelectionRange(i)},s.prototype.getLineRange=function(o,i){var c=typeof o=="number"?o:this.lead.row,f,l=this.session.getFoldLine(c);return l?(c=l.start.row,f=l.end.row):f=c,i===!0?new a(c,0,f,this.session.getLine(f).length):new a(c,0,f+1,0)},s.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},s.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},s.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},s.prototype.wouldMoveIntoSoftTab=function(o,i,c){var f=o.column,l=o.column+i;return c<0&&(f=o.column-i,l=o.column),this.session.isTabStop(o)&&this.doc.getLine(o.row).slice(f,l).split(" ").length-1==i},s.prototype.moveCursorLeft=function(){var o=this.lead.getPosition(),i;if(i=this.session.getFoldAt(o.row,o.column,-1))this.moveCursorTo(i.start.row,i.start.column);else if(o.column===0)o.row>0&&this.moveCursorTo(o.row-1,this.doc.getLine(o.row-1).length);else{var c=this.session.getTabSize();this.wouldMoveIntoSoftTab(o,c,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-c):this.moveCursorBy(0,-1)}},s.prototype.moveCursorRight=function(){var o=this.lead.getPosition(),i;if(i=this.session.getFoldAt(o.row,o.column,1))this.moveCursorTo(i.end.row,i.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var c=this.session.getTabSize(),o=this.lead;this.wouldMoveIntoSoftTab(o,c,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,c):this.moveCursorBy(0,1)}},s.prototype.moveCursorLineStart=function(){var o=this.lead.row,i=this.lead.column,c=this.session.documentToScreenRow(o,i),f=this.session.screenToDocumentPosition(c,0),l=this.session.getDisplayLine(o,null,f.row,f.column),r=l.match(/^\s*/);r[0].length!=i&&!this.session.$useEmacsStyleLineStart&&(f.column+=r[0].length),this.moveCursorToPosition(f)},s.prototype.moveCursorLineEnd=function(){var o=this.lead,i=this.session.getDocumentLastRowColumnPosition(o.row,o.column);if(this.lead.column==i.column){var c=this.session.getLine(i.row);if(i.column==c.length){var f=c.search(/\s+$/);f>0&&(i.column=f)}}this.moveCursorTo(i.row,i.column)},s.prototype.moveCursorFileEnd=function(){var o=this.doc.getLength()-1,i=this.doc.getLine(o).length;this.moveCursorTo(o,i)},s.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},s.prototype.moveCursorLongWordRight=function(){var o=this.lead.row,i=this.lead.column,c=this.doc.getLine(o),f=c.substring(i);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var l=this.session.getFoldAt(o,i,1);if(l){this.moveCursorTo(l.end.row,l.end.column);return}if(this.session.nonTokenRe.exec(f)&&(i+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,f=c.substring(i)),i>=c.length){this.moveCursorTo(o,c.length),this.moveCursorRight(),o<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(f)&&(i+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(o,i)},s.prototype.moveCursorLongWordLeft=function(){var o=this.lead.row,i=this.lead.column,c;if(c=this.session.getFoldAt(o,i,-1)){this.moveCursorTo(c.start.row,c.start.column);return}var f=this.session.getFoldStringAt(o,i,-1);f==null&&(f=this.doc.getLine(o).substring(0,i));var l=v.stringReverse(f);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(l)&&(i-=this.session.nonTokenRe.lastIndex,l=l.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),i<=0){this.moveCursorTo(o,0),this.moveCursorLeft(),o>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(l)&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(o,i)},s.prototype.$shortWordEndIndex=function(o){var i=0,c,f=/\s/,l=this.session.tokenRe;if(l.lastIndex=0,this.session.tokenRe.exec(o))i=this.session.tokenRe.lastIndex;else{for(;(c=o[i])&&f.test(c);)i++;if(i<1){for(l.lastIndex=0;(c=o[i])&&!l.test(c);)if(l.lastIndex=0,i++,f.test(c))if(i>2){i--;break}else{for(;(c=o[i])&&f.test(c);)i++;if(i>2)break}}}return l.lastIndex=0,i},s.prototype.moveCursorShortWordRight=function(){var o=this.lead.row,i=this.lead.column,c=this.doc.getLine(o),f=c.substring(i),l=this.session.getFoldAt(o,i,1);if(l)return this.moveCursorTo(l.end.row,l.end.column);if(i==c.length){var r=this.doc.getLength();do o++,f=this.doc.getLine(o);while(o<r&&/^\s*$/.test(f));/^\s+/.test(f)||(f=""),i=0}var d=this.$shortWordEndIndex(f);this.moveCursorTo(o,i+d)},s.prototype.moveCursorShortWordLeft=function(){var o=this.lead.row,i=this.lead.column,c;if(c=this.session.getFoldAt(o,i,-1))return this.moveCursorTo(c.start.row,c.start.column);var f=this.session.getLine(o).substring(0,i);if(i===0){do o--,f=this.doc.getLine(o);while(o>0&&/^\s*$/.test(f));i=f.length,/\s+$/.test(f)||(f="")}var l=v.stringReverse(f),r=this.$shortWordEndIndex(l);return this.moveCursorTo(o,i-r)},s.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},s.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},s.prototype.moveCursorBy=function(o,i){var c=this.session.documentToScreenPosition(this.lead.row,this.lead.column),f;if(i===0&&(o!==0&&(this.session.$bidiHandler.isBidiRow(c.row,this.lead.row)?(f=this.session.$bidiHandler.getPosLeft(c.column),c.column=Math.round(f/this.session.$bidiHandler.charWidths[0])):f=c.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?c.column=this.$desiredColumn:this.$desiredColumn=c.column),o!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var l=this.session.lineWidgets[this.lead.row];o<0?o-=l.rowsAbove||0:o>0&&(o+=l.rowCount-(l.rowsAbove||0))}var r=this.session.screenToDocumentPosition(c.row+o,c.column,f);o!==0&&i===0&&r.row===this.lead.row&&(r.column,this.lead.column),this.moveCursorTo(r.row,r.column+i,i===0)},s.prototype.moveCursorToPosition=function(o){this.moveCursorTo(o.row,o.column)},s.prototype.moveCursorTo=function(o,i,c){var f=this.session.getFoldAt(o,i,1);f&&(o=f.start.row,i=f.start.column),this.$keepDesiredColumnOnChange=!0;var l=this.session.getLine(o);/[\uDC00-\uDFFF]/.test(l.charAt(i))&&l.charAt(i-1)&&(this.lead.row==o&&this.lead.column==i+1?i=i-1:i=i+1),this.lead.setPosition(o,i),this.$keepDesiredColumnOnChange=!1,c||(this.$desiredColumn=null)},s.prototype.moveCursorToScreen=function(o,i,c){var f=this.session.screenToDocumentPosition(o,i);this.moveCursorTo(f.row,f.column,c)},s.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},s.prototype.fromOrientedRange=function(o){this.setSelectionRange(o,o.cursor==o.start),this.$desiredColumn=o.desiredColumn||this.$desiredColumn},s.prototype.toOrientedRange=function(o){var i=this.getRange();return o?(o.start.column=i.start.column,o.start.row=i.start.row,o.end.column=i.end.column,o.end.row=i.end.row):o=i,o.cursor=this.isBackwards()?o.start:o.end,o.desiredColumn=this.$desiredColumn,o},s.prototype.getRangeOfMovements=function(o){var i=this.getCursor();try{o(this);var c=this.getCursor();return a.fromPoints(i,c)}catch{return a.fromPoints(i,i)}finally{this.moveCursorToPosition(i)}},s.prototype.toJSON=function(){if(this.rangeCount)var o=this.ranges.map(function(i){var c=i.clone();return c.isBackwards=i.cursor==i.start,c});else{var o=this.getRange();o.isBackwards=this.isBackwards()}return o},s.prototype.fromJSON=function(o){if(o.start==null)if(this.rangeList&&o.length>1){this.toSingleRange(o[0]);for(var i=o.length;i--;){var c=a.fromPoints(o[i].start,o[i].end);o[i].isBackwards&&(c.cursor=c.start),this.addRange(c,!0)}return}else o=o[0];this.rangeList&&this.toSingleRange(o),this.setSelectionRange(o,o.isBackwards)},s.prototype.isEqual=function(o){if((o.length||this.rangeCount)&&o.length!=this.rangeCount)return!1;if(!o.length||!this.ranges)return this.getRange().isEqual(o);for(var i=this.ranges.length;i--;)if(!this.ranges[i].isEqual(o[i]))return!1;return!0},s}();p.prototype.setSelectionAnchor=p.prototype.setAnchor,p.prototype.getSelectionAnchor=p.prototype.getAnchor,p.prototype.setSelectionRange=p.prototype.setRange,h.implement(p.prototype,u),t.Selection=p});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var h=e("./lib/report_error").reportError,v=2e3,u=function(){function a(p){this.splitRegex,this.states=p,this.regExps={},this.matchMappings={};for(var s in this.states){for(var o=this.states[s],i=[],c=0,f=this.matchMappings[s]={defaultToken:"text"},l="g",r=[],d=0;d<o.length;d++){var _=o[d];if(_.defaultToken&&(f.defaultToken=_.defaultToken),_.caseInsensitive&&l.indexOf("i")===-1&&(l+="i"),_.unicode&&l.indexOf("u")===-1&&(l+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var m=_.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?m=_.regex.replace(/\\([0-9]+)/g,function(b,S){return"\\"+(parseInt(S,10)+c+1)}):(y=1,m=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&r.push(_)),f[c]=d,c+=y,i.push(m),_.onMatch||(_.onMatch=null)}}i.length||(f[0]=0,i.push("$")),r.forEach(function(b){b.splitRegex=this.createSplitterRegexp(b.regex,l)},this),this.regExps[s]=new RegExp("("+i.join(")|(")+")|($)",l)}}return a.prototype.$setMaxTokenCount=function(p){v=p|0},a.prototype.$applyToken=function(p){var s=this.splitRegex.exec(p).slice(1),o=this.token.apply(this,s);if(typeof o=="string")return[{type:o,value:p}];for(var i=[],c=0,f=o.length;c<f;c++)s[c]&&(i[i.length]={type:o[c],value:s[c]});return i},a.prototype.$arrayTokens=function(p){if(!p)return[];var s=this.splitRegex.exec(p);if(!s)return"text";for(var o=[],i=this.tokenArray,c=0,f=i.length;c<f;c++)s[c+1]&&(o[o.length]={type:i[c],value:s[c+1]});return o},a.prototype.removeCapturingGroups=function(p){var s=p.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(o,i){return i?"(?:":o});return s},a.prototype.createSplitterRegexp=function(p,s){if(p.indexOf("(?=")!=-1){var o=0,i=!1,c={};p.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(f,l,r,d,_,m){return i?i=_!="]":_?i=!0:d?(o==c.stack&&(c.end=m+1,c.stack=-1),o--):r&&(o++,r.length!=1&&(c.stack=o,c.start=m)),f}),c.end!=null&&/^\)*$/.test(p.substr(c.end))&&(p=p.substring(0,c.start)+p.substr(c.end))}return p.charAt(0)!="^"&&(p="^"+p),p.charAt(p.length-1)!="$"&&(p+="$"),new RegExp(p,(s||"").replace("g",""))},a.prototype.getLineTokens=function(p,s){if(s&&typeof s!="string"){var o=s.slice(0);s=o[0],s==="#tmp"&&(o.shift(),s=o.shift())}else var o=[];var i=s||"start",c=this.states[i];c||(i="start",c=this.states[i]);var f=this.matchMappings[i],l=this.regExps[i];l.lastIndex=0;for(var r,d=[],_=0,m=0,y={type:null,value:""};r=l.exec(p);){var b=f.defaultToken,S=null,D=r[0],g=l.lastIndex;if(g-D.length>_){var C=p.substring(_,g-D.length);y.type==b?y.value+=C:(y.type&&d.push(y),y={type:b,value:C})}for(var F=0;F<r.length-2;F++)if(r[F+1]!==void 0){S=c[f[F]],S.onMatch?b=S.onMatch(D,i,o,p):b=S.token,S.next&&(typeof S.next=="string"?i=S.next:i=S.next(i,o),c=this.states[i],c||(this.reportError("state doesn't exist",i),i="start",c=this.states[i]),f=this.matchMappings[i],_=g,l=this.regExps[i],l.lastIndex=g),S.consumeLineEnd&&(_=g);break}if(D){if(typeof b=="string")(!S||S.merge!==!1)&&y.type===b?y.value+=D:(y.type&&d.push(y),y={type:b,value:D});else if(b){y.type&&d.push(y),y={type:null,value:""};for(var F=0;F<b.length;F++)d.push(b[F])}}if(_==p.length)break;if(_=g,m++>v){for(m>2*p.length&&this.reportError("infinite loop with in ace tokenizer",{startState:s,line:p});_<p.length;)y.type&&d.push(y),y={value:p.substring(_,_+=500),type:"overflow"};i="start",o=[];break}}return y.type&&d.push(y),o.length>1&&o[0]!==i&&o.unshift("#tmp",i),{tokens:d,state:o.length?o:i}},a}();u.prototype.reportError=h,t.Tokenizer=u});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var h=e("../lib/deep_copy").deepCopy,v;v=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(p,s){if(!s){for(var o in p)this.$rules[o]=p[o];return}for(var o in p){for(var i=p[o],c=0;c<i.length;c++){var f=i[c];(f.next||f.onMatch)&&(typeof f.next=="string"&&f.next.indexOf(s)!==0&&(f.next=s+f.next),f.nextState&&f.nextState.indexOf(s)!==0&&(f.nextState=s+f.nextState))}this.$rules[s+o]=i}},this.getRules=function(){return this.$rules},this.embedRules=function(p,s,o,i,c){var f=typeof p=="function"?new p().getRules():p;if(i)for(var l=0;l<i.length;l++)i[l]=s+i[l];else{i=[];for(var r in f)i.push(s+r)}if(this.addRules(f,s),o)for(var d=Array.prototype[c?"push":"unshift"],l=0;l<i.length;l++)d.apply(this.$rules[i[l]],h(o));this.$embeds||(this.$embeds=[]),this.$embeds.push(s)},this.getEmbeds=function(){return this.$embeds};var u=function(p,s){return(p!="start"||s.length)&&s.unshift(this.nextState,p),this.nextState},a=function(p,s){return s.shift(),s.shift()||"start"};this.normalizeRules=function(){var p=0,s=this.$rules;function o(i){var c=s[i];c.processed=!0;for(var f=0;f<c.length;f++){var l=c[f],r=null;Array.isArray(l)&&(r=l,l={}),!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var d=l.next||l.push;if(d&&Array.isArray(d)){var _=l.stateName;_||(_=l.token,typeof _!="string"&&(_=_[0]||""),s[_]&&(_+=p++)),s[_]=d,l.next=_,o(_)}else d=="pop"&&(l.next=a);if(l.push&&(l.nextState=l.next||l.push,l.next=u,delete l.push),l.rules)for(var m in l.rules)s[m]?s[m].push&&s[m].push.apply(s[m],l.rules[m]):s[m]=l.rules[m];var y=typeof l=="string"?l:l.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?r=y.map(function(S){return s[S]}):r=s[y]),r){var b=[f,1].concat(r);l.noEscape&&(b=b.filter(function(S){return!S.next})),c.splice.apply(c,b),f--}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}Object.keys(s).forEach(o,this)},this.createKeywordMapper=function(p,s,o,i){var c=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(f){for(var l=p[f],r=l.split(i||"|"),d=r.length;d--;){var _=r[d];this.$keywordList.push(_),o&&(_=_.toLowerCase()),c[_]=f}},this),p=null,o?function(f){return c[f.toLowerCase()]||s}:function(f){return c[f]||s}},this.getKeywords=function(){return this.$keywords}}.call(v.prototype),t.TextHighlightRules=v});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var h;h=function(){this.$behaviours={}},function(){this.add=function(v,u,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[v]:this.$behaviours[v]={}}this.$behaviours[v][u]=a},this.addBehaviours=function(v){for(var u in v)for(var a in v[u])this.add(u,a,v[u][a])},this.remove=function(v){this.$behaviours&&this.$behaviours[v]&&delete this.$behaviours[v]},this.inherit=function(v,u){if(typeof v=="function")var a=new v().getBehaviours(u);else var a=v.getBehaviours(u);this.addBehaviours(a)},this.getBehaviours=function(v){if(v){for(var u={},a=0;a<v.length;a++)this.$behaviours[v[a]]&&(u[v[a]]=this.$behaviours[v[a]]);return u}else return this.$behaviours}}.call(h.prototype),t.Behaviour=h});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("./range").Range,v=function(){function u(a,p,s){this.$session=a,this.$row=p,this.$rowTokens=a.getTokens(p);var o=a.getTokenAt(p,s);this.$tokenIndex=o?o.index:-1}return u.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},u.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},u.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},u.prototype.getCurrentTokenRow=function(){return this.$row},u.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,p=this.$tokenIndex,s=a[p].start;if(s!==void 0)return s;for(s=0;p>0;)p-=1,s+=a[p].value.length;return s},u.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},u.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],p=this.getCurrentTokenColumn();return new h(this.$row,p,this.$row,p+a.value.length)},u}();t.TokenIterator=v});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var h=e("../../lib/oop"),v=e("../behaviour").Behaviour,u=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),p=["text","paren.rparen","rparen","paren","punctuation.operator"],s=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],o,i={},c={'"':'"',"'":"'"},f=function(d){var _=-1;if(d.multiSelect&&(_=d.selection.index,i.rangeCount!=d.multiSelect.rangeCount&&(i={rangeCount:d.multiSelect.rangeCount})),i[_])return o=i[_];o=i[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},l=function(d,_,m,y){var b=d.end.row-d.start.row;return{text:m+_+y,selection:[0,d.start.column+1,b,d.end.column+(b?0:1)]}},r;r=function(d){d=d||{},this.add("braces","insertion",function(_,m,y,b,S){var D=y.getCursorPosition(),g=b.doc.getLine(D.row);if(S=="{"){f(y);var C=y.getSelectionRange(),F=b.doc.getTextRange(C);if(F!==""&&F!=="{"&&y.getWrapBehavioursEnabled())return l(C,F,"{","}");if(r.isSaneInsertion(y,b))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||d.braces?(r.recordAutoInsert(y,b,"}"),{text:"{}",selection:[1,1]}):(r.recordMaybeInsert(y,b,"{"),{text:"{",selection:[1,1]})}else if(S=="}"){f(y);var E=g.substring(D.column,D.column+1);if(E=="}"){var T=b.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&r.isAutoInsertedClosing(D,g,S))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(S==`
`||S==`\r
`){f(y);var M="";r.isMaybeInsertedClosing(D,g)&&(M=a.stringRepeat("}",o.maybeInsertedBrackets),r.clearMaybeInsertedClosing());var E=g.substring(D.column,D.column+1);if(E==="}"){var w=b.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var L=this.$getIndent(b.getLine(w.row))}else if(M)var L=this.$getIndent(g);else{r.clearMaybeInsertedClosing();return}var A=L+b.getTabString();return{text:`
`+A+`
`+L+M,selection:[1,A.length,1,A.length]}}else r.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="{"){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.end.column,S.end.column+1);if(C=="}")return S.end.column++,S;o.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,m,y,b,S){if(S=="("){f(y);var D=y.getSelectionRange(),g=b.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return l(D,g,"(",")");if(r.isSaneInsertion(y,b))return r.recordAutoInsert(y,b,")"),{text:"()",selection:[1,1]}}else if(S==")"){f(y);var C=y.getCursorPosition(),F=b.doc.getLine(C.row),E=F.substring(C.column,C.column+1);if(E==")"){var T=b.$findOpeningBracket(")",{column:C.column+1,row:C.row});if(T!==null&&r.isAutoInsertedClosing(C,F,S))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="("){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.start.column+1,S.start.column+2);if(C==")")return S.end.column++,S}}),this.add("brackets","insertion",function(_,m,y,b,S){if(S=="["){f(y);var D=y.getSelectionRange(),g=b.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return l(D,g,"[","]");if(r.isSaneInsertion(y,b))return r.recordAutoInsert(y,b,"]"),{text:"[]",selection:[1,1]}}else if(S=="]"){f(y);var C=y.getCursorPosition(),F=b.doc.getLine(C.row),E=F.substring(C.column,C.column+1);if(E=="]"){var T=b.$findOpeningBracket("]",{column:C.column+1,row:C.row});if(T!==null&&r.isAutoInsertedClosing(C,F,S))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,m,y,b,S){var D=b.doc.getTextRange(S);if(!S.isMultiLine()&&D=="["){f(y);var g=b.doc.getLine(S.start.row),C=g.substring(S.start.column+1,S.start.column+2);if(C=="]")return S.end.column++,S}}),this.add("string_dquotes","insertion",function(_,m,y,b,S){var D=b.$mode.$quotes||c;if(S.length==1&&D[S]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(S)!=-1)return;f(y);var g=S,C=y.getSelectionRange(),F=b.doc.getTextRange(C);if(F!==""&&(F.length!=1||!D[F])&&y.getWrapBehavioursEnabled())return l(C,F,g,g);if(!F){var E=y.getCursorPosition(),T=b.doc.getLine(E.row),M=T.substring(E.column-1,E.column),w=T.substring(E.column,E.column+1),L=b.getTokenAt(E.row,E.column),A=b.getTokenAt(E.row,E.column+1);if(M=="\\"&&L&&/escape/.test(L.type))return null;var R=L&&/string|escape/.test(L.type),x=!A||/string|escape/.test(A.type),I;if(w==g)I=R!==x,I&&/string\.end/.test(A.type)&&(I=!1);else{if(R&&!x||R&&x)return null;var $=b.$mode.tokenRe;$.lastIndex=0;var k=$.test(M);$.lastIndex=0;var H=$.test(w),U=b.$mode.$pairQuotesAfter,q=U&&U[g]&&U[g].test(M);if(!q&&k||H||w&&!/[\s;,.})\]\\]/.test(w))return null;var N=T[E.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,m,y,b,S){var D=b.$mode.$quotes||c,g=b.doc.getTextRange(S);if(!S.isMultiLine()&&D.hasOwnProperty(g)){f(y);var C=b.doc.getLine(S.start.row),F=C.substring(S.start.column+1,S.start.column+2);if(F==g)return S.end.column++,S}}),d.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,m,y,b,S){if(_==="doc-start"&&(S===`
`||S===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=b.doc.getLine(D.row),C=b.doc.getLine(D.row+1),F=this.$getIndent(g);if(/\s*\*/.test(C))return/^\s*\*/.test(g)?{text:S+F+"* ",selection:[1,3+F.length,1,3+F.length]}:{text:S+F+" * ",selection:[1,3+F.length,1,3+F.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:S+F+" * "+S+" "+F+"*/",selection:[1,4+F.length,1,4+F.length]}}})},r.isSaneInsertion=function(d,_){var m=d.getCursorPosition(),y=new u(_,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",p)){if(/[)}\]]/.test(d.session.getLine(m.row)[m.column]))return!0;var b=new u(_,m.row,m.column+1);if(!this.$matchTokenType(b.getCurrentToken()||"text",p))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",s)},r.$matchTokenType=function(d,_){return _.indexOf(d.type||d)>-1},r.recordAutoInsert=function(d,_,m){var y=d.getCursorPosition(),b=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,b,o.autoInsertedLineEnd[0])||(o.autoInsertedBrackets=0),o.autoInsertedRow=y.row,o.autoInsertedLineEnd=m+b.substr(y.column),o.autoInsertedBrackets++},r.recordMaybeInsert=function(d,_,m){var y=d.getCursorPosition(),b=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,b)||(o.maybeInsertedBrackets=0),o.maybeInsertedRow=y.row,o.maybeInsertedLineStart=b.substr(0,y.column)+m,o.maybeInsertedLineEnd=b.substr(y.column),o.maybeInsertedBrackets++},r.isAutoInsertedClosing=function(d,_,m){return o.autoInsertedBrackets>0&&d.row===o.autoInsertedRow&&m===o.autoInsertedLineEnd[0]&&_.substr(d.column)===o.autoInsertedLineEnd},r.isMaybeInsertedClosing=function(d,_){return o.maybeInsertedBrackets>0&&d.row===o.maybeInsertedRow&&_.substr(d.column)===o.maybeInsertedLineEnd&&_.substr(0,d.column)==o.maybeInsertedLineStart},r.popAutoInsertedClosing=function(){o.autoInsertedLineEnd=o.autoInsertedLineEnd.substr(1),o.autoInsertedBrackets--},r.clearMaybeInsertedClosing=function(){o&&(o.maybeInsertedBrackets=0,o.maybeInsertedRow=-1)},h.inherits(r,v),t.CstyleBehaviour=r});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var h=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],v=0,u=[],a=0;a<h.length;a+=2)u.push(v+=h[a]),h[a+1]&&u.push(45,v+=h[a+1]);t.wordChars=String.fromCharCode.apply(null,u)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var h=e("../config"),v=e("../tokenizer").Tokenizer,u=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,p=e("../unicode"),s=e("../lib/lang"),o=e("../token_iterator").TokenIterator,i=e("../range").Range,c;c=function(){this.HighlightRules=u},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+p.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+p.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new v(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(f,l,r,d){var _=l.doc,m=!0,y=!0,b=1/0,S=l.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var F=this.lineCommentStart.map(s.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var F=s.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;F=new RegExp("^(\\s*)(?:"+F+") ?"),D=l.getUseSoftTabs();var M=function(H,U){var q=H.match(F);if(q){var N=q[1].length,K=q[0].length;!A(H,N,K)&&q[0][K-1]==" "&&K--,_.removeInLine(U,N,K)}},L=g+" ",T=function(H,U){(!m||/\S/.test(H))&&(A(H,b,b)?_.insertInLine({row:U,column:b},L):_.insertInLine({row:U,column:b},g))},w=function(H,U){return F.test(H)},A=function(H,U,q){for(var N=0;U--&&H.charAt(U)==" ";)N++;if(N%S!=0)return!1;for(var N=0;H.charAt(q++)==" ";)N++;return S>2?N%S!=S-1:N%S==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,C=this.blockComment.end,F=new RegExp("^(\\s*)(?:"+s.escapeRegExp(g)+")"),E=new RegExp("(?:"+s.escapeRegExp(C)+")\\s*$"),T=function(I,$){w(I,$)||(!m||/\S/.test(I))&&(_.insertInLine({row:$,column:I.length},C),_.insertInLine({row:$,column:b},g))},M=function(I,$){var k;(k=I.match(E))&&_.removeInLine($,I.length-k[0].length,I.length),(k=I.match(F))&&_.removeInLine($,k[1].length,k[0].length)},w=function(I,$){if(F.test(I))return!0;for(var k=l.getTokens($),H=0;H<k.length;H++)if(k[H].type==="comment")return!0}}function R(I){for(var $=r;$<=d;$++)I(_.getLine($),$)}var x=1/0;R(function(I,$){var k=I.search(/\S/);k!==-1?(k<b&&(b=k),y&&!w(I,$)&&(y=!1)):x>I.length&&(x=I.length)}),b==1/0&&(b=x,m=!1,y=!1),D&&b%S!=0&&(b=Math.floor(b/S)*S),R(y?M:T)},this.toggleBlockComment=function(f,l,r,d){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var m=new o(l,d.row,d.column),y=m.getCurrentToken(),b=l.selection,S=l.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var C,F;y&&/comment/.test(y.type);){var E=y.value.indexOf(_.start);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;C=new i(T,M,T,M+_.start.length);break}y=m.stepBackward()}for(var m=new o(l,d.row,d.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var E=y.value.indexOf(_.end);if(E!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+E;F=new i(T,M,T,M+_.end.length);break}y=m.stepForward()}F&&l.remove(F),C&&(l.remove(C),D=C.start.row,g=-_.start.length)}else g=_.start.length,D=r.start.row,l.insert(r.end,_.end),l.insert(r.start,_.start);S.start.row==D&&(S.start.column+=g),S.end.row==D&&(S.end.column+=g),l.selection.fromOrientedRange(S)}},this.getNextLineIndent=function(f,l,r){return this.$getIndent(l)},this.checkOutdent=function(f,l,r){return!1},this.autoOutdent=function(f,l,r){},this.$getIndent=function(f){return f.match(/^\s*/)[0]},this.createWorker=function(f){return null},this.createModeDelegates=function(f){this.$embeds=[],this.$modes={};for(var l in f)if(f[l]){var r=f[l],d=r.prototype.$id,_=h.$modes[d];_||(h.$modes[d]=_=new r),h.$modes[l]||(h.$modes[l]=_),this.$embeds.push(l),this.$modes[l]=_}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(S){(function(D){var g=m[S],C=D[g];D[m[S]]=function(){return this.$delegator(g,arguments,C)}})(b)},b=this,l=0;l<m.length;l++)y(l)},this.$delegator=function(f,l,r){var d=l[0]||"start";if(typeof d!="string"){if(Array.isArray(d[2])){var _=d[2][d[2].length-1],m=this.$modes[_];if(m)return m[f].apply(m,[d[1]].concat([].slice.call(l,1)))}d=d[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var b=d.split(this.$embeds[y]);if(!b[0]&&b[1]){l[0]=b[1];var m=this.$modes[this.$embeds[y]];return m[f].apply(m,l)}}var S=r.apply(this,l);return r?S:void 0},this.transformAction=function(f,l,r,d,_){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][l]){var b=m[y][l].apply(this,arguments);if(b)return b}}},this.getKeywords=function(f){if(!this.completionKeywords){var l=this.$tokenizer.rules,r=[];for(var d in l)for(var _=l[d],m=0,y=_.length;m<y;m++)if(typeof _[m].token=="string")/keyword|support|storage/.test(_[m].token)&&r.push(_[m].regex);else if(typeof _[m].token=="object"){for(var b=0,S=_[m].token.length;b<S;b++)if(/keyword|support|storage/.test(_[m].token[b])){var d=_[m].regex.match(/\(.+?\)/g)[b];r.push(d.substr(1,d.length-2))}}this.completionKeywords=r}return f?r.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(f,l,r,d){var _=this.$keywordList||this.$createKeywordList();return _.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(c.prototype),t.Mode=c});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function h(a,p){throw console.log("Invalid Delta:",a),"Invalid Delta: "+p}function v(a,p){return p.row>=0&&p.row<a.length&&p.column>=0&&p.column<=a[p.row].length}function u(a,p){p.action!="insert"&&p.action!="remove"&&h(p,"delta.action must be 'insert' or 'remove'"),p.lines instanceof Array||h(p,"delta.lines must be an Array"),(!p.start||!p.end)&&h(p,"delta.start/end must be an present");var s=p.start;v(a,p.start)||h(p,"delta.start must be contained in document");var o=p.end;p.action=="remove"&&!v(a,o)&&h(p,"delta.end must contained in document for 'remove' actions");var i=o.row-s.row,c=o.column-(i==0?s.column:0);(i!=p.lines.length-1||p.lines[i].length!=c)&&h(p,"delta.range must match delta lines")}t.applyDelta=function(a,p,s){var o=p.start.row,i=p.start.column,c=a[o]||"";switch(p.action){case"insert":var f=p.lines;if(f.length===1)a[o]=c.substring(0,i)+p.lines[0]+c.substring(i);else{var l=[o,1].concat(p.lines);a.splice.apply(a,l),a[o]=c.substring(0,i)+a[o],a[o+p.lines.length-1]+=c.substring(i)}break;case"remove":var r=p.end.column,d=p.end.row;o===d?a[o]=c.substring(0,i)+c.substring(r):a.splice(o,d-o+1,c.substring(0,i)+a[d].substring(r));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,u=function(){function s(o,i,c){this.$onChange=this.onChange.bind(this),this.attach(o),typeof i!="number"?this.setPosition(i.row,i.column):this.setPosition(i,c)}return s.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},s.prototype.getDocument=function(){return this.document},s.prototype.onChange=function(o){if(!(o.start.row==o.end.row&&o.start.row!=this.row)&&!(o.start.row>this.row)){var i=p(o,{row:this.row,column:this.column},this.$insertRight);this.setPosition(i.row,i.column,!0)}},s.prototype.setPosition=function(o,i,c){var f;if(c?f={row:o,column:i}:f=this.$clipPositionToDocument(o,i),!(this.row==f.row&&this.column==f.column)){var l={row:this.row,column:this.column};this.row=f.row,this.column=f.column,this._signal("change",{old:l,value:f})}},s.prototype.detach=function(){this.document.off("change",this.$onChange)},s.prototype.attach=function(o){this.document=o||this.document,this.document.on("change",this.$onChange)},s.prototype.$clipPositionToDocument=function(o,i){var c={};return o>=this.document.getLength()?(c.row=Math.max(0,this.document.getLength()-1),c.column=this.document.getLine(c.row).length):o<0?(c.row=0,c.column=0):(c.row=o,c.column=Math.min(this.document.getLine(c.row).length,Math.max(0,i))),i<0&&(c.column=0),c},s}();u.prototype.$insertRight=!1,h.implement(u.prototype,v);function a(s,o,i){var c=i?s.column<=o.column:s.column<o.column;return s.row<o.row||s.row==o.row&&c}function p(s,o,i){var c=s.action=="insert",f=(c?1:-1)*(s.end.row-s.start.row),l=(c?1:-1)*(s.end.column-s.start.column),r=s.start,d=c?r:s.end;return a(o,r,i)?{row:o.row,column:o.column}:a(d,o,!i)?{row:o.row+f,column:o.column+(o.row==d.row?l:0)}:{row:r.row,column:r.column}}t.Anchor=u});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./apply_delta").applyDelta,u=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=e("./anchor").Anchor,s=function(){function o(i){this.$lines=[""],i.length===0?this.$lines=[""]:Array.isArray(i)?this.insertMergedLines({row:0,column:0},i):this.insert({row:0,column:0},i)}return o.prototype.setValue=function(i){var c=this.getLength()-1;this.remove(new a(0,0,c,this.getLine(c).length)),this.insert({row:0,column:0},i||"")},o.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},o.prototype.createAnchor=function(i,c){return new p(this,i,c)},o.prototype.$detectNewLine=function(i){var c=i.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=c?c[1]:`
`,this._signal("changeNewLineMode")},o.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},o.prototype.setNewLineMode=function(i){this.$newLineMode!==i&&(this.$newLineMode=i,this._signal("changeNewLineMode"))},o.prototype.getNewLineMode=function(){return this.$newLineMode},o.prototype.isNewLine=function(i){return i==`\r
`||i=="\r"||i==`
`},o.prototype.getLine=function(i){return this.$lines[i]||""},o.prototype.getLines=function(i,c){return this.$lines.slice(i,c+1)},o.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},o.prototype.getLength=function(){return this.$lines.length},o.prototype.getTextRange=function(i){return this.getLinesForRange(i).join(this.getNewLineCharacter())},o.prototype.getLinesForRange=function(i){var c;if(i.start.row===i.end.row)c=[this.getLine(i.start.row).substring(i.start.column,i.end.column)];else{c=this.getLines(i.start.row,i.end.row),c[0]=(c[0]||"").substring(i.start.column);var f=c.length-1;i.end.row-i.start.row==f&&(c[f]=c[f].substring(0,i.end.column))}return c},o.prototype.insertLines=function(i,c){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(i,c)},o.prototype.removeLines=function(i,c){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(i,c)},o.prototype.insertNewLine=function(i){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(i,["",""])},o.prototype.insert=function(i,c){return this.getLength()<=1&&this.$detectNewLine(c),this.insertMergedLines(i,this.$split(c))},o.prototype.insertInLine=function(i,c){var f=this.clippedPos(i.row,i.column),l=this.pos(i.row,i.column+c.length);return this.applyDelta({start:f,end:l,action:"insert",lines:[c]},!0),this.clonePos(l)},o.prototype.clippedPos=function(i,c){var f=this.getLength();i===void 0?i=f:i<0?i=0:i>=f&&(i=f-1,c=void 0);var l=this.getLine(i);return c==null&&(c=l.length),c=Math.min(Math.max(c,0),l.length),{row:i,column:c}},o.prototype.clonePos=function(i){return{row:i.row,column:i.column}},o.prototype.pos=function(i,c){return{row:i,column:c}},o.prototype.$clipPosition=function(i){var c=this.getLength();return i.row>=c?(i.row=Math.max(0,c-1),i.column=this.getLine(c-1).length):(i.row=Math.max(0,i.row),i.column=Math.min(Math.max(i.column,0),this.getLine(i.row).length)),i},o.prototype.insertFullLines=function(i,c){i=Math.min(Math.max(i,0),this.getLength());var f=0;i<this.getLength()?(c=c.concat([""]),f=0):(c=[""].concat(c),i--,f=this.$lines[i].length),this.insertMergedLines({row:i,column:f},c)},o.prototype.insertMergedLines=function(i,c){var f=this.clippedPos(i.row,i.column),l={row:f.row+c.length-1,column:(c.length==1?f.column:0)+c[c.length-1].length};return this.applyDelta({start:f,end:l,action:"insert",lines:c}),this.clonePos(l)},o.prototype.remove=function(i){var c=this.clippedPos(i.start.row,i.start.column),f=this.clippedPos(i.end.row,i.end.column);return this.applyDelta({start:c,end:f,action:"remove",lines:this.getLinesForRange({start:c,end:f})}),this.clonePos(c)},o.prototype.removeInLine=function(i,c,f){var l=this.clippedPos(i,c),r=this.clippedPos(i,f);return this.applyDelta({start:l,end:r,action:"remove",lines:this.getLinesForRange({start:l,end:r})},!0),this.clonePos(l)},o.prototype.removeFullLines=function(i,c){i=Math.min(Math.max(0,i),this.getLength()-1),c=Math.min(Math.max(0,c),this.getLength()-1);var f=c==this.getLength()-1&&i>0,l=c<this.getLength()-1,r=f?i-1:i,d=f?this.getLine(r).length:0,_=l?c+1:c,m=l?0:this.getLine(_).length,y=new a(r,d,_,m),b=this.$lines.slice(i,c+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),b},o.prototype.removeNewLine=function(i){i<this.getLength()-1&&i>=0&&this.applyDelta({start:this.pos(i,this.getLine(i).length),end:this.pos(i+1,0),action:"remove",lines:["",""]})},o.prototype.replace=function(i,c){if(i instanceof a||(i=a.fromPoints(i.start,i.end)),c.length===0&&i.isEmpty())return i.start;if(c==this.getTextRange(i))return i.end;this.remove(i);var f;return c?f=this.insert(i.start,c):f=i.start,f},o.prototype.applyDeltas=function(i){for(var c=0;c<i.length;c++)this.applyDelta(i[c])},o.prototype.revertDeltas=function(i){for(var c=i.length-1;c>=0;c--)this.revertDelta(i[c])},o.prototype.applyDelta=function(i,c){var f=i.action=="insert";(f?i.lines.length<=1&&!i.lines[0]:!a.comparePoints(i.start,i.end))||(f&&i.lines.length>2e4?this.$splitAndapplyLargeDelta(i,2e4):(v(this.$lines,i,c),this._signal("change",i)))},o.prototype.$safeApplyDelta=function(i){var c=this.$lines.length;(i.action=="remove"&&i.start.row<c&&i.end.row<c||i.action=="insert"&&i.start.row<=c)&&this.applyDelta(i)},o.prototype.$splitAndapplyLargeDelta=function(i,c){for(var f=i.lines,l=f.length-c+1,r=i.start.row,d=i.start.column,_=0,m=0;_<l;_=m){m+=c-1;var y=f.slice(_,m);y.push(""),this.applyDelta({start:this.pos(r+_,d),end:this.pos(r+m,d=0),action:i.action,lines:y},!0)}i.lines=f.slice(_),i.start.row=r+_,i.start.column=d,this.applyDelta(i,!0)},o.prototype.revertDelta=function(i){this.$safeApplyDelta({start:this.clonePos(i.start),end:this.clonePos(i.end),action:i.action=="insert"?"remove":"insert",lines:i.lines.slice()})},o.prototype.indexToPosition=function(i,c){for(var f=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,r=c||0,d=f.length;r<d;r++)if(i-=f[r].length+l,i<0)return{row:r,column:i+f[r].length+l};return{row:d-1,column:i+f[d-1].length+l}},o.prototype.positionToIndex=function(i,c){for(var f=this.$lines||this.getAllLines(),l=this.getNewLineCharacter().length,r=0,d=Math.min(i.row,f.length),_=c||0;_<d;++_)r+=f[_].length+l;return r+i.column},o.prototype.$split=function(i){return i.split(/\r\n|\r|\n/)},o}();s.prototype.$autoNewLine="",s.prototype.$newLineMode="auto",h.implement(s.prototype,u),t.Document=s});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,u=function(){function a(p,s){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=p;var o=this;this.$worker=function(){if(o.running){for(var i=new Date,c=o.currentLine,f=-1,l=o.doc,r=c;o.lines[c];)c++;var d=l.getLength(),_=0;for(o.running=!1;c<d;){o.$tokenizeRow(c),f=c;do c++;while(o.lines[c]);if(_++,_%5===0&&new Date-i>20){o.running=setTimeout(o.$worker,20);break}}o.currentLine=c,f==-1&&(f=c),r<=f&&o.fireUpdateEvent(r,f)}}}return a.prototype.setTokenizer=function(p){this.tokenizer=p,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(p){this.doc=p,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(p,s){var o={first:p,last:s};this._signal("update",{data:o})},a.prototype.start=function(p){this.currentLine=Math.min(p||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(p){var s=p.start.row,o=p.end.row-s;if(o===0)this.lines[s]=null;else if(p.action=="remove")this.lines.splice(s,o+1,null),this.states.splice(s,o+1,null);else{var i=Array(o+1);i.unshift(s,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(s,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(p){return this.lines[p]||this.$tokenizeRow(p)},a.prototype.getState=function(p){return this.currentLine==p&&this.$tokenizeRow(p),this.states[p]||"start"},a.prototype.$tokenizeRow=function(p){var s=this.doc.getLine(p),o=this.states[p-1],i=this.tokenizer.getLineTokens(s,o,p);return this.states[p]+""!=i.state+""?(this.states[p]=i.state,this.lines[p+1]=null,this.currentLine>p+1&&(this.currentLine=p+1)):this.currentLine==p&&(this.currentLine=p+1),this.lines[p]=i.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();h.implement(u.prototype,v),t.BackgroundTokenizer=u});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var h=e("./lib/lang"),v=e("./range").Range,u=function(){function a(p,s,o){o===void 0&&(o="text"),this.setRegexp(p),this.clazz=s,this.type=o}return a.prototype.setRegexp=function(p){this.regExp+""!=p+""&&(this.regExp=p,this.cache=[])},a.prototype.update=function(p,s,o,i){if(this.regExp)for(var c=i.firstRow,f=i.lastRow,l={},r=c;r<=f;r++){var d=this.cache[r];d==null&&(d=h.getMatchOffsets(o.getLine(r),this.regExp),d.length>this.MAX_RANGES&&(d=d.slice(0,this.MAX_RANGES)),d=d.map(function(b){return new v(r,b.offset,r,b.offset+b.length)}),this.cache[r]=d.length?d:"");for(var _=d.length;_--;){var m=d[_].toScreenRange(o),y=m.toString();l[y]||(l[y]=!0,s.drawSingleLineMarker(p,m,this.clazz,i))}}},a}();u.prototype.MAX_RANGES=500,t.SearchHighlight=u});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,C,F){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),C===!1||!this.lastDeltas){this.lastDeltas=[];var E=this.$undoStack.length;E>this.$undoDepth-1&&this.$undoStack.splice(0,E-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,C){this.selections.push({value:g,rev:C||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,C){C==null&&(C=this.$rev+1);for(var F=this.$undoStack,E=F.length;E--;){var T=F[E][0];if(T.id<=g)break;T.id<C&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,C){for(var F=this.selections,E=F.length;E--;){var T=F[E];if(T.rev<g)return C&&(T=F[E+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,C){C==null&&(C=this.$rev+1);for(var F=this.$undoStack,E=null,T=0,M=F.length;M--;){var w=F[M][0];if(w.id<C&&!E&&(E=M+1),w.id<=g){T=M+1;break}}return F.slice(T,E)},D.prototype.getChangedRanges=function(g,C){C==null&&(C=this.$rev+1)},D.prototype.getChangedLines=function(g,C){C==null&&(C=this.$rev+1)},D.prototype.undo=function(g,C){this.lastDeltas=null;var F=this.$undoStack;if(v(F,F.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var E=F.pop(),T=null;return E&&(T=g.undoChanges(E,C),this.$redoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,C){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var F=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);S(this.$redoStack,F),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var E=this.$redoStack.pop(),T=null;return E&&(T=g.redoChanges(E,C),this.$undoStack.push(E),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,C=g[g.length-1],F=C&&C[0].id||0;this.$redoStackBaseRev=F,this.$rev=F},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?c(g):c(this.$undoStack)+`
---
`+c(this.$redoStack)},D}();h.prototype.hasUndo=h.prototype.canUndo,h.prototype.hasRedo=h.prototype.canRedo,h.prototype.isClean=h.prototype.isAtBookmark,h.prototype.markClean=h.prototype.bookmark;function v(D,g){for(var C=g;C--;){var F=D[C];if(F&&!F[0].ignore){for(;C<g-1;){var E=r(D[C],D[C+1]);D[C]=E[0],D[C+1]=E[1],C++}return!0}}}var u=e("./range").Range,a=u.comparePoints,p=u.comparePoints;function s(D){var g=D.action=="insert",C=D.start,F=D.end,E=(F.row-C.row)*(g?1:-1),T=(F.column-C.column)*(g?1:-1);g&&(F=C);for(var M in this.marks){var w=this.marks[M],L=p(w,C);if(!(L<0)){if(L===0&&g)if(w.bias==1)L=1;else{w.bias==-1;continue}var A=g?L:p(w,F);if(A>0){w.row+=E,w.column+=w.row==F.row?T:0;continue}!g&&A<=0&&(w.row=C.row,w.column=C.column,A===0&&(w.bias=1))}}}function o(D){return{row:D.row,column:D.column}}function i(D){return{start:o(D.start),end:o(D.end),action:D.action,lines:D.lines.slice()}}function c(D){if(D=D||this,Array.isArray(D))return D.map(c).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(f).join(`
`):g=f(D.value)),D.start&&(g+=f(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function f(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function l(D,g){var C=D.action=="insert",F=g.action=="insert";if(C&&F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(C&&!F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;else if(!C&&F)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(!C&&!F)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;return[g,D]}function r(D,g){for(var C=D.length;C--;)for(var F=0;F<g.length;F++)if(!l(D[C],g[F])){for(;C<D.length;){for(;F--;)l(g[F],D[C]);F=g.length,C++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function d(D,g){var C=D.action=="insert",F=g.action=="insert";if(C&&F)a(D.start,g.start)<0?_(g,D,1):_(D,g,1);else if(C&&!F)a(D.start,g.end)>=0?_(D,g,-1):(a(D.start,g.start)<=0||_(D,u.fromPoints(g.start,D.start),-1),_(g,D,1));else if(!C&&F)a(g.start,D.end)>=0?_(g,D,-1):(a(g.start,D.start)<=0||_(g,u.fromPoints(D.start,g.start),-1),_(D,g,1));else if(!C&&!F)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else{var E,T;return a(D.start,g.start)<0&&(E=D,D=y(D,g.start)),a(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!E&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,E,T].filter(Boolean)}return[g,D]}function _(D,g,C){m(D.start,g.start,g.end,C),m(D.end,g.start,g.end,C)}function m(D,g,C,F){D.row==(F==1?g:C).row&&(D.column+=F*(C.column-g.column)),D.row+=F*(C.row-g.row)}function y(D,g){var C=D.lines,F=D.end;D.end=o(g);var E=D.end.row-D.start.row,T=C.splice(E,C.length),M=E?g.column:g.column-D.start.column;C.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:o(g),end:F,lines:T,action:D.action};return w}function b(D,g){g=i(g);for(var C=D.length;C--;){for(var F=D[C],E=0;E<F.length;E++){var T=F[E],M=d(T,g);g=M[0],M.length!=2&&(M[2]?(F.splice(E+1,1,M[1],M[2]),E++):M[1]||(F.splice(E,1),E--))}F.length||D.splice(C,1)}return D}function S(D,g){for(var C=0;C<g.length;C++)for(var F=g[C],E=0;E<F.length;E++)b(D,F[E])}t.UndoManager=h});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("../range").Range,v=function(){function u(a,p){this.foldData=a,Array.isArray(p)?this.folds=p:p=this.folds=[p];var s=p[p.length-1];this.range=new h(p[0].start.row,p[0].start.column,s.end.row,s.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(o){o.setFoldLine(this)},this)}return u.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(p){p.start.row+=a,p.end.row+=a})},u.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(p,s){return-p.range.compareEnd(s.start.row,s.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},u.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},u.prototype.walk=function(a,p,s){var o=0,i=this.folds,c,f,l,r=!0;p==null&&(p=this.end.row,s=this.end.column);for(var d=0;d<i.length;d++){if(c=i[d],f=c.range.compareStart(p,s),f==-1){a(null,p,s,o,r);return}if(l=a(null,c.start.row,c.start.column,o,r),l=!l&&a(c.placeholder,c.start.row,c.start.column,o),l||f===0)return;r=!c.sameRow,o=c.end.column}a(null,p,s,o,r)},u.prototype.getNextFoldTo=function(a,p){for(var s,o,i=0;i<this.folds.length;i++){if(s=this.folds[i],o=s.range.compareEnd(a,p),o==-1)return{fold:s,kind:"after"};if(o===0)return{fold:s,kind:"inside"}}return null},u.prototype.addRemoveChars=function(a,p,s){var o=this.getNextFoldTo(a,p),i,c;if(o){if(i=o.fold,o.kind=="inside"&&i.start.column!=p&&i.start.row!=a)window.console&&window.console.log(a,p,i);else if(i.start.row==a){c=this.folds;var f=c.indexOf(i);for(f===0&&(this.start.column+=s),f;f<c.length;f++){if(i=c[f],i.start.column+=s,!i.sameRow)return;i.end.column+=s}this.end.column+=s}}},u.prototype.split=function(a,p){var s=this.getNextFoldTo(a,p);if(!s||s.kind=="inside")return null;var o=s.fold,i=this.folds,c=this.foldData,f=i.indexOf(o),l=i[f-1];this.end.row=l.end.row,this.end.column=l.end.column,i=i.splice(f,i.length-f);var r=new u(c,i);return c.splice(c.indexOf(this)+1,0,r),r},u.prototype.merge=function(a){for(var p=a.folds,s=0;s<p.length;s++)this.addFold(p[s]);var o=this.foldData;o.splice(o.indexOf(a),1)},u.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(p){a.push("  "+p.toString())}),a.push("]"),a.join(`
`)},u.prototype.idxToPosition=function(a){for(var p=0,s=0;s<this.folds.length;s++){var o=this.folds[s];if(a-=o.start.column-p,a<0)return{row:o.start.row,column:o.start.column+a};if(a-=o.placeholder.length,a<0)return o.start;p=o.end.column}return{row:this.end.row,column:this.end.column+a}},u}();t.FoldLine=v});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("./range").Range,v=h.comparePoints,u=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(p,s,o){for(var i=this.ranges,c=o||0;c<i.length;c++){var f=i[c],l=v(p,f.end);if(!(l>0)){var r=v(p,f.start);return l===0?s&&r!==0?-c-2:c:r>0||r===0&&!s?c:-c-1}}return-c-1},a.prototype.add=function(p){var s=!p.isEmpty(),o=this.pointIndex(p.start,s);o<0&&(o=-o-1);var i=this.pointIndex(p.end,s,o);return i<0?i=-i-1:i++,this.ranges.splice(o,i-o,p)},a.prototype.addList=function(p){for(var s=[],o=p.length;o--;)s.push.apply(s,this.add(p[o]));return s},a.prototype.substractPoint=function(p){var s=this.pointIndex(p);if(s>=0)return this.ranges.splice(s,1)},a.prototype.merge=function(){var p=[],s=this.ranges;s=s.sort(function(l,r){return v(l.start,r.start)});for(var o=s[0],i,c=1;c<s.length;c++){i=o,o=s[c];var f=v(i.end,o.start);f<0||f==0&&!i.isEmpty()&&!o.isEmpty()||(v(i.end,o.end)<0&&(i.end.row=o.end.row,i.end.column=o.end.column),s.splice(c,1),p.push(o),o=i,c--)}return this.ranges=s,p},a.prototype.contains=function(p,s){return this.pointIndex({row:p,column:s})>=0},a.prototype.containsPoint=function(p){return this.pointIndex(p)>=0},a.prototype.rangeAtPoint=function(p){var s=this.pointIndex(p);if(s>=0)return this.ranges[s]},a.prototype.clipRows=function(p,s){var o=this.ranges;if(o[0].start.row>s||o[o.length-1].start.row<p)return[];var i=this.pointIndex({row:p,column:0});i<0&&(i=-i-1);var c=this.pointIndex({row:s,column:0},i);c<0&&(c=-c-1);for(var f=[],l=i;l<c;l++)f.push(o[l]);return f},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(p){for(var s=p.start,o=p.end,i=s.row,c=o.row,f=this.ranges,l=0,r=f.length;l<r;l++){var d=f[l];if(d.end.row>=i)break}if(p.action=="insert")for(var _=c-i,m=-s.column+o.column;l<r;l++){var d=f[l];if(d.start.row>i)break;if(d.start.row==i&&d.start.column>=s.column&&(d.start.column==s.column&&this.$bias<=0||(d.start.column+=m,d.start.row+=_)),d.end.row==i&&d.end.column>=s.column){if(d.end.column==s.column&&this.$bias<0)continue;d.end.column==s.column&&m>0&&l<r-1&&d.end.column>d.start.column&&d.end.column==f[l+1].start.column&&(d.end.column-=m),d.end.column+=m,d.end.row+=_}}else for(var _=i-c,m=s.column-o.column;l<r;l++){var d=f[l];if(d.start.row>c)break;d.end.row<c&&(i<d.end.row||i==d.end.row&&s.column<d.end.column)?(d.end.row=i,d.end.column=s.column):d.end.row==c?d.end.column<=o.column?(_||d.end.column>s.column)&&(d.end.column=s.column,d.end.row=s.row):(d.end.column+=m,d.end.row+=_):d.end.row>c&&(d.end.row+=_),d.start.row<c&&(i<d.start.row||i==d.start.row&&s.column<d.start.column)?(d.start.row=i,d.start.column=s.column):d.start.row==c?d.start.column<=o.column?(_||d.start.column>s.column)&&(d.start.column=s.column,d.start.row=s.row):(d.start.column+=m,d.start.row+=_):d.start.row>c&&(d.start.row+=_)}if(_!=0&&l<r)for(;l<r;l++){var d=f[l];d.start.row+=_,d.end.row+=_}},a}();u.prototype.comparePoints=v,t.RangeList=u});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var i=function(c,f){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(l[d]=r[d])},i(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");i(c,f);function l(){this.constructor=c}c.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}(),v=e("../range_list").RangeList,u=function(i){h(c,i);function c(f,l){var r=i.call(this)||this;return r.foldLine=null,r.placeholder=l,r.range=f,r.start=f.start,r.end=f.end,r.sameRow=f.start.row==f.end.row,r.subFolds=r.ranges=[],r}return c.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},c.prototype.setFoldLine=function(f){this.foldLine=f,this.subFolds.forEach(function(l){l.setFoldLine(f)})},c.prototype.clone=function(){var f=this.range.clone(),l=new c(f,this.placeholder);return this.subFolds.forEach(function(r){l.subFolds.push(r.clone())}),l.collapseChildren=this.collapseChildren,l},c.prototype.addSubFold=function(f){if(!this.range.isEqual(f)){p(f,this.start);for(var m=f.start.row,y=f.start.column,l=0,r=-1;l<this.subFolds.length&&(r=this.subFolds[l].range.compare(m,y),r==1);l++);var d=this.subFolds[l],_=0;if(r==0){if(d.range.containsRange(f))return d.addSubFold(f);_=1}for(var m=f.range.end.row,y=f.range.end.column,b=l,r=-1;b<this.subFolds.length&&(r=this.subFolds[b].range.compare(m,y),r==1);b++);r==0&&b++;for(var S=this.subFolds.splice(l,b-l,f),D=r==0?S.length-1:S.length,g=_;g<D;g++)f.addSubFold(S[g]);return f.setFoldLine(this.foldLine),f}},c.prototype.restoreRange=function(f){return o(f,this.start)},c}(v);function a(i,c){i.row-=c.row,i.row==0&&(i.column-=c.column)}function p(i,c){a(i.start,c),a(i.end,c)}function s(i,c){i.row==0&&(i.column+=c.column),i.row+=c.row}function o(i,c){s(i.start,c),s(i.end,c)}t.Fold=u});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var h=e("../range").Range,v=e("./fold_line").FoldLine,u=e("./fold").Fold,a=e("../token_iterator").TokenIterator,p=e("../mouse/mouse_event").MouseEvent;function s(){this.getFoldAt=function(o,i,c){var f=this.getFoldLine(o);if(!f)return null;for(var l=f.folds,r=0;r<l.length;r++){var d=l[r].range;if(d.contains(o,i)){if(c==1&&d.isEnd(o,i)&&!d.isEmpty())continue;if(c==-1&&d.isStart(o,i)&&!d.isEmpty())continue;return l[r]}}},this.getFoldsInRange=function(o){var i=o.start,c=o.end,f=this.$foldData,l=[];i.column+=1,c.column-=1;for(var r=0;r<f.length;r++){var d=f[r].range.compareRange(o);if(d!=2){if(d==-2)break;for(var _=f[r].folds,m=0;m<_.length;m++){var y=_[m];if(d=y.range.compareRange(o),d==-2)break;if(d==2)continue;if(d==42)break;l.push(y)}}}return i.column-=1,c.column+=1,l},this.getFoldsInRangeList=function(o){if(Array.isArray(o)){var i=[];o.forEach(function(c){i=i.concat(this.getFoldsInRange(c))},this)}else var i=this.getFoldsInRange(o);return i},this.getAllFolds=function(){for(var o=[],i=this.$foldData,c=0;c<i.length;c++)for(var f=0;f<i[c].folds.length;f++)o.push(i[c].folds[f]);return o},this.getFoldStringAt=function(o,i,c,f){if(f=f||this.getFoldLine(o),!f)return null;for(var l={end:{column:0}},r,d,_=0;_<f.folds.length;_++){d=f.folds[_];var m=d.range.compareEnd(o,i);if(m==-1){r=this.getLine(d.start.row).substring(l.end.column,d.start.column);break}else if(m===0)return null;l=d}return r||(r=this.getLine(d.start.row).substring(l.end.column)),c==-1?r.substring(0,i-l.end.column):c==1?r.substring(i-l.end.column):r},this.getFoldLine=function(o,i){var c=this.$foldData,f=0;for(i&&(f=c.indexOf(i)),f==-1&&(f=0),f;f<c.length;f++){var l=c[f];if(l.start.row<=o&&l.end.row>=o)return l;if(l.end.row>o)return null}return null},this.getNextFoldLine=function(o,i){var c=this.$foldData,f=0;for(i&&(f=c.indexOf(i)),f==-1&&(f=0),f;f<c.length;f++){var l=c[f];if(l.end.row>=o)return l}return null},this.getFoldedRowCount=function(o,i){for(var c=this.$foldData,f=i-o+1,l=0;l<c.length;l++){var r=c[l],d=r.end.row,_=r.start.row;if(d>=i){_<i&&(_>=o?f-=i-_:f=0);break}else d>=o&&(_>=o?f-=d-_:f-=d-o+1)}return f},this.$addFoldLine=function(o){return this.$foldData.push(o),this.$foldData.sort(function(i,c){return i.start.row-c.start.row}),o},this.addFold=function(o,i){var c=this.$foldData,f=!1,l;o instanceof u?l=o:(l=new u(i,o),l.collapseChildren=i.collapseChildren),this.$clipRangeToDocument(l.range);var r=l.start.row,d=l.start.column,_=l.end.row,m=l.end.column,y=this.getFoldAt(r,d,1),b=this.getFoldAt(_,m,-1);if(y&&b==y)return y.addSubFold(l);y&&!y.range.isStart(r,d)&&this.removeFold(y),b&&!b.range.isEnd(_,m)&&this.removeFold(b);var S=this.getFoldsInRange(l.range);S.length>0&&(this.removeFolds(S),l.collapseChildren||S.forEach(function(F){l.addSubFold(F)}));for(var D=0;D<c.length;D++){var g=c[D];if(_==g.start.row){g.addFold(l),f=!0;break}else if(r==g.end.row){if(g.addFold(l),f=!0,!l.sameRow){var C=c[D+1];if(C&&C.start.row==_){g.merge(C);break}}break}else if(_<=g.start.row)break}return f||(g=this.$addFoldLine(new v(this.$foldData,l))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:l,action:"add"}),l},this.addFolds=function(o){o.forEach(function(i){this.addFold(i)},this)},this.removeFold=function(o){var i=o.foldLine,c=i.start.row,f=i.end.row,l=this.$foldData,r=i.folds;if(r.length==1)l.splice(l.indexOf(i),1);else if(i.range.isEnd(o.end.row,o.end.column))r.pop(),i.end.row=r[r.length-1].end.row,i.end.column=r[r.length-1].end.column;else if(i.range.isStart(o.start.row,o.start.column))r.shift(),i.start.row=r[0].start.row,i.start.column=r[0].start.column;else if(o.sameRow)r.splice(r.indexOf(o),1);else{var d=i.split(o.start.row,o.start.column);r=d.folds,r.shift(),d.start.row=r[0].start.row,d.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(c,f):this.$updateRowLengthCache(c,f)),this.$modified=!0,this._signal("changeFold",{data:o,action:"remove"})},this.removeFolds=function(o){for(var i=[],c=0;c<o.length;c++)i.push(o[c]);i.forEach(function(f){this.removeFold(f)},this),this.$modified=!0},this.expandFold=function(o){this.removeFold(o),o.subFolds.forEach(function(i){o.restoreRange(i),this.addFold(i)},this),o.collapseChildren>0&&this.foldAll(o.start.row+1,o.end.row,o.collapseChildren-1),o.subFolds=[]},this.expandFolds=function(o){o.forEach(function(i){this.expandFold(i)},this)},this.unfold=function(o,i){var c,f;if(o==null)c=new h(0,0,this.getLength(),0),i==null&&(i=!0);else if(typeof o=="number")c=new h(o,0,o,this.getLine(o).length);else if("row"in o)c=h.fromPoints(o,o);else{if(Array.isArray(o))return f=[],o.forEach(function(r){f=f.concat(this.unfold(r))},this),f;c=o}f=this.getFoldsInRangeList(c);for(var l=f;f.length==1&&h.comparePoints(f[0].start,c.start)<0&&h.comparePoints(f[0].end,c.end)>0;)this.expandFolds(f),f=this.getFoldsInRangeList(c);if(i!=!1?this.removeFolds(f):this.expandFolds(f),l.length)return l},this.isRowFolded=function(o,i){return!!this.getFoldLine(o,i)},this.getRowFoldEnd=function(o,i){var c=this.getFoldLine(o,i);return c?c.end.row:o},this.getRowFoldStart=function(o,i){var c=this.getFoldLine(o,i);return c?c.start.row:o},this.getFoldDisplayLine=function(o,i,c,f,l){f==null&&(f=o.start.row),l==null&&(l=0),i==null&&(i=o.end.row),c==null&&(c=this.getLine(i).length);var r=this.doc,d="";return o.walk(function(_,m,y,b){if(!(m<f)){if(m==f){if(y<l)return;b=Math.max(l,b)}_!=null?d+=_:d+=r.getLine(m).substring(b,y)}},i,c),d},this.getDisplayLine=function(o,i,c,f){var l=this.getFoldLine(o);if(l)return this.getFoldDisplayLine(l,o,i,c,f);var r;return r=this.doc.getLine(o),r.substring(f||0,i||r.length)},this.$cloneFoldData=function(){var o=[];return o=this.$foldData.map(function(i){var c=i.folds.map(function(f){return f.clone()});return new v(o,c)}),o},this.toggleFold=function(o){var i=this.selection,c=i.getRange(),f,l;if(c.isEmpty()){var r=c.start;if(f=this.getFoldAt(r.row,r.column),f){this.expandFold(f);return}else(l=this.findMatchingBracket(r))?c.comparePoint(l)==1?c.end=l:(c.start=l,c.start.column++,c.end.column--):(l=this.findMatchingBracket({row:r.row,column:r.column+1}))?(c.comparePoint(l)==1?c.end=l:c.start=l,c.start.column++):c=this.getCommentFoldRange(r.row,r.column)||c}else{var d=this.getFoldsInRange(c);if(o&&d.length){this.expandFolds(d);return}else d.length==1&&(f=d[0])}if(f||(f=this.getFoldAt(c.start.row,c.start.column)),f&&f.range.toString()==c.toString()){this.expandFold(f);return}var _="...";if(!c.isMultiLine()){if(_=this.getTextRange(c),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,c)},this.getCommentFoldRange=function(o,i,c){var f=new a(this,o,i),l=f.getCurrentToken(),r=l&&l.type;if(l&&/^comment|string/.test(r)){r=r.match(/comment|string/)[0],r=="comment"&&(r+="|doc-start|\\.doc");var d=new RegExp(r),_=new h;if(c!=1){do l=f.stepBackward();while(l&&d.test(l.type)&&!/^comment.end/.test(l.type));l=f.stepForward()}if(_.start.row=f.getCurrentTokenRow(),_.start.column=f.getCurrentTokenColumn()+(/^comment.start/.test(l.type)?l.value.length:2),f=new a(this,o,i),c!=-1){var m=-1;do if(l=f.stepForward(),m==-1){var y=this.getState(f.$row);d.test(y)||(m=f.$row)}else if(f.$row>m)break;while(l&&d.test(l.type)&&!/^comment.start/.test(l.type));l=f.stepBackward()}else l=f.getCurrentToken();return _.end.row=f.getCurrentTokenRow(),_.end.column=f.getCurrentTokenColumn(),/^comment.end/.test(l.type)||(_.end.column+=l.value.length-2),_}},this.foldAll=function(o,i,c,f){c==null&&(c=1e5);var l=this.foldWidgets;if(l){i=i||this.getLength(),o=o||0;for(var r=o;r<i;r++)if(l[r]==null&&(l[r]=this.getFoldWidget(r)),l[r]=="start"&&!(f&&!f(r))){var d=this.getFoldWidgetRange(r);d&&d.isMultiLine()&&d.end.row<=i&&d.start.row>=o&&(r=d.end.row,d.collapseChildren=c,this.addFold("...",d))}}},this.foldToLevel=function(o){for(this.foldAll();o-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var o=this;this.foldAll(null,null,null,function(i){for(var c=o.getTokens(i),f=0;f<c.length;f++){var l=c[f];if(!(l.type=="text"&&/^\s+$/.test(l.value)))return!!/comment/.test(l.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(o){if(!this.$foldStyles[o])throw new Error("invalid fold style: "+o+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=o){this.$foldStyle=o,o=="manual"&&this.unfold();var i=this.$foldMode;this.$setFolding(null),this.$setFolding(i)}},this.$setFolding=function(o){if(this.$foldMode!=o){if(this.$foldMode=o,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!o||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=o.getFoldWidget.bind(o,this,this.$foldStyle),this.getFoldWidgetRange=o.getFoldWidgetRange.bind(o,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(o,i){var c=this.foldWidgets;if(!c||i&&c[o])return{};for(var f=o-1,l;f>=0;){var r=c[f];if(r==null&&(r=c[f]=this.getFoldWidget(f)),r=="start"){var d=this.getFoldWidgetRange(f);if(l||(l=d),d&&d.end.row>=o)break}f--}return{range:f!==-1&&d,firstRange:l}},this.onFoldWidgetClick=function(o,i){i instanceof p&&(i=i.domEvent);var c={children:i.shiftKey,all:i.ctrlKey||i.metaKey,siblings:i.altKey},f=this.$toggleFoldWidget(o,c);if(!f){var l=i.target||i.srcElement;l&&/ace_fold-widget/.test(l.className)&&(l.className+=" ace_invalid")}},this.$toggleFoldWidget=function(o,i){if(this.getFoldWidget){var c=this.getFoldWidget(o),f=this.getLine(o),l=c==="end"?-1:1,r=this.getFoldAt(o,l===-1?0:f.length,l);if(r)return i.children||i.all?this.removeFold(r):this.expandFold(r),r;var d=this.getFoldWidgetRange(o,!0);if(d&&!d.isMultiLine()&&(r=this.getFoldAt(d.start.row,d.start.column,1),r&&d.isEqual(r.range)))return this.removeFold(r),r;if(i.siblings){var _=this.getParentFoldRangeData(o);if(_.range)var m=_.range.start.row+1,y=_.range.end.row;this.foldAll(m,y,i.all?1e4:0)}else i.children?(y=d?d.end.row:this.getLength(),this.foldAll(o+1,y,i.all?1e4:0)):d&&(i.all&&(d.collapseChildren=1e4),this.addFold("...",d));return d}},this.toggleFoldWidget=function(o){var i=this.selection.getCursor().row;i=this.getRowFoldStart(i);var c=this.$toggleFoldWidget(i,{});if(!c){var f=this.getParentFoldRangeData(i,!0);if(c=f.range||f.firstRange,c){i=c.start.row;var l=this.getFoldAt(i,this.getLine(i).length,1);l?this.removeFold(l):this.addFold("...",c)}}},this.updateFoldWidgets=function(o){var i=o.start.row,c=o.end.row-i;if(c===0)this.foldWidgets[i]=null;else if(o.action=="remove")this.foldWidgets.splice(i,c+1,null);else{var f=Array(c+1);f.unshift(i,1),this.foldWidgets.splice.apply(this.foldWidgets,f)}},this.tokenizerUpdateFoldWidgets=function(o){var i=o.data;i.first!=i.last&&this.foldWidgets.length>i.first&&this.foldWidgets.splice(i.first,this.foldWidgets.length)}}t.Folding=s});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var h=e("../token_iterator").TokenIterator,v=e("../range").Range;function u(){this.findMatchingBracket=function(a,p){if(a.column==0)return null;var s=p||this.getLine(a.row).charAt(a.column-1);if(s=="")return null;var o=s.match(/([\(\[\{])|([\)\]\}])/);return o?o[1]?this.$findClosingBracket(o[1],a):this.$findOpeningBracket(o[2],a):null},this.getBracketRange=function(a){var p=this.getLine(a.row),s=!0,o,i=p.charAt(a.column-1),c=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(c||(i=p.charAt(a.column),a={row:a.row,column:a.column+1},c=i&&i.match(/([\(\[\{])|([\)\]\}])/),s=!1),!c)return null;if(c[1]){var f=this.$findClosingBracket(c[1],a);if(!f)return null;o=v.fromPoints(a,f),s||(o.end.column++,o.start.column--),o.cursor=o.end}else{var f=this.$findOpeningBracket(c[2],a);if(!f)return null;o=v.fromPoints(f,a),s||(o.start.column++,o.end.column--),o.cursor=o.start}return o},this.getMatchingBracketRanges=function(a,p){var s=this.getLine(a.row),o=/([\(\[\{])|([\)\]\}])/,i=!p&&s.charAt(a.column-1),c=i&&i.match(o);if(c||(i=(p===void 0||p)&&s.charAt(a.column),a={row:a.row,column:a.column+1},c=i&&i.match(o)),!c)return null;var f=new v(a.row,a.column-1,a.row,a.column),l=c[1]?this.$findClosingBracket(c[1],a):this.$findOpeningBracket(c[2],a);if(!l)return[f];var r=new v(l.row,l.column,l.row,l.column+1);return[f,r]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,p,s){var o=this.$brackets[a],i=1,c=new h(this,p.row,p.column),f=c.getCurrentToken();if(f||(f=c.stepForward()),!!f){s||(s=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var l=p.column-c.getCurrentTokenColumn()-2,r=f.value;;){for(;l>=0;){var d=r.charAt(l);if(d==o){if(i-=1,i==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else d==a&&(i+=1);l-=1}do f=c.stepBackward();while(f&&!s.test(f.type));if(f==null)break;r=f.value,l=r.length-1}return null}},this.$findClosingBracket=function(a,p,s){var o=this.$brackets[a],i=1,c=new h(this,p.row,p.column),f=c.getCurrentToken();if(f||(f=c.stepForward()),!!f){s||(s=new RegExp("(\\.?"+f.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var l=p.column-c.getCurrentTokenColumn();;){for(var r=f.value,d=r.length;l<d;){var _=r.charAt(l);if(_==o){if(i-=1,i==0)return{row:c.getCurrentTokenRow(),column:l+c.getCurrentTokenColumn()}}else _==a&&(i+=1);l+=1}do f=c.stepForward();while(f&&!s.test(f.type));if(f==null)break;l=0}return null}},this.getMatchingTags=function(a){var p=new h(this,a.row,a.column),s=this.$findTagName(p);if(s){var o=p.stepBackward();return o.value==="<"?this.$findClosingTag(p,s):this.$findOpeningTag(p,s)}},this.$findTagName=function(a){var p=a.getCurrentToken(),s=!1,o=!1;if(p&&p.type.indexOf("tag-name")===-1)do o?p=a.stepBackward():p=a.stepForward(),p&&(p.value==="/>"?o=!0:p.type.indexOf("tag-name")!==-1&&(s=!0));while(p&&!s);return p},this.$findClosingTag=function(a,p){var s,o=p.value,i=p.value,c=0,f=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);p=a.stepForward();var l=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length),r=!1;do if(s=p,p=a.stepForward(),p){if(p.value===">"&&!r){var d=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);r=!0}if(p.type.indexOf("tag-name")!==-1){if(o=p.value,i===o){if(s.value==="<")c++;else if(s.value==="</"&&(c--,c<0)){a.stepBackward();var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);p=a.stepForward();var m=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),p&&p.value===">")var y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(i===o&&p.value==="/>"&&(c--,c<0))var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),m=_,y=m,d=new v(l.end.row,l.end.column,l.end.row,l.end.column+1)}while(p&&c>=0);if(f&&d&&_&&y&&l&&m)return{openTag:new v(f.start.row,f.start.column,d.end.row,d.end.column),closeTag:new v(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:l,closeTagName:m}},this.$findOpeningTag=function(a,p){var s=a.getCurrentToken(),o=p.value,i=0,c=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),l=f+2,r=new v(c,f,c,l);a.stepForward();var d=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),!(!p||p.value!==">")){var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(p=s,c=a.getCurrentTokenRow(),f=a.getCurrentTokenColumn(),l=f+p.value.length,s=a.stepBackward(),p){if(p.type.indexOf("tag-name")!==-1){if(o===p.value)if(s.value==="<"){if(i++,i>0){var m=new v(c,f,c,l),y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do p=a.stepForward();while(p&&p.value!==">");var b=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else s.value==="</"&&i--}else if(p.value==="/>"){for(var S=0,D=s;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===o){i--;break}else if(D.value==="<")break;D=a.stepBackward(),S++}for(var g=0;g<S;g++)a.stepForward()}}while(s&&i<=0);if(y&&b&&r&&_&&m&&d)return{openTag:new v(y.start.row,y.start.column,b.end.row,b.end.column),closeTag:new v(r.start.row,r.start.column,_.end.row,_.end.column),openTagName:m,closeTagName:d}}}}t.BracketMatch=u});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/lang"),u=e("./bidihandler").BidiHandler,a=e("./config"),p=e("./lib/event_emitter").EventEmitter,s=e("./selection").Selection,o=e("./mode/text").Mode,i=e("./range").Range,c=e("./document").Document,f=e("./background_tokenizer").BackgroundTokenizer,l=e("./search_highlight").SearchHighlight,r=e("./undomanager").UndoManager,d=function(){function E(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++E.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new f(new o().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(L){w._signal("tokenizerUpdate",L)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new c(T)),this.setDocument(T),this.selection=new s(this),this.$bidiHandler=new u(this),a.resetOptions(this),this.setMode(M),a._signal("session",this),this.destroyed=!1}return E.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},E.prototype.getDocument=function(){return this.doc},E.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},E.prototype.$getRowCacheIndex=function(T,M){for(var w=0,L=T.length-1;w<=L;){var A=w+L>>1,R=T[A];if(M>R)w=A+1;else if(M<R)L=A-1;else return A}return w-1},E.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},E.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},E.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},E.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},E.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new r;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new E(T.value);return T.folds.forEach(function(L){w.addFold("...",i.fromPoints(L.start,L.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},E.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},E.prototype.toString=function(){return this.doc.getValue()},E.prototype.getSelection=function(){return this.selection},E.prototype.getState=function(T){return this.bgTokenizer.getState(T)},E.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},E.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),L,A=0;if(M==null){var R=w.length-1;A=this.getLine(T).length}else for(var R=0;R<w.length&&(A+=w[R].value.length,!(A>=M));R++);return L=w[R],L?(L.index=R,L.start=A-L.value.length,L):null},E.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=v.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},E.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},E.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},E.prototype.getTabString=function(){return this.getUseSoftTabs()?v.stringRepeat(" ",this.getTabSize()):"	"},E.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},E.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},E.prototype.setTabSize=function(T){this.setOption("tabSize",T)},E.prototype.getTabSize=function(){return this.$tabSize},E.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},E.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},E.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},E.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},E.prototype.getOverwrite=function(){return this.$overwrite},E.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},E.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},E.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},E.prototype.getBreakpoints=function(){return this.$breakpoints},E.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},E.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},E.prototype.addMarker=function(T,M,w,L){var A=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!L,id:A};return L?(this.$frontMarkers[A]=R,this._signal("changeFrontMarker")):(this.$backMarkers[A]=R,this._signal("changeBackMarker")),A},E.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},E.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},E.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},E.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new l(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},E.prototype.highlightLines=function(T,M,w,L){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var A=new i(T,0,M,1/0);return A.id=this.addMarker(A,w,"fullLine",L),A},E.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},E.prototype.getAnnotations=function(){return this.$annotations||[]},E.prototype.clearAnnotations=function(){this.setAnnotations([])},E.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},E.prototype.getWordRange=function(T,M){var w=this.getLine(T),L=!1;if(M>0&&(L=!!w.charAt(M-1).match(this.tokenRe)),L||(L=!!w.charAt(M).match(this.tokenRe)),L)var A=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var A=/\s/;else var A=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(A));R++}for(var x=M;x<w.length&&w.charAt(x).match(A);)x++;return new i(T,R,T,x)},E.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),L=this.getLine(w.end.row);L.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},E.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},E.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},E.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},E.prototype.getUseWorker=function(){return this.$useWorker},E.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},E.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,L=w.path}else L=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new o),this.$modes[L]&&!w){this.$onChangeMode(this.$modes[L]),M&&M();return}this.$modeId=L,a.loadModule(["mode",L],function(A){if(this.$modeId!==L)return M&&M();this.$modes[L]&&!w?this.$onChangeMode(this.$modes[L]):A&&A.Mode&&(A=new A.Mode(w),w||(this.$modes[L]=A,A.$id=L),this.$onChangeMode(A)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},E.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var L=T.getTokenizer();if(L.on!==void 0){var A=this.onReloadTokenizer.bind(this);L.on("update",A)}this.bgTokenizer.setTokenizer(L),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},E.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},E.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){a.warn("Could not load worker",T),this.$worker=null}},E.prototype.getMode=function(){return this.$mode},E.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},E.prototype.getScrollTop=function(){return this.$scrollTop},E.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},E.prototype.getScrollLeft=function(){return this.$scrollLeft},E.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},E.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},E.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,L=0,A=0,R=this.$foldData[A],x=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>x){if($=R.end.row+1,$>=I)break;R=this.$foldData[A++],x=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>L&&(L=w[$])}this.screenWidth=L}},E.prototype.getLine=function(T){return this.doc.getLine(T)},E.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},E.prototype.getLength=function(){return this.doc.getLength()},E.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},E.prototype.insert=function(T,M){return this.doc.insert(T,M)},E.prototype.remove=function(T){return this.doc.remove(T)},E.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},E.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var L=T[w];L.action=="insert"||L.action=="remove"?this.doc.revertDelta(L):L.folds&&this.addFolds(L.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},E.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var L=T[w];(L.action=="insert"||L.action=="remove")&&this.doc.$safeApplyDelta(L)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},E.prototype.setUndoSelect=function(T){this.$undoSelect=T},E.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var L,A,R=0;R<T.length;R++){var x=T[R];if(x.start){if(!L){w(x)?L=i.fromPoints(x.start,x.end):L=i.fromPoints(x.start,x.start);continue}w(x)?(A=x.start,L.compare(A.row,A.column)==-1&&L.setStart(A),A=x.end,L.compare(A.row,A.column)==1&&L.setEnd(A)):(A=x.start,L.compare(A.row,A.column)==-1&&(L=i.fromPoints(x.start,x.start)))}}return L},E.prototype.replace=function(T,M){return this.doc.replace(T,M)},E.prototype.moveText=function(T,M,w){var L=this.getTextRange(T),A=this.getFoldsInRange(T),R=i.fromPoints(M,M);if(!w){this.remove(T);var x=T.start.row-T.end.row,I=x?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),x&&R.start.row>=T.end.row&&(R.start.row+=x,R.end.row+=x)}if(R.end=this.insert(R.start,L),A.length){var $=T.start,k=R.start,x=k.row-$.row,I=k.column-$.column;this.addFolds(A.map(function(q){return q=q.clone(),q.start.row==$.row&&(q.start.column+=I),q.end.row==$.row&&(q.end.column+=I),q.start.row+=x,q.end.row+=x,q}))}return R},E.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var L=T;L<=M;L++)this.doc.insertInLine({row:L,column:0},w)},E.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new i(0,0,0,0),L=this.getTabSize(),A=M.start.row;A<=M.end.row;++A){var R=this.getLine(A);w.start.row=A,w.end.row=A;for(var x=0;x<L&&R.charAt(x)==" ";++x);x<L&&R.charAt(x)=="	"?(w.start.column=x,w.end.column=x+1):(w.start.column=0,w.end.column=x),this.remove(w)}},E.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var L=this.getRowFoldStart(T+w);if(L<0)return 0;var A=L-T}else if(w>0){var L=this.getRowFoldEnd(M+w);if(L>this.doc.getLength()-1)return 0;var A=L-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var A=M-T+1}var R=new i(T,0,M,Number.MAX_VALUE),x=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=A,$.end.row+=A,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+A,I),x.length&&this.addFolds(x),A},E.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},E.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},E.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},E.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},E.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},E.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},E.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},E.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},E.prototype.getUseWrapMode=function(){return this.$useWrapMode},E.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},E.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var L=this.$constrainWrapLimit(T,w.min,w.max);return L!=this.$wrapLimit&&L>1?(this.$wrapLimit=L,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},E.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},E.prototype.getWrapLimit=function(){return this.$wrapLimit},E.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},E.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},E.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,L=T.start,A=T.end,R=L.row,x=A.row,I=x-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var k=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var H=this.getFoldLine(A.row),U=0;if(H){H.addRemoveChars(A.row,A.column,L.column-A.column),H.shiftRow(-I);var q=this.getFoldLine(R);q&&q!==H&&(q.merge(H),H=q),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=A.row&&H.shiftRow(-I)}x=R}else{var N=Array(I);N.unshift(R,0);var K=M?this.$wrapData:this.$rowLengthCache;K.splice.apply(K,N);var k=this.$foldData,H=this.getFoldLine(R),U=0;if(H){var O=H.range.compareInside(L.row,L.column);O==0?(H=H.split(L.row,L.column),H&&(H.shiftRow(I),H.addRemoveChars(x,0,A.column-L.column))):O==-1&&(H.addRemoveChars(R,0,A.column-L.column),H.shiftRow(I)),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=R&&H.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var H=this.getFoldLine(R);H&&H.addRemoveChars(R,L.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,x):this.$updateRowLengthCache(R,x),$},E.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},E.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),L=this.getTabSize(),A=this.$wrapData,R=this.$wrapLimit,x,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(x=[],I.walk(function(k,H,U,q){var N;if(k!=null){N=this.$getDisplayTokens(k,x.length),N[0]=y;for(var K=1;K<N.length;K++)N[K]=b}else N=this.$getDisplayTokens(w[H].substring(q,U),x.length);x=x.concat(N)}.bind(this),I.end.row,w[I.end.row].length+1),A[I.start.row]=this.$computeWrapSplits(x,R,L),$=I.end.row+1):(x=this.$getDisplayTokens(w[$]),A[$]=this.$computeWrapSplits(x,R,L),$++)},E.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var L=[],A=T.length,R=0,x=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,k=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function H(){var O=0;if(k===0)return O;if($)for(var B=0;B<T.length;B++){var W=T[B];if(W==D)O+=1;else if(W==g)O+=w;else{if(W==C)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,k)}function U(O){for(var B=O-R,W=R;W<O;W++){var P=T[W];(P===12||P===2)&&(B-=1)}L.length||(q=H(),L.indent=q),x+=B,L.push(x),R=O}for(var q=0;A-R>M-q;){var N=R+M-q;if(T[N-1]>=D&&T[N]>=D){U(N);continue}if(T[N]==y||T[N]==b){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){U(N);continue}for(N=R+M,N;N<T.length&&T[N]==b;N++);if(N==T.length)break;U(N);continue}for(var K=Math.max(N-(M-(M>>2)),R-1);N>K&&T[N]<y;)N--;if(I){for(;N>K&&T[N]<y;)N--;for(;N>K&&T[N]==S;)N--}else for(;N>K&&T[N]<D;)N--;if(N>K){U(++N);continue}N=R+M,T[N]==m&&N--,U(N-q)}return L},E.prototype.$getDisplayTokens=function(T,M){var w=[],L;M=M||0;for(var A=0;A<T.length;A++){var R=T.charCodeAt(A);if(R==9){L=this.getScreenTabSize(w.length+M),w.push(g);for(var x=1;x<L;x++)w.push(C)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(S):R>=4352&&F(R)?w.push(_,m):w.push(_)}return w},E.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var L,A;for(A=0;A<T.length&&(L=T.charCodeAt(A),L==9?w+=this.getScreenTabSize(w):L>=4352&&F(L)?w+=2:w+=1,!(w>M));A++);return[w,A]},E.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},E.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},E.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},E.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},E.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},E.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},E.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},E.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},E.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},E.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},E.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var L,A=0,R=0,x,I=0,$=0,k=this.$screenRowCache,H=this.$getRowCacheIndex(k,T),U=k.length;if(U&&H>=0)var I=k[H],A=this.$docRowCache[H],q=T>k[U-1];else var q=!U;for(var N=this.getLength()-1,K=this.getNextFoldLine(A),O=K?K.start.row:1/0;I<=T&&($=this.getRowLength(A),!(I+$>T||A>=N));)I+=$,A++,A>O&&(A=K.end.row+1,K=this.getNextFoldLine(A,K),O=K?K.start.row:1/0),q&&(this.$docRowCache.push(A),this.$screenRowCache.push(I));if(K&&K.start.row<=A)L=this.getFoldDisplayLine(K),A=K.start.row;else{if(I+$<=T||A>N)return{row:N,column:this.getLine(N).length};L=this.getLine(A),K=null}var B=0,W=Math.floor(T-I);if(this.$useWrapMode){var P=this.$wrapData[A];P&&(x=P[W],W>0&&P.length&&(B=P.indent,R=P[W-1]||P[P.length-1],L=L.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+W,A,W)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(L,M-B)[1],this.$useWrapMode&&R>=x&&(R=x-1),K?K.idxToPosition(R):{row:A,column:R}},E.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var L=0,A=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var x,I=0,$=this.$docRowCache,k=this.$getRowCacheIndex($,T),H=$.length;if(H&&k>=0)var I=$[k],L=this.$screenRowCache[k],U=T>$[H-1];else var U=!H;for(var q=this.getNextFoldLine(I),N=q?q.start.row:1/0;I<T;){if(I>=N){if(x=q.end.row+1,x>T)break;q=this.getNextFoldLine(x,q),N=q?q.start.row:1/0}else x=I+1;L+=this.getRowLength(I),I=x,U&&(this.$docRowCache.push(I),this.$screenRowCache.push(L))}var K="";q&&I>=N?(K=this.getFoldDisplayLine(q,T,M),A=q.start.row):(K=this.getLine(T).substring(0,M),A=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[A];if(B){for(var W=0;K.length>=B[W];)L++,W++;K=K.substring(B[W-1]||0,K.length),O=W>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(L+=this.lineWidgets[I].rowsAbove),{row:L,column:O+this.$getStringScreenWidth(K)[0]}},E.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},E.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},E.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var A=this.$wrapData.length,R=0,L=0,M=this.$foldData[L++],x=M?M.start.row:1/0;R<A;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>x&&(R=M.end.row+1,M=this.$foldData[L++],x=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,L=0;L<w.length;L++)M=w[L],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},E.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,L){if(w===0)return[0,0];w||(w=1/0),L=L||0;var A,R;for(R=0;R<M.length&&(A=M.charAt(R),A==="	"?L+=this.getScreenTabSize(L):L+=T.getCharacterWidth(A),!(L>w));R++);return[L,R]})},E.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},E}();d.$uid=0,d.prototype.$modes=a.$modes,d.prototype.getValue=d.prototype.toString,d.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},d.prototype.$overwrite=!1,d.prototype.$mode=null,d.prototype.$modeId=null,d.prototype.$scrollTop=0,d.prototype.$scrollLeft=0,d.prototype.$wrapLimit=80,d.prototype.$useWrapMode=!1,d.prototype.$wrapLimitRange={min:null,max:null},d.prototype.lineWidgets=null,d.prototype.isFullWidth=F,h.implement(d.prototype,p);var _=1,m=2,y=3,b=4,S=9,D=10,g=11,C=12;function F(E){return E<4352?!1:E>=4352&&E<=4447||E>=4515&&E<=4519||E>=4602&&E<=4607||E>=9001&&E<=9002||E>=11904&&E<=11929||E>=11931&&E<=12019||E>=12032&&E<=12245||E>=12272&&E<=12283||E>=12288&&E<=12350||E>=12353&&E<=12438||E>=12441&&E<=12543||E>=12549&&E<=12589||E>=12593&&E<=12686||E>=12688&&E<=12730||E>=12736&&E<=12771||E>=12784&&E<=12830||E>=12832&&E<=12871||E>=12880&&E<=13054||E>=13056&&E<=19903||E>=19968&&E<=42124||E>=42128&&E<=42182||E>=43360&&E<=43388||E>=44032&&E<=55203||E>=55216&&E<=55238||E>=55243&&E<=55291||E>=63744&&E<=64255||E>=65040&&E<=65049||E>=65072&&E<=65106||E>=65108&&E<=65126||E>=65128&&E<=65131||E>=65281&&E<=65376||E>=65504&&E<=65510}e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),a.defineOptions(d.prototype,"session",{wrap:{set:function(E){if(!E||E=="off"?E=!1:E=="free"?E=!0:E=="printMargin"?E=-1:typeof E=="string"&&(E=parseInt(E,10)||!1),this.$wrap!=E)if(this.$wrap=E,!E)this.setUseWrapMode(!1);else{var T=typeof E=="number"?E:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(E){E=E=="auto"?this.$mode.type!="text":E!="text",E!=this.$wrapAsCode&&(this.$wrapAsCode=E,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(E){this.$useWorker=E,this.$stopWorker(),E&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(E){E=parseInt(E),E>0&&this.$tabSize!==E&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=E,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(E){this.setFoldStyle(E)},handlesSet:!0},overwrite:{set:function(E){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(E){this.doc.setNewLineMode(E)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(E){this.setMode(E)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=d});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var h=e("./lib/lang"),v=e("./lib/oop"),u=e("./range").Range,a=function(){function s(){this.$options={}}return s.prototype.set=function(o){return v.mixin(this.$options,o),this},s.prototype.getOptions=function(){return h.copyObject(this.$options)},s.prototype.setOptions=function(o){this.$options=o},s.prototype.find=function(o){var i=this.$options,c=this.$matchIterator(o,i);if(!c)return!1;var f=null;return c.forEach(function(l,r,d,_){return f=new u(l,r,d,_),r==_&&i.start&&i.start.start&&i.skipCurrent!=!1&&f.isEqual(i.start)?(f=null,!1):!0}),f},s.prototype.findAll=function(o){var i=this.$options;if(!i.needle)return[];this.$assembleRegExp(i);var c=i.range,f=c?o.getLines(c.start.row,c.end.row):o.doc.getAllLines(),l=[],r=i.re;if(i.$isMultiLine){var d=r.length,_=f.length-d,m;e:for(var y=r.offset||0;y<=_;y++){for(var b=0;b<d;b++)if(f[y+b].search(r[b])==-1)continue e;var S=f[y],D=f[y+d-1],g=S.length-S.match(r[0])[0].length,C=D.match(r[d-1])[0].length;m&&m.end.row===y&&m.end.column>g||(l.push(m=new u(y,g,y+d-1,C)),d>2&&(y=y+d-2))}}else for(var F=0;F<f.length;F++)for(var E=h.getMatchOffsets(f[F],r),b=0;b<E.length;b++){var T=E[b];l.push(new u(F,T.offset,F,T.offset+T.length))}if(c){for(var M=c.start.column,w=c.end.column,F=0,b=l.length-1;F<b&&l[F].start.column<M&&l[F].start.row==0;)F++;for(var L=c.end.row-c.start.row;F<b&&l[b].end.column>w&&l[b].end.row==L;)b--;for(l=l.slice(F,b+1),F=0,b=l.length;F<b;F++)l[F].start.row+=c.start.row,l[F].end.row+=c.start.row}return l},s.prototype.replace=function(o,i){var c=this.$options,f=this.$assembleRegExp(c);if(c.$isMultiLine)return i;if(f){var l=f.exec(o);if(!l||l[0].length!=o.length)return null;if(i=o.replace(f,i),c.preserveCase){i=i.split("");for(var r=Math.min(o.length,o.length);r--;){var d=o[r];d&&d.toLowerCase()!=d?i[r]=i[r].toUpperCase():i[r]=i[r].toLowerCase()}i=i.join("")}return i}},s.prototype.$assembleRegExp=function(o,i){if(o.needle instanceof RegExp)return o.re=o.needle;var c=o.needle;if(!o.needle)return o.re=!1;o.regExp||(c=h.escapeRegExp(c));var f=o.caseSensitive?"gm":"gmi";try{new RegExp(c,"u"),o.$supportsUnicodeFlag=!0,f+="u"}catch{o.$supportsUnicodeFlag=!1}if(o.wholeWord&&(c=p(c,o)),o.$isMultiLine=!i&&/[\n\r]/.test(c),o.$isMultiLine)return o.re=this.$assembleMultilineRegExp(c,f);try{var l=new RegExp(c,f)}catch{l=!1}return o.re=l},s.prototype.$assembleMultilineRegExp=function(o,i){for(var c=o.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),f=[],l=0;l<c.length;l++)try{f.push(new RegExp(c[l],i))}catch{return!1}return f},s.prototype.$matchIterator=function(o,i){var c=this.$assembleRegExp(i);if(!c)return!1;var f=i.backwards==!0,l=i.skipCurrent!=!1,r=c.unicode,d=i.range,_=i.start;_||(_=d?d[f?"end":"start"]:o.selection.getRange()),_.start&&(_=_[l!=f?"end":"start"]);var m=d?d.start.row:0,y=d?d.end.row:o.getLength()-1;if(f)var b=function(g){var C=_.row;if(!D(C,_.column,g)){for(C--;C>=m;C--)if(D(C,Number.MAX_VALUE,g))return;if(i.wrap!=!1){for(C=y,m=_.row;C>=m;C--)if(D(C,Number.MAX_VALUE,g))return}}};else var b=function(C){var F=_.row;if(!D(F,_.column,C)){for(F=F+1;F<=y;F++)if(D(F,0,C))return;if(i.wrap!=!1){for(F=m,y=_.row;F<=y;F++)if(D(F,0,C))return}}};if(i.$isMultiLine)var S=c.length,D=function(g,C,F){var E=f?g-S+1:g;if(!(E<0||E+S>o.getLength())){var T=o.getLine(E),M=T.search(c[0]);if(!(!f&&M<C||M===-1)){for(var w=1;w<S;w++)if(T=o.getLine(E+w),T.search(c[w])==-1)return;var L=T.match(c[S-1])[0].length;if(!(f&&L>C)&&F(E,M,E+S-1,L))return!0}}};else if(f)var D=function(C,F,E){var T=o.getLine(C),M=[],w,L=0;for(c.lastIndex=0;w=c.exec(T);){var A=w[0].length;if(L=w.index,!A){if(L>=T.length)break;c.lastIndex=L+=h.skipEmptyMatch(T,L,r)}if(w.index+A>F)break;M.push(w.index,A)}for(var R=M.length-1;R>=0;R-=2){var x=M[R-1],A=M[R];if(E(C,x,C,x+A))return!0}};else var D=function(C,F,E){var T=o.getLine(C),M,w;for(c.lastIndex=F;w=c.exec(T);){var L=w[0].length;if(M=w.index,E(C,M,C,M+L))return!0;if(!L&&(c.lastIndex=M+=h.skipEmptyMatch(T,M,r),M>=T.length))return!1}};return{forEach:b}},s}();function p(s,o){var i=h.supportsLookbehind();function c(d,_){_===void 0&&(_=!0);var m=i&&o.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(d)||o.regExp?i&&o.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var f=Array.from(s),l=f[0],r=f[f.length-1];return c(l)+s+c(r,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var i=function(c,f){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,r){l.__proto__=r}||function(l,r){for(var d in r)Object.prototype.hasOwnProperty.call(r,d)&&(l[d]=r[d])},i(c,f)};return function(c,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");i(c,f);function l(){this.constructor=c}c.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)}}(),v=e("../lib/keys"),u=e("../lib/useragent"),a=v.KEY_MODS,p=function(){function i(c,f){this.$init(c,f,!1)}return i.prototype.$init=function(c,f,l){this.platform=f||(u.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(c),this.$singleCommand=l},i.prototype.addCommand=function(c){this.commands[c.name]&&this.removeCommand(c),this.commands[c.name]=c,c.bindKey&&this._buildKeyHash(c)},i.prototype.removeCommand=function(c,f){var l=c&&(typeof c=="string"?c:c.name);c=this.commands[l],f||delete this.commands[l];var r=this.commandKeyBinding;for(var d in r){var _=r[d];if(_==c)delete r[d];else if(Array.isArray(_)){var m=_.indexOf(c);m!=-1&&(_.splice(m,1),_.length==1&&(r[d]=_[0]))}}},i.prototype.bindKey=function(c,f,l){if(typeof c=="object"&&c&&(l==null&&(l=c.position),c=c[this.platform]),!!c){if(typeof f=="function")return this.addCommand({exec:f,bindKey:c,name:f.name||c});c.split("|").forEach(function(r){var d="";if(r.indexOf(" ")!=-1){var _=r.split(/\s+/);r=_.pop(),_.forEach(function(b){var S=this.parseKeys(b),D=a[S.hashId]+S.key;d+=(d?" ":"")+D,this._addCommandToBinding(d,"chainKeys")},this),d+=" "}var m=this.parseKeys(r),y=a[m.hashId]+m.key;this._addCommandToBinding(d+y,f,l)},this)}},i.prototype._addCommandToBinding=function(c,f,l){var r=this.commandKeyBinding,d;if(!f)delete r[c];else if(!r[c]||this.$singleCommand)r[c]=f;else{Array.isArray(r[c])?(d=r[c].indexOf(f))!=-1&&r[c].splice(d,1):r[c]=[r[c]],typeof l!="number"&&(l=s(f));var _=r[c];for(d=0;d<_.length;d++){var m=_[d],y=s(m);if(y>l)break}_.splice(d,0,f)}},i.prototype.addCommands=function(c){c&&Object.keys(c).forEach(function(f){var l=c[f];if(l){if(typeof l=="string")return this.bindKey(l,f);typeof l=="function"&&(l={exec:l}),typeof l=="object"&&(l.name||(l.name=f),this.addCommand(l))}},this)},i.prototype.removeCommands=function(c){Object.keys(c).forEach(function(f){this.removeCommand(c[f])},this)},i.prototype.bindKeys=function(c){Object.keys(c).forEach(function(f){this.bindKey(f,c[f])},this)},i.prototype._buildKeyHash=function(c){this.bindKey(c.bindKey,c)},i.prototype.parseKeys=function(c){var f=c.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),l=f.pop(),r=v[l];if(v.FUNCTION_KEYS[r])l=v.FUNCTION_KEYS[r].toLowerCase();else if(f.length){if(f.length==1&&f[0]=="shift")return{key:l.toUpperCase(),hashId:-1}}else return{key:l,hashId:-1};for(var d=0,_=f.length;_--;){var m=v.KEY_MODS[f[_]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+f[_]+" in "+c),!1;d|=m}return{key:l,hashId:d}},i.prototype.findKeyCommand=function(c,f){var l=a[c]+f;return this.commandKeyBinding[l]},i.prototype.handleKeyboard=function(c,f,l,r){if(!(r<0)){var d=a[f]+l,_=this.commandKeyBinding[d];return c.$keyChain&&(c.$keyChain+=" "+d,_=this.commandKeyBinding[c.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(c.$keyChain=c.$keyChain||d,{command:"null"}):(c.$keyChain&&((!f||f==4)&&l.length==1?c.$keyChain=c.$keyChain.slice(0,-d.length-1):(f==-1||r>0)&&(c.$keyChain="")),{command:_})}},i.prototype.getStatusText=function(c,f){return f.$keyChain||""},i}();function s(i){return typeof i=="object"&&i.bindKey&&i.bindKey.position||(i.isDefault?-100:0)}var o=function(i){h(c,i);function c(f,l){var r=i.call(this,f,l)||this;return r.$singleCommand=!0,r}return c}(p);o.call=function(i,c,f){p.prototype.$init.call(i,c,f,!0)},p.call=function(i,c,f){p.prototype.$init.call(i,c,f,!1)},t.HashHandler=o,t.MultiHashHandler=p});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var s=function(o,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var l in f)Object.prototype.hasOwnProperty.call(f,l)&&(c[l]=f[l])},s(o,i)};return function(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");s(o,i);function c(){this.constructor=o}o.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}}(),v=e("../lib/oop"),u=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,p=function(s){h(o,s);function o(i,c){var f=s.call(this,c,i)||this;return f.byName=f.commands,f.setDefaultHandler("exec",function(l){return l.args?l.command.exec(l.editor,l.args,l.event,!1):l.command.exec(l.editor,{},l.event,!0)}),f}return o.prototype.exec=function(i,c,f){if(Array.isArray(i)){for(var l=i.length;l--;)if(this.exec(i[l],c,f))return!0;return!1}if(typeof i=="string"&&(i=this.commands[i]),!i||c&&c.$readOnly&&!i.readOnly||this.$checkCommandState!=!1&&i.isAvailable&&!i.isAvailable(c))return!1;var r={editor:c,command:i,args:f};return r.returnValue=this._emit("exec",r),this._signal("afterExec",r),r.returnValue!==!1},o.prototype.toggleRecording=function(i){if(!this.$inReplay)return i&&i._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(c){this.macro.push([c.command,c.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},o.prototype.replay=function(i){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(i);try{this.$inReplay=!0,this.macro.forEach(function(c){typeof c=="string"?this.exec(c,i):this.exec(c[0],i,c[1])},this)}finally{this.$inReplay=!1}}},o.prototype.trimMacro=function(i){return i.map(function(c){return typeof c[0]!="string"&&(c[0]=c[0].name),c[1]||(c=c[0]),c})},o}(u);v.implement(p.prototype,a),t.CommandManager=p});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var h=e("../lib/lang"),v=e("../config"),u=e("../range").Range;function a(s,o){return{win:s,mac:o}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(s){v.loadModule("ace/ext/settings_menu",function(o){o.init(s),s.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(s){v.loadModule("ace/ext/error_marker",function(o){o.showErrorMarker(s,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(s){v.loadModule("ace/ext/error_marker",function(o){o.showErrorMarker(s,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(s){s.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(s){s.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(s,o){typeof o=="number"&&!isNaN(o)&&s.gotoLine(o),s.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(s){s.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(s){s.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(s){s.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(s){s.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(s){s.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(s){s.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(s){s.session.foldAll(),s.session.unfold(s.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(s){s.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(s){s.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(s){s.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(s){s.selection.isEmpty()?s.selection.selectWord():s.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(s){s.selection.isEmpty()?s.selection.selectWord():s.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(s){v.loadModule("ace/ext/searchbox",function(o){o.Search(s)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(s){s.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(s){s.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(s){s.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(s){s.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(s,o){s.navigateUp(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(s){s.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(s){s.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(s){s.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(s,o){s.navigateDown(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(s){s.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(s){s.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(s){s.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(s){s.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(s){s.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(s,o){s.navigateLeft(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(s){s.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(s){s.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(s){s.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(s){s.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(s){s.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(s,o){s.navigateRight(o.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(s){s.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(s){s.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(s){s.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(s){s.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(s){s.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(s){s.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(s){s.renderer.scrollBy(0,-2*s.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(s){s.renderer.scrollBy(0,2*s.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(s){s.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(s){s.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(s){s.commands.toggleRecording(s)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(s){s.commands.replay(s)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(s){s.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(s){s.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(s){s.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(s){},readOnly:!0},{name:"cut",description:"Cut",exec:function(s){var o=s.$copyWithEmptySelection&&s.selection.isEmpty(),i=o?s.selection.getLineRange():s.selection.getRange();s._emit("cut",i),i.isEmpty()||s.session.remove(i),s.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(s,o){s.$handlePaste(o)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(s){s.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(s){s.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(s){s.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(s){s.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(s){s.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(s){s.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(s){s.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(s){v.loadModule("ace/ext/searchbox",function(o){o.Search(s,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(s){s.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(s){s.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(s){s.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(s){s.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(s){s.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(s){s.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(s){s.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(s){s.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(s){if(s.selection.isEmpty())s.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(s){s.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(s){s.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(s){var o=s.selection.getRange();o.start.column=0,s.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(s){var o=s.selection.getRange();o.end.column=Number.MAX_VALUE,s.session.remove(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(s){s.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(s){s.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(s){s.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(s){s.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(s){s.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(s){s.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(s,o){s.insert(o)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(s,o){s.insert(h.stringRepeat(o.text||"",o.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(s){s.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(s){s.transposeLetters()},multiSelectAction:function(s){s.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(s){s.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(s){s.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(s){s.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(s){var o=s.selection.getRange();o.start.column=o.end.column=0,o.end.row++,s.selection.setRange(o,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(s){s.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(s){for(var o=s.selection.isBackwards(),i=o?s.selection.getSelectionLead():s.selection.getSelectionAnchor(),c=o?s.selection.getSelectionAnchor():s.selection.getSelectionLead(),f=s.session.doc.getLine(i.row).length,l=s.session.doc.getTextRange(s.selection.getRange()),r=l.replace(/\n\s*/," ").length,d=s.session.doc.getLine(i.row),_=i.row+1;_<=c.row+1;_++){var m=h.stringTrimLeft(h.stringTrimRight(s.session.doc.getLine(_)));m.length!==0&&(m=" "+m),d+=m}c.row+1<s.session.doc.getLength()-1&&(d+=s.session.doc.getNewLineCharacter()),s.clearSelection(),s.session.doc.replace(new u(i.row,0,c.row+2,0),d),r>0?(s.selection.moveCursorTo(i.row,i.column),s.selection.selectTo(i.row,i.column+r)):(f=s.session.doc.getLine(i.row).length>f?f+1:f,s.selection.moveCursorTo(i.row,f))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(s){var o=s.session.doc.getLength()-1,i=s.session.doc.getLine(o).length,c=s.selection.rangeList.ranges,f=[];c.length<1&&(c=[s.selection.getRange()]);for(var l=0;l<c.length;l++)l==c.length-1&&(c[l].end.row===o&&c[l].end.column===i||f.push(new u(c[l].end.row,c[l].end.column,o,i))),l===0?c[l].start.row===0&&c[l].start.column===0||f.push(new u(0,0,c[l].start.row,c[l].start.column)):f.push(new u(c[l-1].end.row,c[l-1].end.column,c[l].start.row,c[l].start.column));s.exitMultiSelectMode(),s.clearSelection();for(var l=0;l<f.length;l++)s.selection.addRange(f[l],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(s){s.selection.clearSelection(),s.navigateLineEnd(),s.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(s){s.selection.clearSelection();var o=s.getCursorPosition();s.selection.moveTo(o.row-1,Number.MAX_VALUE),s.insert(`
`),o.row===0&&s.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(s){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),s.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(s){s.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(s){s.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)t.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(s){s.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("./lib/dom"),v=function(){function u(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return u.prototype.getRowLength=function(a){var p;return this.lineWidgets?p=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:p=0,!this.$useWrapMode||!this.$wrapData[a]?1+p:this.$wrapData[a].length+1+p},u.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(p){p&&p.rowCount&&!p.hidden&&(a+=p.rowCount)}),a},u.prototype.$onChangeEditor=function(a){this.attach(a.editor)},u.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},u.prototype.detach=function(a){var p=this.editor;if(p){this.editor=null,p.widgetManager=null,p.renderer.off("beforeRender",this.measureWidgets),p.renderer.off("afterRender",this.renderWidgets);var s=this.session.lineWidgets;s&&s.forEach(function(o){o&&o.el&&o.el.parentNode&&(o._inDocument=!1,o.el.parentNode.removeChild(o.el))})}},u.prototype.updateOnFold=function(a,p){var s=p.lineWidgets;if(!(!s||!a.action)){for(var o=a.data,i=o.start.row,c=o.end.row,f=a.action=="add",l=i+1;l<c;l++)s[l]&&(s[l].hidden=f);s[c]&&(f?s[i]?s[c].hidden=f:s[i]=s[c]:(s[i]==s[c]&&(s[i]=void 0),s[c].hidden=f))}},u.prototype.updateOnChange=function(a){var p=this.session.lineWidgets;if(p){var s=a.start.row,o=a.end.row-s;if(o!==0)if(a.action=="remove"){var i=p.splice(s+1,o);!p[s]&&i[i.length-1]&&(p[s]=i.pop()),i.forEach(function(f){f&&this.removeLineWidget(f)},this),this.$updateRows()}else{var c=new Array(o);p[s]&&p[s].column!=null&&a.start.column>p[s].column&&s++,c.unshift(s,0),p.splice.apply(p,c),this.$updateRows()}}},u.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var p=!0;a.forEach(function(s,o){if(s)for(p=!1,s.row=o;s.$oldWidget;)s.$oldWidget.row=o,s=s.$oldWidget}),p&&(this.session.lineWidgets=null)}},u.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var p=this.session.lineWidgets[a.row];return p&&(a.$oldWidget=p,p.el&&p.el.parentNode&&(p.el.parentNode.removeChild(p.el),p._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},u.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var p=this.editor.renderer;a.html&&!a.el&&(a.el=h.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=h.createElement("div"),a.el.textContent=a.text),a.el&&(h.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&h.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",p.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/p.layerConfig.lineHeight);var s=this.session.getFoldAt(a.row,0);if(a.$fold=s,s){var o=this.session.lineWidgets;a.row==s.end.row&&!o[s.start.row]?o[s.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,p),this.onWidgetChanged(a),a},u.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var p=this.session.lineWidgets[a.row];if(p==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;p;){if(p.$oldWidget==a){p.$oldWidget=a.$oldWidget;break}p=p.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},u.prototype.getWidgetsAtRow=function(a){for(var p=this.session.lineWidgets,s=p&&p[a],o=[];s;)o.push(s),s=s.$oldWidget;return o},u.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},u.prototype.measureWidgets=function(a,p){var s=this.session._changedWidgets,o=p.layerConfig;if(!(!s||!s.length)){for(var i=1/0,c=0;c<s.length;c++){var f=s[c];if(!(!f||!f.el)&&f.session==this.session){if(!f._inDocument){if(this.session.lineWidgets[f.row]!=f)continue;f._inDocument=!0,p.container.appendChild(f.el)}f.h=f.el.offsetHeight,f.fixedWidth||(f.w=f.el.offsetWidth,f.screenWidth=Math.ceil(f.w/o.characterWidth));var l=f.h/o.lineHeight;f.coverLine&&(l-=this.session.getRowLineCount(f.row),l<0&&(l=0)),f.rowCount!=l&&(f.rowCount=l,f.row<i&&(i=f.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},u.prototype.renderWidgets=function(a,p){var s=p.layerConfig,o=this.session.lineWidgets;if(o){for(var i=Math.min(this.firstRow,s.firstRow),c=Math.max(this.lastRow,s.lastRow,o.length);i>0&&!o[i];)i--;this.firstRow=s.firstRow,this.lastRow=s.lastRow,p.$cursorLayer.config=s;for(var f=i;f<=c;f++){var l=o[f];if(!(!l||!l.el)){if(l.hidden){l.el.style.top=-100-(l.pixelHeight||0)+"px";continue}l._inDocument||(l._inDocument=!0,p.container.appendChild(l.el));var r=p.$cursorLayer.getPixelPosition({row:f,column:0},!0).top;l.coverLine||(r+=s.lineHeight*this.session.getRowLineCount(l.row)),l.el.style.top=r-s.offset+"px";var d=l.coverGutter?0:p.gutterWidth;l.fixedWidth||(d-=p.scrollLeft),l.el.style.left=d+"px",l.fullWidth&&l.screenWidth&&(l.el.style.minWidth=s.width+2*s.padding+"px"),l.fixedWidth?l.el.style.right=p.scrollBar.getWidth()+"px":l.el.style.right=""}}}},u}();t.LineWidgets=v});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var h=e("../lib/keys"),v=e("../mouse/default_gutter_handler").GutterTooltip,u=function(){function p(s){this.editor=s,this.gutterLayer=s.renderer.$gutterLayer,this.element=s.renderer.$gutter,this.lines=s.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new v(this.editor)}return p.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},p.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},p.prototype.$onGutterKeyDown=function(s){if(this.annotationTooltip.isOpen){s.preventDefault(),s.keyCode===h.escape&&this.annotationTooltip.hideTooltip();return}if(s.target===this.element){if(s.keyCode!=h.enter)return;s.preventDefault();var o=this.editor.getCursorPosition().row;this.editor.isRowVisible(o)||this.editor.scrollToLine(o,!0,!0),setTimeout(function(){var i=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),c=this.$findNearestFoldWidget(i),f=this.$findNearestAnnotation(i);if(!(c===null&&f===null)){if(c===null&&f!==null){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(c!==null&&f===null){this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(f-i)<Math.abs(c-i)){this.activeRowIndex=f,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=c,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(s),setTimeout(function(){this.editor._signal("gutterkeydown",new a(s,this))}.bind(this),10)},p.prototype.$handleGutterKeyboardInteraction=function(s){if(s.keyCode===h.tab){s.preventDefault();return}if(s.keyCode===h.escape){s.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(s.keyCode===h.up){switch(s.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(s.keyCode===h.down){switch(s.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(s.keyCode===h.left){s.preventDefault(),this.$switchLane("annotation");return}if(s.keyCode===h.right){s.preventDefault(),this.$switchLane("fold");return}if(s.keyCode===h.enter||s.keyCode===h.space){switch(s.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var o=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),s),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==o&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(o),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var i=this.lines.cells[this.activeRowIndex].element.childNodes[2],c=i.getBoundingClientRect(),f=this.annotationTooltip.getElement().style;f.left=c.right+"px",f.top=c.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},p.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},p.prototype.$isFoldWidgetVisible=function(s){var o=this.editor.isRowFullyVisible(this.$rowIndexToRow(s)),i=this.$getFoldWidget(s).style.display!=="none";return o&&i},p.prototype.$isAnnotationVisible=function(s){var o=this.editor.isRowFullyVisible(this.$rowIndexToRow(s)),i=this.$getAnnotation(s).style.display!=="none";return o&&i},p.prototype.$getFoldWidget=function(s){var o=this.lines.get(s),i=o.element;return i.childNodes[1]},p.prototype.$getAnnotation=function(s){var o=this.lines.get(s),i=o.element;return i.childNodes[2]},p.prototype.$findNearestFoldWidget=function(s){if(this.$isFoldWidgetVisible(s))return s;for(var o=0;s-o>0||s+o<this.lines.getLength()-1;){if(o++,s-o>=0&&this.$isFoldWidgetVisible(s-o))return s-o;if(s+o<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(s+o))return s+o}return null},p.prototype.$findNearestAnnotation=function(s){if(this.$isAnnotationVisible(s))return s;for(var o=0;s-o>0||s+o<this.lines.getLength()-1;){if(o++,s-o>=0&&this.$isAnnotationVisible(s-o))return s-o;if(s+o<=this.lines.getLength()-1&&this.$isAnnotationVisible(s+o))return s+o}return null},p.prototype.$focusFoldWidget=function(s){if(s!=null){var o=this.$getFoldWidget(s);o.classList.add(this.editor.renderer.keyboardFocusClassName),o.focus()}},p.prototype.$focusAnnotation=function(s){if(s!=null){var o=this.$getAnnotation(s);o.classList.add(this.editor.renderer.keyboardFocusClassName),o.focus()}},p.prototype.$blurFoldWidget=function(s){var o=this.$getFoldWidget(s);o.classList.remove(this.editor.renderer.keyboardFocusClassName),o.blur()},p.prototype.$blurAnnotation=function(s){var o=this.$getAnnotation(s);o.classList.remove(this.editor.renderer.keyboardFocusClassName),o.blur()},p.prototype.$moveFoldWidgetUp=function(){for(var s=this.activeRowIndex;s>0;)if(s--,this.$isFoldWidgetVisible(s)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveFoldWidgetDown=function(){for(var s=this.activeRowIndex;s<this.lines.getLength()-1;)if(s++,this.$isFoldWidgetVisible(s)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=s,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveAnnotationUp=function(){for(var s=this.activeRowIndex;s>0;)if(s--,this.$isAnnotationVisible(s)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$moveAnnotationDown=function(){for(var s=this.activeRowIndex;s<this.lines.getLength()-1;)if(s++,this.$isAnnotationVisible(s)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=s,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$switchLane=function(s){switch(s){case"annotation":if(this.activeLane==="annotation")break;var o=this.$findNearestAnnotation(this.activeRowIndex);if(o==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var i=this.$findNearestFoldWidget(this.activeRowIndex);if(i==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);break}},p.prototype.$rowIndexToRow=function(s){var o=this.lines.get(s);return o?o.row:null},p.prototype.$rowToRowIndex=function(s){for(var o=0;o<this.lines.getLength();o++){var i=this.lines.get(o);if(i.row==s)return o}return null},p}();t.GutterKeyboardHandler=u;var a=function(){function p(s,o){this.gutterKeyboardHandler=o,this.domEvent=s}return p.prototype.getKey=function(){return h.keyCodeToString(this.domEvent.keyCode)},p.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},p.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},p.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},p}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var h=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,L=w&&M[w],A=0;if(L)return L.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&A>=M.length&&(M=void 0),{value:M&&M[A++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},v=e("./lib/oop"),u=e("./lib/dom"),a=e("./lib/lang"),p=e("./lib/useragent"),s=e("./keyboard/textinput").TextInput,o=e("./mouse/mouse_handler").MouseHandler,i=e("./mouse/fold_handler").FoldHandler,c=e("./keyboard/keybinding").KeyBinding,f=e("./edit_session").EditSession,l=e("./search").Search,r=e("./range").Range,d=e("./lib/event_emitter").EventEmitter,_=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),b=e("./token_iterator").TokenIterator,S=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,C=e("./clipboard"),F=e("./lib/keys"),E=function(){function M(w,L,A){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new _(p.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new s(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new o(this),new i(this)),this.keyBinding=new c(this),this.$search=new l().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(x,I){I._$emitInputEvent.schedule(31)}),this.setSession(L||A&&A.session||new f("")),y.resetOptions(this),A&&this.setOptions(A),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var L=this.curOp.command,A=L&&L.scrollIntoView;if(A){switch(A){case"center-animate":A="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),x=this.renderer.layerConfig;(R.start.row>=x.lastRow||R.end.row<=x.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}A=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var L=this.prevOp,A=this.$mergeableCommands,R=L.command&&w.command.name==L.command.name;if(w.command.name=="insertstring"){var x=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(x)||/\s/.test(L.args)),this.mergeNextCommand=!0}else R=R&&A.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:A.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,L){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var A=this;y.loadModule(["keybinding",w],function(R){A.$keybindingId==w&&A.keyBinding.setKeyboardHandler(R&&R.handler),L&&L()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),L&&L()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var L=this.session;if(L){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var A=this.session.getSelection();A.off("changeCursor",this.$onCursorChange),A.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:L}),this.curOp=null,L&&L._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,L){return this.session.doc.setValue(w),L?L==1?this.navigateFileEnd():L==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,L){this.renderer.setTheme(w,L)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||u.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var L=w.session;if(!(!L||L.destroyed)){L.$bracketHighlight&&(L.$bracketHighlight.markerIds.forEach(function(q){L.removeMarker(q)}),L.$bracketHighlight=null);var A=w.getCursorPosition(),R=w.getKeyboardHandler(),x=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=L.getMatchingBracketRanges(A,x);if(!I){var $=new b(L,A.row,A.column),k=$.getCurrentToken();if(k&&/\b(?:tag-open|tag-name)/.test(k.type)){var H=L.getMatchingTags(A);H&&(I=[H.openTagName,H.closeTagName])}}if(!I&&L.$mode.getMatching&&(I=L.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(I)?I.length==1&&(U="ace_error_bracket"):I=[I],I.length==2&&(r.comparePoints(I[0].end,I[1].start)==0?I=[r.fromPoints(I[0].start,I[1].end)]:r.comparePoints(I[0].start,I[1].end)==0&&(I=[r.fromPoints(I[1].start,I[0].end)])),L.$bracketHighlight={ranges:I,markerIds:I.map(function(q){return L.addMarker(q,U,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var L=this.session.$useWrapMode,A=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,A,L),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var L=w.data;this.renderer.updateLines(L.first,L.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),L;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(L=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(L=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(L=!1)),w.$highlightLineMarker&&!L)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&L){var A=new r(L.row,L.column,L.row,1/0);A.id=w.addMarker(A,"ace_active-line","screenLine"),w.$highlightLineMarker=A}else L&&(w.$highlightLineMarker.start.row=L.row,w.$highlightLineMarker.end.row=L.row,w.$highlightLineMarker.start.column=L.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var L=this.session;if(L.$selectionMarker&&L.removeMarker(L.$selectionMarker),L.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var A=this.selection.getRange(),R=this.getSelectionStyle();L.$selectionMarker=L.addMarker(A,"ace_selection",R)}var x=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(x),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,L=this.getSelectionRange();if(!(L.isEmpty()||L.isMultiLine())){var A=L.start.column,R=L.end.column,x=w.getLine(L.start.row),I=x.substring(A,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),k=x.substring(A-1,R+1);if($.test(k))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),L=this.session.doc.getNewLineCharacter(),A=!1;if(!w&&this.$copyWithEmptySelection){A=!0;for(var R=this.selection.getAllRanges(),x=0;x<R.length;x++){var I=R[x];x&&R[x-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+L)}}var $={text:w};return this._signal("copy",$),C.lineMode=A?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,L){var A={text:w,event:L};this.commands.exec("paste",this,A)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var L=w.text,A=L===C.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)A?R.insert({row:this.selection.lead.row,column:0},L):this.insert(L);else if(A)this.selection.rangeList.ranges.forEach(function(U){R.insert({row:U.start.row,column:0},L)});else{var x=L.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=x.length==2&&(!x[0]||!x[1]);if(x.length!=I.length||$)return this.commands.exec("insertstring",this,L);for(var k=I.length;k--;){var H=I[k];H.isEmpty()||R.remove(H),R.insert(H.start,x[k])}}},M.prototype.execCommand=function(w,L){return this.commands.exec(w,this,L)},M.prototype.insert=function(w,L){var A=this.session,R=A.getMode(),x=this.getCursorPosition();if(this.getBehavioursEnabled()&&!L){var I=R.transformAction(A.getState(x.row),"insertion",this,A,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=r.fromPoints(x,x);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();x=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var q=A.getLine(x.row);if(x.column>q.search(/\S|$/)){var k=q.substr(x.column).search(/\S|$/);A.doc.removeInLine(x.row,x.column,x.column+k)}}this.clearSelection();var H=x.column,U=A.getState(x.row),q=A.getLine(x.row),N=R.checkOutdent(U,q,w);if(A.insert(x,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new r(x.row,H+I.selection[0],x.row,H+I.selection[1])):this.selection.setSelectionRange(new r(x.row+I.selection[0],I.selection[1],x.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(A.getDocument().isNewLine(w)){var K=R.getNextLineIndent(U,q.slice(0,x.column),A.getTabString());A.insert({row:x.row+1,column:0},K)}N&&R.autoOutdent(U,A,x.row)}},M.prototype.autoIndent=function(){var w=this.session,L=w.getMode(),A,R;if(this.selection.isEmpty())A=0,R=w.doc.getLength()-1;else{var x=this.getSelectionRange();A=x.start.row,R=x.end.row}for(var I="",$="",k="",H,U,q,N=w.getTabString(),K=A;K<=R;K++)K>0&&(I=w.getState(K-1),$=w.getLine(K-1),k=L.getNextLineIndent(I,$,N)),H=w.getLine(K),U=L.$getIndent(H),k!==U&&(U.length>0&&(q=new r(K,0,K,U.length),w.remove(q)),k.length>0&&w.insert({row:K,column:0},k)),L.autoOutdent(I,w,K)},M.prototype.onTextInput=function(w,L){if(!L)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var A=this.applyComposition.bind(this,w,L);this.selection.rangeCount?this.forEachSelection(A):A(),this.endOperation()},M.prototype.applyComposition=function(w,L){if(L.extendLeft||L.extendRight){var A=this.selection.getRange();A.start.column-=L.extendLeft,A.end.column+=L.extendRight,A.start.column<0&&(A.start.row--,A.start.column+=this.session.getLine(A.start.row).length+1),this.selection.setRange(A),!w&&!A.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),L.restoreStart||L.restoreEnd){var A=this.selection.getRange();A.start.column-=L.restoreStart,A.end.column-=L.restoreEnd,this.selection.setRange(A)}},M.prototype.onCommandKey=function(w,L,A){return this.keyBinding.onCommandKey(w,L,A)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var L=this.getSelectionRange();if(this.getBehavioursEnabled()){var A=this.session,R=A.getState(L.start.row),x=A.getMode().transformAction(R,"deletion",this,A,L);if(L.end.column===0){var I=A.getTextRange(L);if(I[I.length-1]==`
`){var $=A.getLine(L.end.row);/^\s+$/.test($)&&(L.end.column=$.length)}}x&&(L=x)}this.session.remove(L),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,L){this.session.widgetManager||(this.session.widgetManager=new S(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,L)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),L=w.column;if(L!==0){var A=this.session.getLine(w.row),R,x;L<A.length?(R=A.charAt(L)+A.charAt(L-1),x=new r(w.row,L-1,w.row,L+1)):(R=A.charAt(L-1)+A.charAt(L-2),x=new r(w.row,L-2,w.row,L)),this.session.replace(x,R),this.session.selection.moveToPosition(x.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),A=this.session.getTextRange(L);this.session.replace(L,A.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var L=this.getSelectionRange(),A=this.session.getTextRange(L);this.session.replace(L,A.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,L=this.getSelectionRange();if(L.start.row<L.end.row){var A=this.$getSelectedRows();w.indentRows(A.first,A.last,"	");return}else if(L.start.column<L.end.column){var R=w.getTextRange(L);if(!/^\s+$/.test(R)){var A=this.$getSelectedRows();w.indentRows(A.first,A.last,"	");return}}var x=w.getLine(L.start.row),I=L.start,$=w.getTabSize(),k=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var H=$-k%$,U=a.stringRepeat(" ",H);else{for(var H=k%$;x[L.start.column-1]==" "&&H;)L.start.column--,H--;this.selection.setSelectionRange(L),U="	"}return this.insert(U)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),L=this.session,A=[],R=w.first;R<=w.last;R++)A.push(L.getLine(R));A.sort(function($,k){return $.toLowerCase()<k.toLowerCase()?-1:$.toLowerCase()>k.toLowerCase()?1:0});for(var x=new r(0,0,0,0),R=w.first;R<=w.last;R++){var I=L.getLine(R);x.start.row=R,x.end.row=R,x.end.column=I.length,L.replace(x,A[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),L=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,L.first,L.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),L=this.session.getState(w.row),A=this.getSelectionRange();this.session.getMode().toggleBlockComment(L,this.session,A,w)},M.prototype.getNumberAt=function(w,L){var A=/[\-]?[0-9]+(?:\.[0-9]+)?/g;A.lastIndex=0;for(var R=this.session.getLine(w);A.lastIndex<L;){var x=A.exec(R);if(x.index<=L&&x.index+x[0].length>=L){var I={value:x[0],start:x.index,end:x.index+x[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var L=this.selection.getCursor().row,A=this.selection.getCursor().column,R=new r(L,A-1,L,A),x=this.session.getTextRange(R);if(!isNaN(parseFloat(x))&&isFinite(x)){var I=this.getNumberAt(L,A);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,k=I.start+I.value.length-$,H=parseFloat(I.value);H*=Math.pow(10,k),$!==I.end&&A<$?w*=Math.pow(10,I.end-A-1):w*=Math.pow(10,I.end-A),H+=w,H/=Math.pow(10,k);var U=H.toFixed(k),q=new r(L,I.start,L,I.end);this.session.replace(q,U),this.moveCursorTo(L,Math.max(I.start+1,A+U.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,L=this.selection.getCursor().column;this.selection.selectWord();var A=this.getSelectedText(),R=this.selection.getWordRange().start.column,x=A.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=L-R-1;I<0&&(I=0);var $=0,k=0,H=this;A.match(/[A-Za-z0-9_]+/)&&x.forEach(function(Q,G){k=$+Q.length,I>=$&&I<=k&&(A=Q,H.selection.clearSelection(),H.moveCursorTo(w,$+R),H.selection.selectTo(w,k+R)),$=k});for(var U=this.$toggleWordPairs,q,N=0;N<U.length;N++)for(var K=U[N],O=0;O<=1;O++){var B=+!O,W=A.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[O])+")\\s?$","i"));if(W){var P=A.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(W[1])+")($|\\s)","g"));P&&(q=A.replace(new RegExp(a.escapeRegExp(K[O]),"i"),function(Q){var G=K[B];return Q.toUpperCase()==Q?G=G.toUpperCase():Q.charAt(0).toUpperCase()==Q.charAt(0)&&(G=G.substr(0,0)+K[B].charAt(0).toUpperCase()+G.substr(1)),G}),this.insert(q),q="")}}},M.prototype.findLinkAt=function(w,L){var A,R,x=this.session.getLine(w),I=x.split(/((?:https?|ftp):\/\/[\S]+)/),$=L;$<0&&($=0);var k=0,H=0,U;try{for(var q=h(I),N=q.next();!N.done;N=q.next()){var K=N.value;if(H=k+K.length,$>=k&&$<=H&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}k=H}}catch(O){A={error:O}}finally{try{N&&!N.done&&(R=q.return)&&R.call(q)}finally{if(A)throw A.error}}return U},M.prototype.openLink=function(){var w=this.selection.getCursor(),L=this.findLinkAt(w.row,w.column);return L&&window.open(L,"_blank"),L!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,L=this.session,A=w.getRange(),R=w.isBackwards();if(A.isEmpty()){var x=A.start.row;L.duplicateLines(x,x)}else{var I=R?A.start:A.end,$=L.insert(I,L.getTextRange(A));A.start=I,A.end=$,w.setSelectionRange(A,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,L,A){return this.session.moveText(w,L,A)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,L){var A,R,x=this.selection;if(!x.inMultiSelectMode||this.inVirtualSelectionMode){var I=x.toOrientedRange();A=this.$getSelectedRows(I),R=this.session.$moveLines(A.first,A.last,L?0:w),L&&w==-1&&(R=0),I.moveBy(R,0),x.fromOrientedRange(I)}else{var $=x.rangeList.ranges;x.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var k=0,H=0,U=$.length,q=0;q<U;q++){var N=q;$[q].moveBy(k,0),A=this.$getSelectedRows($[q]);for(var K=A.first,O=A.last;++q<U;){H&&$[q].moveBy(H,0);var B=this.$getSelectedRows($[q]);if(L&&B.first!=O)break;if(!L&&B.first>O+1)break;O=B.last}for(q--,k=this.session.$moveLines(K,O,L?0:w),L&&w==-1&&(N=q+1);N<=q;)$[N].moveBy(k,0),N++;L||(k=0),H+=k}x.fromOrientedRange(x.ranges[0]),x.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,L){var A=this.renderer,R=this.renderer.layerConfig,x=w*Math.floor(R.height/R.lineHeight);L===!0?this.selection.$moveSelection(function(){this.moveCursorBy(x,0)}):L===!1&&(this.selection.moveCursorBy(x,0),this.selection.clearSelection());var I=A.scrollTop;A.scrollBy(0,x*R.lineHeight),L!=null&&A.scrollCursorIntoView(null,.5),A.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,L,A,R){this.renderer.scrollToLine(w,L,A,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),L={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(L,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,L){this.selection.moveCursorTo(w,L)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,L){var A=this.getCursorPosition(),R=new b(this.session,A.row,A.column),x=R.getCurrentToken(),I=0;x&&x.type.indexOf("tag-name")!==-1&&(x=R.stepBackward());var $=x||R.stepForward();if($){var k,H=!1,U={},q=A.column-$.start,N,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;q<$.value.length&&!H;q++)if(K[$.value[q]])switch(N=K[$.value[q]]+"."+$.type.replace("rparen","lparen"),isNaN(U[N])&&(U[N]=0),$.value[q]){case"(":case"[":case"{":U[N]++;break;case")":case"]":case"}":U[N]--,U[N]===-1&&(k="bracket",H=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(U[$.value])&&(U[$.value]=0),x.value==="<"&&I>1?U[$.value]++:x.value==="</"&&U[$.value]--,U[$.value]===-1&&(k="tag",H=!0));H||(x=$,I++,$=R.stepForward(),q=0)}while($&&!H);if(k){var O,B;if(k==="bracket")O=this.session.getBracketRange(A),O||(O=new r(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1),B=O.start,(L||B.row===A.row&&Math.abs(B.column-A.column)<2)&&(O=this.session.getBracketRange(B)));else if(k==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new r(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(A.row,A.column)===0){var W=this.session.getMatchingTags(A);W&&(W.openTag.contains(A.row,A.column)?(O=W.closeTag,B=O.start):(O=W.openTag,W.closeTag.start.row===A.row&&W.closeTag.start.column===A.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(w?O&&L?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(w,L,A){this.selection.clearSelection(),this.session.unfold({row:w-1,column:L||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,L||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,A)},M.prototype.navigateTo=function(w,L){this.selection.moveTo(w,L)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var L=this.selection.anchor.getPosition();return this.moveCursorToPosition(L)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var L=this.getSelectionRange().start;this.moveCursorToPosition(L)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var L=this.getSelectionRange().end;this.moveCursorToPosition(L)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,L){L&&this.$search.set(L);var A=this.$search.find(this.session),R=0;return A&&(this.$tryReplace(A,w)&&(R=1),this.selection.setSelectionRange(A),this.renderer.scrollSelectionIntoView(A.start,A.end)),R},M.prototype.replaceAll=function(w,L){L&&this.$search.set(L);var A=this.$search.findAll(this.session),R=0;if(!A.length)return R;var x=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=A.length-1;I>=0;--I)this.$tryReplace(A[I],w)&&R++;return this.selection.setSelectionRange(x),R},M.prototype.$tryReplace=function(w,L){var A=this.session.getTextRange(w);return L=this.$search.replace(A,L),L!==null?(w.end=this.session.replace(w,L),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,L,A){L||(L={}),typeof w=="string"||w instanceof RegExp?L.needle=w:typeof w=="object"&&v.mixin(L,w);var R=this.selection.getRange();L.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(L),L.start||this.$search.set({start:R});var x=this.$search.find(this.session);if(L.preventScroll)return x;if(x)return this.revealRange(x,A),x;L.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,L){this.find({skipCurrent:!0,backwards:!1},w,L)},M.prototype.findPrevious=function(w,L){this.find(w,{skipCurrent:!0,backwards:!0},L)},M.prototype.revealRange=function(w,L){this.session.unfold(w),this.selection.setSelectionRange(w);var A=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),L!==!1&&this.renderer.animateScrolling(A)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var L,A=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var x=this.$scrollAnchor;x.style.cssText="position:absolute",this.container.insertBefore(x,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(L=A.renderer.container.getBoundingClientRect())}),k=this.renderer.on("afterRender",function(){if(R&&L&&(A.isFocused()||A.searchBox&&A.searchBox.isFocused())){var H=A.renderer,U=H.$cursorLayer.$pixelPos,q=H.layerConfig,N=U.top-q.offset;U.top>=0&&N+L.top<0?R=!0:U.top<q.height&&U.top+L.top+q.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(x.style.top=N+"px",x.style.left=U.left+"px",x.style.height=q.lineHeight+"px",x.scrollIntoView(R)),R=L=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",k),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",L=this.renderer.$cursorLayer;L&&(L.setSmoothBlinking(/smooth/.test(w)),L.isBlinking=!this.$readOnly&&w!="wide",u.setCssClass(L.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,L,A){var R=this;y.loadModule("ace/ext/prompt",function(x){x.prompt(R,w,L,A)})},M}();E.$uid=0,E.prototype.curOp=null,E.prototype.prevOp={},E.prototype.$mergeableCommands=["backspace","del","insertstring"],E.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],v.implement(E.prototype,d),y.defineOptions(E.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),u.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),u.addCssClass(this.container,"ace_hasPlaceholder");var L=u.createElement("div");L.className="ace_placeholder",L.textContent=this.$placeholder||"",this.renderer.placeholderNode=L,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},L=function(R){if(R.target==this.renderer.scroller&&R.keyCode===F.enter){R.preventDefault();var x=this.getCursorPosition().row;this.isRowVisible(x)||this.scrollToLine(x,!0,!0),this.focus()}},A;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(p.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",L.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),A||(A=new D(this)),A.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",L.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),A&&A.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,L){return Math.max(w.toString().length,(L.lastRow+1).toString().length,2)*L.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=E});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function u(a,p){this.element=a,this.canvasHeight=p||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return u.prototype.moveContainer=function(a){h.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},u.prototype.pageChanged=function(a,p){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)},u.prototype.computeLineTop=function(a,p,s){var o=p.firstRowScreen*p.lineHeight,i=Math.floor(o/this.canvasHeight),c=s.documentToScreenRow(a,0)*p.lineHeight;return c-i*this.canvasHeight},u.prototype.computeLineHeight=function(a,p,s){return p.lineHeight*s.getRowLineCount(a)},u.prototype.getLength=function(){return this.cells.length},u.prototype.get=function(a){return this.cells[a]},u.prototype.shift=function(){this.$cacheCell(this.cells.shift())},u.prototype.pop=function(){this.$cacheCell(this.cells.pop())},u.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var p=h.createFragment(this.element),s=0;s<a.length;s++)p.appendChild(a[s].element);this.element.appendChild(p)}else this.cells.push(a),this.element.appendChild(a.element)},u.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var p=h.createFragment(this.element),s=0;s<a.length;s++)p.appendChild(a[s].element);this.element.firstChild?this.element.insertBefore(p,this.element.firstChild):this.element.appendChild(p)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},u.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},u.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},u.prototype.createCell=function(a,p,s,o){var i=this.cellCache.pop();if(!i){var c=h.createElement("div");o&&o(c),this.element.appendChild(c),i={element:c,text:"",row:a}}return i.row=a,i},u}();t.Lines=v});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/oop"),u=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,p=e("./lines").Lines,s=e("../config").nls,o=function(){function c(f){this.element=h.createElement("div"),this.element.className="ace_layer ace_gutter-layer",f.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new p(this.element),this.$lines.$offsetCoefficient=1}return c.prototype.setSession=function(f){this.session&&this.session.off("change",this.$updateAnnotations),this.session=f,f&&f.on("change",this.$updateAnnotations)},c.prototype.addGutterDecoration=function(f,l){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(f,l)},c.prototype.removeGutterDecoration=function(f,l){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(f,l)},c.prototype.setAnnotations=function(f){this.$annotations=[];for(var l=0;l<f.length;l++){var r=f[l],d=r.row,_=this.$annotations[d];_||(_=this.$annotations[d]={text:[],type:[]});var m=r.text,y=r.type;m=m?u.escapeHTML(m):r.html||"",_.text.indexOf(m)===-1&&(_.text.push(m),_.type.push(y));var b=r.className;b?_.className=b:y=="error"?_.className=" ace_error":y=="warning"&&_.className!=" ace_error"?_.className=" ace_warning":y=="info"&&!_.className&&(_.className=" ace_info")}},c.prototype.$updateAnnotations=function(f){if(this.$annotations.length){var l=f.start.row,r=f.end.row-l;if(r!==0)if(f.action=="remove")this.$annotations.splice(l,r+1,null);else{var d=new Array(r+1);d.unshift(l,1),this.$annotations.splice.apply(this.$annotations,d)}}},c.prototype.update=function(f){this.config=f;var l=this.session,r=f.firstRow,d=Math.min(f.lastRow+f.gutterOffset,l.getLength()-1);this.oldLastRow=d,this.config=f,this.$lines.moveContainer(f),this.$updateCursorRow();for(var _=l.getNextFoldLine(r),m=_?_.start.row:1/0,y=null,b=-1,S=r;;){if(S>m&&(S=_.end.row+1,_=l.getNextFoldLine(S,_),m=_?_.start.row:1/0),S>d){for(;this.$lines.getLength()>b+1;)this.$lines.pop();break}y=this.$lines.get(++b),y?y.row=S:(y=this.$lines.createCell(S,f,this.session,i),this.$lines.push(y)),this.$renderCell(y,f,_,S),S++}this._signal("afterRender"),this.$updateGutterWidth(f)},c.prototype.$updateGutterWidth=function(f){var l=this.session,r=l.gutterRenderer||this.$renderer,d=l.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||l.$useWrapMode)&&(_=l.getLength()+d-1);var m=r?r.getWidth(l,_,f):_.toString().length*f.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},c.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var f=this.session.selection.getCursor();this.$cursorRow!==f.row&&(this.$cursorRow=f.row)}},c.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var f=this.session.selection.cursor.row;if(this.$cursorRow=f,!(this.$cursorCell&&this.$cursorCell.row==f)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var l=this.$lines.cells;this.$cursorCell=null;for(var r=0;r<l.length;r++){var d=l[r];if(d.row>=this.$cursorRow){if(d.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(r>0&&_&&_.start.row==l[r-1].row)d=l[r-1];else break}d.element.className="ace_gutter-active-line "+d.element.className,this.$cursorCell=d;break}}}}},c.prototype.scrollLines=function(f){var l=this.config;if(this.config=f,this.$updateCursorRow(),this.$lines.pageChanged(l,f))return this.update(f);this.$lines.moveContainer(f);var r=Math.min(f.lastRow+f.gutterOffset,this.session.getLength()-1),d=this.oldLastRow;if(this.oldLastRow=r,!l||d<f.firstRow)return this.update(f);if(r<l.firstRow)return this.update(f);if(l.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(l.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(d>r)for(var _=this.session.getFoldedRowCount(r+1,d);_>0;_--)this.$lines.pop();f.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLines(f,f.firstRow,l.firstRow-1)),r>d&&this.$lines.push(this.$renderLines(f,d+1,r)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(f)},c.prototype.$renderLines=function(f,l,r){for(var d=[],_=l,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>r);){var b=this.$lines.createCell(_,f,this.session,i);this.$renderCell(b,f,m,_),d.push(b),_++}return d},c.prototype.$renderCell=function(f,l,r,d){var _=f.element,m=this.session,y=_.childNodes[0],b=_.childNodes[1],S=_.childNodes[2],D=S.firstChild,g=m.$firstLineNumber,C=m.$breakpoints,F=m.$decorations,E=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=r?r.start.row:Number.MAX_VALUE,w=l.lineHeight+"px",L=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",A=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(E?E.getText(m,d):d+g).toString();if(this.$highlightGutterLine&&(d==this.$cursorRow||r&&d<this.$cursorRow&&d>=M&&this.$cursorRow<=r.end.row)&&(L+="ace_gutter-active-line ",this.$cursorCell!=f&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=f)),C[d]&&(L+=C[d]),F[d]&&(L+=F[d]),this.$annotations[d]&&d!==M&&(L+=this.$annotations[d].className),T){var x=T[d];x==null&&(x=T[d]=m.getFoldWidget(d))}if(x){var I="ace_fold-widget ace_"+x,$=x=="start"&&d==M&&d<r.end.row;if($){I+=" ace_closed";for(var k="",H=!1,U=d+1;U<=r.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){H=!0,k=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){H=!0,k=" ace_warning_fold";continue}}L+=k}else I+=" ace_open";b.className!=I&&(b.className=I),h.setStyle(b.style,"height",w),h.setStyle(b.style,"display","inline-block"),b.setAttribute("role","button"),b.setAttribute("tabindex","-1");var q=m.getFoldWidgetRange(d);q?b.setAttribute("aria-label",s("Toggle code folding, rows $0 through $1",[q.start.row+1,q.end.row+1])):r?b.setAttribute("aria-label",s("Toggle code folding, rows $0 through $1",[r.start.row+1,r.end.row+1])):b.setAttribute("aria-label",s("Toggle code folding, row $0",[d+1])),$?(b.setAttribute("aria-expanded","false"),b.setAttribute("title",s("Unfold code"))):(b.setAttribute("aria-expanded","true"),b.setAttribute("title",s("Fold code")))}else b&&(h.setStyle(b.style,"display","none"),b.setAttribute("tabindex","0"),b.removeAttribute("role"),b.removeAttribute("aria-label"));return H&&this.$showFoldedAnnotations?(S.className="ace_gutter_annotation",D.className=A,D.className+=k,h.setStyle(D.style,"height",w),h.setStyle(S.style,"display","block"),h.setStyle(S.style,"height",w),S.setAttribute("aria-label",s("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):this.$annotations[d]?(S.className="ace_gutter_annotation",D.className=A,this.$useSvgGutterIcons?D.className+=this.$annotations[d].className:_.classList.add(this.$annotations[d].className.replace(" ","")),h.setStyle(D.style,"height",w),h.setStyle(S.style,"display","block"),h.setStyle(S.style,"height",w),S.setAttribute("aria-label",s("Read annotations row $0",[R])),S.setAttribute("tabindex","-1"),S.setAttribute("role","button")):(h.setStyle(S.style,"display","none"),S.removeAttribute("aria-label"),S.removeAttribute("role"),S.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),_.className!=L&&(_.className=L),h.setStyle(f.element.style,"height",this.$lines.computeLineHeight(d,l,m)+"px"),h.setStyle(f.element.style,"top",this.$lines.computeLineTop(d,l,m)+"px"),f.text=R,S.style.display==="none"&&b.style.display==="none"?f.element.setAttribute("aria-hidden",!0):f.element.setAttribute("aria-hidden",!1),f},c.prototype.setHighlightGutterLine=function(f){this.$highlightGutterLine=f},c.prototype.setShowLineNumbers=function(f){this.$renderer=!f&&{getWidth:function(){return 0},getText:function(){return""}}},c.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},c.prototype.setShowFoldWidgets=function(f){f?h.addCssClass(this.element,"ace_folding-enabled"):h.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=f,this.$padding=null},c.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},c.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var f=h.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(f.borderLeftWidth)||0)+(parseInt(f.paddingLeft)||0)+1,this.$padding.right=(parseInt(f.borderRightWidth)||0)+(parseInt(f.paddingRight)||0),this.$padding},c.prototype.getRegion=function(f){var l=this.$padding||this.$computePadding(),r=this.element.getBoundingClientRect();if(f.x<l.left+r.left)return"markers";if(this.$showFoldWidgets&&f.x>r.right-l.right)return"foldWidgets"},c}();o.prototype.$fixedWidth=!1,o.prototype.$highlightGutterLine=!0,o.prototype.$renderer="",o.prototype.$showLineNumbers=!0,o.prototype.$showFoldWidgets=!0,v.implement(o.prototype,a);function i(c){var f=document.createTextNode("");c.appendChild(f);var l=h.createElement("span");c.appendChild(l);var r=h.createElement("span");c.appendChild(r);var d=h.createElement("span");return r.appendChild(d),c}t.Gutter=o});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../range").Range,v=e("../lib/dom"),u=function(){function p(s){this.element=v.createElement("div"),this.element.className="ace_layer ace_marker-layer",s.appendChild(this.element)}return p.prototype.setPadding=function(s){this.$padding=s},p.prototype.setSession=function(s){this.session=s},p.prototype.setMarkers=function(s){this.markers=s},p.prototype.elt=function(s,o){var i=this.i!=-1&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=o,i.className=s},p.prototype.update=function(s){if(s){this.config=s,this.i=0;var o;for(var i in this.markers){var c=this.markers[i];if(!c.range){c.update(o,this,this.session,s);continue}var f=c.range.clipRows(s.firstRow,s.lastRow);if(!f.isEmpty())if(f=f.toScreenRange(this.session),c.renderer){var l=this.$getTop(f.start.row,s),r=this.$padding+f.start.column*s.characterWidth;c.renderer(o,f,r,l,s)}else c.type=="fullLine"?this.drawFullLineMarker(o,f,c.clazz,s):c.type=="screenLine"?this.drawScreenLineMarker(o,f,c.clazz,s):f.isMultiLine()?c.type=="text"?this.drawTextMarker(o,f,c.clazz,s):this.drawMultiLineMarker(o,f,c.clazz,s):this.drawSingleLineMarker(o,f,c.clazz+" ace_start ace_br15",s)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},p.prototype.$getTop=function(s,o){return(s-o.firstRowScreen)*o.lineHeight},p.prototype.drawTextMarker=function(s,o,i,c,f){for(var l=this.session,r=o.start.row,d=o.end.row,_=r,m=0,y=0,b=l.getScreenLastRowColumn(_),S=new h(_,o.start.column,_,y);_<=d;_++)S.start.row=S.end.row=_,S.start.column=_==r?o.start.column:l.getRowWrapIndent(_),S.end.column=b,m=y,y=b,b=_+1<d?l.getScreenLastRowColumn(_+1):_==d?0:o.end.column,this.drawSingleLineMarker(s,S,i+(_==r?" ace_start":"")+" ace_br"+a(_==r||_==r+1&&o.start.column,m<y,y>b,_==d),c,_==d?0:1,f)},p.prototype.drawMultiLineMarker=function(s,o,i,c,f){var l=this.$padding,r=c.lineHeight,d=this.$getTop(o.start.row,c),_=l+o.start.column*c.characterWidth;if(f=f||"",this.session.$bidiHandler.isBidiRow(o.start.row)){var m=o.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(s,m,i+" ace_br1 ace_start",c,null,f)}else this.elt(i+" ace_br1 ace_start","height:"+r+"px;right:0;top:"+d+"px;left:"+_+"px;"+(f||""));if(this.session.$bidiHandler.isBidiRow(o.end.row)){var m=o.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(s,m,i+" ace_br12",c,null,f)}else{d=this.$getTop(o.end.row,c);var y=o.end.column*c.characterWidth;this.elt(i+" ace_br12","height:"+r+"px;width:"+y+"px;top:"+d+"px;left:"+l+"px;"+(f||""))}if(r=(o.end.row-o.start.row-1)*c.lineHeight,!(r<=0)){d=this.$getTop(o.start.row+1,c);var b=(o.start.column?1:0)|(o.end.column?0:8);this.elt(i+(b?" ace_br"+b:""),"height:"+r+"px;right:0;top:"+d+"px;left:"+l+"px;"+(f||""))}},p.prototype.drawSingleLineMarker=function(s,o,i,c,f,l){if(this.session.$bidiHandler.isBidiRow(o.start.row))return this.drawBidiSingleLineMarker(s,o,i,c,f,l);var r=c.lineHeight,d=(o.end.column+(f||0)-o.start.column)*c.characterWidth,_=this.$getTop(o.start.row,c),m=this.$padding+o.start.column*c.characterWidth;this.elt(i,"height:"+r+"px;width:"+d+"px;top:"+_+"px;left:"+m+"px;"+(l||""))},p.prototype.drawBidiSingleLineMarker=function(s,o,i,c,f,l){var r=c.lineHeight,d=this.$getTop(o.start.row,c),_=this.$padding,m=this.session.$bidiHandler.getSelections(o.start.column,o.end.column);m.forEach(function(y){this.elt(i,"height:"+r+"px;width:"+(y.width+(f||0))+"px;top:"+d+"px;left:"+(_+y.left)+"px;"+(l||""))},this)},p.prototype.drawFullLineMarker=function(s,o,i,c,f){var l=this.$getTop(o.start.row,c),r=c.lineHeight;o.start.row!=o.end.row&&(r+=this.$getTop(o.end.row,c)-l),this.elt(i,"height:"+r+"px;top:"+l+"px;left:0;right:0;"+(f||""))},p.prototype.drawScreenLineMarker=function(s,o,i,c,f){var l=this.$getTop(o.start.row,c),r=c.lineHeight;this.elt(i,"height:"+r+"px;top:"+l+"px;left:0;right:0;"+(f||""))},p}();u.prototype.$padding=0;function a(p,s,o,i){return(p?1:0)|(s?2:0)|(o?4:0)|(i?8:0)}t.Marker=u});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var h=new Set(["text","rparen","lparen"]);t.isTextToken=function(v){return h.has(v)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var h=e("../lib/oop"),v=e("../lib/dom"),u=e("../lib/lang"),a=e("./lines").Lines,p=e("../lib/event_emitter").EventEmitter,s=e("../config").nls,o=e("./text_util").isTextToken,i=function(){function c(f){this.dom=v,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",f.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return c.prototype.$updateEolChar=function(){var f=this.session.doc,l=f.getNewLineCharacter()==`
`&&f.getNewLineMode()!="windows",r=l?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=r)return this.EOL_CHAR=r,!0},c.prototype.setPadding=function(f){this.$padding=f,this.element.style.margin="0 "+f+"px"},c.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},c.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},c.prototype.$setFontMetrics=function(f){this.$fontMetrics=f,this.$fontMetrics.on("changeCharacterSize",function(l){this._signal("changeCharacterSize",l)}.bind(this)),this.$pollSizeChanges()},c.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},c.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},c.prototype.setSession=function(f){this.session=f,f&&this.$computeTabString()},c.prototype.setShowInvisibles=function(f){return this.showInvisibles==f?!1:(this.showInvisibles=f,typeof f=="string"?(this.showSpaces=/tab/i.test(f),this.showTabs=/space/i.test(f),this.showEOL=/eol/i.test(f)):this.showSpaces=this.showTabs=this.showEOL=f,this.$computeTabString(),!0)},c.prototype.setDisplayIndentGuides=function(f){return this.displayIndentGuides==f?!1:(this.displayIndentGuides=f,this.$computeTabString(),!0)},c.prototype.setHighlightIndentGuides=function(f){return this.$highlightIndentGuides===f?!1:(this.$highlightIndentGuides=f,f)},c.prototype.$computeTabString=function(){var f=this.session.getTabSize();this.tabSize=f;for(var l=this.$tabStrings=[0],r=1;r<f+1;r++)if(this.showTabs){var d=this.dom.createElement("span");d.className="ace_invisible ace_invisible_tab",d.textContent=u.stringRepeat(this.TAB_CHAR,r),l.push(d)}else l.push(this.dom.createTextNode(u.stringRepeat(" ",r),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?u.stringRepeat(this.SPACE_CHAR,this.tabSize):u.stringRepeat(" ",this.tabSize),b=this.showTabs?" ace_invisible ace_invisible_tab":"",S=this.showTabs?u.stringRepeat(this.TAB_CHAR,this.tabSize):y,d=this.dom.createElement("span");d.className=_+m,d.textContent=y,this.$tabStrings[" "]=d;var d=this.dom.createElement("span");d.className=_+b,d.textContent=S,this.$tabStrings["	"]=d}},c.prototype.updateLines=function(f,l,r){if(this.config.lastRow!=f.lastRow||this.config.firstRow!=f.firstRow)return this.update(f);this.config=f;for(var d=Math.max(l,f.firstRow),_=Math.min(r,f.lastRow),m=this.element.childNodes,y=0,S=f.firstRow;S<d;S++){var D=this.session.getFoldLine(S);if(D)if(D.containsRow(d)){d=D.start.row;break}else S=D.end.row;y++}for(var b=!1,S=d,D=this.session.getNextFoldLine(S),g=D?D.start.row:1/0;S>g&&(S=D.end.row+1,D=this.session.getNextFoldLine(S,D),g=D?D.start.row:1/0),!(S>_);){var C=m[y++];if(C){this.dom.removeChildren(C),this.$renderLine(C,S,S==g?D:!1),b&&(C.style.top=this.$lines.computeLineTop(S,f,this.session)+"px");var F=f.lineHeight*this.session.getRowLength(S)+"px";C.style.height!=F&&(b=!0,C.style.height=F)}S++}if(b)for(;y<this.$lines.cells.length;){var E=this.$lines.cells[y++];E.element.style.top=this.$lines.computeLineTop(E.row,f,this.session)+"px"}},c.prototype.scrollLines=function(f){var l=this.config;if(this.config=f,this.$lines.pageChanged(l,f))return this.update(f);this.$lines.moveContainer(f);var r=f.lastRow,d=l?l.lastRow:-1;if(!l||d<f.firstRow)return this.update(f);if(r<l.firstRow)return this.update(f);if(!l||l.lastRow<f.firstRow)return this.update(f);if(f.lastRow<l.firstRow)return this.update(f);if(l.firstRow<f.firstRow)for(var _=this.session.getFoldedRowCount(l.firstRow,f.firstRow-1);_>0;_--)this.$lines.shift();if(l.lastRow>f.lastRow)for(var _=this.session.getFoldedRowCount(f.lastRow+1,l.lastRow);_>0;_--)this.$lines.pop();f.firstRow<l.firstRow&&this.$lines.unshift(this.$renderLinesFragment(f,f.firstRow,l.firstRow-1)),f.lastRow>l.lastRow&&this.$lines.push(this.$renderLinesFragment(f,l.lastRow+1,f.lastRow)),this.$highlightIndentGuide()},c.prototype.$renderLinesFragment=function(f,l,r){for(var d=[],_=l,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>r);){var b=this.$lines.createCell(_,f,this.session),S=b.element;this.dom.removeChildren(S),v.setStyle(S.style,"height",this.$lines.computeLineHeight(_,f,this.session)+"px"),v.setStyle(S.style,"top",this.$lines.computeLineTop(_,f,this.session)+"px"),this.$renderLine(S,_,_==y?m:!1),this.$useLineGroups()?S.className="ace_line_group":S.className="ace_line",d.push(b),_++}return d},c.prototype.update=function(f){this.$lines.moveContainer(f),this.config=f;for(var l=f.firstRow,r=f.lastRow,d=this.$lines;d.getLength();)d.pop();d.push(this.$renderLinesFragment(f,l,r))},c.prototype.$renderToken=function(f,l,r,d){for(var _=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),b,S=0;b=m.exec(d);){var D=b[1],g=b[2],C=b[3],F=b[4],E=b[5];if(!(!_.showSpaces&&g)){var T=S!=b.index?d.slice(S,b.index):"";if(S=b.index+b[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=_.session.getScreenTabSize(l+b.index);y.appendChild(_.$tabStrings[M].cloneNode(!0)),l+=M-1}else if(g)if(_.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=u.stringRepeat(_.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(C){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=u.stringRepeat(_.SPACE_CHAR,C.length),y.appendChild(w)}else if(F){l+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=_.showSpaces?_.SPACE_CHAR:F,y.appendChild(w)}else if(E){l+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=E,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(S?d.slice(S):d,this.element)),o(r.type))f.appendChild(y);else{var L="ace_"+r.type.replace(/\./g," ace_"),w=this.dom.createElement("span");r.type=="fold"&&(w.style.width=r.value.length*this.config.characterWidth+"px",w.setAttribute("title",s("Unfold code"))),w.className=L,w.appendChild(y),f.appendChild(w)}return l+d.length},c.prototype.renderIndentGuide=function(f,l,r){var d=l.search(this.$indentGuideRe);if(d<=0||d>=r)return l;if(l[0]==" "){d-=d%this.tabSize;for(var _=d/this.tabSize,m=0;m<_;m++)f.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(d)}else if(l[0]=="	"){for(var m=0;m<d;m++)f.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),l.substr(d)}return this.$highlightIndentGuide(),l},c.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var f=this.session.doc.$lines;if(f){var l=this.session.selection.getCursor(),r=/^\s*/.exec(this.session.doc.getLine(l.row))[0].length,d=Math.floor(r/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:d,start:l.row};var _=this.session.$bracketHighlight;if(_){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(l.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,l.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&f[l.row]!==""&&l.column===f[l.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=l.row+1;y<f.length;y++){var b=f[y],S=/^\s*/.exec(b)[0].length;if(b!==""&&(this.$highlightIndentGuideMarker.end=y,S<=r))break}}this.$renderHighlightIndentGuide()}}},c.prototype.$clearActiveIndentGuide=function(){for(var f=this.$lines.cells,l=0;l<f.length;l++){var r=f[l],d=r.element.childNodes;if(d.length>0){for(var _=0;_<d.length;_++)if(d[_].classList&&d[_].classList.contains("ace_indent-guide-active")){d[_].classList.remove("ace_indent-guide-active");break}}}},c.prototype.$setIndentGuideActive=function(f,l){var r=this.session.doc.getLine(f.row);if(r!==""){var d=f.element.childNodes;if(d){var _=d[l-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},c.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var f=this.$lines.cells;this.$clearActiveIndentGuide();var l=this.$highlightIndentGuideMarker.indentLevel;if(l!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var r=0;r<f.length;r++){var d=f[r];if(this.$highlightIndentGuideMarker.end&&d.row>=this.$highlightIndentGuideMarker.start+1){if(d.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,l)}}else for(var r=f.length-1;r>=0;r--){var d=f[r];if(this.$highlightIndentGuideMarker.end&&d.row<this.$highlightIndentGuideMarker.start){if(d.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(d,l)}}}},c.prototype.$createLineElement=function(f){var l=this.dom.createElement("div");return l.className="ace_line",l.style.height=this.config.lineHeight+"px",l},c.prototype.$renderWrappedLine=function(f,l,r){var d=0,_=0,m=r[0],y=0,b=this.$createLineElement();f.appendChild(b);for(var S=0;S<l.length;S++){var D=l[S],g=D.value;if(S==0&&this.displayIndentGuides){if(d=g.length,g=this.renderIndentGuide(b,g,m),!g)continue;d-=g.length}if(d+g.length<m)y=this.$renderToken(b,y,D,g),d+=g.length;else{for(;d+g.length>=m;)y=this.$renderToken(b,y,D,g.substring(0,m-d)),g=g.substring(m-d),d=m,b=this.$createLineElement(),f.appendChild(b),b.appendChild(this.dom.createTextNode(u.stringRepeat("\xA0",r.indent),this.element)),_++,y=0,m=r[_]||Number.MAX_VALUE;g.length!=0&&(d+=g.length,y=this.$renderToken(b,y,D,g))}}r[r.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(b,y,null,"",!0)},c.prototype.$renderSimpleLine=function(f,l){for(var r=0,d=0;d<l.length;d++){var _=l[d],m=_.value;if(!(d==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(f,m),!m))){if(r+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(f,r,_,m);r=this.$renderToken(f,r,_,m)}}},c.prototype.$renderOverflowMessage=function(f,l,r,d,_){r&&this.$renderToken(f,l,r,d.slice(0,this.MAX_LINE_LENGTH-l));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=_?"<hide>":"<click to see more...>",f.appendChild(m)},c.prototype.$renderLine=function(f,l,r){if(!r&&r!=!1&&(r=this.session.getFoldLine(l)),r)var d=this.$getFoldLineTokens(l,r);else var d=this.session.getTokens(l);var _=f;if(d.length){var m=this.session.getRowSplitData(l);if(m&&m.length){this.$renderWrappedLine(f,d,m);var _=f.lastChild}else{var _=f;this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_)),this.$renderSimpleLine(_,d)}}else this.$useLineGroups()&&(_=this.$createLineElement(),f.appendChild(_));if(this.showEOL&&_){r&&(l=r.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=l==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},c.prototype.$getFoldLineTokens=function(f,l){var r=this.session,d=[];function _(y,b,S){for(var D=0,g=0;g+y[D].value.length<b;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=b){var C=y[D].value.substring(b-g);C.length>S-b&&(C=C.substring(0,S-b)),d.push({type:y[D].type,value:C}),g=b+C.length,D+=1}for(;g<S&&D<y.length;){var C=y[D].value;C.length+g>S?d.push({type:y[D].type,value:C.substring(0,S-g)}):d.push(y[D]),g+=C.length,D+=1}}var m=r.getTokens(f);return l.walk(function(y,b,S,D,g){y!=null?d.push({type:"fold",value:y}):(g&&(m=r.getTokens(b)),m.length&&_(m,D,S))},l.end.row,this.session.getLine(l.end.row).length),d},c.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},c}();i.prototype.EOF_CHAR="\xB6",i.prototype.EOL_CHAR_LF="\xAC",i.prototype.EOL_CHAR_CRLF="\xA4",i.prototype.EOL_CHAR=i.prototype.EOL_CHAR_LF,i.prototype.TAB_CHAR="\u2014",i.prototype.SPACE_CHAR="\xB7",i.prototype.$padding=0,i.prototype.MAX_LINE_LENGTH=1e4,i.prototype.showInvisibles=!1,i.prototype.showSpaces=!1,i.prototype.showTabs=!1,i.prototype.showEOL=!1,i.prototype.displayIndentGuides=!0,i.prototype.$highlightIndentGuides=!0,i.prototype.$tabStrings=[],i.prototype.destroy={},i.prototype.onChangeTabSize=i.prototype.$computeTabString,h.implement(i.prototype,p),t.Text=i});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=function(){function u(a){this.element=h.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),h.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return u.prototype.$updateOpacity=function(a){for(var p=this.cursors,s=p.length;s--;)h.setStyle(p[s].style,"opacity",a?"":"0")},u.prototype.$startCssAnimation=function(){for(var a=this.cursors,p=a.length;p--;)a[p].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&h.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},u.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,h.removeCssClass(this.element,"ace_animate-blinking")},u.prototype.setPadding=function(a){this.$padding=a},u.prototype.setSession=function(a){this.session=a},u.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},u.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},u.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,h.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},u.prototype.addCursor=function(){var a=h.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},u.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},u.prototype.hideCursor=function(){this.isVisible=!1,h.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},u.prototype.showCursor=function(){this.isVisible=!0,h.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},u.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,h.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&h.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),h.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var p=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),p()},this.blinkInterval),p()}},u.prototype.getPixelPosition=function(a,p){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var s=this.session.documentToScreenPosition(a),o=this.$padding+(this.session.$bidiHandler.isBidiRow(s.row,a.row)?this.session.$bidiHandler.getPosLeft(s.column):s.column*this.config.characterWidth),i=(s.row-(p?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:o,top:i}},u.prototype.isCursorInView=function(a,p){return a.top>=0&&a.top<p.maxHeight},u.prototype.update=function(a){this.config=a;var p=this.session.$selectionMarkers,s=0,o=0;(p===void 0||p.length===0)&&(p=[{cursor:null}]);for(var s=0,i=p.length;s<i;s++){var c=this.getPixelPosition(p[s].cursor,!0);if(!((c.top>a.height+a.offset||c.top<0)&&s>1)){var f=this.cursors[o++]||this.addCursor(),l=f.style;this.drawCursor?this.drawCursor(f,c,a,p[s],this.session):this.isCursorInView(c,a)?(h.setStyle(l,"display","block"),h.translate(f,c.left,c.top),h.setStyle(l,"width",Math.round(a.characterWidth)+"px"),h.setStyle(l,"height",a.lineHeight+"px")):h.setStyle(l,"display","none")}}for(;this.cursors.length>o;)this.removeCursor();var r=this.session.getOverwrite();this.$setOverwrite(r),this.$pixelPos=c,this.restartTimer()},u.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?h.addCssClass(this.element,"ace_overwrite-cursors"):h.removeCssClass(this.element,"ace_overwrite-cursors"))},u.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},u}();v.prototype.$padding=0,v.prototype.drawCursor=null,t.Cursor=v});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var f=function(l,r){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,_){d.__proto__=_}||function(d,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(d[m]=_[m])},f(l,r)};return function(l,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");f(l,r);function d(){this.constructor=l}l.prototype=r===null?Object.create(r):(d.prototype=r.prototype,new d)}}(),v=e("./lib/oop"),u=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter,s=32768,o=function(){function f(l,r){this.element=u.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+r,this.inner=u.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),l.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return f.prototype.setVisible=function(l){this.element.style.display=l?"":"none",this.isVisible=l,this.coeff=1},f}();v.implement(o.prototype,p);var i=function(f){h(l,f);function l(r,d){var _=f.call(this,r,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,d.$scrollbarWidth=_.width=u.scrollbarWidth(r.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return l.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var r=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-r)/(this.coeff-r)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},l.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},l.prototype.setHeight=function(r){this.element.style.height=r+"px"},l.prototype.setScrollHeight=function(r){this.scrollHeight=r,r>s?(this.coeff=s/r,r=s):this.coeff!=1&&(this.coeff=1),this.inner.style.height=r+"px"},l.prototype.setScrollTop=function(r){this.scrollTop!=r&&(this.skipEvent=!0,this.scrollTop=r,this.element.scrollTop=r*this.coeff)},l}(o);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var c=function(f){h(l,f);function l(r,d){var _=f.call(this,r,"-h")||this;return _.scrollLeft=0,_.height=d.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return l.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},l.prototype.getHeight=function(){return this.isVisible?this.height:0},l.prototype.setWidth=function(r){this.element.style.width=r+"px"},l.prototype.setInnerWidth=function(r){this.inner.style.width=r+"px"},l.prototype.setScrollWidth=function(r){this.inner.style.width=r+"px"},l.prototype.setScrollLeft=function(r){this.scrollLeft!=r&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=r)},l}(o);t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=c,t.VScrollBar=i,t.HScrollBar=c});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=this&&this.__extends||function(){var c=function(f,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,d){r.__proto__=d}||function(r,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(r[_]=d[_])},c(f,l)};return function(f,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(f,l);function r(){this.constructor=f}f.prototype=l===null?Object.create(l):(r.prototype=l.prototype,new r)}}(),v=e("./lib/oop"),u=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter;u.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var s=function(){function c(f,l){this.element=u.createElement("div"),this.element.className="ace_sb"+l,this.inner=u.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return c.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},c}();v.implement(s.prototype,p);var o=function(c){h(f,c);function f(l,r){var d=c.call(this,l,"-v")||this;return d.scrollTop=0,d.scrollHeight=0,d.parent=l,d.width=d.VScrollWidth,d.renderer=r,d.inner.style.width=d.element.style.width=(d.width||15)+"px",d.$minWidth=0,d}return f.prototype.onMouseDown=function(l,r){if(l==="mousedown"&&!(a.getButton(r)!==0||r.detail===2)){if(r.target===this.inner){var d=this,_=r.clientY,m=function(F){_=F.clientY},y=function(){clearInterval(g)},b=r.clientY,S=this.thumbTop,D=function(){if(_!==void 0){var F=d.scrollTopFromThumbTop(S+_-b);F!==d.scrollTop&&d._emit("scroll",{data:F})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(r)}var C=r.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(C)}),a.preventDefault(r)}},f.prototype.getHeight=function(){return this.height},f.prototype.scrollTopFromThumbTop=function(l){var r=l*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return r=r>>0,r<0?r=0:r>this.pageHeight-this.viewHeight&&(r=this.pageHeight-this.viewHeight),r},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(l){this.height=Math.max(0,l),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},f.prototype.setScrollHeight=function(l,r){this.pageHeight===l&&!r||(this.pageHeight=l,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},f.prototype.setScrollTop=function(l){this.scrollTop=l,l<0&&(l=0),this.thumbTop=l*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},f}(s);o.prototype.setInnerHeight=o.prototype.setScrollHeight;var i=function(c){h(f,c);function f(l,r){var d=c.call(this,l,"-h")||this;return d.scrollLeft=0,d.scrollWidth=0,d.height=d.HScrollHeight,d.inner.style.height=d.element.style.height=(d.height||12)+"px",d.renderer=r,d}return f.prototype.onMouseDown=function(l,r){if(l==="mousedown"&&!(a.getButton(r)!==0||r.detail===2)){if(r.target===this.inner){var d=this,_=r.clientX,m=function(F){_=F.clientX},y=function(){clearInterval(g)},b=r.clientX,S=this.thumbLeft,D=function(){if(_!==void 0){var F=d.scrollLeftFromThumbLeft(S+_-b);F!==d.scrollLeft&&d._emit("scroll",{data:F})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(r)}var C=r.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(C)}),a.preventDefault(r)}},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.scrollLeftFromThumbLeft=function(l){var r=l*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return r=r>>0,r<0?r=0:r>this.pageWidth-this.viewWidth&&(r=this.pageWidth-this.viewWidth),r},f.prototype.setWidth=function(l){this.width=Math.max(0,l),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},f.prototype.setScrollWidth=function(l,r){this.pageWidth===l&&!r||(this.pageWidth=l,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},f.prototype.setScrollLeft=function(l){this.scrollLeft=l,l<0&&(l=0),this.thumbLeft=l*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},f}(s);i.prototype.setInnerWidth=i.prototype.setScrollWidth,t.ScrollBar=o,t.ScrollBarV=o,t.ScrollBarH=i,t.VScrollBar=o,t.HScrollBar=i});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var h=e("./lib/event"),v=function(){function u(a,p){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=p||window;var s=this;this._flush=function(o){s.pending=!1;var i=s.changes;if(i&&(h.blockIdle(100),s.changes=0,s.onRender(i)),s.changes){if(s.$recursionLimit--<0)return;s.schedule()}else s.$recursionLimit=2}}return u.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(h.nextFrame(this._flush),this.pending=!0)},u.prototype.clear=function(a){var p=this.changes;return this.changes=0,p},u}();t.RenderLoop=v});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var h=e("../lib/oop"),v=e("../lib/dom"),u=e("../lib/lang"),a=e("../lib/event"),p=e("../lib/useragent"),s=e("../lib/event_emitter").EventEmitter,o=512,i=typeof ResizeObserver=="function",c=200,f=function(){function l(r){this.el=v.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=v.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=v.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),r.appendChild(this.el),this.$measureNode.textContent=u.stringRepeat("X",o),this.$characterSize={width:0,height:0},i?this.$addObserver():this.checkForSizeChanges()}return l.prototype.$setMeasureNodeStyles=function(r,d){r.width=r.height="auto",r.left=r.top="0px",r.visibility="hidden",r.position="absolute",r.whiteSpace="pre",p.isIE<8?r["font-family"]="inherit":r.font="inherit",r.overflow=d?"hidden":"visible"},l.prototype.checkForSizeChanges=function(r){if(r===void 0&&(r=this.$measureSizes()),r&&(this.$characterSize.width!==r.width||this.$characterSize.height!==r.height)){this.$measureNode.style.fontWeight="bold";var d=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=r,this.charSizes=Object.create(null),this.allowBoldFonts=d&&d.width===r.width&&d.height===r.height,this._emit("changeCharacterSize",{data:r})}},l.prototype.$addObserver=function(){var r=this;this.$observer=new window.ResizeObserver(function(d){r.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},l.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var r=this;return this.$pollSizeChangesTimer=a.onIdle(function d(){r.checkForSizeChanges(),a.onIdle(d,500)},500)},l.prototype.setPolling=function(r){r?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},l.prototype.$measureSizes=function(r){var d={height:(r||this.$measureNode).clientHeight,width:(r||this.$measureNode).clientWidth/o};return d.width===0||d.height===0?null:d},l.prototype.$measureCharWidth=function(r){this.$main.textContent=u.stringRepeat(r,o);var d=this.$main.getBoundingClientRect();return d.width/o},l.prototype.getCharacterWidth=function(r){var d=this.charSizes[r];return d===void 0&&(d=this.charSizes[r]=this.$measureCharWidth(r)/this.$characterSize.width),d},l.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},l.prototype.$getZoom=function(r){return!r||!r.parentElement?1:(window.getComputedStyle(r).zoom||1)*this.$getZoom(r.parentElement)},l.prototype.$initTransformMeasureNodes=function(){var r=function(d,_){return["div",{style:"position: absolute;top:"+d+"px;left:"+_+"px;"}]};this.els=v.buildDom([r(0,0),r(c,0),r(0,c),r(c,c)],this.el)},l.prototype.transformCoordinates=function(r,d){if(r){var _=this.$getZoom(this.el);r=S(1/_,r)}function m($,k,H){var U=$[1]*k[0]-$[0]*k[1];return[(-k[1]*H[0]+k[0]*H[1])/U,(+$[1]*H[0]-$[0]*H[1])/U]}function y($,k){return[$[0]-k[0],$[1]-k[1]]}function b($,k){return[$[0]+k[0],$[1]+k[1]]}function S($,k){return[$*k[0],$*k[1]]}this.els||this.$initTransformMeasureNodes();function D($){var k=$.getBoundingClientRect();return[k.left,k.top]}var g=D(this.els[0]),C=D(this.els[1]),F=D(this.els[2]),E=D(this.els[3]),T=m(y(E,C),y(E,F),y(b(C,F),b(E,g))),M=S(1+T[0],y(C,g)),w=S(1+T[1],y(F,g));if(d){var L=d,A=T[0]*L[0]/c+T[1]*L[1]/c+1,R=b(S(L[0],M),S(L[1],w));return b(S(1/A/c,R),g)}var x=y(r,g),I=m(y(M,S(T[0],x)),y(w,S(T[1],x)),x);return S(c,I)},l}();f.prototype.$characterSize={width:0,height:0},h.implement(f.prototype,s),t.FontMetrics=f});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var h=e("../lib/dom"),v=e("../lib/oop"),u=e("../lib/event_emitter").EventEmitter,a=function(){function p(s,o){this.canvas=h.createElement("canvas"),this.renderer=o,this.pixelRatio=1,this.maxHeight=o.layerConfig.maxHeight,this.lineHeight=o.layerConfig.lineHeight,this.canvasHeight=s.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=s.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},s.element.appendChild(this.canvas)}return p.prototype.$updateDecorators=function(s){var o=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(s){this.maxHeight=s.maxHeight,this.lineHeight=s.lineHeight,this.canvasHeight=s.height;var i=(s.lastRow+1)*this.lineHeight;i<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var c=this.canvas.getContext("2d");function f(E,T){return E.priority<T.priority?-1:E.priority>T.priority?1:0}var l=this.renderer.session.$annotations;if(c.clearRect(0,0,this.canvas.width,this.canvas.height),l){var r={info:1,warning:2,error:3};l.forEach(function(E){E.priority=r[E.type]||null}),l=l.sort(f);for(var d=this.renderer.session.$foldData,_=0;_<l.length;_++){var m=l[_].row,y=this.compensateFoldRows(m,d),b=Math.round((m-y)*this.lineHeight*this.heightRatio),S=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-S;if(g<this.minDecorationHeight){var C=(S+D)/2|0;C<this.halfMinDecorationHeight?C=this.halfMinDecorationHeight:C+this.halfMinDecorationHeight>this.canvasHeight&&(C=this.canvasHeight-this.halfMinDecorationHeight),S=Math.round(C-this.halfMinDecorationHeight),D=Math.round(C+this.halfMinDecorationHeight)}c.fillStyle=o[l[_].type]||null,c.fillRect(0,b,this.canvasWidth,D-S)}}var F=this.renderer.session.selection.getCursor();if(F){var y=this.compensateFoldRows(F.row,d),b=Math.round((F.row-y)*this.lineHeight*this.heightRatio);c.fillStyle="rgba(0, 0, 0, 0.5)",c.fillRect(0,b,this.canvasWidth,2)}},p.prototype.compensateFoldRows=function(s,o){var i=0;if(o&&o.length>0)for(var c=0;c<o.length;c++)s>o[c].start.row&&s<o[c].end.row?i+=s-o[c].start.row:s>=o[c].end.row&&(i+=o[c].end.row-o[c].start.row);return i},p}();v.implement(a.prototype,u),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var h=e("./lib/oop"),v=e("./lib/dom"),u=e("./lib/lang"),a=e("./config"),p=e("./layer/gutter").Gutter,s=e("./layer/marker").Marker,o=e("./layer/text").Text,i=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,f=e("./scrollbar").VScrollBar,l=e("./scrollbar_custom").HScrollBar,r=e("./scrollbar_custom").VScrollBar,d=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),b=e("./layer/decorators").Decorator,S=e("./lib/useragent");v.importCssString(y,"ace_editor.css",!1);var D=function(){function g(C,F){var E=this;this.container=C||v.createElement("div"),v.addCssClass(this.container,"ace_editor"),v.HI_DPI&&v.addCssClass(this.container,"ace_hidpi"),this.setTheme(F),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=v.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=v.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=v.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new s(this.content);var T=this.$textLayer=new o(this.content);this.canvas=T.element,this.$markerFront=new s(this.content),this.$cursorLayer=new i(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new f(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollTop(M.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){E.$scrollAnimation||E.session.setScrollLeft(M.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!S.isIOS,this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),v.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(C){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=C,C&&this.scrollMargin.top&&C.getScrollTop()<=0&&C.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(C),this.$markerBack.setSession(C),this.$markerFront.setSession(C),this.$gutterLayer.setSession(C),this.$textLayer.setSession(C),C&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(C,F,E){if(F===void 0&&(F=1/0),this.$changedLines?(this.$changedLines.firstRow>C&&(this.$changedLines.firstRow=C),this.$changedLines.lastRow<F&&(this.$changedLines.lastRow=F)):this.$changedLines={firstRow:C,lastRow:F},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(C){C?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(C,F,E,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=C?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),E||(E=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(C,F,E,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!E&&!T)return this.resizing=0;C&&(this.$gutterLayer.$padding=null),C?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(C,F,E,T){T-=this.$extraHeight||0;var M=0,w=this.$size,L={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(C||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),E&&(C||w.width!=E)){M|=this.CHANGE_SIZE,w.width=E,F==null&&(F=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=F,v.setStyle(this.scrollBarH.element.style,"left",F+"px"),v.setStyle(this.scroller.style,"left",F+this.margin.left+"px"),w.scrollerWidth=Math.max(0,E-F-this.scrollBarV.getWidth()-this.margin.h),v.setStyle(this.$gutter.style,"left",this.margin.left+"px");var A=this.scrollBarV.getWidth()+"px";v.setStyle(this.scrollBarH.element.style,"right",A),v.setStyle(this.scroller.style,"right",A),v.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||C)&&(M|=this.CHANGE_FULL)}return w.$dirty=!E||!T,M&&this._signal("resize",L),M},g.prototype.onGutterResize=function(C){var F=this.$showGutter?C:0;F!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,F,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var C=this.$size.scrollerWidth-this.$padding*2,F=Math.floor(C/this.characterWidth);return this.session.adjustWrapLimit(F,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(C){this.setOption("animatedScroll",C)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(C){this.setOption("showInvisibles",C),this.session.$bidiHandler.setShowInvisibles(C)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(C){this.setOption("displayIndentGuides",C)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(C){this.setOption("highlightIndentGuides",C)},g.prototype.setShowPrintMargin=function(C){this.setOption("showPrintMargin",C)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(C){this.setOption("printMarginColumn",C)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(C){return this.setOption("showGutter",C)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(C){this.setOption("fadeFoldWidgets",C)},g.prototype.setHighlightGutterLine=function(C){this.setOption("highlightGutterLine",C)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var C=v.createElement("div");C.className="ace_layer ace_print-margin-layer",this.$printMarginEl=v.createElement("div"),this.$printMarginEl.className="ace_print-margin",C.appendChild(this.$printMarginEl),this.content.insertBefore(C,this.content.firstChild)}var F=this.$printMarginEl.style;F.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",F.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var C=this.textarea.style,F=this.$composition;if(!this.$keepTextAreaAtCursor&&!F){v.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){F&&F.markerRange&&(E=this.$cursorLayer.getPixelPosition(F.markerRange.start,!0));var T=this.layerConfig,M=E.top,w=E.left;M-=T.offset;var L=F&&F.useTextareaForIME||S.isMobile?this.lineHeight:1;if(M<0||M>T.height-L){v.translate(this.textarea,0,0);return}var A=1,R=this.$size.height-L;if(!F)M+=this.lineHeight;else if(F.useTextareaForIME){var x=this.textarea.value;A=this.characterWidth*this.session.$getStringScreenWidth(x)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-A&&(w=this.$size.scrollerWidth-A),w+=this.gutterWidth+this.margin.left,v.setStyle(C,"height",L+"px"),v.setStyle(C,"width",A+"px"),v.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-A),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var C=this.layerConfig,F=C.lastRow,E=this.session.documentToScreenRow(F,0)*C.lineHeight;return E-this.session.getScrollTop()>C.height-C.lineHeight?F-1:F},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(C){this.$padding=C,this.$textLayer.setPadding(C),this.$cursorLayer.setPadding(C),this.$markerFront.setPadding(C),this.$markerBack.setPadding(C),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(C,F,E,T){var M=this.scrollMargin;M.top=C|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(C,F,E,T){var M=this.margin;M.top=C|0,M.bottom=F|0,M.right=T|0,M.left=E|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(C){this.setOption("hScrollBarAlwaysVisible",C)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(C){this.setOption("vScrollBarAlwaysVisible",C)},g.prototype.$updateScrollBarV=function(){var C=this.layerConfig.maxHeight,F=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(C-=(F-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>C-F&&(C=this.scrollTop+F,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(C+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(C,F){if(this.$changes&&(C|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!C&&!F){this.$changes|=C;return}if(this.$size.$dirty)return this.$changes|=C,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",C),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(C&this.CHANGE_FULL||C&this.CHANGE_SIZE||C&this.CHANGE_TEXT||C&this.CHANGE_LINES||C&this.CHANGE_SCROLL||C&this.CHANGE_H_SCROLL){if(C|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(E.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,C=C|this.CHANGE_SCROLL,C|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),C&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),v.translate(this.content,-this.scrollLeft,-E.offset);var M=E.width+2*this.$padding+"px",w=E.minHeight+"px";v.setStyle(this.content.style,"width",M),v.setStyle(this.content.style,"height",w)}if(C&this.CHANGE_H_SCROLL&&(v.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),C&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}if(C&this.CHANGE_SCROLL){this.$changedLines=null,C&this.CHANGE_TEXT||C&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(C&this.CHANGE_GUTTER||C&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",C);return}C&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_LINES?((this.$updateLines()||C&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_TEXT||C&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)):C&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(E)),C&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),C&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",C)},g.prototype.$autosize=function(){var C=this.session.getScreenLength()*this.lineHeight,F=this.$maxLines*this.lineHeight,E=Math.min(F,Math.max((this.$minLines||1)*this.lineHeight,C))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var T=E<=2*this.lineHeight,M=!T&&C>F;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,E),this.desiredHeight=E,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var C=this.session,F=this.$size,E=F.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),L=!E&&(this.$hScrollBarAlwaysVisible||F.scrollerWidth-w-2*this.$padding<0),A=this.$horizScroll!==L;A&&(this.$horizScroll=L,this.scrollBarH.setVisible(L));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var x=F.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(F.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-F.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-F.scrollerWidth+$.right)));var k=!E&&(this.$vScrollBarAlwaysVisible||F.scrollerHeight-M+I<0||this.scrollTop>$.top),H=R!==k;H&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var U=this.scrollTop%this.lineHeight,q=Math.ceil(x/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),K=N+q,O,B,W=this.lineHeight;N=C.screenToDocumentRow(N,0);var P=C.getFoldLine(N);P&&(N=P.start.row),O=C.documentToScreenRow(N,0),B=C.getRowLength(N)*W,K=Math.min(C.screenToDocumentRow(K,0),C.getLength()-1),x=F.scrollerHeight+C.getRowLength(K)*W+B,U=this.scrollTop-O*W;var Q=0;return(this.layerConfig.width!=w||A)&&(Q=this.CHANGE_H_SCROLL),(A||H)&&(Q|=this.$updateCachedSize(!0,this.gutterWidth,F.width,F.height),this._signal("scrollbarVisibilityChanged"),H&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:K,lineHeight:W,characterWidth:this.characterWidth,minHeight:x,maxHeight:M,offset:U,gutterOffset:W?Math.max(0,Math.ceil((U+F.height-F.scrollerHeight)/W)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),Q},g.prototype.$updateLines=function(){if(this.$changedLines){var C=this.$changedLines.firstRow,F=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(C>E.lastRow+1)&&!(F<E.firstRow)){if(F===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,C,F),!0}}},g.prototype.$getLongestLine=function(){var C=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(C+=1),this.$textLayer&&C>this.$textLayer.MAX_LINE_LENGTH&&(C=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(C*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(C,F){this.$gutterLayer.addGutterDecoration(C,F)},g.prototype.removeGutterDecoration=function(C,F){this.$gutterLayer.removeGutterDecoration(C,F)},g.prototype.updateBreakpoints=function(C){this._rows=C,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(C){this.$gutterLayer.setAnnotations(C),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(C,F,E){this.scrollCursorIntoView(C,E),this.scrollCursorIntoView(F,E)},g.prototype.scrollCursorIntoView=function(C,F,E){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(C),M=T.left,w=T.top,L=E&&E.top||0,A=E&&E.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+L>w?(F&&R+L>w+this.lineHeight&&(w-=F*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-A<w+this.lineHeight&&(F&&R+this.$size.scrollerHeight-A<w-this.lineHeight&&(w+=F*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+A-this.$size.scrollerHeight));var x=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<x?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,x+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):x<=this.$padding&&M-x<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(C){this.session.setScrollTop(C*this.lineHeight)},g.prototype.alignCursor=function(C,F){typeof C=="number"&&(C={row:C,column:0});var E=this.$cursorLayer.getPixelPosition(C),T=this.$size.scrollerHeight-this.lineHeight,M=E.top-T*(F||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(C,F){var E=0,T=this.STEPS,M=[],w=function(L,A,R){return R*(Math.pow(L-1,3)+1)+A};for(E=0;E<T;++E)M.push(w(E/this.STEPS,C,F-C));return M},g.prototype.scrollToLine=function(C,F,E,T){var M=this.$cursorLayer.getPixelPosition({row:C,column:0}),w=M.top;F&&(w-=this.$size.scrollerHeight/2);var L=this.scrollTop;this.session.setScrollTop(w),E!==!1&&this.animateScrolling(L,T)},g.prototype.animateScrolling=function(C,F){var E=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(C==E)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(C=M[0],C==E))return}var w=T.$calcSteps(C,E);this.$scrollAnimation={from:C,to:E,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=E;function L(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,F&&F()}this.$timer=setInterval(function(){if(T.$stopAnimation){L();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=E):E!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(E),E=null):L()},10)},g.prototype.scrollToY=function(C){this.scrollTop!==C&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=C)},g.prototype.scrollToX=function(C){this.scrollLeft!==C&&(this.scrollLeft=C),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(C,F){this.session.setScrollTop(F),this.session.setScrollLeft(C)},g.prototype.scrollBy=function(C,F){F&&this.session.setScrollTop(this.session.getScrollTop()+F),C&&this.session.setScrollLeft(this.session.getScrollLeft()+C)},g.prototype.isScrollableBy=function(C,F){if(F<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||F>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||C<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||C>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(C,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([C,F]);C=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=C+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,L=Math.floor((F+this.scrollTop-E.top)/this.lineHeight),A=this.$blockCursor?Math.floor(w):Math.round(w);return{row:L,column:A,side:w-A>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(C,F){var E;if(this.$hasCssTransforms){E={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([C,F]);C=T[1]-this.gutterWidth-this.margin.left,F=T[0]}else E=this.scroller.getBoundingClientRect();var M=C+this.scrollLeft-E.left-this.$padding,w=M/this.characterWidth,L=this.$blockCursor?Math.floor(w):Math.round(w),A=Math.floor((F+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(A,Math.max(L,0),M)},g.prototype.textToScreenCoordinates=function(C,F){var E=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(C,F),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,C)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:E.left+M-this.scrollLeft,pageY:E.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){v.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){v.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(C){this.$composition=C,C.cssText||(C.cssText=this.textarea.style.cssText),C.useTextareaForIME==null&&(C.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(v.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):C.markerId=this.session.addMarker(C.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(C){var F=this.session.selection.cursor;this.addToken(C,"composition_placeholder",F.row,F.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),v.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var C=this.session.selection.cursor;this.removeExtraToken(C.row,C.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(C,F){var E=this.session.selection.cursor,T=F||{row:E.row,column:E.column};this.removeGhostText();var M=C.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:C,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),L=this.container,A=L.getBoundingClientRect().height,R=M.length*this.lineHeight,x=R<A-w.top;if(x)return;R<A?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var C=this.$ghostText.position;this.removeExtraToken(C.row,C.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(C,F,E,T){var M=this.session;M.bgTokenizer.lines[E]=null;var w={type:F,value:C},L=M.getTokens(E);if(T==null||!L.length)L.push(w);else for(var A=0,R=0;R<L.length;R++){var x=L[R];if(A+=x.value.length,T<=A){var I=x.value.length-(A-T),$=x.value.slice(0,I),k=x.value.slice(I);L.splice(R,1,{type:x.type,value:$},w,{type:x.type,value:k});break}}this.updateLines(E,E)},g.prototype.removeExtraToken=function(C,F){this.session.bgTokenizer.lines[C]=null,this.updateLines(C,C)},g.prototype.setTheme=function(C,F){var E=this;if(this.$themeId=C,E._dispatchEvent("themeChange",{theme:C}),!C||typeof C=="string"){var T=C||this.$options.theme.initialValue;a.loadModule(["theme",T],M)}else M(C);function M(w){if(E.$themeId!=C)return F&&F();if(!w||!w.cssClass)throw new Error("couldn't load module "+C+" or it didn't call define");w.$id&&(E.$themeId=w.$id),v.importCssString(w.cssText,w.cssClass,E.container),E.theme&&v.removeCssClass(E.container,E.theme.cssClass);var L="padding"in w?w.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&L!=E.$padding&&E.setPadding(L),E.$theme=w.cssClass,E.theme=w,v.addCssClass(E.container,w.cssClass),v.setCssClass(E.container,"ace_dark",w.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:w}),F&&F()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(C,F){v.setCssClass(this.container,C,F!==!1)},g.prototype.unsetStyle=function(C){v.removeCssClass(this.container,C)},g.prototype.setCursorStyle=function(C){v.setStyle(this.scroller.style,"cursor",C)},g.prototype.setMouseCursor=function(C){v.setStyle(this.scroller.style,"cursor",C)},g.prototype.attachToShadowRoot=function(){v.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(C){var F=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,C===!0?(this.scrollBarV=new r(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}),this.$scrollDecorator=new b(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new f(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollTop(E.data-F.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(E){F.$scrollAnimation||F.session.setScrollLeft(E.data-F.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var C=this;this.$resizeTimer=u.delayedCall(function(){C.destroyed||C.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(F){var E=F[0].contentRect.width,T=F[0].contentRect.height;Math.abs(C.$size.width-E)>1||Math.abs(C.$size.height-T)>1?C.$resizeTimer.delay():C.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,h.implement(D.prototype,m),a.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){v.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!S.isMobile&&!S.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var h=e("../lib/oop"),v=e("../lib/net"),u=e("../lib/event_emitter").EventEmitter,a=e("../config");function p(c){var f="importScripts('"+v.qualifyURL(c)+"');";try{return new Blob([f],{type:"application/javascript"})}catch{var l=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,r=new l;return r.append(f),r.getBlob("application/javascript")}}function s(c){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var f=p(c),l=window.URL||window.webkitURL,r=l.createObjectURL(f);return new Worker(r)}return new Worker(c)}var o=function(c){c.postMessage||(c=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=c,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){h.implement(this,u),this.$createWorkerFromOldConfig=function(c,f,l,r,d){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)r=r||a.moduleUrl(f,"worker");else{var _=this.$normalizePath;r=r||_(e.toUrl("ace/worker/worker.js",null,"_"));var m={};c.forEach(function(y){m[y]=_(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=s(r),d&&this.send("importScripts",d),this.$worker.postMessage({init:!0,tlns:m,module:f,classname:l}),this.$worker},this.onMessage=function(c){var f=c.data;switch(f.type){case"event":this._signal(f.name,{data:f.data});break;case"call":var l=this.callbacks[f.id];l&&(l(f.data),delete this.callbacks[f.id]);break;case"error":this.reportError(f.data);break;case"log":window.console&&console.log&&console.log.apply(console,f.data);break}},this.reportError=function(c){window.console&&console.error&&console.error(c)},this.$normalizePath=function(c){return v.qualifyURL(c)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(c){c.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(c,f){this.$worker.postMessage({command:c,args:f})},this.call=function(c,f,l){if(l){var r=this.callbackId++;this.callbacks[r]=l,f.push(r)}this.send(c,f)},this.emit=function(c,f){try{f.data&&f.data.err&&(f.data.err={message:f.data.err.message,stack:f.data.err.stack,code:f.data.err.code}),this.$worker&&this.$worker.postMessage({event:c,data:{data:f.data}})}catch(l){console.error(l.stack)}},this.attachToDocument=function(c){this.$doc&&this.terminate(),this.$doc=c,this.call("setValue",[c.getValue()]),c.on("change",this.changeListener,!0)},this.changeListener=function(c){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),c.action=="insert"?this.deltaQueue.push(c.start,c.lines):this.deltaQueue.push(c.start,c.end)},this.$sendDeltaQueue=function(){var c=this.deltaQueue;c&&(this.deltaQueue=null,c.length>50&&c.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:c}))}}).call(o.prototype);var i=function(c,f,l){var r=null,d=!1,_=Object.create(u),m=[],y=new o({messageBuffer:m,terminate:function(){},postMessage:function(S){m.push(S),r&&(d?setTimeout(b):b())}});y.setEmitSync=function(S){d=S};var b=function(){var S=m.shift();S.command?r[S.command].apply(r,S.args):S.event&&_._signal(S.event,S.data)};return _.postMessage=function(S){y.onMessage({data:S})},_.callback=function(S,D){this.postMessage({type:"call",id:D,data:S})},_.emit=function(S,D){this.postMessage({type:"event",name:S,data:D})},a.loadModule(["worker",f],function(S){for(r=new S[l](_);m.length;)b()}),y};t.UIWorkerClient=i,t.WorkerClient=o,t.createWorker=s});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var h=e("./range").Range,v=e("./lib/event_emitter").EventEmitter,u=e("./lib/oop"),a=function(){function p(s,o,i,c,f,l){var r=this;this.length=o,this.session=s,this.doc=s.getDocument(),this.mainClass=f,this.othersClass=l,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=c,this.$onCursorChange=function(){setTimeout(function(){r.onCursorChange()})},this.$pos=i;var d=s.getUndoManager().$undoStack||s.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=d.length,this.setup(),s.selection.on("changeCursor",this.$onCursorChange)}return p.prototype.setup=function(){var s=this,o=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=o.createAnchor(this.$pos.row,this.$pos.column);var c=this.pos;c.$insertRight=!0,c.detach(),c.markerId=i.addMarker(new h(c.row,c.column,c.row,c.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(f){var l=o.createAnchor(f.row,f.column);l.$insertRight=!0,l.detach(),s.others.push(l)}),i.setUndoSelect(!1)},p.prototype.showOtherMarkers=function(){if(!this.othersActive){var s=this.session,o=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=s.addMarker(new h(i.row,i.column,i.row,i.column+o.length),o.othersClass,null,!1)})}},p.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var s=0;s<this.others.length;s++)this.session.removeMarker(this.others[s].markerId)}},p.prototype.onUpdate=function(s){if(this.$updating)return this.updateAnchors(s);var o=s;if(o.start.row===o.end.row&&o.start.row===this.pos.row){this.$updating=!0;var i=s.action==="insert"?o.end.column-o.start.column:o.start.column-o.end.column,c=o.start.column>=this.pos.column&&o.start.column<=this.pos.column+this.length+1,f=o.start.column-this.pos.column;if(this.updateAnchors(s),c&&(this.length+=i),c&&!this.session.$fromUndo){if(s.action==="insert")for(var l=this.others.length-1;l>=0;l--){var r=this.others[l],d={row:r.row,column:r.column+f};this.doc.insertMergedLines(d,s.lines)}else if(s.action==="remove")for(var l=this.others.length-1;l>=0;l--){var r=this.others[l],d={row:r.row,column:r.column+f};this.doc.remove(new h(d.row,d.column,d.row,d.column-i))}}this.$updating=!1,this.updateMarkers()}},p.prototype.updateAnchors=function(s){this.pos.onChange(s);for(var o=this.others.length;o--;)this.others[o].onChange(s);this.updateMarkers()},p.prototype.updateMarkers=function(){if(!this.$updating){var s=this,o=this.session,i=function(f,l){o.removeMarker(f.markerId),f.markerId=o.addMarker(new h(f.row,f.column,f.row,f.column+s.length),l,null,!1)};i(this.pos,this.mainClass);for(var c=this.others.length;c--;)i(this.others[c],this.othersClass)}},p.prototype.onCursorChange=function(s){if(!(this.$updating||!this.session)){var o=this.session.selection.getCursor();o.row===this.pos.row&&o.column>=this.pos.column&&o.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",s)):(this.hideOtherMarkers(),this._emit("cursorLeave",s))}},p.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},p.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var s=this.session.getUndoManager(),o=(s.$undoStack||s.$undostack).length-this.$undoStackDepth,i=0;i<o;i++)s.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},p}();u.implement(a.prototype,v),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var h=e("../lib/event"),v=e("../lib/useragent");function u(p,s){return p.row==s.row&&p.column==s.column}function a(p){var s=p.domEvent,o=s.altKey,i=s.shiftKey,c=s.ctrlKey,f=p.getAccelKey(),l=p.getButton();if(c&&v.isMac&&(l=s.button),p.editor.inMultiSelectMode&&l==2){p.editor.textInput.onContextMenu(p.domEvent);return}if(!c&&!o&&!f){l===0&&p.editor.inMultiSelectMode&&p.editor.exitMultiSelectMode();return}if(l===0){var r=p.editor,d=r.selection,_=r.inMultiSelectMode,m=p.getDocumentPosition(),y=d.getCursor(),b=p.inSelection()||d.isEmpty()&&u(m,y),S=p.x,D=p.y,g=function(k){S=k.clientX,D=k.clientY},C=r.session,F=r.renderer.pixelToScreenCoordinates(S,D),E=F,T;if(r.$mouseHandler.$enableJumpToDef)c&&o||f&&o?T=i?"block":"add":o&&r.$blockSelectEnabled&&(T="block");else if(f&&!o){if(T="add",!_&&i)return}else o&&r.$blockSelectEnabled&&(T="block");if(T&&v.isMac&&s.ctrlKey&&r.$mouseHandler.cancelContextMenu(),T=="add"){if(!_&&b)return;if(!_){var M=d.toOrientedRange();r.addSelectionMarker(M)}var w=d.rangeList.rangeAtPoint(m);r.inVirtualSelectionMode=!0,i&&(w=null,M=d.ranges[0]||M,r.removeSelectionMarker(M)),r.once("mouseup",function(){var k=d.toOrientedRange();w&&k.isEmpty()&&u(w.cursor,k.cursor)?d.substractPoint(k.cursor):(i?d.substractPoint(M.cursor):M&&(r.removeSelectionMarker(M),d.addRange(M)),d.addRange(k)),r.inVirtualSelectionMode=!1})}else if(T=="block"){p.stop(),r.inVirtualSelectionMode=!0;var L,A=[],R=function(){var k=r.renderer.pixelToScreenCoordinates(S,D),H=C.screenToDocumentPosition(k.row,k.column,k.offsetX);u(E,k)&&u(H,d.lead)||(E=k,r.selection.moveToPosition(H),r.renderer.scrollCursorIntoView(),r.removeSelectionMarkers(A),A=d.rectangularRangeBlock(E,F),r.$mouseHandler.$clickSelection&&A.length==1&&A[0].isEmpty()&&(A[0]=r.$mouseHandler.$clickSelection.clone()),A.forEach(r.addSelectionMarker,r),r.updateSelectionMarkers())};_&&!f?d.toSingleRange():!_&&f&&(L=d.toOrientedRange(),r.addSelectionMarker(L)),i?F=C.documentToScreenPosition(d.lead):d.moveToPosition(m),E={row:-1,column:-1};var x=function(k){R(),clearInterval($),r.removeSelectionMarkers(A),A.length||(A=[d.toOrientedRange()]),L&&(r.removeSelectionMarker(L),d.toSingleRange(L));for(var H=0;H<A.length;H++)d.addRange(A[H]);r.inVirtualSelectionMode=!1,r.$mouseHandler.$clickSelection=null},I=R;h.capture(r.container,g,x);var $=setInterval(function(){I()},20);return p.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(v){v.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(v){v.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(v){v.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(v){v.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(v){v.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(v){v.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(v){v.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(v){v.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(v){v.multiSelect.rangeCount>1?v.multiSelect.joinSelections():v.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(v){v.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(v){v.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(v){v.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(v){v.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(v){return v&&v.inMultiSelectMode}}];var h=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new h(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var h=e("./range_list").RangeList,v=e("./range").Range,u=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,p=e("./lib/event"),s=e("./lib/lang"),o=e("./commands/multi_select_commands");t.commands=o.defaultCommands.concat(o.multiSelectCommands);var i=e("./search").Search,c=new i;function f(y,b,S){return c.$options.wrap=!0,c.$options.needle=b,c.$options.backwards=S==-1,c.find(y)}var l=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(l.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,b){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var S=this.toOrientedRange();if(this.rangeList.add(S),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),b||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(S),this.$onAddRange(S)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),b||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var b=this.rangeList.removeAll();b.length&&this.$onRemoveRange(b),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var b=this.rangeList.substractPoint(y);if(b)return this.$onRemoveRange(b),b[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var b=this.rangeList.ranges.pop();y.push(b),this.rangeCount=0}for(var S=y.length;S--;){var D=this.ranges.indexOf(y[S]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),b=b||this.ranges[0],b&&!b.isEqual(this.getRange())&&this.fromOrientedRange(b)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new h,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],b=[],S=0;S<y.length;S++){var D=y[S],g=D.start.row,C=D.end.row;if(g===C)b.push(D.clone());else{for(b.push(new v(g,D.start.column,g,this.session.getLine(g).length));++g<C;)b.push(this.getLineRange(g,!0));b.push(new v(C,0,C,D.end.column))}S==0&&!this.isBackwards()&&(b=b.reverse())}this.toSingleRange();for(var S=b.length;S--;)this.addRange(b[S])},this.joinSelections=function(){var y=this.rangeList.ranges,b=y[y.length-1],S=v.fromPoints(y[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,b=y[y.length-1],S=v.fromPoints(y[0].start,b.end);this.toSingleRange(),this.setSelectionRange(S,b.cursor==b.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),C=this.rectangularRangeBlock(D,g);C.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,b,S){var D=[],g=y.column<b.column;if(g)var C=y.column,F=b.column,E=y.offsetX,T=b.offsetX;else var C=b.column,F=y.column,E=b.offsetX,T=y.offsetX;var M=y.row<b.row;if(M)var w=y.row,L=b.row;else var w=b.row,L=y.row;C<0&&(C=0),w<0&&(w=0),w==L&&(S=!0);for(var A,R=w;R<=L;R++){var x=v.fromPoints(this.session.screenToDocumentPosition(R,C,E),this.session.screenToDocumentPosition(R,F,T));if(x.isEmpty()){if(A&&d(x.end,A))break;A=x.end}x.cursor=g?x.start:x.end,D.push(x)}if(M&&D.reverse(),!S){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var k=I;k>=$;k--)D[k].isEmpty()&&D.splice(k,1)}return D}}.call(u.prototype);var r=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var b=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",b),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var b=this.session.$selectionMarkers.indexOf(y);b!=-1&&this.session.$selectionMarkers.splice(b,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var b=this.session.$selectionMarkers,S=y.length;S--;){var D=y[S];if(D.marker){this.session.removeMarker(D.marker);var g=b.indexOf(D);g!=-1&&b.splice(g,1)}}this.session.selectionMarkerCount=b.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(o.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(o.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var b=y.command,S=y.editor;if(S.multiSelect){if(b.multiSelectAction)b.multiSelectAction=="forEach"?D=S.forEachSelection(b,y.args):b.multiSelectAction=="forEachLine"?D=S.forEachSelection(b,y.args,!0):b.multiSelectAction=="single"?(S.exitMultiSelectMode(),D=b.exec(S,y.args||{})):D=b.multiSelectAction(S,y.args||{});else{var D=b.exec(S,y.args||{});S.multiSelect.addRange(S.multiSelect.toOrientedRange()),S.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,b,S){if(!this.inVirtualSelectionMode){var D=S&&S.keepOrder,g=S==!0||S&&S.$byLines,C=this.session,F=this.selection,E=F.rangeList,T=(D?F:E).ranges,M;if(!T.length)return y.exec?y.exec(this,b||{}):y(this,b||{});var w=F._eventRegistry;F._eventRegistry={};var L=new u(C);this.inVirtualSelectionMode=!0;for(var A=T.length;A--;){if(g)for(;A>0&&T[A].start.row==T[A-1].end.row;)A--;L.fromOrientedRange(T[A]),L.index=A,this.selection=C.selection=L;var R=y.exec?y.exec(this,b||{}):y(this,b||{});!M&&R!==void 0&&(M=R),L.toOrientedRange(T[A])}L.detach(),this.selection=C.selection=F,this.inVirtualSelectionMode=!1,F._eventRegistry=w,F.mergeOverlappingRanges(),F.ranges[0]&&F.fromOrientedRange(F.ranges[0]);var x=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),x&&x.from==x.to&&this.renderer.animateScrolling(x.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var b=this.multiSelect.rangeList.ranges,S=[],D=0;D<b.length;D++)S.push(this.session.getTextRange(b[D]));var g=this.session.getDocument().getNewLineCharacter();y=S.join(g),y.length==(S.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,b){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var S=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&b==this.multiSelect.anchor)return;var D=b==this.multiSelect.anchor?S.cursor==S.start?S.end:S.start:S.cursor;D.row!=b.row||this.session.$clipPositionToDocument(D.row,D.column).column!=b.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,b,S){if(b=b||{},b.needle=y||b.needle,b.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();b.needle=this.session.getTextRange(D)}this.$search.set(b);var g=this.$search.findAll(this.session);if(!g.length)return 0;var C=this.multiSelect;S||C.toSingleRange(g[0]);for(var F=g.length;F--;)C.addRange(g[F],!0);return D&&C.rangeList.rangeAtPoint(D.start)&&C.addRange(D,!0),g.length},this.selectMoreLines=function(y,b){var S=this.selection.toOrientedRange(),D=S.cursor==S.end,g=this.session.documentToScreenPosition(S.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var C=this.session.screenToDocumentPosition(g.row+y,g.column);if(S.isEmpty())var E=C;else var F=this.session.documentToScreenPosition(D?S.end:S.start),E=this.session.screenToDocumentPosition(F.row+y,F.column);if(D){var T=v.fromPoints(C,E);T.cursor=T.start}else{var T=v.fromPoints(E,C);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(S);else if(b)var M=S.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var b=this.session,S=b.multiSelect,D=S.ranges,g=D.length;g--;){var C=D[g];if(C.isEmpty()){var F=b.getWordRange(C.start.row,C.start.column);C.start.row=F.start.row,C.start.column=F.start.column,C.end.row=F.end.row,C.end.column=F.end.column}}S.mergeOverlappingRanges();for(var E=[],g=D.length;g--;){var C=D[g];E.unshift(b.getTextRange(C))}y<0?E.unshift(E.pop()):E.push(E.shift());for(var g=D.length;g--;){var C=D[g],T=C.clone();b.replace(C,E[g]),C.start.row=T.start.row,C.start.column=T.start.column}S.fromOrientedRange(S.ranges[0])},this.selectMore=function(y,b,S){var D=this.session,g=D.multiSelect,C=g.toOrientedRange();if(!(C.isEmpty()&&(C=D.getWordRange(C.start.row,C.start.column),C.cursor=y==-1?C.start:C.end,this.multiSelect.addRange(C),S))){var F=D.getTextRange(C),E=f(D,F,y);E&&(E.cursor=y==-1?E.start:E.end,this.session.unfold(E),this.multiSelect.addRange(E),this.renderer.scrollCursorIntoView(null,.5)),b&&this.multiSelect.substractPoint(C.cursor)}},this.alignCursors=function(){var y=this.session,b=y.multiSelect,S=b.ranges,D=-1,g=S.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!S.length||g.length==S.length-1){var C=this.selection.getRange(),F=C.start.row,E=C.end.row,T=F==E;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(E);while(/[=:]/.test(w)&&++E<M);do w=this.session.getLine(F);while(/[=:]/.test(w)&&--F>0);F<0&&(F=0),E>=M&&(E=M-1)}var L=this.session.removeFullLines(F,E);L=this.$reAlignText(L,T),this.session.insert({row:F,column:0},L.join(`
`)+`
`),T||(C.start.column=0,C.end.column=L[L.length-1].length),this.selection.setRange(C)}else{g.forEach(function(I){b.substractPoint(I.cursor)});var A=0,R=1/0,x=S.map(function(I){var $=I.cursor,k=y.getLine($.row),H=k.substr($.column).search(/\S/g);return H==-1&&(H=0),$.column>A&&(A=$.column),H<R&&(R=H),H});S.forEach(function(I,$){var k=I.cursor,H=A-k.column,U=x[$]-R;H>U?y.insert(k,s.stringRepeat(" ",H-U)):y.remove(new v(k.row,k.column,k.row,k.column-H+U)),I.start.column=I.end.column=A,I.start.row=I.end.row=k.row,I.cursor=I.end}),b.fromOrientedRange(S[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,b){var S=!0,D=!0,g,C,F;return y.map(function(L){var A=L.match(/(\s*)(.*?)(\s*)([=:].*)/);return A?g==null?(g=A[1].length,C=A[2].length,F=A[3].length,A):(g+C+F!=A[1].length+A[2].length+A[3].length&&(D=!1),g!=A[1].length&&(S=!1),g>A[1].length&&(g=A[1].length),C<A[2].length&&(C=A[2].length),F>A[3].length&&(F=A[3].length),A):[L]}).map(b?T:S?D?M:T:w);function E(L){return s.stringRepeat(" ",L)}function T(L){return L[2]?E(g)+L[2]+E(C-L[2].length+F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}function M(L){return L[2]?E(g+C-L[2].length)+L[2]+E(F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}function w(L){return L[2]?E(g)+L[2]+E(F)+L[4].replace(/^([=:])\s+/,"$1 "):L[0]}}}).call(r.prototype);function d(y,b){return y.row==b.row&&y.column==b.column}t.onSessionChange=function(y){var b=y.session;b&&!b.multiSelect&&(b.$selectionMarkers=[],b.selection.$initRangeList(),b.multiSelect=b.selection),this.multiSelect=b&&b.multiSelect;var S=y.oldSession;S&&(S.multiSelect.off("addRange",this.$onAddRange),S.multiSelect.off("removeRange",this.$onRemoveRange),S.multiSelect.off("multiSelect",this.$onMultiSelect),S.multiSelect.off("singleSelect",this.$onSingleSelect),S.multiSelect.lead.off("change",this.$checkMultiselectChange),S.multiSelect.anchor.off("change",this.$checkMultiselectChange)),b&&(b.multiSelect.on("addRange",this.$onAddRange),b.multiSelect.on("removeRange",this.$onRemoveRange),b.multiSelect.on("multiSelect",this.$onMultiSelect),b.multiSelect.on("singleSelect",this.$onSingleSelect),b.multiSelect.lead.on("change",this.$checkMultiselectChange),b.multiSelect.anchor.on("change",this.$checkMultiselectChange)),b&&this.inMultiSelectMode!=b.selection.inMultiSelectMode&&(b.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(o.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var b=y.textInput.getElement(),S=!1;p.addListener(b,"keydown",function(g){var C=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&C?S||(y.renderer.setMouseCursor("crosshair"),S=!0):S&&D()},y),p.addListener(b,"keyup",D,y),p.addListener(b,"blur",D,y);function D(g){S&&(y.renderer.setMouseCursor(""),S=!1)}}t.MultiSelect=_,e("./config").defineOptions(r.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var h=e("../../range").Range,v=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(u,a,p){var s=u.getLine(p);return this.foldingStartMarker.test(s)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(s)?"end":""},this.getFoldWidgetRange=function(u,a,p){return null},this.indentationBlock=function(u,a,p){var s=/\S/,o=u.getLine(a),i=o.search(s);if(i!=-1){for(var c=p||o.length,f=u.getLength(),l=a,r=a;++a<f;){var d=u.getLine(a).search(s);if(d!=-1){if(d<=i){var _=u.getTokenAt(a,0);if(!_||_.type!=="string")break}r=a}}if(r>l){var m=u.getLine(r).length;return new h(l,c,r,m)}}},this.openingBracketBlock=function(u,a,p,s,o){var i={row:p,column:s+1},c=u.$findClosingBracket(a,i,o);if(c){var f=u.foldWidgets[c.row];return f==null&&(f=u.getFoldWidget(c.row)),f=="start"&&c.row>i.row&&(c.row--,c.column=u.getLine(c.row).length),h.fromPoints(i,c)}},this.closingBracketBlock=function(u,a,p,s,o){var i={row:p,column:s},c=u.$findOpeningBracket(a,i);if(c)return c.column++,i.column--,h.fromPoints(c,i)}}).call(v.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var h=e("../line_widgets").LineWidgets,v=e("../lib/dom"),u=e("../range").Range,a=e("../config").nls;function p(o,i,c){for(var f=0,l=o.length-1;f<=l;){var r=f+l>>1,d=c(i,o[r]);if(d>0)f=r+1;else if(d<0)l=r-1;else return r}return-(f+1)}function s(o,i,c){var f=o.getAnnotations().sort(u.comparePoints);if(f.length){var l=p(f,{row:i,column:-1},u.comparePoints);l<0&&(l=-l-1),l>=f.length?l=c>0?0:f.length-1:l===0&&c<0&&(l=f.length-1);var r=f[l];if(!(!r||!c)){if(r.row===i){do r=f[l+=c];while(r&&r.row===i);if(!r)return f.slice()}var d=[];i=r.row;do d[c<0?"unshift":"push"](r),r=f[l+=c];while(r&&r.row==i);return d.length&&d}}}t.showErrorMarker=function(o,i){var c=o.session;c.widgetManager||(c.widgetManager=new h(c),c.widgetManager.attach(o));var f=o.getCursorPosition(),l=f.row,r=c.widgetManager.getWidgetsAtRow(l).filter(function(C){return C.type=="errorMarker"})[0];r?r.destroy():l-=i;var d=s(c,l,i),_;if(d){var m=d[0];f.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,f.row=m.row,_=o.renderer.$gutterLayer.$annotations[f.row]}else{if(r)return;_={text:[a("Looks good!")],className:"ace_ok"}}o.session.unfold(f.row),o.selection.moveToPosition(f);var y={row:f.row,fixedWidth:!0,coverGutter:!0,el:v.createElement("div"),type:"errorMarker"},b=y.el.appendChild(v.createElement("div")),S=y.el.appendChild(v.createElement("div"));S.className="error_widget_arrow "+_.className;var D=o.renderer.$cursorLayer.getPixelPosition(f).left;S.style.left=D+o.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",b.className="error_widget "+_.className,b.innerHTML=_.text.join("<br>"),b.appendChild(v.createElement("div"));var g=function(C,F,E){if(F===0&&(E==="esc"||E==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){o.$mouseHandler.isMousePressed||(o.keyBinding.removeKeyboardHandler(g),c.widgetManager.removeLineWidget(y),o.off("changeSelection",y.destroy),o.off("changeSession",y.destroy),o.off("mouseup",y.destroy),o.off("change",y.destroy))},o.keyBinding.addKeyboardHandler(g),o.on("changeSelection",y.destroy),o.on("changeSession",y.destroy),o.on("mouseup",y.destroy),o.on("change",y.destroy),o.session.widgetManager.addLineWidget(y),y.el.onmousedown=o.focus.bind(o),o.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},v.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var h=e("./lib/dom"),v=e("./range").Range,u=e("./editor").Editor,a=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,s=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(o,i){if(typeof o=="string"){var c=o;if(o=document.getElementById(c),!o)throw new Error("ace.edit can't find div #"+c)}if(o&&o.env&&o.env.editor instanceof u)return o.env.editor;var f="";if(o&&/input|textarea/i.test(o.tagName)){var l=o;f=l.value,o=h.createElement("pre"),l.parentNode.replaceChild(o,l)}else o&&(f=o.textContent,o.innerHTML="");var r=t.createEditSession(f),d=new u(new s(o),r,i),_={document:r,editor:d,onResize:d.resize.bind(d,null)};return l&&(_.textarea=l),d.on("destroy",function(){_.editor.container.env=null}),d.container.env=d.env=_,d},t.createEditSession=function(o,i){var c=new a(o,i);return c.setUndoManager(new p),c},t.Range=v,t.Editor=u,t.EditSession=a,t.UndoManager=p,t.VirtualRenderer=s,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Xp=="object"&&typeof MT=="object"&&Xp&&(Xp.exports=t.ace)})})()});var H1=ht(O1=>{"use strict";O1.supports=function(...t){let n=t.reduce((h,v)=>Object.assign(h,v),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Do=ht((gce,P1)=>{"use strict";P1.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var W1=ht(hh=>{"use strict";hh.byteLength=dB;hh.toByteArray=hB;hh.fromByteArray=mB;var Jo=[],ro=[],fB=typeof Uint8Array<"u"?Uint8Array:Array,oy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Xu=0,N1=oy.length;Xu<N1;++Xu)Jo[Xu]=oy[Xu],ro[oy.charCodeAt(Xu)]=Xu;var Xu,N1;ro["-".charCodeAt(0)]=62;ro["_".charCodeAt(0)]=63;function B1(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var h=n===t?0:4-n%4;return[n,h]}function dB(e){var t=B1(e),n=t[0],h=t[1];return(n+h)*3/4-h}function pB(e,t,n){return(t+n)*3/4-n}function hB(e){var t,n=B1(e),h=n[0],v=n[1],u=new fB(pB(e,h,v)),a=0,p=v>0?h-4:h,s;for(s=0;s<p;s+=4)t=ro[e.charCodeAt(s)]<<18|ro[e.charCodeAt(s+1)]<<12|ro[e.charCodeAt(s+2)]<<6|ro[e.charCodeAt(s+3)],u[a++]=t>>16&255,u[a++]=t>>8&255,u[a++]=t&255;return v===2&&(t=ro[e.charCodeAt(s)]<<2|ro[e.charCodeAt(s+1)]>>4,u[a++]=t&255),v===1&&(t=ro[e.charCodeAt(s)]<<10|ro[e.charCodeAt(s+1)]<<4|ro[e.charCodeAt(s+2)]>>2,u[a++]=t>>8&255,u[a++]=t&255),u}function _B(e){return Jo[e>>18&63]+Jo[e>>12&63]+Jo[e>>6&63]+Jo[e&63]}function vB(e,t,n){for(var h,v=[],u=t;u<n;u+=3)h=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),v.push(_B(h));return v.join("")}function mB(e){for(var t,n=e.length,h=n%3,v=[],u=16383,a=0,p=n-h;a<p;a+=u)v.push(vB(e,a,a+u>p?p:a+u));return h===1?(t=e[n-1],v.push(Jo[t>>2]+Jo[t<<4&63]+"==")):h===2&&(t=(e[n-2]<<8)+e[n-1],v.push(Jo[t>>10]+Jo[t>>4&63]+Jo[t<<2&63]+"=")),v.join("")}});var U1=ht(ay=>{ay.read=function(e,t,n,h,v){var u,a,p=v*8-h-1,s=(1<<p)-1,o=s>>1,i=-7,c=n?v-1:0,f=n?-1:1,l=e[t+c];for(c+=f,u=l&(1<<-i)-1,l>>=-i,i+=p;i>0;u=u*256+e[t+c],c+=f,i-=8);for(a=u&(1<<-i)-1,u>>=-i,i+=h;i>0;a=a*256+e[t+c],c+=f,i-=8);if(u===0)u=1-o;else{if(u===s)return a?NaN:(l?-1:1)*(1/0);a=a+Math.pow(2,h),u=u-o}return(l?-1:1)*a*Math.pow(2,u-h)};ay.write=function(e,t,n,h,v,u){var a,p,s,o=u*8-v-1,i=(1<<o)-1,c=i>>1,f=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=h?0:u-1,r=h?1:-1,d=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,a=i):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),a+c>=1?t+=f/s:t+=f*Math.pow(2,1-c),t*s>=2&&(a++,s/=2),a+c>=i?(p=0,a=i):a+c>=1?(p=(t*s-1)*Math.pow(2,v),a=a+c):(p=t*Math.pow(2,c-1)*Math.pow(2,v),a=0));v>=8;e[n+l]=p&255,l+=r,p/=256,v-=8);for(a=a<<v|p,o+=v;o>0;e[n+l]=a&255,l+=r,a/=256,o-=8);e[n+l-r]|=d*128}});var mh=ht(Dc=>{"use strict";var iy=W1(),gc=U1(),q1=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Dc.Buffer=Y;Dc.SlowBuffer=wB;Dc.INSPECT_MAX_BYTES=50;var _h=2147483647;Dc.kMaxLength=_h;Y.TYPED_ARRAY_SUPPORT=gB();!Y.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function gB(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(Y.prototype,"parent",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.buffer}});Object.defineProperty(Y.prototype,"offset",{enumerable:!0,get:function(){if(Y.isBuffer(this))return this.byteOffset}});function $a(e){if(e>_h)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,Y.prototype),t}function Y(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ly(e)}return j1(e,t,n)}Y.poolSize=8192;function j1(e,t,n){if(typeof e=="string")return DB(e,t);if(ArrayBuffer.isView(e))return bB(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Ko(e,ArrayBuffer)||e&&Ko(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ko(e,SharedArrayBuffer)||e&&Ko(e.buffer,SharedArrayBuffer)))return sy(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let h=e.valueOf&&e.valueOf();if(h!=null&&h!==e)return Y.from(h,t,n);let v=CB(e);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return Y.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}Y.from=function(e,t,n){return j1(e,t,n)};Object.setPrototypeOf(Y.prototype,Uint8Array.prototype);Object.setPrototypeOf(Y,Uint8Array);function J1(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function yB(e,t,n){return J1(e),e<=0?$a(e):t!==void 0?typeof n=="string"?$a(e).fill(t,n):$a(e).fill(t):$a(e)}Y.alloc=function(e,t,n){return yB(e,t,n)};function ly(e){return J1(e),$a(e<0?0:fy(e)|0)}Y.allocUnsafe=function(e){return ly(e)};Y.allocUnsafeSlow=function(e){return ly(e)};function DB(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!Y.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=K1(e,t)|0,h=$a(n),v=h.write(e,t);return v!==n&&(h=h.slice(0,v)),h}function uy(e){let t=e.length<0?0:fy(e.length)|0,n=$a(t);for(let h=0;h<t;h+=1)n[h]=e[h]&255;return n}function bB(e){if(Ko(e,Uint8Array)){let t=new Uint8Array(e);return sy(t.buffer,t.byteOffset,t.byteLength)}return uy(e)}function sy(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let h;return t===void 0&&n===void 0?h=new Uint8Array(e):n===void 0?h=new Uint8Array(e,t):h=new Uint8Array(e,t,n),Object.setPrototypeOf(h,Y.prototype),h}function CB(e){if(Y.isBuffer(e)){let t=fy(e.length)|0,n=$a(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||py(e.length)?$a(0):uy(e);if(e.type==="Buffer"&&Array.isArray(e.data))return uy(e.data)}function fy(e){if(e>=_h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_h.toString(16)+" bytes");return e|0}function wB(e){return+e!=e&&(e=0),Y.alloc(+e)}Y.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==Y.prototype};Y.compare=function(t,n){if(Ko(t,Uint8Array)&&(t=Y.from(t,t.offset,t.byteLength)),Ko(n,Uint8Array)&&(n=Y.from(n,n.offset,n.byteLength)),!Y.isBuffer(t)||!Y.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let h=t.length,v=n.length;for(let u=0,a=Math.min(h,v);u<a;++u)if(t[u]!==n[u]){h=t[u],v=n[u];break}return h<v?-1:v<h?1:0};Y.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Y.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return Y.alloc(0);let h;if(n===void 0)for(n=0,h=0;h<t.length;++h)n+=t[h].length;let v=Y.allocUnsafe(n),u=0;for(h=0;h<t.length;++h){let a=t[h];if(Ko(a,Uint8Array))u+a.length>v.length?(Y.isBuffer(a)||(a=Y.from(a)),a.copy(v,u)):Uint8Array.prototype.set.call(v,a,u);else if(Y.isBuffer(a))a.copy(v,u);else throw new TypeError('"list" argument must be an Array of Buffers');u+=a.length}return v};function K1(e,t){if(Y.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Ko(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,h=arguments.length>2&&arguments[2]===!0;if(!h&&n===0)return 0;let v=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return cy(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return oM(e).length;default:if(v)return h?-1:cy(e).length;t=(""+t).toLowerCase(),v=!0}}Y.byteLength=K1;function SB(e,t,n){let h=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return $B(this,t,n);case"utf8":case"utf-8":return X1(this,t,n);case"ascii":return IB(this,t,n);case"latin1":case"binary":return RB(this,t,n);case"base64":return AB(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return kB(this,t,n);default:if(h)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),h=!0}}Y.prototype._isBuffer=!0;function Yu(e,t,n){let h=e[t];e[t]=e[n],e[n]=h}Y.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)Yu(this,n,n+1);return this};Y.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)Yu(this,n,n+3),Yu(this,n+1,n+2);return this};Y.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)Yu(this,n,n+7),Yu(this,n+1,n+6),Yu(this,n+2,n+5),Yu(this,n+3,n+4);return this};Y.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?X1(this,0,t):SB.apply(this,arguments)};Y.prototype.toLocaleString=Y.prototype.toString;Y.prototype.equals=function(t){if(!Y.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:Y.compare(this,t)===0};Y.prototype.inspect=function(){let t="",n=Dc.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};q1&&(Y.prototype[q1]=Y.prototype.inspect);Y.prototype.compare=function(t,n,h,v,u){if(Ko(t,Uint8Array)&&(t=Y.from(t,t.offset,t.byteLength)),!Y.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),h===void 0&&(h=t?t.length:0),v===void 0&&(v=0),u===void 0&&(u=this.length),n<0||h>t.length||v<0||u>this.length)throw new RangeError("out of range index");if(v>=u&&n>=h)return 0;if(v>=u)return-1;if(n>=h)return 1;if(n>>>=0,h>>>=0,v>>>=0,u>>>=0,this===t)return 0;let a=u-v,p=h-n,s=Math.min(a,p),o=this.slice(v,u),i=t.slice(n,h);for(let c=0;c<s;++c)if(o[c]!==i[c]){a=o[c],p=i[c];break}return a<p?-1:p<a?1:0};function Q1(e,t,n,h,v){if(e.length===0)return-1;if(typeof n=="string"?(h=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,py(n)&&(n=v?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(v)return-1;n=e.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=Y.from(t,h)),Y.isBuffer(t))return t.length===0?-1:z1(e,t,n,h,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):z1(e,[t],n,h,v);throw new TypeError("val must be string, number or Buffer")}function z1(e,t,n,h,v){let u=1,a=e.length,p=t.length;if(h!==void 0&&(h=String(h).toLowerCase(),h==="ucs2"||h==="ucs-2"||h==="utf16le"||h==="utf-16le")){if(e.length<2||t.length<2)return-1;u=2,a/=2,p/=2,n/=2}function s(i,c){return u===1?i[c]:i.readUInt16BE(c*u)}let o;if(v){let i=-1;for(o=n;o<a;o++)if(s(e,o)===s(t,i===-1?0:o-i)){if(i===-1&&(i=o),o-i+1===p)return i*u}else i!==-1&&(o-=o-i),i=-1}else for(n+p>a&&(n=a-p),o=n;o>=0;o--){let i=!0;for(let c=0;c<p;c++)if(s(e,o+c)!==s(t,c)){i=!1;break}if(i)return o}return-1}Y.prototype.includes=function(t,n,h){return this.indexOf(t,n,h)!==-1};Y.prototype.indexOf=function(t,n,h){return Q1(this,t,n,h,!0)};Y.prototype.lastIndexOf=function(t,n,h){return Q1(this,t,n,h,!1)};function EB(e,t,n,h){n=Number(n)||0;let v=e.length-n;h?(h=Number(h),h>v&&(h=v)):h=v;let u=t.length;h>u/2&&(h=u/2);let a;for(a=0;a<h;++a){let p=parseInt(t.substr(a*2,2),16);if(py(p))return a;e[n+a]=p}return a}function TB(e,t,n,h){return vh(cy(t,e.length-n),e,n,h)}function MB(e,t,n,h){return vh(NB(t),e,n,h)}function LB(e,t,n,h){return vh(oM(t),e,n,h)}function FB(e,t,n,h){return vh(BB(t,e.length-n),e,n,h)}Y.prototype.write=function(t,n,h,v){if(n===void 0)v="utf8",h=this.length,n=0;else if(h===void 0&&typeof n=="string")v=n,h=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(h)?(h=h>>>0,v===void 0&&(v="utf8")):(v=h,h=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let u=this.length-n;if((h===void 0||h>u)&&(h=u),t.length>0&&(h<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let a=!1;for(;;)switch(v){case"hex":return EB(this,t,n,h);case"utf8":case"utf-8":return TB(this,t,n,h);case"ascii":case"latin1":case"binary":return MB(this,t,n,h);case"base64":return LB(this,t,n,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return FB(this,t,n,h);default:if(a)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),a=!0}};Y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function AB(e,t,n){return t===0&&n===e.length?iy.fromByteArray(e):iy.fromByteArray(e.slice(t,n))}function X1(e,t,n){n=Math.min(e.length,n);let h=[],v=t;for(;v<n;){let u=e[v],a=null,p=u>239?4:u>223?3:u>191?2:1;if(v+p<=n){let s,o,i,c;switch(p){case 1:u<128&&(a=u);break;case 2:s=e[v+1],(s&192)===128&&(c=(u&31)<<6|s&63,c>127&&(a=c));break;case 3:s=e[v+1],o=e[v+2],(s&192)===128&&(o&192)===128&&(c=(u&15)<<12|(s&63)<<6|o&63,c>2047&&(c<55296||c>57343)&&(a=c));break;case 4:s=e[v+1],o=e[v+2],i=e[v+3],(s&192)===128&&(o&192)===128&&(i&192)===128&&(c=(u&15)<<18|(s&63)<<12|(o&63)<<6|i&63,c>65535&&c<1114112&&(a=c))}}a===null?(a=65533,p=1):a>65535&&(a-=65536,h.push(a>>>10&1023|55296),a=56320|a&1023),h.push(a),v+=p}return xB(h)}var V1=4096;function xB(e){let t=e.length;if(t<=V1)return String.fromCharCode.apply(String,e);let n="",h=0;for(;h<t;)n+=String.fromCharCode.apply(String,e.slice(h,h+=V1));return n}function IB(e,t,n){let h="";n=Math.min(e.length,n);for(let v=t;v<n;++v)h+=String.fromCharCode(e[v]&127);return h}function RB(e,t,n){let h="";n=Math.min(e.length,n);for(let v=t;v<n;++v)h+=String.fromCharCode(e[v]);return h}function $B(e,t,n){let h=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>h)&&(n=h);let v="";for(let u=t;u<n;++u)v+=WB[e[u]];return v}function kB(e,t,n){let h=e.slice(t,n),v="";for(let u=0;u<h.length-1;u+=2)v+=String.fromCharCode(h[u]+h[u+1]*256);return v}Y.prototype.slice=function(t,n){let h=this.length;t=~~t,n=n===void 0?h:~~n,t<0?(t+=h,t<0&&(t=0)):t>h&&(t=h),n<0?(n+=h,n<0&&(n=0)):n>h&&(n=h),n<t&&(n=t);let v=this.subarray(t,n);return Object.setPrototypeOf(v,Y.prototype),v};function $n(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}Y.prototype.readUintLE=Y.prototype.readUIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||$n(t,n,this.length);let v=this[t],u=1,a=0;for(;++a<n&&(u*=256);)v+=this[t+a]*u;return v};Y.prototype.readUintBE=Y.prototype.readUIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||$n(t,n,this.length);let v=this[t+--n],u=1;for(;n>0&&(u*=256);)v+=this[t+--n]*u;return v};Y.prototype.readUint8=Y.prototype.readUInt8=function(t,n){return t=t>>>0,n||$n(t,1,this.length),this[t]};Y.prototype.readUint16LE=Y.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||$n(t,2,this.length),this[t]|this[t+1]<<8};Y.prototype.readUint16BE=Y.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||$n(t,2,this.length),this[t]<<8|this[t+1]};Y.prototype.readUint32LE=Y.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};Y.prototype.readUint32BE=Y.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};Y.prototype.readBigUInt64LE=Qi(function(t){t=t>>>0,yc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&cf(t,this.length-8);let v=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,u=this[++t]+this[++t]*2**8+this[++t]*2**16+h*2**24;return BigInt(v)+(BigInt(u)<<BigInt(32))});Y.prototype.readBigUInt64BE=Qi(function(t){t=t>>>0,yc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&cf(t,this.length-8);let v=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],u=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h;return(BigInt(v)<<BigInt(32))+BigInt(u)});Y.prototype.readIntLE=function(t,n,h){t=t>>>0,n=n>>>0,h||$n(t,n,this.length);let v=this[t],u=1,a=0;for(;++a<n&&(u*=256);)v+=this[t+a]*u;return u*=128,v>=u&&(v-=Math.pow(2,8*n)),v};Y.prototype.readIntBE=function(t,n,h){t=t>>>0,n=n>>>0,h||$n(t,n,this.length);let v=n,u=1,a=this[t+--v];for(;v>0&&(u*=256);)a+=this[t+--v]*u;return u*=128,a>=u&&(a-=Math.pow(2,8*n)),a};Y.prototype.readInt8=function(t,n){return t=t>>>0,n||$n(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};Y.prototype.readInt16LE=function(t,n){t=t>>>0,n||$n(t,2,this.length);let h=this[t]|this[t+1]<<8;return h&32768?h|4294901760:h};Y.prototype.readInt16BE=function(t,n){t=t>>>0,n||$n(t,2,this.length);let h=this[t+1]|this[t]<<8;return h&32768?h|4294901760:h};Y.prototype.readInt32LE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};Y.prototype.readInt32BE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};Y.prototype.readBigInt64LE=Qi(function(t){t=t>>>0,yc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&cf(t,this.length-8);let v=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(h<<24);return(BigInt(v)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});Y.prototype.readBigInt64BE=Qi(function(t){t=t>>>0,yc(t,"offset");let n=this[t],h=this[t+7];(n===void 0||h===void 0)&&cf(t,this.length-8);let v=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(v)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+h)});Y.prototype.readFloatLE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),gc.read(this,t,!0,23,4)};Y.prototype.readFloatBE=function(t,n){return t=t>>>0,n||$n(t,4,this.length),gc.read(this,t,!1,23,4)};Y.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||$n(t,8,this.length),gc.read(this,t,!0,52,8)};Y.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||$n(t,8,this.length),gc.read(this,t,!1,52,8)};function Cr(e,t,n,h,v,u){if(!Y.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<u)throw new RangeError('"value" argument is out of bounds');if(n+h>e.length)throw new RangeError("Index out of range")}Y.prototype.writeUintLE=Y.prototype.writeUIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){let p=Math.pow(2,8*h)-1;Cr(this,t,n,h,p,0)}let u=1,a=0;for(this[n]=t&255;++a<h&&(u*=256);)this[n+a]=t/u&255;return n+h};Y.prototype.writeUintBE=Y.prototype.writeUIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,h=h>>>0,!v){let p=Math.pow(2,8*h)-1;Cr(this,t,n,h,p,0)}let u=h-1,a=1;for(this[n+u]=t&255;--u>=0&&(a*=256);)this[n+u]=t/a&255;return n+h};Y.prototype.writeUint8=Y.prototype.writeUInt8=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,1,255,0),this[n]=t&255,n+1};Y.prototype.writeUint16LE=Y.prototype.writeUInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};Y.prototype.writeUint16BE=Y.prototype.writeUInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};Y.prototype.writeUint32LE=Y.prototype.writeUInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};Y.prototype.writeUint32BE=Y.prototype.writeUInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function Y1(e,t,n,h,v){rM(t,h,v,e,n,7);let u=Number(t&BigInt(4294967295));e[n++]=u,u=u>>8,e[n++]=u,u=u>>8,e[n++]=u,u=u>>8,e[n++]=u;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,n}function Z1(e,t,n,h,v){rM(t,h,v,e,n,7);let u=Number(t&BigInt(4294967295));e[n+7]=u,u=u>>8,e[n+6]=u,u=u>>8,e[n+5]=u,u=u>>8,e[n+4]=u;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a=a>>8,e[n+2]=a,a=a>>8,e[n+1]=a,a=a>>8,e[n]=a,n+8}Y.prototype.writeBigUInt64LE=Qi(function(t,n=0){return Y1(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeBigUInt64BE=Qi(function(t,n=0){return Z1(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});Y.prototype.writeIntLE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){let s=Math.pow(2,8*h-1);Cr(this,t,n,h,s-1,-s)}let u=0,a=1,p=0;for(this[n]=t&255;++u<h&&(a*=256);)t<0&&p===0&&this[n+u-1]!==0&&(p=1),this[n+u]=(t/a>>0)-p&255;return n+h};Y.prototype.writeIntBE=function(t,n,h,v){if(t=+t,n=n>>>0,!v){let s=Math.pow(2,8*h-1);Cr(this,t,n,h,s-1,-s)}let u=h-1,a=1,p=0;for(this[n+u]=t&255;--u>=0&&(a*=256);)t<0&&p===0&&this[n+u+1]!==0&&(p=1),this[n+u]=(t/a>>0)-p&255;return n+h};Y.prototype.writeInt8=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};Y.prototype.writeInt16LE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};Y.prototype.writeInt16BE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};Y.prototype.writeInt32LE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};Y.prototype.writeInt32BE=function(t,n,h){return t=+t,n=n>>>0,h||Cr(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};Y.prototype.writeBigInt64LE=Qi(function(t,n=0){return Y1(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});Y.prototype.writeBigInt64BE=Qi(function(t,n=0){return Z1(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function eM(e,t,n,h,v,u){if(n+h>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function tM(e,t,n,h,v){return t=+t,n=n>>>0,v||eM(e,t,n,4,34028234663852886e22,-34028234663852886e22),gc.write(e,t,n,h,23,4),n+4}Y.prototype.writeFloatLE=function(t,n,h){return tM(this,t,n,!0,h)};Y.prototype.writeFloatBE=function(t,n,h){return tM(this,t,n,!1,h)};function nM(e,t,n,h,v){return t=+t,n=n>>>0,v||eM(e,t,n,8,17976931348623157e292,-17976931348623157e292),gc.write(e,t,n,h,52,8),n+8}Y.prototype.writeDoubleLE=function(t,n,h){return nM(this,t,n,!0,h)};Y.prototype.writeDoubleBE=function(t,n,h){return nM(this,t,n,!1,h)};Y.prototype.copy=function(t,n,h,v){if(!Y.isBuffer(t))throw new TypeError("argument should be a Buffer");if(h||(h=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<h&&(v=h),v===h||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(h<0||h>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-h&&(v=t.length-n+h);let u=v-h;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,h,v):Uint8Array.prototype.set.call(t,this.subarray(h,v),n),u};Y.prototype.fill=function(t,n,h,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,h=this.length):typeof h=="string"&&(v=h,h=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!Y.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){let a=t.charCodeAt(0);(v==="utf8"&&a<128||v==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<h)throw new RangeError("Out of range index");if(h<=n)return this;n=n>>>0,h=h===void 0?this.length:h>>>0,t||(t=0);let u;if(typeof t=="number")for(u=n;u<h;++u)this[u]=t;else{let a=Y.isBuffer(t)?t:Y.from(t,v),p=a.length;if(p===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(u=0;u<h-n;++u)this[u+n]=a[u%p]}return this};var mc={};function dy(e,t,n){mc[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}dy("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);dy("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);dy("ERR_OUT_OF_RANGE",function(e,t,n){let h=`The value of "${e}" is out of range.`,v=n;return Number.isInteger(n)&&Math.abs(n)>2**32?v=G1(String(n)):typeof n=="bigint"&&(v=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(v=G1(v)),v+="n"),h+=` It must be ${t}. Received ${v}`,h},RangeError);function G1(e){let t="",n=e.length,h=e[0]==="-"?1:0;for(;n>=h+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function OB(e,t,n){yc(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&cf(t,e.length-(n+1))}function rM(e,t,n,h,v,u){if(e>n||e<t){let a=typeof t=="bigint"?"n":"",p;throw u>3?t===0||t===BigInt(0)?p=`>= 0${a} and < 2${a} ** ${(u+1)*8}${a}`:p=`>= -(2${a} ** ${(u+1)*8-1}${a}) and < 2 ** ${(u+1)*8-1}${a}`:p=`>= ${t}${a} and <= ${n}${a}`,new mc.ERR_OUT_OF_RANGE("value",p,e)}OB(h,v,u)}function yc(e,t){if(typeof e!="number")throw new mc.ERR_INVALID_ARG_TYPE(t,"number",e)}function cf(e,t,n){throw Math.floor(e)!==e?(yc(e,n),new mc.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new mc.ERR_BUFFER_OUT_OF_BOUNDS:new mc.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var HB=/[^+/0-9A-Za-z-_]/g;function PB(e){if(e=e.split("=")[0],e=e.trim().replace(HB,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function cy(e,t){t=t||1/0;let n,h=e.length,v=null,u=[];for(let a=0;a<h;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&u.push(239,191,189);continue}else if(a+1===h){(t-=3)>-1&&u.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&u.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&u.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;u.push(n)}else if(n<2048){if((t-=2)<0)break;u.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;u.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;u.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return u}function NB(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function BB(e,t){let n,h,v,u=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),h=n>>8,v=n%256,u.push(v),u.push(h);return u}function oM(e){return iy.toByteArray(PB(e))}function vh(e,t,n,h){let v;for(v=0;v<h&&!(v+n>=t.length||v>=e.length);++v)t[v+n]=e[v];return v}function Ko(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function py(e){return e!==e}var WB=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let h=n*16;for(let v=0;v<16;++v)t[h+v]=e[n]+e[v]}return t}();function Qi(e){return typeof BigInt>"u"?UB:e}function UB(){throw new Error("BigInt not supported")}});var _y=ht((wce,aM)=>{"use strict";var hy=null;aM.exports=function(){return hy===null&&(hy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),hy}});var gy=ht(iM=>{"use strict";var vy=Do(),qB=new Set(["buffer","view","utf8"]),my=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!qB.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new vy(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new vy(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new vy(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};iM.Encoding=my});var Cy=ht(gh=>{"use strict";var{Buffer:Dy}=mh()||{},{Encoding:by}=gy(),zB=_y(),lf=class extends by{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new ff({encode:this.encode,decode:t=>this.decode(Dy.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ff=class extends by{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new lf({encode:t=>{let n=this.encode(t);return Dy.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},yy=class extends by{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new lf({encode:t=>Dy.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=zB();return new ff({encode:h=>t.encode(this.encode(h)),decode:h=>this.decode(n.decode(h)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};gh.BufferFormat=lf;gh.ViewFormat=ff;gh.UTF8Format=yy});var lM=ht(Zu=>{"use strict";var{Buffer:Xn}=mh()||{Buffer:{isBuffer:()=>!1}},{textEncoder:sM,textDecoder:uM}=_y()(),{BufferFormat:df,ViewFormat:wy,UTF8Format:cM}=Cy(),yh=e=>e;Zu.utf8=new cM({encode:function(e){return Xn.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?uM.decode(e):String(e)},decode:yh,name:"utf8",createViewTranscoder(){return new wy({encode:function(e){return ArrayBuffer.isView(e)?e:sM.encode(e)},decode:function(e){return uM.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new df({encode:function(e){return Xn.isBuffer(e)?e:ArrayBuffer.isView(e)?Xn.from(e.buffer,e.byteOffset,e.byteLength):Xn.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Zu.json=new cM({encode:JSON.stringify,decode:JSON.parse,name:"json"});Zu.buffer=new df({encode:function(e){return Xn.isBuffer(e)?e:ArrayBuffer.isView(e)?Xn.from(e.buffer,e.byteOffset,e.byteLength):Xn.from(String(e),"utf8")},decode:yh,name:"buffer",createViewTranscoder(){return new wy({encode:function(e){return ArrayBuffer.isView(e)?e:Xn.from(String(e),"utf8")},decode:function(e){return Xn.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Zu.view=new wy({encode:function(e){return ArrayBuffer.isView(e)?e:sM.encode(e)},decode:yh,name:"view",createBufferTranscoder(){return new df({encode:function(e){return Xn.isBuffer(e)?e:ArrayBuffer.isView(e)?Xn.from(e.buffer,e.byteOffset,e.byteLength):Xn.from(String(e),"utf8")},decode:yh,name:`${this.name}+buffer`})}});Zu.hex=new df({encode:function(e){return Xn.isBuffer(e)?e:Xn.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Zu.base64=new df({encode:function(e){return Xn.isBuffer(e)?e:Xn.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var pM=ht(dM=>{"use strict";var fM=Do(),bh=lM(),{Encoding:VB}=gy(),{BufferFormat:GB,ViewFormat:jB,UTF8Format:JB}=Cy(),pf=Symbol("formats"),Dh=Symbol("encodings"),KB=new Set(["buffer","view","utf8"]),Sy=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>KB.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[Dh]=new Map,this[pf]=new Set(t);for(let n in bh)try{this.encoding(n)}catch(h){if(h.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw h}}encodings(){return Array.from(new Set(this[Dh].values()))}encoding(t){let n=this[Dh].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=ZB[t],!n)throw new fM(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=QB(t)}let{name:h,format:v}=n;if(!this[pf].has(v))if(this[pf].has("view"))n=n.createViewTranscoder();else if(this[pf].has("buffer"))n=n.createBufferTranscoder();else if(this[pf].has("utf8"))n=n.createUTF8Transcoder();else throw new fM(`Encoding '${h}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let u of[t,h,n.name,n.commonName])this[Dh].set(u,n)}return n}};dM.Transcoder=Sy;function QB(e){if(e instanceof VB)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${eW++}`;switch(XB(e)){case"view":return new jB({...e,name:n});case"utf8":return new JB({...e,name:n});case"buffer":return new GB({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function XB(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var YB={binary:bh.buffer,"utf-8":bh.utf8},ZB={...bh,...YB},eW=0});var SM=ht((Lce,Ey)=>{"use strict";var bc=typeof Reflect=="object"?Reflect:null,hM=bc&&typeof bc.apply=="function"?bc.apply:function(t,n,h){return Function.prototype.apply.call(t,n,h)},Ch;bc&&typeof bc.ownKeys=="function"?Ch=bc.ownKeys:Object.getOwnPropertySymbols?Ch=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Ch=function(t){return Object.getOwnPropertyNames(t)};function tW(e){console&&console.warn&&console.warn(e)}var vM=Number.isNaN||function(t){return t!==t};function Ut(){Ut.init.call(this)}Ey.exports=Ut;Ey.exports.once=aW;Ut.EventEmitter=Ut;Ut.prototype._events=void 0;Ut.prototype._eventsCount=0;Ut.prototype._maxListeners=void 0;var _M=10;function wh(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Ut,"defaultMaxListeners",{enumerable:!0,get:function(){return _M},set:function(e){if(typeof e!="number"||e<0||vM(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_M=e}});Ut.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ut.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||vM(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function mM(e){return e._maxListeners===void 0?Ut.defaultMaxListeners:e._maxListeners}Ut.prototype.getMaxListeners=function(){return mM(this)};Ut.prototype.emit=function(t){for(var n=[],h=1;h<arguments.length;h++)n.push(arguments[h]);var v=t==="error",u=this._events;if(u!==void 0)v=v&&u.error===void 0;else if(!v)return!1;if(v){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var p=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw p.context=a,p}var s=u[t];if(s===void 0)return!1;if(typeof s=="function")hM(s,this,n);else for(var o=s.length,i=CM(s,o),h=0;h<o;++h)hM(i[h],this,n);return!0};function gM(e,t,n,h){var v,u,a;if(wh(n),u=e._events,u===void 0?(u=e._events=Object.create(null),e._eventsCount=0):(u.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),u=e._events),a=u[t]),a===void 0)a=u[t]=n,++e._eventsCount;else if(typeof a=="function"?a=u[t]=h?[n,a]:[a,n]:h?a.unshift(n):a.push(n),v=mM(e),v>0&&a.length>v&&!a.warned){a.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=a.length,tW(p)}return e}Ut.prototype.addListener=function(t,n){return gM(this,t,n,!1)};Ut.prototype.on=Ut.prototype.addListener;Ut.prototype.prependListener=function(t,n){return gM(this,t,n,!0)};function nW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function yM(e,t,n){var h={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},v=nW.bind(h);return v.listener=n,h.wrapFn=v,v}Ut.prototype.once=function(t,n){return wh(n),this.on(t,yM(this,t,n)),this};Ut.prototype.prependOnceListener=function(t,n){return wh(n),this.prependListener(t,yM(this,t,n)),this};Ut.prototype.removeListener=function(t,n){var h,v,u,a,p;if(wh(n),v=this._events,v===void 0)return this;if(h=v[t],h===void 0)return this;if(h===n||h.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete v[t],v.removeListener&&this.emit("removeListener",t,h.listener||n));else if(typeof h!="function"){for(u=-1,a=h.length-1;a>=0;a--)if(h[a]===n||h[a].listener===n){p=h[a].listener,u=a;break}if(u<0)return this;u===0?h.shift():rW(h,u),h.length===1&&(v[t]=h[0]),v.removeListener!==void 0&&this.emit("removeListener",t,p||n)}return this};Ut.prototype.off=Ut.prototype.removeListener;Ut.prototype.removeAllListeners=function(t){var n,h,v;if(h=this._events,h===void 0)return this;if(h.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):h[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete h[t]),this;if(arguments.length===0){var u=Object.keys(h),a;for(v=0;v<u.length;++v)a=u[v],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=h[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(v=n.length-1;v>=0;v--)this.removeListener(t,n[v]);return this};function DM(e,t,n){var h=e._events;if(h===void 0)return[];var v=h[t];return v===void 0?[]:typeof v=="function"?n?[v.listener||v]:[v]:n?oW(v):CM(v,v.length)}Ut.prototype.listeners=function(t){return DM(this,t,!0)};Ut.prototype.rawListeners=function(t){return DM(this,t,!1)};Ut.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):bM.call(e,t)};Ut.prototype.listenerCount=bM;function bM(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ut.prototype.eventNames=function(){return this._eventsCount>0?Ch(this._events):[]};function CM(e,t){for(var n=new Array(t),h=0;h<t;++h)n[h]=e[h];return n}function rW(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function oW(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function aW(e,t){return new Promise(function(n,h){function v(a){e.removeListener(t,u),h(a)}function u(){typeof e.removeListener=="function"&&e.removeListener("error",v),n([].slice.call(arguments))}wM(e,t,u,{once:!0}),t!=="error"&&iW(e,v,{once:!0})})}function iW(e,t,n){typeof e.on=="function"&&wM(e,"error",t,n)}function wM(e,t,n,h){if(typeof e.on=="function")h.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function v(u){h.once&&e.removeEventListener(t,v),n(u)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var TM=ht((Fce,EM)=>{EM.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var hf=ht(Ty=>{"use strict";var MM=TM();Ty.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(h,v){e=function(u,a){u?v(u):h(a)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};Ty.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){MM(()=>t(null,n))}).catch(function(n){MM(()=>t(n))})}});var Sh=ht(My=>{"use strict";My.getCallback=function(e,t){return typeof e=="function"?e:t};My.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var nu=ht(Lh=>{"use strict";var{fromCallback:Ly}=hf(),Pr=Do(),{getOptions:Fy,getCallback:LM}=Sh(),es=Symbol("promise"),Cc=Symbol("callback"),Qo=Symbol("working"),ts=Symbol("handleOne"),ka=Symbol("handleMany"),Ay=Symbol("autoClose"),eu=Symbol("finishWork"),Xo=Symbol("returnMany"),Xi=Symbol("closing"),_f=Symbol("handleClose"),Eh=Symbol("closed"),vf=Symbol("closeCallbacks"),Zi=Symbol("keyEncoding"),ns=Symbol("valueEncoding"),xy=Symbol("abortOnClose"),Th=Symbol("legacy"),Iy=Symbol("keys"),Ry=Symbol("values"),Yi=Symbol("limit"),oo=Symbol("count"),Mh=Object.freeze({}),uW=()=>{},FM=!1,mf=class{constructor(t,n,h){if(typeof t!="object"||t===null){let v=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${v}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[Eh]=!1,this[vf]=[],this[Qo]=!1,this[Xi]=!1,this[Ay]=!1,this[Cc]=null,this[ts]=this[ts].bind(this),this[ka]=this[ka].bind(this),this[_f]=this[_f].bind(this),this[Zi]=n[Zi],this[ns]=n[ns],this[Th]=h,this[Yi]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[oo]=0,this[xy]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[oo]}get limit(){return this[Yi]}next(t){let n;if(t===void 0)n=new Promise((h,v)=>{t=(u,a,p)=>{u?v(u):this[Th]?a===void 0&&p===void 0?h():h([a,p]):h(a)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Xi]?this.nextTick(t,new Pr("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Qo]?this.nextTick(t,new Pr("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Qo]=!0,this[Cc]=t,this[oo]>=this[Yi]?this.nextTick(this[ts],null):this._next(this[ts])),n}_next(t){this.nextTick(t)}nextv(t,n,h){return h=LM(n,h),h=Ly(h,es),n=Fy(n,Mh),Number.isInteger(t)?(this[Xi]?this.nextTick(h,new Pr("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Qo]?this.nextTick(h,new Pr("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[Yi]<1/0&&(t=Math.min(t,this[Yi]-this[oo])),this[Qo]=!0,this[Cc]=h,t<=0?this.nextTick(this[ka],null,[]):this._nextv(t,n,this[ka])),h[es]):(this.nextTick(h,new TypeError("The first argument 'size' must be an integer")),h[es])}_nextv(t,n,h){let v=[],u=(a,p,s)=>{if(a)return h(a);if(this[Th]?p===void 0&&s===void 0:p===void 0)return h(null,v);v.push(this[Th]?[p,s]:p),v.length===t?h(null,v):this._next(u)};this._next(u)}all(t,n){return n=LM(t,n),n=Ly(n,es),t=Fy(t,Mh),this[Xi]?this.nextTick(n,new Pr("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Qo]?this.nextTick(n,new Pr("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Qo]=!0,this[Cc]=n,this[Ay]=!0,this[oo]>=this[Yi]?this.nextTick(this[ka],null,[]):this._all(t,this[ka])),n[es]}_all(t,n){let h=this[oo],v=[],u=()=>{let p=this[Yi]<1/0?Math.min(1e3,this[Yi]-h):1e3;p<=0?this.nextTick(n,null,v):this._nextv(p,Mh,a)},a=(p,s)=>{p?n(p):s.length===0?n(null,v):(v.push.apply(v,s),h+=s.length,u())};u()}[eu](){let t=this[Cc];return this[xy]&&t===null?uW:(this[Qo]=!1,this[Cc]=null,this[Xi]&&this._close(this[_f]),t)}[Xo](t,n,h){this[Ay]?this.close(t.bind(null,n,h)):t(n,h)}seek(t,n){if(n=Fy(n,Mh),!this[Xi]){if(this[Qo])throw new Pr("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let h=this.db.keyEncoding(n.keyEncoding||this[Zi]),v=h.format;n.keyEncoding!==v&&(n={...n,keyEncoding:v});let u=this.db.prefixKey(h.encode(t),v);this._seek(u,n)}}}_seek(t,n){throw new Pr("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=Ly(t,es),this[Eh]?this.nextTick(t):this[Xi]?this[vf].push(t):(this[Xi]=!0,this[vf].push(t),this[Qo]?this[xy]&&this[eu]()(new Pr("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[_f])),t[es]}_close(t){this.nextTick(t)}[_f](){this[Eh]=!0,this.db.detachResource(this);let t=this[vf];this[vf]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[Eh]||await this.close()}}},wc=class extends mf{constructor(t,n){super(t,n,!0),this[Iy]=n.keys!==!1,this[Ry]=n.values!==!1}[ts](t,n,h){let v=this[eu]();if(t)return v(t);try{n=this[Iy]&&n!==void 0?this[Zi].decode(n):void 0,h=this[Ry]&&h!==void 0?this[ns].decode(h):void 0}catch(u){return v(new tu("entry",u))}n===void 0&&h===void 0||this[oo]++,v(null,n,h)}[ka](t,n){let h=this[eu]();if(t)return this[Xo](h,t);try{for(let v of n){let u=v[0],a=v[1];v[0]=this[Iy]&&u!==void 0?this[Zi].decode(u):void 0,v[1]=this[Ry]&&a!==void 0?this[ns].decode(a):void 0}}catch(v){return this[Xo](h,new tu("entries",v))}this[oo]+=n.length,this[Xo](h,null,n)}end(t){return!FM&&typeof console<"u"&&(FM=!0,console.warn(new Pr("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},$y=class extends mf{constructor(t,n){super(t,n,!1)}[ts](t,n){let h=this[eu]();if(t)return h(t);try{n=n!==void 0?this[Zi].decode(n):void 0}catch(v){return h(new tu("key",v))}n!==void 0&&this[oo]++,h(null,n)}[ka](t,n){let h=this[eu]();if(t)return this[Xo](h,t);try{for(let v=0;v<n.length;v++){let u=n[v];n[v]=u!==void 0?this[Zi].decode(u):void 0}}catch(v){return this[Xo](h,new tu("keys",v))}this[oo]+=n.length,this[Xo](h,null,n)}},ky=class extends mf{constructor(t,n){super(t,n,!1)}[ts](t,n){let h=this[eu]();if(t)return h(t);try{n=n!==void 0?this[ns].decode(n):void 0}catch(v){return h(new tu("value",v))}n!==void 0&&this[oo]++,h(null,n)}[ka](t,n){let h=this[eu]();if(t)return this[Xo](h,t);try{for(let v=0;v<n.length;v++){let u=n[v];n[v]=u!==void 0?this[ns].decode(u):void 0}}catch(v){return this[Xo](h,new tu("values",v))}this[oo]+=n.length,this[Xo](h,null,n)}},tu=class extends Pr{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(wc.prototype,e.split(" ")[0],{get(){throw new Pr(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new Pr(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});wc.keyEncoding=Zi;wc.valueEncoding=ns;Lh.AbstractIterator=wc;Lh.AbstractKeyIterator=$y;Lh.AbstractValueIterator=ky});var AM=ht(Oy=>{"use strict";var{AbstractKeyIterator:sW,AbstractValueIterator:cW}=nu(),rs=Symbol("iterator"),gf=Symbol("callback"),Sc=Symbol("handleOne"),os=Symbol("handleMany"),yf=class extends sW{constructor(t,n){super(t,n),this[rs]=t.iterator({...n,keys:!0,values:!1}),this[Sc]=this[Sc].bind(this),this[os]=this[os].bind(this)}},Fh=class extends cW{constructor(t,n){super(t,n),this[rs]=t.iterator({...n,keys:!1,values:!0}),this[Sc]=this[Sc].bind(this),this[os]=this[os].bind(this)}};for(let e of[yf,Fh]){let t=e===yf,n=t?h=>h[0]:h=>h[1];e.prototype._next=function(h){this[gf]=h,this[rs].next(this[Sc])},e.prototype[Sc]=function(h,v,u){let a=this[gf];h?a(h):a(null,t?v:u)},e.prototype._nextv=function(h,v,u){this[gf]=u,this[rs].nextv(h,v,this[os])},e.prototype._all=function(h,v){this[gf]=v,this[rs].all(h,this[os])},e.prototype[os]=function(h,v){let u=this[gf];h?u(h):u(null,v.map(n))},e.prototype._seek=function(h,v){this[rs].seek(h,v)},e.prototype._close=function(h){this[rs].close(h)}}Oy.DefaultKeyIterator=yf;Oy.DefaultValueIterator=Fh});var xM=ht(kh=>{"use strict";var{AbstractIterator:lW,AbstractKeyIterator:fW,AbstractValueIterator:dW}=nu(),Hy=Do(),wr=Symbol("nut"),Rh=Symbol("undefer"),$h=Symbol("factory"),Ah=class extends lW{constructor(t,n){super(t,n),this[wr]=null,this[$h]=()=>t.iterator(n),this.db.defer(()=>this[Rh]())}},xh=class extends fW{constructor(t,n){super(t,n),this[wr]=null,this[$h]=()=>t.keys(n),this.db.defer(()=>this[Rh]())}},Ih=class extends dW{constructor(t,n){super(t,n),this[wr]=null,this[$h]=()=>t.values(n),this.db.defer(()=>this[Rh]())}};for(let e of[Ah,xh,Ih])e.prototype[Rh]=function(){this.db.status==="open"&&(this[wr]=this[$h]())},e.prototype._next=function(t){this[wr]!==null?this[wr].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new Hy("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,h){this[wr]!==null?this[wr].nextv(t,n,h):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,h)):this.nextTick(h,new Hy("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[wr]!==null?this[wr].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new Hy("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[wr]!==null?this[wr]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[wr]!==null?this[wr].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};kh.DeferredIterator=Ah;kh.DeferredKeyIterator=xh;kh.DeferredValueIterator=Ih});var Ny=ht(RM=>{"use strict";var{fromCallback:IM}=hf(),Oh=Do(),{getCallback:pW,getOptions:hW}=Sh(),Hh=Symbol("promise"),ao=Symbol("status"),Ec=Symbol("operations"),Df=Symbol("finishClose"),Tc=Symbol("closeCallbacks"),Py=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Ec]=[],this[Tc]=[],this[ao]="open",this[Df]=this[Df].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Ec].length}put(t,n,h){if(this[ao]!=="open")throw new Oh("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let v=this.db._checkKey(t)||this.db._checkValue(n);if(v)throw v;let u=h&&h.sublevel!=null?h.sublevel:this.db,a=h,p=u.keyEncoding(h&&h.keyEncoding),s=u.valueEncoding(h&&h.valueEncoding),o=p.format;h={...h,keyEncoding:o,valueEncoding:s.format},u!==this.db&&(h.sublevel=null);let i=u.prefixKey(p.encode(t),o),c=s.encode(n);return this._put(i,c,h),this[Ec].push({...a,type:"put",key:t,value:n}),this}_put(t,n,h){}del(t,n){if(this[ao]!=="open")throw new Oh("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let h=this.db._checkKey(t);if(h)throw h;let v=n&&n.sublevel!=null?n.sublevel:this.db,u=n,a=v.keyEncoding(n&&n.keyEncoding),p=a.format;return n={...n,keyEncoding:p},v!==this.db&&(n.sublevel=null),this._del(v.prefixKey(a.encode(t),p),n),this[Ec].push({...u,type:"del",key:t}),this}_del(t,n){}clear(){if(this[ao]!=="open")throw new Oh("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Ec]=[],this}_clear(){}write(t,n){return n=pW(t,n),n=IM(n,Hh),t=hW(t),this[ao]!=="open"?this.nextTick(n,new Oh("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[ao]="writing",this._write(t,h=>{this[ao]="closing",this[Tc].push(()=>n(h)),h||this.db.emit("batch",this[Ec]),this._close(this[Df])})),n[Hh]}_write(t,n){}close(t){return t=IM(t,Hh),this[ao]==="closing"?this[Tc].push(t):this[ao]==="closed"?this.nextTick(t):(this[Tc].push(t),this[ao]!=="writing"&&(this[ao]="closing",this._close(this[Df]))),t[Hh]}_close(t){this.nextTick(t)}[Df](){this[ao]="closed",this.db.detachResource(this);let t=this[Tc];this[Tc]=[];for(let n of t)n()}};RM.AbstractChainedBatch=Py});var kM=ht($M=>{"use strict";var{AbstractChainedBatch:_W}=Ny(),vW=Do(),Mc=Symbol("encoded"),By=class extends _W{constructor(t){super(t),this[Mc]=[]}_put(t,n,h){this[Mc].push({...h,type:"put",key:t,value:n})}_del(t,n){this[Mc].push({...n,type:"del",key:t})}_clear(){this[Mc]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[Mc].length===0?this.nextTick(n):this.db._batch(this[Mc],t,n):this.nextTick(n,new vW("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};$M.DefaultChainedBatch=By});var PM=ht((Hce,HM)=>{"use strict";var OM=Do(),mW=Object.prototype.hasOwnProperty,gW=new Set(["lt","lte","gt","gte"]);HM.exports=function(e,t){let n={};for(let h in e)if(mW.call(e,h)&&!(h==="keyEncoding"||h==="valueEncoding")){if(h==="start"||h==="end")throw new OM(`The legacy range option '${h}' has been removed`,{code:"LEVEL_LEGACY"});if(h==="encoding")throw new OM("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});gW.has(h)?n[h]=t.encode(e[h]):n[h]=e[h]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var Wy=ht((Pce,BM)=>{var NM;BM.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(NM||(NM=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var qM=ht((Nce,UM)=>{"use strict";var WM=Wy();UM.exports=function(e,...t){t.length===0?WM(e):WM(()=>e(...t))}});var zM=ht(Ph=>{"use strict";var{AbstractIterator:yW,AbstractKeyIterator:DW,AbstractValueIterator:bW}=nu(),Lc=Symbol("unfix"),bo=Symbol("iterator"),as=Symbol("handleOne"),ru=Symbol("handleMany"),Oa=Symbol("callback"),bf=class extends yW{constructor(t,n,h,v){super(t,n),this[bo]=h,this[Lc]=v,this[as]=this[as].bind(this),this[ru]=this[ru].bind(this),this[Oa]=null}[as](t,n,h){let v=this[Oa];if(t)return v(t);n!==void 0&&(n=this[Lc](n)),v(t,n,h)}[ru](t,n){let h=this[Oa];if(t)return h(t);for(let v of n){let u=v[0];u!==void 0&&(v[0]=this[Lc](u))}h(t,n)}},Cf=class extends DW{constructor(t,n,h,v){super(t,n),this[bo]=h,this[Lc]=v,this[as]=this[as].bind(this),this[ru]=this[ru].bind(this),this[Oa]=null}[as](t,n){let h=this[Oa];if(t)return h(t);n!==void 0&&(n=this[Lc](n)),h(t,n)}[ru](t,n){let h=this[Oa];if(t)return h(t);for(let v=0;v<n.length;v++){let u=n[v];u!==void 0&&(n[v]=this[Lc](u))}h(t,n)}},wf=class extends bW{constructor(t,n,h){super(t,n),this[bo]=h}};for(let e of[bf,Cf])e.prototype._next=function(t){this[Oa]=t,this[bo].next(this[as])},e.prototype._nextv=function(t,n,h){this[Oa]=h,this[bo].nextv(t,n,this[ru])},e.prototype._all=function(t,n){this[Oa]=n,this[bo].all(t,this[ru])};for(let e of[wf])e.prototype._next=function(t){this[bo].next(t)},e.prototype._nextv=function(t,n,h){this[bo].nextv(t,n,h)},e.prototype._all=function(t,n){this[bo].all(t,n)};for(let e of[bf,Cf,wf])e.prototype._seek=function(t,n){this[bo].seek(t,n)},e.prototype._close=function(t){this[bo].close(t)};Ph.AbstractSublevelIterator=bf;Ph.AbstractSublevelKeyIterator=Cf;Ph.AbstractSublevelValueIterator=wf});var JM=ht((Wce,jM)=>{"use strict";var Uy=Do(),{Buffer:Vy}=mh()||{},{AbstractSublevelIterator:CW,AbstractSublevelKeyIterator:wW,AbstractSublevelValueIterator:SW}=zM(),Ha=Symbol("prefix"),VM=Symbol("upperBound"),Sf=Symbol("prefixRange"),Nr=Symbol("parent"),qy=Symbol("unfix"),GM=new TextEncoder,EW={separator:"!"};jM.exports=function({AbstractLevel:e}){class t extends e{static defaults(h){if(typeof h=="string")throw new Uy("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(h&&h.open)throw new Uy("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return h==null?EW:h.separator?h:{...h,separator:"!"}}constructor(h,v,u){let{separator:a,manifest:p,...s}=t.defaults(u);v=MW(v,a);let o=a.charCodeAt(0)+1,i=h[Nr]||h;if(!GM.encode(v).every(l=>l>o&&l<127))throw new Uy(`Prefix must use bytes > ${o} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(TW(i,p),s);let c=(h.prefix||"")+a+v+a,f=c.slice(0,-1)+String.fromCharCode(o);this[Nr]=i,this[Ha]=new Nh(c),this[VM]=new Nh(f),this[qy]=new Gy,this.nextTick=i.nextTick}prefixKey(h,v){if(v==="utf8")return this[Ha].utf8+h;if(h.byteLength===0)return this[Ha][v];if(v==="view"){let u=this[Ha].view,a=new Uint8Array(u.byteLength+h.byteLength);return a.set(u,0),a.set(h,u.byteLength),a}else{let u=this[Ha].buffer;return Vy.concat([u,h],u.byteLength+h.byteLength)}}[Sf](h,v){h.gte!==void 0?h.gte=this.prefixKey(h.gte,v):h.gt!==void 0?h.gt=this.prefixKey(h.gt,v):h.gte=this[Ha][v],h.lte!==void 0?h.lte=this.prefixKey(h.lte,v):h.lt!==void 0?h.lt=this.prefixKey(h.lt,v):h.lte=this[VM][v]}get prefix(){return this[Ha].utf8}get db(){return this[Nr]}_open(h,v){this[Nr].open({passive:!0},v)}_put(h,v,u,a){this[Nr].put(h,v,u,a)}_get(h,v,u){this[Nr].get(h,v,u)}_getMany(h,v,u){this[Nr].getMany(h,v,u)}_del(h,v,u){this[Nr].del(h,v,u)}_batch(h,v,u){this[Nr].batch(h,v,u)}_clear(h,v){this[Sf](h,h.keyEncoding),this[Nr].clear(h,v)}_iterator(h){this[Sf](h,h.keyEncoding);let v=this[Nr].iterator(h),u=this[qy].get(this[Ha].utf8.length,h.keyEncoding);return new CW(this,h,v,u)}_keys(h){this[Sf](h,h.keyEncoding);let v=this[Nr].keys(h),u=this[qy].get(this[Ha].utf8.length,h.keyEncoding);return new wW(this,h,v,u)}_values(h){this[Sf](h,h.keyEncoding);let v=this[Nr].values(h);return new SW(this,h,v)}}return{AbstractSublevel:t}};var TW=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:zy(e,"utf8"),buffer:zy(e,"buffer"),view:zy(e,"view")}}},zy=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},Nh=class{constructor(t){this.utf8=t,this.view=GM.encode(t),this.buffer=Vy?Vy.from(this.view.buffer,0,this.view.byteLength):{}}},Gy=class{constructor(){this.cache=new Map}get(t,n){let h=this.cache.get(n);return h===void 0&&(n==="view"?h=function(v,u){return u.subarray(v)}.bind(null,t):h=function(v,u){return u.slice(v)}.bind(null,t),this.cache.set(n,h)),h}},MW=function(e,t){let n=0,h=e.length;for(;n<h&&e[n]===t;)n++;for(;h>n&&e[h-1]===t;)h--;return e.slice(n,h)}});var Xy=ht(Qy=>{"use strict";var{supports:LW}=H1(),{Transcoder:FW}=pM(),{EventEmitter:AW}=SM(),{fromCallback:ou}=hf(),Co=Do(),{AbstractIterator:is}=nu(),{DefaultKeyIterator:xW,DefaultValueIterator:IW}=AM(),{DeferredIterator:RW,DeferredKeyIterator:$W,DeferredValueIterator:kW}=xM(),{DefaultChainedBatch:KM}=kM(),{getCallback:us,getOptions:au}=Sh(),Bh=PM(),dt=Symbol("promise"),Pa=Symbol("landed"),ss=Symbol("resources"),jy=Symbol("closeResources"),Ef=Symbol("operations"),Tf=Symbol("undefer"),Wh=Symbol("deferOpen"),QM=Symbol("options"),vt=Symbol("status"),cs=Symbol("defaultOptions"),Fc=Symbol("transcoder"),Uh=Symbol("keyEncoding"),Jy=Symbol("valueEncoding"),OW=()=>{},Mf=class extends AW{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=au(n);let{keyEncoding:h,valueEncoding:v,passive:u,...a}=n;this[ss]=new Set,this[Ef]=[],this[Wh]=!0,this[QM]=a,this[vt]="opening",this.supports=LW(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[Fc]=new FW(HW(this)),this[Uh]=this[Fc].encoding(h||"utf8"),this[Jy]=this[Fc].encoding(v||"utf8");for(let p of this[Fc].encodings())this.supports.encodings[p.commonName]||(this.supports.encodings[p.commonName]=!0);this[cs]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[Uh].commonName,valueEncoding:this[Jy].commonName}),key:Object.freeze({keyEncoding:this[Uh].commonName})},this.nextTick(()=>{this[Wh]&&this.open({passive:!1},OW)})}get status(){return this[vt]}keyEncoding(t){return this[Fc].encoding(t??this[Uh])}valueEncoding(t){return this[Fc].encoding(t??this[Jy])}open(t,n){n=us(t,n),n=ou(n,dt),t={...this[QM],...au(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let h=v=>{this[vt]==="closing"||this[vt]==="opening"?this.once(Pa,v?()=>h(v):h):this[vt]!=="open"?n(new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:v})):n()};return t.passive?this[vt]==="opening"?this.once(Pa,h):this.nextTick(h):this[vt]==="closed"||this[Wh]?(this[Wh]=!1,this[vt]="opening",this.emit("opening"),this._open(t,v=>{if(v){this[vt]="closed",this[jy](()=>{this.emit(Pa),h(v)}),this[Tf]();return}this[vt]="open",this[Tf](),this.emit(Pa),this[vt]==="open"&&this.emit("open"),this[vt]==="open"&&this.emit("ready"),h()})):this[vt]==="open"?this.nextTick(h):this.once(Pa,()=>this.open(t,n)),n[dt]}_open(t,n){this.nextTick(n)}close(t){t=ou(t,dt);let n=h=>{this[vt]==="opening"||this[vt]==="closing"?this.once(Pa,h?n(h):n):this[vt]!=="closed"?t(new Co("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:h})):t()};if(this[vt]==="open"){this[vt]="closing",this.emit("closing");let h=v=>{this[vt]="open",this[Tf](),this.emit(Pa),n(v)};this[jy](()=>{this._close(v=>{if(v)return h(v);this[vt]="closed",this[Tf](),this.emit(Pa),this[vt]==="closed"&&this.emit("closed"),n()})})}else this[vt]==="closed"?this.nextTick(n):this.once(Pa,()=>this.close(t));return t[dt]}[jy](t){if(this[ss].size===0)return this.nextTick(t);let n=this[ss].size,h=!0,v=()=>{--n===0&&(h?this.nextTick(t):t())};for(let u of this[ss])u.close(v);h=!1,this[ss].clear()}_close(t){this.nextTick(t)}get(t,n,h){if(h=us(n,h),h=ou(h,dt),n=au(n,this[cs].entry),this[vt]==="opening")return this.defer(()=>this.get(t,n,h)),h[dt];if(Ac(this,h))return h[dt];let v=this._checkKey(t);if(v)return this.nextTick(h,v),h[dt];let u=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),p=u.format,s=a.format;return(n.keyEncoding!==p||n.valueEncoding!==s)&&(n=Object.assign({},n,{keyEncoding:p,valueEncoding:s})),this._get(this.prefixKey(u.encode(t),p),n,(o,i)=>{if(o)return(o.code==="LEVEL_NOT_FOUND"||o.notFound||/NotFound/i.test(o))&&(o.code||(o.code="LEVEL_NOT_FOUND"),o.notFound||(o.notFound=!0),o.status||(o.status=404)),h(o);try{i=a.decode(i)}catch(c){return h(new Co("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:c}))}h(null,i)}),h[dt]}_get(t,n,h){this.nextTick(h,new Error("NotFound"))}getMany(t,n,h){if(h=us(n,h),h=ou(h,dt),n=au(n,this[cs].entry),this[vt]==="opening")return this.defer(()=>this.getMany(t,n,h)),h[dt];if(Ac(this,h))return h[dt];if(!Array.isArray(t))return this.nextTick(h,new TypeError("The first argument 'keys' must be an array")),h[dt];if(t.length===0)return this.nextTick(h,null,[]),h[dt];let v=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),a=v.format,p=u.format;(n.keyEncoding!==a||n.valueEncoding!==p)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:p}));let s=new Array(t.length);for(let o=0;o<t.length;o++){let i=t[o],c=this._checkKey(i);if(c)return this.nextTick(h,c),h[dt];s[o]=this.prefixKey(v.encode(i),a)}return this._getMany(s,n,(o,i)=>{if(o)return h(o);try{for(let c=0;c<i.length;c++)i[c]!==void 0&&(i[c]=u.decode(i[c]))}catch(c){return h(new Co(`Could not decode one or more of ${i.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:c}))}h(null,i)}),h[dt]}_getMany(t,n,h){this.nextTick(h,null,new Array(t.length).fill(void 0))}put(t,n,h,v){if(v=us(h,v),v=ou(v,dt),h=au(h,this[cs].entry),this[vt]==="opening")return this.defer(()=>this.put(t,n,h,v)),v[dt];if(Ac(this,v))return v[dt];let u=this._checkKey(t)||this._checkValue(n);if(u)return this.nextTick(v,u),v[dt];let a=this.keyEncoding(h.keyEncoding),p=this.valueEncoding(h.valueEncoding),s=a.format,o=p.format;(h.keyEncoding!==s||h.valueEncoding!==o)&&(h=Object.assign({},h,{keyEncoding:s,valueEncoding:o}));let i=this.prefixKey(a.encode(t),s),c=p.encode(n);return this._put(i,c,h,f=>{if(f)return v(f);this.emit("put",t,n),v()}),v[dt]}_put(t,n,h,v){this.nextTick(v)}del(t,n,h){if(h=us(n,h),h=ou(h,dt),n=au(n,this[cs].key),this[vt]==="opening")return this.defer(()=>this.del(t,n,h)),h[dt];if(Ac(this,h))return h[dt];let v=this._checkKey(t);if(v)return this.nextTick(h,v),h[dt];let u=this.keyEncoding(n.keyEncoding),a=u.format;return n.keyEncoding!==a&&(n=Object.assign({},n,{keyEncoding:a})),this._del(this.prefixKey(u.encode(t),a),n,p=>{if(p)return h(p);this.emit("del",t),h()}),h[dt]}_del(t,n,h){this.nextTick(h)}batch(t,n,h){if(!arguments.length){if(this[vt]==="opening")return new KM(this);if(this[vt]!=="open")throw new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?h=t:h=us(n,h),h=ou(h,dt),n=au(n,this[cs].empty),this[vt]==="opening")return this.defer(()=>this.batch(t,n,h)),h[dt];if(Ac(this,h))return h[dt];if(!Array.isArray(t))return this.nextTick(h,new TypeError("The first argument 'operations' must be an array")),h[dt];if(t.length===0)return this.nextTick(h),h[dt];let v=new Array(t.length),{keyEncoding:u,valueEncoding:a,...p}=n;for(let s=0;s<t.length;s++){if(typeof t[s]!="object"||t[s]===null)return this.nextTick(h,new TypeError("A batch operation must be an object")),h[dt];let o=Object.assign({},t[s]);if(o.type!=="put"&&o.type!=="del")return this.nextTick(h,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),h[dt];let i=this._checkKey(o.key);if(i)return this.nextTick(h,i),h[dt];let c=o.sublevel!=null?o.sublevel:this,f=c.keyEncoding(o.keyEncoding||u),l=f.format;if(o.key=c.prefixKey(f.encode(o.key),l),o.keyEncoding=l,o.type==="put"){let r=this._checkValue(o.value);if(r)return this.nextTick(h,r),h[dt];let d=c.valueEncoding(o.valueEncoding||a);o.value=d.encode(o.value),o.valueEncoding=d.format}c!==this&&(o.sublevel=null),v[s]=o}return this._batch(v,p,s=>{if(s)return h(s);this.emit("batch",t),h()}),h[dt]}_batch(t,n,h){this.nextTick(h)}sublevel(t,n){return this._sublevel(t,Ky.defaults(n))}_sublevel(t,n){return new Ky(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=us(t,n),n=ou(n,dt),t=au(t,this[cs].empty),this[vt]==="opening")return this.defer(()=>this.clear(t,n)),n[dt];if(Ac(this,n))return n[dt];let h=t,v=this.keyEncoding(t.keyEncoding);return t=Bh(t,v),t.keyEncoding=v.format,t.limit===0?this.nextTick(n):this._clear(t,u=>{if(u)return n(u);this.emit("clear",h),n()}),n[dt]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=Bh(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[is.keyEncoding]=n,t[is.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[vt]==="opening")return new RW(this,t);if(this[vt]!=="open")throw new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new is(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=Bh(t,n),t[is.keyEncoding]=n,t[is.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[vt]==="opening")return new $W(this,t);if(this[vt]!=="open")throw new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new xW(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),h=this.valueEncoding(t&&t.valueEncoding);if(t=Bh(t,n),t[is.keyEncoding]=n,t[is.valueEncoding]=h,t.keyEncoding=n.format,t.valueEncoding=h.format,this[vt]==="opening")return new kW(this,t);if(this[vt]!=="open")throw new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new IW(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[Ef].push(t)}[Tf](){if(this[Ef].length===0)return;let t=this[Ef];this[Ef]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[ss].add(t)}detachResource(t){this[ss].delete(t)}_chainedBatch(){return new KM(this)}_checkKey(t){if(t==null)return new Co("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Co("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Mf.prototype.nextTick=qM();var{AbstractSublevel:Ky}=JM()({AbstractLevel:Mf});Qy.AbstractLevel=Mf;Qy.AbstractSublevel=Ky;var Ac=function(e,t){return e[vt]!=="open"?(e.nextTick(t,new Co("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},HW=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var Yy=ht(ls=>{"use strict";ls.AbstractLevel=Xy().AbstractLevel;ls.AbstractSublevel=Xy().AbstractSublevel;ls.AbstractIterator=nu().AbstractIterator;ls.AbstractKeyIterator=nu().AbstractKeyIterator;ls.AbstractValueIterator=nu().AbstractValueIterator;ls.AbstractChainedBatch=Ny().AbstractChainedBatch});var YM=ht((zce,XM)=>{XM.exports=NW;var PW=Wy();function NW(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let h,v,u,a,p,s=!0,o;Array.isArray(e)?(h=[],u=v=e.length):(a=Object.keys(e),h={},u=v=a.length);function i(f){function l(){n&&n(f,h),n=null}s?PW(l):l()}function c(f,l,r){if(h[f]=r,l&&(p=!0),--u===0||l)i(l);else if(!p&&o<v){let d;a?(d=a[o],o+=1,e[d](function(_,m){c(d,_,m)})):(d=o,o+=1,e[d](function(_,m){c(d,_,m)}))}}o=t,u?a?a.some(function(f,l){return e[f](function(r,d){c(f,r,d)}),l===t-1}):e.some(function(f,l){return f(function(r,d){c(l,r,d)}),l===t-1}):i(null),s=!1}});var Zy=ht((Vce,ZM)=>{"use strict";ZM.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,h=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,v=t.gte===void 0,u=t.lte===void 0;return n!==void 0&&h!==void 0?IDBKeyRange.bound(n,h,v,u):n!==void 0?IDBKeyRange.lowerBound(n,v):h!==void 0?IDBKeyRange.upperBound(h,u):null}});var e0=ht((Gce,eL)=>{"use strict";var BW=new TextEncoder;eL.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):BW.encode(e)}});var aL=ht(oL=>{"use strict";var{AbstractIterator:WW}=Yy(),tL=Zy(),qh=e0(),Yo=Symbol("cache"),Na=Symbol("finished"),Br=Symbol("options"),Ba=Symbol("currentOptions"),fs=Symbol("position"),t0=Symbol("location"),xc=Symbol("first"),nL={},n0=class extends WW{constructor(t,n,h){super(t,h),this[Yo]=[],this[Na]=this.limit===0,this[Br]=h,this[Ba]={...h},this[fs]=void 0,this[t0]=n,this[xc]=!0}_nextv(t,n,h){if(this[xc]=!1,this[Na])return this.nextTick(h,null,[]);if(this[Yo].length>0)return t=Math.min(t,this[Yo].length),this.nextTick(h,null,this[Yo].splice(0,t));this[fs]!==void 0&&(this[Br].reverse?(this[Ba].lt=this[fs],this[Ba].lte=void 0):(this[Ba].gt=this[fs],this[Ba].gte=void 0));let v;try{v=tL(this[Ba])}catch{return this[Na]=!0,this.nextTick(h,null,[])}let u=this.db.db.transaction([this[t0]],"readonly"),a=u.objectStore(this[t0]),p=[];if(this[Br].reverse){let s=!this[Br].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[s](v,"prev").onsuccess=o=>{let i=o.target.result;if(i){let{key:c,value:f}=i;this[fs]=c,p.push([this[Br].keys&&c!==void 0?qh(c):void 0,this[Br].values&&f!==void 0?qh(f):void 0]),p.length<t?i.continue():rL(u)}else this[Na]=!0}}else{let s,o,i=()=>{if(s===void 0||o===void 0)return;let c=Math.max(s.length,o.length);c===0||t===1/0?this[Na]=!0:this[fs]=s[c-1],p.length=c;for(let f=0;f<c;f++){let l=s[f],r=o[f];p[f]=[this[Br].keys&&l!==void 0?qh(l):void 0,this[Br].values&&r!==void 0?qh(r):void 0]}rL(u)};this[Br].keys||t<1/0?a.getAllKeys(v,t<1/0?t:void 0).onsuccess=c=>{s=c.target.result,i()}:(s=[],this.nextTick(i)),this[Br].values?a.getAll(v,t<1/0?t:void 0).onsuccess=c=>{o=c.target.result,i()}:(o=[],this.nextTick(i))}u.onabort=()=>{h(u.error||new Error("aborted by user")),h=null},u.oncomplete=()=>{h(null,p),h=null}}_next(t){if(this[Yo].length>0){let[n,h]=this[Yo].shift();this.nextTick(t,null,n,h)}else if(this[Na])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[xc]&&(this[xc]=!1,n=1),this._nextv(n,nL,(h,v)=>{if(h)return t(h);this[Yo]=v,this._next(t)})}}_all(t,n){this[xc]=!1;let h=this[Yo].splice(0,this[Yo].length),v=this.limit-this.count-h.length;if(v<=0)return this.nextTick(n,null,h);this._nextv(v,nL,(u,a)=>{if(u)return n(u);h.length>0&&(a=h.concat(a)),n(null,a)})}_seek(t,n){this[xc]=!0,this[Yo]=[],this[Na]=!1,this[fs]=void 0,this[Ba]={...this[Br]};let h;try{h=tL(this[Br])}catch{this[Na]=!0;return}h!==null&&!h.includes(t)?this[Na]=!0:this[Br].reverse?this[Ba].lte=t:this[Ba].gte=t}};oL.Iterator=n0;function rL(e){typeof e.commit=="function"&&e.commit()}});var uL=ht((Jce,iL)=>{"use strict";iL.exports=function(t,n,h,v,u){if(v.limit===0)return t.nextTick(u);let a=t.db.transaction([n],"readwrite"),p=a.objectStore(n),s=0;a.oncomplete=function(){u()},a.onabort=function(){u(a.error||new Error("aborted by user"))};let o=p.openKeyCursor?"openKeyCursor":"openCursor",i=v.reverse?"prev":"next";p[o](h,i).onsuccess=function(c){let f=c.target.result;f&&(p.delete(f.key).onsuccess=function(){(v.limit<=0||++s<v.limit)&&f.continue()})}}});var pL=ht(dL=>{"use strict";var{AbstractLevel:UW}=Yy(),sL=Do(),qW=YM(),{fromCallback:zW}=hf(),{Iterator:VW}=aL(),cL=e0(),GW=uL(),jW=Zy(),fL="level-js-",Lf=Symbol("idb"),r0=Symbol("namePrefix"),Wa=Symbol("location"),o0=Symbol("version"),ds=Symbol("store"),Ff=Symbol("onComplete"),lL=Symbol("promise"),zh=class extends UW{constructor(t,n,h){if(typeof n=="function"||typeof h=="function")throw new sL("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:v,version:u,...a}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof t!="string")throw new Error("constructor requires a location string argument");this[Wa]=t,this[r0]=v??fL,this[o0]=parseInt(u||1,10),this[Lf]=null}get location(){return this[Wa]}get namePrefix(){return this[r0]}get version(){return this[o0]}get db(){return this[Lf]}get type(){return"browser-level"}_open(t,n){let h=indexedDB.open(this[r0]+this[Wa],this[o0]);h.onerror=function(){n(h.error||new Error("unknown error"))},h.onsuccess=()=>{this[Lf]=h.result,n()},h.onupgradeneeded=v=>{let u=v.target.result;u.objectStoreNames.contains(this[Wa])||u.createObjectStore(this[Wa])}}[ds](t){return this[Lf].transaction([this[Wa]],t).objectStore(this[Wa])}[Ff](t,n){let h=t.transaction;h.onabort=function(){n(h.error||new Error("aborted by user"))},h.oncomplete=function(){n(null,t.result)}}_get(t,n,h){let v=this[ds]("readonly"),u;try{u=v.get(t)}catch(a){return this.nextTick(h,a)}this[Ff](u,function(a,p){if(a)return h(a);if(p===void 0)return h(new sL("Entry not found",{code:"LEVEL_NOT_FOUND"}));h(null,cL(p))})}_getMany(t,n,h){let v=this[ds]("readonly"),u=t.map(a=>p=>{let s;try{s=v.get(a)}catch(o){return p(o)}s.onsuccess=()=>{let o=s.result;p(null,o===void 0?o:cL(o))},s.onerror=o=>{o.stopPropagation(),p(s.error)}});qW(u,16,h)}_del(t,n,h){let v=this[ds]("readwrite"),u;try{u=v.delete(t)}catch(a){return this.nextTick(h,a)}this[Ff](u,h)}_put(t,n,h,v){let u=this[ds]("readwrite"),a;try{a=u.put(n,t)}catch(p){return this.nextTick(v,p)}this[Ff](a,v)}_iterator(t){return new VW(this,this[Wa],t)}_batch(t,n,h){let v=this[ds]("readwrite"),u=v.transaction,a=0,p;u.onabort=function(){h(p||u.error||new Error("aborted by user"))},u.oncomplete=function(){h()};function s(){let o=t[a++],i=o.key,c;try{c=o.type==="del"?v.delete(i):v.put(o.value,i)}catch(f){p=f,u.abort();return}a<t.length?c.onsuccess=s:typeof u.commit=="function"&&u.commit()}s()}_clear(t,n){let h,v;try{h=jW(t)}catch{return this.nextTick(n)}if(t.limit>=0)return GW(this,this[Wa],h,t,n);try{let u=this[ds]("readwrite");v=h?u.delete(h):u.clear()}catch(u){return this.nextTick(n,u)}this[Ff](v,n)}_close(t){this[Lf].close(),this.nextTick(t)}};zh.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=fL),n=zW(n,lL);let h=indexedDB.deleteDatabase(t+e);return h.onsuccess=function(){n()},h.onerror=function(v){n(v)},n[lL]};dL.BrowserLevel=zh});var a0=ht(hL=>{hL.Level=pL().BrowserLevel});var WA=ht((b_,yD)=>{(function(e,t){typeof b_=="object"&&typeof yD=="object"?yD.exports=t():typeof define=="function"&&define.amd?define([],t):typeof b_=="object"?b_.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let h=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(h._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,h=n._renderService.dimensions;if(h.css.cell.width===0||h.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,u=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(u.getPropertyValue("height")),p=Math.max(0,parseInt(u.getPropertyValue("width"))),s=window.getComputedStyle(this._terminal.element),o=a-(parseInt(s.getPropertyValue("padding-top"))+parseInt(s.getPropertyValue("padding-bottom"))),i=p-(parseInt(s.getPropertyValue("padding-right"))+parseInt(s.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(i/h.css.cell.width)),rows:Math.max(1,Math.floor(o/h.css.cell.height))}}}})(),e})())});var qA=ht((w_,DD)=>{(function(e,t){typeof w_=="object"&&typeof DD=="object"?DD.exports=t():typeof define=="function"&&define.amd?define([],t):typeof w_=="object"?w_.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,u,a){var p=this&&this.__decorate||function(D,g,C,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,C,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,C,M):E(g,C))||M);return T>3&&M&&Object.defineProperty(g,C,M),M};Object.defineProperty(u,"__esModule",{value:!0}),u.GlyphRenderer=void 0;let s=a(374),o=a(509),i=a(855),c=a(859),f=a(776),l=a(381),r=11,d=r*Float32Array.BYTES_PER_ELEMENT,_,m=0,y=0,b=0;class S extends c.Disposable{constructor(g,C,F){super(),this._terminal=g,this._gl=C,this._dimensions=F,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let E=this._gl;o.TextureAtlas.maxAtlasPages===void 0&&(o.TextureAtlas.maxAtlasPages=Math.min(32,(0,s.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS))),o.TextureAtlas.maxTextureSize=(0,s.throwIfFalsy)(E.getParameter(E.MAX_TEXTURE_SIZE))),this._program=(0,s.throwIfFalsy)((0,l.createProgram)(E,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let x="";for(let I=1;I<R;I++)x+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${x}
}`}(o.TextureAtlas.maxAtlasPages))),this.register((0,c.toDisposable)(()=>E.deleteProgram(this._program))),this._projectionLocation=(0,s.throwIfFalsy)(E.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,s.throwIfFalsy)(E.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,s.throwIfFalsy)(E.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=E.createVertexArray(),E.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=E.createBuffer();this.register((0,c.toDisposable)(()=>E.deleteBuffer(M))),E.bindBuffer(E.ARRAY_BUFFER,M),E.bufferData(E.ARRAY_BUFFER,T,E.STATIC_DRAW),E.enableVertexAttribArray(0),E.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),L=E.createBuffer();this.register((0,c.toDisposable)(()=>E.deleteBuffer(L))),E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,L),E.bufferData(E.ELEMENT_ARRAY_BUFFER,w,E.STATIC_DRAW),this._attributesBuffer=(0,s.throwIfFalsy)(E.createBuffer()),this.register((0,c.toDisposable)(()=>E.deleteBuffer(this._attributesBuffer))),E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.enableVertexAttribArray(2),E.vertexAttribPointer(2,2,E.FLOAT,!1,d,0),E.vertexAttribDivisor(2,1),E.enableVertexAttribArray(3),E.vertexAttribPointer(3,2,E.FLOAT,!1,d,2*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(3,1),E.enableVertexAttribArray(4),E.vertexAttribPointer(4,1,E.FLOAT,!1,d,4*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(4,1),E.enableVertexAttribArray(5),E.vertexAttribPointer(5,2,E.FLOAT,!1,d,5*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(5,1),E.enableVertexAttribArray(6),E.vertexAttribPointer(6,2,E.FLOAT,!1,d,7*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(6,1),E.enableVertexAttribArray(1),E.vertexAttribPointer(1,2,E.FLOAT,!1,d,9*Float32Array.BYTES_PER_ELEMENT),E.vertexAttribDivisor(1,1),E.useProgram(this._program);let A=new Int32Array(o.TextureAtlas.maxAtlasPages);for(let R=0;R<o.TextureAtlas.maxAtlasPages;R++)A[R]=R;E.uniform1iv(this._textureLocation,A),E.uniformMatrix4fv(this._projectionLocation,!1,l.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<o.TextureAtlas.maxAtlasPages;R++){let x=new l.GLTexture((0,s.throwIfFalsy)(E.createTexture()));this.register((0,c.toDisposable)(()=>E.deleteTexture(x.texture))),E.activeTexture(E.TEXTURE0+R),E.bindTexture(E.TEXTURE_2D,x.texture),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=x}E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,C,F,E,T,M,w,L){this._updateCell(this._vertices.attributes,g,C,F,E,T,M,w,L)}_updateCell(g,C,F,E,T,M,w,L,A){m=(F*this._terminal.cols+C)*r,E!==i.NULL_CELL_CODE&&E!==void 0?this._atlas&&(_=L&&L.length>1?this._atlas.getRasterizedGlyphCombinedChar(L,T,M,w,!1):this._atlas.getRasterizedGlyph(E,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==A&&_.offset.x>y?(b=_.offset.x-y,g[m]=-(_.offset.x-b)+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=(_.size.x-b)/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x+b/this._atlas.pages[_.texturePage].canvas.width,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x-b/this._atlas.pages[_.texturePage].canvas.width,g[m+8]=_.sizeClipSpace.y):(g[m]=-_.offset.x+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=_.size.x/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x,g[m+8]=_.sizeClipSpace.y)):g.fill(0,m,m+r-1-2)}clear(){let g=this._terminal,C=g.cols*g.rows*r;this._vertices.count!==C?this._vertices.attributes=new Float32Array(C):this._vertices.attributes.fill(0);let F=0;for(;F<this._vertices.attributesBuffers.length;F++)this._vertices.count!==C?this._vertices.attributesBuffers[F]=new Float32Array(C):this._vertices.attributesBuffers[F].fill(0);this._vertices.count=C,F=0;for(let E=0;E<g.rows;E++)for(let T=0;T<g.cols;T++)this._vertices.attributes[F+9]=T/g.cols,this._vertices.attributes[F+10]=E/g.rows,F+=r}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let C=this._gl;C.useProgram(this._program),C.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let F=this._vertices.attributesBuffers[this._activeBuffer],E=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*r,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*r);F.set(w,E),E+=w.length}C.bindBuffer(C.ARRAY_BUFFER,this._attributesBuffer),C.bufferData(C.ARRAY_BUFFER,F.subarray(0,E),C.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(C,this._atlas,T);C.drawElementsInstanced(C.TRIANGLE_STRIP,4,C.UNSIGNED_BYTE,0,E/r)}setAtlas(g){this._atlas=g;for(let C of this._atlasTextures)C.version=-1}_bindAtlasPageTexture(g,C,F){g.activeTexture(g.TEXTURE0+F),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[F].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,C.pages[F].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[F].version=C.pages[F].version}setDimensions(g){this._dimensions=g}}u.GlyphRenderer=S,p([f.traceCall],S.prototype,"updateCell",null)},742:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RectangleRenderer=void 0;let p=a(374),s=a(859),o=a(310),i=a(381),c=8*Float32Array.BYTES_PER_ELEMENT;class f{constructor(){this.attributes=new Float32Array(160),this.count=0}}let l=0,r=0,d=0,_=0,m=0,y=0,b=0;class S extends s.Disposable{constructor(g,C,F,E){super(),this._terminal=g,this._gl=C,this._dimensions=F,this._themeService=E,this._vertices=new f,this._verticesCursor=new f;let T=this._gl;this._program=(0,p.throwIfFalsy)((0,i.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,s.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,s.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let L=new Uint8Array([0,1,2,3]),A=T.createBuffer();this.register((0,s.toDisposable)(()=>T.deleteBuffer(A))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,A),T.bufferData(T.ELEMENT_ARRAY_BUFFER,L,T.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(T.createBuffer()),this.register((0,s.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,c,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,c,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,c,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(E.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let C=this._gl;C.useProgram(this._program),C.bindVertexArray(this._vertexArrayObject),C.uniformMatrix4fv(this._projectionLocation,!1,i.PROJECTION_MATRIX),C.bindBuffer(C.ARRAY_BUFFER,this._attributesBuffer),C.bufferData(C.ARRAY_BUFFER,g.attributes,C.DYNAMIC_DRAW),C.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,C.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let C=this._terminal,F=this._vertices,E,T,M,w,L,A,R,x,I,$,k,H=1;for(E=0;E<C.rows;E++){for(M=-1,w=0,L=0,A=!1,T=0;T<C.cols;T++)R=(E*C.cols+T)*o.RENDER_MODEL_INDICIES_PER_CELL,x=g.cells[R+o.RENDER_MODEL_BG_OFFSET],I=g.cells[R+o.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(x!==w||I!==L&&(A||$))&&((w!==0||A&&L!==0)&&(k=8*H++,this._updateRectangle(F,k,L,w,M,T,E)),M=T,w=x,L=I,A=$);(w!==0||A&&L!==0)&&(k=8*H++,this._updateRectangle(F,k,L,w,M,C.cols,E))}F.count=H}updateCursor(g){let C=this._verticesCursor,F=g.cursor;if(!F||F.style==="block")return void(C.count=0);let E,T=0;F.style!=="bar"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.style==="bar"?F.dpr*F.cursorWidth:F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),F.style!=="underline"&&F.style!=="outline"||(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,(F.y+1)*this._dimensions.device.cell.height-F.dpr,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat)),F.style==="outline"&&(E=8*T++,this._addRectangleFloat(C.attributes,E,F.x*this._dimensions.device.cell.width,F.y*this._dimensions.device.cell.height,F.width*this._dimensions.device.cell.width,F.dpr,this._cursorFloat),E=8*T++,this._addRectangleFloat(C.attributes,E,(F.x+F.width)*this._dimensions.device.cell.width-F.dpr,F.y*this._dimensions.device.cell.height,F.dpr,this._dimensions.device.cell.height,this._cursorFloat)),C.count=T}_updateRectangle(g,C,F,E,T,M,w){if(67108864&F)switch(50331648&F){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&F].rgba;break;case 50331648:l=(16777215&F)<<8;break;default:l=this._themeService.colors.foreground.rgba}else switch(50331648&E){case 16777216:case 33554432:l=this._themeService.colors.ansi[255&E].rgba;break;case 50331648:l=(16777215&E)<<8;break;default:l=this._themeService.colors.background.rgba}g.attributes.length<C+4&&(g.attributes=(0,i.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),r=T*this._dimensions.device.cell.width,d=w*this._dimensions.device.cell.height,_=(l>>24&255)/255,m=(l>>16&255)/255,y=(l>>8&255)/255,b=1,this._addRectangle(g.attributes,C,r,d,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,_,m,y,b)}_addRectangle(g,C,F,E,T,M,w,L,A,R){g[C]=F/this._dimensions.device.canvas.width,g[C+1]=E/this._dimensions.device.canvas.height,g[C+2]=T/this._dimensions.device.canvas.width,g[C+3]=M/this._dimensions.device.canvas.height,g[C+4]=w,g[C+5]=L,g[C+6]=A,g[C+7]=R}_addRectangleFloat(g,C,F,E,T,M,w){g[C]=F/this._dimensions.device.canvas.width,g[C+1]=E/this._dimensions.device.canvas.height,g[C+2]=T/this._dimensions.device.canvas.width,g[C+3]=M/this._dimensions.device.canvas.height,g[C+4]=w[0],g[C+5]=w[1],g[C+6]=w[2],g[C+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}u.RectangleRenderer=S},310:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RenderModel=u.COMBINED_CHAR_BIT_MASK=u.RENDER_MODEL_EXT_OFFSET=u.RENDER_MODEL_FG_OFFSET=u.RENDER_MODEL_BG_OFFSET=u.RENDER_MODEL_INDICIES_PER_CELL=void 0;let p=a(296);u.RENDER_MODEL_INDICIES_PER_CELL=4,u.RENDER_MODEL_BG_OFFSET=1,u.RENDER_MODEL_FG_OFFSET=2,u.RENDER_MODEL_EXT_OFFSET=3,u.COMBINED_CHAR_BIT_MASK=2147483648,u.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,p.createSelectionRenderModel)()}resize(s,o){let i=s*o*u.RENDER_MODEL_INDICIES_PER_CELL;i!==this.cells.length&&(this.cells=new Uint32Array(i),this.lineLengths=new Uint32Array(o))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,u,a){var p=this&&this.__decorate||function(M,w,L,A){var R,x=arguments.length,I=x<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,L):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,L,A);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(x<3?R(I):x>3?R(w,L,I):R(w,L))||I);return x>3&&I&&Object.defineProperty(w,L,I),I};Object.defineProperty(u,"__esModule",{value:!0}),u.JoinedCellData=u.WebglRenderer=void 0;let s=a(820),o=a(274),i=a(627),c=a(457),f=a(56),l=a(374),r=a(345),d=a(859),_=a(147),m=a(782),y=a(855),b=a(776),S=a(965),D=a(742),g=a(310),C=a(733);class F extends d.Disposable{constructor(w,L,A,R,x,I,$,k,H){super(),this._terminal=w,this._characterJoinerService=L,this._charSizeService=A,this._coreBrowserService=R,this._coreService=x,this._decorationService=I,this._optionsService=$,this._themeService=k,this._cursorBlinkStateManager=new d.MutableDisposable,this._charAtlasDisposable=this.register(new d.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new d.MutableDisposable),this._glyphRenderer=this.register(new d.MutableDisposable),this._onChangeTextureAtlas=this.register(new r.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new r.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new r.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new r.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new o.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new C.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,l.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:H};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,s.addDisposableDomListener)(this._canvas,"webglcontextlost",q=>{console.log("webglcontextlost event received"),q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(q)},3e3)})),this.register((0,s.addDisposableDomListener)(this._canvas,"webglcontextrestored",q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,i.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,f.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(q,N)=>this._setCanvasDevicePixelDimensions(q,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,d.toDisposable)(()=>{var q;for(let N of this._renderLayers)N.dispose();(q=this._canvas.parentElement)===null||q===void 0||q.removeChild(this._canvas),(0,i.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,L){var A,R,x,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(A=this._rectangleRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(x=this._glyphRenderer.value)===null||x===void 0||x.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let L of this._renderLayers)L.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let L of this._renderLayers)L.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,L,A){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,L,A);this._model.selection.update(this._terminal,w,L,A),this._requestRedrawViewport()}handleCursorMove(){var w;for(let L of this._renderLayers)L.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new S.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let L=(0,i.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==L&&(this._onChangeTextureAtlas.fire(L.pages[0].canvas),this._charAtlasDisposable.value=(0,d.getDisposeArrayDisposable)([(0,r.forwardEvent)(L.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,r.forwardEvent)(L.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=L,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var L;this._model.clear(),w&&((L=this._glyphRenderer.value)===null||L===void 0||L.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let L of this._renderLayers)L.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,L){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let A of this._renderLayers)A.handleGridChanged(this._terminal,w,L);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,L),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new c.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,L){let A=this._core,R,x,I,$,k,H,U,q,N,K,O,B,W,P=this._workCell;w=T(w,A.rows-1,0),L=T(L,A.rows-1,0);let Q=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,G=Math.min(this._terminal.buffer.active.cursorX,A.cols-1),ve=-1,Ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ye=!1;for(x=w;x<=L;x++)for(I=x+A.buffer.ydisp,$=A.buffer.lines.get(I),this._model.lineLengths[x]=0,k=this._characterJoinerService.getJoinedCharacters(I),B=0;B<A.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,P),B===0&&(R=this._cellColorResolver.result.bg),H=!1,U=B,k.length>0&&B===k[0][0]&&(H=!0,q=k.shift(),P=new E(P,$.translateToString(!0,q[0],q[1]),q[1]-q[0]),U=q[1]-1),N=P.getChars(),K=P.getCode(),O=(x*A.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(P,B,I),Ee&&I===Q&&(B===G&&(this._model.cursor={x:G,y:this._terminal.buffer.active.cursorY,width:P.getWidth(),style:this._coreBrowserService.isFocused?A.options.cursorStyle||"block":A.options.cursorInactiveStyle,cursorWidth:A.options.cursorWidth,dpr:this._devicePixelRatio},ve=G+P.getWidth()-1),B>=G&&B<=ve&&(this._coreBrowserService.isFocused&&(A.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&A.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),K!==y.NULL_CELL_CODE&&(this._model.lineLengths[x]=B+1),(this._model.cells[O]!==K||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ye=!0,N.length>1&&(K|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=K,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,x,K,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),H))for(P=this._workCell,B++;B<U;B++)W=(x*A.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,x,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[W]=y.NULL_CELL_CODE,this._model.cells[W+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[W+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[W+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ye&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,L){this._canvas.width===w&&this._canvas.height===L||(this._canvas.width=w,this._canvas.height=L,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}u.WebglRenderer=F,p([b.traceCall],F.prototype,"renderRows",null);class E extends _.AttributeData{constructor(w,L,A){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=L,this._width=A}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,L=0){return Math.max(Math.min(M,w),L)}u.JoinedCellData=E},381:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GLTexture=u.expandFloat32Array=u.createShader=u.createProgram=u.PROJECTION_MATRIX=void 0;let p=a(374);function s(o,i,c){let f=(0,p.throwIfFalsy)(o.createShader(i));if(o.shaderSource(f,c),o.compileShader(f),o.getShaderParameter(f,o.COMPILE_STATUS))return f;console.error(o.getShaderInfoLog(f)),o.deleteShader(f)}u.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),u.createProgram=function(o,i,c){let f=(0,p.throwIfFalsy)(o.createProgram());if(o.attachShader(f,(0,p.throwIfFalsy)(s(o,o.VERTEX_SHADER,i))),o.attachShader(f,(0,p.throwIfFalsy)(s(o,o.FRAGMENT_SHADER,c))),o.linkProgram(f),o.getProgramParameter(f,o.LINK_STATUS))return f;console.error(o.getProgramInfoLog(f)),o.deleteProgram(f)},u.createShader=s,u.expandFloat32Array=function(o,i){let c=Math.min(2*o.length,i),f=new Float32Array(c);for(let l=0;l<o.length;l++)f[l]=o[l];return f},u.GLTexture=class{constructor(o){this.texture=o,this.version=-1}}},592:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseRenderLayer=void 0;let p=a(627),s=a(237),o=a(374),i=a(859);class c extends i.Disposable{constructor(l,r,d,_,m,y,b,S){super(),this._container=r,this._alpha=m,this._coreBrowserService=y,this._optionsService=b,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${d}-layer`),this._canvas.style.zIndex=_.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(l,D),this.reset(l)})),this.register((0,i.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,o.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(l){}handleFocus(l){}handleCursorMove(l){}handleGridChanged(l,r,d){}handleSelectionChanged(l,r,d,_=!1){}_setTransparency(l,r){if(r===this._alpha)return;let d=this._canvas;this._alpha=r,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,d),this._refreshCharAtlas(l,this._themeService.colors),this.handleGridChanged(l,0,l.rows-1)}_refreshCharAtlas(l,r){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,p.acquireTextureAtlas)(l,this._optionsService.rawOptions,r,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(l,r){this._deviceCellWidth=r.device.cell.width,this._deviceCellHeight=r.device.cell.height,this._deviceCharWidth=r.device.char.width,this._deviceCharHeight=r.device.char.height,this._deviceCharLeft=r.device.char.left,this._deviceCharTop=r.device.char.top,this._canvas.width=r.device.canvas.width,this._canvas.height=r.device.canvas.height,this._canvas.style.width=`${r.css.canvas.width}px`,this._canvas.style.height=`${r.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(l,this._themeService.colors)}_fillBottomLineAtCells(l,r,d=1){this._ctx.fillRect(l*this._deviceCellWidth,(r+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,d*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(l,r,d,_){this._alpha?this._ctx.clearRect(l*this._deviceCellWidth,r*this._deviceCellHeight,d*this._deviceCellWidth,_*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(l*this._deviceCellWidth,r*this._deviceCellHeight,d*this._deviceCellWidth,_*this._deviceCellHeight))}_fillCharTrueColor(l,r,d,_){this._ctx.font=this._getFont(l,!1,!1),this._ctx.textBaseline=s.TEXT_BASELINE,this._clipCell(d,_,r.getWidth()),this._ctx.fillText(r.getChars(),d*this._deviceCellWidth+this._deviceCharLeft,_*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(l,r,d){this._ctx.beginPath(),this._ctx.rect(l*this._deviceCellWidth,r*this._deviceCellHeight,d*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(l,r,d){return`${d?"italic":""} ${r?l.options.fontWeightBold:l.options.fontWeight} ${l.options.fontSize*this._coreBrowserService.dpr}px ${l.options.fontFamily}`}}u.BaseRenderLayer=c},733:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LinkRenderLayer=void 0;let p=a(197),s=a(237),o=a(592);class i extends o.BaseRenderLayer{constructor(f,l,r,d,_,m,y){super(r,f,"link",l,!0,_,m,y),this.register(d.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(d.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(f,l){super.resize(f,l),this._state=void 0}reset(f){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(f){if(f.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:f.fg!==void 0&&(0,p.is256Color)(f.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[f.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(let l=f.y1+1;l<f.y2;l++)this._fillBottomLineAtCells(0,l,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f}_handleHideLinkUnderline(f){this._clearCurrentLink()}}u.LinkRenderLayer=i},820:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=void 0,u.addDisposableDomListener=function(a,p,s,o){a.addEventListener(p,s,o);let i=!1;return{dispose:()=>{i||(i=!0,a.removeEventListener(p,s,o))}}}},274:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellColorResolver=void 0;let a,p=0,s=0,o=!1,i=!1,c=!1;u.CellColorResolver=class{constructor(f,l,r,d,_){this._terminal=f,this._selectionRenderModel=l,this._decorationService=r,this._coreBrowserService=d,this._themeService=_,this.result={fg:0,bg:0,ext:0}}resolve(f,l,r){this.result.bg=f.bg,this.result.fg=f.fg,this.result.ext=268435456&f.bg?f.extended.ext:0,s=0,p=0,i=!1,o=!1,c=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(l,r,"bottom",d=>{d.backgroundColorRGB&&(s=d.backgroundColorRGB.rgba>>8&16777215,i=!0),d.foregroundColorRGB&&(p=d.foregroundColorRGB.rgba>>8&16777215,o=!0)}),c=this._selectionRenderModel.isCellSelected(this._terminal,l,r),c&&(s=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,i=!0,a.selectionForeground&&(p=a.selectionForeground.rgba>>8&16777215,o=!0)),this._decorationService.forEachDecorationAtCell(l,r,"top",d=>{d.backgroundColorRGB&&(s=d.backgroundColorRGB.rgba>>8&16777215,i=!0),d.foregroundColorRGB&&(p=d.foregroundColorRGB.rgba>>8&16777215,o=!0)}),i&&(s=c?-16777216&f.bg&-134217729|s|50331648:-16777216&f.bg|s|50331648),o&&(p=-16777216&f.fg&-67108865|p|50331648),67108864&this.result.fg&&(i&&!o&&(p=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,o=!0),!i&&o&&(s=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,i=!0)),a=void 0,this.result.bg=i?s:this.result.bg,this.result.fg=o?p:this.result.fg}}},627:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.removeTerminalFromCache=u.acquireTextureAtlas=void 0;let p=a(509),s=a(197),o=[];u.acquireTextureAtlas=function(i,c,f,l,r,d,_,m){let y=(0,s.generateConfig)(l,r,d,_,c,f,m);for(let D=0;D<o.length;D++){let g=o[D],C=g.ownedBy.indexOf(i);if(C>=0){if((0,s.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),o.splice(D,1)):g.ownedBy.splice(C,1);break}}for(let D=0;D<o.length;D++){let g=o[D];if((0,s.configEquals)(g.config,y))return g.ownedBy.push(i),g.atlas}let b=i._core,S={atlas:new p.TextureAtlas(document,y,b.unicodeService),config:y,ownedBy:[i]};return o.push(S),S.atlas},u.removeTerminalFromCache=function(i){for(let c=0;c<o.length;c++){let f=o[c].ownedBy.indexOf(i);if(f!==-1){o[c].ownedBy.length===1?(o[c].atlas.dispose(),o.splice(c,1)):o[c].ownedBy.splice(f,1);break}}}},197:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.is256Color=u.configEquals=u.generateConfig=void 0;let p=a(160);u.generateConfig=function(s,o,i,c,f,l,r){let d={foreground:l.foreground,background:l.background,cursor:p.NULL_COLOR,cursorAccent:p.NULL_COLOR,selectionForeground:p.NULL_COLOR,selectionBackgroundTransparent:p.NULL_COLOR,selectionBackgroundOpaque:p.NULL_COLOR,selectionInactiveBackgroundTransparent:p.NULL_COLOR,selectionInactiveBackgroundOpaque:p.NULL_COLOR,ansi:l.ansi.slice(),contrastCache:l.contrastCache,halfContrastCache:l.halfContrastCache};return{customGlyphs:f.customGlyphs,devicePixelRatio:r,letterSpacing:f.letterSpacing,lineHeight:f.lineHeight,deviceCellWidth:s,deviceCellHeight:o,deviceCharWidth:i,deviceCharHeight:c,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,drawBoldTextInBrightColors:f.drawBoldTextInBrightColors,minimumContrastRatio:f.minimumContrastRatio,colors:d}},u.configEquals=function(s,o){for(let i=0;i<s.colors.ansi.length;i++)if(s.colors.ansi[i].rgba!==o.colors.ansi[i].rgba)return!1;return s.devicePixelRatio===o.devicePixelRatio&&s.customGlyphs===o.customGlyphs&&s.lineHeight===o.lineHeight&&s.letterSpacing===o.letterSpacing&&s.fontFamily===o.fontFamily&&s.fontSize===o.fontSize&&s.fontWeight===o.fontWeight&&s.fontWeightBold===o.fontWeightBold&&s.allowTransparency===o.allowTransparency&&s.deviceCharWidth===o.deviceCharWidth&&s.deviceCharHeight===o.deviceCharHeight&&s.drawBoldTextInBrightColors===o.drawBoldTextInBrightColors&&s.minimumContrastRatio===o.minimumContrastRatio&&s.colors.foreground.rgba===o.colors.foreground.rgba&&s.colors.background.rgba===o.colors.background.rgba},u.is256Color=function(s){return(50331648&s)==16777216||(50331648&s)==33554432}},237:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT_BASELINE=u.DIM_OPACITY=u.INVERTED_DEFAULT_COLOR=void 0;let p=a(399);u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},457:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CursorBlinkStateManager=void 0,u.CursorBlinkStateManager=class{constructor(a,p){this._renderCallback=a,this._coreBrowserService=p,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,p>0)return void this._restartInterval(p)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(p)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.tryDrawCustomChar=u.powerlineDefinitions=u.boxDrawingDefinitions=u.blockElementDefinitions=void 0;let p=a(374);u.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let s={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};u.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(l,r)=>`M0,${.5-r} L1,${.5-r} M0,${.5+r} L1,${.5+r}`},"\u2551":{1:(l,r)=>`M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u2552":{1:(l,r)=>`M.5,1 L.5,${.5-r} L1,${.5-r} M.5,${.5+r} L1,${.5+r}`},"\u2553":{1:(l,r)=>`M${.5-l},1 L${.5-l},.5 L1,.5 M${.5+l},.5 L${.5+l},1`},"\u2554":{1:(l,r)=>`M1,${.5-r} L${.5-l},${.5-r} L${.5-l},1 M1,${.5+r} L${.5+l},${.5+r} L${.5+l},1`},"\u2555":{1:(l,r)=>`M0,${.5-r} L.5,${.5-r} L.5,1 M0,${.5+r} L.5,${.5+r}`},"\u2556":{1:(l,r)=>`M${.5+l},1 L${.5+l},.5 L0,.5 M${.5-l},.5 L${.5-l},1`},"\u2557":{1:(l,r)=>`M0,${.5+r} L${.5-l},${.5+r} L${.5-l},1 M0,${.5-r} L${.5+l},${.5-r} L${.5+l},1`},"\u2558":{1:(l,r)=>`M.5,0 L.5,${.5+r} L1,${.5+r} M.5,${.5-r} L1,${.5-r}`},"\u2559":{1:(l,r)=>`M1,.5 L${.5-l},.5 L${.5-l},0 M${.5+l},.5 L${.5+l},0`},"\u255A":{1:(l,r)=>`M1,${.5-r} L${.5+l},${.5-r} L${.5+l},0 M1,${.5+r} L${.5-l},${.5+r} L${.5-l},0`},"\u255B":{1:(l,r)=>`M0,${.5+r} L.5,${.5+r} L.5,0 M0,${.5-r} L.5,${.5-r}`},"\u255C":{1:(l,r)=>`M0,.5 L${.5+l},.5 L${.5+l},0 M${.5-l},.5 L${.5-l},0`},"\u255D":{1:(l,r)=>`M0,${.5-r} L${.5-l},${.5-r} L${.5-l},0 M0,${.5+r} L${.5+l},${.5+r} L${.5+l},0`},"\u255E":{1:(l,r)=>`M.5,0 L.5,1 M.5,${.5-r} L1,${.5-r} M.5,${.5+r} L1,${.5+r}`},"\u255F":{1:(l,r)=>`M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1 M${.5+l},.5 L1,.5`},"\u2560":{1:(l,r)=>`M${.5-l},0 L${.5-l},1 M1,${.5+r} L${.5+l},${.5+r} L${.5+l},1 M1,${.5-r} L${.5+l},${.5-r} L${.5+l},0`},"\u2561":{1:(l,r)=>`M.5,0 L.5,1 M0,${.5-r} L.5,${.5-r} M0,${.5+r} L.5,${.5+r}`},"\u2562":{1:(l,r)=>`M0,.5 L${.5-l},.5 M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u2563":{1:(l,r)=>`M${.5+l},0 L${.5+l},1 M0,${.5+r} L${.5-l},${.5+r} L${.5-l},1 M0,${.5-r} L${.5-l},${.5-r} L${.5-l},0`},"\u2564":{1:(l,r)=>`M0,${.5-r} L1,${.5-r} M0,${.5+r} L1,${.5+r} M.5,${.5+r} L.5,1`},"\u2565":{1:(l,r)=>`M0,.5 L1,.5 M${.5-l},.5 L${.5-l},1 M${.5+l},.5 L${.5+l},1`},"\u2566":{1:(l,r)=>`M0,${.5-r} L1,${.5-r} M0,${.5+r} L${.5-l},${.5+r} L${.5-l},1 M1,${.5+r} L${.5+l},${.5+r} L${.5+l},1`},"\u2567":{1:(l,r)=>`M.5,0 L.5,${.5-r} M0,${.5-r} L1,${.5-r} M0,${.5+r} L1,${.5+r}`},"\u2568":{1:(l,r)=>`M0,.5 L1,.5 M${.5-l},.5 L${.5-l},0 M${.5+l},.5 L${.5+l},0`},"\u2569":{1:(l,r)=>`M0,${.5+r} L1,${.5+r} M0,${.5-r} L${.5-l},${.5-r} L${.5-l},0 M1,${.5-r} L${.5+l},${.5-r} L${.5+l},0`},"\u256A":{1:(l,r)=>`M.5,0 L.5,1 M0,${.5-r} L1,${.5-r} M0,${.5+r} L1,${.5+r}`},"\u256B":{1:(l,r)=>`M0,.5 L1,.5 M${.5-l},0 L${.5-l},1 M${.5+l},0 L${.5+l},1`},"\u256C":{1:(l,r)=>`M0,${.5+r} L${.5-l},${.5+r} L${.5-l},1 M1,${.5+r} L${.5+l},${.5+r} L${.5+l},1 M0,${.5-r} L${.5-l},${.5-r} L${.5-l},0 M1,${.5-r} L${.5+l},${.5-r} L${.5+l},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(l,r)=>`M.5,1 L.5,${.5+r/.15*.5} C.5,${.5+r/.15*.5},.5,.5,1,.5`},"\u256E":{1:(l,r)=>`M.5,1 L.5,${.5+r/.15*.5} C.5,${.5+r/.15*.5},.5,.5,0,.5`},"\u256F":{1:(l,r)=>`M.5,0 L.5,${.5-r/.15*.5} C.5,${.5-r/.15*.5},.5,.5,0,.5`},"\u2570":{1:(l,r)=>`M.5,0 L.5,${.5-r/.15*.5} C.5,${.5-r/.15*.5},.5,.5,1,.5`}},u.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},u.powerlineDefinitions["\uE0BB"]=u.powerlineDefinitions["\uE0BD"],u.powerlineDefinitions["\uE0BF"]=u.powerlineDefinitions["\uE0B9"],u.tryDrawCustomChar=function(l,r,d,_,m,y,b,S){let D=u.blockElementDefinitions[r];if(D)return function(E,T,M,w,L,A){for(let R=0;R<T.length;R++){let x=T[R],I=L/8,$=A/8;E.fillRect(M+x.x*I,w+x.y*$,x.w*I,x.h*$)}}(l,D,d,_,m,y),!0;let g=s[r];if(g)return function(E,T,M,w,L,A){let R=o.get(T);R||(R=new Map,o.set(T,R));let x=E.fillStyle;if(typeof x!="string")throw new Error(`Unexpected fillStyle type "${x}"`);let I=R.get(x);if(!I){let $=T[0].length,k=T.length,H=document.createElement("canvas");H.width=$,H.height=k;let U=(0,p.throwIfFalsy)(H.getContext("2d")),q=new ImageData($,k),N,K,O,B;if(x.startsWith("#"))N=parseInt(x.slice(1,3),16),K=parseInt(x.slice(3,5),16),O=parseInt(x.slice(5,7),16),B=x.length>7&&parseInt(x.slice(7,9),16)||1;else{if(!x.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${x}" when drawing pattern glyph`);[N,K,O,B]=x.substring(5,x.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<k;W++)for(let P=0;P<$;P++)q.data[4*(W*$+P)]=N,q.data[4*(W*$+P)+1]=K,q.data[4*(W*$+P)+2]=O,q.data[4*(W*$+P)+3]=T[W][P]*(255*B);U.putImageData(q,0,0),I=(0,p.throwIfFalsy)(E.createPattern(H,null)),R.set(x,I)}E.fillStyle=I,E.fillRect(M,w,L,A)}(l,g,d,_,m,y),!0;let C=u.boxDrawingDefinitions[r];if(C)return function(E,T,M,w,L,A,R){E.strokeStyle=E.fillStyle;for(let[x,I]of Object.entries(T)){let $;E.beginPath(),E.lineWidth=R*Number.parseInt(x),$=typeof I=="function"?I(.15,.15/A*L):I;for(let k of $.split(" ")){let H=k[0],U=c[H];if(!U){console.error(`Could not find drawing instructions for "${H}"`);continue}let q=k.substring(1).split(",");q[0]&&q[1]&&U(E,f(q,L,A,M,w,!0,R))}E.stroke(),E.closePath()}}(l,C,d,_,m,y,S),!0;let F=u.powerlineDefinitions[r];return!!F&&(function(E,T,M,w,L,A,R,x){var I,$;let k=new Path2D;k.rect(M,w,L,A),E.clip(k),E.beginPath();let H=R/12;E.lineWidth=x*H;for(let U of T.d.split(" ")){let q=U[0],N=c[q];if(!N){console.error(`Could not find drawing instructions for "${q}"`);continue}let K=U.substring(1).split(",");K[0]&&K[1]&&N(E,f(K,L,A,M,w,!1,x,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(H/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(H/2)))}T.type===1?(E.strokeStyle=E.fillStyle,E.stroke()):E.fill(),E.closePath()}(l,F,d,_,m,y,b,S),!0)};let o=new Map;function i(l,r,d=0){return Math.max(Math.min(l,r),d)}let c={C:(l,r)=>l.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]),L:(l,r)=>l.lineTo(r[0],r[1]),M:(l,r)=>l.moveTo(r[0],r[1])};function f(l,r,d,_,m,y,b,S=0,D=0){let g=l.map(C=>parseFloat(C)||parseInt(C));if(g.length<2)throw new Error("Too few arguments for instruction");for(let C=0;C<g.length;C+=2)g[C]*=r-S*b-D*b,y&&g[C]!==0&&(g[C]=i(Math.round(g[C]+.5)-.5,r,0)),g[C]+=_+S*b;for(let C=1;C<g.length;C+=2)g[C]*=d,y&&g[C]!==0&&(g[C]=i(Math.round(g[C]+.5)-.5,d,0)),g[C]+=m;return g}},56:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.observeDevicePixelDimensions=void 0;let p=a(859);u.observeDevicePixelDimensions=function(s,o,i){let c=new o.ResizeObserver(f=>{let l=f.find(_=>_.target===s);if(!l)return;if(!("devicePixelContentBoxSize"in l))return c?.disconnect(),void(c=void 0);let r=l.devicePixelContentBoxSize[0].inlineSize,d=l.devicePixelContentBoxSize[0].blockSize;r>0&&d>0&&i(r,d)});try{c.observe(s,{box:["device-pixel-content-box"]})}catch{c.disconnect(),c=void 0}return(0,p.toDisposable)(()=>c?.disconnect())}},374:(v,u)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(u,"__esModule",{value:!0}),u.createRenderDimensions=u.excludeFromContrastRatioDemands=u.isRestrictedPowerlineGlyph=u.isPowerlineGlyph=u.throwIfFalsy=void 0,u.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},u.isPowerlineGlyph=a,u.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},u.excludeFromContrastRatioDemands=function(p){return a(p)||function(s){return 9472<=s&&s<=9631}(p)},u.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(s,o,i,c=!1){if(this.selectionStart=o,this.selectionEnd=i,!o||!i||o[0]===i[0]&&o[1]===i[1])return void this.clear();let f=o[1]-s.buffer.active.viewportY,l=i[1]-s.buffer.active.viewportY,r=Math.max(f,0),d=Math.min(l,s.rows-1);r>=s.rows||d<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=c,this.viewportStartRow=f,this.viewportEndRow=l,this.viewportCappedStartRow=r,this.viewportCappedEndRow=d,this.startCol=o[0],this.endCol=i[0])}isCellSelected(s,o,i){return!!this.hasSelection&&(i-=s.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?o>=this.startCol&&i>=this.viewportCappedStartRow&&o<this.endCol&&i<=this.viewportCappedEndRow:o<this.startCol&&i>=this.viewportCappedStartRow&&o>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&o>=this.startCol&&o<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&o<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&o>=this.startCol)}}u.createSelectionRenderModel=function(){return new a}},509:function(v,u,a){var p=this&&this.__decorate||function(F,E,T,M){var w,L=arguments.length,A=L<3?E:M===null?M=Object.getOwnPropertyDescriptor(E,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(F,E,T,M);else for(var R=F.length-1;R>=0;R--)(w=F[R])&&(A=(L<3?w(A):L>3?w(E,T,A):w(E,T))||A);return L>3&&A&&Object.defineProperty(E,T,A),A};Object.defineProperty(u,"__esModule",{value:!0}),u.TextureAtlas=void 0;let s=a(237),o=a(860),i=a(374),c=a(160),f=a(345),l=a(485),r=a(385),d=a(147),_=a(855),m=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},b;class S{get pages(){return this._pages}constructor(E,T,M){this._document=E,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new l.FourKeyMap,this._cacheMapCombined=new l.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new d.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new f.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new f.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=C(E,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,i.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let E of this.pages)E.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let E=new r.IdleTaskQueue;for(let T=33;T<126;T++)E.enqueue(()=>{if(!this._cacheMap.get(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT)){let M=this._drawToCache(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT);this._cacheMap.set(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let E of this._pages)E.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(S.maxAtlasPages&&this._pages.length>=Math.max(4,S.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(S.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let L=T.slice(M,M+4),A=L.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-L.length,x=this._mergePages(L,R);x.version++;for(let I=A.length-1;I>=0;I--)this._deletePage(A[I]);this.pages.push(x),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(x.canvas)}let E=new D(this._document,this._textureSize);return this._pages.push(E),this._activePages.push(E),this._onAddTextureAtlasCanvas.fire(E.canvas),E}_mergePages(E,T){let M=2*E[0].canvas.width,w=new D(this._document,M,E);for(let[L,A]of E.entries()){let R=L*A.canvas.width%M,x=Math.floor(L/2)*A.canvas.height;w.ctx.drawImage(A.canvas,R,x);for(let $ of A.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=x,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(A.canvas);let I=this._activePages.indexOf(A);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(E){this._pages.splice(E,1);for(let T=E;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(E,T,M,w,L){return this._getFromCacheMap(this._cacheMapCombined,E,T,M,w,L)}getRasterizedGlyph(E,T,M,w,L){return this._getFromCacheMap(this._cacheMap,E,T,M,w,L)}_getFromCacheMap(E,T,M,w,L,A=!1){return b=E.get(T,M,w,L),b||(b=this._drawToCache(T,M,w,L,A),E.set(T,M,w,L,b)),b}_getColorFromAnsiIndex(E){if(E>=this._config.colors.ansi.length)throw new Error("No color found for idx "+E);return this._config.colors.ansi[E]}_getBackgroundColor(E,T,M,w){if(this._config.allowTransparency)return c.NULL_COLOR;let L;switch(E){case 16777216:case 33554432:L=this._getColorFromAnsiIndex(T);break;case 50331648:let A=d.AttributeData.toColorRGB(T);L=c.rgba.toColor(A[0],A[1],A[2]);break;default:L=M?c.color.opaque(this._config.colors.foreground):this._config.colors.background}return L}_getForegroundColor(E,T,M,w,L,A,R,x,I,$){let k=this._getMinimumContrastColor(E,T,M,w,L,A,!1,I,x,$);if(k)return k;let H;switch(L){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&A<8&&(A+=8),H=this._getColorFromAnsiIndex(A);break;case 50331648:let U=d.AttributeData.toColorRGB(A);H=c.rgba.toColor(U[0],U[1],U[2]);break;default:H=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(H=c.color.opaque(H)),x&&(H=c.color.multiplyOpacity(H,s.DIM_OPACITY)),H}_resolveBackgroundRgba(E,T,M){switch(E){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(E,T,M,w){switch(E){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(E,T,M,w,L,A,R,x,I,$){if(this._config.minimumContrastRatio===1||$)return;let k=this._getContrastCache(I),H=k.getColor(E,w);if(H!==void 0)return H||void 0;let U=this._resolveBackgroundRgba(T,M,R),q=this._resolveForegroundRgba(L,A,R,x),N=c.rgba.ensureContrastRatio(U,q,this._config.minimumContrastRatio/(I?2:1));if(!N)return void k.setColor(E,w,null);let K=c.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return k.setColor(E,w,K),K}_getContrastCache(E){return E?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(E,T,M,w,L=!1){let A=typeof E=="number"?String.fromCharCode(E):E,R=Math.min(this._config.deviceCellWidth*Math.max(A.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let x=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<x&&(this._tmpCanvas.height=x),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),H=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),q=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),K=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),W=this._workAttributeData.getBgColorMode();if($){let ne=K;K=B,B=ne;let j=O;O=W,W=j}let P=this._getBackgroundColor(W,B,$,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let Q=I?this._config.fontWeightBold:this._config.fontWeight,G=H?"italic":"";this._tmpCtx.font=`${G} ${Q} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=s.TEXT_BASELINE;let ve=A.length===1&&(0,i.isPowerlineGlyph)(A.charCodeAt(0)),Ee=A.length===1&&(0,i.isRestrictedPowerlineGlyph)(A.charCodeAt(0)),ye=this._getForegroundColor(T,W,B,M,O,K,$,k,I,(0,i.excludeFromContrastRatioDemands)(A.charCodeAt(0)));this._tmpCtx.fillStyle=ye.css;let ue=Ee?0:4,Ce=!1;this._config.customGlyphs!==!1&&(Ce=(0,o.tryDrawCustomChar)(this._tmpCtx,A,ue,ue,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let yt,qt=!ve;if(yt=typeof E=="number"?this._unicodeService.wcwidth(E):this._unicodeService.getStringCellWidth(E),U){this._tmpCtx.save();let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ne%2==1?.5:0;if(this._tmpCtx.lineWidth=ne,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())qt=!1,this._tmpCtx.strokeStyle=`rgb(${d.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{qt=!1;let st=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&st<8&&(st+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(st).css}this._tmpCtx.beginPath();let re=ue,fe=Math.ceil(ue+this._config.deviceCharHeight)-j-(L?2*ne:0),Pe=fe+ne,tt=fe+2*ne;for(let st=0;st<yt;st++){this._tmpCtx.save();let Ue=re+st*this._config.deviceCellWidth,Dt=re+(st+1)*this._config.deviceCellWidth,Bt=Ue+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ue,fe),this._tmpCtx.lineTo(Dt,fe),this._tmpCtx.moveTo(Ue,tt),this._tmpCtx.lineTo(Dt,tt);break;case 3:let Ct=ne<=1?tt:Math.ceil(ue+this._config.deviceCharHeight-ne/2)-j,Sn=ne<=1?fe:Math.ceil(ue+this._config.deviceCharHeight+ne/2)-j,Ja=new Path2D;Ja.rect(Ue,fe,this._config.deviceCellWidth,tt-fe),this._tmpCtx.clip(Ja),this._tmpCtx.moveTo(Ue-this._config.deviceCellWidth/2,Pe),this._tmpCtx.bezierCurveTo(Ue-this._config.deviceCellWidth/2,Sn,Ue,Sn,Ue,Pe),this._tmpCtx.bezierCurveTo(Ue,Ct,Bt,Ct,Bt,Pe),this._tmpCtx.bezierCurveTo(Bt,Sn,Dt,Sn,Dt,Pe),this._tmpCtx.bezierCurveTo(Dt,Ct,Dt+this._config.deviceCellWidth/2,Ct,Dt+this._config.deviceCellWidth/2,Pe);break;case 4:this._tmpCtx.setLineDash([Math.round(ne),Math.round(ne)]),this._tmpCtx.moveTo(Ue,fe),this._tmpCtx.lineTo(Dt,fe);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ue,fe),this._tmpCtx.lineTo(Dt,fe);break;default:this._tmpCtx.moveTo(Ue,fe),this._tmpCtx.lineTo(Dt,fe)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!Ce&&this._config.fontSize>=12&&!this._config.allowTransparency&&A!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let st=this._tmpCtx.measureText(A);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in st&&st.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ue=new Path2D;Ue.rect(re,fe-Math.ceil(ne/2),this._config.deviceCellWidth*yt,tt-fe+Math.ceil(ne/2)),this._tmpCtx.clip(Ue),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(A,ue,ue+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=ne%2==1?.5:0;this._tmpCtx.lineWidth=ne,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ue,ue+j),this._tmpCtx.lineTo(ue+this._config.deviceCharWidth*yt,ue+j),this._tmpCtx.stroke()}if(Ce||this._tmpCtx.fillText(A,ue,ue+this._config.deviceCharHeight),A==="_"&&!this._config.allowTransparency){let ne=g(this._tmpCtx.getImageData(ue,ue,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ye,qt);if(ne)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(A,ue,ue+this._config.deviceCharHeight-j),ne=g(this._tmpCtx.getImageData(ue,ue,this._config.deviceCellWidth,this._config.deviceCellHeight),P,ye,qt),ne);j++);}if(q){let ne=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=ne,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ue,ue+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(ue+this._config.deviceCharWidth*yt,ue+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Ot=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Xe;if(Xe=this._config.allowTransparency?function(ne){for(let j=0;j<ne.data.length;j+=4)if(ne.data[j+3]>0)return!1;return!0}(Ot):g(Ot,P,ye,qt),Xe)return y;let se=this._findGlyphBoundingBox(Ot,this._workBoundingBox,R,Ee,Ce,ue),he,ce;for(;;){if(this._activePages.length===0){let ne=this._createNewPage();he=ne,ce=ne.currentRow,ce.height=se.size.y;break}he=this._activePages[this._activePages.length-1],ce=he.currentRow;for(let ne of this._activePages)se.size.y<=ne.currentRow.height&&(he=ne,ce=ne.currentRow);for(let ne=this._activePages.length-1;ne>=0;ne--)for(let j of this._activePages[ne].fixedRows)j.height<=ce.height&&se.size.y<=j.height&&(he=this._activePages[ne],ce=j);if(ce.y+se.size.y>=he.canvas.height||ce.height>se.size.y+2){let ne=!1;if(he.currentRow.y+he.currentRow.height+se.size.y>=he.canvas.height){let j;for(let re of this._activePages)if(re.currentRow.y+re.currentRow.height+se.size.y<re.canvas.height){j=re;break}if(j)he=j;else if(S.maxAtlasPages&&this._pages.length>=S.maxAtlasPages&&ce.y+se.size.y<=he.canvas.height&&ce.height>=se.size.y&&ce.x+se.size.x<=he.canvas.width)ne=!0;else{let re=this._createNewPage();he=re,ce=re.currentRow,ce.height=se.size.y,ne=!0}}ne||(he.currentRow.height>0&&he.fixedRows.push(he.currentRow),ce={x:0,y:he.currentRow.y+he.currentRow.height,height:se.size.y},he.fixedRows.push(ce),he.currentRow={x:0,y:ce.y+ce.height,height:0})}if(ce.x+se.size.x<=he.canvas.width)break;ce===he.currentRow?(ce.x=0,ce.y+=ce.height,ce.height=0):he.fixedRows.splice(he.fixedRows.indexOf(ce),1)}return se.texturePage=this._pages.indexOf(he),se.texturePosition.x=ce.x,se.texturePosition.y=ce.y,se.texturePositionClipSpace.x=ce.x/he.canvas.width,se.texturePositionClipSpace.y=ce.y/he.canvas.height,se.sizeClipSpace.x/=he.canvas.width,se.sizeClipSpace.y/=he.canvas.height,ce.height=Math.max(ce.height,se.size.y),ce.x+=se.size.x,he.ctx.putImageData(Ot,se.texturePosition.x-this._workBoundingBox.left,se.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,se.size.x,se.size.y),he.addGlyph(se),he.version++,se}_findGlyphBoundingBox(E,T,M,w,L,A){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,x=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let k=0;k<x;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(E.data[H]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<A+x;$++){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(E.data[H]!==0){T.left=$,I=!0;break}}if(I)break}T.right=x,I=!1;for(let $=A+x-1;$>=A;$--){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(E.data[H]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let k=0;k<x;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(E.data[H]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+A+(w||L?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+A+(w||L?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}u.TextureAtlas=S,p([m.traceCall],S.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(E){this._glyphs.push(E),this._usedPixels+=E.size.x*E.size.y}constructor(E,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=C(E,T,T),this.ctx=(0,i.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(F,E,T,M){let w=E.rgba>>>24,L=E.rgba>>>16&255,A=E.rgba>>>8&255,R=T.rgba>>>24,x=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(L-x)+Math.abs(A-I))/12),k=!0;for(let H=0;H<F.data.length;H+=4)F.data[H]===w&&F.data[H+1]===L&&F.data[H+2]===A||M&&Math.abs(F.data[H]-w)+Math.abs(F.data[H+1]-L)+Math.abs(F.data[H+2]-A)<$?F.data[H+3]=0:k=!1;return k}function C(F,E,T){let M=F.createElement("canvas");return M.width=E,M.height=T,M}},160:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.contrastRatio=u.toPaddedHex=u.rgba=u.rgb=u.css=u.color=u.channels=u.NULL_COLOR=void 0;let p=a(399),s=0,o=0,i=0,c=0;var f,l,r,d,_;function m(b){let S=b.toString(16);return S.length<2?"0"+S:S}function y(b,S){return b<S?(S+.05)/(b+.05):(b+.05)/(S+.05)}u.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(S,D,g,C){return C!==void 0?`#${m(S)}${m(D)}${m(g)}${m(C)}`:`#${m(S)}${m(D)}${m(g)}`},b.toRgba=function(S,D,g,C=255){return(S<<24|D<<16|g<<8|C)>>>0}}(f||(u.channels=f={})),function(b){function S(D,g){return c=Math.round(255*g),[s,o,i]=_.toChannels(D.rgba),{css:f.toCss(s,o,i,c),rgba:f.toRgba(s,o,i,c)}}b.blend=function(D,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};let C=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return s=T+Math.round((C-T)*c),o=M+Math.round((F-M)*c),i=w+Math.round((E-w)*c),{css:f.toCss(s,o,i),rgba:f.toRgba(s,o,i)}},b.isOpaque=function(D){return(255&D.rgba)==255},b.ensureContrastRatio=function(D,g,C){let F=_.ensureContrastRatio(D.rgba,g.rgba,C);if(F)return _.toColor(F>>24&255,F>>16&255,F>>8&255)},b.opaque=function(D){let g=(255|D.rgba)>>>0;return[s,o,i]=_.toChannels(g),{css:f.toCss(s,o,i),rgba:g}},b.opacity=S,b.multiplyOpacity=function(D,g){return c=255&D.rgba,S(D,c*g/255)},b.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(l||(u.color=l={})),function(b){let S,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let C=g.getContext("2d",{willReadFrequently:!0});C&&(S=C,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}b.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return s=parseInt(g.slice(1,2).repeat(2),16),o=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),_.toColor(s,o,i);case 5:return s=parseInt(g.slice(1,2).repeat(2),16),o=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),_.toColor(s,o,i,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let C=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return s=parseInt(C[1]),o=parseInt(C[2]),i=parseInt(C[3]),c=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),_.toColor(s,o,i,c);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[s,o,i,c]=S.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(s,o,i,c),css:g}}}(r||(u.css=r={})),function(b){function S(D,g,C){let F=D/255,E=g/255,T=C/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}b.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},b.relativeLuminance2=S}(d||(u.rgb=d={})),function(b){function S(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w>0||L>0||A>0);)w-=Math.max(0,Math.ceil(.1*w)),L-=Math.max(0,Math.ceil(.1*L)),A-=Math.max(0,Math.ceil(.1*A)),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}function D(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w<255||L<255||A<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),L=Math.min(255,L+Math.ceil(.1*(255-L))),A=Math.min(255,A+Math.ceil(.1*(255-A))),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}b.ensureContrastRatio=function(g,C,F){let E=d.relativeLuminance(g>>8),T=d.relativeLuminance(C>>8);if(y(E,T)<F){if(T<E){let L=S(g,C,F),A=y(E,d.relativeLuminance(L>>8));if(A<F){let R=D(g,C,F);return A>y(E,d.relativeLuminance(R>>8))?L:R}return L}let M=D(g,C,F),w=y(E,d.relativeLuminance(M>>8));if(w<F){let L=S(g,C,F);return w>y(E,d.relativeLuminance(L>>8))?M:L}return M}},b.reduceLuminance=S,b.increaseLuminance=D,b.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},b.toColor=function(g,C,F,E){return{css:f.toCss(g,C,F,E),rgba:f.toRgba(g,C,F,E)}}}(_||(u.rgba=_={})),u.toPaddedHex=m,u.contrastRatio=y},345:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let s=[];for(let o=0;o<this._listeners.length;o++)s.push(this._listeners[o]);for(let o=0;o<s.length;o++)s[o].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(a,p){return a(s=>p.fire(s))}},859:(v,u)=>{function a(p){for(let s of p)s.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let s=this._disposables.indexOf(p);s!==-1&&this._disposables.splice(s,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var s;this._isDisposed||p===this._value||((s=this._value)===null||s===void 0||s.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=a,u.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},485:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FourKeyMap=u.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(s,o,i){this._data[s]||(this._data[s]={}),this._data[s][o]=i}get(s,o){return this._data[s]?this._data[s][o]:void 0}clear(){this._data={}}}u.TwoKeyMap=a,u.FourKeyMap=class{constructor(){this._data=new a}set(p,s,o,i,c){this._data.get(p,s)||this._data.set(p,s,new a),this._data.get(p,s).set(o,i,c)}get(p,s,o,i){var c;return(c=this._data.get(p,s))===null||c===void 0?void 0:c.get(o,i)}clear(){this._data.clear()}}},399:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isChromeOS=u.isLinux=u.isWindows=u.isIphone=u.isIpad=u.isMac=u.getSafariVersion=u.isSafari=u.isLegacyEdge=u.isFirefox=u.isNode=void 0,u.isNode=typeof navigator>"u";let a=u.isNode?"node":navigator.userAgent,p=u.isNode?"node":navigator.platform;u.isFirefox=a.includes("Firefox"),u.isLegacyEdge=a.includes("Edge"),u.isSafari=/^((?!chrome|android).)*safari/i.test(a),u.getSafariVersion=function(){if(!u.isSafari)return 0;let s=a.match(/Version\/(\d+)/);return s===null||s.length<2?0:parseInt(s[1])},u.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),u.isIpad=p==="iPad",u.isIphone=p==="iPhone",u.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),u.isLinux=p.indexOf("Linux")>=0,u.isChromeOS=/\bCrOS\b/.test(a)},385:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DebouncedIdleTask=u.IdleTaskQueue=u.PriorityTaskQueue=void 0;let p=a(399);class s{constructor(){this._tasks=[],this._i=0}enqueue(c){this._tasks.push(c),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(c){this._idleCallback=void 0;let f=0,l=0,r=c.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),l=Math.max(f,l),d=c.timeRemaining(),1.5*l>d)return r-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-f))}ms`),void this._start();r=d}this.clear()}}class o extends s{_requestCallback(c){return setTimeout(()=>c(this._createDeadline(16)))}_cancelCallback(c){clearTimeout(c)}_createDeadline(c){let f=Date.now()+c;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}u.PriorityTaskQueue=o,u.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(i){return requestIdleCallback(i)}_cancelCallback(i){cancelIdleCallback(i)}}:o,u.DebouncedIdleTask=class{constructor(){this._queue=new u.IdleTaskQueue}set(i){this._queue.clear(),this._queue.enqueue(i)}flush(){this._queue.flush()}}},147:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ExtendedAttrs=u.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){let o=new a;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}u.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}constructor(o=0,i=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=i}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}u.ExtendedAttrs=p},782:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellData=void 0;let p=a(133),s=a(855),o=a(147);class i extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let l=new i;return l.setFromCharData(f),l}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let l=!1;if(f[s.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(f[s.CHAR_DATA_CHAR_INDEX].length===2){let r=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){let d=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(r-55296)+d-56320+65536|f[s.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[s.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=f[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.CellData=i},855:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WHITESPACE_CELL_CODE=u.WHITESPACE_CELL_WIDTH=u.WHITESPACE_CELL_CHAR=u.NULL_CELL_CODE=u.NULL_CELL_WIDTH=u.NULL_CELL_CHAR=u.CHAR_DATA_CODE_INDEX=u.CHAR_DATA_WIDTH_INDEX=u.CHAR_DATA_CHAR_INDEX=u.CHAR_DATA_ATTR_INDEX=u.DEFAULT_EXT=u.DEFAULT_ATTR=u.DEFAULT_COLOR=void 0,u.DEFAULT_COLOR=0,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.DEFAULT_EXT=0,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},133:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Utf8ToUtf32=u.StringToUtf32=u.utf32ToString=u.stringFromCodePoint=void 0,u.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},u.utf32ToString=function(a,p=0,s=a.length){let o="";for(let i=p;i<s;++i){let c=a[i];c>65535?(c-=65536,o+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):o+=String.fromCharCode(c)}return o},u.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let s=a.length;if(!s)return 0;let o=0,i=0;if(this._interim){let c=a.charCodeAt(i++);56320<=c&&c<=57343?p[o++]=1024*(this._interim-55296)+c-56320+65536:(p[o++]=this._interim,p[o++]=c),this._interim=0}for(let c=i;c<s;++c){let f=a.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=s)return this._interim=f,o;let l=a.charCodeAt(c);56320<=l&&l<=57343?p[o++]=1024*(f-55296)+l-56320+65536:(p[o++]=f,p[o++]=l)}else f!==65279&&(p[o++]=f)}return o}},u.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let s=a.length;if(!s)return 0;let o,i,c,f,l=0,r=0,d=0;if(this.interim[0]){let y=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)b<<=6,b|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=g-D;for(;d<C;){if(d>=s)return 0;if(S=a[d++],(192&S)!=128){d--,y=!0;break}this.interim[D++]=S,b<<=6,b|=63&S}y||(g===2?b<128?d--:p[l++]=b:g===3?b<2048||b>=55296&&b<=57343||b===65279||(p[l++]=b):b<65536||b>1114111||(p[l++]=b)),this.interim.fill(0)}let _=s-4,m=d;for(;m<s;){for(;!(!(m<_)||128&(o=a[m])||128&(i=a[m+1])||128&(c=a[m+2])||128&(f=a[m+3]));)p[l++]=o,p[l++]=i,p[l++]=c,p[l++]=f,m+=4;if(o=a[m++],o<128)p[l++]=o;else if((224&o)==192){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(r=(31&o)<<6|63&i,r<128){m--;continue}p[l++]=r}else if((240&o)==224){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,l;if(c=a[m++],(192&c)!=128){m--;continue}if(r=(15&o)<<12|(63&i)<<6|63&c,r<2048||r>=55296&&r<=57343||r===65279)continue;p[l++]=r}else if((248&o)==240){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,l;if(c=a[m++],(192&c)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,this.interim[2]=c,l;if(f=a[m++],(192&f)!=128){m--;continue}if(r=(7&o)<<18|(63&i)<<12|(63&c)<<6|63&f,r<65536||r>1114111)continue;p[l++]=r}}return l}}},776:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.traceCall=u.setTraceLogger=u.LogService=void 0;let o=a(859),i=a(97),c={trace:i.LogLevelEnum.TRACE,debug:i.LogLevelEnum.DEBUG,info:i.LogLevelEnum.INFO,warn:i.LogLevelEnum.WARN,error:i.LogLevelEnum.ERROR,off:i.LogLevelEnum.OFF},f,l=u.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=i.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),f=this}_updateLogLevel(){this._logLevel=c[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let d=0;d<r.length;d++)typeof r[d]=="function"&&(r[d]=r[d]())}_log(r,d,_){this._evalLazyOptionalParams(_),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,..._)}trace(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,r,d)}debug(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,r,d)}info(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,r,d)}warn(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,r,d)}error(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,r,d)}};u.LogService=l=p([s(0,i.IOptionsService)],l),u.setTraceLogger=function(r){f=r},u.traceCall=function(r,d,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(f.logLevel!==i.LogLevelEnum.TRACE)return m.apply(this,y);f.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let b=m.apply(this,y);return f.trace(`GlyphRenderer#${m.name} return`,b),b}}},726:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createDecorator=u.getServiceDependencies=u.serviceRegistry=void 0;let a="di$target",p="di$dependencies";u.serviceRegistry=new Map,u.getServiceDependencies=function(s){return s[p]||[]},u.createDecorator=function(s){if(u.serviceRegistry.has(s))return u.serviceRegistry.get(s);let o=function(i,c,f){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(l,r,d){r[a]===r?r[p].push({id:l,index:d}):(r[p]=[{id:l,index:d}],r[a]=r)})(o,i,f)};return o.toString=()=>s,u.serviceRegistry.set(s,o),o}},97:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.IDecorationService=u.IUnicodeService=u.IOscLinkService=u.IOptionsService=u.ILogService=u.LogLevelEnum=u.IInstantiationService=u.ICharsetService=u.ICoreService=u.ICoreMouseService=u.IBufferService=void 0;let p=a(726);var s;u.IBufferService=(0,p.createDecorator)("BufferService"),u.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),u.ICoreService=(0,p.createDecorator)("CoreService"),u.ICharsetService=(0,p.createDecorator)("CharsetService"),u.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(s||(u.LogLevelEnum=s={})),u.ILogService=(0,p.createDecorator)("LogService"),u.IOptionsService=(0,p.createDecorator)("OptionsService"),u.IOscLinkService=(0,p.createDecorator)("OscLinkService"),u.IUnicodeService=(0,p.createDecorator)("UnicodeService"),u.IDecorationService=(0,p.createDecorator)("DecorationService")}},t={};function n(v){var u=t[v];if(u!==void 0)return u.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let u=n(345),a=n(859),p=n(399),s=n(666),o=n(776);class i extends a.Disposable{constructor(f){if(p.isSafari&&(0,p.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=f,this._onChangeTextureAtlas=this.register(new u.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new u.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new u.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new u.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(f){let l=f._core;if(!f.element)return void this.register(l.onWillOpen(()=>this.activate(f)));this._terminal=f;let r=l.coreService,d=l.optionsService,_=l,m=_._renderService,y=_._characterJoinerService,b=_._charSizeService,S=_._coreBrowserService,D=_._decorationService,g=_._logService,C=_._themeService;(0,o.setTraceLogger)(g),this._renderer=this.register(new s.WebglRenderer(f,y,b,S,r,D,d,C,this._preserveDrawingBuffer)),this.register((0,u.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,u.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,u.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,u.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let F=this._terminal._core._renderService;F.setRenderer(this._terminal._core._createRenderer()),F.handleResize(f.cols,f.rows)}))}get textureAtlas(){var f;return(f=this._renderer)===null||f===void 0?void 0:f.textureAtlas}clearTextureAtlas(){var f;(f=this._renderer)===null||f===void 0||f.clearTextureAtlas()}}v.WebglAddon=i})(),h})())});var VA=ht((E_,bD)=>{(function(e,t){typeof E_=="object"&&typeof bD=="object"?bD.exports=t():typeof define=="function"&&define.amd?define([],t):typeof E_=="object"?E_.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LinkComputer=u.WebLinkProvider=void 0,u.WebLinkProvider=class{constructor(p,s,o,i={}){this._terminal=p,this._regex=s,this._handler=o,this._options=i}provideLinks(p,s){let o=a.computeLink(p,this._regex,this._terminal,this._handler);s(this._addCallbacks(o))}_addCallbacks(p){return p.map(s=>(s.leave=this._options.leave,s.hover=(o,i)=>{if(this._options.hover){let{range:c}=s;this._options.hover(o,i,c)}},s))}};class a{static computeLink(s,o,i,c){let f=new RegExp(o.source,(o.flags||"")+"g"),[l,r]=a._getWindowedLineStrings(s-1,i),d=l.join(""),_,m=[];for(;_=f.exec(d);){let y=_[0];try{let F=new URL(y),E=decodeURI(F.toString());if(y!==E&&y+"/"!==E)continue}catch{continue}let[b,S]=a._mapStrIdx(i,r,0,_.index),[D,g]=a._mapStrIdx(i,b,S,y.length);if(b===-1||S===-1||D===-1||g===-1)continue;let C={start:{x:S+1,y:b+1},end:{x:g,y:D+1}};m.push({range:C,text:y,activate:c})}return m}static _getWindowedLineStrings(s,o){let i,c=s,f=s,l=0,r="",d=[];if(i=o.buffer.active.getLine(s)){let _=i.translateToString(!0);if(i.isWrapped&&_[0]!==" "){for(l=0;(i=o.buffer.active.getLine(--c))&&l<2048&&(r=i.translateToString(!0),l+=r.length,d.push(r),i.isWrapped&&r.indexOf(" ")===-1););d.reverse()}for(d.push(_),l=0;(i=o.buffer.active.getLine(++f))&&i.isWrapped&&l<2048&&(r=i.translateToString(!0),l+=r.length,d.push(r),r.indexOf(" ")===-1););}return[d,c]}static _mapStrIdx(s,o,i,c){let f=s.buffer.active,l=f.getNullCell(),r=i;for(;c;){let d=f.getLine(o);if(!d)return[-1,-1];for(let _=r;_<d.length;++_){d.getCell(_,l);let m=l.getChars();if(l.getWidth()&&(c-=m.length||1,_===d.length-1&&m==="")){let y=f.getLine(o+1);y&&y.isWrapped&&(y.getCell(0,l),l.getWidth()===2&&(c+=1))}if(c<0)return[o,_]}o++,r=0}return[o,r]}}u.LinkComputer=a}},t={};function n(v){var u=t[v];if(u!==void 0)return u.exports;var a=t[v]={exports:{}};return e[v](a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let u=n(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function p(s,o){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(s=p,o={}){this._handler=s,this._options=o}activate(s){this._terminal=s;let o=this._options,i=o.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new u.WebLinkProvider(this._terminal,i,this._handler,o))}dispose(){var s;(s=this._linkProvider)===null||s===void 0||s.dispose()}}})(),h})())});var YA=ht((L_,ED)=>{(function(e,t){if(typeof L_=="object"&&typeof ED=="object")ED.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var h in n)(typeof L_=="object"?L_:e)[h]=n[h]}})(self,()=>(()=>{"use strict";var e={4567:function(v,u,a){var p=this&&this.__decorate||function(m,y,b,S){var D,g=arguments.length,C=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,y,b,S);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(C=(g<3?D(C):g>3?D(y,b,C):D(y,b))||C);return g>3&&C&&Object.defineProperty(y,b,C),C},s=this&&this.__param||function(m,y){return function(b,S){y(b,S,m)}};Object.defineProperty(u,"__esModule",{value:!0}),u.AccessibilityManager=void 0;let o=a(9042),i=a(6114),c=a(9924),f=a(844),l=a(5596),r=a(4725),d=a(3656),_=u.AccessibilityManager=class extends f.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new c.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(b=>this._handleResize(b.rows))),this.register(this._terminal.onRender(b=>this._refreshRows(b.start,b.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(b=>this._handleChar(b))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(b=>this._handleTab(b))),this.register(this._terminal.onKey(b=>this._handleKey(b.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new l.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,f.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=o.tooMuchOutput)),i.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,i.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let b=this._terminal.buffer,S=b.lines.length.toString();for(let D=m;D<=y;D++){let g=b.translateBufferLineToString(b.ydisp+D,!0),C=(b.ydisp+D+1).toString(),F=this._rowElements[D];F&&(g.length===0?F.innerText="\xA0":F.textContent=g,F.setAttribute("aria-posinset",C),F.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let b=m.target,S=this._rowElements[y===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==S)return;let D,g;if(y===0?(D=b,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=b,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{let C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};u.AccessibilityManager=_=p([s(1,r.IRenderService)],_)},3614:(v,u)=>{function a(i){return i.replace(/\r?\n/g,"\r")}function p(i,c){return c?"\x1B[200~"+i+"\x1B[201~":i}function s(i,c,f,l){i=p(i=a(i),f.decPrivateModes.bracketedPasteMode&&l.rawOptions.ignoreBracketedPasteMode!==!0),f.triggerDataEvent(i,!0),c.value=""}function o(i,c,f){let l=f.getBoundingClientRect(),r=i.clientX-l.left-10,d=i.clientY-l.top-10;c.style.width="20px",c.style.height="20px",c.style.left=`${r}px`,c.style.top=`${d}px`,c.style.zIndex="1000",c.focus()}Object.defineProperty(u,"__esModule",{value:!0}),u.rightClickHandler=u.moveTextAreaUnderMouseCursor=u.paste=u.handlePasteEvent=u.copyHandler=u.bracketTextForPaste=u.prepareTextForTerminal=void 0,u.prepareTextForTerminal=a,u.bracketTextForPaste=p,u.copyHandler=function(i,c){i.clipboardData&&i.clipboardData.setData("text/plain",c.selectionText),i.preventDefault()},u.handlePasteEvent=function(i,c,f,l){i.stopPropagation(),i.clipboardData&&s(i.clipboardData.getData("text/plain"),c,f,l)},u.paste=s,u.moveTextAreaUnderMouseCursor=o,u.rightClickHandler=function(i,c,f,l,r){o(i,c,f),r&&l.rightClickSelect(i),c.value=l.selectionText,c.select()}},7239:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorContrastCache=void 0;let p=a(1505);u.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(s,o,i){this._css.set(s,o,i)}getCss(s,o){return this._css.get(s,o)}setColor(s,o,i){this._color.set(s,o,i)}getColor(s,o){return this._color.get(s,o)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=void 0,u.addDisposableDomListener=function(a,p,s,o){a.addEventListener(p,s,o);let i=!1;return{dispose:()=>{i||(i=!0,a.removeEventListener(p,s,o))}}}},6465:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.Linkifier2=void 0;let o=a(3656),i=a(8460),c=a(844),f=a(2585),l=u.Linkifier2=class extends c.Disposable{get currentLink(){return this._currentLink}constructor(r){super(),this._bufferService=r,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new i.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new i.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,c.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,c.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(r){return this._linkProviders.push(r),{dispose:()=>{let d=this._linkProviders.indexOf(r);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(r,d,_){this._element=r,this._mouseService=d,this._renderService=_,this.register((0,o.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,o.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,o.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(r){if(this._lastMouseEvent=r,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let _=r.composedPath();for(let m=0;m<_.length;m++){let y=_[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(r){if(this._activeLine!==r.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(r,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))}_askForLink(r,d){var _,m;this._activeProviderReplies&&d||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(b=>{b?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=r.y);let y=!1;for(let[b,S]of this._linkProviders.entries())d?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(b)&&(y=this._checkLinkProviderResult(b,r,y)):S.provideLinks(r.y,D=>{var g,C;if(this._isMouseOut)return;let F=D?.map(E=>({link:E}));(g=this._activeProviderReplies)===null||g===void 0||g.set(b,F),y=this._checkLinkProviderResult(b,r,y),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(r.y,this._activeProviderReplies)})}_removeIntersectingLinks(r,d){let _=new Set;for(let m=0;m<d.size;m++){let y=d.get(m);if(y)for(let b=0;b<y.length;b++){let S=y[b],D=S.link.range.start.y<r?0:S.link.range.start.x,g=S.link.range.end.y>r?this._bufferService.cols:S.link.range.end.x;for(let C=D;C<=g;C++){if(_.has(C)){y.splice(b--,1);break}_.add(C)}}}}_checkLinkProviderResult(r,d,_){var m;if(!this._activeProviderReplies)return _;let y=this._activeProviderReplies.get(r),b=!1;for(let S=0;S<r;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(b=!0);if(!b&&y){let S=y.find(D=>this._linkAtPosition(D.link,d));S&&(_=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let S=0;S<this._activeProviderReplies.size;S++){let D=(m=this._activeProviderReplies.get(S))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,d));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(r){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(r,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(r,this._currentLink.link.text)}_clearCurrentLink(r,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!r||!d||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,c.disposeArray)(this._linkCacheDisposables))}_handleNewLink(r){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(r.link,d)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:_=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline},set:_=>{var m,y,b;!((m=this._currentLink)===null||m===void 0)&&m.state&&((b=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||b===void 0?void 0:b.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(r.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;let m=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}})))}_linkHover(r,d,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(_,d.text)}_fireUnderlineEvent(r,d){let _=r.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-m-1,_.end.x,_.end.y-m-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(r,d,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(_,d.text)}_linkAtPosition(r,d){let _=r.range.start.y*this._bufferService.cols+r.range.start.x,m=r.range.end.y*this._bufferService.cols+r.range.end.x,y=d.y*this._bufferService.cols+d.x;return _<=y&&y<=m}_positionFromMouseEvent(r,d,_){let m=_.getCoords(r,d,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(r,d,_,m,y){return{x1:r,y1:d,x2:_,y2:m,cols:this._bufferService.cols,fg:y}}};u.Linkifier2=l=p([s(0,f.IBufferService)],l)},9042:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.tooMuchOutput=u.promptLabel=void 0,u.promptLabel="Terminal input",u.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,u,a){var p=this&&this.__decorate||function(l,r,d,_){var m,y=arguments.length,b=y<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,r,d,_);else for(var S=l.length-1;S>=0;S--)(m=l[S])&&(b=(y<3?m(b):y>3?m(r,d,b):m(r,d))||b);return y>3&&b&&Object.defineProperty(r,d,b),b},s=this&&this.__param||function(l,r){return function(d,_){r(d,_,l)}};Object.defineProperty(u,"__esModule",{value:!0}),u.OscLinkProvider=void 0;let o=a(511),i=a(2585),c=u.OscLinkProvider=class{constructor(l,r,d){this._bufferService=l,this._optionsService=r,this._oscLinkService=d}provideLinks(l,r){var d;let _=this._bufferService.buffer.lines.get(l-1);if(!_)return void r(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,b=new o.CellData,S=_.getTrimmedLength(),D=-1,g=-1,C=!1;for(let F=0;F<S;F++)if(g!==-1||_.hasContent(F)){if(_.loadCell(F,b),b.hasExtendedAttrs()&&b.extended.urlId){if(g===-1){g=F,D=b.extended.urlId;continue}C=b.extended.urlId!==D}else g!==-1&&(C=!0);if(C||g!==-1&&F===S-1){let E=(d=this._oscLinkService.getLinkData(D))===null||d===void 0?void 0:d.uri;if(E){let T={start:{x:g+1,y:l},end:{x:F+(C||F!==S-1?0:1),y:l}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(E);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||m.push({text:E,range:T,activate:(w,L)=>y?y.activate(w,L,T):f(0,L),hover:(w,L)=>{var A;return(A=y?.hover)===null||A===void 0?void 0:A.call(y,w,L,T)},leave:(w,L)=>{var A;return(A=y?.leave)===null||A===void 0?void 0:A.call(y,w,L,T)}})}C=!1,b.hasExtendedAttrs()&&b.extended.urlId?(g=F,D=b.extended.urlId):(g=-1,D=-1)}}r(m)}};function f(l,r){if(confirm(`Do you want to navigate to ${r}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}}u.OscLinkProvider=c=p([s(0,i.IBufferService),s(1,i.IOptionsService),s(2,i.IOscLinkService)],c)},6193:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.RenderDebouncer=void 0,u.RenderDebouncer=class{constructor(a,p){this._parentWindow=a,this._renderCallback=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,p,s){this._rowCount=s,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ScreenDprMonitor=void 0;let p=a(844);class s extends p.Disposable{constructor(i){super(),this._parentWindow=i,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,p.toDisposable)(()=>{this.clearListener()}))}setListener(i){this._listener&&this.clearListener(),this._listener=i,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var i;this._outerListener&&((i=this._resolutionMediaMatchList)===null||i===void 0||i.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}u.ScreenDprMonitor=s},3236:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Terminal=void 0;let p=a(3614),s=a(3656),o=a(6465),i=a(9042),c=a(3730),f=a(1680),l=a(3107),r=a(5744),d=a(2950),_=a(1296),m=a(428),y=a(4269),b=a(5114),S=a(8934),D=a(3230),g=a(9312),C=a(4725),F=a(6731),E=a(8055),T=a(8969),M=a(8460),w=a(844),L=a(6114),A=a(8437),R=a(2584),x=a(7399),I=a(5941),$=a(9074),k=a(2585),H=a(5435),U=a(4567),q=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=L,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(o.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(c.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,W)=>this.refresh(B,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,w.toDisposable)(()=>{var B,W;this._customKeyEventHandler=void 0,(W=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||W===void 0||W.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let W,P="";switch(B.index){case 256:W="foreground",P="10";break;case 257:W="background",P="11";break;case 258:W="cursor",P="12";break;default:W="ansi",P="4;"+B.index}switch(B.type){case 0:let Q=E.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${P};${(0,I.toRgbString)(Q)}${R.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(G=>G.ansi[B.index]=E.rgba.toColor(...B.color));else{let G=W;this._themeService.modifyColors(ve=>ve[G]=E.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let W=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.css.cell.height,Q=B.getWidth(W),G=this._renderService.dimensions.css.cell.width*Q,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=G+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,s.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,p.copyHandler)(B,this._selectionService)}));let O=B=>(0,p.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,s.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,s.addDisposableDomListener)(this.element,"paste",O)),L.isFirefox?this.register((0,s.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,s.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),L.isLinux&&this.register((0,s.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,p.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,s.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,s.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,s.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let W=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),L.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,s.addDisposableDomListener)(this.textarea,"focus",P=>this._handleTextAreaFocus(P))),this.register((0,s.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(F.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(P=>this._onRender.fire(P))),this.onResize(P=>this._renderService.resize(P.cols,P.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(f.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(P=>this._renderService.handleSelectionChanged(P.start,P.end,P.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(P=>{this.textarea.value=P,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(P=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,s.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(l.BufferDecorationRenderer,this.screenElement)),this.register((0,s.addDisposableDomListener)(this.element,"mousedown",P=>this._selectionService.handleMouseDown(P))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",P=>this._handleScreenReaderModeOptionChange(P))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",P=>{!this._overviewRulerRenderer&&P&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(r.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function W(G){let ve=O._mouseService.getMouseReportCoords(G,O.screenElement);if(!ve)return!1;let Ee,ye;switch(G.overrideType||G.type){case"mousemove":ye=32,G.buttons===void 0?(Ee=3,G.button!==void 0&&(Ee=G.button<3?G.button:3)):Ee=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":ye=0,Ee=G.button<3?G.button:3;break;case"mousedown":ye=1,Ee=G.button<3?G.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(G)===0)return!1;ye=G.deltaY<0?0:1,Ee=4;break;default:return!1}return!(ye===void 0||Ee===void 0||Ee>4)&&O.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:Ee,action:ye,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}let P={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Q={mouseup:G=>(W(G),G.buttons||(this._document.removeEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.removeEventListener("mousemove",P.mousedrag)),this.cancel(G)),wheel:G=>(W(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&W(G)},mousemove:G=>{G.buttons||W(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?P.mousemove||(B.addEventListener("mousemove",Q.mousemove),P.mousemove=Q.mousemove):(B.removeEventListener("mousemove",P.mousemove),P.mousemove=null),16&G?P.wheel||(B.addEventListener("wheel",Q.wheel,{passive:!1}),P.wheel=Q.wheel):(B.removeEventListener("wheel",P.wheel),P.wheel=null),2&G?P.mouseup||(B.addEventListener("mouseup",Q.mouseup),P.mouseup=Q.mouseup):(this._document.removeEventListener("mouseup",P.mouseup),B.removeEventListener("mouseup",P.mouseup),P.mouseup=null),4&G?P.mousedrag||(P.mousedrag=Q.mousedrag):(this._document.removeEventListener("mousemove",P.mousedrag),P.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,s.addDisposableDomListener)(B,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return W(G),P.mouseup&&this._document.addEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.addEventListener("mousemove",P.mousedrag),this.cancel(G)})),this.register((0,s.addDisposableDomListener)(B,"wheel",G=>{if(!P.wheel){if(!this.buffer.hasScrollback){let ve=this.viewport.getLinesScrolled(G);if(ve===0)return;let Ee=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B"),ye="";for(let ue=0;ue<Math.abs(ve);ue++)ye+=Ee;return this.coreService.triggerDataEvent(ye,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,s.addDisposableDomListener)(B,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,s.addDisposableDomListener)(B,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(O,B){var W;(W=this._renderService)===null||W===void 0||W.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,W=0){var P;W===1?(super.scrollLines(O,B,W),this.refresh(0,this.rows-1)):(P=this.viewport)===null||P===void 0||P.scrollLines(O)}paste(O){(0,p.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,W){this._selectionService.setSelection(O,B,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var W;(W=this._selectionService)===null||W===void 0||W.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let W=(0,x.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),W.type===3||W.type===2){let P=this.rows-1;return this.scrollLines(W.type===2?-P:P),this.cancel(O,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(W.cancel&&this.cancel(O,!0),!W.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==R.C0.ETX&&W.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let W=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?W:W&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var W,P;(W=this._charSizeService)===null||W===void 0||W.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(A.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let W=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${W};${B}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let P=this._renderService.dimensions.css.cell.width.toFixed(0),Q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${Q};${P}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}u.Terminal=N},9924:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TimeBasedDebouncer=void 0,u.TimeBasedDebouncer=class{constructor(a,p=1e3){this._renderCallback=a,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,p,s){this._rowCount=s,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;let o=Date.now();if(o-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=o,this._innerRefresh();else if(!this._additionalRefreshRequested){let i=o-this._lastRefreshMs,c=this._debounceThresholdMS-i;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},c)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p)}}},1680:function(v,u,a){var p=this&&this.__decorate||function(d,_,m,y){var b,S=arguments.length,D=S<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(d,_,m,y);else for(var g=d.length-1;g>=0;g--)(b=d[g])&&(D=(S<3?b(D):S>3?b(_,m,D):b(_,m))||D);return S>3&&D&&Object.defineProperty(_,m,D),D},s=this&&this.__param||function(d,_){return function(m,y){_(m,y,d)}};Object.defineProperty(u,"__esModule",{value:!0}),u.Viewport=void 0;let o=a(3656),i=a(4725),c=a(8460),f=a(844),l=a(2585),r=u.Viewport=class extends f.Disposable{constructor(d,_,m,y,b,S,D,g){super(),this._viewportElement=d,this._scrollArea=_,this._bufferService=m,this._optionsService=y,this._charSizeService=b,this._renderService=S,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new c.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,o.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,_){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&m<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){let _=this._getPixelsScrolled(d);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let _=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(d,_){var m;let y,b="",S=[],D=_??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let C=d;C<D;C++){let F=g.get(C);if(!F)continue;let E=(m=g.get(C+1))===null||m===void 0?void 0:m.isWrapped;if(b+=F.translateToString(!E),!E||C===g.length-1){let T=document.createElement("div");T.textContent=b,S.push(T),b.length>0&&(y=T),b=""}}return{bufferElements:S,cursorElement:y}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let _=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(d,_){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&_.altKey||m==="ctrl"&&_.ctrlKey||m==="shift"&&_.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){let _=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(d,_))}};u.Viewport=r=p([s(2,l.IBufferService),s(3,l.IOptionsService),s(4,i.ICharSizeService),s(5,i.IRenderService),s(6,i.ICoreBrowserService),s(7,i.IThemeService)],r)},3107:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.BufferDecorationRenderer=void 0;let o=a(3656),i=a(4725),c=a(844),f=a(2585),l=u.BufferDecorationRenderer=class extends c.Disposable{constructor(r,d,_,m){super(),this._screenElement=r,this._bufferService=d,this._decorationService=_,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,o.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,c.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let r of this._decorationService.decorations)this._renderDecoration(r);this._dimensionsChanged=!1}_renderDecoration(r){this._refreshStyle(r),this._dimensionsChanged&&this._refreshXPosition(r)}_createElement(r){var d,_;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((d=r?.options)===null||d===void 0?void 0:d.layer)==="top"),m.style.width=`${Math.round((r.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(r.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(r.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(_=r.options.x)!==null&&_!==void 0?_:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(r,m),m}_refreshStyle(r){let d=r.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)r.element&&(r.element.style.display="none",r.onRenderEmitter.fire(r.element));else{let _=this._decorationElements.get(r);_||(_=this._createElement(r),r.element=_,this._decorationElements.set(r,_),this._container.appendChild(_),r.onDispose(()=>{this._decorationElements.delete(r),_.remove()})),_.style.top=d*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",r.onRenderEmitter.fire(_)}}_refreshXPosition(r,d=r.element){var _;if(!d)return;let m=(_=r.options.x)!==null&&_!==void 0?_:0;(r.options.anchor||"left")==="right"?d.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(r){var d;(d=this._decorationElements.get(r))===null||d===void 0||d.remove(),this._decorationElements.delete(r),r.dispose()}};u.BufferDecorationRenderer=l=p([s(1,f.IBufferService),s(2,f.IDecorationService),s(3,i.IRenderService)],l)},5871:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorZoneStore=void 0,u.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let p of this._zones)if(p.color===a.options.overviewRulerOptions.color&&p.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,a.marker.line))return;if(this._lineAdjacentToZone(p,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(p,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,p){return p>=a.startBufferLine&&p<=a.endBufferLine}_lineAdjacentToZone(a,p,s){return p>=a.startBufferLine-this._linePadding[s||"full"]&&p<=a.endBufferLine+this._linePadding[s||"full"]}_addLineToZone(a,p){a.startBufferLine=Math.min(a.startBufferLine,p),a.endBufferLine=Math.max(a.endBufferLine,p)}}},5744:function(v,u,a){var p=this&&this.__decorate||function(y,b,S,D){var g,C=arguments.length,F=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,b,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(C<3?g(F):C>3?g(b,S,F):g(b,S))||F);return C>3&&F&&Object.defineProperty(b,S,F),F},s=this&&this.__param||function(y,b){return function(S,D){b(S,D,y)}};Object.defineProperty(u,"__esModule",{value:!0}),u.OverviewRulerRenderer=void 0;let o=a(5871),i=a(3656),c=a(4725),f=a(844),l=a(2585),r={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m=u.OverviewRulerRenderer=class extends f.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,b,S,D,g,C,F){var E;super(),this._viewportElement=y,this._screenElement=b,this._bufferService=S,this._decorationService=D,this._renderService=g,this._optionsService=C,this._coreBrowseService=F,this._colorZoneStore=new o.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(E=this._viewportElement.parentElement)===null||E===void 0||E.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,i.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=y,d.center=b,d.right=y,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=d.left,_.right=d.left+d.center}_refreshDrawHeightConstants(){r.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);r.left=b,r.center=b,r.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*r.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let b of y)b.position!=="full"&&this._renderColorZone(b);for(let b of y)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(_[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-r[y.position||"full"]/2),d[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+r[y.position||"full"]))}_queueRefresh(y,b){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};u.OverviewRulerRenderer=m=p([s(2,l.IBufferService),s(3,l.IDecorationService),s(4,c.IRenderService),s(5,l.IOptionsService),s(6,c.ICoreBrowserService)],m)},2950:function(v,u,a){var p=this&&this.__decorate||function(l,r,d,_){var m,y=arguments.length,b=y<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,r,d,_);else for(var S=l.length-1;S>=0;S--)(m=l[S])&&(b=(y<3?m(b):y>3?m(r,d,b):m(r,d))||b);return y>3&&b&&Object.defineProperty(r,d,b),b},s=this&&this.__param||function(l,r){return function(d,_){r(d,_,l)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CompositionHelper=void 0;let o=a(4725),i=a(2585),c=a(2584),f=u.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(l,r,d,_,m,y){this._textarea=l,this._compositionView=r,this._bufferService=d,this._optionsService=_,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(l){this._compositionView.textContent=l.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(l){if(this._isComposing||this._isSendingComposition){if(l.keyCode===229||l.keyCode===16||l.keyCode===17||l.keyCode===18)return!1;this._finalizeComposition(!1)}return l.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(l){if(this._compositionView.classList.remove("active"),this._isComposing=!1,l){let r={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,r.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(r.start,r.end):this._textarea.value.substring(r.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let r=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(r,!0)}}_handleAnyTextareaChanges(){let l=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let r=this._textarea.value,d=r.replace(l,"");this._dataAlreadySent=d,r.length>l.length?this._coreService.triggerDataEvent(d,!0):r.length<l.length?this._coreService.triggerDataEvent(`${c.C0.DEL}`,!0):r.length===l.length&&r!==l&&this._coreService.triggerDataEvent(r,!0)}},0)}updateCompositionElements(l){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=r*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}l||setTimeout(()=>this.updateCompositionElements(!0),0)}}};u.CompositionHelper=f=p([s(2,i.IBufferService),s(3,i.IOptionsService),s(4,i.ICoreService),s(5,o.IRenderService)],f)},9806:(v,u)=>{function a(p,s,o){let i=o.getBoundingClientRect(),c=p.getComputedStyle(o),f=parseInt(c.getPropertyValue("padding-left")),l=parseInt(c.getPropertyValue("padding-top"));return[s.clientX-i.left-f,s.clientY-i.top-l]}Object.defineProperty(u,"__esModule",{value:!0}),u.getCoords=u.getCoordsRelativeToElement=void 0,u.getCoordsRelativeToElement=a,u.getCoords=function(p,s,o,i,c,f,l,r,d){if(!f)return;let _=a(p,s,o);return _?(_[0]=Math.ceil((_[0]+(d?l/2:0))/l),_[1]=Math.ceil(_[1]/r),_[0]=Math.min(Math.max(_[0],1),i+(d?1:0)),_[1]=Math.min(Math.max(_[1],1),c),_):void 0}},9504:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.moveToCellSequence=void 0;let p=a(2584);function s(r,d,_,m){let y=r-o(r,_),b=d-o(d,_),S=Math.abs(y-b)-function(D,g,C){let F=0,E=D-o(D,C),T=g-o(g,C);for(let M=0;M<Math.abs(E-T);M++){let w=i(D,g)==="A"?-1:1,L=C.buffer.lines.get(E+w*M);L?.isWrapped&&F++}return F}(r,d,_);return l(S,f(i(r,d),m))}function o(r,d){let _=0,m=d.buffer.lines.get(r),y=m?.isWrapped;for(;y&&r>=0&&r<d.rows;)_++,m=d.buffer.lines.get(--r),y=m?.isWrapped;return _}function i(r,d){return r>d?"A":"B"}function c(r,d,_,m,y,b){let S=r,D=d,g="";for(;S!==_||D!==m;)S+=y?1:-1,y&&S>b.cols-1?(g+=b.buffer.translateBufferLineToString(D,!1,r,S),S=0,r=0,D++):!y&&S<0&&(g+=b.buffer.translateBufferLineToString(D,!1,0,r+1),S=b.cols-1,r=S,D--);return g+b.buffer.translateBufferLineToString(D,!1,r,S)}function f(r,d){let _=d?"O":"[";return p.C0.ESC+_+r}function l(r,d){r=Math.floor(r);let _="";for(let m=0;m<r;m++)_+=d;return _}u.moveToCellSequence=function(r,d,_,m){let y=_.buffer.x,b=_.buffer.y;if(!_.buffer.hasScrollback)return function(g,C,F,E,T,M){return s(C,E,T,M).length===0?"":l(c(g,C,g,C-o(C,T),!1,T).length,f("D",M))}(y,b,0,d,_,m)+s(b,d,_,m)+function(g,C,F,E,T,M){let w;w=s(C,E,T,M).length>0?E-o(E,T):C;let L=E,A=function(R,x,I,$,k,H){let U;return U=s(I,$,k,H).length>0?$-o($,k):x,R<I&&U<=$||R>=I&&U<$?"C":"D"}(g,C,F,E,T,M);return l(c(g,w,F,L,A==="C",T).length,f(A,M))}(y,b,r,d,_,m);let S;if(b===d)return S=y>r?"D":"C",l(Math.abs(y-r),f(S,m));S=b>d?"D":"C";let D=Math.abs(b-d);return l(function(g,C){return C.cols-g}(b>d?r:y,_)+(D-1)*_.cols+1+((b>d?y:r)-1),f(S,m))}},1296:function(v,u,a){var p=this&&this.__decorate||function(T,M,w,L){var A,R=arguments.length,x=R<3?M:L===null?L=Object.getOwnPropertyDescriptor(M,w):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(T,M,w,L);else for(var I=T.length-1;I>=0;I--)(A=T[I])&&(x=(R<3?A(x):R>3?A(M,w,x):A(M,w))||x);return R>3&&x&&Object.defineProperty(M,w,x),x},s=this&&this.__param||function(T,M){return function(w,L){M(w,L,T)}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomRenderer=void 0;let o=a(3787),i=a(2550),c=a(2223),f=a(6171),l=a(4725),r=a(8055),d=a(8460),_=a(844),m=a(2585),y="xterm-dom-renderer-owner-",b="xterm-rows",S="xterm-fg-",D="xterm-bg-",g="xterm-focus",C="xterm-selection",F=1,E=u.DomRenderer=class extends _.Disposable{constructor(T,M,w,L,A,R,x,I,$,k){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=L,this._charSizeService=R,this._optionsService=x,this._bufferService=I,this._coreBrowserService=$,this._themeService=k,this._terminalClass=F++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,f.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(o.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new i.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${b} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${b} .xterm-dim { color: ${r.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${b}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,L]of T.ansi.entries())M+=`${this._terminalSelector} .${S}${w} { color: ${L.css}; }${this._terminalSelector} .${S}${w}.xterm-dim { color: ${r.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${L.css}; }`;M+=`${this._terminalSelector} .${S}${c.INVERTED_DEFAULT_COLOR} { color: ${r.color.opaque(T.background).css}; }${this._terminalSelector} .${S}${c.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${r.color.multiplyOpacity(r.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${c.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let L=document.createElement("div");this._rowContainer.appendChild(L),this._rowElements.push(L)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let L=T[1]-this._bufferService.buffer.ydisp,A=M[1]-this._bufferService.buffer.ydisp,R=Math.max(L,0),x=Math.min(A,this._bufferService.rows-1);if(R>=this._bufferService.rows||x<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],x-R+1))}else{let $=L===R?T[0]:0,k=R===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,k));let H=x-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,H)),R!==x){let U=A===x?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(x,0,U))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,L=1){let A=document.createElement("div");return A.style.height=L*this.dimensions.css.cell.height+"px",A.style.top=T*this.dimensions.css.cell.height+"px",A.style.left=M*this.dimensions.css.cell.width+"px",A.style.width=this.dimensions.css.cell.width*(w-M)+"px",A}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,L=w.ybase+w.y,A=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let k=$+w.ydisp,H=this._rowElements[$],U=w.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===L,x,I,A,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,L,A,R){w<0&&(T=0),L<0&&(M=0);let x=this._bufferService.rows-1;w=Math.max(Math.min(w,x),0),L=Math.max(Math.min(L,x),0),A=Math.min(A,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,k=Math.min(I.x,A-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=w;N<=L;++N){let K=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(K);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,K,K===$,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,R?N===w?T:0:-1,R?(N===L?M:A)-1:-1))}}};u.DomRenderer=E=p([s(4,m.IInstantiationService),s(5,l.ICharSizeService),s(6,m.IOptionsService),s(7,m.IBufferService),s(8,l.ICoreBrowserService),s(9,l.IThemeService)],E)},3787:function(v,u,a){var p=this&&this.__decorate||function(S,D,g,C){var F,E=arguments.length,T=E<3?D:C===null?C=Object.getOwnPropertyDescriptor(D,g):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,D,g,C);else for(var M=S.length-1;M>=0;M--)(F=S[M])&&(T=(E<3?F(T):E>3?F(D,g,T):F(D,g))||T);return E>3&&T&&Object.defineProperty(D,g,T),T},s=this&&this.__param||function(S,D){return function(g,C){D(g,C,S)}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomRendererRowFactory=void 0;let o=a(2223),i=a(643),c=a(511),f=a(2585),l=a(8055),r=a(4725),d=a(4269),_=a(6171),m=a(3734),y=u.DomRendererRowFactory=class{constructor(S,D,g,C,F,E,T){this._document=S,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=C,this._coreService=F,this._decorationService=E,this._themeService=T,this._workCell=new c.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,D,g){this._selectionStart=S,this._selectionEnd=D,this._columnSelectMode=g}createRow(S,D,g,C,F,E,T,M,w,L,A){let R=[],x=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,k=S.getNoBgTrimmedLength();g&&k<E+1&&(k=E+1);let H=0,U="",q=0,N=0,K=0,O=!1,B=0,W=!1,P=0,Q=[],G=L!==-1&&A!==-1;for(let ve=0;ve<k;ve++){S.loadCell(ve,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let ye=!1,ue=ve,Ce=this._workCell;if(x.length>0&&ve===x[0][0]){ye=!0;let Ue=x.shift();Ce=new d.JoinedCellData(this._workCell,S.translateToString(!0,Ue[0],Ue[1]),Ue[1]-Ue[0]),ue=Ue[1]-1,Ee=Ce.getWidth()}let yt=this._isCellInSelection(ve,D),qt=g&&ve===E,Ot=G&&ve>=L&&ve<=A,Xe=!1;this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ue=>{Xe=!0});let se=Ce.getChars()||i.WHITESPACE_CELL_CHAR;if(se===" "&&(Ce.isUnderline()||Ce.isOverline())&&(se="\xA0"),P=Ee*M-w.get(se,Ce.isBold(),Ce.isItalic()),$){if(H&&(yt&&W||!yt&&!W&&Ce.bg===q)&&(yt&&W&&I.selectionForeground||Ce.fg===N)&&Ce.extended.ext===K&&Ot===O&&P===B&&!qt&&!ye&&!Xe){U+=se,H++;continue}H&&($.textContent=U),$=this._document.createElement("span"),H=0,U=""}else $=this._document.createElement("span");if(q=Ce.bg,N=Ce.fg,K=Ce.extended.ext,O=Ot,B=P,W=yt,ye&&E>=ve&&E<=ue&&(E=ve),!this._coreService.isCursorHidden&&qt){if(Q.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&Q.push("xterm-cursor-blink"),Q.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(F)switch(F){case"outline":Q.push("xterm-cursor-outline");break;case"block":Q.push("xterm-cursor-block");break;case"bar":Q.push("xterm-cursor-bar");break;case"underline":Q.push("xterm-cursor-underline")}}if(Ce.isBold()&&Q.push("xterm-bold"),Ce.isItalic()&&Q.push("xterm-italic"),Ce.isDim()&&Q.push("xterm-dim"),U=Ce.isInvisible()?i.WHITESPACE_CELL_CHAR:Ce.getChars()||i.WHITESPACE_CELL_CHAR,Ce.isUnderline()&&(Q.push(`xterm-underline-${Ce.extended.underlineStyle}`),U===" "&&(U="\xA0"),!Ce.isUnderlineColorDefault()))if(Ce.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Ce.getUnderlineColor()).join(",")})`;else{let Ue=Ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Ce.isBold()&&Ue<8&&(Ue+=8),$.style.textDecorationColor=I.ansi[Ue].css}Ce.isOverline()&&(Q.push("xterm-overline"),U===" "&&(U="\xA0")),Ce.isStrikethrough()&&Q.push("xterm-strikethrough"),Ot&&($.style.textDecoration="underline");let he=Ce.getFgColor(),ce=Ce.getFgColorMode(),ne=Ce.getBgColor(),j=Ce.getBgColorMode(),re=!!Ce.isInverse();if(re){let Ue=he;he=ne,ne=Ue;let Dt=ce;ce=j,j=Dt}let fe,Pe,tt,st=!1;switch(this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ue=>{Ue.options.layer!=="top"&&st||(Ue.backgroundColorRGB&&(j=50331648,ne=Ue.backgroundColorRGB.rgba>>8&16777215,fe=Ue.backgroundColorRGB),Ue.foregroundColorRGB&&(ce=50331648,he=Ue.foregroundColorRGB.rgba>>8&16777215,Pe=Ue.foregroundColorRGB),st=Ue.options.layer==="top")}),!st&&yt&&(fe=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,ne=fe.rgba>>8&16777215,j=50331648,st=!0,I.selectionForeground&&(ce=50331648,he=I.selectionForeground.rgba>>8&16777215,Pe=I.selectionForeground)),st&&Q.push("xterm-decoration-top"),j){case 16777216:case 33554432:tt=I.ansi[ne],Q.push(`xterm-bg-${ne}`);break;case 50331648:tt=l.rgba.toColor(ne>>16,ne>>8&255,255&ne),this._addStyle($,`background-color:#${b((ne>>>0).toString(16),"0",6)}`);break;default:re?(tt=I.foreground,Q.push(`xterm-bg-${o.INVERTED_DEFAULT_COLOR}`)):tt=I.background}switch(fe||Ce.isDim()&&(fe=l.color.multiplyOpacity(tt,.5)),ce){case 16777216:case 33554432:Ce.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast($,tt,I.ansi[he],Ce,fe,void 0)||Q.push(`xterm-fg-${he}`);break;case 50331648:let Ue=l.rgba.toColor(he>>16&255,he>>8&255,255&he);this._applyMinimumContrast($,tt,Ue,Ce,fe,Pe)||this._addStyle($,`color:#${b(he.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,tt,I.foreground,Ce,fe,void 0)||re&&Q.push(`xterm-fg-${o.INVERTED_DEFAULT_COLOR}`)}Q.length&&($.className=Q.join(" "),Q.length=0),qt||ye||Xe?$.textContent=U:H++,P!==this.defaultSpacing&&($.style.letterSpacing=`${P}px`),R.push($),ve=ue}return $&&H&&($.textContent=U),R}_applyMinimumContrast(S,D,g,C,F,E){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(C.getCode()))return!1;let T=this._getContrastCache(C),M;if(F||E||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);M=l.color.ensureContrastRatio(F||D,E||g,w),T.setColor((F||D).rgba,(E||g).rgba,M??null)}return!!M&&(this._addStyle(S,`color:${M.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,D){S.setAttribute("style",`${S.getAttribute("style")||""}${D};`)}_isCellInSelection(S,D){let g=this._selectionStart,C=this._selectionEnd;return!(!g||!C)&&(this._columnSelectMode?g[0]<=C[0]?S>=g[0]&&D>=g[1]&&S<C[0]&&D<=C[1]:S<g[0]&&D>=g[1]&&S>=C[0]&&D<=C[1]:D>g[1]&&D<C[1]||g[1]===C[1]&&D===g[1]&&S>=g[0]&&S<C[0]||g[1]<C[1]&&D===C[1]&&S<C[0]||g[1]<C[1]&&D===g[1]&&S>=g[0])}};function b(S,D,g){for(;S.length<g;)S=D+S;return S}u.DomRendererRowFactory=y=p([s(1,r.ICharacterJoinerService),s(2,f.IOptionsService),s(3,r.ICoreBrowserService),s(4,f.ICoreService),s(5,f.IDecorationService),s(6,r.IThemeService)],y)},2550:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WidthCache=void 0,u.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let p=a.createElement("span"),s=a.createElement("span");s.style.fontWeight="bold";let o=a.createElement("span");o.style.fontStyle="italic";let i=a.createElement("span");i.style.fontWeight="bold",i.style.fontStyle="italic",this._measureElements=[p,s,o,i],this._container.appendChild(p),this._container.appendChild(s),this._container.appendChild(o),this._container.appendChild(i),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,p,s,o){a===this._font&&p===this._fontSize&&s===this._weight&&o===this._weightBold||(this._font=a,this._fontSize=p,this._weight=s,this._weightBold=o,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${s}`,this._measureElements[1].style.fontWeight=`${o}`,this._measureElements[2].style.fontWeight=`${s}`,this._measureElements[3].style.fontWeight=`${o}`,this.clear())}get(a,p,s){let o=0;if(!p&&!s&&a.length===1&&(o=a.charCodeAt(0))<256)return this._flat[o]!==-9999?this._flat[o]:this._flat[o]=this._measure(a,0);let i=a;p&&(i+="B"),s&&(i+="I");let c=this._holey.get(i);if(c===void 0){let f=0;p&&(f|=1),s&&(f|=2),c=this._measure(a,f),this._holey.set(i,c)}return c}_measure(a,p){let s=this._measureElements[p];return s.textContent=a.repeat(32),s.offsetWidth/32}}},2223:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TEXT_BASELINE=u.DIM_OPACITY=u.INVERTED_DEFAULT_COLOR=void 0;let p=a(6114);u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(v,u)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(u,"__esModule",{value:!0}),u.createRenderDimensions=u.excludeFromContrastRatioDemands=u.isRestrictedPowerlineGlyph=u.isPowerlineGlyph=u.throwIfFalsy=void 0,u.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},u.isPowerlineGlyph=a,u.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},u.excludeFromContrastRatioDemands=function(p){return a(p)||function(s){return 9472<=s&&s<=9631}(p)},u.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionModel=void 0,u.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,p=this.selectionEnd;return!(!a||!p)&&(a[1]>p[1]||a[1]===p[1]&&a[0]>p[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CharSizeService=void 0;let o=a(2585),i=a(8460),c=a(844),f=u.CharSizeService=class extends c.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(r,d,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new i.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new l(r,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let r=this._measureStrategy.measure();r.width===this.width&&r.height===this.height||(this.width=r.width,this.height=r.height,this._onCharSizeChange.fire())}};u.CharSizeService=f=p([s(2,o.IOptionsService)],f);class l{constructor(d,_,m){this._document=d,this._parentElement=_,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(v,u,a){var p=this&&this.__decorate||function(d,_,m,y){var b,S=arguments.length,D=S<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(d,_,m,y);else for(var g=d.length-1;g>=0;g--)(b=d[g])&&(D=(S<3?b(D):S>3?b(_,m,D):b(_,m))||D);return S>3&&D&&Object.defineProperty(_,m,D),D},s=this&&this.__param||function(d,_){return function(m,y){_(m,y,d)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CharacterJoinerService=u.JoinedCellData=void 0;let o=a(3734),i=a(643),c=a(511),f=a(2585);class l extends o.AttributeData{constructor(_,m,y){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.JoinedCellData=l;let r=u.CharacterJoinerService=class XA{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new c.CellData}register(_){let m={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(m),m.id}deregister(_){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===_)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(_);if(!m||m.length===0)return[];let y=[],b=m.translateToString(!0),S=0,D=0,g=0,C=m.getFg(0),F=m.getBg(0);for(let E=0;E<m.getTrimmedLength();E++)if(m.loadCell(E,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==F){if(E-S>1){let T=this._getJoinedRanges(b,g,D,m,S);for(let M=0;M<T.length;M++)y.push(T[M])}S=E,g=D,C=this._workCell.fg,F=this._workCell.bg}D+=this._workCell.getChars().length||i.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let E=this._getJoinedRanges(b,g,D,m,S);for(let T=0;T<E.length;T++)y.push(E[T])}return y}_getJoinedRanges(_,m,y,b,S){let D=_.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{let F=this._characterJoiners[C].handler(D);for(let E=0;E<F.length;E++)XA._mergeRanges(g,F[E])}catch(F){console.error(F)}return this._stringRangesToCellRanges(g,b,S),g}_stringRangesToCellRanges(_,m,y){let b=0,S=!1,D=0,g=_[b];if(g){for(let C=y;C<this._bufferService.cols;C++){let F=m.getWidth(C),E=m.getString(C).length||i.WHITESPACE_CELL_CHAR.length;if(F!==0){if(!S&&g[0]<=D&&(g[0]=C,S=!0),g[1]<=D){if(g[1]=C,g=_[++b],!g)break;g[0]<=D?(g[0]=C,S=!0):S=!1}D+=E}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(_,m){let y=!1;for(let b=0;b<_.length;b++){let S=_[b];if(y){if(m[1]<=S[0])return _[b-1][1]=m[1],_;if(m[1]<=S[1])return _[b-1][1]=Math.max(m[1],S[1]),_.splice(b,1),_;_.splice(b,1),b--}else{if(m[1]<=S[0])return _.splice(b,0,m),_;if(m[1]<=S[1])return S[0]=Math.min(m[0],S[0]),_;m[0]<S[1]&&(S[0]=Math.min(m[0],S[0]),y=!0)}}return y?_[_.length-1][1]=m[1]:_.push(m),_}};u.CharacterJoinerService=r=p([s(0,f.IBufferService)],r)},5114:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CoreBrowserService=void 0,u.CoreBrowserService=class{constructor(a,p){this._textarea=a,this.window=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,u,a){var p=this&&this.__decorate||function(f,l,r,d){var _,m=arguments.length,y=m<3?l:d===null?d=Object.getOwnPropertyDescriptor(l,r):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,l,r,d);else for(var b=f.length-1;b>=0;b--)(_=f[b])&&(y=(m<3?_(y):m>3?_(l,r,y):_(l,r))||y);return m>3&&y&&Object.defineProperty(l,r,y),y},s=this&&this.__param||function(f,l){return function(r,d){l(r,d,f)}};Object.defineProperty(u,"__esModule",{value:!0}),u.MouseService=void 0;let o=a(4725),i=a(9806),c=u.MouseService=class{constructor(f,l){this._renderService=f,this._charSizeService=l}getCoords(f,l,r,d,_){return(0,i.getCoords)(window,f,l,r,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(f,l){let r=(0,i.getCoordsRelativeToElement)(window,f,l);if(this._charSizeService.hasValidSize)return r[0]=Math.min(Math.max(r[0],0),this._renderService.dimensions.css.canvas.width-1),r[1]=Math.min(Math.max(r[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(r[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(r[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(r[0]),y:Math.floor(r[1])}}};u.MouseService=c=p([s(0,o.IRenderService),s(1,o.ICharSizeService)],c)},3230:function(v,u,a){var p=this&&this.__decorate||function(y,b,S,D){var g,C=arguments.length,F=C<3?b:D===null?D=Object.getOwnPropertyDescriptor(b,S):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")F=Reflect.decorate(y,b,S,D);else for(var E=y.length-1;E>=0;E--)(g=y[E])&&(F=(C<3?g(F):C>3?g(b,S,F):g(b,S))||F);return C>3&&F&&Object.defineProperty(b,S,F),F},s=this&&this.__param||function(y,b){return function(S,D){b(S,D,y)}};Object.defineProperty(u,"__esModule",{value:!0}),u.RenderService=void 0;let o=a(3656),i=a(6193),c=a(5596),f=a(4725),l=a(8460),r=a(844),d=a(7226),_=a(2585),m=u.RenderService=class extends r.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,b,S,D,g,C,F,E){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new r.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new l.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new l.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new l.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new l.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new i.RenderDebouncer(F.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new c.ScreenDprMonitor(F.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register((0,o.addDisposableDomListener)(F.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(E.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in F.window){let T=new F.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(b),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,b,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,b,this._rowCount))}_renderRows(y,b){this._renderer.value&&(y=Math.min(y,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(y,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:b}),this._onRender.fire({start:y,end:b}),this._isNextRenderRedrawOnly=!0)}resize(y,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(b=>this.refreshRows(b.start,b.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,b;this._renderer.value&&((b=(y=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,b)):this._renderer.value.handleResize(y,b),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,b,S){var D;this._selectionState.start=y,this._selectionState.end=b,this._selectionState.columnSelectMode=S,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,b,S)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};u.RenderService=m=p([s(2,_.IOptionsService),s(3,f.ICharSizeService),s(4,_.IDecorationService),s(5,_.IBufferService),s(6,f.ICoreBrowserService),s(7,f.IThemeService)],m)},9312:function(v,u,a){var p=this&&this.__decorate||function(g,C,F,E){var T,M=arguments.length,w=M<3?C:E===null?E=Object.getOwnPropertyDescriptor(C,F):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,C,F,E);else for(var L=g.length-1;L>=0;L--)(T=g[L])&&(w=(M<3?T(w):M>3?T(C,F,w):T(C,F))||w);return M>3&&w&&Object.defineProperty(C,F,w),w},s=this&&this.__param||function(g,C){return function(F,E){C(F,E,g)}};Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionService=void 0;let o=a(9806),i=a(9504),c=a(456),f=a(4725),l=a(8460),r=a(844),d=a(6114),_=a(4841),m=a(511),y=a(2585),b=String.fromCharCode(160),S=new RegExp(b,"g"),D=u.SelectionService=class extends r.Disposable{constructor(g,C,F,E,T,M,w,L,A){super(),this._element=g,this._screenElement=C,this._linkifier=F,this._bufferService=E,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=L,this._coreBrowserService=A,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new l.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new l.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new l.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new l.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new c.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!g||!C||g[0]===C[0]&&g[1]===C[1])}get selectionText(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!g||!C)return"";let F=this._bufferService.buffer,E=[];if(this._activeSelectionMode===3){if(g[0]===C[0])return"";let T=g[0]<C[0]?g[0]:C[0],M=g[0]<C[0]?C[0]:g[0];for(let w=g[1];w<=C[1];w++){let L=F.translateBufferLineToString(w,!0,T,M);E.push(L)}}else{let T=g[1]===C[1]?C[0]:void 0;E.push(F.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=C[1]-1;M++){let w=F.lines.get(M),L=F.translateBufferLineToString(M,!0);w?.isWrapped?E[E.length-1]+=L:E.push(L)}if(g[1]!==C[1]){let M=F.lines.get(C[1]),w=F.translateBufferLineToString(C[1],!0,0,C[0]);M&&M.isWrapped?E[E.length-1]+=w:E.push(w)}}return E.map(T=>T.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let C=this._getMouseBufferCoords(g),F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!!(F&&E&&C)&&this._areCoordsInSelection(C,F,E)}isCellInSelection(g,C){let F=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!F||!E)&&this._areCoordsInSelection([g,C],F,E)}_areCoordsInSelection(g,C,F){return g[1]>C[1]&&g[1]<F[1]||C[1]===F[1]&&g[1]===C[1]&&g[0]>=C[0]&&g[0]<F[0]||C[1]<F[1]&&g[1]===F[1]&&g[0]<F[0]||C[1]<F[1]&&g[1]===C[1]&&g[0]>=C[0]}_selectWordAtCursor(g,C){var F,E;let T=(E=(F=this._linkifier.currentLink)===null||F===void 0?void 0:F.link)===null||E===void 0?void 0:E.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,C){this._model.clearSelection(),g=Math.max(g,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let C=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(g){let C=(0,o.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],F=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=F?0:(C>F&&(C-=F),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(g){return d.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let C=this._getMouseBufferCoords(g);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(g){return g.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let F=this._bufferService.buffer;if(this._model.selectionEnd[1]<F.lines.length){let E=F.lines.get(this._model.selectionEnd[1]);E&&E.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let C=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let F=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(F&&F[0]!==void 0&&F[1]!==void 0){let E=(0,i.moveToCellSequence)(F[0]-1,F[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(E,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,F=!(!g||!C||g[0]===C[0]&&g[1]===C[1]);F?g&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,C,F)):this._oldHasSelection&&this._fireOnSelectionChange(g,C,F)}_fireOnSelectionChange(g,C,F){this._oldSelectionStart=g,this._oldSelectionEnd=C,this._oldHasSelection=F,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(g,C){let F=C;for(let E=0;C>=E;E++){let T=g.loadCell(E,this._workCell).getChars().length;this._workCell.getWidth()===0?F--:T>1&&C!==E&&(F+=T-1)}return F}setSelection(g,C,F){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,C],this._model.selectionStartLength=F,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,C,F=!0,E=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),L=this._convertViewportColToCharacterIndex(M,g[0]),A=L,R=g[0]-L,x=0,I=0,$=0,k=0;if(w.charAt(L)===" "){for(;L>0&&w.charAt(L-1)===" ";)L--;for(;A<w.length&&w.charAt(A+1)===" ";)A++}else{let q=g[0],N=g[0];M.getWidth(q)===0&&(x++,q--),M.getWidth(N)===2&&(I++,N++);let K=M.getString(N).length;for(K>1&&(k+=K-1,A+=K-1);q>0&&L>0&&!this._isCharWordSeparator(M.loadCell(q-1,this._workCell));){M.loadCell(q-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(x++,q--):O>1&&($+=O-1,L-=O-1),L--,q--}for(;N<M.length&&A+1<w.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(k+=O-1,A+=O-1),A++,N++}}A++;let H=L+R-x+$,U=Math.min(this._bufferService.cols,A-L+x+I-$-k);if(C||w.slice(L,A).trim()!==""){if(F&&H===0&&M.getCodePoint(0)!==32){let q=T.lines.get(g[1]-1);if(q&&M.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let K=this._bufferService.cols-N.start;H-=K,U+=K}}}if(E&&H+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let q=T.lines.get(g[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(U+=N.length)}}return{start:H,length:U}}}_selectWordAt(g,C){let F=this._getWordAt(g,C);if(F){for(;F.start<0;)F.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[F.start,g[1]],this._model.selectionStartLength=F.length}}_selectToWordAt(g){let C=this._getWordAt(g,!0);if(C){let F=g[1];for(;C.start<0;)C.start+=this._bufferService.cols,F--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,F++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,F]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let C=this._bufferService.buffer.getWrappedRangeForLine(g),F={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(F,this._bufferService.cols)}};u.SelectionService=D=p([s(3,y.IBufferService),s(4,y.ICoreService),s(5,f.IMouseService),s(6,y.IOptionsService),s(7,f.IRenderService),s(8,f.ICoreBrowserService)],D)},4725:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.IThemeService=u.ICharacterJoinerService=u.ISelectionService=u.IRenderService=u.IMouseService=u.ICoreBrowserService=u.ICharSizeService=void 0;let p=a(8343);u.ICharSizeService=(0,p.createDecorator)("CharSizeService"),u.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),u.IMouseService=(0,p.createDecorator)("MouseService"),u.IRenderService=(0,p.createDecorator)("RenderService"),u.ISelectionService=(0,p.createDecorator)("SelectionService"),u.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),u.IThemeService=(0,p.createDecorator)("ThemeService")},6731:function(v,u,a){var p=this&&this.__decorate||function(D,g,C,F){var E,T=arguments.length,M=T<3?g:F===null?F=Object.getOwnPropertyDescriptor(g,C):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,C,F);else for(var w=D.length-1;w>=0;w--)(E=D[w])&&(M=(T<3?E(M):T>3?E(g,C,M):E(g,C))||M);return T>3&&M&&Object.defineProperty(g,C,M),M},s=this&&this.__param||function(D,g){return function(C,F){g(C,F,D)}};Object.defineProperty(u,"__esModule",{value:!0}),u.ThemeService=u.DEFAULT_ANSI_COLORS=void 0;let o=a(7239),i=a(8055),c=a(8460),f=a(844),l=a(2585),r=i.css.toColor("#ffffff"),d=i.css.toColor("#000000"),_=i.css.toColor("#ffffff"),m=i.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};u.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[i.css.toColor("#2e3436"),i.css.toColor("#cc0000"),i.css.toColor("#4e9a06"),i.css.toColor("#c4a000"),i.css.toColor("#3465a4"),i.css.toColor("#75507b"),i.css.toColor("#06989a"),i.css.toColor("#d3d7cf"),i.css.toColor("#555753"),i.css.toColor("#ef2929"),i.css.toColor("#8ae234"),i.css.toColor("#fce94f"),i.css.toColor("#729fcf"),i.css.toColor("#ad7fa8"),i.css.toColor("#34e2e2"),i.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let C=0;C<216;C++){let F=g[C/36%6|0],E=g[C/6%6|0],T=g[C%6];D.push({css:i.channels.toCss(F,E,T),rgba:i.channels.toRgba(F,E,T)})}for(let C=0;C<24;C++){let F=8+10*C;D.push({css:i.channels.toCss(F,F,F),rgba:i.channels.toRgba(F,F,F)})}return D})());let b=u.ThemeService=class extends f.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new o.ColorContrastCache,this._halfContrastCache=new o.ColorContrastCache,this._onChangeColors=this.register(new c.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:r,background:d,cursor:_,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:i.color.blend(d,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:i.color.blend(d,y),ansi:u.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=S(D.foreground,r),g.background=S(D.background,d),g.cursor=S(D.cursor,_),g.cursorAccent=S(D.cursorAccent,m),g.selectionBackgroundTransparent=S(D.selectionBackground,y),g.selectionBackgroundOpaque=i.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=S(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=i.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?S(D.selectionForeground,i.NULL_COLOR):void 0,g.selectionForeground===i.NULL_COLOR&&(g.selectionForeground=void 0),i.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=i.color.opacity(g.selectionBackgroundTransparent,.3)),i.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=i.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=u.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=S(D.black,u.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=S(D.red,u.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=S(D.green,u.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=S(D.yellow,u.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=S(D.blue,u.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=S(D.magenta,u.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=S(D.cyan,u.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=S(D.white,u.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=S(D.brightBlack,u.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=S(D.brightRed,u.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=S(D.brightGreen,u.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=S(D.brightYellow,u.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=S(D.brightBlue,u.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=S(D.brightMagenta,u.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=S(D.brightCyan,u.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=S(D.brightWhite,u.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let C=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let F=0;F<C;F++)g.ansi[F+16]=S(D.extendedAnsi[F],u.DEFAULT_ANSI_COLORS[F+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(D,g){if(D!==void 0)try{return i.css.toColor(D)}catch{}return g}u.ThemeService=b=p([s(0,l.IOptionsService)],b)},6349:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CircularList=void 0;let p=a(8460),s=a(844);class o extends s.Disposable{constructor(c){super(),this._maxLength=c,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(c){if(this._maxLength===c)return;let f=new Array(c);for(let l=0;l<Math.min(c,this.length);l++)f[l]=this._array[this._getCyclicIndex(l)];this._array=f,this._maxLength=c,this._startIndex=0}get length(){return this._length}set length(c){if(c>this._length)for(let f=this._length;f<c;f++)this._array[f]=void 0;this._length=c}get(c){return this._array[this._getCyclicIndex(c)]}set(c,f){this._array[this._getCyclicIndex(c)]=f}push(c){this._array[this._getCyclicIndex(this._length)]=c,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(c,f,...l){if(f){for(let r=c;r<this._length-f;r++)this._array[this._getCyclicIndex(r)]=this._array[this._getCyclicIndex(r+f)];this._length-=f,this.onDeleteEmitter.fire({index:c,amount:f})}for(let r=this._length-1;r>=c;r--)this._array[this._getCyclicIndex(r+l.length)]=this._array[this._getCyclicIndex(r)];for(let r=0;r<l.length;r++)this._array[this._getCyclicIndex(c+r)]=l[r];if(l.length&&this.onInsertEmitter.fire({index:c,amount:l.length}),this._length+l.length>this._maxLength){let r=this._length+l.length-this._maxLength;this._startIndex+=r,this._length=this._maxLength,this.onTrimEmitter.fire(r)}else this._length+=l.length}trimStart(c){c>this._length&&(c=this._length),this._startIndex+=c,this._length-=c,this.onTrimEmitter.fire(c)}shiftElements(c,f,l){if(!(f<=0)){if(c<0||c>=this._length)throw new Error("start argument out of range");if(c+l<0)throw new Error("Cannot shift elements in list beyond index 0");if(l>0){for(let d=f-1;d>=0;d--)this.set(c+d+l,this.get(c+d));let r=c+f+l-this._length;if(r>0)for(this._length+=r;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let r=0;r<f;r++)this.set(c+r+l,this.get(c+r))}}_getCyclicIndex(c){return(this._startIndex+c)%this._maxLength}}u.CircularList=o},1439:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.clone=void 0,u.clone=function a(p,s=5){if(typeof p!="object")return p;let o=Array.isArray(p)?[]:{};for(let i in p)o[i]=s<=1?p[i]:p[i]&&a(p[i],s-1);return o}},8055:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.contrastRatio=u.toPaddedHex=u.rgba=u.rgb=u.css=u.color=u.channels=u.NULL_COLOR=void 0;let p=a(6114),s=0,o=0,i=0,c=0;var f,l,r,d,_;function m(b){let S=b.toString(16);return S.length<2?"0"+S:S}function y(b,S){return b<S?(S+.05)/(b+.05):(b+.05)/(S+.05)}u.NULL_COLOR={css:"#00000000",rgba:0},function(b){b.toCss=function(S,D,g,C){return C!==void 0?`#${m(S)}${m(D)}${m(g)}${m(C)}`:`#${m(S)}${m(D)}${m(g)}`},b.toRgba=function(S,D,g,C=255){return(S<<24|D<<16|g<<8|C)>>>0}}(f||(u.channels=f={})),function(b){function S(D,g){return c=Math.round(255*g),[s,o,i]=_.toChannels(D.rgba),{css:f.toCss(s,o,i,c),rgba:f.toRgba(s,o,i,c)}}b.blend=function(D,g){if(c=(255&g.rgba)/255,c===1)return{css:g.css,rgba:g.rgba};let C=g.rgba>>24&255,F=g.rgba>>16&255,E=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return s=T+Math.round((C-T)*c),o=M+Math.round((F-M)*c),i=w+Math.round((E-w)*c),{css:f.toCss(s,o,i),rgba:f.toRgba(s,o,i)}},b.isOpaque=function(D){return(255&D.rgba)==255},b.ensureContrastRatio=function(D,g,C){let F=_.ensureContrastRatio(D.rgba,g.rgba,C);if(F)return _.toColor(F>>24&255,F>>16&255,F>>8&255)},b.opaque=function(D){let g=(255|D.rgba)>>>0;return[s,o,i]=_.toChannels(g),{css:f.toCss(s,o,i),rgba:g}},b.opacity=S,b.multiplyOpacity=function(D,g){return c=255&D.rgba,S(D,c*g/255)},b.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(l||(u.color=l={})),function(b){let S,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let C=g.getContext("2d",{willReadFrequently:!0});C&&(S=C,S.globalCompositeOperation="copy",D=S.createLinearGradient(0,0,1,1))}b.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return s=parseInt(g.slice(1,2).repeat(2),16),o=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),_.toColor(s,o,i);case 5:return s=parseInt(g.slice(1,2).repeat(2),16),o=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),c=parseInt(g.slice(4,5).repeat(2),16),_.toColor(s,o,i,c);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let C=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return s=parseInt(C[1]),o=parseInt(C[2]),i=parseInt(C[3]),c=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),_.toColor(s,o,i,c);if(!S||!D)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=D,S.fillStyle=g,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[s,o,i,c]=S.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(s,o,i,c),css:g}}}(r||(u.css=r={})),function(b){function S(D,g,C){let F=D/255,E=g/255,T=C/255;return .2126*(F<=.03928?F/12.92:Math.pow((F+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}b.relativeLuminance=function(D){return S(D>>16&255,D>>8&255,255&D)},b.relativeLuminance2=S}(d||(u.rgb=d={})),function(b){function S(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w>0||L>0||A>0);)w-=Math.max(0,Math.ceil(.1*w)),L-=Math.max(0,Math.ceil(.1*L)),A-=Math.max(0,Math.ceil(.1*A)),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}function D(g,C,F){let E=g>>24&255,T=g>>16&255,M=g>>8&255,w=C>>24&255,L=C>>16&255,A=C>>8&255,R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));for(;R<F&&(w<255||L<255||A<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),L=Math.min(255,L+Math.ceil(.1*(255-L))),A=Math.min(255,A+Math.ceil(.1*(255-A))),R=y(d.relativeLuminance2(w,L,A),d.relativeLuminance2(E,T,M));return(w<<24|L<<16|A<<8|255)>>>0}b.ensureContrastRatio=function(g,C,F){let E=d.relativeLuminance(g>>8),T=d.relativeLuminance(C>>8);if(y(E,T)<F){if(T<E){let L=S(g,C,F),A=y(E,d.relativeLuminance(L>>8));if(A<F){let R=D(g,C,F);return A>y(E,d.relativeLuminance(R>>8))?L:R}return L}let M=D(g,C,F),w=y(E,d.relativeLuminance(M>>8));if(w<F){let L=S(g,C,F);return w>y(E,d.relativeLuminance(L>>8))?M:L}return M}},b.reduceLuminance=S,b.increaseLuminance=D,b.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},b.toColor=function(g,C,F,E){return{css:f.toCss(g,C,F,E),rgba:f.toRgba(g,C,F,E)}}}(_||(u.rgba=_={})),u.toPaddedHex=m,u.contrastRatio=y},8969:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CoreTerminal=void 0;let p=a(844),s=a(2585),o=a(4348),i=a(7866),c=a(744),f=a(7302),l=a(6975),r=a(8460),d=a(1753),_=a(1480),m=a(7994),y=a(9282),b=a(5435),S=a(5981),D=a(2660),g=!1;class C extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new r.EventEmitter),this._onScroll.event(E=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(E.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(E){for(let T in E)this.optionsService.options[T]=E[T]}constructor(E){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new r.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new r.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new r.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new r.EventEmitter),this._instantiationService=new o.InstantiationService,this.optionsService=this.register(new f.OptionsService(E)),this._instantiationService.setService(s.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(c.BufferService)),this._instantiationService.setService(s.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(i.LogService)),this._instantiationService.setService(s.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(l.CoreService)),this._instantiationService.setService(s.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(s.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(s.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(s.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(s.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,r.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,r.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,r.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,r.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,r.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(E,T){this._writeBuffer.write(E,T)}writeSync(E,T){this._logService.logLevel<=s.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(E,T)}resize(E,T){isNaN(E)||isNaN(T)||(E=Math.max(E,c.MINIMUM_COLS),T=Math.max(T,c.MINIMUM_ROWS),this._bufferService.resize(E,T))}scroll(E,T=!1){this._bufferService.scroll(E,T)}scrollLines(E,T,M){this._bufferService.scrollLines(E,T,M)}scrollPages(E){this.scrollLines(E*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(E){let T=E-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(E,T){return this._inputHandler.registerEscHandler(E,T)}registerDcsHandler(E,T){return this._inputHandler.registerDcsHandler(E,T)}registerCsiHandler(E,T){return this._inputHandler.registerCsiHandler(E,T)}registerOscHandler(E,T){return this._inputHandler.registerOscHandler(E,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let E=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?E=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(E=!0),E?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let E=[];E.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),E.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)(()=>{for(let T of E)T.dispose()})}}}u.CoreTerminal=C},8460:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0,u.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let s=[];for(let o=0;o<this._listeners.length;o++)s.push(this._listeners[o]);for(let o=0;o<s.length;o++)s[o].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},u.forwardEvent=function(a,p){return a(s=>p.fire(s))}},5435:function(v,u,a){var p=this&&this.__decorate||function(R,x,I,$){var k,H=arguments.length,U=H<3?x:$===null?$=Object.getOwnPropertyDescriptor(x,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(R,x,I,$);else for(var q=R.length-1;q>=0;q--)(k=R[q])&&(U=(H<3?k(U):H>3?k(x,I,U):k(x,I))||U);return H>3&&U&&Object.defineProperty(x,I,U),U},s=this&&this.__param||function(R,x){return function(I,$){x(I,$,R)}};Object.defineProperty(u,"__esModule",{value:!0}),u.InputHandler=u.WindowsOptionsReportType=void 0;let o=a(2584),i=a(7116),c=a(2015),f=a(844),l=a(482),r=a(8437),d=a(8460),_=a(643),m=a(511),y=a(3734),b=a(2585),S=a(6242),D=a(6351),g=a(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},F=131072;function E(R,x){if(R>24)return x.setWinLines||!1;switch(R){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(u.WindowsOptionsReportType=T={}));let M=0;class w extends f.Disposable{getAttrData(){return this._curAttrData}constructor(x,I,$,k,H,U,q,N,K=new c.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=I,this._coreService=$,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=N,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new l.StringToUtf32,this._utf8Decoder=new l.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new L(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:W})}),this._parser.setDcsHandlerFallback((O,B,W)=>{B==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:W})}),this._parser.setPrintHandler((O,B,W)=>this.print(O,B,W)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(o.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(o.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(o.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(o.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(o.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(o.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(o.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(o.C1.IND,()=>this.index()),this._parser.setExecuteHandler(o.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(o.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new S.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new S.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new S.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new S.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new S.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new S.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new S.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new S.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new S.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new S.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new S.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in i.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(x,I,$,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=k}_logSlowResolvingAsync(x){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([x,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,I){let $,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>F&&(U=this._parseStack.position+F)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,N=>String.fromCharCode(N)).join("")}"`),typeof x=="string"?x.split("").map(N=>N.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<F&&(this._parseBuffer=new Uint32Array(Math.min(x.length,F))),q||this._dirtyRowTracker.clearRange(),x.length>F)for(let N=U;N<x.length;N+=F){let K=N+F<x.length?N+F:x.length,O=typeof x=="string"?this._stringDecoder.decode(x.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(x.subarray(N,K),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(k,H,O,N),this._logSlowResolvingAsync($),$}else if(!q){let N=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(k,H,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,I,$){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let P=I;P<$;++P){if(k=x[P],H=this._unicodeService.wcwidth(k),k<127&&U){let Q=U[String.fromCharCode(k)];Q&&(k=Q.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,l.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=N){if(K){for(;this._activeBuffer.x<N;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,H===2)continue}if(O&&(W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(B),B),W.getWidth(N-1)===2&&W.setCellFromCodePoint(N-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,k,H,B.fg,B.bg,B.extended),H>0)for(;--H;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,k):W.addCodepointToCell(this._activeBuffer.x-2,k)}$-I>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,I){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,I):this._parser.registerCsiHandler(x,$=>!E($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(x,I){return this._parser.registerDcsHandler(x,new D.DcsHandler(I))}registerEscHandler(x,I){return this._parser.registerEscHandler(x,I)}registerOscHandler(x,I){return this._parser.registerOscHandler(x,new S.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=x,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+I)}cursorUp(x){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){let I=x.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=x.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=x.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){let I=x.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,I,$,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);U.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(x,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),$.isWrapped=!1)}eraseInDisplay(x,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(x,I=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let I=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;I--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let I=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let I=x.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let I=x.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(r.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=x.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;let I=x.params[0]||1,$=new Uint32Array(I);for(let k=0;k<I;++k)$[k]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(o.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(o.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(o.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(o.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(o.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,i.DEFAULT_CHARSET),this._charsetService.setgCharset(1,i.DEFAULT_CHARSET),this._charsetService.setgCharset(2,i.DEFAULT_CHARSET),this._charsetService.setgCharset(3,i.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let I=0;I<x.length;I++)switch(x.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,I){let $=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:N}=this._bufferService,{active:K,alt:O}=q,B=this._optionsService.rawOptions,W=ve=>ve?1:2,P=x.params[0];return Q=P,G=I?P===2?4:P===4?W(U.modes.insertMode):P===12?3:P===20?W(B.convertEol):0:P===1?W($.applicationCursorKeys):P===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:P===6?W($.origin):P===7?W($.wraparound):P===8?3:P===9?W(k==="X10"):P===12?W(B.cursorBlink):P===25?W(!U.isCursorHidden):P===45?W($.reverseWraparound):P===66?W($.applicationKeypad):P===67?4:P===1e3?W(k==="VT200"):P===1002?W(k==="DRAG"):P===1003?W(k==="ANY"):P===1004?W($.sendFocus):P===1005?4:P===1006?W(H==="SGR"):P===1015?4:P===1016?W(H==="SGR_PIXELS"):P===1048?1:P===47||P===1047||P===1049?W(K===O):P===2004?W($.bracketedPasteMode):0,U.triggerDataEvent(`${o.C0.ESC}[${I?"":"?"}${Q};${G}$y`),!0;var Q,G}_updateAttrColor(x,I,$,k,H){return I===2?(x|=50331648,x&=-16777216,x|=y.AttributeData.fromColorRGB([$,k,H])):I===5&&(x&=-50331904,x|=33554432|255&$),x}_extractColor(x,I,$){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=x.params[I+U],x.hasSubParams(I+U)){let q=x.getSubParams(I+U),N=0;do k[1]===5&&(H=1),k[U+N+1+H]=q[N];while(++N<q.length&&N+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+I<x.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:$.fg=this._updateAttrColor($.fg,k[1],k[3],k[4],k[5]);break;case 48:$.bg=this._updateAttrColor($.bg,k[1],k[3],k[4],k[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(x,I){I.extended=I.extended.clone(),(!~x||x>5)&&(x=1),I.extended.underlineStyle=x,I.fg|=268435456,x===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(x){x.fg=r.DEFAULT_ATTR_DATA.fg,x.bg=r.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=x.length,$,k=this._curAttrData;for(let H=0;H<I;H++)$=x.params[H],$>=30&&$<=37?(k.fg&=-50331904,k.fg|=16777216|$-30):$>=40&&$<=47?(k.bg&=-50331904,k.bg|=16777216|$-40):$>=90&&$<=97?(k.fg&=-50331904,k.fg|=16777224|$-90):$>=100&&$<=107?(k.bg&=-50331904,k.bg|=16777224|$-100):$===0?this._processSGR0(k):$===1?k.fg|=134217728:$===3?k.bg|=67108864:$===4?(k.fg|=268435456,this._processUnderline(x.hasSubParams(H)?x.getSubParams(H)[0]:1,k)):$===5?k.fg|=536870912:$===7?k.fg|=67108864:$===8?k.fg|=1073741824:$===9?k.fg|=2147483648:$===2?k.bg|=134217728:$===21?this._processUnderline(2,k):$===22?(k.fg&=-134217729,k.bg&=-134217729):$===23?k.bg&=-67108865:$===24?(k.fg&=-268435457,this._processUnderline(0,k)):$===25?k.fg&=-536870913:$===27?k.fg&=-67108865:$===28?k.fg&=-1073741825:$===29?k.fg&=2147483647:$===39?(k.fg&=-67108864,k.fg|=16777215&r.DEFAULT_ATTR_DATA.fg):$===49?(k.bg&=-67108864,k.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?H+=this._extractColor(x,H,k):$===53?k.bg|=1073741824:$===55?k.bg&=-1073741825:$===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):$===100?(k.fg&=-67108864,k.fg|=16777215&r.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&r.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${o.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${o.C0.ESC}[?${I};${$}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){let I=x.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(x){let I=x.params[0]||1,$;return(x.length<2||($=x.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(x){if(!E(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${o.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){let I=[],$=x.split(";");for(;$.length>1;){let k=$.shift(),H=$.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(A(U))if(H==="?")I.push({type:0,index:U});else{let q=(0,g.parseColor)(H);q&&I.push({type:1,index:U,color:q})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(x){let I=x.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(x,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=x.split(":"),k,H=$.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=$[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,I){let $=x.split(";");for(let k=0;k<$.length&&!(I>=this._specialColors.length);++k,++I)if($[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let H=(0,g.parseColor)($[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[I],color:H}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;let I=[],$=x.split(";");for(let k=0;k<$.length;++k)if(/^\d+$/.exec($[k])){let H=parseInt($[k]);A(H)&&I.push({type:2,index:H})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,i.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(C[x[0]],i.CHARSETS[x[1]]||i.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=r.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=r.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){let x=new m.CellData;x.content=4194304|"E".charCodeAt(0),x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,k=this._activeBuffer.lines.get($);k&&(k.fill(x),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,I){let $=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${o.C0.ESC}${H}${o.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,I){this._dirtyRowTracker.markRangeDirty(x,I)}}u.InputHandler=w;let L=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,x){R>x&&(M=R,R=x,x=M),R<this.start&&(this.start=R),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function A(R){return 0<=R&&R<256}L=p([s(0,b.IBufferService)],L)},844:(v,u)=>{function a(p){for(let s of p)s.dispose();p.length=0}Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.toDisposable=u.MutableDisposable=u.Disposable=void 0,u.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let s=this._disposables.indexOf(p);s!==-1&&this._disposables.splice(s,1)}},u.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var s;this._isDisposed||p===this._value||((s=this._value)===null||s===void 0||s.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},u.toDisposable=function(p){return{dispose:p}},u.disposeArray=a,u.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},1505:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FourKeyMap=u.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(s,o,i){this._data[s]||(this._data[s]={}),this._data[s][o]=i}get(s,o){return this._data[s]?this._data[s][o]:void 0}clear(){this._data={}}}u.TwoKeyMap=a,u.FourKeyMap=class{constructor(){this._data=new a}set(p,s,o,i,c){this._data.get(p,s)||this._data.set(p,s,new a),this._data.get(p,s).set(o,i,c)}get(p,s,o,i){var c;return(c=this._data.get(p,s))===null||c===void 0?void 0:c.get(o,i)}clear(){this._data.clear()}}},6114:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isChromeOS=u.isLinux=u.isWindows=u.isIphone=u.isIpad=u.isMac=u.getSafariVersion=u.isSafari=u.isLegacyEdge=u.isFirefox=u.isNode=void 0,u.isNode=typeof navigator>"u";let a=u.isNode?"node":navigator.userAgent,p=u.isNode?"node":navigator.platform;u.isFirefox=a.includes("Firefox"),u.isLegacyEdge=a.includes("Edge"),u.isSafari=/^((?!chrome|android).)*safari/i.test(a),u.getSafariVersion=function(){if(!u.isSafari)return 0;let s=a.match(/Version\/(\d+)/);return s===null||s.length<2?0:parseInt(s[1])},u.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),u.isIpad=p==="iPad",u.isIphone=p==="iPhone",u.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),u.isLinux=p.indexOf("Linux")>=0,u.isChromeOS=/\bCrOS\b/.test(a)},6106:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SortedList=void 0;let a=0;u.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(a=this._search(this._getKey(p)),this._array.splice(a,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;let s=this._getKey(p);if(s===void 0||(a=this._search(s),a===-1)||this._getKey(this._array[a])!==s)return!1;do if(this._array[a]===p)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===s);return!1}*getKeyIterator(p){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===p)}forEachByKey(p,s){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do s(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===p)}values(){return[...this._array].values()}_search(p){let s=0,o=this._array.length-1;for(;o>=s;){let i=s+o>>1,c=this._getKey(this._array[i]);if(c>p)o=i-1;else{if(!(c<p)){for(;i>0&&this._getKey(this._array[i-1])===p;)i--;return i}s=i+1}}return s}}},7226:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DebouncedIdleTask=u.IdleTaskQueue=u.PriorityTaskQueue=void 0;let p=a(6114);class s{constructor(){this._tasks=[],this._i=0}enqueue(c){this._tasks.push(c),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(c){this._idleCallback=void 0;let f=0,l=0,r=c.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),l=Math.max(f,l),d=c.timeRemaining(),1.5*l>d)return r-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(r-f))}ms`),void this._start();r=d}this.clear()}}class o extends s{_requestCallback(c){return setTimeout(()=>c(this._createDeadline(16)))}_cancelCallback(c){clearTimeout(c)}_createDeadline(c){let f=Date.now()+c;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}u.PriorityTaskQueue=o,u.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends s{_requestCallback(i){return requestIdleCallback(i)}_cancelCallback(i){cancelIdleCallback(i)}}:o,u.DebouncedIdleTask=class{constructor(){this._queue=new u.IdleTaskQueue}set(i){this._queue.clear(),this._queue.enqueue(i)}flush(){this._queue.flush()}}},9282:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.updateWindowsModeWrappedState=void 0;let p=a(643);u.updateWindowsModeWrappedState=function(s){let o=s.buffer.lines.get(s.buffer.ybase+s.buffer.y-1),i=o?.get(s.cols-1),c=s.buffer.lines.get(s.buffer.ybase+s.buffer.y);c&&i&&(c.isWrapped=i[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&i[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ExtendedAttrs=u.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(o){return[o>>>16&255,o>>>8&255,255&o]}static fromColorRGB(o){return(255&o[0])<<16|(255&o[1])<<8|255&o[2]}clone(){let o=new a;return o.fg=this.fg,o.bg=this.bg,o.extended=this.extended.clone(),o}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}u.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(o){this._ext=o}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(o){this._ext&=-469762049,this._ext|=o<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(o){this._ext&=-67108864,this._ext|=67108863&o}get urlId(){return this._urlId}set urlId(o){this._urlId=o}constructor(o=0,i=0){this._ext=0,this._urlId=0,this._ext=o,this._urlId=i}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}u.ExtendedAttrs=p},9092:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Buffer=u.MAX_BUFFER_SIZE=void 0;let p=a(6349),s=a(7226),o=a(3734),i=a(8437),c=a(4634),f=a(511),l=a(643),r=a(4863),d=a(7116);u.MAX_BUFFER_SIZE=4294967295,u.Buffer=class{constructor(_,m,y){this._hasScrollback=_,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=i.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]),this._whitespaceCell=f.CellData.fromCharData([0,l.WHITESPACE_CELL_CHAR,l.WHITESPACE_CELL_WIDTH,l.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new s.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new o.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new o.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,m){return new i.BufferLine(this._bufferService.cols,this.getNullCell(_),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;let m=_+this._optionsService.rawOptions.scrollback;return m>u.MAX_BUFFER_SIZE?u.MAX_BUFFER_SIZE:m}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=i.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,m){let y=this.getNullCell(i.DEFAULT_ATTR_DATA),b=0,S=this._getCorrectBufferLength(m);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<_)for(let g=0;g<this.lines.length;g++)b+=+this.lines.get(g).resize(_,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new i.BufferLine(_,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new i.BufferLine(_,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let g=this.lines.length-S;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=S}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(_,m),this._cols>_))for(let D=0;D<this.lines.length;D++)b+=+this.lines.get(D).resize(_,y);this._cols=_,this._rows=m,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return _}get _isReflowEnabled(){let _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,m){this._cols!==_&&(_>this._cols?this._reflowLarger(_,m):this._reflowSmaller(_,m))}_reflowLarger(_,m){let y=(0,c.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(i.DEFAULT_ATTR_DATA));if(y.length>0){let b=(0,c.reflowLargerCreateNewLayout)(this.lines,y);(0,c.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(_,m,b.countRemoved)}}_reflowLargerAdjustViewport(_,m,y){let b=this.getNullCell(i.DEFAULT_ATTR_DATA),S=y;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new i.BufferLine(_,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(_,m){let y=this.getNullCell(i.DEFAULT_ATTR_DATA),b=[],S=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=_)continue;let C=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),C.unshift(g);let F=this.ybase+this.y;if(F>=D&&F<D+C.length)continue;let E=C[C.length-1].getTrimmedLength(),T=(0,c.reflowSmallerGetNewLineLengths)(C,this._cols,_),M=T.length-C.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let L=[];for(let k=0;k<M;k++){let H=this.getBlankLine(i.DEFAULT_ATTR_DATA,!0);L.push(H)}L.length>0&&(b.push({start:D+C.length+S,newLines:L}),S+=L.length),C.push(...L);let A=T.length-1,R=T[A];R===0&&(A--,R=T[A]);let x=C.length-M-1,I=E;for(;x>=0;){let k=Math.min(I,R);if(C[A]===void 0)break;if(C[A].copyCellsFrom(C[x],I-k,R-k,k,!0),R-=k,R===0&&(A--,R=T[A]),I-=k,I===0){x--;let H=Math.max(x,0);I=(0,c.getWrappedLineTrimmedLength)(C,H,this._cols)}}for(let k=0;k<C.length;k++)T[k]<_&&C[k].setCell(T[k],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(b.length>0){let D=[],g=[];for(let A=0;A<this.lines.length;A++)g.push(this.lines.get(A));let C=this.lines.length,F=C-1,E=0,T=b[E];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let M=0;for(let A=Math.min(this.lines.maxLength-1,C+S-1);A>=0;A--)if(T&&T.start>F+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(A--,T.newLines[R]);A++,D.push({index:F+1,amount:T.newLines.length}),M+=T.newLines.length,T=b[++E]}else this.lines.set(A,g[F--]);let w=0;for(let A=D.length-1;A>=0;A--)D[A].index+=w,this.lines.onInsertEmitter.fire(D[A]),w+=D[A].amount;let L=Math.max(0,C+S-this.lines.maxLength);L>0&&this.lines.onTrimEmitter.fire(L)}}translateBufferLineToString(_,m,y=0,b){let S=this.lines.get(_);return S?S.translateToString(m,y,b):""}getWrappedRangeForLine(_){let m=_,y=_;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===_&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){let m=new r.Marker(_);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BufferLine=u.DEFAULT_ATTR_DATA=void 0;let p=a(3734),s=a(511),o=a(643),i=a(482);u.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let c=0;class f{constructor(r,d,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*r);let m=d||s.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let y=0;y<r;++y)this.setCell(y,m);this.length=r}get(r){let d=this._data[3*r+0],_=2097151&d;return[this._data[3*r+1],2097152&d?this._combined[r]:_?(0,i.stringFromCodePoint)(_):"",d>>22,2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):_]}set(r,d){this._data[3*r+1]=d[o.CHAR_DATA_ATTR_INDEX],d[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[r]=d[1],this._data[3*r+0]=2097152|r|d[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*r+0]=d[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(r){return this._data[3*r+0]>>22}hasWidth(r){return 12582912&this._data[3*r+0]}getFg(r){return this._data[3*r+1]}getBg(r){return this._data[3*r+2]}hasContent(r){return 4194303&this._data[3*r+0]}getCodePoint(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r].charCodeAt(this._combined[r].length-1):2097151&d}isCombined(r){return 2097152&this._data[3*r+0]}getString(r){let d=this._data[3*r+0];return 2097152&d?this._combined[r]:2097151&d?(0,i.stringFromCodePoint)(2097151&d):""}isProtected(r){return 536870912&this._data[3*r+2]}loadCell(r,d){return c=3*r,d.content=this._data[c+0],d.fg=this._data[c+1],d.bg=this._data[c+2],2097152&d.content&&(d.combinedData=this._combined[r]),268435456&d.bg&&(d.extended=this._extendedAttrs[r]),d}setCell(r,d){2097152&d.content&&(this._combined[r]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[r]=d.extended),this._data[3*r+0]=d.content,this._data[3*r+1]=d.fg,this._data[3*r+2]=d.bg}setCellFromCodePoint(r,d,_,m,y,b){268435456&y&&(this._extendedAttrs[r]=b),this._data[3*r+0]=d|_<<22,this._data[3*r+1]=m,this._data[3*r+2]=y}addCodepointToCell(r,d){let _=this._data[3*r+0];2097152&_?this._combined[r]+=(0,i.stringFromCodePoint)(d):(2097151&_?(this._combined[r]=(0,i.stringFromCodePoint)(2097151&_)+(0,i.stringFromCodePoint)(d),_&=-2097152,_|=2097152):_=d|4194304,this._data[3*r+0]=_)}insertCells(r,d,_,m){if((r%=this.length)&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length-r){let y=new s.CellData;for(let b=this.length-r-d-1;b>=0;--b)this.setCell(r+d+b,this.loadCell(r+b,y));for(let b=0;b<d;++b)this.setCell(r+b,_)}else for(let y=r;y<this.length;++y)this.setCell(y,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}deleteCells(r,d,_,m){if(r%=this.length,d<this.length-r){let y=new s.CellData;for(let b=0;b<this.length-r-d;++b)this.setCell(r+b,this.loadCell(r+d+b,y));for(let b=this.length-d;b<this.length;++b)this.setCell(b,_)}else for(let y=r;y<this.length;++y)this.setCell(y,_);r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),this.getWidth(r)!==0||this.hasContent(r)||this.setCellFromCodePoint(r,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}replaceCells(r,d,_,m,y=!1){if(y)for(r&&this.getWidth(r-1)===2&&!this.isProtected(r-1)&&this.setCellFromCodePoint(r-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);r<d&&r<this.length;)this.isProtected(r)||this.setCell(r,_),r++;else for(r&&this.getWidth(r-1)===2&&this.setCellFromCodePoint(r-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);r<d&&r<this.length;)this.setCell(r++,_)}resize(r,d){if(r===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*r;if(r>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let m=new Uint32Array(_);m.set(this._data),this._data=m}for(let m=this.length;m<r;++m)this.setCell(m,d)}else{this._data=this._data.subarray(0,_);let m=Object.keys(this._combined);for(let b=0;b<m.length;b++){let S=parseInt(m[b],10);S>=r&&delete this._combined[S]}let y=Object.keys(this._extendedAttrs);for(let b=0;b<y.length;b++){let S=parseInt(y[b],10);S>=r&&delete this._extendedAttrs[S]}}return this.length=r,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let r=new Uint32Array(this._data.length);return r.set(this._data),this._data=r,1}return 0}fill(r,d=!1){if(d)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,r);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,r)}}copyFrom(r){this.length!==r.length?this._data=new Uint32Array(r._data):this._data.set(r._data),this.length=r.length,this._combined={};for(let d in r._combined)this._combined[d]=r._combined[d];this._extendedAttrs={};for(let d in r._extendedAttrs)this._extendedAttrs[d]=r._extendedAttrs[d];this.isWrapped=r.isWrapped}clone(){let r=new f(0);r._data=new Uint32Array(this._data),r.length=this.length;for(let d in this._combined)r._combined[d]=this._combined[d];for(let d in this._extendedAttrs)r._extendedAttrs[d]=this._extendedAttrs[d];return r.isWrapped=this.isWrapped,r}getTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0])return r+(this._data[3*r+0]>>22);return 0}getNoBgTrimmedLength(){for(let r=this.length-1;r>=0;--r)if(4194303&this._data[3*r+0]||50331648&this._data[3*r+2])return r+(this._data[3*r+0]>>22);return 0}copyCellsFrom(r,d,_,m,y){let b=r._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=b[3*(d+D)+g];268435456&b[3*(d+D)+2]&&(this._extendedAttrs[_+D]=r._extendedAttrs[d+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=b[3*(d+D)+g];268435456&b[3*(d+D)+2]&&(this._extendedAttrs[_+D]=r._extendedAttrs[d+D])}let S=Object.keys(r._combined);for(let D=0;D<S.length;D++){let g=parseInt(S[D],10);g>=d&&(this._combined[g-d+_]=r._combined[g])}}translateToString(r=!1,d=0,_=this.length){r&&(_=Math.min(_,this.getTrimmedLength()));let m="";for(;d<_;){let y=this._data[3*d+0],b=2097151&y;m+=2097152&y?this._combined[d]:b?(0,i.stringFromCodePoint)(b):o.WHITESPACE_CELL_CHAR,d+=y>>22||1}return m}}u.BufferLine=f},4841:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getRangeLength=void 0,u.getRangeLength=function(a,p){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return p*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(v,u)=>{function a(p,s,o){if(s===p.length-1)return p[s].getTrimmedLength();let i=!p[s].hasContent(o-1)&&p[s].getWidth(o-1)===1,c=p[s+1].getWidth(0)===2;return i&&c?o-1:o}Object.defineProperty(u,"__esModule",{value:!0}),u.getWrappedLineTrimmedLength=u.reflowSmallerGetNewLineLengths=u.reflowLargerApplyNewLayout=u.reflowLargerCreateNewLayout=u.reflowLargerGetLinesToRemove=void 0,u.reflowLargerGetLinesToRemove=function(p,s,o,i,c){let f=[];for(let l=0;l<p.length-1;l++){let r=l,d=p.get(++r);if(!d.isWrapped)continue;let _=[p.get(l)];for(;r<p.length&&d.isWrapped;)_.push(d),d=p.get(++r);if(i>=l&&i<r){l+=_.length-1;continue}let m=0,y=a(_,m,s),b=1,S=0;for(;b<_.length;){let g=a(_,b,s),C=g-S,F=o-y,E=Math.min(C,F);_[m].copyCellsFrom(_[b],S,y,E,!1),y+=E,y===o&&(m++,y=0),S+=E,S===g&&(b++,S=0),y===0&&m!==0&&_[m-1].getWidth(o-1)===2&&(_[m].copyCellsFrom(_[m-1],o-1,y++,1,!1),_[m-1].setCell(o-1,c))}_[m].replaceCells(y,o,c);let D=0;for(let g=_.length-1;g>0&&(g>m||_[g].getTrimmedLength()===0);g--)D++;D>0&&(f.push(l+_.length-D),f.push(D)),l+=_.length-1}return f},u.reflowLargerCreateNewLayout=function(p,s){let o=[],i=0,c=s[i],f=0;for(let l=0;l<p.length;l++)if(c===l){let r=s[++i];p.onDeleteEmitter.fire({index:l-f,amount:r}),l+=r-1,f+=r,c=s[++i]}else o.push(l);return{layout:o,countRemoved:f}},u.reflowLargerApplyNewLayout=function(p,s){let o=[];for(let i=0;i<s.length;i++)o.push(p.get(s[i]));for(let i=0;i<o.length;i++)p.set(i,o[i]);p.length=s.length},u.reflowSmallerGetNewLineLengths=function(p,s,o){let i=[],c=p.map((d,_)=>a(p,_,s)).reduce((d,_)=>d+_),f=0,l=0,r=0;for(;r<c;){if(c-r<o){i.push(c-r);break}f+=o;let d=a(p,l,s);f>d&&(f-=d,l++);let _=p[l].getWidth(f-1)===2;_&&f--;let m=_?o-1:o;i.push(m),r+=m}return i},u.getWrappedLineTrimmedLength=a},5295:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BufferSet=void 0;let p=a(8460),s=a(844),o=a(9092);class i extends s.Disposable{constructor(f,l){super(),this._optionsService=f,this._bufferService=l,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new o.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new o.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(f){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(f),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(f,l){this._normal.resize(f,l),this._alt.resize(f,l),this.setupTabStops(f)}setupTabStops(f){this._normal.setupTabStops(f),this._alt.setupTabStops(f)}}u.BufferSet=i},511:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CellData=void 0;let p=a(482),s=a(643),o=a(3734);class i extends o.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new o.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let l=new i;return l.setFromCharData(f),l}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[s.CHAR_DATA_ATTR_INDEX],this.bg=0;let l=!1;if(f[s.CHAR_DATA_CHAR_INDEX].length>2)l=!0;else if(f[s.CHAR_DATA_CHAR_INDEX].length===2){let r=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=r&&r<=56319){let d=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(r-55296)+d-56320+65536|f[s.CHAR_DATA_WIDTH_INDEX]<<22:l=!0}else l=!0}else this.content=f[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[s.CHAR_DATA_WIDTH_INDEX]<<22;l&&(this.combinedData=f[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[s.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}u.CellData=i},643:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WHITESPACE_CELL_CODE=u.WHITESPACE_CELL_WIDTH=u.WHITESPACE_CELL_CHAR=u.NULL_CELL_CODE=u.NULL_CELL_WIDTH=u.NULL_CELL_CHAR=u.CHAR_DATA_CODE_INDEX=u.CHAR_DATA_WIDTH_INDEX=u.CHAR_DATA_CHAR_INDEX=u.CHAR_DATA_ATTR_INDEX=u.DEFAULT_EXT=u.DEFAULT_ATTR=u.DEFAULT_COLOR=void 0,u.DEFAULT_COLOR=0,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.DEFAULT_EXT=0,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},4863:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Marker=void 0;let p=a(8460),s=a(844);class o{get id(){return this._id}constructor(c){this.line=c,this.isDisposed=!1,this._disposables=[],this._id=o._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,s.disposeArray)(this._disposables),this._disposables.length=0)}register(c){return this._disposables.push(c),c}}u.Marker=o,o._nextId=1},7116:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DEFAULT_CHARSET=u.CHARSETS=void 0,u.CHARSETS={},u.DEFAULT_CHARSET=u.CHARSETS.B,u.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},u.CHARSETS.A={"#":"\xA3"},u.CHARSETS.B=void 0,u.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},u.CHARSETS.C=u.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},u.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},u.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},u.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},u.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},u.CHARSETS.E=u.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},u.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},u.CHARSETS.H=u.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},u.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,u)=>{var a,p,s;Object.defineProperty(u,"__esModule",{value:!0}),u.C1_ESCAPED=u.C1=u.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL="\x7F"}(a||(u.C0=a={})),function(o){o.PAD="\x80",o.HOP="\x81",o.BPH="\x82",o.NBH="\x83",o.IND="\x84",o.NEL="\x85",o.SSA="\x86",o.ESA="\x87",o.HTS="\x88",o.HTJ="\x89",o.VTS="\x8A",o.PLD="\x8B",o.PLU="\x8C",o.RI="\x8D",o.SS2="\x8E",o.SS3="\x8F",o.DCS="\x90",o.PU1="\x91",o.PU2="\x92",o.STS="\x93",o.CCH="\x94",o.MW="\x95",o.SPA="\x96",o.EPA="\x97",o.SOS="\x98",o.SGCI="\x99",o.SCI="\x9A",o.CSI="\x9B",o.ST="\x9C",o.OSC="\x9D",o.PM="\x9E",o.APC="\x9F"}(p||(u.C1=p={})),function(o){o.ST=`${a.ESC}\\`}(s||(u.C1_ESCAPED=s={}))},7399:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.evaluateKeyboardEvent=void 0;let p=a(2584),s={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};u.evaluateKeyboardEvent=function(o,i,c,f){let l={type:0,cancel:!1,key:void 0},r=(o.shiftKey?1:0)|(o.altKey?2:0)|(o.ctrlKey?4:0)|(o.metaKey?8:0);switch(o.keyCode){case 0:o.key==="UIKeyInputUpArrow"?l.key=i?p.C0.ESC+"OA":p.C0.ESC+"[A":o.key==="UIKeyInputLeftArrow"?l.key=i?p.C0.ESC+"OD":p.C0.ESC+"[D":o.key==="UIKeyInputRightArrow"?l.key=i?p.C0.ESC+"OC":p.C0.ESC+"[C":o.key==="UIKeyInputDownArrow"&&(l.key=i?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(o.altKey){l.key=p.C0.ESC+p.C0.DEL;break}l.key=p.C0.DEL;break;case 9:if(o.shiftKey){l.key=p.C0.ESC+"[Z";break}l.key=p.C0.HT,l.cancel=!0;break;case 13:l.key=o.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,l.cancel=!0;break;case 27:l.key=p.C0.ESC,o.altKey&&(l.key=p.C0.ESC+p.C0.ESC),l.cancel=!0;break;case 37:if(o.metaKey)break;r?(l.key=p.C0.ESC+"[1;"+(r+1)+"D",l.key===p.C0.ESC+"[1;3D"&&(l.key=p.C0.ESC+(c?"b":"[1;5D"))):l.key=i?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(o.metaKey)break;r?(l.key=p.C0.ESC+"[1;"+(r+1)+"C",l.key===p.C0.ESC+"[1;3C"&&(l.key=p.C0.ESC+(c?"f":"[1;5C"))):l.key=i?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(o.metaKey)break;r?(l.key=p.C0.ESC+"[1;"+(r+1)+"A",c||l.key!==p.C0.ESC+"[1;3A"||(l.key=p.C0.ESC+"[1;5A")):l.key=i?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(o.metaKey)break;r?(l.key=p.C0.ESC+"[1;"+(r+1)+"B",c||l.key!==p.C0.ESC+"[1;3B"||(l.key=p.C0.ESC+"[1;5B")):l.key=i?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:o.shiftKey||o.ctrlKey||(l.key=p.C0.ESC+"[2~");break;case 46:l.key=r?p.C0.ESC+"[3;"+(r+1)+"~":p.C0.ESC+"[3~";break;case 36:l.key=r?p.C0.ESC+"[1;"+(r+1)+"H":i?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:l.key=r?p.C0.ESC+"[1;"+(r+1)+"F":i?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:o.shiftKey?l.type=2:o.ctrlKey?l.key=p.C0.ESC+"[5;"+(r+1)+"~":l.key=p.C0.ESC+"[5~";break;case 34:o.shiftKey?l.type=3:o.ctrlKey?l.key=p.C0.ESC+"[6;"+(r+1)+"~":l.key=p.C0.ESC+"[6~";break;case 112:l.key=r?p.C0.ESC+"[1;"+(r+1)+"P":p.C0.ESC+"OP";break;case 113:l.key=r?p.C0.ESC+"[1;"+(r+1)+"Q":p.C0.ESC+"OQ";break;case 114:l.key=r?p.C0.ESC+"[1;"+(r+1)+"R":p.C0.ESC+"OR";break;case 115:l.key=r?p.C0.ESC+"[1;"+(r+1)+"S":p.C0.ESC+"OS";break;case 116:l.key=r?p.C0.ESC+"[15;"+(r+1)+"~":p.C0.ESC+"[15~";break;case 117:l.key=r?p.C0.ESC+"[17;"+(r+1)+"~":p.C0.ESC+"[17~";break;case 118:l.key=r?p.C0.ESC+"[18;"+(r+1)+"~":p.C0.ESC+"[18~";break;case 119:l.key=r?p.C0.ESC+"[19;"+(r+1)+"~":p.C0.ESC+"[19~";break;case 120:l.key=r?p.C0.ESC+"[20;"+(r+1)+"~":p.C0.ESC+"[20~";break;case 121:l.key=r?p.C0.ESC+"[21;"+(r+1)+"~":p.C0.ESC+"[21~";break;case 122:l.key=r?p.C0.ESC+"[23;"+(r+1)+"~":p.C0.ESC+"[23~";break;case 123:l.key=r?p.C0.ESC+"[24;"+(r+1)+"~":p.C0.ESC+"[24~";break;default:if(!o.ctrlKey||o.shiftKey||o.altKey||o.metaKey)if(c&&!f||!o.altKey||o.metaKey)!c||o.altKey||o.ctrlKey||o.shiftKey||!o.metaKey?o.key&&!o.ctrlKey&&!o.altKey&&!o.metaKey&&o.keyCode>=48&&o.key.length===1?l.key=o.key:o.key&&o.ctrlKey&&(o.key==="_"&&(l.key=p.C0.US),o.key==="@"&&(l.key=p.C0.NUL)):o.keyCode===65&&(l.type=1);else{let d=s[o.keyCode],_=d?.[o.shiftKey?1:0];if(_)l.key=p.C0.ESC+_;else if(o.keyCode>=65&&o.keyCode<=90){let m=o.ctrlKey?o.keyCode-64:o.keyCode+32,y=String.fromCharCode(m);o.shiftKey&&(y=y.toUpperCase()),l.key=p.C0.ESC+y}else if(o.keyCode===32)l.key=p.C0.ESC+(o.ctrlKey?p.C0.NUL:" ");else if(o.key==="Dead"&&o.code.startsWith("Key")){let m=o.code.slice(3,4);o.shiftKey||(m=m.toLowerCase()),l.key=p.C0.ESC+m,l.cancel=!0}}else o.keyCode>=65&&o.keyCode<=90?l.key=String.fromCharCode(o.keyCode-64):o.keyCode===32?l.key=p.C0.NUL:o.keyCode>=51&&o.keyCode<=55?l.key=String.fromCharCode(o.keyCode-51+27):o.keyCode===56?l.key=p.C0.DEL:o.keyCode===219?l.key=p.C0.ESC:o.keyCode===220?l.key=p.C0.FS:o.keyCode===221&&(l.key=p.C0.GS)}return l}},482:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Utf8ToUtf32=u.StringToUtf32=u.utf32ToString=u.stringFromCodePoint=void 0,u.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},u.utf32ToString=function(a,p=0,s=a.length){let o="";for(let i=p;i<s;++i){let c=a[i];c>65535?(c-=65536,o+=String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):o+=String.fromCharCode(c)}return o},u.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let s=a.length;if(!s)return 0;let o=0,i=0;if(this._interim){let c=a.charCodeAt(i++);56320<=c&&c<=57343?p[o++]=1024*(this._interim-55296)+c-56320+65536:(p[o++]=this._interim,p[o++]=c),this._interim=0}for(let c=i;c<s;++c){let f=a.charCodeAt(c);if(55296<=f&&f<=56319){if(++c>=s)return this._interim=f,o;let l=a.charCodeAt(c);56320<=l&&l<=57343?p[o++]=1024*(f-55296)+l-56320+65536:(p[o++]=f,p[o++]=l)}else f!==65279&&(p[o++]=f)}return o}},u.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let s=a.length;if(!s)return 0;let o,i,c,f,l=0,r=0,d=0;if(this.interim[0]){let y=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,D=0;for(;(S=63&this.interim[++D])&&D<4;)b<<=6,b|=S;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=g-D;for(;d<C;){if(d>=s)return 0;if(S=a[d++],(192&S)!=128){d--,y=!0;break}this.interim[D++]=S,b<<=6,b|=63&S}y||(g===2?b<128?d--:p[l++]=b:g===3?b<2048||b>=55296&&b<=57343||b===65279||(p[l++]=b):b<65536||b>1114111||(p[l++]=b)),this.interim.fill(0)}let _=s-4,m=d;for(;m<s;){for(;!(!(m<_)||128&(o=a[m])||128&(i=a[m+1])||128&(c=a[m+2])||128&(f=a[m+3]));)p[l++]=o,p[l++]=i,p[l++]=c,p[l++]=f,m+=4;if(o=a[m++],o<128)p[l++]=o;else if((224&o)==192){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(r=(31&o)<<6|63&i,r<128){m--;continue}p[l++]=r}else if((240&o)==224){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,l;if(c=a[m++],(192&c)!=128){m--;continue}if(r=(15&o)<<12|(63&i)<<6|63&c,r<2048||r>=55296&&r<=57343||r===65279)continue;p[l++]=r}else if((248&o)==240){if(m>=s)return this.interim[0]=o,l;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,l;if(c=a[m++],(192&c)!=128){m--;continue}if(m>=s)return this.interim[0]=o,this.interim[1]=i,this.interim[2]=c,l;if(f=a[m++],(192&f)!=128){m--;continue}if(r=(7&o)<<18|(63&i)<<12|(63&c)<<6|63&f,r<65536||r>1114111)continue;p[l++]=r}}return l}}},225:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],p=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],s;u.UnicodeV6=class{constructor(){if(this.version="6",!s){s=new Uint8Array(65536),s.fill(1),s[0]=0,s.fill(0,1,32),s.fill(0,127,160),s.fill(2,4352,4448),s[9001]=2,s[9002]=2,s.fill(2,11904,42192),s[12351]=1,s.fill(2,44032,55204),s.fill(2,63744,64256),s.fill(2,65040,65050),s.fill(2,65072,65136),s.fill(2,65280,65377),s.fill(2,65504,65511);for(let o=0;o<a.length;++o)s.fill(0,a[o][0],a[o][1]+1)}}wcwidth(o){return o<32?0:o<127?1:o<65536?s[o]:function(i,c){let f,l=0,r=c.length-1;if(i<c[0][0]||i>c[r][1])return!1;for(;r>=l;)if(f=l+r>>1,i>c[f][1])l=f+1;else{if(!(i<c[f][0]))return!0;r=f-1}return!1}(o,p)?0:o>=131072&&o<=196605||o>=196608&&o<=262141?2:1}}},5981:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.WriteBuffer=void 0;let p=a(8460),s=a(844);class o extends s.Disposable{constructor(c){super(),this._action=c,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(c,f){if(f!==void 0&&this._syncCalls>f)return void(this._syncCalls=0);if(this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let l;for(this._isSyncWriting=!0;l=this._writeBuffer.shift();){this._action(l);let r=this._callbacks.shift();r&&r()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(c,f){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=c.length,this._writeBuffer.push(c),this._callbacks.push(f)}_innerWrite(c=0,f=!0){let l=c||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let r=this._writeBuffer[this._bufferOffset],d=this._action(r,f);if(d){let m=y=>Date.now()-l>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(l,y);return void d.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=r.length,Date.now()-l>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}u.WriteBuffer=o},5941:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.toRgbString=u.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function s(o,i){let c=o.toString(16),f=c.length<2?"0"+c:c;switch(i){case 4:return c[0];case 8:return f;case 12:return(f+f).slice(0,3);default:return f+f}}u.parseColor=function(o){if(!o)return;let i=o.toLowerCase();if(i.indexOf("rgb:")===0){i=i.slice(4);let c=a.exec(i);if(c){let f=c[1]?15:c[4]?255:c[7]?4095:65535;return[Math.round(parseInt(c[1]||c[4]||c[7]||c[10],16)/f*255),Math.round(parseInt(c[2]||c[5]||c[8]||c[11],16)/f*255),Math.round(parseInt(c[3]||c[6]||c[9]||c[12],16)/f*255)]}}else if(i.indexOf("#")===0&&(i=i.slice(1),p.exec(i)&&[3,6,9,12].includes(i.length))){let c=i.length/3,f=[0,0,0];for(let l=0;l<3;++l){let r=parseInt(i.slice(c*l,c*l+c),16);f[l]=c===1?r<<4:c===2?r:c===3?r>>4:r>>8}return f}},u.toRgbString=function(o,i=16){let[c,f,l]=o;return`rgb:${s(c,i)}/${s(f,i)}/${s(l,i)}`}},5770:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PAYLOAD_LIMIT=void 0,u.PAYLOAD_LIMIT=1e7},6351:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DcsHandler=u.DcsParser=void 0;let p=a(482),s=a(8742),o=a(5770),i=[];u.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=i,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}registerHandler(f,l){this._handlers[f]===void 0&&(this._handlers[f]=[]);let r=this._handlers[f];return r.push(l),{dispose:()=>{let d=r.indexOf(l);d!==-1&&r.splice(d,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}reset(){if(this._active.length)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].unhook(!1);this._stack.paused=!1,this._active=i,this._ident=0}hook(f,l){if(this.reset(),this._ident=f,this._active=this._handlers[f]||i,this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].hook(l);else this._handlerFb(this._ident,"HOOK",l)}put(f,l,r){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(f,l,r);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(f,l,r))}unhook(f,l=!0){if(this._active.length){let r=!1,d=this._active.length-1,_=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,r=l,_=this._stack.fallThrough,this._stack.paused=!1),!_&&r===!1){for(;d>=0&&(r=this._active[d].unhook(f),r!==!0);d--)if(r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,r;d--}for(;d>=0;d--)if(r=this._active[d].unhook(!1),r instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,r}else this._handlerFb(this._ident,"UNHOOK",f);this._active=i,this._ident=0}};let c=new s.Params;c.addParam(0),u.DcsHandler=class{constructor(f){this._handler=f,this._data="",this._params=c,this._hitLimit=!1}hook(f){this._params=f.length>1||f.params[0]?f.clone():c,this._data="",this._hitLimit=!1}put(f,l,r){this._hitLimit||(this._data+=(0,p.utf32ToString)(f,l,r),this._data.length>o.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(f){let l=!1;if(this._hitLimit)l=!1;else if(f&&(l=this._handler(this._data,this._params),l instanceof Promise))return l.then(r=>(this._params=c,this._data="",this._hitLimit=!1,r));return this._params=c,this._data="",this._hitLimit=!1,l}}},2015:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.EscapeSequenceParser=u.VT500_TRANSITION_TABLE=u.TransitionTable=void 0;let p=a(844),s=a(8742),o=a(6242),i=a(6351);class c{constructor(d){this.table=new Uint8Array(d)}setDefault(d,_){this.table.fill(d<<4|_)}add(d,_,m,y){this.table[_<<8|d]=m<<4|y}addMany(d,_,m,y){for(let b=0;b<d.length;b++)this.table[_<<8|d[b]]=m<<4|y}}u.TransitionTable=c;let f=160;u.VT500_TRANSITION_TABLE=function(){let r=new c(4095),d=Array.apply(null,Array(256)).map((D,g)=>g),_=(D,g)=>d.slice(D,g),m=_(32,127),y=_(0,24);y.push(25),y.push.apply(y,_(28,32));let b=_(0,14),S;for(S in r.setDefault(1,0),r.addMany(m,0,2,0),b)r.addMany([24,26,153,154],S,3,0),r.addMany(_(128,144),S,3,0),r.addMany(_(144,152),S,3,0),r.add(156,S,0,0),r.add(27,S,11,1),r.add(157,S,4,8),r.addMany([152,158,159],S,0,7),r.add(155,S,11,3),r.add(144,S,11,9);return r.addMany(y,0,3,0),r.addMany(y,1,3,1),r.add(127,1,0,1),r.addMany(y,8,0,8),r.addMany(y,3,3,3),r.add(127,3,0,3),r.addMany(y,4,3,4),r.add(127,4,0,4),r.addMany(y,6,3,6),r.addMany(y,5,3,5),r.add(127,5,0,5),r.addMany(y,2,3,2),r.add(127,2,0,2),r.add(93,1,4,8),r.addMany(m,8,5,8),r.add(127,8,5,8),r.addMany([156,27,24,26,7],8,6,0),r.addMany(_(28,32),8,0,8),r.addMany([88,94,95],1,0,7),r.addMany(m,7,0,7),r.addMany(y,7,0,7),r.add(156,7,0,0),r.add(127,7,0,7),r.add(91,1,11,3),r.addMany(_(64,127),3,7,0),r.addMany(_(48,60),3,8,4),r.addMany([60,61,62,63],3,9,4),r.addMany(_(48,60),4,8,4),r.addMany(_(64,127),4,7,0),r.addMany([60,61,62,63],4,0,6),r.addMany(_(32,64),6,0,6),r.add(127,6,0,6),r.addMany(_(64,127),6,0,0),r.addMany(_(32,48),3,9,5),r.addMany(_(32,48),5,9,5),r.addMany(_(48,64),5,0,6),r.addMany(_(64,127),5,7,0),r.addMany(_(32,48),4,9,5),r.addMany(_(32,48),1,9,2),r.addMany(_(32,48),2,9,2),r.addMany(_(48,127),2,10,0),r.addMany(_(48,80),1,10,0),r.addMany(_(81,88),1,10,0),r.addMany([89,90,92],1,10,0),r.addMany(_(96,127),1,10,0),r.add(80,1,11,9),r.addMany(y,9,0,9),r.add(127,9,0,9),r.addMany(_(28,32),9,0,9),r.addMany(_(32,48),9,9,12),r.addMany(_(48,60),9,8,10),r.addMany([60,61,62,63],9,9,10),r.addMany(y,11,0,11),r.addMany(_(32,128),11,0,11),r.addMany(_(28,32),11,0,11),r.addMany(y,10,0,10),r.add(127,10,0,10),r.addMany(_(28,32),10,0,10),r.addMany(_(48,60),10,8,10),r.addMany([60,61,62,63],10,0,11),r.addMany(_(32,48),10,9,12),r.addMany(y,12,0,12),r.add(127,12,0,12),r.addMany(_(28,32),12,0,12),r.addMany(_(32,48),12,9,12),r.addMany(_(48,64),12,0,11),r.addMany(_(64,127),12,12,13),r.addMany(_(64,127),10,12,13),r.addMany(_(64,127),9,12,13),r.addMany(y,13,13,13),r.addMany(m,13,13,13),r.add(127,13,0,13),r.addMany([27,156,24,26],13,14,0),r.add(f,0,2,0),r.add(f,8,5,8),r.add(f,6,0,6),r.add(f,11,0,11),r.add(f,13,13,13),r}();class l extends p.Disposable{constructor(d=u.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new s.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,m,y)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,m)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new o.OscParser),this._dcsParser=this.register(new i.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,_=[64,126]){let m=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=d.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<d.intermediates.length;++b){let S=d.intermediates.charCodeAt(b);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let y=d.final.charCodeAt(0);if(_[0]>y||y>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return m<<=8,m|=y,m}identToString(d){let _=[];for(;d;)_.push(String.fromCharCode(255&d)),d>>=8;return _.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,_){let m=this._identifier(d,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(_),{dispose:()=>{let b=y.indexOf(_);b!==-1&&y.splice(b,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,_){this._executeHandlers[d.charCodeAt(0)]=_}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,_){let m=this._identifier(d);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(_),{dispose:()=>{let b=y.indexOf(_);b!==-1&&y.splice(b,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,_){return this._dcsParser.registerHandler(this._identifier(d),_)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,_){return this._oscParser.registerHandler(d,_)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,_,m,y,b){this._parseStack.state=d,this._parseStack.handlers=_,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=b}parse(d,_,m){let y,b=0,S=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&C>-1){for(;C>=0&&(y=g[C](this._params),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&C>-1){for(;C>=0&&(y=g[C](),y!==!0);C--)if(y instanceof Promise)return this._parseStack.handlerPos=C,y}this._parseStack.handlers=[];break;case 6:if(b=d[this._parseStack.chunkPos],y=this._dcsParser.unhook(b!==24&&b!==26,m),y)return y;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=d[this._parseStack.chunkPos],y=this._oscParser.end(b!==24&&b!==26,m),y)return y;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<_;++g){switch(b=d[g],S=this._transitions.table[this.currentState<<8|(b<160?b:f)],S>>4){case 2:for(let M=g+1;;++M){if(M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}if(++M>=_||(b=d[M])<32||b>126&&b<f){this._printHandler(d,g,M),g=M-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let C=this._csiHandlers[this._collect<<8|b],F=C?C.length-1:-1;for(;F>=0&&(y=C[F](this._params),y!==!0);F--)if(y instanceof Promise)return this._preserveStack(3,C,F,S,g),y;F<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++g<_&&(b=d[g])>47&&b<60);g--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:let E=this._escHandlers[this._collect<<8|b],T=E?E.length-1:-1;for(;T>=0&&(y=E[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,E,T,S,g),y;T<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let M=g+1;;++M)if(M>=_||(b=d[M])===24||b===26||b===27||b>127&&b<f){this._dcsParser.put(d,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(b!==24&&b!==26),y)return this._preserveStack(6,[],0,S,g),y;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=_||(b=d[M])<32||b>127&&b<f){this._oscParser.put(d,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(b!==24&&b!==26),y)return this._preserveStack(5,[],0,S,g),y;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}u.EscapeSequenceParser=l},6242:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OscHandler=u.OscParser=void 0;let p=a(5770),s=a(482),o=[];u.OscParser=class{constructor(){this._state=0,this._active=o,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(i,c){this._handlers[i]===void 0&&(this._handlers[i]=[]);let f=this._handlers[i];return f.push(c),{dispose:()=>{let l=f.indexOf(c);l!==-1&&f.splice(l,1)}}}clearHandler(i){this._handlers[i]&&delete this._handlers[i]}setHandlerFallback(i){this._handlerFb=i}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=o}reset(){if(this._state===2)for(let i=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;i>=0;--i)this._active[i].end(!1);this._stack.paused=!1,this._active=o,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||o,this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].start();else this._handlerFb(this._id,"START")}_put(i,c,f){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(i,c,f);else this._handlerFb(this._id,"PUT",(0,s.utf32ToString)(i,c,f))}start(){this.reset(),this._state=1}put(i,c,f){if(this._state!==3){if(this._state===1)for(;c<f;){let l=i[c++];if(l===59){this._state=2,this._start();break}if(l<48||57<l)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+l-48}this._state===2&&f-c>0&&this._put(i,c,f)}}end(i,c=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let f=!1,l=this._active.length-1,r=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,f=c,r=this._stack.fallThrough,this._stack.paused=!1),!r&&f===!1){for(;l>=0&&(f=this._active[l].end(i),f!==!0);l--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,f;l--}for(;l>=0;l--)if(f=this._active[l].end(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,f}else this._handlerFb(this._id,"END",i);this._active=o,this._id=-1,this._state=0}}},u.OscHandler=class{constructor(i){this._handler=i,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(i,c,f){this._hitLimit||(this._data+=(0,s.utf32ToString)(i,c,f),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(i){let c=!1;if(this._hitLimit)c=!1;else if(i&&(c=this._handler(this._data),c instanceof Promise))return c.then(f=>(this._data="",this._hitLimit=!1,f));return this._data="",this._hitLimit=!1,c}}},8742:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Params=void 0;let a=2147483647;class p{static fromArray(o){let i=new p;if(!o.length)return i;for(let c=Array.isArray(o[0])?1:0;c<o.length;++c){let f=o[c];if(Array.isArray(f))for(let l=0;l<f.length;++l)i.addSubParam(f[l]);else i.addParam(f)}return i}constructor(o=32,i=32){if(this.maxLength=o,this.maxSubParamsLength=i,i>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(o),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(o),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let o=new p(this.maxLength,this.maxSubParamsLength);return o.params.set(this.params),o.length=this.length,o._subParams.set(this._subParams),o._subParamsLength=this._subParamsLength,o._subParamsIdx.set(this._subParamsIdx),o._rejectDigits=this._rejectDigits,o._rejectSubDigits=this._rejectSubDigits,o._digitIsSub=this._digitIsSub,o}toArray(){let o=[];for(let i=0;i<this.length;++i){o.push(this.params[i]);let c=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];f-c>0&&o.push(Array.prototype.slice.call(this._subParams,c,f))}return o}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(o){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=o>a?a:o}}addSubParam(o){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(o<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=o>a?a:o,this._subParamsIdx[this.length-1]++}}hasSubParams(o){return(255&this._subParamsIdx[o])-(this._subParamsIdx[o]>>8)>0}getSubParams(o){let i=this._subParamsIdx[o]>>8,c=255&this._subParamsIdx[o];return c-i>0?this._subParams.subarray(i,c):null}getSubParamsAll(){let o={};for(let i=0;i<this.length;++i){let c=this._subParamsIdx[i]>>8,f=255&this._subParamsIdx[i];f-c>0&&(o[i]=this._subParams.slice(c,f))}return o}addDigit(o){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let c=this._digitIsSub?this._subParams:this.params,f=c[i-1];c[i-1]=~f?Math.min(10*f+o,a):o}}u.Params=p},5741:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AddonManager=void 0,u.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,p){let s={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(s),p.dispose=()=>this._wrappedAddonDispose(s),p.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let p=-1;for(let s=0;s<this._addons.length;s++)if(this._addons[s]===a){p=s;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(p,1)}}},8771:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BufferApiView=void 0;let p=a(3785),s=a(511);u.BufferApiView=class{constructor(o,i){this._buffer=o,this.type=i}init(o){return this._buffer=o,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(o){let i=this._buffer.lines.get(o);if(i)return new p.BufferLineApiView(i)}getNullCell(){return new s.CellData}}},3785:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BufferLineApiView=void 0;let p=a(511);u.BufferLineApiView=class{constructor(s){this._line=s}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(s,o){if(!(s<0||s>=this._line.length))return o?(this._line.loadCell(s,o),o):this._line.loadCell(s,new p.CellData)}translateToString(s,o,i){return this._line.translateToString(s,o,i)}}},8285:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BufferNamespaceApi=void 0;let p=a(8771),s=a(8460),o=a(844);class i extends o.Disposable{constructor(f){super(),this._core=f,this._onBufferChange=this.register(new s.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}u.BufferNamespaceApi=i},7975:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ParserApi=void 0,u.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,p){return this._core.registerCsiHandler(a,s=>p(s.toArray()))}addCsiHandler(a,p){return this.registerCsiHandler(a,p)}registerDcsHandler(a,p){return this._core.registerDcsHandler(a,(s,o)=>p(s,o.toArray()))}addDcsHandler(a,p){return this.registerDcsHandler(a,p)}registerEscHandler(a,p){return this._core.registerEscHandler(a,p)}addEscHandler(a,p){return this.registerEscHandler(a,p)}registerOscHandler(a,p){return this._core.registerOscHandler(a,p)}addOscHandler(a,p){return this.registerOscHandler(a,p)}}},7090:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeApi=void 0,u.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.BufferService=u.MINIMUM_ROWS=u.MINIMUM_COLS=void 0;let o=a(8460),i=a(844),c=a(5295),f=a(2585);u.MINIMUM_COLS=2,u.MINIMUM_ROWS=1;let l=u.BufferService=class extends i.Disposable{get buffer(){return this.buffers.active}constructor(r){super(),this.isUserScrolling=!1,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(r.rawOptions.cols||0,u.MINIMUM_COLS),this.rows=Math.max(r.rawOptions.rows||0,u.MINIMUM_ROWS),this.buffers=this.register(new c.BufferSet(r,this))}resize(r,d){this.cols=r,this.rows=d,this.buffers.resize(r,d),this._onResize.fire({cols:r,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(r,d=!1){let _=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===r.fg&&m.getBg(0)===r.bg||(m=_.getBlankLine(r,d),this._cachedBlankLine=m),m.isWrapped=d;let y=_.ybase+_.scrollTop,b=_.ybase+_.scrollBottom;if(_.scrollTop===0){let S=_.lines.isFull;b===_.lines.length-1?S?_.lines.recycle().copyFrom(m):_.lines.push(m.clone()):_.lines.splice(b+1,0,m.clone()),S?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let S=b-y+1;_.lines.shiftElements(y+1,S-1,-1),_.lines.set(b,m.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(r,d,_){let m=this.buffer;if(r<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else r+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+r,m.ybase),0),y!==m.ydisp&&(d||this._onScroll.fire(m.ydisp))}};u.BufferService=l=p([s(0,f.IOptionsService)],l)},7994:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CharsetService=void 0,u.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,p){this._charsets[a]=p,this.glevel===a&&(this.charset=p)}}},1753:function(v,u,a){var p=this&&this.__decorate||function(m,y,b,S){var D,g=arguments.length,C=g<3?y:S===null?S=Object.getOwnPropertyDescriptor(y,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(m,y,b,S);else for(var F=m.length-1;F>=0;F--)(D=m[F])&&(C=(g<3?D(C):g>3?D(y,b,C):D(y,b))||C);return g>3&&C&&Object.defineProperty(y,b,C),C},s=this&&this.__param||function(m,y){return function(b,S){y(b,S,m)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CoreMouseService=void 0;let o=a(2585),i=a(8460),c=a(844),f={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function l(m,y){let b=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(b|=64,b|=m.action):(b|=3&m.button,4&m.button&&(b|=64),8&m.button&&(b|=128),m.action===32?b|=32:m.action!==0||y||(b|=3)),b}let r=String.fromCharCode,d={DEFAULT:m=>{let y=[l(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${r(y[0])}${r(y[1])}${r(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${l(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${l(m,!0)};${m.x};${m.y}${y}`}},_=u.CoreMouseService=class extends c.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new i.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let b of Object.keys(f))this.addProtocol(b,f[b]);for(let b of Object.keys(d))this.addEncoding(b,d[b]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,b){if(b){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};u.CoreMouseService=_=p([s(0,o.IBufferService),s(1,o.ICoreService)],_)},6975:function(v,u,a){var p=this&&this.__decorate||function(_,m,y,b){var S,D=arguments.length,g=D<3?m:b===null?b=Object.getOwnPropertyDescriptor(m,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,m,y,b);else for(var C=_.length-1;C>=0;C--)(S=_[C])&&(g=(D<3?S(g):D>3?S(m,y,g):S(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},s=this&&this.__param||function(_,m){return function(y,b){m(y,b,_)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CoreService=void 0;let o=a(1439),i=a(8460),c=a(844),f=a(2585),l=Object.freeze({insertMode:!1}),r=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=u.CoreService=class extends c.Disposable{constructor(_,m,y){super(),this._bufferService=_,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new i.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new i.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new i.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new i.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,o.clone)(l),this.decPrivateModes=(0,o.clone)(r)}reset(){this.modes=(0,o.clone)(l),this.decPrivateModes=(0,o.clone)(r)}triggerDataEvent(_,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(b=>b.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(_))}};u.CoreService=d=p([s(0,f.IBufferService),s(1,f.ILogService),s(2,f.IOptionsService)],d)},9074:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.DecorationService=void 0;let p=a(8055),s=a(8460),o=a(844),i=a(6106),c=0,f=0;class l extends o.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new i.SortedList(_=>_?.marker.line),this._onDecorationRegistered=this.register(new s.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new s.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,o.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;let m=new r(_);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,m,y){var b,S,D;let g=0,C=0;for(let F of this._decorations.getKeyIterator(m))g=(b=F.options.x)!==null&&b!==void 0?b:0,C=g+((S=F.options.width)!==null&&S!==void 0?S:1),_>=g&&_<C&&(!y||((D=F.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield F)}forEachDecorationAtCell(_,m,y,b){this._decorations.forEachByKey(m,S=>{var D,g,C;c=(D=S.options.x)!==null&&D!==void 0?D:0,f=c+((g=S.options.width)!==null&&g!==void 0?g:1),_>=c&&_<f&&(!y||((C=S.options.layer)!==null&&C!==void 0?C:"bottom")===y)&&b(S)})}}u.DecorationService=l;class r extends o.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new s.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new s.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.InstantiationService=u.ServiceCollection=void 0;let p=a(2585),s=a(8343);class o{constructor(...c){this._entries=new Map;for(let[f,l]of c)this.set(f,l)}set(c,f){let l=this._entries.get(c);return this._entries.set(c,f),l}forEach(c){for(let[f,l]of this._entries.entries())c(f,l)}has(c){return this._entries.has(c)}get(c){return this._entries.get(c)}}u.ServiceCollection=o,u.InstantiationService=class{constructor(){this._services=new o,this._services.set(p.IInstantiationService,this)}setService(i,c){this._services.set(i,c)}getService(i){return this._services.get(i)}createInstance(i,...c){let f=(0,s.getServiceDependencies)(i).sort((d,_)=>d.index-_.index),l=[];for(let d of f){let _=this._services.get(d.id);if(!_)throw new Error(`[createInstance] ${i.name} depends on UNKNOWN service ${d.id}.`);l.push(_)}let r=f.length>0?f[0].index:c.length;if(c.length!==r)throw new Error(`[createInstance] First service dependency of ${i.name} at position ${r+1} conflicts with ${c.length} static arguments`);return new i(...c,...l)}}},7866:function(v,u,a){var p=this&&this.__decorate||function(r,d,_,m){var y,b=arguments.length,S=b<3?d:m===null?m=Object.getOwnPropertyDescriptor(d,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(r,d,_,m);else for(var D=r.length-1;D>=0;D--)(y=r[D])&&(S=(b<3?y(S):b>3?y(d,_,S):y(d,_))||S);return b>3&&S&&Object.defineProperty(d,_,S),S},s=this&&this.__param||function(r,d){return function(_,m){d(_,m,r)}};Object.defineProperty(u,"__esModule",{value:!0}),u.traceCall=u.setTraceLogger=u.LogService=void 0;let o=a(844),i=a(2585),c={trace:i.LogLevelEnum.TRACE,debug:i.LogLevelEnum.DEBUG,info:i.LogLevelEnum.INFO,warn:i.LogLevelEnum.WARN,error:i.LogLevelEnum.ERROR,off:i.LogLevelEnum.OFF},f,l=u.LogService=class extends o.Disposable{get logLevel(){return this._logLevel}constructor(r){super(),this._optionsService=r,this._logLevel=i.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),f=this}_updateLogLevel(){this._logLevel=c[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(r){for(let d=0;d<r.length;d++)typeof r[d]=="function"&&(r[d]=r[d]())}_log(r,d,_){this._evalLazyOptionalParams(_),r.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,..._)}trace(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,r,d)}debug(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,r,d)}info(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,r,d)}warn(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,r,d)}error(r,...d){var _,m;this._logLevel<=i.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,r,d)}};u.LogService=l=p([s(0,i.IOptionsService)],l),u.setTraceLogger=function(r){f=r},u.traceCall=function(r,d,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(f.logLevel!==i.LogLevelEnum.TRACE)return m.apply(this,y);f.trace(`GlyphRenderer#${m.name}(${y.map(S=>JSON.stringify(S)).join(", ")})`);let b=m.apply(this,y);return f.trace(`GlyphRenderer#${m.name} return`,b),b}}},7302:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OptionsService=u.DEFAULT_OPTIONS=void 0;let p=a(8460),s=a(844),o=a(6114);u.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let i=["normal","bold","100","200","300","400","500","600","700","800","900"];class c extends s.Disposable{constructor(l){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;let r=Object.assign({},u.DEFAULT_OPTIONS);for(let d in l)if(d in r)try{let _=l[d];r[d]=this._sanitizeAndValidateOption(d,_)}catch(_){console.error(_)}this.rawOptions=r,this.options=Object.assign({},r),this._setupOptions()}onSpecificOptionChange(l,r){return this.onOptionChange(d=>{d===l&&r(this.rawOptions[l])})}onMultipleOptionChange(l,r){return this.onOptionChange(d=>{l.indexOf(d)!==-1&&r()})}_setupOptions(){let l=d=>{if(!(d in u.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},r=(d,_)=>{if(!(d in u.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);_=this._sanitizeAndValidateOption(d,_),this.rawOptions[d]!==_&&(this.rawOptions[d]=_,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let _={get:l.bind(this,d),set:r.bind(this,d)};Object.defineProperty(this.options,d,_)}}_sanitizeAndValidateOption(l,r){switch(l){case"cursorStyle":if(r||(r=u.DEFAULT_OPTIONS[l]),!function(d){return d==="block"||d==="underline"||d==="bar"}(r))throw new Error(`"${r}" is not a valid value for ${l}`);break;case"wordSeparator":r||(r=u.DEFAULT_OPTIONS[l]);break;case"fontWeight":case"fontWeightBold":if(typeof r=="number"&&1<=r&&r<=1e3)break;r=i.includes(r)?r:u.DEFAULT_OPTIONS[l];break;case"cursorWidth":r=Math.floor(r);case"lineHeight":case"tabStopWidth":if(r<1)throw new Error(`${l} cannot be less than 1, value: ${r}`);break;case"minimumContrastRatio":r=Math.max(1,Math.min(21,Math.round(10*r)/10));break;case"scrollback":if((r=Math.min(r,4294967295))<0)throw new Error(`${l} cannot be less than 0, value: ${r}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(r<=0)throw new Error(`${l} cannot be less than or equal to 0, value: ${r}`);break;case"rows":case"cols":if(!r&&r!==0)throw new Error(`${l} must be numeric, value: ${r}`);break;case"windowsPty":r=r??{}}return r}}u.OptionsService=c},2660:function(v,u,a){var p=this&&this.__decorate||function(c,f,l,r){var d,_=arguments.length,m=_<3?f:r===null?r=Object.getOwnPropertyDescriptor(f,l):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(c,f,l,r);else for(var y=c.length-1;y>=0;y--)(d=c[y])&&(m=(_<3?d(m):_>3?d(f,l,m):d(f,l))||m);return _>3&&m&&Object.defineProperty(f,l,m),m},s=this&&this.__param||function(c,f){return function(l,r){f(l,r,c)}};Object.defineProperty(u,"__esModule",{value:!0}),u.OscLinkService=void 0;let o=a(2585),i=u.OscLinkService=class{constructor(c){this._bufferService=c,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(c){let f=this._bufferService.buffer;if(c.id===void 0){let y=f.addMarker(f.ybase+f.y),b={data:c,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(b,y)),this._dataByLinkId.set(b.id,b),b.id}let l=c,r=this._getEntryIdKey(l),d=this._entriesWithId.get(r);if(d)return this.addLineToLink(d.id,f.ybase+f.y),d.id;let _=f.addMarker(f.ybase+f.y),m={id:this._nextId++,key:this._getEntryIdKey(l),data:l,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(c,f){let l=this._dataByLinkId.get(c);if(l&&l.lines.every(r=>r.line!==f)){let r=this._bufferService.buffer.addMarker(f);l.lines.push(r),r.onDispose(()=>this._removeMarkerFromLink(l,r))}}getLinkData(c){var f;return(f=this._dataByLinkId.get(c))===null||f===void 0?void 0:f.data}_getEntryIdKey(c){return`${c.id};;${c.uri}`}_removeMarkerFromLink(c,f){let l=c.lines.indexOf(f);l!==-1&&(c.lines.splice(l,1),c.lines.length===0&&(c.data.id!==void 0&&this._entriesWithId.delete(c.key),this._dataByLinkId.delete(c.id)))}};u.OscLinkService=i=p([s(0,o.IBufferService)],i)},8343:(v,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createDecorator=u.getServiceDependencies=u.serviceRegistry=void 0;let a="di$target",p="di$dependencies";u.serviceRegistry=new Map,u.getServiceDependencies=function(s){return s[p]||[]},u.createDecorator=function(s){if(u.serviceRegistry.has(s))return u.serviceRegistry.get(s);let o=function(i,c,f){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(l,r,d){r[a]===r?r[p].push({id:l,index:d}):(r[p]=[{id:l,index:d}],r[a]=r)})(o,i,f)};return o.toString=()=>s,u.serviceRegistry.set(s,o),o}},2585:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.IDecorationService=u.IUnicodeService=u.IOscLinkService=u.IOptionsService=u.ILogService=u.LogLevelEnum=u.IInstantiationService=u.ICharsetService=u.ICoreService=u.ICoreMouseService=u.IBufferService=void 0;let p=a(8343);var s;u.IBufferService=(0,p.createDecorator)("BufferService"),u.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),u.ICoreService=(0,p.createDecorator)("CoreService"),u.ICharsetService=(0,p.createDecorator)("CharsetService"),u.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(o){o[o.TRACE=0]="TRACE",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.OFF=5]="OFF"}(s||(u.LogLevelEnum=s={})),u.ILogService=(0,p.createDecorator)("LogService"),u.IOptionsService=(0,p.createDecorator)("OptionsService"),u.IOscLinkService=(0,p.createDecorator)("OscLinkService"),u.IUnicodeService=(0,p.createDecorator)("UnicodeService"),u.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(v,u,a)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeService=void 0;let p=a(8460),s=a(225);u.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;let o=new s.UnicodeV6;this.register(o),this._active=o.version,this._activeProvider=o}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(o){if(!this._providers[o])throw new Error(`unknown Unicode version "${o}"`);this._active=o,this._activeProvider=this._providers[o],this._onChange.fire(o)}register(o){this._providers[o.version]=o}wcwidth(o){return this._activeProvider.wcwidth(o)}getStringCellWidth(o){let i=0,c=o.length;for(let f=0;f<c;++f){let l=o.charCodeAt(f);if(55296<=l&&l<=56319){if(++f>=c)return i+this.wcwidth(l);let r=o.charCodeAt(f);56320<=r&&r<=57343?l=1024*(l-55296)+r-56320+65536:i+=this.wcwidth(r)}i+=this.wcwidth(l)}return i}}}},t={};function n(v){var u=t[v];if(u!==void 0)return u.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var h={};return(()=>{var v=h;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let u=n(9042),a=n(3236),p=n(844),s=n(5741),o=n(8285),i=n(7975),c=n(7090),f=["cols","rows"];class l extends p.Disposable{constructor(d){super(),this._core=this.register(new a.Terminal(d)),this._addonManager=this.register(new s.AddonManager),this._publicOptions=Object.assign({},this._core.options);let _=y=>this._core.options[y],m=(y,b)=>{this._checkReadonlyOptions(y),this._core.options[y]=b};for(let y in this._core.options){let b={get:_.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,b)}}_checkReadonlyOptions(d){if(f.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new i.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new c.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new o.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let d=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(let _ in d)this._publicOptions[_]=d[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,_){this._verifyIntegers(d,_),this._core.resize(d,_)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var _,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((_=d.x)!==null&&_!==void 0?_:0,(m=d.width)!==null&&m!==void 0?m:0,(y=d.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,_,m){this._verifyIntegers(d,_,m),this._core.select(d,_,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,_){this._verifyIntegers(d,_),this._core.selectLines(d,_)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,_){this._core.write(d,_)}writeln(d,_){this._core.write(d),this._core.write(`\r
`,_)}paste(d){this._core.paste(d)}refresh(d,_){this._verifyIntegers(d,_),this._core.refresh(d,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return u}_verifyIntegers(...d){for(let _ of d)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(let _ of d)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}v.Terminal=l})(),h})())});var yb=function(e){return function(t){for(var n=e.length,h=t.length,v=new Array(n*h),u=0,a=0;a<n;a++)for(var p=e[a],s=0;s<h;s++)v[u++]=p(t[s]);return v}};var Yf={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var De=function(e){return e.identity},be={identity:function(e){return e},Semigroupoid0:function(){return Yf}};var _n=!0;var Ye=function(e){return function(t){return function(n){return e(n)(t)}}},Se=function(e){return function(t){return e}};var Db=function(e){return function(t){return t(e)}};var bb=function(e){return function(t){for(var n=t.length,h=new Array(n),v=0;v<n;v++)h[v]=e(t[v]);return h}};var nn=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var At=function(e){return V(e)(Se(void 0))},bs=function(e){var t=V(e);return function(n){return function(h){return t(Se(h))(n)}}},ed=function(e){var t=V(e);return function(n){return t(Se(n))}};var Tt={map:bb};var eI=De(be);var fu={apply:yb,Functor0:function(){return Tt}},ut=function(e){return e.apply};var oa=function(e){var t=ut(e),n=V(e.Functor0());return function(h){return function(v){return t(n(Se(eI))(h))(v)}}};var Z=function(e){return e.pure},Nc=function(e){var t=Z(e);return function(n){return function(h){if(!n)return h;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,h.constructor.name])}}},Tr=function(e){var t=Z(e);return function(n){return function(h){if(n)return h;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,h.constructor.name])}}},Bc=function(e){var t=ut(e.Apply0()),n=Z(e);return function(h){return function(v){return t(n(h))(v)}}};var Cs={pure:function(e){return[e]},Apply0:function(){return fu}};var Cb=function(e){return function(t){for(var n=[],h=0,v=e.length;h<v;h++)Array.prototype.push.apply(n,t(e[h]));return n}};var zt=function(e){return e.discard};var Ka={bind:Cb,Apply0:function(){return fu}},de=function(e){return e.bind},rn=function(e){return Ye(de(e))},ws=function(e){var t=rn(e);return function(n){return function(h){return function(v){return t(n)(h(v))}}}};var Vt={discard:function(e){return de(e)}};var Sb=function(e){var t=de(e.Bind1()),n=Nc(e.Applicative0());return function(h){return function(v){return t(h)(function(u){return n(u)(v)})}}};var Eb=function(e){var t=de(e.Bind1()),n=Z(e.Applicative0());return function(h){return function(v){return t(v)(function(u){return n(h(u))})}}},Hn=function(e){var t=de(e.Bind1()),n=Z(e.Applicative0());return function(h){return function(v){return t(h)(function(u){return t(v)(function(a){return n(u(a))})})}}};var Tb=function(e){return function(t){return e+t}},Mb=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var En=function(e){return e.reflectSymbol};var pu={append:Tb};var Gt={append:Mb};var me=function(e){return e.append};var Q_={alt:me(Gt),Functor0:function(){return Tt}},mn=function(e){return e.alt};var Lb=String.fromCharCode(65535),Fb=String.fromCharCode(0),iI=Number.POSITIVE_INFINITY,uI=Number.NEGATIVE_INFINITY;var nd=function(e){return function(t){return function(n){return function(h){return function(v){return h<v?e:h===v?t:n}}}}};var Ab=nd,xb=nd,Ib=nd,Rb=nd,$b=function(e){return function(t){return function(n){for(var h=0,v=t.length,u=n.length;h<v&&h<u;){var a=t[h],p=n[h],s=e(a)(p);if(s!==0)return s;h++}return v===u?0:v>u?-1:1}}};var rd=function(e){return function(t){return e===t}};var kb=rd,Ob=rd,Hb=rd,Pb=rd,Nb=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var h=0;h<t.length;h++)if(!e(t[h])(n[h]))return!1;return!0}}};var od={eq:function(e){return function(t){return!0}}},Zn={eq:Pb};var Wc={eq:Ob},Uc={eq:kb},Bb={eq:Hb};var Ne=function(e){return e.eq};var Fo=function(e){return{eq:Nb(Ne(e))}};var le=function(){function e(){}return e.value=new e,e}(),pe=function(){function e(){}return e.value=new e,e}(),xe=function(){function e(){}return e.value=new e,e}();var qr={compare:function(e){return function(t){return xe.value}},Eq0:function(){return od}},jt=function(){return{compare:Ib(le.value)(xe.value)(pe.value),Eq0:function(){return Zn}}}();var Es=function(){return{compare:xb(le.value)(xe.value)(pe.value),Eq0:function(){return Wc}}}(),An=function(){return{compare:Ab(le.value)(xe.value)(pe.value),Eq0:function(){return Uc}}}(),ad=function(){return{compare:Rb(le.value)(xe.value)(pe.value),Eq0:function(){return Bb}}}();var Te=function(e){return e.compare},_I=Te(An);var id=function(e){var t=Te(e);return function(n){return function(h){var v=t(n)(h);if(v instanceof le)return h;if(v instanceof xe||v instanceof pe)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},Z_=function(e){var t=Te(e);return function(n){return function(h){var v=t(n)(h);if(v instanceof le||v instanceof xe)return n;if(v instanceof pe)return h;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},Ya=function(e){var t=Te(e),n=Fo(e.Eq0());return{compare:function(){var h=function(v){return function(u){var a=t(v)(u);if(a instanceof xe)return 0;if(a instanceof le)return 1;if(a instanceof pe)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[a.constructor.name])}};return function(v){return function(u){return _I(0)($b(h)(v)(u))}}}(),Eq0:function(){return n}}};var Vb=function(e){var t=Z_(e),n=id(e);return function(h){return function(v){return function(u){return t(v)(n(h)(u))}}}};var Ao=function(e){return e.top};var ud={top:2147483647,bottom:-2147483648,Ord0:function(){return An}},zc={top:Lb,bottom:Fb,Ord0:function(){return ad}};var ua=function(e){return e.bottom};var Gb=function(e){return e.toString()},jb=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var Jb=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,h){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var v=h+1,u=v<t&&e[v]>="0"&&e[v]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+u})+'"'};var ca={show:Jb};var so={show:jb},Io={show:Gb};var Kb={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Me=function(e){return e.show};var bI=De(be),J=function(){function e(){}return e.value=new e,e}(),z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var ev=function(e){var t=me(e);return{append:function(n){return function(h){if(n instanceof J)return h;if(h instanceof J)return n;if(n instanceof z&&h instanceof z)return new z(t(n.value0)(h.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,h.constructor.name])}}}};var Xb=function(e){var t=ev(e);return{mempty:J.value,Semigroup0:function(){return t}}};var nt=function(e){return function(t){return function(n){if(n instanceof J)return e;if(n instanceof z)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},la=nt(!0)(Se(!1)),Ms=nt(!1)(Se(!0));var Mt={map:function(e){return function(t){return t instanceof z?new z(e(t.value0)):J.value}}},CI=V(Mt);var Cn=function(e){return nt(e)(bI)},zr=function(){return function(e){if(e instanceof z)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var ld={apply:function(e){return function(t){if(e instanceof z)return CI(e.value0)(t);if(e instanceof J)return J.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Mt}};var er={bind:function(e){return function(t){if(e instanceof z)return t(e.value0);if(e instanceof J)return J.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return ld}};var Be=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ke=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var ei={map:function(e){return function(t){if(t instanceof Be)return new Be(t.value0);if(t instanceof ke)return new ke(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},wI=V(ei);var dn=function(e){return function(t){return function(n){if(n instanceof Be)return e(n.value0);if(n instanceof ke)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},fd=function(){return dn(Se(J.value))(z.create)}();var Yb=dn(Se(!1))(Se(!0));var Zb={apply:function(e){return function(t){if(e instanceof Be)return new Be(e.value0);if(e instanceof ke)return wI(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return ei}};var hu=function(){return{pure:ke.create,Apply0:function(){return Zb}}}();var co=function(e){return e};var fa={map:function(e){return function(t){return e(t)}}};var dd={apply:function(e){return function(t){return e(t)}},Functor0:function(){return fa}},tv={bind:function(e){return function(t){return t(e)}},Apply0:function(){return dd}},pd={pure:co,Apply0:function(){return dd}},Vr={Applicative0:function(){return pd},Bind1:function(){return tv}};var da={mempty:"",Semigroup0:function(){return pu}};var _u={mempty:[],Semigroup0:function(){return Gt}};var ot=function(e){return e.mempty};var nC=function(e){return function(){return e}},rC=function(e){return function(t){return function(){return t(e())()}}};var oC=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}},Ro={Applicative0:function(){return Kt},Bind1:function(){return Mr}},Mr={bind:rC,Apply0:function(){return iC(0)}},Kt={pure:nC,Apply0:function(){return iC(0)}},aC=oC("functorEffect","Effect",function(){return{map:Bc(Kt)}}),iC=oC("applyEffect","Effect",function(){return{apply:Hn(Ro),Functor0:function(){return aC(0)}}}),ze=aC(20);var uC=function(e){return function(){return{value:e}}};var je=function(e){return function(){return e.value}},sC=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Rt=function(e){return function(t){return function(){t.value=e}}};var xI=At(ze),Xt=uC,ov=sC,cC=function(e){return ov(function(t){var n=e(t);return{state:n,value:n}})},Lr=function(e){return function(t){return xI(cC(e)(t))}};var $I=rn(Mr),kI=V(ze),ln=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Yt=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Qn=function(e){return e.tailRecM};var _d={tailRecM:function(e){return function(t){var n=function(h){if(h instanceof Yt)return h.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[h.constructor.name])};return function(){var v=$I(Xt)(e(t))();return function(){for(;!function(){var a=je(v)();if(a instanceof ln){var p=e(a.value0)();return Rt(p)(v)(),!1}if(a instanceof Yt)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[a.constructor.name])}(););return{}}(),kI(n)(je(v))()}}},Monad0:function(){return Ro}};var lC=function(e){return function(t){return function(n){for(var h=t,v=n.length,u=v-1;u>=0;u--)h=e(n[u])(h);return h}}},fC=function(e){return function(t){return function(n){for(var h=t,v=n.length,u=0;u<v;u++)h=e(h)(n[u]);return h}}};var dC={empty:[],Alt0:function(){return Q_}},fr=function(e){return e.empty};var hC=function(e){return function(t){return e&&t}},_C=function(e){return function(t){return e||t}},vC=function(e){return!e};var Gc=function(e){return e.tt};var $o=function(e){return e.not};var cv=function(e){return e.implies};var jc=function(e){return e.ff};var vu=function(e){return e.disj},jr={ff:!1,tt:!0,implies:function(e){return function(t){return vu(jr)($o(jr)(e))(t)}},conj:hC,disj:_C,not:vC};var Ls=function(e){return e.conj},Jc=function(e){var t=jc(e),n=Gc(e),h=cv(e),v=Ls(e),u=vu(e),a=$o(e);return{ff:function(p){return t},tt:function(p){return n},implies:function(p){return function(s){return function(o){return h(p(o))(s(o))}}},conj:function(p){return function(s){return function(o){return v(p(o))(s(o))}}},disj:function(p){return function(s){return function(o){return u(p(o))(s(o))}}},not:function(p){return function(s){return a(p(s))}}}};var te=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pa=function(e){return function(t){return e(t.value0)(t.value1)}};var Zt=function(e){return e.value1};var ha={map:function(e){return function(t){return new te(t.value0,e(t.value1))}}};var xn=function(e){return e.value0};var md=function(e){var t=Ne(e);return function(n){var h=Ne(n);return{eq:function(v){return function(u){return t(v.value0)(u.value0)&&h(v.value1)(u.value1)}}}}},mu=function(e){var t=Te(e),n=md(e.Eq0());return function(h){var v=Te(h),u=n(h.Eq0());return{compare:function(a){return function(p){var s=t(a.value0)(p.value0);return s instanceof le?le.value:s instanceof pe?pe.value:v(a.value1)(p.value1)}},Eq0:function(){return u}}}};var Ar=function(e){return e.bimap};var GI={append:function(e){return function(t){return e instanceof z?e:t}}};var gC=function(){return{mempty:J.value,Semigroup0:function(){return GI}}}();var ee=function(e){return e};var Dd=function(){return ee};var jI=Dd();var on=function(){return jI};var JI=De(be);var KI=on();var $t=function(e){return e.foldr};var kt=function(e){var t=oa(e.Apply0()),n=Z(e);return function(h){var v=$t(h);return function(u){return v(function(a){return t(u(a))})(n(void 0))}}},bd=function(e){var t=kt(e);return function(n){return Ye(t(n))}};var xt=function(e){return e.foldl};var lo=function(e){var t=xt(e);return function(n){var h=me(n.Semigroup0()),v=ot(n);return function(u){return function(a){var p=function(s){return function(o){return s.init?{init:!1,acc:o}:{init:!1,acc:h(s.acc)(h(u)(o))}}};return t(p)({init:!0,acc:v})(a).acc}}}};var pn={foldr:function(e){return function(t){return function(n){if(n instanceof J)return t;if(n instanceof z)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof J)return t;if(n instanceof z)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ot(e);return function(n){return function(h){if(h instanceof J)return t;if(h instanceof z)return n(h.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,h.constructor.name])}}}};var Cd={foldr:function(e){return function(t){return function(n){if(n instanceof Be)return t;if(n instanceof ke)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Be)return t;if(n instanceof ke)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=ot(e);return function(n){return function(h){if(h instanceof Be)return t;if(h instanceof ke)return n(h.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,h.constructor.name])}}}};var SC=function(e){var t=$t(e);return function(n){var h=me(n.Semigroup0()),v=ot(n);return function(u){return t(function(a){return function(p){return h(u(a))(p)}})(v)}}},wt={foldr:lC,foldl:fC,foldMap:function(e){return SC(wt)(e)}};var Ht=function(e){return e.foldMap};var wd=function(e){var t=Ht(e)(gC);return function(n){var h=Ne(n);return function(v){var u=t(function(a){var p=h(v)(a.value0);return p?new z(a.value1):J.value});return function(a){return KI(u(a))}}}};var yu=function(e){var t=Ht(e);return function(n){return t(n)(JI)}};var Td=function(e){return e.foldl1};var IC=function(){function e(v){return[v]}function t(v){return function(u){return[v,u]}}function n(v){return function(u){return function(a){return[v,u,a]}}}function h(v){return function(u){return v.concat(u)}}return function(v){return function(u){return function(a){return function(p){return function(s){function o(i,c){switch(c-i){case 0:return a([]);case 1:return u(e)(p(s[i]));case 2:return v(u(t)(p(s[i])))(p(s[i+1]));case 3:return v(v(u(n)(p(s[i])))(p(s[i+1])))(p(s[i+2]));default:var f=i+Math.floor((c-i)/4)*2;return v(u(h)(o(i,f)))(o(f,c))}}return o(0,s.length)}}}}}}();var IR=De(be),gn=function(e){return e.traverse};var wv={traverse:function(e){var t=Z(e),n=V(e.Apply0().Functor0());return function(h){return function(v){if(v instanceof J)return t(J.value);if(v instanceof z)return n(z.create)(h(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[h.constructor.name,v.constructor.name])}}},sequence:function(e){var t=Z(e),n=V(e.Apply0().Functor0());return function(h){if(h instanceof J)return t(J.value);if(h instanceof z)return n(z.create)(h.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[h.constructor.name])}},Functor0:function(){return Mt},Foldable1:function(){return pn}};var OC=function(e){var t=gn(e);return function(n){return t(n)(IR)}},ii={traverse:function(e){var t=e.Apply0();return IC(ut(t))(V(t.Functor0()))(Z(e))},sequence:function(e){return OC(ii)(e)},Functor0:function(){return Tt},Foldable1:function(){return wt}};var HC=function(e){return function(t){return function(n){return function(h){return function(v){return function(u){for(var a=[],p=u;;){var s=v(p);if(e(s))return a;var o=t(s);a.push(n(o)),p=h(o)}}}}}}};var PC=function(e){return function(t){return function(n){return function(h){return function(v){return function(u){for(var a=[],p=u;;){var s=v(p);a.push(n(s));var o=h(s);if(e(o))return a;p=t(o)}}}}}}};var BR=zr();var Ev={unfoldr1:PC(la)(BR)(xn)(Zt)};var UR=zr(),ko=function(e){return e.unfoldr};var Rs={unfoldr:HC(la)(UR)(xn)(Zt),Unfoldable10:function(){return Ev}};var Wn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Fd=function(e){var t=fr(e);return function(n){return new Wn(n,t)}};var Ad=function(e){var t=mn(e.Plus1().Alt0()),n=Z(e.Applicative0());return function(h){return t(n(h.value0))(h.value1)}};var $s=function(e){var t=V(e);return{map:function(n){return function(h){return new Wn(n(h.value0),t(n)(h.value1))}}}};var al=function(e){var t=Ht(e),n=xt(e),h=$t(e);return{foldMap:function(v){var u=me(v.Semigroup0()),a=t(v);return function(p){return function(s){return u(p(s.value0))(a(p)(s.value1))}}},foldl:function(v){return function(u){return function(a){return n(v)(v(u)(a.value0))(a.value1)}}},foldr:function(v){return function(u){return function(a){return v(a.value0)(h(v)(u)(a.value1))}}}}};var Fv=function(e){var t=xt(e),n=$t(e),h=al(e);return{foldMap1:function(v){var u=me(v);return function(a){return function(p){return t(function(s){return function(o){return u(s)(a(o))}})(a(p.value0))(p.value1)}}},foldr1:function(v){return function(u){return nt(u.value0)(v(u.value0))(n(function(a){var p=nt(a)(v(a));return function(s){return z.create(p(s))}})(J.value)(u.value1))}},foldl1:function(v){return function(u){return t(v)(u.value0)(u.value1)}},Foldable0:function(){return h}}};var Qe=function(){function e(){}return e.value=new e,e}(),Ie=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Av=function(e){return e},JR=function(e){return new Ie(e.value0,e.value1)};var KR=function(e){var t=function(n){return function(h){var v=n,u=!1,a;function p(s,o){if(o instanceof Ie&&o.value1 instanceof Ie&&o.value1.value1 instanceof Ie){v=new Ie(o,s),h=o.value1.value1.value1;return}var i=function(f){return f instanceof Ie&&f.value1 instanceof Ie&&f.value1.value1 instanceof Qe?new Ie(e(f.value0),new Ie(e(f.value1.value0),Qe.value)):f instanceof Ie&&f.value1 instanceof Qe?new Ie(e(f.value0),Qe.value):Qe.value},c=function(f){return function(l){var r=f,d=!1,_;function m(y,b){if(y instanceof Ie&&y.value0 instanceof Ie&&y.value0.value1 instanceof Ie&&y.value0.value1.value1 instanceof Ie){r=y.value1,l=new Ie(e(y.value0.value0),new Ie(e(y.value0.value1.value0),new Ie(e(y.value0.value1.value1.value0),b)));return}return d=!0,b}for(;!d;)_=m(r,l);return _}};return u=!0,c(s)(i(o))}for(;!u;)a=p(v,h);return a}};return t(Qe.value)},xv={map:KR};var dr={foldr:function(e){return function(t){var n=function(){var v=function(u){return function(a){var p=u,s=!1,o;function i(c,f){if(f instanceof Qe)return s=!0,c;if(f instanceof Ie){p=new Ie(f.value0,c),a=f.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[c.constructor.name,f.constructor.name])}for(;!s;)o=i(p,a);return o}};return v(Qe.value)}(),h=xt(dr)(Ye(e))(t);return function(v){return h(n(v))}}},foldl:function(e){var t=function(n){return function(h){var v=n,u=!1,a;function p(s,o){if(o instanceof Qe)return u=!0,s;if(o instanceof Ie){v=e(s)(o.value0),h=o.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[o.constructor.name])}for(;!u;)a=p(v,h);return a}};return t},foldMap:function(e){var t=me(e.Semigroup0()),n=ot(e);return function(h){return xt(dr)(function(v){var u=t(v);return function(a){return u(h(a))}})(n)}}};var QR=$t(dr);var xd={append:function(e){return function(t){return QR(Ie.create)(t)(e)}}},qC=me(xd);var zC={append:function(e){return function(t){return new Wn(e.value0,qC(e.value1)(JR(t)))}}};var XR={alt:qC,Functor0:function(){return xv}},VC=function(){return{empty:Qe.value,Alt0:function(){return XR}}}();var bu=function(){var e=function(t){return function(n){var h=t,v=!1,u;function a(p,s){if(s instanceof Qe)return v=!0,p;if(s instanceof Ie){h=new Ie(s.value0,p),n=s.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[p.constructor.name,s.constructor.name])}for(;!v;)u=a(h,n);return u}};return e(Qe.value)}();var QC=function(e){return e instanceof Qe};var Rd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var YC=function(e){var t=!1,n;function h(v){if(v.value0 instanceof Qe&&v.value1 instanceof Qe)return t=!0,J.value;if(v.value0 instanceof Qe){e=new Rd(bu(v.value1),Qe.value);return}if(v.value0 instanceof Ie)return t=!0,new z(new te(v.value0.value0,new Rd(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=h(e);return n},ZC=function(e){return function(t){return new Rd(e.value0,new Ie(t,e.value1))}};var ew=function(e){return e.value0 instanceof Qe&&e.value1 instanceof Qe};var tw=function(){return new Rd(Qe.value,Qe.value)}();var ks=function(){function e(){}return e.value=new e,e}(),$d=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var nw=function(e){return function(t){if(e instanceof ks)return t;if(t instanceof ks)return e;if(e instanceof $d)return new $d(e.value0,ZC(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},a$=function(e){return function(t){return function(n){var h=function(u){return function(a){return function(p){var s=u,o=a,i=!1,c;function f(l,r,d){if(d instanceof Qe)return i=!0,r;if(d instanceof Ie){s=l,o=l(r)(d.value0),p=d.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[l.constructor.name,r.constructor.name,d.constructor.name])}for(;!i;)c=f(s,o,p);return c}}},v=function(u){return function(a){var p=u,s=!1,o;function i(c,f){var l=YC(c);if(l instanceof J)return s=!0,h(function(r){return function(d){return d(r)}})(t)(f);if(l instanceof z){p=l.value0.value1,a=new Ie(e(l.value0.value0),f);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[l.constructor.name])}for(;!s;)o=i(p,a);return o}};return v(n)(Qe.value)}}},rw=function(e){if(e instanceof ks)return J.value;if(e instanceof $d)return new z(new te(e.value0,function(){var t=ew(e.value1);return t?ks.value:a$(nw)(ks.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var ow=function(){return ks.value}(),aw=nw;var iw={append:aw};var uw=function(e){return function(t){return aw(e)(new $d(t,tw))}};var u$=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}},s$=me(iw);var Iv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),il=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ul=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sw=function(e){var t=!1,n;function h(v){var u=function(s){return s},a=function(s){return function(o){return new Iv(s.value0,s$(s.value1)(o))}};if(v.value0 instanceof il){var p=rw(v.value1);if(p instanceof J)return t=!0,new il(v.value0.value0);if(p instanceof z){e=a(u(p.value0.value0)(v.value0.value0))(p.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[p.constructor.name])}if(v.value0 instanceof ul)return t=!0,new ul(v.value0.value0,function(s){return a(v.value0.value1(s))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=h(e);return n},si=function(e){var t=V(e);return function(n){var h=n.Monad0(),v=V(h.Bind1().Apply0().Functor0()),u=Z(h.Applicative0()),a=Qn(n);return function(p){var s=function(o){var i=sw(o);if(i instanceof il)return v(Yt.create)(u(i.value0));if(i instanceof ul)return v(ln.create)(p(t(i.value1)(i.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[i.constructor.name])};return a(s)}}};var cw=function(e){return new Iv(e,ow)};var sl={Applicative0:function(){return Ir},Bind1:function(){return tr}},ci={map:function(e){return function(t){return rn(tr)(function(){var n=Z(Ir);return function(h){return n(e(h))}}())(t)}}},tr={bind:function(e){return function(t){return new Iv(e.value0,uw(e.value1)(t))}},Apply0:function(){return Rv(0)}},Ir={pure:function(e){return cw(il.create(e))},Apply0:function(){return Rv(0)}},Rv=u$("freeApply","Control.Monad.Free",function(){return{apply:Hn(sl),Functor0:function(){return ci}}}),$v=Rv(77);var c$=Z(Ir);var bt=function(e){return cw(new ul(e,function(t){return c$(t)}))};var lw=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),h=Z(t.Applicative0()),v=Qn(e);return function(u){var a=function(p){var s=sw(p);if(s instanceof il)return n(Yt.create)(h(s.value0));if(s instanceof ul)return n(function(o){return ln.create(s.value1(o))})(u(s.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[s.constructor.name])};return v(a)}};var Kr=function(e){return e.state},Os=function(e){var t=Kr(e);return function(n){return t(function(h){return new te(void 0,n)})}},Rr=function(e){var t=Kr(e);return function(n){return t(function(h){return new te(void 0,n(h))})}};var wu=function(e){var t=Kr(e);return function(n){return t(function(h){return new te(n(h),h)})}},va=function(e){return Kr(e)(function(t){return new te(t,t)})};var f$={dimap:function(e){return function(t){return function(n){return function(h){return n(e(h))}}}}},li={first:function(e){return function(t){return e(xn(t))}},second:function(e){return function(t){return e(Zt(t))}},Profunctor0:function(){return f$}};var kd={dimap:function(e){return function(t){return function(n){return function(h){return t(n(e(h)))}}}}},Su=function(e){return e.dimap};var Xr={first:function(e){return function(t){return new te(e(t.value0),t.value1)}},second:V(ha),Profunctor0:function(){return kd}},Eu=function(e){return e.second},Hs=function(e){return e.first};var C$=on(),w$=De(be);var S$=function(e){return C$(e(w$))},nr=function(e){return function(t){return S$(t)(e)}};var Pd=function(e){return e},fo=function(e){return function(t){return Pd(e)(Se(t))}};var E$=typeof Array.from=="function",Sj=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",Ej=typeof String.prototype.fromCodePoint=="function",T$=typeof String.prototype.codePointAt=="function",bw=function(e){return T$?function(t){return t.codePointAt(0)}:e};var Cw=function(e){return function(t){return E$?function(n){return Array.from(n,t)}:e}};var L$=function(e){return function(t){if(e<1)return[];var n=new Array(e);return n.fill(t)}},F$=function(e){return function(t){for(var n=[],h=0,v=0;v<e;v++)n[h++]=t;return n}},ww=typeof Array.prototype.fill=="function"?L$:F$,Sw=function(){function e(v,u){this.head=v,this.tail=u}var t={};function n(v){return function(u){return new e(v,u)}}function h(v){for(var u=[],a=0,p=v;p!==t;)u[a++]=p.head,p=p.tail;return u}return function(v){return function(u){return h(v(n)(t)(u))}}}(),$r=function(e){return e.length},Hv=function(e){return function(t){return function(n){return n.length===0?e({}):t(n[0])(n.slice(1))}}},Ew=function(e){return function(t){return function(n){return function(h){return h<0||h>=n.length?t:e(n[h])}}}};var Tw=function(e){return function(t){return function(n){return function(h){for(var v=0,u=h.length;v<u;v++)if(n(h[v]))return e(v);return t}}}};var Mw=function(e){return function(t){return function(n){return function(h){if(n<0||n>=h.length)return t;var v=h.slice();return v.splice(n,1),e(v)}}}};var cl=function(e){return function(t){return t.filter(e)}};var Lw=function(){function e(t,n,h,v,u,a){var p,s,o,i,c,f,l;for(p=u+(a-u>>1),p-u>1&&e(t,n,v,h,u,p),a-p>1&&e(t,n,v,h,p,a),s=u,o=p,i=u;s<p&&o<a;)c=v[s],f=v[o],l=n(t(c)(f)),l>0?(h[i++]=f,++o):(h[i++]=c,++s);for(;s<p;)h[i++]=v[s++];for(;o<a;)h[i++]=v[o++]}return function(t){return function(n){return function(h){var v;return h.length<2?h:(v=h.slice(0),e(t,n,v,h.slice(0),0,h.length),v)}}}}(),Nd=function(e){return function(t){return function(n){return n.slice(e,t)}}};var Fw=function(e){return function(t){return function(){return e(t())}}};var Bd=function(e){return function(t){return function(){for(var n=0,h=e.length;n<h;n++)t(e[n])()}}};var Wd={map:Fw};var $$=function(){function e(t,n,h,v,u,a){var p,s,o,i,c,f,l;for(p=u+(a-u>>1),p-u>1&&e(t,n,v,h,u,p),a-p>1&&e(t,n,v,h,p,a),s=u,o=p,i=u;s<p&&o<a;)c=v[s],f=v[o],l=n(t(c)(f)),l>0?(h[i++]=f,++o):(h[i++]=c,++s);for(;s<p;)h[i++]=v[s++];for(;o<a;)h[i++]=v[o++]}return function(t){return function(n){return function(h){return function(){return h.length<2||e(t,n,h,h.slice(0),0,h.length),h}}}}}();var J$=zr();var K$=me(Gt);var Ud=function(){return Hv(Se(J.value))(function(e){return function(t){return new z({head:e,tail:t})}})}();var Bv=function(){return Hv(Se(J.value))(function(e){return function(t){return new z(t)}})}();var Ww=function(e){return Lw(e)(function(t){if(t instanceof pe)return 1;if(t instanceof xe)return 0;if(t instanceof le)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[t.constructor.name])})};var Wv=function(e){var t=Te(e);return function(n){return Ww(t)(n)}};var Bs=function(e){return[e]},Uw=function(e){return $r(e)===0};var qw=function(){return Ew(z.create)(J.value)}();var qd=function(e){return qw(e)(0)};var zd=function(e){return Sw($t(e))};var zw=function(){return Tw(z.create)(J.value)}();var Uv=function(e){return function(t){var n=e<1;return n?t:Nd(e)($r(t))(t)}};var Vw=function(){return Mw(z.create)(J.value)}(),qv=function(e){return function(t){return function(n){return n.length===0?[]:nt(n)(function(h){return J$(Vw(h)(n))})(zw(e(t))(n))}}};var Mn=function(e){return function(t){return K$([e])(t)}};var zv=Ye(de(Ka)),Ho=function(e){return zv(function(){var t=nt([])(Bs);return function(n){return t(e(n))}}())};function di(e){return e.charCodeAt(0)}function Gw(e){return String.fromCharCode(e)}var ll={Applicative0:function(){return Cs},Plus1:function(){return dC}};var jw=ua(zc),Jw=Ao(zc);var Kw=function(e){return e.fromEnum};var Tu=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Mu=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var Vv=function(e){return e>=di(jw)&&e<=di(Jw)?new z(Gw(e)):J.value},ek={succ:Tu(Vv)(di),pred:Mu(Vv)(di),Ord0:function(){return ad}};var Qw=function(){return{cardinality:di(Jw)-di(jw)|0,toEnum:Vv,fromEnum:di,Bounded0:function(){return zc},Enum1:function(){return ek}}}();var Xw=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},Lu=function(e){return e};var Vd=isFinite;var Gv=Math.round;var Zw=Ao(ud),eS=ua(ud);var jv=function(){return Xw(z.create)(J.value)}(),pk=function(e){if(!Vd(e))return 0;if(e>=Lu(Zw))return Zw;if(e<=Lu(eS))return eS;if(_n)return Cn(0)(jv(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},nS=function(e){return pk(Gv(e))};var Fu=function(e){return e.length};var Gd=function(e){return function(t){return t.substr(0,e)}},Ws=function(e){return function(t){return t.substring(e)}};var pi=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var aS=function(e){return function(t){return Ws(Fu(t)-e|0)(t)}};var jd=function(e){return function(t){return Gd(Fu(t)-e|0)(t)}};var Jv=function(e){return function(t){return t.split(e)}};var kr=function(e){return function(t){return t.join(e)}};var cS=function(e){return e===""};var pl=Kw(Qw),wk=V(Mt),Sk=ko(Rs);var fS=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var dS=function(e){return 56320<=e&&e<=57343},pS=function(e){return 55296<=e&&e<=56319},Ek=function(e){var t=Fu(e);if(t===0)return J.value;if(t===1)return new z({head:pl(pi(0)(e)),tail:""});var n=pl(pi(1)(e)),h=pl(pi(0)(e)),v=pS(h)&&dS(n);return v?new z({head:fS(h)(n),tail:Ws(2)(e)}):new z({head:h,tail:Ws(1)(e)})},Tk=function(e){return wk(function(t){return new te(t.head,t.tail)})(Ek(e))},Mk=function(e){return Sk(Tk)(e)},Lk=function(e){var t=pl(pi(0)(e)),n=pS(t)&&Fu(e)>1;if(n){var h=pl(pi(1)(e)),v=dS(h);return v?fS(t)(h):t}return t},Fk=bw(Lk),Ak=Cw(Mk)(Fk),qs=function(e){return $r(Ak(e))};var In=function(){var e={},t="Pure",n="Throw",h="Catch",v="Sync",u="Async",a="Bind",p="Bracket",s="Fork",o="Sequential",i="Map",c="Apply",f="Alt",l="Cons",r="Resume",d="Release",_="Finalizer",m="Finalized",y="Forked",b="Fiber",S="Thunk";function D(N,K,O,B){this.tag=N,this._1=K,this._2=O,this._3=B}function g(N){var K=function(O,B,W){return new D(N,O,B,W)};return K.tag=N,K}function C(N){return new D(t,void 0)}function F(N){try{N()}catch(K){setTimeout(function(){throw K},0)}}function E(N,K,O){try{return K(O())}catch(B){return N(B)}}function T(N,K,O){try{return K(O)()}catch(B){return O(N(B))(),C}}var M=function(){var N=1024,K=0,O=0,B=new Array(N),W=!1;function P(){var Q;for(W=!0;K!==0;)K--,Q=B[O],B[O]=void 0,O=(O+1)%N,Q();W=!1}return{isDraining:function(){return W},enqueue:function(Q){var G,ve;K===N&&(ve=W,P(),W=ve),B[(O+K)%N]=Q,K++,W||P()}}}();function w(N){var K={},O=0,B=0;return{register:function(W){var P=O++;W.onComplete({rethrow:!0,handler:function(Q){return function(){B--,delete K[P]}}})(),K[P]=W,B++},isEmpty:function(){return B===0},killAll:function(W,P){return function(){if(B===0)return P();var Q=0,G={};function ve(ye){G[ye]=K[ye].kill(W,function(ue){return function(){delete G[ye],Q--,N.isLeft(ue)&&N.fromLeft(ue)&&setTimeout(function(){throw N.fromLeft(ue)},0),Q===0&&P()}})()}for(var Ee in K)K.hasOwnProperty(Ee)&&(Q++,ve(Ee));return K={},O=0,B=0,function(ye){return new D(v,function(){for(var ue in G)G.hasOwnProperty(ue)&&G[ue]()})}}}}}var L=0,A=1,R=2,x=3,I=4,$=5,k=6;function H(N,K,O){var B=0,W=L,P=O,Q=null,G=null,ve=null,Ee=null,ye=null,ue=0,Ce=0,yt=null,qt=!0;function Ot(ce){for(var ne,j,re;;)switch(ne=null,j=null,re=null,W){case R:W=A;try{P=ve(P),Ee===null?ve=null:(ve=Ee._1,Ee=Ee._2)}catch(Pe){W=$,Q=N.left(Pe),P=null}break;case x:N.isLeft(P)?(W=$,Q=P,P=null):ve===null?W=$:(W=R,P=N.fromRight(P));break;case A:switch(P.tag){case a:ve&&(Ee=new D(l,ve,Ee)),ve=P._2,W=A,P=P._1;break;case t:ve===null?(W=$,P=N.right(P._1)):(W=R,P=P._1);break;case v:W=x,P=E(N.left,N.right,P._1);break;case u:W=I,P=T(N.left,P._1,function(Pe){return function(){B===ce&&(B++,M.enqueue(function(){B===ce+1&&(W=x,P=Pe,Ot(B))}))}});return;case n:W=$,Q=N.left(P._1),P=null;break;case h:ve===null?ye=new D(l,P,ye,G):ye=new D(l,P,new D(l,new D(r,ve,Ee),ye,G),G),ve=null,Ee=null,W=A,P=P._1;break;case p:ue++,ve===null?ye=new D(l,P,ye,G):ye=new D(l,P,new D(l,new D(r,ve,Ee),ye,G),G),ve=null,Ee=null,W=A,P=P._1;break;case s:W=x,ne=H(N,K,P._2),K&&K.register(ne),P._1&&ne.run(),P=N.right(ne);break;case o:W=A,P=q(N,K,P._1);break}break;case $:if(ve=null,Ee=null,ye===null)W=k,P=G||Q||P;else switch(ne=ye._3,re=ye._1,ye=ye._2,re.tag){case h:G&&G!==ne&&ue===0?W=$:Q&&(W=A,P=re._2(N.fromLeft(Q)),Q=null);break;case r:G&&G!==ne&&ue===0||Q?W=$:(ve=re._1,Ee=re._2,W=R,P=N.fromRight(P));break;case p:ue--,Q===null&&(j=N.fromRight(P),ye=new D(l,new D(d,re._2,j),ye,ne),(G===ne||ue>0)&&(W=A,P=re._3(j)));break;case d:ye=new D(l,new D(m,P,Q),ye,G),W=A,G&&G!==ne&&ue===0?P=re._1.killed(N.fromLeft(G))(re._2):Q?P=re._1.failed(N.fromLeft(Q))(re._2):P=re._1.completed(N.fromRight(P))(re._2),Q=null,ue++;break;case _:ue++,ye=new D(l,new D(m,P,Q),ye,G),W=A,P=re._1;break;case m:ue--,W=$,P=re._1,Q=re._2;break}break;case k:for(var fe in yt)yt.hasOwnProperty(fe)&&(qt=qt&&yt[fe].rethrow,F(yt[fe].handler(P)));yt=null,G&&Q?setTimeout(function(){throw N.fromLeft(Q)},0):N.isLeft(P)&&qt&&setTimeout(function(){if(qt)throw N.fromLeft(P)},0);return;case L:W=A;break;case I:return}}function Xe(ce){return function(){if(W===k)return qt=qt&&ce.rethrow,ce.handler(P)(),function(){};var ne=Ce++;return yt=yt||{},yt[ne]=ce,function(){yt!==null&&delete yt[ne]}}}function se(ce,ne){return function(){if(W===k)return ne(N.right(void 0))(),function(){};var j=Xe({rethrow:!1,handler:function(){return ne(N.right(void 0))}})();switch(W){case L:G=N.left(ce),W=k,P=G,Ot(B);break;case I:G===null&&(G=N.left(ce)),ue===0&&(W===I&&(ye=new D(l,new D(_,P(ce)),ye,G)),W=$,P=null,Q=null,Ot(++B));break;default:G===null&&(G=N.left(ce)),ue===0&&(W=$,P=null,Q=null)}return j}}function he(ce){return function(){var ne=Xe({rethrow:!1,handler:ce})();return W===L&&Ot(B),ne}}return{kill:se,join:he,onComplete:Xe,isSuspended:function(){return W===L},run:function(){W===L&&(M.isDraining()?Ot(B):M.enqueue(function(){Ot(B)}))}}}function U(N,K,O,B){var W=0,P={},Q=0,G={},ve=new Error("[ParAff] Early exit"),Ee=null,ye=e;function ue(Xe,se,he){var ce=se,ne=null,j=null,re=0,fe={},Pe,tt;e:for(;;)switch(Pe=null,ce.tag){case y:if(ce._3===e&&(Pe=P[ce._1],fe[re++]=Pe.kill(Xe,function(st){return function(){re--,re===0&&he(st)()}})),ne===null)break e;ce=ne._2,j===null?ne=null:(ne=j._1,j=j._2);break;case i:ce=ce._2;break;case c:case f:ne&&(j=new D(l,ne,j)),ne=ce,ce=ce._1;break}if(re===0)he(N.right(void 0))();else for(tt=0,Pe=re;tt<Pe;tt++)fe[tt]=fe[tt]();return fe}function Ce(Xe,se,he){var ce,ne,j,re,fe,Pe;N.isLeft(Xe)?(ce=Xe,ne=null):(ne=Xe,ce=null);e:for(;;){if(j=null,re=null,fe=null,Pe=null,Ee!==null)return;if(se===null){B(ce||ne)();return}if(se._3!==e)return;switch(se.tag){case i:ce===null?(se._3=N.right(se._1(N.fromRight(ne))),ne=se._3):se._3=ce;break;case c:if(j=se._1._3,re=se._2._3,ce){if(se._3=ce,fe=!0,Pe=Q++,G[Pe]=ue(ve,ce===j?se._2:se._1,function(){return function(){delete G[Pe],fe?fe=!1:he===null?Ce(ce,null,null):Ce(ce,he._1,he._2)}}),fe){fe=!1;return}}else{if(j===e||re===e)return;ne=N.right(N.fromRight(j)(N.fromRight(re))),se._3=ne}break;case f:if(j=se._1._3,re=se._2._3,j===e&&N.isLeft(re)||re===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&re!==e&&N.isLeft(re))ce=ne===j?re:j,ne=null,se._3=ce;else if(se._3=ne,fe=!0,Pe=Q++,G[Pe]=ue(ve,ne===j?se._2:se._1,function(){return function(){delete G[Pe],fe?fe=!1:he===null?Ce(ne,null,null):Ce(ne,he._1,he._2)}}),fe){fe=!1;return}break}he===null?se=null:(se=he._1,he=he._2)}}function yt(Xe){return function(se){return function(){delete P[Xe._1],Xe._3=se,Ce(se,Xe._2._1,Xe._2._2)}}}function qt(){var Xe=A,se=O,he=null,ce=null,ne,j;e:for(;;)switch(ne=null,j=null,Xe){case A:switch(se.tag){case i:he&&(ce=new D(l,he,ce)),he=new D(i,se._1,e,e),se=se._2;break;case c:he&&(ce=new D(l,he,ce)),he=new D(c,e,se._2,e),se=se._1;break;case f:he&&(ce=new D(l,he,ce)),he=new D(f,e,se._2,e),se=se._1;break;default:j=W++,Xe=$,ne=se,se=new D(y,j,new D(l,he,ce),e),ne=H(N,K,ne),ne.onComplete({rethrow:!1,handler:yt(se)})(),P[j]=ne,K&&K.register(ne)}break;case $:if(he===null)break e;he._1===e?(he._1=se,Xe=A,se=he._2,he._2=e):(he._2=se,se=he,ce===null?he=null:(he=ce._1,ce=ce._2))}for(ye=se,j=0;j<W;j++)P[j].run()}function Ot(Xe,se){Ee=N.left(Xe);var he;for(var ce in G)if(G.hasOwnProperty(ce)){he=G[ce];for(ce in he)he.hasOwnProperty(ce)&&he[ce]()}G=null;var ne=ue(Xe,ye,se);return function(j){return new D(u,function(re){return function(){for(var fe in ne)ne.hasOwnProperty(fe)&&ne[fe]();return C}})}}return qt(),function(Xe){return new D(u,function(se){return function(){return Ot(Xe,se)}})}}function q(N,K,O){return new D(u,function(B){return function(){return U(N,K,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(h),D.Sync=g(v),D.Async=g(u),D.Bind=g(a),D.Bracket=g(p),D.Fork=g(s),D.Seq=g(o),D.ParMap=g(i),D.ParApply=g(c),D.ParAlt=g(f),D.Fiber=H,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=C,D}(),hS=In.Pure,_S=In.Throw;function vS(e){return function(t){return In.Catch(e,t)}}function mS(e){return function(t){return t.tag===In.Pure.tag?In.Pure(e(t._1)):In.Bind(t,function(n){return In.Pure(e(n))})}}function gS(e){return function(t){return In.Bind(e,t)}}function Kv(e){return function(t){return In.Fork(e,t)}}var yS=In.Sync;function DS(e){return function(t){return In.ParMap(e,t)}}function bS(e){return function(t){return In.ParApply(e,t)}}var po=In.Async;function Kd(e){return function(t){return function(n){return In.Bracket(e,t,n)}}}function CS(e,t){return function(){return In.Fiber(e,null,t)}}var xk=function(){function e(n,h){return n===0&&typeof setImmediate<"u"?setImmediate(h):setTimeout(h,n)}function t(n,h){return n===0&&typeof clearImmediate<"u"?clearImmediate(h):clearTimeout(h)}return function(n,h){return In.Async(function(v){return function(){var u=e(h,v(n()));return function(){return In.Sync(function(){return n(t(h,u))})}}})}}(),wS=In.Seq;function Un(e){return new Error(e)}function Yr(e){return function(){throw e}}function Qd(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var SS=function(e){return Yr(Un(e))};var or=function(e){return e.throwError};var kk={throwError:Yr,Monad0:function(){return Ro}};var ES={catchError:Ye(Qd),MonadThrow0:function(){return kk}};var Bo=function(e){return e.catchError};var hl=function(e){var t=Bo(e),n=e.MonadThrow0().Monad0(),h=V(n.Bind1().Apply0().Functor0()),v=Z(n.Applicative0());return function(u){return t(h(ke.create)(u))(function(a){return v(Be.create(a))})}};var Or=function(e){return e.ask};var It=function(e){return e.lift};var Xd={liftEffect:De(be),Monad0:function(){return Ro}},Ze=function(e){return e.liftEffect};var ga=function(e){return e.tell};var Nk=V(ei);var Qv=function(e){return e};var Xv=function(e){return e};var Yd=function(e){return function(t){return e(t)}},Zd=function(e){var t=V(e);return{map:function(n){return Yd(t(Nk(n)))}}};var Yv=function(e){return{Applicative0:function(){return Dl(e)},Bind1:function(){return ep(e)}}},ep=function(e){var t=de(e.Bind1()),n=Z(e.Applicative0());return{bind:function(h){return function(v){return t(h)(dn(function(u){return n(Be.create(u))})(function(u){var a=v(u);return a}))}},Apply0:function(){return MS(e)}}},MS=function(e){var t=Zd(e.Bind1().Apply0().Functor0());return{apply:Hn(Yv(e)),Functor0:function(){return t}}},Dl=function(e){return{pure:function(){var t=Z(e.Applicative0());return function(n){return Qv(t(ke.create(n)))}}(),Apply0:function(){return MS(e)}}};var LS=function(e){var t=Yv(e);return{throwError:function(){var n=Z(e.Applicative0());return function(h){return Qv(n(Be.create(h)))}}(),Monad0:function(){return t}}};var FS=function(e){var t=me(e);return function(n){var h=n.Bind1(),v=de(h),u=Z(n.Applicative0()),a=Zd(h.Apply0().Functor0());return{alt:function(p){return function(s){return v(p)(function(o){if(o instanceof ke)return u(new ke(o.value0));if(o instanceof Be)return v(s)(function(i){if(i instanceof ke)return u(new ke(i.value0));if(i instanceof Be)return u(new Be(t(o.value0)(i.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[i.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[o.constructor.name])})}},Functor0:function(){return a}}}};var Bk=V(Mt);var Zv=function(e){return e},AS=function(e){return e};var tp={lift:function(e){var t=Eb(e)(z.create);return function(n){return Zv(t(n))}}},Wk=It(tp);var Uk=function(e){var t=V(e);return{map:function(n){return function(h){return t(Bk(n))(h)}}}},np=function(e){return{Applicative0:function(){return tm(e)},Bind1:function(){return em(e)}}},em=function(e){var t=de(e.Bind1()),n=Z(e.Applicative0());return{bind:function(h){return function(v){return t(h)(function(u){if(u instanceof J)return n(J.value);if(u instanceof z){var a=v(u.value0);return a}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[u.constructor.name])})}},Apply0:function(){return xS(e)}}},xS=function(e){var t=Uk(e.Bind1().Apply0().Functor0());return{apply:Hn(np(e)),Functor0:function(){return t}}},tm=function(e){return{pure:function(){var t=Z(e.Applicative0());return function(n){return Zv(t(z.create(n)))}}(),Apply0:function(){return xS(e)}}};var IS=function(e){var t=Qn(e),n=e.Monad0(),h=de(n.Bind1()),v=Z(n.Applicative0()),u=np(n);return{tailRecM:function(a){var p=t(function(s){var o=a(s);return h(o)(function(i){return v(function(){if(i instanceof J)return new Yt(J.value);if(i instanceof z&&i.value0 instanceof ln)return new ln(i.value0.value0);if(i instanceof z&&i.value0 instanceof Yt)return new Yt(new z(i.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[i.constructor.name])}())})});return function(s){return Zv(p(s))}},Monad0:function(){return u}}},RS=function(e){var t=e.Monad0(),n=Wk(t),h=Kr(e),v=np(t);return{state:function(u){return n(h(u))},Monad0:function(){return v}}};var $S=function(e){return e};var _i=function(e){return e};var rp={lift:function(e){return function(t){return $S(Se(t))}}},qk=It(rp),kS=function(e){return function(t){return function(n){return e(t(n))}}},zk=function(e){return{map:function(){var t=V(e);return function(n){return kS(t(n))}}()}};var OS=function(e){var t=ut(e),n=zk(e.Functor0());return{apply:function(h){return function(v){return function(u){return t(h(u))(v(u))}}},Functor0:function(){return n}}},xu=function(e){var t=de(e),n=OS(e.Apply0());return{bind:function(h){return function(v){return function(u){return t(h(u))(function(a){var p=v(a);return p(u)})}}},Apply0:function(){return n}}};var op=function(e){var t=OS(e.Apply0());return{pure:function(){var n=Z(e);return function(h){return $S(Se(n(h)))}}(),Apply0:function(){return t}}},bl=function(e){var t=op(e.Applicative0()),n=xu(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Gs=function(e){var t=bl(e);return{ask:Z(e.Applicative0()),Monad0:function(){return t}}};var vi=function(e){var t=e.Monad0(),n=bl(t);return{liftEffect:function(){var h=qk(t),v=Ze(e);return function(u){return h(v(u))}}(),Monad0:function(){return n}}},js=function(e){var t=e.Monad0(),n=rn(t.Bind1()),h=Z(t.Applicative0()),v=Qn(e),u=bl(t);return{tailRecM:function(a){return function(p){var s=function(o){return function(i){var c=a(i);return n(h)(c(o))}};return function(o){return v(s(o))(p)}}},Monad0:function(){return u}}};var rm=function(e){return e},om=function(e){return e};var ap=function(e){return function(t){return e(t)}},am=function(e){var t=V(e);return{map:function(n){return ap(t(function(h){return new te(n(h.value0),h.value1)}))}}};var ip=function(e){var t=me(e);return function(n){var h=ut(n),v=n.Functor0(),u=V(v),a=am(v);return{apply:function(p){return function(s){var o=function(i){return function(c){return new te(i.value0(c.value0),t(i.value1)(c.value1))}};return h(u(o)(p))(s)}},Functor0:function(){return a}}}},im=function(e){var t=me(e),n=ip(e);return function(h){var v=de(h),u=h.Apply0(),a=V(u.Functor0()),p=n(u);return{bind:function(s){return function(o){return v(s)(function(i){var c=o(i.value0);return a(function(f){return new te(f.value0,t(i.value1)(f.value1))})(c)})}},Apply0:function(){return p}}}};var um=function(e){var t=ot(e),n=ip(e.Semigroup0());return function(h){var v=Z(h),u=n(h.Apply0());return{pure:function(a){return v(new te(a,t))},Apply0:function(){return u}}}},HS=function(e){var t=um(e),n=im(e.Semigroup0());return function(h){var v=t(h.Applicative0()),u=n(h.Bind1());return{Applicative0:function(){return v},Bind1:function(){return u}}}};var PS=function(e){var t=e.Semigroup0(),n=HS(e);return function(h){var v=n(h);return{tell:function(){var u=Z(h.Applicative0()),a=te.create(void 0);return function(p){return rm(u(a(p)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var Js=function(e){return e.sequential},mi=function(e){return e.parallel};var Kk=De(be),Qk=function(e){var t=Js(e),n=kt(e.Applicative1()),h=mi(e);return function(v){var u=n(v);return function(a){var p=u(function(s){return h(a(s))});return function(s){return t(p(s))}}}};var Ks=function(e){var t=Qk(e);return function(n){return t(n)(Kk)}};var Cl=function(e){return e()};var BS=function(e){return e()};var WS=function(e){throw new Error(e)};var US=function(){return WS};var tO=US(),nO=BS,gi=function(e){return nO(function(){return tO(e)})};var qS=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}},rO=Z(Kt),dm=At(ze),zS=V(ze);var oO=function(e){return e},VS=Kv(!1);var aO={map:DS},Wo={map:mS},iO=V(Wo),GS=Kv(!0),uO=function(){var e=function(h){if(h instanceof ke)return h.value0;if(h instanceof Be)return gi("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[h.constructor.name])},t=function(h){if(h instanceof Be)return h.value0;if(h instanceof ke)return gi("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[h.constructor.name])},n=function(h){if(h instanceof Be)return!0;if(h instanceof ke)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[h.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:Be.create,right:ke.create}}(),jS=function(e){return CS(uO,e)},JS=function(e){return function(){var n=jS(e)();return n.run(),n}},pm=function(e){return dm(JS(e))};var sO=function(e){return function(t){return Kd(e)({killed:Se(t),failed:Se(t),completed:Se(t)})}},cO={apply:bS,Functor0:function(){return aO}};var Ru={Applicative0:function(){return eo},Bind1:function(){return yn}},yn={bind:gS,Apply0:function(){return KS(0)}},eo={pure:hS,Apply0:function(){return KS(0)}},KS=qS("applyAff","Effect.Aff",function(){return{apply:Hn(Ru),Functor0:function(){return Wo}}});var cp=Z(eo),QS=de(yn);var lO=rn(yn);var XS=function(e){return function(t){return sO(cp(void 0))(Se(e))(Se(t))}};var wn={liftEffect:yS,Monad0:function(){return Ru}},sp=Ze(wn),$u=function(e){return oO(Se(sp(e)))},wl=function(e){return po(function(t){return zS($u)(e.join(t))})},YS={map:function(e){return function(t){return Cl(jS(iO(e)(wl(t))))}}};var Sl=function(e){return function(t){return QS(sp(t.isSuspended))(function(n){return n?sp(dm(t.kill(e,Se(rO(void 0))))):po(function(h){return zS($u)(t.kill(e,h))})})}};var lp={throwError:_S,Monad0:function(){return Ru}},ZS={catchError:vS,MonadThrow0:function(){return lp}},fO=hl(ZS);var dO=function(e){return function(t){return JS(lO(function(n){return sp(e(n))})(fO(t)))}},El=function(e){return function(t){return dm(dO(e)(t))}};var yi={parallel:ee,sequential:wS,Monad0:function(){return Ru},Applicative1:function(){return eE(0)}},eE=qS("applicativeParAff","Effect.Aff",function(){return{pure:function(){var e=mi(yi);return function(t){return e(cp(t))}}(),Apply0:function(){return cO}}}),hm=eE(136);var pO=Ks(yi)(wt);var hO={append:function(e){return function(t){return function(n){return pO([e(n),t(n)])}}}};var ku={tailRecM:function(e){var t=function(n){return QS(e(n))(function(h){if(h instanceof Yt)return cp(h.value0);if(h instanceof ln)return t(h.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[h.constructor.name])})};return t},Monad0:function(){return Ru}};var _m=Se(cp(void 0)),tE={mempty:_m,Semigroup0:function(){return hO}};var Di=function(){function e(){this.head=null,this.last=null,this.size=0}function t(i,c){this.queue=i,this.value=c,this.next=null,this.prev=null}function n(i){this.draining=!1,this.error=null,this.value=i,this.takes=new e,this.reads=new e,this.puts=new e}var h={};function v(i){try{i()}catch(c){setTimeout(function(){throw c},0)}}function u(i,c){var f=new t(i,c);switch(i.size){case 0:i.head=f;break;case 1:f.prev=i.head,i.head.next=f,i.last=f;break;default:f.prev=i.last,i.last.next=f,i.last=f}return i.size++,f}function a(i){var c;switch(i.size){case 0:return null;case 1:c=i.head,i.head=null;break;case 2:c=i.last,i.head.next=null,i.last=null;break;default:c=i.last,i.last=c.prev,i.last.next=null}return c.prev=null,c.queue=null,i.size--,c.value}function p(i){var c;switch(i.size){case 0:return null;case 1:c=i.head,i.head=null;break;case 2:c=i.head,i.last.prev=null,i.head=i.last,i.last=null;break;default:c=i.head,i.head=c.next,i.head.prev=null}return c.next=null,c.queue=null,i.size--,c.value}function s(i){if(i.queue!==null){if(i.queue.last===i){a(i.queue);return}if(i.queue.head===i){p(i.queue);return}i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.queue.size--,i.queue=null,i.value=null,i.next=null,i.prev=null}}function o(i,c){if(!c.draining){var f=c.puts,l=c.takes,r=c.reads,d,_,m,y,b;for(c.draining=!0;;){if(d=null,_=null,m=null,y=c.value,b=r.size,c.error!==null){for(y=i.left(c.error);d=p(f);)v(d.cb(y));for(;_=p(r);)v(_(y));for(;m=p(l);)v(m(y));break}if(y===h&&(d=p(f))&&(c.value=y=d.value),y!==h){for(m=p(l);b--&&(_=p(r));)v(_(i.right(y)));m!==null&&(c.value=h,v(m(i.right(y))))}if(d!==null&&v(d.cb(i.right(void 0))),c.value===h&&f.size===0||c.value!==h&&l.size===0)break}c.draining=!1}}return n.EMPTY=h,n.putLast=u,n.takeLast=a,n.takeHead=p,n.deleteCell=s,n.drainVar=o,n}();function vm(){return new Di(Di.EMPTY)}function nE(e,t,n,h){return function(){var v=Di.putLast(n.puts,{cb:h,value:t});return Di.drainVar(e,n),function(){Di.deleteCell(v)}}}function rE(e,t,n){return function(){var h=Di.putLast(t.takes,n);return Di.drainVar(e,t),function(){Di.deleteCell(h)}}}var oE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aE=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iE=function(){function e(){}return e.value=new e,e}();var uE=function(){return{left:Be.create,right:ke.create,nothing:J.value,just:z.create,killed:oE.create,filled:aE.create,empty:iE.value}}();var sE=function(e){return function(t){return function(n){return nE(uE,e,t,n)}}};var cE=function(e){return function(t){return rE(uE,e,t)}};var mO=Ze(wn);var mm=function(e){return po(function(t){return function(){var h=cE(e)(t)();return $u(h)}})};var Tl=function(e){return function(t){return po(function(n){return function(){var v=sE(e)(t)(n)();return $u(v)}})}};var Ml=mO(vm);var CO=function(e){var t=V(e);return{map:function(n){return function(h){return function(v){return t(function(u){return new te(n(u.value0),u.value1)})(h(v))}}}}};var dE=function(e){return{Applicative0:function(){return Dm(e)},Bind1:function(){return wO(e)}}},wO=function(e){var t=de(e.Bind1());return{bind:function(n){return function(h){return function(v){return t(n(v))(function(u){var a=h(u.value0);return a(u.value1)})}}},Apply0:function(){return pE(e)}}},pE=function(e){var t=CO(e.Bind1().Apply0().Functor0());return{apply:Hn(dE(e)),Functor0:function(){return t}}},Dm=function(e){var t=Z(e.Applicative0());return{pure:function(n){return function(h){return t(new te(n,h))}},Apply0:function(){return pE(e)}}};var hE=function(e){var t=Z(e.Applicative0()),n=dE(e);return{state:function(h){return function(v){return t(h(v))}},Monad0:function(){return n}}};var SO=It(rp);var Qs={liftAff:De(be),MonadEffect0:function(){return wn}},ar=function(e){return e.liftAff};var _E=function(e){var t=e.MonadEffect0(),n=vi(t);return{liftAff:function(){var h=SO(t.Monad0()),v=ar(e);return function(u){return h(v(u))}}(),MonadEffect0:function(){return n}}};var Uo=ee,Cm=ee;var EO=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var gE=function(e){return function(t){return Uo(function(n){return e(n.value0)(n.value1)})(t)}};var yE=function(e){return function(t){return Cm(new EO(e,t))}},wm={map:function(e){return function(t){return Uo(function(n){return yE(function(h){return e(n.value0(h))})(n.value1)})(t)}}};var DE=yE(De(be));var Je=function(){function e(){}return e.value=new e,e}(),rt=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),gt=function(){function e(t,n,h,v,u,a,p){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=u,this.value5=a,this.value6=p}return e.create=function(t){return function(n){return function(h){return function(v){return function(u){return function(a){return function(p){return new e(t,n,h,v,u,a,p)}}}}}}},e}(),bi=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),ya=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),Ci=function(){function e(t,n,h,v,u,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=u,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(u){return function(a){return new e(t,n,h,v,u,a)}}}}}},e}(),qo=function(){function e(t,n,h,v,u,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=u,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(u){return function(a){return new e(t,n,h,v,u,a)}}}}}},e}(),wi=function(){function e(t,n,h,v,u,a){this.value0=t,this.value1=n,this.value2=h,this.value3=v,this.value4=u,this.value5=a}return e.create=function(t){return function(n){return function(h){return function(v){return function(u){return function(a){return new e(t,n,h,v,u,a)}}}}}},e}(),fp=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}();var Da=function(e){var t=Te(e);return function(n){var h=function(v){var u=!1,a;function p(s){if(s instanceof Je)return u=!0,J.value;if(s instanceof rt){var o=t(n)(s.value1);if(o instanceof xe)return u=!0,new z(s.value2);if(o instanceof le){v=s.value0;return}v=s.value3;return}if(s instanceof gt){var i=t(n)(s.value1);if(i instanceof xe)return u=!0,new z(s.value2);var c=t(n)(s.value4);if(c instanceof xe)return u=!0,new z(s.value5);if(i instanceof le){v=s.value0;return}if(c instanceof pe){v=s.value6;return}v=s.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[s.constructor.name])}for(;!u;)a=p(v);return a};return h}};var CE=function(e){return function(t){return function(n){var h=e,v=t,u=!1,a;function p(s,o,i){if(o instanceof Qe)return u=!0,i;if(o instanceof Ie){if(o.value0 instanceof bi){h=s,v=o.value1,n=new rt(i,o.value0.value0,o.value0.value1,o.value0.value2);return}if(o.value0 instanceof ya){h=s,v=o.value1,n=new rt(o.value0.value0,o.value0.value1,o.value0.value2,i);return}if(o.value0 instanceof Ci){h=s,v=o.value1,n=new gt(i,o.value0.value0,o.value0.value1,o.value0.value2,o.value0.value3,o.value0.value4,o.value0.value5);return}if(o.value0 instanceof qo){h=s,v=o.value1,n=new gt(o.value0.value0,o.value0.value1,o.value0.value2,i,o.value0.value3,o.value0.value4,o.value0.value5);return}if(o.value0 instanceof wi){h=s,v=o.value1,n=new gt(o.value0.value0,o.value0.value1,o.value0.value2,o.value0.value3,o.value0.value4,o.value0.value5,i);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[o.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[o.constructor.name,i.constructor.name])}for(;!u;)a=p(h,v,n);return a}}},_o=function(e){var t=CE(e),n=Te(e);return function(h){return function(v){var u=function(p){return function(s){var o=p,i=!1,c;function f(l,r){if(l instanceof Qe)return i=!0,new rt(r.value0,r.value1,r.value2,r.value3);if(l instanceof Ie){if(l.value0 instanceof bi)return i=!0,t(l.value1)(new gt(r.value0,r.value1,r.value2,r.value3,l.value0.value0,l.value0.value1,l.value0.value2));if(l.value0 instanceof ya)return i=!0,t(l.value1)(new gt(l.value0.value0,l.value0.value1,l.value0.value2,r.value0,r.value1,r.value2,r.value3));if(l.value0 instanceof Ci){o=l.value1,s=new fp(new rt(r.value0,r.value1,r.value2,r.value3),l.value0.value0,l.value0.value1,new rt(l.value0.value2,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof qo){o=l.value1,s=new fp(new rt(l.value0.value0,l.value0.value1,l.value0.value2,r.value0),r.value1,r.value2,new rt(r.value3,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof wi){o=l.value1,s=new fp(new rt(l.value0.value0,l.value0.value1,l.value0.value2,l.value0.value3),l.value0.value4,l.value0.value5,new rt(r.value0,r.value1,r.value2,r.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[l.value0.constructor.name,r.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[l.constructor.name,r.constructor.name])}for(;!i;)c=f(o,s);return c}},a=function(p){return function(s){var o=p,i=!1,c;function f(l,r){if(r instanceof Je)return i=!0,u(l)(new fp(Je.value,h,v,Je.value));if(r instanceof rt){var d=n(h)(r.value1);if(d instanceof xe)return i=!0,t(l)(new rt(r.value0,h,v,r.value3));if(d instanceof le){o=new Ie(new bi(r.value1,r.value2,r.value3),l),s=r.value0;return}o=new Ie(new ya(r.value0,r.value1,r.value2),l),s=r.value3;return}if(r instanceof gt){var d=n(h)(r.value1);if(d instanceof xe)return i=!0,t(l)(new gt(r.value0,h,v,r.value3,r.value4,r.value5,r.value6));var _=n(h)(r.value4);if(_ instanceof xe)return i=!0,t(l)(new gt(r.value0,r.value1,r.value2,r.value3,h,v,r.value6));if(d instanceof le){o=new Ie(new Ci(r.value1,r.value2,r.value3,r.value4,r.value5,r.value6),l),s=r.value0;return}if(d instanceof pe&&_ instanceof le){o=new Ie(new qo(r.value0,r.value1,r.value2,r.value4,r.value5,r.value6),l),s=r.value3;return}o=new Ie(new wi(r.value0,r.value1,r.value2,r.value3,r.value4,r.value5),l),s=r.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[l.constructor.name,r.constructor.name])}for(;!i;)c=f(o,s);return c}};return a(Qe.value)}}},Tm=function(e){var t=CE(e),n=Te(e);return function(h){var v=function(s){return function(o){var i=s,c=!1,f;function l(r,d){if(r instanceof Qe)return c=!0,d;if(r instanceof Ie){if(r.value0 instanceof bi&&r.value0.value2 instanceof Je&&d instanceof Je)return c=!0,t(r.value1)(new rt(Je.value,r.value0.value0,r.value0.value1,Je.value));if(r.value0 instanceof ya&&r.value0.value0 instanceof Je&&d instanceof Je)return c=!0,t(r.value1)(new rt(Je.value,r.value0.value1,r.value0.value2,Je.value));if(r.value0 instanceof bi&&r.value0.value2 instanceof rt){i=r.value1,o=new gt(d,r.value0.value0,r.value0.value1,r.value0.value2.value0,r.value0.value2.value1,r.value0.value2.value2,r.value0.value2.value3);return}if(r.value0 instanceof ya&&r.value0.value0 instanceof rt){i=r.value1,o=new gt(r.value0.value0.value0,r.value0.value0.value1,r.value0.value0.value2,r.value0.value0.value3,r.value0.value1,r.value0.value2,d);return}return r.value0 instanceof bi&&r.value0.value2 instanceof gt?(c=!0,t(r.value1)(new rt(new rt(d,r.value0.value0,r.value0.value1,r.value0.value2.value0),r.value0.value2.value1,r.value0.value2.value2,new rt(r.value0.value2.value3,r.value0.value2.value4,r.value0.value2.value5,r.value0.value2.value6)))):r.value0 instanceof ya&&r.value0.value0 instanceof gt?(c=!0,t(r.value1)(new rt(new rt(r.value0.value0.value0,r.value0.value0.value1,r.value0.value0.value2,r.value0.value0.value3),r.value0.value0.value4,r.value0.value0.value5,new rt(r.value0.value0.value6,r.value0.value1,r.value0.value2,d)))):r.value0 instanceof Ci&&r.value0.value2 instanceof Je&&r.value0.value5 instanceof Je&&d instanceof Je?(c=!0,t(r.value1)(new gt(Je.value,r.value0.value0,r.value0.value1,Je.value,r.value0.value3,r.value0.value4,Je.value))):r.value0 instanceof qo&&r.value0.value0 instanceof Je&&r.value0.value5 instanceof Je&&d instanceof Je?(c=!0,t(r.value1)(new gt(Je.value,r.value0.value1,r.value0.value2,Je.value,r.value0.value3,r.value0.value4,Je.value))):r.value0 instanceof wi&&r.value0.value0 instanceof Je&&r.value0.value3 instanceof Je&&d instanceof Je?(c=!0,t(r.value1)(new gt(Je.value,r.value0.value1,r.value0.value2,Je.value,r.value0.value4,r.value0.value5,Je.value))):r.value0 instanceof Ci&&r.value0.value2 instanceof rt?(c=!0,t(r.value1)(new rt(new gt(d,r.value0.value0,r.value0.value1,r.value0.value2.value0,r.value0.value2.value1,r.value0.value2.value2,r.value0.value2.value3),r.value0.value3,r.value0.value4,r.value0.value5))):r.value0 instanceof qo&&r.value0.value0 instanceof rt?(c=!0,t(r.value1)(new rt(new gt(r.value0.value0.value0,r.value0.value0.value1,r.value0.value0.value2,r.value0.value0.value3,r.value0.value1,r.value0.value2,d),r.value0.value3,r.value0.value4,r.value0.value5))):r.value0 instanceof qo&&r.value0.value5 instanceof rt?(c=!0,t(r.value1)(new rt(r.value0.value0,r.value0.value1,r.value0.value2,new gt(d,r.value0.value3,r.value0.value4,r.value0.value5.value0,r.value0.value5.value1,r.value0.value5.value2,r.value0.value5.value3)))):r.value0 instanceof wi&&r.value0.value3 instanceof rt?(c=!0,t(r.value1)(new rt(r.value0.value0,r.value0.value1,r.value0.value2,new gt(r.value0.value3.value0,r.value0.value3.value1,r.value0.value3.value2,r.value0.value3.value3,r.value0.value4,r.value0.value5,d)))):r.value0 instanceof Ci&&r.value0.value2 instanceof gt?(c=!0,t(r.value1)(new gt(new rt(d,r.value0.value0,r.value0.value1,r.value0.value2.value0),r.value0.value2.value1,r.value0.value2.value2,new rt(r.value0.value2.value3,r.value0.value2.value4,r.value0.value2.value5,r.value0.value2.value6),r.value0.value3,r.value0.value4,r.value0.value5))):r.value0 instanceof qo&&r.value0.value0 instanceof gt?(c=!0,t(r.value1)(new gt(new rt(r.value0.value0.value0,r.value0.value0.value1,r.value0.value0.value2,r.value0.value0.value3),r.value0.value0.value4,r.value0.value0.value5,new rt(r.value0.value0.value6,r.value0.value1,r.value0.value2,d),r.value0.value3,r.value0.value4,r.value0.value5))):r.value0 instanceof qo&&r.value0.value5 instanceof gt?(c=!0,t(r.value1)(new gt(r.value0.value0,r.value0.value1,r.value0.value2,new rt(d,r.value0.value3,r.value0.value4,r.value0.value5.value0),r.value0.value5.value1,r.value0.value5.value2,new rt(r.value0.value5.value3,r.value0.value5.value4,r.value0.value5.value5,r.value0.value5.value6)))):r.value0 instanceof wi&&r.value0.value3 instanceof gt?(c=!0,t(r.value1)(new gt(r.value0.value0,r.value0.value1,r.value0.value2,new rt(r.value0.value3.value0,r.value0.value3.value1,r.value0.value3.value2,r.value0.value3.value3),r.value0.value3.value4,r.value0.value3.value5,new rt(r.value0.value3.value6,r.value0.value4,r.value0.value5,d)))):(c=!0,gi("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[r.constructor.name])}for(;!c;)f=l(i,o);return f}},u=function(s){return function(o){var i=s,c=!1,f;function l(r,d){if(d instanceof rt&&d.value0 instanceof Je&&d.value3 instanceof Je)return c=!0,v(r)(Je.value);if(d instanceof rt){i=new Ie(new ya(d.value0,d.value1,d.value2),r),o=d.value3;return}if(d instanceof gt&&d.value0 instanceof Je&&d.value3 instanceof Je&&d.value6 instanceof Je)return c=!0,v(new Ie(new ya(Je.value,d.value1,d.value2),r))(Je.value);if(d instanceof gt){i=new Ie(new wi(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),r),o=d.value6;return}return c=!0,gi("The impossible happened in partial function `removeMaxNode`.")}for(;!c;)f=l(i,o);return f}},a=function(s){var o=!1,i;function c(f){if(f instanceof rt&&f.value3 instanceof Je)return o=!0,{key:f.value1,value:f.value2};if(f instanceof rt){s=f.value3;return}if(f instanceof gt&&f.value6 instanceof Je)return o=!0,{key:f.value4,value:f.value5};if(f instanceof gt){s=f.value6;return}return o=!0,gi("The impossible happened in partial function `maxNode`.")}for(;!o;)i=c(s);return i},p=function(s){return function(o){var i=s,c=!1,f;function l(r,d){if(d instanceof Je)return c=!0,J.value;if(d instanceof rt){var _=n(h)(d.value1);if(d.value3 instanceof Je&&_ instanceof xe)return c=!0,new z(new te(d.value2,v(r)(Je.value)));if(_ instanceof xe){var m=a(d.value0);return c=!0,new z(new te(d.value2,u(new Ie(new bi(m.key,m.value,d.value3),r))(d.value0)))}if(_ instanceof le){i=new Ie(new bi(d.value1,d.value2,d.value3),r),o=d.value0;return}i=new Ie(new ya(d.value0,d.value1,d.value2),r),o=d.value3;return}if(d instanceof gt){var y=function(){return d.value0 instanceof Je&&d.value3 instanceof Je&&d.value6 instanceof Je}(),_=n(h)(d.value4),b=n(h)(d.value1);if(y&&b instanceof xe)return c=!0,new z(new te(d.value2,t(r)(new rt(Je.value,d.value4,d.value5,Je.value))));if(y&&_ instanceof xe)return c=!0,new z(new te(d.value5,t(r)(new rt(Je.value,d.value1,d.value2,Je.value))));if(b instanceof xe){var m=a(d.value0);return c=!0,new z(new te(d.value2,u(new Ie(new Ci(m.key,m.value,d.value3,d.value4,d.value5,d.value6),r))(d.value0)))}if(_ instanceof xe){var m=a(d.value3);return c=!0,new z(new te(d.value5,u(new Ie(new qo(d.value0,d.value1,d.value2,m.key,m.value,d.value6),r))(d.value3)))}if(b instanceof le){i=new Ie(new Ci(d.value1,d.value2,d.value3,d.value4,d.value5,d.value6),r),o=d.value0;return}if(b instanceof pe&&_ instanceof le){i=new Ie(new qo(d.value0,d.value1,d.value2,d.value4,d.value5,d.value6),r),o=d.value3;return}i=new Ie(new wi(d.value0,d.value1,d.value2,d.value3,d.value4,d.value5),r),o=d.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[d.constructor.name])}for(;!c;)f=l(i,o);return f}};return p(Qe.value)}},Ln={foldr:function(e){return function(t){return function(n){if(n instanceof Je)return t;if(n instanceof rt)return $t(Ln)(e)(e(n.value2)($t(Ln)(e)(t)(n.value3)))(n.value0);if(n instanceof gt)return $t(Ln)(e)(e(n.value2)($t(Ln)(e)(e(n.value5)($t(Ln)(e)(t)(n.value6)))(n.value3)))(n.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Je)return t;if(n instanceof rt)return xt(Ln)(e)(e(xt(Ln)(e)(t)(n.value0))(n.value2))(n.value3);if(n instanceof gt)return xt(Ln)(e)(e(xt(Ln)(e)(e(xt(Ln)(e)(t)(n.value0))(n.value2))(n.value3))(n.value5))(n.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[n.constructor.name])}}},foldMap:function(e){var t=ot(e),n=me(e.Semigroup0());return function(h){return function(v){if(v instanceof Je)return t;if(v instanceof rt)return n(Ht(Ln)(e)(h)(v.value0))(n(h(v.value2))(Ht(Ln)(e)(h)(v.value3)));if(v instanceof gt)return n(Ht(Ln)(e)(h)(v.value0))(n(h(v.value2))(n(Ht(Ln)(e)(h)(v.value3))(n(h(v.value5))(Ht(Ln)(e)(h)(v.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[v.constructor.name])}}}};var vo=function(){return Je.value}(),Mm=function(e){var t=_o(e);return function(n){return xt(n)(function(h){return function(v){return t(v.value0)(v.value1)(h)}})(vo)}};var dp=function(e){var t=Tm(e);return function(n){return function(h){return nt(h)(Zt)(t(n)(h))}}};var Lm=function(e){var t=Da(e),n=dp(e),h=_o(e);return function(v){return function(u){return function(a){var p=v(t(u)(a));if(p instanceof J)return n(u)(a);if(p instanceof z)return h(u)(p.value0)(a);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[p.constructor.name])}}}};var NO=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}();var pp=function(e){return NO.create(Ne(e.Eq0()))(Te(e))},BO={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},wE={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return BO}};var Am=mu(jt)(wE);var qO=Tm(Am),zO=Da(Am),VO=_o(Am);var hp=function(){return function(e){var t=En(e);return function(n){var h=pp(n);return function(v){return function(u){return function(a){return qO(new te(t(v),h(u)))(a)}}}}}},_p=function(){return function(e){var t=En(e);return function(n){var h=pp(n);return function(v){return function(u){return function(a){return zO(new te(t(v),h(u)))(a)}}}}}},vp=function(){return function(e){var t=En(e);return function(n){var h=pp(n);return function(v){return function(u){return function(a){return function(p){return VO(new te(t(v),h(u)))(a)(p)}}}}}}},mp=function(e){var t=kt(e)(Ln);return function(n){return function(h){return t(function(v){return h(v)})(n)}}},Si=vo;var gp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ou=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function SE(e,t,n){return e==null?t:n(e)}function xm(e){return e}var mo=nt(null)(xm),Qt=function(e){return SE(e,J.value,z.create)};var un=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),xl=ee,hr=function(e,t){return e.value2(e.value1,t)},sn=ee,_r=function(e){return e.value3(e.value1)},qn=xl(function(e){return e.value0});var EE=V(Tt),l2=V(ha);var Ei=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ca=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),Ti=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}(),Mi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),f2=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),TE=function(e){return function(t){return e(t)}};var d2=ee;var p2={bimap:function(e){return function(t){return TE(function(n){return d2(new f2(function(h){return e(n.value0(h))},function(h){return t(n.value1(h))},n.value2))})}}},h2=Ar(p2);var Hu=TE(function(e){var t=function(n){if(n instanceof Ei)return new Ei(n.value0);if(n instanceof Ca)return new Ca(n.value0,n.value1,e.value0(n.value2),EE(t)(n.value3));if(n instanceof Ti)return new Ti(n.value0,n.value1,e.value0(n.value2),EE(l2(t))(n.value3));if(n instanceof Mi)return new Mi(e.value1(n.value0));if(n instanceof wa)return new wa(h2(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function Pu(e,t){return t[e]}function Rm(e,t){return t.hasOwnProperty(e)}function Sa(e,t,n){n[e]=t}function $m(e,t){for(var n=[],h=0;h<e.length;h++)n.push(t(h,e[h]));return n}function km(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Om(e,t){for(var n=Object.keys(e),h=0;h<n.length;h++){var v=n[h];t(v,e[v])}}function Hm(e,t,n,h,v){for(var u=[],a=e.length,p=t.length,s=0;;){if(s<a)s<p?u.push(n(s,e[s],t[s])):h(s,e[s]);else if(s<p)u.push(v(s,t[s]));else break;s++}return u}function Il(e,t,n){for(var h={},v=0;v<e.length;v++){var u=e[v],a=t(u);h[a]=n(a,v,u)}return h}function Rl(e,t,n,h,v,u){for(var a={},p=0;p<t.length;p++){var s=t[p],o=n(s);e.hasOwnProperty(o)?a[o]=h(o,p,e[o],s):a[o]=u(o,p,s)}for(var o in e)o in a||v(o,e[o]);return a}function Nu(e,t){return e===t}function Pm(e,t){return t.createTextNode(e)}function Nm(e,t){t.textContent=e}function Dp(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Li(e,t,n){var h=n.childNodes.item(e)||null;h!==t&&n.insertBefore(t,h)}function $l(e,t){t&&e.parentNode===t&&t.removeChild(e)}function kl(e){return e.parentNode}function bp(e,t,n,h){e!=null?h.setAttributeNS(e,t,n):h.setAttribute(t,n)}function Cp(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function Bm(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function Wm(e,t,n){n.addEventListener(e,t,!1)}function Um(e,t,n){n.removeEventListener(e,t,!1)}var qm=void 0;var Ol=function(){return{}};function zm(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var Vm=Pu,Gm=ee,jm=Sa,Jm=Ol;var wp=function(e){return function(t){return t[e]}},y2=wp("namespaceURI"),D2=wp("prefix"),b2=wp("localName"),C2=wp("tagName");var Sp=function(e){return function(t){return function(){return t[e]}}},S2=Sp("children"),E2=Sp("firstElementChild"),T2=Sp("lastElementChild"),M2=Sp("childElementCount");function LE(e){return function(t){return function(){return t.querySelector(e)}}}var F2=V(ze);var FE=function(e){var t=F2(Qt),n=LE(e);return function(h){return t(n(h))}};var Qm=ee;var Hl=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}};var Xm=function(e){return _r(e.widget)},Ym=Hl("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof wa)return Ym(291)(e,Hu(t.value0));if(t instanceof Mi){var n=hr(e.widget,t.value0),h=xl(function(v){return sn(new un(v.value0,{build:e.build,widget:n},Ym(296),Xm))})(n);return h}return Xm(e),e.build(t)}}),k2=Ym(286),Ep=function(e){var t=kl(e.node);return $l(e.node,t)},Tp=Hl("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof wa)return Tp(82)(e,Hu(t.value0));if(t instanceof Ei){if(e.value===t.value0)return sn(new un(e.node,e,Tp(85),Ep));if(_n){var n={build:e.build,node:e.node,value:t.value0};return Nm(t.value0,e.node),sn(new un(e.node,n,Tp(89),Ep))}}return Ep(e),e.build(t)}}),O2=Tp(77),Mp=function(e){var t=kl(e.node);return $l(e.node,t),Om(e.children,function(n,h){return _r(h)}),_r(e.attrs)},Lp=function(e){var t=kl(e.node);return $l(e.node,t),km(e.children,_r),_r(e.attrs)},AE=function(e,t,n,h){var v=t===h;return v?e instanceof z&&n instanceof z&&e.value0===n.value0||e instanceof J&&n instanceof J:!1},Fp=Hl("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof wa)return Fp(135)(e,Hu(t.value0));if(t instanceof Ca&&AE(e.ns,e.name,t.value0,t.value1)){var n=$r(t.value3),h=$r(e.children);if(h===0&&n===0){var s=hr(e.attrs,t.value2),o={build:e.build,node:e.node,attrs:s,ns:t.value0,name:t.value1,children:e.children};return sn(new un(e.node,o,Fp(149),Lp))}var v=function(i,c){return _r(c)},u=function(i,c,f){var l=hr(c,f);return Li(i,qn(l),e.node),l},a=function(i,c){var f=e.build(c);return Li(i,qn(f),e.node),f},p=Hm(e.children,t.value3,u,v,a),s=hr(e.attrs,t.value2),o={build:e.build,node:e.node,attrs:s,ns:t.value0,name:t.value1,children:p};return sn(new un(e.node,o,Fp(172),Lp))}return Lp(e),e.build(t)}}),H2=Fp(130),Ap=Hl("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof wa)return Ap(222)(e,Hu(t.value0));if(t instanceof Ti&&AE(e.ns,e.name,t.value0,t.value1)){var n=$r(t.value3);if(e.length===0&&n===0){var p=hr(e.attrs,t.value2),s={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:e.children,length:0};return sn(new un(e.node,s,Ap(237),Mp))}var h=function(o,i){return _r(i)},v=function(o,i,c,f){var l=hr(c,f.value1);return Li(i,qn(l),e.node),l},u=function(o,i,c){var f=e.build(c.value1);return Li(i,qn(f),e.node),f},a=Rl(e.children,t.value3,xn,v,h,u),p=hr(e.attrs,t.value2),s={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:a,length:n};return sn(new un(e.node,s,Ap(261),Mp))}return Mp(e),e.build(t)}}),P2=Ap(217),N2=function(e,t,n){var h=e.buildWidget(e)(n),v=xl(function(u){return sn(new un(u.value0,{build:t,widget:h},k2,Xm))})(h);return v},B2=function(e,t,n){var h=Pm(n,e.document),v={build:t,node:h,value:n};return sn(new un(h,v,O2,Ep))},W2=function(e,t,n,h,v,u){var a=Dp(mo(n),h,e.document),p=Qm(a),s=function(f,l,r){var d=t(r.value1);return Li(l,qn(d),p),d},o=Il(u,xn,s),i=e.buildAttributes(a)(v),c={build:t,node:p,attrs:i,ns:n,name:h,children:o,length:$r(u)};return sn(new un(p,c,P2,Mp))},U2=function(e,t,n,h,v,u){var a=Dp(mo(n),h,e.document),p=Qm(a),s=function(f,l){var r=t(l);return Li(f,qn(r),p),r},o=$m(u,s),i=e.buildAttributes(a)(v),c={build:t,node:p,attrs:i,ns:n,name:h,children:o};return sn(new un(p,c,H2,Lp))},Pl=function(e){var t=Hl("build","Halogen.VDom.DOM",function(){return function(h){if(h instanceof Ei)return B2(e,t(59),h.value0);if(h instanceof Ca)return U2(e,t(60),h.value0,h.value1,h.value2,h.value3);if(h instanceof Ti)return W2(e,t(61),h.value0,h.value1,h.value2,h.value3);if(h instanceof Mi)return N2(e,t(62),h.value0);if(h instanceof wa)return t(63)(Hu(h.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[h.constructor.name])}}),n=t(58);return n};function xp(e){return typeof e}function Ip(e){return Object.prototype.toString.call(e).slice(8,-1)}function Nl(e){return e===void 0}var IE=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var Rp=function(){var e=Fd(VC);return function(t){return Av(e(t))}}();var RE=function(e){return function(t){return new Wn(e,new Ie(t.value0,t.value1))}};var tg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Bu=ee,kp=ee;var ng=function(e){var t=or(LS(e));return function(n){return t(Rp(n))}};var rg=function(e){var t=Z(Dl(e)),n=ng(e);return function(h){return function(v){if(Ip(v)===h)return t(kp(v));if(_n)return n(new tg(h,Ip(v)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[h.constructor.name,v.constructor.name])}}};var Op=function(e){return rg(e)("String")};function og(e){return e()}function kE(e){return function(t){return function(n){return function(h){var v=n;function u(p){return function(s){return t(s)(p)(h[p])}}for(var a in h)hasOwnProperty.call(h,a)&&(v=e(v)(u(a)));return v}}}}function OE(e,t,n,h){return n in h?t(h[n]):e}function ag(e){return function(t){var n=[];for(var h in t)hasOwnProperty.call(t,h)&&n.push(e(h)(t[h]));return n}}var j2=Object.keys||ag(function(e){return function(){return e}});var ig=function(e){return function(t){return function(n){return function(h){return function(v){return e(t,n,h,v)}}}}};var eH=At(Wd);var Hp=function(){return ig(OE)(J.value)(z.create)}();var Bl=function(e){var t=zd(e);return function(n){return og(function(){var v=Ol();return Bd(t(n))(function(u){return eH(zm(u.value0)(u.value1)(v))})(),v})}};var tH=kE(Db),HE=function(e){var t=me(e.Semigroup0()),n=ot(e);return function(h){return tH(function(v){return function(u){return function(a){return t(v)(h(u)(a))}}})(n)}};function Wl(e){return function(){return function(t){return e(t)()}}}function cg(e){return function(t){return function(n){return function(h){return function(){return h.addEventListener(e,t,n)}}}}}function lg(e){return function(t){return function(n){return function(h){return function(){return h.removeEventListener(e,t,n)}}}}}var nH=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}};var dg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ea=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),Ai=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rH=Pu,fg=Sa,oH=function(e,t){var n=Bm(null,e,t);if(n)return Cp(null,e,t);var h=xp(Pu(e,t));return h==="string"?Sa(e,"",t):e==="rowSpan"?Sa(e,1,t):e==="colSpan"?Sa(e,1,t):Sa(e,qm,t)},NE=function(e){if(e instanceof Ea&&e.value0 instanceof z)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Ea)return"attr/:"+e.value1;if(e instanceof Ai)return"prop/"+e.value0;if(e instanceof xi)return"handler/"+e.value0;if(e instanceof Wu)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},BE=ee;var WE=function(e){return function(t){var n=function(i){return function(c,f){if(f instanceof Ea)return Cp(mo(f.value0),f.value1,t);if(f instanceof Ai)return oH(f.value0,t);if(f instanceof xi){var l=Vm(f.value0,i);return Um(f.value0,xn(l),t)}if(f instanceof Wu)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[f.constructor.name])}},h=function(i){return i instanceof z?e(i.value0)():void 0},v=function(i){var c=Hp("ref")(i.props);return c instanceof z&&c.value0 instanceof Wu?h(c.value0.value0(new pg(t))):void 0},u=function(i,c){return function(f,l,r,d){if(r instanceof Ea&&d instanceof Ea){var _=r.value2===d.value2;return _||bp(mo(d.value0),d.value1,d.value2,t),d}if(r instanceof Ai&&d instanceof Ai){var m=Nu(r.value1,d.value1);if(m)return d;if(d.value0==="value"){var y=rH("value",t),b=Nu(y,d.value1);return b||fg(d.value0,d.value1,t),d}return fg(d.value0,d.value1,t),d}if(r instanceof xi&&d instanceof xi){var S=Vm(d.value0,i);return Rt(d.value1)(Zt(S))(),jm(d.value0,S,c),d}return d}},a=function(i){return function(c,f,l){if(l instanceof Ea)return bp(mo(l.value0),l.value1,l.value2,t),l;if(l instanceof Ai)return fg(l.value0,l.value1,t),l;if(l instanceof xi){var r=Pu(l.value0,i);if(Rm(l.value0,i))return Rt(l.value1)(Zt(r))(),l;var d=Xt(l.value1)(),_=Wl(function(m){return function(){var b=je(d)();return h(b(m))}})();return jm(l.value0,new te(_,d),i),Wm(l.value0,_,t),l}if(l instanceof Wu)return h(l.value0(new dg(t))),l;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[l.constructor.name])}},p=nH("patchProp","Halogen.VDom.DOM.Prop",function(){return function(i,c){var f=Jm(),l=n(i.events),r=u(i.events,f),d=a(f),_=Rl(i.props,c,NE,r,l,d),m={events:Gm(f),props:_};return sn(new un(void 0,m,p(100),v))}}),s=p(87),o=function(i){var c=Jm(),f=Il(i,NE,a(c)),l={events:Gm(c),props:f};return sn(new un(void 0,l,s,v))};return o}};var _g=function(e){return e},VE=function(e){return _g(Mi.create(e))},uH=function(e){return e.toPropValue},Ii=function(e){return _g(Ei.create(e))},GE=function(e){return new Wu(function(t){return e(function(n){if(n instanceof dg)return new z(n.value0);if(n instanceof pg)return J.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},jE=function(e){var t=uH(e);return function(n){var h=Ai.create(n);return function(v){return h(t(v))}}};var vg={toPropValue:function(){var e=on();return function(t){return BE(e(t))}}()};var mg=function(){return xi.create}(),JE=function(e){return function(t){return function(n){return function(h){return new Ca(e,t,n,h)}}}};var KE=function(e){return function(t){return Ea.create(e)(t)}};var sH=De(be);var Pp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),QE=function(e){return function(t){return new yg(e,t)}},XE=function(){return gg.create}(),YE=function(e){var t=Z(e);return function(n){return function(h){return function(v){return function(u){return function(a){if(u instanceof Pp)return new te(new Ie({func:t(u.value0),count:a},n),h);if(u instanceof gg)return new te(new Ie({func:v(u.value0),count:a},n),h);if(u instanceof yg)return YE(e)(n)(RE(u.value1)(h))(v)(u.value0)(a+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[u.constructor.name])}}}}}},ZE=function(e){var t=ut(e.Apply0());return function(n){return function(h){return function(v){if(n instanceof Qe)return new Be(v);if(n instanceof Ie){var u=t(n.value0.func)(v),a=n.value0.count===1;if(a)return n.value1 instanceof Qe?new Be(u):ZE(e)(n.value1)(h)(u);if(h instanceof Qe)return new Be(u);if(h instanceof Ie)return new ke(new te(new Ie({func:u,count:n.value0.count-1|0},n.value1),new Wn(h.value0,h.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[h.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},eT={map:function(e){return function(t){return QE(new Pp(e))(t)}}},tT=function(e){var t=ZE(e),n=Z(e),h=YE(e);return function(v){return function(u){var a=function(p){var s=!1,o;function i(c){if(c.value1.value0 instanceof Pp){var f=t(c.value0)(c.value1.value1)(n(c.value1.value0.value0));if(f instanceof Be)return s=!0,f.value0;if(f instanceof ke){p=f.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[f.constructor.name])}if(c.value1.value0 instanceof gg){var f=t(c.value0)(c.value1.value1)(v(c.value1.value0.value0));if(f instanceof Be)return s=!0,f.value0;if(f instanceof ke){p=f.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[f.constructor.name])}if(c.value1.value0 instanceof yg){var l=new Wn(c.value1.value0.value1,c.value1.value1);p=h(c.value0)(l)(v)(c.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[c.value1.value0.constructor.name])}for(;!s;)o=i(p);return o};return a(new te(Qe.value,Rp(u)))}}},nT=function(e){return tT(e)(sH)},rT={apply:function(e){return function(t){return QE(e)(t)}},Functor0:function(){return eT}},oT=function(){return{pure:Pp.create,Apply0:function(){return rT}}}(),cH=tT(oT),Dg=function(e){return cH(function(t){return XE(e(t))})};var iT=function(){function e(t,n,h){this.value0=t,this.value1=n,this.value2=h}return e.create=function(t){return function(n){return function(h){return new e(t,n,h)}}},e}(),uT=ee,sT=ee;function bg(e){return function(t){return e===t}}var Zs=bg;var pH=At(ze);var hH=de(Mr);var _H=me(Gt),vH=kt(Kt),mH=vH(wt);var Np=function(e){return e},lT=function(e){return function(t){return e(function(n){return pH(t(n))})}};var vr=function(e){return function(t){return e(t)}};var mr=function(){var t=Xt([])();return{emitter:function(n){return function(){return Lr(function(v){return _H(v)([n])})(t)(),Lr(qv(Zs)(n))(t)}},listener:function(n){return hH(je(t))(mH(function(h){return h(n)}))}}};var wg=De(be);var gH=_p();var fT=function(e){return e},dT=function(e){return e},Ul=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ql=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Vl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Up=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Vp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Gl=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ec=function(e){return e};var gr=function(e){return bt(new ql(function(t){return e},wg))};var Vo=function(e){return bt(new Vl(e,void 0))};var qu=function(){return function(e){var t=gH(e);return function(n){var h=t(n);return function(v){return function(u){return function(a){return bt(new zl(sT(new iT(function(p){var s=Z(p);return function(o){var i=nt(s(J.value))(o),c=h(v)(u);return function(f){return i(c(f))}}},a,wg))))}}}}}},Sg=An,Gp=An;var pT={lift:function(e){return function(t){return ec(bt(Uu.create(t)))}}},zu=sl,no={state:function(e){return ec(bt(Ul.create(e)))},Monad0:function(){return zu}};var Ta=function(e){return{liftEffect:function(){var t=Ze(e);return function(n){return ec(bt(Uu.create(t(n))))}}(),Monad0:function(){return zu}}};var jp=function(e){var t=Ta(e.MonadEffect0());return{liftAff:function(){var n=ar(e);return function(h){return ec(bt(Uu.create(n(h))))}}(),MonadEffect0:function(){return t}}};var Vu=function(e){return bt(new Gl(e,wg))},Ma=ci;var go=tr,yH=de(go);var Go=Ir,DH=Z(Go),Eg={tailRecM:function(e){return function(t){return yH(e(t))(function(n){if(n instanceof ln)return Qn(Eg)(e)(n.value0);if(n instanceof Yt)return DH(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return zu}};var tc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),oc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ac=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var bH=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}};var CH=function(e,t){return Nu(e.value0,t.value0)&&Nu(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var hT=function(e){return e.value2(e.value3)};var _T=function(e){var t=function(u){return _r(u.vdom)},n=bH("patchThunk","Halogen.VDom.Thunk",function(){return function(u,a){var p=CH(u.thunk,a);if(p)return sn(new un(qn(u.vdom),u,n(112),t));var s=hr(u.vdom,e(hT(a)));return sn(new un(qn(s),{vdom:s,thunk:a},n(115),t))}}),h=n(108),v=function(u){return function(a){var p=Pl(u)(e(hT(a)));return sn(new un(qn(p),{thunk:a,vdom:p},h,t))}};return v};var Jp=bs(Ma),Lg=kt(Go)(pn),wH=V(Ma);var vT=Z(Go),SH=_p(),EH=hp(),TH=vp(),jl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Kp=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fg=ee,Ag=ee,La=function(e){return function(t){if(t instanceof tc)return Jp(Lg(e.handleAction)(e.initialize))(t.value0);if(t instanceof nc)return Jp(Lg(e.handleAction)(e.finalize))(t.value0);if(t instanceof rc)return Jp(Lg(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof oc)return Jp(e.handleAction(t.value0))(t.value1);if(t instanceof ac)return gE(function(n){var h=wH(nt(t.value1(void 0))(n));return function(v){return h(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},MH=ee,Fa=ee;var yr=function(){return{handleAction:Se(vT(void 0)),handleQuery:Se(vT(J.value)),receive:Se(J.value),initialize:J.value,finalize:J.value}}(),xg=function(){return function(e){var t=SH(e),n=EH(e),h=TH(e);return function(v){var u=t(v),a=n(v),p=h(v);return function(s){return function(o){return function(i){return function(c){return function(f){return MH({get:u(s)(o),pop:a(s)(o),set:p(s)(o),component:i,input:c,output:f})}}}}}}}};var Qp=function(){return JE(J.value)}();var Ig=Qp("style");var ju=Qp("div"),ki=ju([]);var ic=Qp("button");var FH=on();var Rg=function(e){return FH(Xv(e))};function uc(e){return function(){return e.stopPropagation()}}var kg="DOMContentLoaded";var bT="click";var VH=ee;var GH=function(e){return function(t){return mg(e)(function(n){return new z(new Ou(t(n)))})}};var Kl=function(){var e=GH(bT);return function(t){return e(VH(t))}}();var Ql=ee;var ST=zt(Vt)(go),JH=Os(no),KH=Z(Go),QH=De(be),ET=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XH=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YH=function(e){return function(t){return ic([Kl(function(n){return XH.create(Ql(n))})])([Ii(t)])}},ZH=function(e){return function(t){return ST(JH(t.value0))(function(){return KH(new z(t.value1))})}},eP=function(e){var t=Ze(Ta(e.MonadEffect0()));return function(n){return ST(t(uc(n.value0)))(function(){return Vo(void 0)})}},TT=function(e){return Fa({initialState:QH,render:YH(e),eval:La({handleAction:eP(e),handleQuery:ZH(e),receive:yr.receive,initialize:yr.initialize,finalize:yr.finalize})})};var Zp=ra(Yp(),1);function LT(e,t){return function(){return t.edit(e)}}var FT=function(e){return function(t){return LT(e,t)}};var oP=ra(Yp(),1);function AT(e,t){return function(){return t.setValue(e)}}function Og(e){return function(){return e.getValue()}}var IT=function(e){return function(t){return AT(e,t)}};var uP=ra(Yp(),1);function ae(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function eh(e){return function(t){return function(){return t[e]}}}function sP(e){return function(t,n){return function(){n[e]=t}}}var cP=eh("text"),lP=sP("text"),fP=eh("renderer"),dP=eh("inMultiSelectMode"),pP=ae("selectMoreLines"),hP=eh("container"),_P=ae("setKeyboardHandler"),vP=ae("getKeyboardHandler"),mP=ae("setSession"),Hg=ae("getSession"),gP=ae("setValue"),yP=ae("getValue"),DP=ae("getSelection"),bP=ae("resize"),CP=ae("setTheme"),wP=ae("getTheme"),SP=ae("setStyle"),EP=ae("unsetStyle"),TP=ae("setFontSize"),MP=ae("focus"),LP=ae("isFocused"),FP=ae("blur"),AP=ae("getCopyText"),xP=ae("insert"),IP=ae("setOverwrite"),RP=ae("getOverwrite"),$P=ae("toggleOverwrite"),kP=ae("setScrollSpeed"),OP=ae("getScrollSpeed"),HP=ae("setDragDelay"),PP=ae("getDragDelay"),NP=ae("setSelectionStyle"),BP=ae("getSelectionStyle"),WP=ae("setHighlightActiveLine"),UP=ae("getHighlightActiveLine"),qP=ae("setHighlightSelectedWord"),zP=ae("getHighlightSelectedWord"),VP=ae("setShowInvisibles"),GP=ae("getShowInvisibles"),jP=ae("setShowPrintMargin"),JP=ae("getShowPrintMargin"),KP=ae("setPrintMarginColumn"),QP=ae("getPrintMarginColumn"),XP=ae("setReadOnly"),YP=ae("getReadOnly"),ZP=ae("setBehavioursEnabled"),eN=ae("getBehavioursEnabled"),tN=ae("setWrapBehavioursEnabled"),nN=ae("getWrapBehavioursEnabled"),rN=ae("setShowFoldWidgets"),oN=ae("getShowFoldWidgets"),aN=ae("remove"),iN=ae("removeWordRight"),uN=ae("removeWordLeft"),sN=ae("removeToLineStart"),cN=ae("removeToLineEnd"),lN=ae("splitLine"),fN=ae("transposeLetters"),dN=ae("toLowerCase"),pN=ae("toUpperCase"),hN=ae("indent"),_N=ae("blockIndent"),vN=ae("blockOutdent"),mN=ae("toggleCommentLines"),gN=ae("getNumberAt"),yN=ae("modifyNumber"),DN=ae("removeLines"),bN=ae("moveLinesDown"),CN=ae("moveLinesUp"),wN=ae("copyLinesUp"),SN=ae("copyLinesDown"),EN=ae("getFirstVisibleRow"),TN=ae("getLastVisibleRow"),MN=ae("isRowVisible"),LN=ae("isRowFullyVisible"),FN=ae("selectPageDown"),AN=ae("selectPageUp"),xN=ae("gotoPageDown"),IN=ae("gotoPageUp"),RN=ae("scrollPageDown"),$N=ae("scrollPageUp"),kN=ae("scrollToRow"),ON=ae("scrollToLine"),HN=ae("centerSelection"),PN=ae("getCursorPosition"),NN=ae("getCursorPositionScreen"),BN=ae("getSelectionRange"),WN=ae("selectAll"),UN=ae("clearSelection"),qN=ae("moveCursorTo"),zN=ae("moveCursorToPosition"),VN=ae("jumpToMatching"),GN=ae("gotoLine"),jN=ae("navigateTo"),JN=ae("navigateUp"),KN=ae("navigateDown"),QN=ae("navigateLeft"),XN=ae("navigateRight"),YN=ae("navigateLineStart"),ZN=ae("navigateLineEnd"),e5=ae("navigateFileEnd"),t5=ae("navigateFileStart"),n5=ae("navigateWordRight"),r5=ae("navigateWordLeft"),o5=ae("replace"),a5=ae("replaceAll"),i5=ae("getLastSearchOptions"),u5=ae("find"),s5=ae("findNext"),c5=ae("findPrevious"),l5=ae("undo"),f5=ae("redo"),d5=ae("destroy");var RT={fromString:De(be)},St=function(e){return e.fromString};var _5=function(){function e(a){this.fn=a}var t={},n=function(a,p){this.head=a,this.tail=p};function h(a){return new n(a,t)}function v(a){return function(p){return new n(a,p)}}function u(a){for(var p=[],s=a;s!==t;)p.push(s.head),s=s.tail;return p}return function(a){return function(p){return function(s){var o=function(c,f){return a(p(v)(s(c)))(f)},i=function(c,f,l){if(f===0)return c;var r=l[f-1];return new e(function(){var d=i(o(r,c),f-1,l);return d})};return function(c){for(var f=p(h)(s(c[c.length-1])),l=i(f,c.length-1,c);l instanceof e;)l=l.fn();return p(u)(l)}}}}}();var Ng=Vb(Es);var kT=Me(so);var w5=function(){function e(t,n,h,v){this.value0=t,this.value1=n,this.value2=h,this.value3=v}return e.create=function(t){return function(n){return function(h){return function(v){return new e(t,n,h,v)}}}},e}();var S5=function(e){return function(t){return function(n){return function(h){var v=Ng(0)(1)(t),u=Ng(0)(1)(n),a=Ng(0)(1)(h);return new w5(e,v,u,a)}}}};var OT=function(e){return function(t){return function(n){return S5(e)(t)(n)(1)}}},HT=OT(0)(0)(1);var PT=function(e){var t=function(p){return kT(Lu(nS(100*p))/100)},n=t(e.value1*100)+"%",h=t(e.value2*100)+"%",v=t(e.value0),u=kT(e.value3),a=e.value3===1;return a?"hsl("+(v+(", "+(n+(", "+(h+")"))))):"hsla("+(v+(", "+(n+(", "+(h+(", "+(u+")")))))))};var Bg=OT(0)(0)(0);var NT=V(Tt),BT=Eu(Xr),E5=me(Gt),T5=wd(wt)(Zn);var ir=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ur=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),M5=function(e){return e};var L5=function(e){return e},jo=function(e){return e.value};var sc={append:function(e){return function(t){if(e instanceof ur&&t instanceof ur)return new ur(e.value0+t.value0);if(e instanceof ur&&t instanceof ir)return new ir(NT(BT(function(n){return e.value0+n}))(t.value0));if(e instanceof ir&&t instanceof ur)return new ir(NT(BT(function(n){return t.value0+n}))(e.value0));if(e instanceof ir&&t instanceof ir)return new ir(E5(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},F5=me(sc),Wg={append:function(e){return function(t){return F5(e)(t)}}},WT=me(Wg);var Xl=function(e){if(e instanceof ir)return Cn("")(T5("")(e.value0));if(e instanceof ur)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var nh=function(){return{fromString:ur.create}}(),UT=St(nh),zn={fromString:function(e){return M5(UT(e))}},rh=St(zn);var Yl={value:function(e){return rh(PT(e))}};var Ju={value:function(){var e=Me(so);return function(t){return rh(e(t))}}()},Oi={value:rh},cc=function(e){var t=jo(e);return function(n){var h=jo(n);return{value:function(v){return WT(t(v.value0))(WT(rh(" "))(h(v.value1)))}}}};var Fn={fromString:function(e){return L5(UT(e))}};var qT=function(e){return e};var Zl=function(){return new ir([new te("-webkit-",""),new te("-moz-",""),new te("-ms-",""),new te("-o-",""),new te("","")])}();var A5=me(Gt),zT=Z(Cs),x5=Ne(Fo(Zn)),Vn=Te(jt),I5=Te(Ya(jt)),Hi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Aa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ni=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Bi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ui=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),VT=function(e){return e},oh=function(){function e(){}return e.value=new e,e}(),Ug=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jT=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),at=function(e){return function(t){return new tf(A5(e.value0)(t),e.value1)}},Lt=function(){return new tf([],oh.value)}(),JT=function(e){return VT(zT(xa.create(e)))};var R5={eq:function(e){return function(t){return e instanceof Hi&&t instanceof Hi||e instanceof Aa&&t instanceof Aa||e instanceof Pi&&t instanceof Pi?e.value0===t.value0:e instanceof Ni&&t instanceof Ni||e instanceof Bi&&t instanceof Bi||e instanceof Wi&&t instanceof Wi||e instanceof Ui&&t instanceof Ui||e instanceof qi&&t instanceof qi||e instanceof zi&&t instanceof zi?e.value0===t.value0&&e.value1===t.value1:e instanceof xa&&t instanceof xa?e.value0===t.value0:e instanceof lc&&t instanceof lc?e.value0===t.value0&&x5(e.value1)(t.value1):!1}}};var KT={compare:function(e){return function(t){if(e instanceof Hi&&t instanceof Hi)return Vn(e.value0)(t.value0);if(e instanceof Hi)return le.value;if(t instanceof Hi)return pe.value;if(e instanceof Aa&&t instanceof Aa)return Vn(e.value0)(t.value0);if(e instanceof Aa)return le.value;if(t instanceof Aa)return pe.value;if(e instanceof Pi&&t instanceof Pi)return Vn(e.value0)(t.value0);if(e instanceof Pi)return le.value;if(t instanceof Pi)return pe.value;if(e instanceof Ni&&t instanceof Ni){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof Ni)return le.value;if(t instanceof Ni)return pe.value;if(e instanceof Bi&&t instanceof Bi){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof Bi)return le.value;if(t instanceof Bi)return pe.value;if(e instanceof Wi&&t instanceof Wi){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof Wi)return le.value;if(t instanceof Wi)return pe.value;if(e instanceof Ui&&t instanceof Ui){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof Ui)return le.value;if(t instanceof Ui)return pe.value;if(e instanceof qi&&t instanceof qi){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof qi)return le.value;if(t instanceof qi)return pe.value;if(e instanceof zi&&t instanceof zi){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:Vn(e.value1)(t.value1)}if(e instanceof zi)return le.value;if(t instanceof zi)return pe.value;if(e instanceof xa&&t instanceof xa)return Vn(e.value0)(t.value0);if(e instanceof xa)return le.value;if(t instanceof xa)return pe.value;if(e instanceof lc&&t instanceof lc){var n=Vn(e.value0)(t.value0);return n instanceof le?le.value:n instanceof pe?pe.value:I5(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return R5}};var ah=function(e){return new tf([],new Ug(e))},Dn=function(e){return function(t){return new tf([],new zg(e,t))}},QT=function(e){return function(t){return new tf([],new qg(e,t))}};var ct=function(e){return VT(zT(Aa.create(e)))};var $5=on();var k5=function(e){return $5(om(e))};var XT=function(e){return Zt(k5(e))};var H5=V(am(fa));var P5=ut(ip(Gt)(dd)),N5=de(im(Gt)(tv));var YT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ZT=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),e1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),t1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gg=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),n1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),r1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),o1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),a1=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var B5=function(e){return e},rf=function(e){return XT(e)},i1=function(){var e=ga(PS(_u)(Vr));return function(t){return B5(e(Bs(t)))}}(),_t=function(e){return function(t){return i1(new jg(new Gg(e),rf(t)))}};var tn=function(e){var t=jo(e);return function(n){return function(h){return i1(new nf(qT(n),t(h)))}}},Jg=function(e){var t=tn(e);return function(n){return t(n)}};var W5={map:function(e){return function(t){return H5(e)(t)}}};var U5={apply:function(e){return function(t){return P5(e)(t)}},Functor0:function(){return W5}},ih={bind:function(e){return function(t){return N5(e)(function(n){return function(h){return h}(t(n))})}},Apply0:function(){return U5}};var uh=St(Fn),fc=St(zn);var Ia=function(){var e=tn(Oi)(uh("z-index")),t=Me(Io);return function(n){return e(t(n))}}();var q5={value:function(e){return e}};var z5={value:function(e){return e}};var sh=fc("relative"),br=tn(q5)(uh("position")),u1=tn(Ju)(uh("opacity"));var s1=fc("inline-block");var c1=fc("flex");var l1=fc("none");var dc=tn(z5)(uh("display"));var f1=fc("block"),yo=fc("absolute");var h1=me(Wg),_1=jo(Ju),v1=St(zn),p1=Me(so),V5=me(sc);var ch=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),G5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),j5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),J5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),K5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Ku=function(e){if(e instanceof ch)return Xl(e.value0);if(e instanceof G5)return Uo(function(t){return Uo(function(n){return"("+(Ku(t)+(" + "+(Ku(n)+")")))})(e.value1)})(e.value0);if(e instanceof j5)return Uo(function(t){return Uo(function(n){return"("+(Ku(t)+(" - "+(Ku(n)+")")))})(e.value1)})(e.value0);if(e instanceof J5)return Uo(function(t){return"("+(p1(e.value0)+(" * "+(Ku(t)+")")))})(e.value1);if(e instanceof K5)return Uo(function(t){return"("+(Ku(t)+(" / "+(p1(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},Ra={value:function(e){return e instanceof ch?e.value0:V5(Zl)(new ur("calc"+Ku(e)))}};var Ft=function(e){return new ch(h1(_1(e))(v1("px")))};var Qg=function(e){return new ch(h1(_1(e))(v1("em")))};var Q5=St(zn);var X5=St(Fn);var Y5={value:function(e){return e}};var m1=Q5("row");var g1=tn(Y5)(X5("flex-direction"));var pc=tn(Ra),Ji=St(Fn),y1=cc(Ra)(Ra),D1=tn(cc(y1)(y1)),of=pc(Ji("width")),Ki=pc(Ji("top")),lh=pc(Ji("right"));var b1=function(e){return function(t){return function(n){return function(h){return D1(Ji("padding"))(new te(new te(e,t),new te(n,h)))}}}};var C1=function(e){return function(t){return function(n){return function(h){return D1(Ji("margin"))(new te(new te(e,t),new te(n,h)))}}}};var Qu=pc(Ji("left")),af=pc(Ji("height")),Xg=pc(Ji("bottom"));function Rn(e){return e}function Yg(e){return JSON.stringify(e)}function S1(e,t,n,h,v,u,a){return a==null?e():typeof a=="boolean"?t(a):typeof a=="number"?n(a):typeof a=="string"?h(a):Object.prototype.toString.call(a)==="[object Array]"?v(a):u(a)}var E1=function(e){return function(t){return function(n){return S1(Se(e),Se(e),Se(e),t,Se(e),Se(e),n)}}};var Zg=Me(ca),nB=Me(Io);var fh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ey=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),T1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ty=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),M1=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ny=function(){function e(){}return e.value=new e,e}(),uf={show:function(e){if(e instanceof fh)return"(TypeMismatch "+(Zg(e.value0)+")");if(e instanceof ey)return"(UnexpectedValue "+(Yg(e.value0)+")");if(e instanceof T1)return"(AtIndex "+(nB(e.value0)+(" "+(Me(uf)(e.value1)+")")));if(e instanceof ty)return"(AtKey "+(Zg(e.value0)+(" "+(Me(uf)(e.value1)+")")));if(e instanceof M1)return"(Named "+(Zg(e.value0)+(" "+(Me(uf)(e.value1)+")")));if(e instanceof ny)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var x1=function(){return E1(new Be(new fh("String")))(ke.create)}();var _c={decodeJson:x1};var ph=function(e){return e.decodeJson};var $1=Rn;var vc={encodeJson:$1};var sf=function(e){return e.encodeJson};var Xce=ra(a0(),1),JW={keyEncoding:"json",valueEncoding:"json"},i0=e=>t=>n=>()=>e.put(t,n),u0=e=>t=>()=>new Promise((h,v)=>{let u=(a,p)=>{h(p)};e.get(t,JW,u)});var s0=e=>t=>()=>e.del(t);var c0=e=>()=>e.keys().all();function _L(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var XW=ed(ze),YW=ot(tE),ZW=De(be),e3=mn(FS(zC)(Vr)),t3=rg(Vr),n3=V(Zd(fa)),r3=Op(Vr),o3=de(yn),a3=Ze(wn),i3=function(e){return function(t){return po(function(n){return XW(YW)(_L(t)(function(h){return n(Be.create(e(h)))()})(function(h){return n(ke.create(h))()}))})}};var u3=function(e){return dn(function(t){return Un("Promise failed, couldn't extract JS Error or String")})(ZW)(Rg(e3(t3("Error")(e))(n3(Un)(r3(e)))))},s3=i3(u3),Ic=function(e){return o3(a3(e))(s3)};var Vh=e=>e===void 0;var mL=Me(uf),gL=de(yn),g3=gn(ii),y3=g3(hu),yL=Ze(wn),l0=Z(eo);var DL=function(e){var t=sf(e);return function(n){return function(h){var v=sf(h);return function(u){return function(a){return function(p){return function(s){return Ic(i0(a.value0)(t(p))(v(s)))}}}}}}};var bL=function(e){var t=sf(e);return function(n){return function(h){return function(v){var u=ph(v);return function(a){return function(p){return gL(Ic(u0(a.value0)(t(p))))(function(s){var o=Vh(s);if(o)return l0(J.value);var i=u(s);if(i instanceof Be)return yL(Yr(Un(mL(i.value0))));if(i instanceof ke)return l0(new z(i.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[i.constructor.name])})}}}}}};var CL=function(e){var t=sf(e);return function(n){return function(h){return function(v){return function(u){return function(a){return Ic(s0(u.value0)(t(a)))}}}}}},wL=function(e){var t=ph(e);return function(n){return function(h){return gL(Ic(c0(h.value0)))(function(v){var u=y3(t)(v);if(u instanceof Be)return yL(Yr(Un(mL(u.value0))));if(u instanceof ke)return l0(u.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[u.constructor.name])})}}};var SL=ra(a0(),1),b3={keyEncoding:"json",valueEncoding:"json"},f0=e=>()=>new SL.Level(e,b3);var E3=V(ze),T3=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var EL=function(e){return E3(T3.create)(f0(e))};var d0=vc,Gh=_c,L3=DL(d0)(Gh)(vc)(_c),F3=bL(d0)(Gh)(vc)(_c),A3=CL(d0)(Gh)(vc)(_c),TL=function(e){return function(t){return function(n){return L3(e)(t)(n)}}},ML=function(e){return function(t){return F3(e)(t)}},Af=EL("filesystem"),LL=wL(Gh)(_c),FL=function(e){return function(t){return A3(e)(t)}};var Zo=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Sr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cr=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var IL=function(e){return e instanceof cr?new z(e.value1):e instanceof Sr?new z(e.value0):J.value},RL=function(e){return e instanceof cr?new z(e.value0):e instanceof Zo?new z(e.value0):J.value};var $L=function(e){var t=me(e);return function(n){var h=me(n);return{append:function(v){return function(u){if(v instanceof Zo&&u instanceof Zo)return new Zo(t(v.value0)(u.value0));if(v instanceof Zo&&u instanceof Sr)return new cr(v.value0,u.value0);if(v instanceof Zo&&u instanceof cr)return new cr(t(v.value0)(u.value0),u.value1);if(v instanceof Sr&&u instanceof Zo)return new cr(u.value0,v.value0);if(v instanceof Sr&&u instanceof Sr)return new Sr(h(v.value0)(u.value0));if(v instanceof Sr&&u instanceof cr)return new cr(u.value0,h(v.value0)(u.value1));if(v instanceof cr&&u instanceof Zo)return new cr(t(v.value0)(u.value0),v.value1);if(v instanceof cr&&u instanceof Sr)return new cr(v.value0,h(v.value1)(u.value0));if(v instanceof cr&&u instanceof cr)return new cr(t(v.value0)(u.value0),h(v.value1)(u.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,u.constructor.name])}}}}};var iu=function(e){return function(){console.log(e)}},jh=function(e){return function(){console.warn(e)}};var z3=me(pu),V3=ot(da),OL=yu(wt),HL=OL(da),Qh=lo(wt)(da),ea=V(Tt),h0=ut(fu),G3=me(Gt),PL=Ht(wt),j3=PL(da),J3=Wv(KT),Xh=V(Mt),K3=St(RT),NL=de(er),Q3=Td(Fv(wt)),BL=V($s(Tt));var X3=wd(wt)(Zn),Y3=de(Ka),Z3=Ad(ll),eU=$o(Jc(jr)),tU=lo(al(wt))(da),nU=Me(so),Yh=function(e){return e},rU=function(e){return e},_0=function(e){return function(t){return function(n){return t+(e+n)}}},oU={append:function(e){return function(t){return e+t}}},aU={append:function(e){return function(t){return e+t}}},WL=$L(oU)(aU),UL=Xb(WL),Kh=PL(UL),iU=OL(UL),xf=me(ev(WL)),kL=function(e){var t=dn(function(n){return V3})(function(n){return HL([n.value0,": ",n.value1])});return Qh("; ")(ea(t)(e))},uU=function(e){if(e instanceof Hi)return"#"+e.value0;if(e instanceof Aa)return"."+e.value0;if(e instanceof Pi)return"["+(e.value0+"]");if(e instanceof Ni)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof Bi)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof Wi)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof Ui)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof qi)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof zi)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof xa)return":"+e.value0;if(e instanceof lc)return":"+(e.value0+("("+(Qh(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},sU=function(e){return function(t){if(e.length===0&&t instanceof oh)return["*"];if(t instanceof oh)return[""];if(t instanceof Ug)return[t.value0];if(t instanceof qg)return h0(ea(_0(" > "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof zg)return h0(ea(_0(" "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof GT)return h0(ea(_0(" + "))(Ua(t.value0)))(Ua(t.value1));if(t instanceof jT)return G3(Ua(t.value0))(Ua(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},Ua=function(e){return ea(function(t){return t+j3(uU)(J3(e.value0))})(sU(e.value0)(e.value1))},cU=function(){var e=Qh(", ");return function(t){return e(Ua(t))}}(),ps=function(e){return e.length===0?J.value:Xh(function(t){return new Wn(t.head,t.tail)})(Ud(e))};var Rc=function(e){if(e.value0 instanceof t1)return nt(e.value0.value0)(function(t){return QT(Rc(t))(e.value0.value0)})(ps(e.value1));if(e.value0 instanceof Gg)return nt(e.value0.value0)(function(t){return Dn(Rc(t))(e.value0.value0)})(ps(e.value1));if(e.value0 instanceof ZT)return nt(e.value0.value0)(function(t){return Dn(e.value0.value0)(Rc(t))})(ps(e.value1));if(e.value0 instanceof e1)return nt(ah("TODO"))(Rc)(ps(Uv(e.value0.value0)(Mn(e.value0)(e.value1))));if(e.value0 instanceof YT)return nt(at(Lt)(e.value0.value0))(function(t){return at(Rc(t))(e.value0.value0)})(ps(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},lU=function(e){return Xl(e)},fU=function(e){return z.create(Sr.create(Yh(K3("@import url("+(e+`);
`)))))},dU=function(e){return e},v0=function(e){return NL(e)(function(){var t=Xh(dU);return function(n){return t(IL(n))}}())},pU=function(e){return e},qL=function(e){return NL(e)(function(){var t=Xh(pU);return function(n){return t(RL(n))}}())},hU=function(e){return nt(e.value0)(function(t){return"("+(e.value0+(": "+(Xl(t)+")")))})(e.value1)},_U=function(e){return"@media "+(lU(e.value1)+Q3(z3)(BL(function(t){return function(n){return" and "+n}(hU(t))})(e.value2)))};var vU=function(e){return function(t){if(e instanceof ur&&t instanceof ur)return[new ke(new te(e.value0,t.value0))];if(e instanceof ir&&t instanceof ur)return ea(function(n){return new ke(new te(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof ur&&t instanceof ir)return ea(function(n){return new ke(new te(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof ir&&t instanceof ir)return ea(function(n){return nt(new Be(n.value0+n.value1))(function(){var h=te.create(n.value0+n.value1);return function(v){return ke.create(h(function(u){return n.value0+u}(v)))}}())(X3(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},m0=function(e){return vU(e.value0)(e.value1)},mU=function(e){return function(t){var n=Y3(t)(m0),h=Xh(function(u){return Zo.create(rU(kL(Z3(u))))})(ps(n)),v=function(u){return z.create(Sr.create(Yh(Qh(" ")([cU(Rc(u)),"{",kL(n),`}
`]))))};return nt(h)(v)(ps(e))}},If=function(e){return function(t){var n=function(d){return d instanceof n1?new z(new te(d.value0,d.value1)):J.value},h=Kh(pa(Ye(gU)(e)))(Ho(n)(t)),v=function(d){return d instanceof nf?new z(new te(d.value0,d.value1)):J.value},u=function(){var d=Ho(v)(t),_=eU(Uw)(d);return _?mU(e)(d):J.value}(),a=function(d){return If(Mn(d)(e))},p=function(d){return d instanceof jg?new z(new te(d.value0,d.value1)):J.value},s=iU(ea(pa(a))(Ho(p)(t))),o=function(d){return d instanceof o1?new z(d.value0):J.value},i=Kh(yU)(Ho(o)(t)),c=function(d){return d instanceof a1?new z(d.value0):J.value},f=Kh(fU)(Ho(c)(t)),l=function(d){return d instanceof r1?new z(d.value0):J.value},r=Kh(bU)(Ho(l)(t));return xf(u)(xf(f)(xf(i)(xf(r)(xf(s)(h)))))}},gU=function(e){return function(t){return function(n){return z.create(Sr.create(Yh(_U(e)+(" { "+(Cn("")(v0(If(t)(n)))+` }
`)))))}}},yU=function(e){var t=" "+(e.value0+(" { "+(tU(" ")(BL(pa(DU))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],h=HL(ea(function(v){return v+t})(n));return new z(new Sr(h))},DU=function(e){return function(t){var n=Cn("")(qL(If([])(t)));return nU(e)+("% "+("{ "+(n+" }")))}},bU=function(e){return z.create(Sr.create(Yh("@font-face { "+(Cn("")(qL(If([])(e)))+` }
`))))},zL=function(){var e=If([]);return function(t){return e(rf(t))}}();var Zh=function(){var e=function(t){return function(n){return new z(new gp(t,n))}};return function(t){return GE(e(t))}}(),VL=function(e){return jE(e)};var GL=function(e){return VL(e)("type")};var g0=function(){return KE(J.value)}();var wU=GL(vg),SU=de(Ka),EU=Bl(wt),jL=function(e){var t=Cn("")(v0(zL(e)));return Ig([wU("text/css")])([Ii(t)])},D0=function(){var e=function(){var u=kr("; "),a=HE(_u)(function(p){return function(s){return[p+(": "+s)]}});return function(p){return u(a(p))}}(),t=zv(Ht(Cd)(_u)(Bs)),n=function(u){return u instanceof nf?new z(new te(u.value0,u.value1)):J.value},h=function(u){var a=SU(Ho(n)(u))(function(p){return t(m0(p))});return EU(a)},v=g0("style");return function(u){return v(e(h(rf(u))))}}();function KL(e,t,n){var h=Object.prototype.toString.call(n);return h.indexOf("[object HTML")===0&&h.indexOf("Element]")===h.length-8?t(n):e}var QL=ee;var Rf=function(e){return KL(J.value,z.create,e)};var YL=zt(Vt),XL=YL(ih),qa=de(go),b0=wu(no),t_=kt(Go)(pn),C0=YL(go),MU=Rr(no),ZL=function(){function e(){}return e.value=new e,e}(),eF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LU=function(e){return function(t){var n=ki([ju([Zh("editor"),D0(XL(of(Ft(500)))(function(){return af(Ft(500))}))])([]),ic([Kl(function(h){return eF.create(Ql(h))})])([Ii("Save")]),ic([Kl(function(h){return tF.create(Ql(h))})])([Ii("Exit")])]);return ju([D0(XL(dc(c1))(function(){return g1(m1)}))])([n])}},FU=function(e){var t=Ze(Ta(e.MonadEffect0())),n=ar(jp(e));return function(h){return function(v){if(v instanceof ZL)return qa(t(Af))(function(u){return qa(b0(function(a){return a.filePath}))(function(a){return qa(n(ML(u)(a)))(function(p){return qa(Vu("editor"))(function(s){return Ye(t_)(s)(function(o){return Ye(t_)(Rf(o))(function(i){return qa(t(FT(i)(Zp.default)))(function(c){return qa(t(Hg(c)))(function(f){return C0(Ye(t_)(p)(function(l){return t(IT(l)(f))}))(function(){return MU(function(l){var r={};for(var d in l)({}).hasOwnProperty.call(l,d)&&(r[d]=l[d]);return r.editSession=new z(new te(u,new te(c,f))),r})})})})})})})})})});if(v instanceof eF)return C0(t(uc(v.value0)))(function(){return qa(b0(function(u){return u.editSession}))(function(u){return qa(b0(function(a){return a.filePath}))(function(a){return Ye(t_)(u)(function(p){return qa(t(Og(p.value1.value1)))(function(s){return n(TL(p.value0)(a)(s))})})})})});if(v instanceof tF)return C0(t(uc(v.value0)))(function(){return Vo(void 0)});throw new Error("Failed pattern match at Example.Editor (line 73, column 16 - line 95, column 18): "+[v.constructor.name])}}},nF=function(e){var t=LU(e),n=FU(e);return function(h){return Fa({initialState:function(v){return{editSession:J.value,filePath:v}},render:t,eval:La({handleAction:n(h),handleQuery:yr.handleQuery,receive:yr.receive,initialize:new z(ZL.value),finalize:yr.finalize})})}};var hs=function(){return window};function rF(e){return e.readyState}var $f=function(){function e(){}return e.value=new e,e}(),$U=function(){function e(){}return e.value=new e,e}(),kU=function(){function e(){}return e.value=new e,e}();var oF=function(e){return e==="loading"?new z($f.value):e==="interactive"?new z($U.value):e==="complete"?new z(kU.value):J.value};var HU=V(ze);var iF=ee;var uF=ee;var sF=function(e){return HU(function(){var t=Cn($f.value);return function(n){return t(oF(n))}}())(function(){return rF(e)})};function $c(e){return function(){return e.document}}var dF=ee;var _F=de(yn),L4=Ze(wn),w0=rn(Mr),F4=ws(Mr),vF=Z(eo),A4=rn(er),x4=Z(Kt),I4=V(ze),R4=zt(Vt),$4=or(lp),k4=function(e){return _F(L4(w0(F4(function(){var t=FE(e);return function(n){return t(iF(n))}}())($c))(hs)))(function(t){return vF(A4(Rf)(t))})},mF=El(dn(Yr)(Se(x4(void 0)))),O4=po(function(e){return function(){var n=w0(sF)(w0($c)(hs))();if(n instanceof $f){var h=I4(dF)(hs)(),v=Wl(function(u){return e(new ke(void 0))})();return cg(kg)(v)(!1)(h)(),$u(lg(kg)(v)(!1)(h))}return e(new ke(void 0))(),_m}}),gF=R4(yn)(O4)(function(){return _F(k4("body"))(function(e){return nt($4(Un("Could not find body")))(vF)(e)})});var n_={suspend:VS,fork:GS,join:wl,Monad0:function(){return Ru},Functor1:function(){return YS}};var r_=function(e){return e.fork};var P4=xg();var o_=function(){return function(e){var t=P4(e);return function(n){var h=t(n);return function(v){return function(u){return function(a){return function(p){return function(s){return VE(new jl(h(v)(u)(a)(p)(function(o){return z.create(s(o))})))}}}}}}}};var CF=ee,wo=ee,wF=function(e){var t=kt(e)(pn);return function(n){return wo(function(h){return t(n)(h.rendering)})}},V4=ee,SF=function(e){return function(t){return wo(function(n){return V4(t(n.rendering))})}},G4=ee,a_=function(e){return function(t){return e(t)}},EF=function(e){return function(t){return function(n){return function(h){return function(){var u=Xt({})(),a=Xt(Si)(),p=Xt(Si)(),s=Xt(n)(),o=Xt(new z(Qe.value))(),i=Xt(new z(Qe.value))(),c=Xt(J.value)(),f=Xt(1)(),l=Xt(new z(vo))(),r=Xt(vo)(),d={component:e,state:e.initialState(t),refs:vo,children:Si,childrenIn:a,childrenOut:p,selfRef:u,handlerRef:s,pendingQueries:o,pendingOuts:i,pendingHandlers:c,rendering:J.value,fresh:f,subscriptions:l,forks:r,lifecycleHandlers:h};return Rt(d)(u)(),G4(u)}}}}};var j4=kt(Kt)(pn),J4=rn(er),K4=Da(Sg),fn=de(yn),Pt=Ze(wn),Q4=zt(Vt),So=Q4(yn),xF=kt(eo),X4=xF(dr),IF=r_(n_),Y4=Ks(yi)(dr),ta=Z(eo),Z4=V(wm),TF=mi(yi),e6=V(Wo),MF=Js(yi),t6=V(Mt),n6=_o(Sg),r6=nT(hm),o6=dp(Gp),a6=Sb(Ro),i6=_o(Gp),LF=xF(pn),FF=Da(Gp),u6=Da(jt),s6=lw(ku),c6=Lm(jt),l6=function(e){return function(t){return function(){var h=je(t)(),v=je(h.subscriptions)();return j4(Np)(J4(K4(e))(v))()}}},i_=function(e){return function(t){return fn(Pt(je(e)))(function(n){if(n instanceof J)return t;if(n instanceof z)return Pt(Rt(new z(new Ie(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},u_=function(e){return function(t){return So(Pt(Rt({initializers:Qe.value,finalizers:Qe.value})(e)))(function(){return fn(Pt(t))(function(n){return fn(Pt(je(e)))(function(h){return So(X4(IF)(h.finalizers))(function(){return So(Y4(h.initializers))(function(){return ta(n)})})})})})}},_s=El(dn(Yr)(Se(Z(Kt)(void 0)))),AF=function(e){return function(t){return fn(Pt(je(t)))(function(n){return Pt(ov(function(h){return{state:h+1|0,value:e(h)}})(n.fresh))})}},E0=function(e){return function(t){return function(n){return fn(Pt(je(t)))(function(h){return uu(e)(t)(h.component.eval(new ac(Z4(z.create)(DE(n)),Se(J.value))))})}}},uu=function(e){return function(t){return function(n){var h=function(u){return function(a){return fn(Pt(je(u)))(function(p){return uT(function(s){var o=function(i){return TF(fn(Pt(je(i)))(function(c){return wo(function(f){return E0(e)(f.selfRef)(s.value1)})(c)}))};return e6(s.value2)(MF(s.value0(hm)(o)(p.children)))})(a)})}},v=function(u){return function(a){if(a instanceof Ul)return fn(Pt(je(u)))(function(p){var s=a.value0(p.state);if(Zs(p.state)(s.value1))return ta(s.value0);if(_n)return So(Pt(Rt({component:p.component,state:s.value1,refs:p.refs,children:p.children,childrenIn:p.childrenIn,childrenOut:p.childrenOut,selfRef:p.selfRef,handlerRef:p.handlerRef,pendingQueries:p.pendingQueries,pendingOuts:p.pendingOuts,pendingHandlers:p.pendingHandlers,rendering:p.rendering,fresh:p.fresh,subscriptions:p.subscriptions,forks:p.forks,lifecycleHandlers:p.lifecycleHandlers})(u)))(function(){return So(u_(p.lifecycleHandlers)(e(p.lifecycleHandlers)(u)))(function(){return ta(s.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[s.constructor.name])});if(a instanceof ql)return fn(AF(fT)(u))(function(p){return fn(Pt(lT(a.value0(p))(function(s){return _s(T0(e)(u)(new Ou(s)))})))(function(s){return fn(Pt(je(u)))(function(o){return So(Pt(Lr(t6(n6(p)(s)))(o.subscriptions)))(function(){return ta(a.value1(p))})})})});if(a instanceof Wp)return So(Pt(l6(a.value0)(u)))(function(){return ta(a.value1)});if(a instanceof Uu)return a.value0;if(a instanceof zl)return h(u)(a.value0);if(a instanceof Vl)return fn(Pt(je(u)))(function(p){return fn(Pt(je(p.handlerRef)))(function(s){return So(i_(p.pendingOuts)(s(a.value0)))(function(){return ta(a.value1)})})});if(a instanceof Up)return MF(r6(Dg(function(){var p=uu(e)(u);return function(s){return TF(p(s))}}())(a.value0)));if(a instanceof qp)return fn(AF(dT)(u))(function(p){return fn(Pt(je(u)))(function(s){return fn(Pt(Xt(!1)))(function(o){return fn(IF(XS(Pt(function(){return Lr(o6(p))(s.forks)(),Rt(!0)(o)()}))(uu(e)(u)(a.value0))))(function(i){return So(Pt(a6(je(o))(Lr(i6(p)(i))(s.forks))))(function(){return ta(a.value1(p))})})})})});if(a instanceof zp)return fn(Pt(je(u)))(function(p){return fn(Pt(je(p.forks)))(function(s){return So(LF(wl)(FF(a.value0)(s)))(function(){return ta(a.value1)})})});if(a instanceof Vp)return fn(Pt(je(u)))(function(p){return fn(Pt(je(p.forks)))(function(s){return So(LF(Sl(Un("Cancelled")))(FF(a.value0)(s)))(function(){return ta(a.value1)})})});if(a instanceof Gl)return fn(Pt(je(u)))(function(p){return ta(a.value1(u6(a.value0)(p.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[a.constructor.name])}};return s6(v(t))(n)}}},T0=function(e){return function(t){return function(n){if(n instanceof gp)return Pt(Ye(Lr)(t)(a_(function(h){return{component:h.component,state:h.state,refs:c6(Se(n.value1))(n.value0)(h.refs),children:h.children,childrenIn:h.childrenIn,childrenOut:h.childrenOut,selfRef:h.selfRef,handlerRef:h.handlerRef,pendingQueries:h.pendingQueries,pendingOuts:h.pendingOuts,pendingHandlers:h.pendingHandlers,rendering:h.rendering,fresh:h.fresh,subscriptions:h.subscriptions,forks:h.forks,lifecycleHandlers:h.lifecycleHandlers}})));if(n instanceof Ou)return fn(Pt(je(t)))(function(h){return uu(e)(t)(h.component.eval(new oc(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var d6=de(Mr),p6=zt(Vt),NF=bd(Kt)(pn),BF=kt(eo)(dr),WF=r_(n_),Of=rn(Mr),UF=kt(Kt),qF=UF(pn),RF=UF(Ln),$F=p6(yn),h6=Ks(yi)(dr),kf=Ze(wn),kF=Z(Kt),M0=V(ze),L0=Z(eo),F0=Tr(Kt),_6=SF(ze),v6=At(Wo),OF=mp(Kt),m6=wF(Kt),g6=Qn(_d),y6=bs(ze),A0=de(yn),D6=Ze(Xd),HF=function(){return Xt({initializers:Qe.value,finalizers:Qe.value})}(),PF=function(e){return function(){var n=je(e)();return Rt(J.value)(e)(),NF(n)(function(){var h=BF(WF);return function(v){return _s(h(bu(v)))}}())()}},b6=function(e){return function(){return Of(qF(RF(Np)))(je(e.subscriptions))(),Rt(J.value)(e.subscriptions)(),Of(RF(function(){var n=Sl(Un("finalized"));return function(h){return _s(n(h))}}()))(je(e.forks))(),Rt(vo)(e.forks)()}},zF=function(e){return function(t){return function(n){var h=function(i){return function(c){return wo(function(f){var l=uu(a)(f.selfRef)(f.component.eval(new tc(void 0)));return Lr(function(r){return{initializers:new Ie($F(h6(bu(r.initializers)))(function(){return $F(l)(function(){return kf(function(){return PF(f.pendingQueries)(),PF(f.pendingOuts)()})})}),c),finalizers:r.finalizers}})(i)})}},v=function(i){return function(c){return function(f){return Ag(function(l){return function(){var d=HF(),_=EF(l)(f)(c)(d)(),m=je(i)();return Rt({initializers:Qe.value,finalizers:m.finalizers})(i)(),Of(wo(function(){var y=a(i);return function(b){return y(function(S){return S.selfRef}(b))}}()))(je(_))(),Of(h(i)(m.initializers))(je(_))(),_}})}}},u=function(i){return function(c){return function(f){return function(l){return Fg(function(r){return function(){var _=M0(r.pop)(je(f))(),m=function(){if(_ instanceof z){Rt(_.value0.value1)(f)();var b=je(_.value0.value0)();return wo(function(S){return function(){return Ye(Rt)(S.handlerRef)(function(){var g=nt(L0(void 0))(c);return function(C){return g(r.output(C))}}())(),_s(uu(a)(S.selfRef)(S.component.eval(new rc(r.input,void 0))))()}})(b)(),_.value0.value0}if(_ instanceof J)return v(i)(function(){var S=nt(L0(void 0))(c);return function(D){return S(r.output(D))}}())(r.input)(r.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[_.constructor.name])}(),y=M0(function(b){return Ms(r.get(b))})(je(l))();return F0(y)(jh("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Lr(r.set(m))(l)(),d6(je(m))(_6(function(b){if(b instanceof J)return SS("Halogen internal error: child was not initialized in renderChild");if(b instanceof z)return kF(e.renderChild(b.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[b.constructor.name])}))()}})}}}},a=function(i){return function(c){return function(){var l=je(c)(),r=M0(la)(je(l.pendingHandlers))();F0(r)(Rt(new z(Qe.value))(l.pendingHandlers))(),Rt(Si)(l.childrenOut)(),Rt(l.children)(l.childrenIn)();var d=function(){var S=i_(l.pendingHandlers),D=T0(a)(l.selfRef);return function(g){return S(v6(D(g)))}}(),_=function(){var S=i_(l.pendingQueries);return function(D){return S(d(Ou.create(D)))}}(),m=e.render(function(S){return _s(d(S))})(u(i)(_)(l.childrenIn)(l.childrenOut))(l.component.render(l.state))(l.rendering)(),y=je(l.childrenOut)(),b=je(l.childrenIn)();return OF(b)(function(S){return function(){var g=je(S)();return m6(e.removeChild)(g)(),p(i)(g)()}})(),Ye(Lr)(l.selfRef)(a_(function(S){return{component:S.component,state:S.state,refs:S.refs,children:y,childrenIn:S.childrenIn,childrenOut:S.childrenOut,selfRef:S.selfRef,handlerRef:S.handlerRef,pendingQueries:S.pendingQueries,pendingOuts:S.pendingOuts,pendingHandlers:S.pendingHandlers,rendering:new z(m),fresh:S.fresh,subscriptions:S.subscriptions,forks:S.forks,lifecycleHandlers:S.lifecycleHandlers}}))(),F0(r)(Ye(g6)(void 0)(function(S){return function(){var g=je(l.pendingHandlers)();Rt(new z(Qe.value))(l.pendingHandlers)(),qF(function(){var E=BF(WF);return function(T){return _s(E(bu(T)))}}())(g)();var C=je(l.pendingHandlers)(),F=nt(!1)(QC)(C);return F?y6(Rt(J.value)(l.pendingHandlers))(new Yt(void 0))():new ln(void 0)}}))()}}},p=function(i){return wo(function(c){return function(){b6(c)();var l=uu(a)(c.selfRef)(c.component.eval(new nc(void 0)));return Lr(function(r){return{initializers:r.initializers,finalizers:new Ie(l,r.finalizers)}})(i)(),OF(c.children)(function(r){return function(){var _=je(r)();return p(i)(_)()}})()}})},s=function(i){return function(c){return function(f){return A0(kf(je(i)))(function(l){return l?L0(J.value):E0(a)(c)(f)})}}},o=function(i){return function(c){return function(f){return u_(c)(function(){var r=je(i)();return r?void 0:(Rt(!0)(i)(),p(c)(f)(),wo(function(d){return function(){var m=D6(je(d.selfRef))();return NF(m.rendering)(e.dispose)()}})(f)())})}}};return A0(kf(HF))(function(i){return A0(kf(Xt(!1)))(function(c){return u_(i)(function(){var l=mr(),r=Of(je)(v(i)(function(){var d=vr(l.listener);return function(_){return kf(d(_))}}())(n)(t))();return wo(function(d){return kF({query:s(c)(d.selfRef),messages:l.emitter,dispose:o(c)(i)(r)})})(r)()})})})}}};var Eo=function(e){return function(t){return function(){return t[e]}}};var w6=Eo("baseURI"),S6=Eo("ownerDocument"),VF=Eo("parentNode"),E6=Eo("parentElement");var T6=Eo("childNodes"),M6=Eo("firstChild"),L6=Eo("lastChild"),F6=Eo("previousSibling"),GF=Eo("nextSibling"),A6=Eo("nodeValue");var x6=Eo("textContent");function x0(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function s_(e){return function(t){return function(){t.appendChild(e)}}}function I0(e){return function(t){return function(){t.removeChild(e)}}}var jF=V(ze);var R0=function(){var e=jF(Qt);return function(t){return e(VF(t))}}();var JF=function(){var e=jF(Qt);return function(t){return e(GF(t))}}();var $0=function(e,t,n){var h=0,v;return function(u){if(h===2)return v;if(h===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return h=1,v=n(),h=2,v}},k0=At(ze),O6=Z(Kt),H6=kt(Kt)(pn),P6=on(),N6=Tr(Kt),B6=$o(Jc(Jc(jr))),W6=De(be),U6=de(yn),q6=Ze(wn),z6=V(ze),V6=rn(Mr);var G6=function(e){return function(t){return function(n){return t instanceof z&&n instanceof z?k0(x0(e)(t.value0)(n.value0)):t instanceof J&&n instanceof z?k0(s_(e)(n.value0)):O6(void 0)}}},KF=function(e){return function(){var n=R0(e.node)();return H6(function(h){return I0(e.node)(h)})(n)()}},j6=function(e){return function(t){return function(n){var h=CF(function(p){return p.node}),v=function(p){return p instanceof z?_r(p.value0):void 0},u=function(p){var s=_T(P6)(p),o=$0("patch","Halogen.VDom.Driver",function(){return function(d,_){if(d instanceof z){if(_ instanceof jl)return _r(d.value0),c(100)(_.value0);if(_ instanceof Kp){var m=hr(d.value0,_.value0);return sn(new un(qn(m),new z(m),o(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[_.constructor.name])}return i(104)(_)}}),i=$0("render","Halogen.VDom.Driver",function(){return function(d){if(d instanceof jl)return c(86)(d.value0);if(d instanceof Kp){var _=s(d.value0);return sn(new un(qn(_),new z(_),o(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[d.constructor.name])}}),c=$0("renderComponentSlot","Halogen.VDom.Driver",function(){return function(d){var _=je(t)(),m=_(d)(),y=h(m);return sn(new un(y,J.value,o(117),v))}}),f=o(91),l=i(82),r=c(109);return l},a=WE(e);return{buildWidget:u,buildAttributes:a,document:n}}}},J6=function(e){return function(t){var n=function(h){return function(v){return function(u){return function(a){if(a instanceof J)return function(){var s=Xt(v)(),o=j6(h)(s)(e),i=Pl(o)(u),c=qn(i);return k0(s_(c)(QL(t)))(),{machine:i,node:c,renderChildRef:s}};if(a instanceof z)return function(){Rt(v)(a.value0.renderChildRef)();var s=R0(a.value0.node)(),o=JF(a.value0.node)(),i=hr(a.value0.machine,u),c=qn(i);return N6(B6(Zs)(a.value0.node)(c))(G6(c)(o)(s))(),{machine:i,node:c,renderChildRef:a.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[a.constructor.name])}}}};return{render:n,renderChild:W6,removeChild:KF,dispose:KF}}},QF=function(e){return function(t){return function(n){return U6(q6(z6(uF)(V6($c)(hs))))(function(h){return zF(J6(h)(n))(e)(t)})}}};var c_=function(e){return e};var Q6=Bl(wt);var XF=Gt,Hf=function(e){return Bu(Q6(e))};var YF=_u;var X6=function(e){return function(t){return[new te(e,Bu(t))]}},vs=function(e){return c_(X6(e))},H0=on();var ZF=function(e){return function(t){var n=e(t);return n.value1}};var tq=V(ci),nq=V(Ma),rq=Rr(hE(Vr)),oq=mp(Dm(Vr)),aq=o_(),iq=vp(),uq=qu(),sq=hp(),P0=function(){function e(){}return e.value=new e,e}(),N0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),B0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eA=function(e){return e},Pf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Nf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Wf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Uf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),l_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),qf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),f_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var cq={lift:function(e){return function(t){return eA(bt(Nf.create(t)))}}},tA=It(cq),lq=sl;var kc=function(e){return{liftEffect:function(){var t=tA(e.Monad0()),n=Ze(e);return function(h){return t(n(h))}}(),Monad0:function(){return lq}}},nA=function(e){var t=e.MonadEffect0(),n=kc(t);return{liftAff:function(){var h=tA(t.Monad0()),v=ar(e);return function(u){return h(v(u))}}(),MonadEffect0:function(){return n}}},rA=ci,oA=function(e){var t=V(e);return{map:function(n){return function(h){if(h instanceof Pf)return new Pf(tq(n)(h.value0));if(h instanceof Nf)return new Nf(t(n)(h.value0));if(h instanceof Bf)return new Bf(function(v){return n(h.value0(v))});if(h instanceof Wf)return new Wf(h.value0,n(h.value1));if(h instanceof Uf)return new Uf(h.value0,n(h.value1));if(h instanceof l_)return new l_(h.value0,n(h.value1));if(h instanceof qf)return new qf(nq(n)(h.value0));if(h instanceof f_)return new f_(function(v){return n(h.value0(v))});if(h instanceof zf)return new zf(h.value0,n(h.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,h.constructor.name])}}}},gs=tr,fq=de(gs),aA=$v,su=Ir,Nt=function(e){return eA(bt(Pf.create(e)))},iA=function(e){var t=function(n){return rq(Mn(n.window))};return ZF(oq(e)(t))([])},uA=function(e){return bt(new Wf(e,void 0))};var sA=function(e){return bt(new zf(e,void 0))},W0=function(){return function(e){var t=aq(e),n=iq(e);return function(h){var v=t(h),u=n(h);return function(){return function(a){return function(p){return function(s){return function(o){return function(i){var c=v(a)(p)(s)(o)(function(f){return B0.create(i(f))});return sA(u(a)(p)({window:c}))}}}}}}}}},dq=function(e){return bt(new qf(e))},U0=function(){return function(e){var t=uq(e);return function(n){var h=t(n);return function(){return function(v){return function(u){return function(a){return dq(h(v)(u)(a))}}}}}}},cu=function(e){return bt(new Uf(e,void 0))},Er=function(){return bt(new Bf(De(be)))}(),Gn=function(e){return fq(Er)(function(t){return uA(e(t))})},q0=function(){return function(e){var t=sq(e);return function(n){var h=t(n);return function(){return function(v){return function(u){return sA(function(a){return nt(a)(Zt)(h(v)(u)(a))})}}}}}};var _q=St(Fn),vq=tn(Yl);var V0=vq(_q("background-color"));var Et=St(zn),cA=function(){function e(){}return e.value=new e,e}(),gq=function(){function e(){}return e.value=new e,e}(),lA=function(){function e(){}return e.value=new e,e}(),yq=function(){function e(){}return e.value=new e,e}(),Dq=function(){function e(){}return e.value=new e,e}(),bq=function(){function e(){}return e.value=new e,e}(),fA=function(){function e(){}return e.value=new e,e}(),G0=function(){function e(){}return e.value=new e,e}(),Cq=function(){function e(){}return e.value=new e,e}(),wq=function(){function e(){}return e.value=new e,e}(),Sq=function(){function e(){}return e.value=new e,e}(),Eq=function(){function e(){}return e.value=new e,e}(),Tq=function(){function e(){}return e.value=new e,e}(),Mq=function(){function e(){}return e.value=new e,e}(),Lq=function(){function e(){}return e.value=new e,e}(),Fq=function(){function e(){}return e.value=new e,e}(),Aq=function(){function e(){}return e.value=new e,e}(),xq=function(){function e(){}return e.value=new e,e}(),Iq=function(){function e(){}return e.value=new e,e}(),Rq=function(){function e(){}return e.value=new e,e}(),$q=function(){function e(){}return e.value=new e,e}(),kq=function(){function e(){}return e.value=new e,e}(),Oq=function(){function e(){}return e.value=new e,e}(),Hq=function(){function e(){}return e.value=new e,e}(),Pq=function(){function e(){}return e.value=new e,e}(),Nq=function(){function e(){}return e.value=new e,e}(),Bq=function(){function e(){}return e.value=new e,e}(),Wq=function(){function e(){}return e.value=new e,e}(),Uq=function(){function e(){}return e.value=new e,e}(),qq=function(){function e(){}return e.value=new e,e}(),zq=function(){function e(){}return e.value=new e,e}(),Vq=function(){function e(){}return e.value=new e,e}(),Gq=function(){function e(){}return e.value=new e,e}();var jq={value:function(e){if(e instanceof cA)return Et("default");if(e instanceof gq)return Et("help");if(e instanceof lA)return Et("pointer");if(e instanceof yq)return Et("progress");if(e instanceof Dq)return Et("wait");if(e instanceof bq)return Et("cell");if(e instanceof fA)return Et("crosshair");if(e instanceof G0)return Et("text");if(e instanceof Cq)return Et("vertical-text");if(e instanceof wq)return Et("alias");if(e instanceof Sq)return Et("copy");if(e instanceof Eq)return Et("move");if(e instanceof Tq)return Et("no-drop");if(e instanceof Mq)return Et("not-allowed");if(e instanceof Lq)return Et("grab");if(e instanceof Fq)return Et("grabbing");if(e instanceof Aq)return Et("all-scroll");if(e instanceof xq)return Et("col-resize");if(e instanceof Iq)return Et("row-resize");if(e instanceof Rq)return Et("n-resize");if(e instanceof $q)return Et("e-resize");if(e instanceof kq)return Et("s-resize");if(e instanceof Oq)return Et("w-resize");if(e instanceof Hq)return Et("ne-resize");if(e instanceof Pq)return Et("nw-resize");if(e instanceof Nq)return Et("se-resize");if(e instanceof Bq)return Et("sw-resize");if(e instanceof Wq)return Et("ew-resize");if(e instanceof Uq)return Et("ns-resize");if(e instanceof qq)return Et("nesw-resize");if(e instanceof zq)return Et("nwse-resize");if(e instanceof Vq)return Et("zoom-in");if(e instanceof Gq)return Et("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var j0=function(){return lA.value}();var J0=function(){return cA.value}(),ys=tn(jq)(St(Fn)("cursor")),dA=function(){return fA.value}();var Kq=St(Fn);var pA=tn(Yl)(Kq("color"));var hA=St(zn),_A=St(Fn);var Xq={value:function(e){return e}},vA=tn(Xq),mA=hA("scroll"),gA=vA(_A("overflow-y"));var K0=vA(_A("overflow")),Q0=hA("hidden");var X0=St(zn),Zq=St(Fn);var e8={value:function(e){return e}},yA=X0("underline"),d_=tn(e8)(Zq("text-decoration")),DA=X0("overline");var bA=X0("line-through");var ge=zt(Vt)(ih),bn=tn(Oi),hn=St(Fn),n8=Jg(Oi),r8=me(sc),o8=St(nh),a8=tn(Ju),CA=function(){var e=at(Lt)(ct("xterm")),t=at(Lt)(ct("xterm-viewport")),n=ge(_t(at(Lt)(ct("xterm-underline-1")))(d_(yA)))(function(){return ge(_t(at(Lt)(ct("xterm-underline-2")))(bn(hn("text-decoration"))("double underline")))(function(){return ge(_t(at(Lt)(ct("xterm-underline-3")))(bn(hn("text-decoration"))("wavy underline")))(function(){return ge(_t(at(Lt)(ct("xterm-underline-4")))(bn(hn("text-decoration"))("dotted underline")))(function(){return _t(at(Lt)(ct("xterm-underline-5")))(bn(hn("text-decoration"))("dashed underline"))})})})}),h=at(Lt)(ct("xterm-scroll-area")),v=at(Lt)(ct("xterm-screen")),u=at(Lt)(ct("xterm-decoration-overview-ruler")),a=ge(_t(at(Lt)(ct("xterm-overline")))(d_(DA)))(function(){return ge(_t(at(at(Lt)(ct("xterm-underline-1")))(ct("xterm-overline")))(bn(hn("text-decoration"))("overline underline")))(function(){return ge(_t(at(at(Lt)(ct("xterm-underline-2")))(ct("xterm-overline")))(bn(hn("text-decoration"))("overline double underline")))(function(){return ge(_t(at(at(Lt)(ct("xterm-underline-3")))(ct("xterm-overline")))(bn(hn("text-decoration"))("overline wavy underline")))(function(){return ge(_t(at(at(Lt)(ct("xterm-underline-4")))(ct("xterm-overline")))(bn(hn("text-decoration"))("overline dotted underline")))(function(){return _t(at(at(Lt)(ct("xterm-underline-5")))(ct("xterm-overline")))(bn(hn("text-decoration"))("overline dashed underline"))})})})})}),p=at(Lt)(ct("xterm-message")),s=at(Lt)(ct("live-region")),o=at(Lt)(ct("xterm-helper-textarea")),i=at(Lt)(ct("xterm-helpers")),c=at(Lt)(ct("xterm-dim")),f=at(Lt)(ct("xterm-decoration-top")),l=at(Lt)(ct("xterm-decoration-container")),r=at(Lt)(ct("xterm-decoration")),d=at(Lt)(ct("composition-view")),_=at(Lt)(ct("xterm-char-measure-element")),m=ge(br(yo))(function(){return ge(Qu(Ft(0)))(function(){return ge(Ki(Ft(0)))(function(){return ge(Xg(Ft(0)))(function(){return ge(lh(Ft(0)))(function(){return ge(Ia(10))(function(){return ge(bn(hn("color"))("transparent"))(function(){return bn(hn("pointer-events"))("none")})})})})})})}),y=at(Lt)(ct("xterm-accessibility"));return ge(_t(e)(ge(ys(G0.value))(function(){return ge(br(sh))(function(){return n8(r8(Zl)(o8("user-select")))("none")})})))(function(){return ge(_t(at(e)(ct("focus")))(bn(hn("outline"))("none")))(function(){return ge(_t(at(e)(JT("focus")))(bn(hn("outline"))("none")))(function(){return ge(_t(Dn(e)(i))(ge(br(yo))(function(){return ge(Ki(Ft(0)))(function(){return Ia(5)})})))(function(){return ge(_t(Dn(e)(o))(ge(b1(Ft(0))(Ft(0))(Ft(0))(Ft(0)))(function(){return ge(a8(hn("border"))(0))(function(){return ge(C1(Ft(0))(Ft(0))(Ft(0))(Ft(0)))(function(){return ge(br(yo))(function(){return ge(u1(0))(function(){return ge(Qu(Qg(-9999)))(function(){return ge(Ki(Ft(0)))(function(){return ge(of(Ft(0)))(function(){return ge(af(Ft(0)))(function(){return ge(Ia(-5))(function(){return ge(bn(hn("whitespace"))("nowrap"))(function(){return ge(K0(Q0))(function(){return bn(hn("resize"))("none")})})})})})})})})})})})})))(function(){return ge(_t(Dn(e)(d))(ge(V0(Bg))(function(){return ge(pA(HT))(function(){return ge(dc(l1))(function(){return ge(br(yo))(function(){return ge(bn(hn("white-space"))("nowrap"))(function(){return Ia(1)})})})})})))(function(){return ge(_t(Dn(e)(at(d)(ct("active"))))(dc(f1)))(function(){return ge(_t(Dn(e)(t))(ge(V0(Bg))(function(){return ge(gA(mA))(function(){return ge(ys(J0))(function(){return ge(br(yo))(function(){return ge(lh(Ft(0)))(function(){return ge(Qu(Ft(0)))(function(){return ge(Ki(Ft(0)))(function(){return Xg(Ft(0))})})})})})})})))(function(){return ge(_t(Dn(e)(v))(br(sh)))(function(){return ge(_t(Dn(e)(Dn(v)(ah("canvas"))))(ge(br(yo))(function(){return ge(Qu(Ft(0)))(function(){return Ki(Ft(0))})})))(function(){return ge(_t(Dn(e)(h))(bn(hn("visibility"))("hidden")))(function(){return ge(_t(_)(ge(dc(s1))(function(){return ge(bn(hn("visibility"))("hidden"))(function(){return ge(br(yo))(function(){return ge(Ki(Ft(0)))(function(){return ge(Qu(Qg(-9999)))(function(){return bn(hn("line-height"))("normal")})})})})})))(function(){return ge(_t(at(e)(ct("enable-mouse-events")))(ys(J0)))(function(){return ge(_t(at(e)(ct("xterm-cursor-pointer")))(ys(j0)))(function(){return ge(_t(Dn(e)(at(Lt)(ct("xterm-cursor-pointer"))))(ys(j0)))(function(){return ge(_t(at(at(e)(ct("column-select")))(ct("focus")))(ys(dA)))(function(){return ge(_t(Dn(e)(y))(m))(function(){return ge(_t(Dn(e)(p))(m))(function(){return ge(_t(Dn(e)(s))(ge(br(yo))(function(){return ge(Qu(Ft(-9999)))(function(){return ge(of(Ft(1)))(function(){return ge(af(Ft(1)))(function(){return K0(Q0)})})})})))(function(){return ge(_t(c)(bn(hn("opacity"))("1 !important")))(function(){return ge(n)(function(){return ge(a)(function(){return ge(_t(at(Lt)(ct("xterm-strikethrough")))(d_(bA)))(function(){return ge(_t(Dn(Dn(v)(l))(r))(ge(Ia(6))(function(){return br(yo)})))(function(){return ge(_t(Dn(Dn(v)(l))(at(r)(ct("xterm-decoration-top-layer"))))(Ia(7)))(function(){return ge(_t(u)(ge(Ia(8))(function(){return ge(br(yo))(function(){return ge(Ki(Ft(0)))(function(){return ge(lh(Ft(0)))(function(){return bn(hn("pointer-events"))("none")})})})})))(function(){return _t(f)(ge(Ia(2))(function(){return br(sh)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var wA=e=>()=>e.type,Y0=e=>()=>e.cursorY,Z0=e=>()=>e.cursorX,eD=e=>()=>e.viewportY,tD=e=>()=>e.baseY,nD=e=>()=>e.length,SA=e=>t=>()=>e.getLine(t),rD=e=>()=>e.getNullCell();var Oc=function(e){return Nl(e)?J.value:new z(kp(e))};var s8=V(ze),c8=function(){function e(){}return e.value=new e,e}(),l8=function(){function e(){}return e.value=new e,e}(),EA=function(e){return function(t){return s8(Oc)(SA(e)(t))}},TA=function(e){return function(){var n=wA(e)();return n==="normal"?c8.value:l8.value}};var aD=e=>()=>e.isWrapped,iD=e=>()=>e.length;var m_=De(be),na=V(ze),uD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),p_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),sD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),lD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),h_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),__=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),v_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),dD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),h8={map:function(e){return function(t){if(t instanceof uD)return new uD(function(n){return e(t.value0(n))});if(t instanceof p_)return new p_(function(n){return e(t.value0(n))});if(t instanceof sD)return new sD(function(n){return e(t.value0(n))});if(t instanceof cD)return new cD(function(n){return e(t.value0(n))});if(t instanceof lD)return new lD(function(n){return e(t.value0(n))});if(t instanceof h_)return new h_(function(n){return e(t.value0(n))});if(t instanceof __)return new __(t.value0,function(n){return e(t.value1(n))});if(t instanceof fD)return new fD(t.value0,function(n){return e(t.value1(n))});if(t instanceof v_)return new v_(t.value0,function(n){return e(t.value1(n))});if(t instanceof dD)return new dD(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},_8=si(h8);var MA=function(e){var t=e.Monad0(),n=de(xu(t.Bind1())),h=Or(Gs(t)),v=Ze(vi(e));return function(u){var a=function(p){if(p instanceof uD)return n(h)(function(s){return v(na(p.value0)(TA(s)))});if(p instanceof p_)return n(h)(function(s){return v(na(p.value0)(Z0(s)))});if(p instanceof sD)return n(h)(function(s){return v(na(p.value0)(Y0(s)))});if(p instanceof cD)return n(h)(function(s){return v(na(p.value0)(eD(s)))});if(p instanceof lD)return n(h)(function(s){return v(na(p.value0)(tD(s)))});if(p instanceof h_)return n(h)(function(s){return v(na(p.value0)(nD(s)))});if(p instanceof __)return n(h)(function(s){return v(na(p.value1)(EA(s)(p.value0)))});if(p instanceof fD)return v(na(p.value1)(aD(p.value0)));if(p instanceof v_)return v(na(p.value1)(iD(p.value0)));if(p instanceof dD)return n(h)(function(s){return v(na(p.value0)(rD(s)))});throw new Error("Failed pattern match at Halogen.Free.Buffer (line 19, column 5 - line 21, column 40): "+[p.constructor.name])};return _8(js(u))(a)}},LA=function(e){return bt(new v_(e,m_))};var FA=function(e){return bt(new __(e,m_))};var AA=function(){return bt(new p_(m_))}();var xA=function(){return bt(new h_(m_))}();var pD=e=>()=>e.cursorBlink,hD=e=>t=>()=>e.cursorBlink=t,_D=e=>()=>e.fontFamily,vD=e=>t=>()=>e.fontFamily=t;var RA=vs("fontFamily");var $A=vs("cursorBlink");var OA=V(ze),C8=zt(Vt),HA=De(be),g_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),D_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mD=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),w8={map:function(e){return function(t){if(t instanceof g_)return new g_(function(n){return e(t.value0(n))});if(t instanceof y_)return new y_(t.value0,e(t.value1));if(t instanceof D_)return new D_(function(n){return e(t.value0(n))});if(t instanceof mD)return new mD(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},S8=si(w8);var Ds=function(e){return bt(new y_(e,void 0))},PA=function(e){var t=e.Monad0(),n=xu(t.Bind1()),h=de(n),v=Or(Gs(t)),u=Ze(vi(e)),a=C8(n),p=Z(op(t.Applicative0()));return function(s){var o=function(i){if(i instanceof g_)return h(v)(function(c){return u(OA(i.value0)(pD(c)))});if(i instanceof y_)return h(v)(function(c){return a(u(hD(c)(i.value0)))(function(){return p(i.value1)})});if(i instanceof D_)return h(v)(function(c){return u(OA(i.value0)(_D(c)))});if(i instanceof mD)return h(v)(function(c){return a(u(vD(c)(i.value0)))(function(){return p(i.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[i.constructor.name])};return S8(js(s))(o)}},NA=function(){return bt(new D_(HA))}(),BA=function(){return bt(new g_(HA))}();var UA=ra(WA(),1),C_=()=>new UA.FitAddon;var zA=ra(qA(),1),S_=()=>new zA.WebglAddon;var GA=ra(VA(),1),T_=()=>new GA.WebLinksAddon;var jA={addon:ee},JA={addon:ee},KA={addon:De(be)};var M_=function(e){return e.addon};var CD=e=>e.active,wD=e=>e.normal,SD=e=>e.alternate;var ZA=ra(YA(),1),ex=e=>t=>()=>new ZA.Terminal(e,t),tx=e=>()=>e.element,nx=e=>()=>e.textarea,TD=e=>()=>e.rows,MD=e=>()=>e.cols,Vf=e=>e.buffer,LD=e=>()=>e.markers;var FD=e=>e.options,AD=e=>t=>()=>e.onBell(t),xD=e=>t=>()=>e.onBinary(n=>t(n)());var ID=e=>t=>()=>e.onData(n=>t(n)()),RD=e=>t=>()=>e.onKey(n=>t(n)()),$D=e=>t=>()=>e.onLineFeed(t),kD=e=>t=>()=>e.onRender(n=>t(n)()),OD=e=>t=>()=>e.onWriteParsed(t),HD=e=>t=>()=>e.onResize(n=>t(n)()),PD=e=>t=>()=>e.onScroll(n=>t(n)()),ND=e=>t=>()=>e.onSelectionChange(t),BD=e=>t=>()=>e.onTitleChange(n=>t(n)());var WD=e=>t=>()=>e.open(t);var UD=e=>t=>n=>()=>e.write(t,n),qD=e=>t=>n=>()=>e.writeln(t,n);var rx=e=>t=>()=>e.loadAddon(t);var ox=V(ze);var ax=function(){var e=ox(Oc);return function(t){return e(nx(t))}}();var ix=function(e){return function(t){return ex(Hf(e))(Hf(t))}},ux=function(e){var t=M_(e);return function(n){return function(h){return rx(n)(t(h))}}};var sx=function(){var e=ox(Oc);return function(t){return e(tx(t))}}();var F_=V(ci),B_=De(be),za=V(ze),VD=MA(Xd)(_d),cx=zt(Vt),A_=hl(ES),B8=ux(KA),x_=de(tr),GD=cx(tr),Hc=Tr(Ir),I_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),R_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),KD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),QD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),XD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),YD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),k_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),O_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ZD=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),H_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),P_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),N_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),W8={map:function(e){return function(t){if(t instanceof I_)return new I_(F_(e)(t.value0));if(t instanceof jD)return new jD(function(n){return e(t.value0(n))});if(t instanceof JD)return new JD(function(n){return e(t.value0(n))});if(t instanceof R_)return new R_(function(n){return e(t.value0(n))});if(t instanceof KD)return new KD(function(n){return e(t.value0(n))});if(t instanceof $_)return new $_(F_(e)(t.value0));if(t instanceof QD)return new QD(F_(e)(t.value0));if(t instanceof XD)return new XD(F_(e)(t.value0));if(t instanceof YD)return new YD(function(n){return e(t.value0(n))});if(t instanceof k_)return new k_(t.value0,e(t.value1));if(t instanceof O_)return new O_(t.value0,e(t.value1));if(t instanceof ZD)return new ZD(function(n){return e(t.value0(n))});if(t instanceof H_)return new H_(function(n){return e(t.value0(n))});if(t instanceof P_)return new P_(function(n){return e(t.value0(n))});if(t instanceof N_)return new N_(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},U8=si(W8),kn=function(e){return bt(new O_(e,void 0))},cn=function(e){return bt(new k_(e,void 0))};var eb=function(e){return bt(new $_(e))},q8=function(){return bt(new H_(B_))}(),z8=function(){return bt(new P_(B_))}();var lx=function(e){var t=e.MonadEffect0(),n=t.Monad0(),h=xu(n.Bind1()),v=de(h),u=Or(Gs(n)),a=vi(t),p=PA(a),s=Ze(a),o=ar(_E(e)),i=cx(h);return function(c){var f=js(c),l=p(f),r=function(d){if(d instanceof I_)return v(u)(function(_){return _i(l(d.value0))(FD(_))});if(d instanceof jD)return v(u)(function(_){return s(za(d.value0)(sx(_)))});if(d instanceof JD)return v(u)(function(_){return s(za(d.value0)(ax(_)))});if(d instanceof R_)return v(u)(function(_){return s(za(d.value0)(TD(_)))});if(d instanceof KD)return v(u)(function(_){return s(za(d.value0)(MD(_)))});if(d instanceof $_)return v(u)(function(_){return s(_i(VD(d.value0))(CD(Vf(_))))});if(d instanceof QD)return v(u)(function(_){return s(_i(VD(d.value0))(wD(Vf(_))))});if(d instanceof XD)return v(u)(function(_){return s(_i(VD(d.value0))(SD(Vf(_))))});if(d instanceof YD)return v(u)(function(_){return s(za(d.value0)(LD(_)))});if(d instanceof k_)return v(u)(function(_){return v(o(Ml))(function(m){return i(s(UD(_)(d.value0)(pm(Tl(d.value1)(m)))))(function(){return o(mm(m))})})});if(d instanceof O_)return v(u)(function(_){return v(o(Ml))(function(m){return i(s(qD(_)(d.value0)(pm(Tl(d.value1)(m)))))(function(){return o(mm(m))})})});if(d instanceof ZD)return s(za(function(_){return d.value0(fd(_))})(A_(C_)));if(d instanceof H_)return s(za(function(_){return d.value0(fd(_))})(A_(T_)));if(d instanceof P_)return s(za(function(_){return d.value0(fd(_))})(A_(S_)));if(d instanceof N_)return v(u)(function(_){return s(za(function(m){return d.value1(Yb(m))})(A_(B8(_)(d.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[d.constructor.name])};return U8(f)(r)}},tb=function(){return bt(new R_(B_))}(),Va=function(e){return bt(I_.create(e))};var fx=function(e){var t=M_(e);return function(n){return bt(new N_(t(n),B_))}},V8=fx(JA),G8=fx(jA),dx=function(e){return x_(z8)(function(t){return GD(function(){if(t instanceof J)return Hc(e)(kn("WebGL Addon unavailable"));if(t instanceof z)return GD(Hc(e)(cn("Loading WebGL ")))(function(){return x_(V8(t.value0))(function(n){return Hc(e)(function(){return kn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return x_(q8)(function(n){if(n instanceof J)return Hc(e)(kn("WebLinks Addon unavailable"));if(n instanceof z)return GD(Hc(e)(cn("Loading WebLinks ")))(function(){return x_(G8(n.value0))(function(h){return Hc(e)(function(){return kn(h?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var px=e=>()=>e.dispose();var hx={toDisposable:De(be)},J8=function(e){return e.toDisposable},_x=function(e){return{dispose:function(){var t=J8(e);return function(n){return px(t(n))}}()}},vx=function(e){return e.dispose};var mt=de(go),rb=va(no),Q8=V(Wo),X8=lx(Qs)(ku),To=Rr(no),Mo=zt(Vt)(go),Y8=kt(Kt)(wt),Z8=vx(_x(hx)),ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ez=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tz=function(){function e(){}return e.value=new e,e}(),nz=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ab=function(){function e(){}return e.value=new e,e}(),rz=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),oz=function(){function e(){}return e.value=new e,e}(),az=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),iz=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),uz=function(){function e(){}return e.value=new e,e}(),sz=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mx=function(){function e(){}return e.value=new e,e}(),gx=function(){function e(){}return e.value=new e,e}(),io=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cz=function(e){return function(t){return ki([jL(CA),ju([Zh("terminal")])([])])}},lz=function(e){var t=ar(jp(e));return function(n){return mt(rb)(function(h){return t(Q8(z.create)(_i(X8(n))(h.terminal)))})}},fz=function(e){var t=Ze(Ta(e.MonadEffect0())),n=function(l){return mt(t(mr))(function(r){return mt(t(OD(l)(vr(r.listener)(new io(oz.value)))))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},h=function(l){return mt(t(mr))(function(r){return mt(t(BD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(sz.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},v=function(l){return mt(t(mr))(function(r){return mt(t(ND(l)(vr(r.listener)(new io(uz.value)))))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},u=function(l){return mt(t(mr))(function(r){return mt(t(PD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(iz.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},a=function(l){return mt(t(mr))(function(r){return mt(t(HD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(az.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},p=function(l){return mt(t(mr))(function(r){return mt(t(kD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(rz.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},s=function(l){return mt(t(mr))(function(r){return mt(t($D(l)(vr(r.listener)(new io(ab.value)))))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},o=function(l){return mt(t(mr))(function(r){return mt(t(RD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(nz.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},i=function(l){return mt(t(mr))(function(r){return mt(t(ID(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(ob.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},c=function(l){return mt(t(mr))(function(r){return mt(t(xD(l)(function(){var d=vr(r.listener);return function(_){return d(io.create(ez.create(_)))}}())))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})},f=function(l){return mt(t(mr))(function(r){return mt(t(AD(l)(vr(r.listener)(new io(tz.value)))))(function(d){return mt(gr(r.emitter))(function(){return To(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=Mn(d)(_.disposables),m})})})})};return function(l){if(l instanceof mx)return mt(Vu("terminal"))(function(r){if(r instanceof J)return t(iu("no terminal element"));if(r instanceof z)return mt(rb)(function(d){return Mo(t(WD(d.terminal)(r.value0)))(function(){return Mo(f(d.terminal))(function(){return Mo(c(d.terminal))(function(){return Mo(o(d.terminal))(function(){return Mo(s(d.terminal))(function(){return Mo(p(d.terminal))(function(){return Mo(n(d.terminal))(function(){return Mo(a(d.terminal))(function(){return Mo(u(d.terminal))(function(){return Mo(v(d.terminal))(function(){return Mo(h(d.terminal))(function(){return i(d.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 73, column 5 - line 88, column 28): "+[r.constructor.name])});if(l instanceof gx)return mt(rb)(function(r){return t(Y8(Z8)(r.disposables))});if(l instanceof io)return Vo(l.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 70, column 16 - line 92, column 23): "+[l.constructor.name])}},yx=function(e){return Fa({initialState:function(t){return{terminal:t,disposables:[]}},render:cz(e),eval:La({handleAction:fz(e),handleQuery:lz(e),receive:yr.receive,initialize:new z(mx.value),finalize:new z(gx.value)})})};var dz=me(Gt),Sx={reflectSymbol:function(){return"terminal"}},pz=o_()(Sx)(qr),Ex=em(zu),ib=de(Ex),ub=It(tp)(zu),hz=qu()(Sx)(qr),_z=Z(Go),bx=V(Ma),vz=It(pT),Tx=va(no),Pc=Z(tm(zu)),W_=zt(Vt)(Ex),Mx=RS(no),sb=Rr(Mx),mz=va(Mx),gz=IS(Eg),Cx=de(go),yz=me(XF),Dz=ot(YF),bz=Rr(no),wx=At(Ma),Cz=Z(su),Lx=function(){return nn.value}(),wz=function(e){var t=yx(e);return function(n){return ki(dz([function(){if(n.terminal instanceof J)return ki([]);if(n.terminal instanceof z)return pz(Lx)(void 0)(t)(n.terminal.value0)(N0.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(iA(n.windows)))}},Fx=function(e){var t=e.MonadEffect0().Monad0(),n=vz(t),h=si(oA(t.Bind1().Apply0().Functor0()))(gz);return function(v){var u=function(a){if(a instanceof Pf)return ib(ub(hz(Lx)(void 0)(a.value0)))(function(p){return _z(p)});if(a instanceof Nf)return bx(z.create)(n(a.value0));if(a instanceof Bf)return ib(ub(Tx))(function(p){return Pc(a.value0(p.shell))});if(a instanceof Wf)return W_(sb(function(p){var s={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(s[o]=p[o]);return s.shell=a.value0,s}))(function(){return Pc(a.value1)});if(a instanceof Uf)return W_(sb(function(p){var s={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(s[o]=p[o]);return s.interpreter=a.value0,s}))(function(){return Pc(a.value1)});if(a instanceof l_)return W_(ub(Vo(a.value0)))(function(){return Pc(a.value1)});if(a instanceof qf)return bx(z.create)(a.value0);if(a instanceof f_)return ib(mz)(function(p){return Pc(a.value0(p.windows))});if(a instanceof zf)return W_(sb(function(p){var s={};for(var o in p)({}).hasOwnProperty.call(p,o)&&(s[o]=p[o]);return s.windows=a.value0(p.windows),s}))(function(){return Pc(a.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[a.constructor.name])};return AS(h(u)(v))}},Sz=function(e){var t=Ze(Ta(e.MonadEffect0())),n=Fx(e);return function(h){if(h instanceof P0)return Cx(t(ix(yz(H0(RA)('"Cascadia Code", Menlo, monospace'))(H0($A)(!0)))(Dz)))(function(v){return bz(function(u){var a={};for(var p in u)({}).hasOwnProperty.call(u,p)&&(a[p]=u[p]);return a.terminal=new z(v),a})});if(h instanceof N0)return Cx(Tx)(function(v){return wx(n(v.interpreter(h.value0)))});if(h instanceof B0)return wx(n(h.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[h.constructor.name])}},Ax=function(e){return Fa({initialState:function(t){return{shell:t,interpreter:Se(Cz(void 0)),terminal:J.value,windows:Si}},render:wz(e),eval:La({handleAction:Sz(e),handleQuery:Fx(e),receive:yr.receive,initialize:new z(P0.value),finalize:yr.finalize})})};var cb=function(e){return function(t){var n=Su(t.Profunctor0()),h=Hs(t);return function(v){return n(e)(function(u){return u.value1(u.value0)})(h(v))}}};var Ix=Z(su),xx=V(Tt),Rx=zt(Vt),jn=Rx(gs),Ga=de(gs),Lz=_o(jt),Fz=Mm(jt)(wt),Az=Da(jt),xz=De(be),Gf=Rx(tr),Iz=Tr(Ir),U_=de(tr),Rz=gn(wv)(Ir),$z=kt(Ir)(pn),$x=kt(su)(pn);var ja={cmd:function(e){return cb(function(t){return new te(t.command,function(n){return{prompt:t.prompt,command:n,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)},prompt:function(e){return cb(function(t){return new te(t.prompt,function(n){return{prompt:n,command:t.command,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)}},Jf=function(e){var t=Ze(kc(e));return function(n){return function(h){return h instanceof ob?n(h.value0):h instanceof ab?t(iu("line feed")):Ix(void 0)}}},Kf=function(e){return e.prompt},q_=Kf(ja)(li),Qf=function(e){return e.cmd},kx=Qf(ja),jf=kx(Xr),Ox=kx(li),kz=function(e){return function(t){return function(n){var h=function(u){var a=`\r
  help\r
    show this help text`,p=function(s){return`\r
  `+(s.name+(`\r
    `+kr(`\r
    `)(s.description)))};return a+kr("")(xx(p)(u))},v=function(u){return jn(Nt(kn(h(n))))(function(){return Ga(Er)(function(a){return jn(Nt(cn(nr(a)(q_))))(function(){return Gn(fo(jf)(""))})})})};return Lz("help")(v)(Fz(xx(function(u){return new te(u.name,u.cmd)})(n)))}}},z_=function(e){var t=kz(e);return function(n){var h=t(n);return function(v){var u=h(v);return Ga(Er)(function(a){var p=cl(function(i){return!cS(i)})(Jv(" ")(nr(a)(Ox))),s=qd(p);if(s instanceof J)return jn(Nt(kn("")))(function(){return Ga(Er)(function(i){return jn(Nt(cn(nr(i)(q_))))(function(){return Gn(fo(jf)(""))})})});if(s instanceof z){var o=Az(s.value0)(u);if(o instanceof z)return o.value0(nt([])(xz)(Bv(p)));if(o instanceof J)return jn(Nt(kn(`\r
unrecognised command "`+(s.value0+'" - type "help" to see the available commands'))))(function(){return Ga(Er)(function(i){return jn(Nt(cn(nr(i)(q_))))(function(){return Gn(fo(jf)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[o.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[s.constructor.name])})}}};var Oz=function(e){return function(t){var n=Qf(t),h=n(li),v=Kf(t)(li),u=n(Xr);return Ga(Er)(function(a){return jn(Nt(U_(eb(AA))(function(p){var s=p===0;return s?Gf(cn("\x1BM"))(function(){return U_(eb(U_(xA)(function(o){return U_(FA(o-1|0))(function(i){return Rz(LA)(i)})})))(function(o){return Gf(cn("\x9BK"))(function(){return Ye($z)(o)(function(i){var c=(qs(nr(a)(h))-1|0)<=i;return c?Gf(cn(nr(a)(v)))(function(){return cn(jd(1)(nr(a)(h)))}):cn(jd(1)(aS(i)(nr(a)(h))))})})})}):Iz(qs(nr(a)(h))>0)(cn("\b \b"))})))(function(){return Gn(Pd(u)(jd(1)))})})}},Xf=function(e){var t=Oz(e),n=Ze(kc(e));return function(h){var v=Qf(h)(Xr),u=Kf(h)(li),a=t(h);return function(p){return function(s){return s===""?jn(Gn(fo(v)("")))(function(){return Ga(Er)(function(o){return Nt(Gf(cn("^C"))(function(){return cn(`\r
`+nr(o)(u))}))})}):s==="\r"?p:s==="\x7F"?a:s>=" "&&s<="~"||s>="\xA0"?jn(Gn(Pd(v)(function(o){return o+s})))(function(){return Nt(cn(s))}):jn(n(iu("non-printable: "+s)))(function(){return Ix(void 0)})}}}},Hz=function(e){var t=e.MonadEffect0(),n=Jf(t),h=Xf(t)(ja),v=z_(e);return function(u){var a=v(u);return Ga(Er)(function(p){return jn(Ye($x)(p.foreground)(function(s){return s.kill}))(function(){return jn(Gn(function(s){return{prompt:s.prompt,command:s.command,commandEnv:s.commandEnv,foreground:J.value}}))(function(){return jn(Gn(fo(jf)("")))(function(){return Ga(Er)(function(s){return jn(Nt(Gf(Va(Ds(!0)))(function(){return cn(`\r
`+nr(s)(q_))})))(function(){return cu(n(h(a(p.commandEnv))))})})})})})})}},Pz=function(e){return Ga(Er)(function(t){return jn(Ye($x)(t.foreground)(function(n){return n.stdin(nr(t)(Ox))}))(function(){return jn(Nt(cn(`\r
`)))(function(){return Gn(fo(jf)(""))})})})},Hx=function(e){var t=e.MonadEffect0(),n=Jf(t),h=Hz(e),v=Xf(t)(ja),u=Pz(e);return function(a){var p=h(a);return n(function(s){return s===""?jn(Nt(cn("^C")))(function(){return p}):v(u)(s)})}};var V_=de(gs),_b=zt(Vt),Wr=_b(gs),G_=me(pu),Bz=Kf(ja)(li),lb=Qf(ja)(Xr),Wz=oa(aA),j_=de(tr),Px=Me(Io),Uz=Me(Kb),qz=Me(ca),Wx=W0(),vb={reflectSymbol:function(){return"button"}},zz=Wx(vb)(qr)(),Vz=At(rA),Gz=U0()(vb)(qr)(),Ux=q0(),jz=Ux(vb)(qr)(),hb=_b(tr),qx={reflectSymbol:function(){return"editor"}},Nx=Ux(qx)(qr)(),Jz=Wx(qx)(qr)(),Kz=Z(su),Qz=V(Tt),Xz=kt(su)(wt),fb=de(yn),Yz=Ax(Qs),Zz=_b(yn),eV=At(Wo),tV=Jf(wn),nV=Xf(wn)(ja),rV=z_(Qs)(ku),db=function(){return nn.value}(),pb=function(){return nn.value}(),zx=function(e){var t=TT(e),n=Hx(e),h=e.MonadEffect0(),v=Jf(h),u=Xf(h)(ja),a=z_(e),p=nF(e),s=Ze(kc(h)),o=ar(nA(e));return function(i){var c=n(i),f=a(i),l=p(i),r=V_(Er)(function(_){return Wr(Nt(cn(`\r
`+nr(_)(Bz))))(function(){return Gn(fo(lb)(""))})}),d=function(_){return Se(Wz(_)(r))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:d(Nt(j_(tb)(function(){var _=G_(`\r
`);return function(m){return kn(_(Px(m)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:d(Nt(j_(tb)(function(){var _=G_(`\r
`);return function(m){return kn(_(Px(m)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:d(Nt(j_(Va(BA))(function(){var _=G_(`\r
`);return function(m){return kn(_(Uz(m)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:d(Nt(Va(Ds(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:d(Nt(Va(Ds(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:d(Nt(j_(Va(NA))(function(){var _=G_(`\r
`);return function(m){return kn(_(qz(m)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(_){return Wr(Gn(fo(lb)("")))(function(){return Wr(zz(pb)(void 0)(t)(kr(" ")(_))(Se(Nt(kn("click!")))))(function(){var m={stdin:function(y){return Vz(Gz(pb)(void 0)(new ET(y,void 0)))},kill:jz(pb)(void 0)};return Wr(Gn(function(y){return{prompt:y.prompt,command:y.command,commandEnv:y.commandEnv,foreground:new z(m)}}))(function(){return Wr(Nt(hb(Va(Ds(!1)))(function(){return cn(`\r
`)})))(function(){return cu(c)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(_){return _.length===1&&qs(_[0])>0?Wr(Gn(fo(lb)("")))(function(){var m=Wr(Nx(db)(void 0))(function(){return Wr(Nt(cn("> ")))(function(){return cu(v(u(f(zx(e)(i)))))})});return Wr(Jz(db)(void 0)(l)(_[0])(Se(m)))(function(){var y={stdin:Se(Kz(void 0)),kill:Nx(db)(void 0)};return Wr(Gn(function(b){return{prompt:b.prompt,command:b.command,commandEnv:b.commandEnv,foreground:new z(y)}}))(function(){return Wr(Nt(hb(Va(Ds(!1)))(function(){return cn(`\r
`)})))(function(){return cu(c)})})})}):d(Nt(kn(`\r
this command expects a single file name as its argument`)))(_)}},{name:"ls",description:["lists files in the file system"],cmd:d(V_(s(Af))(function(_){return V_(o(LL(_)))(function(m){return Nt(kn(`\r
`+kr(" ")(Qz(function(y){return y})(m))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(_){return V_(s(Af))(function(m){return Wr(Xz(function(y){return o(FL(m)(y))})(_))(function(){return r})})}}]}},Bx=zx(Qs)(ku),Vx=mF(fb(gF)(function(e){return fb(Ml)(function(t){var n={prompt:"> ",command:"",foreground:J.value,commandEnv:Bx};return fb(QF(Yz)(n)(e))(function(h){return Zz(eV(h.query(Wr(Nt(hb(dx(!0))(function(){return cn("> ")})))(function(){return cu(tV(nV(rV(Bx))))}))))(function(){return Tl(h.query)(t)})})})}));Vx();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
