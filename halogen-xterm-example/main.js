(()=>{var $O=Object.create;var GS=Object.defineProperty;var kO=Object.getOwnPropertyDescriptor;var OO=Object.getOwnPropertyNames;var HO=Object.getPrototypeOf,PO=Object.prototype.hasOwnProperty;var _t=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var NO=(e,t,n,c)=>{if(t&&typeof t=="object"||typeof t=="function")for(let v of OO(t))!PO.call(e,v)&&v!==n&&GS(e,v,{get:()=>t[v],enumerable:!(c=kO(t,v))||c.enumerable});return e};var Aa=(e,t,n)=>(n=e!=null?$O(HO(e)):{},NO(t||!e||!e.__esModule?GS(n,"default",{value:e,enumerable:!0}):n,e));var Bh=_t((bF,Nh)=>{(function(){var e="ace",t=function(){return this}();if(!t&&typeof window<"u"&&(t=window),!e&&typeof requirejs<"u")return;var n=function(u,r,i){if(typeof u!="string"){n.original?n.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(i=r),n.modules[u]||(n.payloads[u]=i,n.modules[u]=null)};n.modules={},n.payloads={};var c=function(u,r,i){if(typeof r=="string"){var l=a(u,r);if(l!=null)return i&&i(),l}else if(Object.prototype.toString.call(r)==="[object Array]"){for(var d=[],f=0,o=r.length;f<o;++f){var h=a(u,r[f]);if(h==null&&v.original)return;d.push(h)}return i&&i.apply(null,d)||!0}},v=function(u,r){var i=c("",u,r);return i==null&&v.original?v.original.apply(this,arguments):i},s=function(u,r){if(r.indexOf("!")!==-1){var i=r.split("!");return s(u,i[0])+"!"+s(u,i[1])}if(r.charAt(0)=="."){var l=u.split("/").slice(0,-1).join("/");for(r=l+"/"+r;r.indexOf(".")!==-1&&d!=r;){var d=r;r=r.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return r},a=function(u,r){r=s(u,r);var i=n.modules[r];if(!i){if(i=n.payloads[r],typeof i=="function"){var l={},d={id:r,uri:"",exports:l,packaged:!0},f=function(h,_){return c(r,h,_)},o=i(f,l,d);l=o||d.exports,n.modules[r]=l,delete n.payloads[r]}i=n.modules[r]=l||i}return i};function p(u){var r=t;u&&(t[u]||(t[u]={}),r=t[u]),(!r.define||!r.define.packaged)&&(n.original=r.define,r.define=n,r.define.packaged=!0),(!r.require||!r.require.packaged)&&(v.original=r.require,r.require=v,r.require.packaged=!0)}p(e)})();ace.define("ace/lib/es6-shim",["require","exports","module"],function(e,t,n){function c(v,s,a){Object.defineProperty(v,s,{value:a,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||c(String.prototype,"startsWith",function(v,s){return s=s||0,this.lastIndexOf(v,s)===s}),String.prototype.endsWith||c(String.prototype,"endsWith",function(v,s){var a=this;(s===void 0||s>a.length)&&(s=a.length),s-=v.length;var p=a.indexOf(v,s);return p!==-1&&p===s}),String.prototype.repeat||c(String.prototype,"repeat",function(v){for(var s="",a=this;v>0;)v&1&&(s+=a),(v>>=1)&&(a+=a);return s}),String.prototype.includes||c(String.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Object.assign||(Object.assign=function(v){if(v==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(v),a=1;a<arguments.length;a++){var p=arguments[a];p!=null&&Object.keys(p).forEach(function(u){s[u]=p[u]})}return s}),Object.values||(Object.values=function(v){return Object.keys(v).map(function(s){return v[s]})}),Array.prototype.find||c(Array.prototype,"find",function(v){for(var s=this.length,a=arguments[1],p=0;p<s;p++){var u=this[p];if(v.call(a,u,p,this))return u}}),Array.prototype.findIndex||c(Array.prototype,"findIndex",function(v){for(var s=this.length,a=arguments[1],p=0;p<s;p++){var u=this[p];if(v.call(a,u,p,this))return p}}),Array.prototype.includes||c(Array.prototype,"includes",function(v,s){return this.indexOf(v,s)!=-1}),Array.prototype.fill||c(Array.prototype,"fill",function(v){for(var s=this,a=s.length>>>0,p=arguments[1],u=p>>0,r=u<0?Math.max(a+u,0):Math.min(u,a),i=arguments[2],l=i===void 0?a:i>>0,d=l<0?Math.max(a+l,0):Math.min(l,a);r<d;)s[r]=v,r++;return s}),Array.of||c(Array,"of",function(){return Array.prototype.slice.call(arguments)})});ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(e,t,n){"use strict";e("./es6-shim")});ace.define("ace/lib/deep_copy",["require","exports","module"],function(e,t,n){t.deepCopy=function c(v){if(typeof v!="object"||!v)return v;var s;if(Array.isArray(v)){s=[];for(var a=0;a<v.length;a++)s[a]=c(v[a]);return s}if(Object.prototype.toString.call(v)!=="[object Object]")return v;s={};for(var a in v)s[a]=c(v[a]);return s}});ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";t.last=function(s){return s[s.length-1]},t.stringReverse=function(s){return s.split("").reverse().join("")},t.stringRepeat=function(s,a){for(var p="";a>0;)a&1&&(p+=s),(a>>=1)&&(s+=s);return p};var c=/^\s\s*/,v=/\s\s*$/;t.stringTrimLeft=function(s){return s.replace(c,"")},t.stringTrimRight=function(s){return s.replace(v,"")},t.copyObject=function(s){var a={};for(var p in s)a[p]=s[p];return a},t.copyArray=function(s){for(var a=[],p=0,u=s.length;p<u;p++)s[p]&&typeof s[p]=="object"?a[p]=this.copyObject(s[p]):a[p]=s[p];return a},t.deepCopy=e("./deep_copy").deepCopy,t.arrayToMap=function(s){for(var a={},p=0;p<s.length;p++)a[s[p]]=1;return a},t.createMap=function(s){var a=Object.create(null);for(var p in s)a[p]=s[p];return a},t.arrayRemove=function(s,a){for(var p=0;p<=s.length;p++)a===s[p]&&s.splice(p,1)},t.escapeRegExp=function(s){return s.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(s){return(""+s).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(s,a){var p=[];return s.replace(a,function(u){p.push({offset:arguments[arguments.length-2],length:u.length})}),p},t.deferredCall=function(s){var a=null,p=function(){a=null,s()},u=function(r){return u.cancel(),a=setTimeout(p,r||0),u};return u.schedule=u,u.call=function(){return this.cancel(),s(),u},u.cancel=function(){return clearTimeout(a),a=null,u},u.isPending=function(){return a},u},t.delayedCall=function(s,a){var p=null,u=function(){p=null,s()},r=function(i){p==null&&(p=setTimeout(u,i||a))};return r.delay=function(i){p&&clearTimeout(p),p=setTimeout(u,i||a)},r.schedule=r,r.call=function(){this.cancel(),s()},r.cancel=function(){p&&clearTimeout(p),p=null},r.isPending=function(){return p},r},t.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},t.skipEmptyMatch=function(s,a,p){return p&&s.codePointAt(a)>65535?2:1}});ace.define("ace/lib/useragent",["require","exports","module"],function(e,t,n){"use strict";t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS};var c=typeof navigator=="object"?navigator:{},v=(/mac|win|linux/i.exec(c.platform)||["other"])[0].toLowerCase(),s=c.userAgent||"",a=c.appName||"";t.isWin=v=="win",t.isMac=v=="mac",t.isLinux=v=="linux",t.isIE=a=="Microsoft Internet Explorer"||a.indexOf("MSAppHost")>=0?parseFloat((s.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((s.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=s.match(/ Gecko\/\d+/),t.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",t.isWebKit=parseFloat(s.split("WebKit/")[1])||void 0,t.isChrome=parseFloat(s.split(" Chrome/")[1])||void 0,t.isSafari=parseFloat(s.split(" Safari/")[1])&&!t.isChrome||void 0,t.isEdge=parseFloat(s.split(" Edge/")[1])||void 0,t.isAIR=s.indexOf("AdobeAIR")>=0,t.isAndroid=s.indexOf("Android")>=0,t.isChromeOS=s.indexOf(" CrOS ")>=0,t.isIOS=/iPad|iPhone|iPod/.test(s)&&!window.MSStream,t.isIOS&&(t.isMac=!0),t.isMobile=t.isIOS||t.isAndroid});ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./useragent"),v="http://www.w3.org/1999/xhtml";t.buildDom=function i(l,d,f){if(typeof l=="string"&&l){var o=document.createTextNode(l);return d&&d.appendChild(o),o}if(!Array.isArray(l))return l&&l.appendChild&&d&&d.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var h=[],_=0;_<l.length;_++){var m=i(l[_],d,f);m&&h.push(m)}return h}var y=document.createElement(l[0]),C=l[1],E=1;C&&typeof C=="object"&&!Array.isArray(C)&&(E=2);for(var _=E;_<l.length;_++)i(l[_],y,f);return E==2&&Object.keys(C).forEach(function(D){var g=C[D];D==="class"?y.className=Array.isArray(g)?g.join(" "):g:typeof g=="function"||D=="value"||D[0]=="$"?y[D]=g:D==="ref"?f&&(f[g]=y):D==="style"?typeof g=="string"&&(y.style.cssText=g):g!=null&&y.setAttribute(D,g)}),d&&d.appendChild(y),y},t.getDocumentHead=function(i){return i||(i=document),i.head||i.getElementsByTagName("head")[0]||i.documentElement},t.createElement=function(i,l){return document.createElementNS?document.createElementNS(l||v,i):document.createElement(i)},t.removeChildren=function(i){i.innerHTML=""},t.createTextNode=function(i,l){var d=l?l.ownerDocument:document;return d.createTextNode(i)},t.createFragment=function(i){var l=i?i.ownerDocument:document;return l.createDocumentFragment()},t.hasCssClass=function(i,l){var d=(i.className+"").split(/\s+/g);return d.indexOf(l)!==-1},t.addCssClass=function(i,l){t.hasCssClass(i,l)||(i.className+=" "+l)},t.removeCssClass=function(i,l){for(var d=i.className.split(/\s+/g);;){var f=d.indexOf(l);if(f==-1)break;d.splice(f,1)}i.className=d.join(" ")},t.toggleCssClass=function(i,l){for(var d=i.className.split(/\s+/g),f=!0;;){var o=d.indexOf(l);if(o==-1)break;f=!1,d.splice(o,1)}return f&&d.push(l),i.className=d.join(" "),f},t.setCssClass=function(i,l,d){d?t.addCssClass(i,l):t.removeCssClass(i,l)},t.hasCssString=function(i,l){var d=0,f;if(l=l||document,f=l.querySelectorAll("style")){for(;d<f.length;)if(f[d++].id===i)return!0}},t.removeElementById=function(i,l){l=l||document,l.getElementById(i)&&l.getElementById(i).remove()};var s,a=[];t.useStrictCSP=function(i){s=i,i==!1?p():a||(a=[])};function p(){var i=a;a=null,i&&i.forEach(function(l){u(l[0],l[1])})}function u(i,l,d){if(!(typeof document>"u")){if(a){if(d)p();else if(d===!1)return a.push([i,l])}if(!s){var f=d;!d||!d.getRootNode?f=document:(f=d.getRootNode(),(!f||f==d)&&(f=document));var o=f.ownerDocument||f;if(l&&t.hasCssString(l,f))return null;l&&(i+=`
/*# sourceURL=ace/css/`+l+" */");var h=t.createElement("style");h.appendChild(o.createTextNode(i)),l&&(h.id=l),f==o&&(f=t.getDocumentHead(o)),f.insertBefore(h,f.firstChild)}}}if(t.importCssString=u,t.importCssStylsheet=function(i,l){t.buildDom(["link",{rel:"stylesheet",href:i}],t.getDocumentHead(l))},t.scrollbarWidth=function(i){var l=t.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var d=t.createElement("ace_outer"),f=d.style;f.position="absolute",f.left="-10000px",f.overflow="hidden",f.width="200px",f.minWidth="0px",f.height="150px",f.display="block",d.appendChild(l);var o=i&&i.documentElement||document&&document.documentElement;if(!o)return 0;o.appendChild(d);var h=l.offsetWidth;f.overflow="scroll";var _=l.offsetWidth;return h===_&&(_=d.clientWidth),o.removeChild(d),h-_},t.computedStyle=function(i,l){return window.getComputedStyle(i,"")||{}},t.setStyle=function(i,l,d){i[l]!==d&&(i[l]=d)},t.HAS_CSS_ANIMATION=!1,t.HAS_CSS_TRANSFORMS=!1,t.HI_DPI=c.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,c.isChromeOS&&(t.HI_DPI=!1),typeof document<"u"){var r=document.createElement("div");t.HI_DPI&&r.style.transform!==void 0&&(t.HAS_CSS_TRANSFORMS=!0),!c.isEdge&&typeof r.style.animationName<"u"&&(t.HAS_CSS_ANIMATION=!0),r=null}t.HAS_CSS_TRANSFORMS?t.translate=function(i,l,d){i.style.transform="translate("+Math.round(l)+"px, "+Math.round(d)+"px)"}:t.translate=function(i,l,d){i.style.top=Math.round(d)+"px",i.style.left=Math.round(l)+"px"}});ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./dom");t.get=function(v,s){var a=new XMLHttpRequest;a.open("GET",v,!0),a.onreadystatechange=function(){a.readyState===4&&s(a.responseText)},a.send(null)},t.loadScript=function(v,s){var a=c.getDocumentHead(),p=document.createElement("script");p.src=v,a.appendChild(p),p.onload=p.onreadystatechange=function(u,r){(r||!p.readyState||p.readyState=="loaded"||p.readyState=="complete")&&(p=p.onload=p.onreadystatechange=null,r||s())}},t.qualifyURL=function(v){var s=document.createElement("a");return s.href=v,s.href}});ace.define("ace/lib/oop",["require","exports","module"],function(e,t,n){"use strict";t.inherits=function(c,v){c.super_=v,c.prototype=Object.create(v.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(c,v){for(var s in v)c[s]=v[s];return c},t.implement=function(c,v){t.mixin(c,v)}});ace.define("ace/lib/event_emitter",["require","exports","module"],function(e,t,n){"use strict";var c={},v=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};c._emit=c._dispatchEvent=function(a,p){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var u=this._eventRegistry[a]||[],r=this._defaultHandlers[a];if(!(!u.length&&!r)){(typeof p!="object"||!p)&&(p={}),p.type||(p.type=a),p.stopPropagation||(p.stopPropagation=v),p.preventDefault||(p.preventDefault=s),u=u.slice();for(var i=0;i<u.length&&(u[i](p,this),!p.propagationStopped);i++);if(r&&!p.defaultPrevented)return r(p,this)}},c._signal=function(a,p){var u=(this._eventRegistry||{})[a];if(u){u=u.slice();for(var r=0;r<u.length;r++)u[r](p,this)}},c.once=function(a,p){var u=this;if(this.on(a,function r(){u.off(a,r),p.apply(null,arguments)}),!p)return new Promise(function(r){p=r})},c.setDefaultHandler=function(a,p){var u=this._defaultHandlers;if(u||(u=this._defaultHandlers={_disabled_:{}}),u[a]){var r=u[a],i=u._disabled_[a];i||(u._disabled_[a]=i=[]),i.push(r);var l=i.indexOf(p);l!=-1&&i.splice(l,1)}u[a]=p},c.removeDefaultHandler=function(a,p){var u=this._defaultHandlers;if(u){var r=u._disabled_[a];if(u[a]==p)r&&this.setDefaultHandler(a,r.pop());else if(r){var i=r.indexOf(p);i!=-1&&r.splice(i,1)}}},c.on=c.addEventListener=function(a,p,u){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[a];return r||(r=this._eventRegistry[a]=[]),r.indexOf(p)==-1&&r[u?"unshift":"push"](p),p},c.off=c.removeListener=c.removeEventListener=function(a,p){this._eventRegistry=this._eventRegistry||{};var u=this._eventRegistry[a];if(u){var r=u.indexOf(p);r!==-1&&u.splice(r,1)}},c.removeAllListeners=function(a){a||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[a]=void 0),this._defaultHandlers&&(this._defaultHandlers[a]=void 0)},t.EventEmitter=c});ace.define("ace/lib/report_error",["require","exports","module"],function(e,t,n){t.reportError=function(v,s){var a=new Error(v);a.data=s,typeof console=="object"&&console.error&&console.error(a),setTimeout(function(){throw a})}});ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error"],function(e,t,n){"no use strict";var c=e("./oop"),v=e("./event_emitter").EventEmitter,s=e("./report_error").reportError,a={setOptions:function(i){Object.keys(i).forEach(function(l){this.setOption(l,i[l])},this)},getOptions:function(i){var l={};if(i)Array.isArray(i)||(l=i,i=Object.keys(l));else{var d=this.$options;i=Object.keys(d).filter(function(f){return!d[f].hidden})}return i.forEach(function(f){l[f]=this.getOption(f)},this),l},setOption:function(i,l){if(this["$"+i]!==l){var d=this.$options[i];if(!d)return p('misspelled option "'+i+'"');if(d.forwardTo)return this[d.forwardTo]&&this[d.forwardTo].setOption(i,l);d.handlesSet||(this["$"+i]=l),d&&d.set&&d.set.call(this,l)}},getOption:function(i){var l=this.$options[i];return l?l.forwardTo?this[l.forwardTo]&&this[l.forwardTo].getOption(i):l&&l.get?l.get.call(this):this["$"+i]:p('misspelled option "'+i+'"')}};function p(i){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var u,r=function(){function i(){this.$defaultOptions={}}return i.prototype.defineOptions=function(l,d,f){return l.$options||(this.$defaultOptions[d]=l.$options={}),Object.keys(f).forEach(function(o){var h=f[o];typeof h=="string"&&(h={forwardTo:h}),h.name||(h.name=o),l.$options[h.name]=h,"initialValue"in h&&(l["$"+h.name]=h.initialValue)}),c.implement(l,a),this},i.prototype.resetOptions=function(l){Object.keys(l.$options).forEach(function(d){var f=l.$options[d];"value"in f&&l.setOption(d,f.value)})},i.prototype.setDefaultValue=function(l,d,f){if(!l){for(l in this.$defaultOptions)if(this.$defaultOptions[l][d])break;if(!this.$defaultOptions[l][d])return!1}var o=this.$defaultOptions[l]||(this.$defaultOptions[l]={});o[d]&&(o.forwardTo?this.setDefaultValue(o.forwardTo,d,f):o[d].value=f)},i.prototype.setDefaultValues=function(l,d){Object.keys(d).forEach(function(f){this.setDefaultValue(l,f,d[f])},this)},i.prototype.setMessages=function(l){u=l},i.prototype.nls=function(l,d){u&&!u[l]&&p("No message found for '"+l+"' in the provided messages, falling back to default English message.");var f=u&&u[l]||l;return d&&(f=f.replace(/\$(\$|[\d]+)/g,function(o,h){return h=="$"?"$":d[h]})),f},i}();r.prototype.warn=p,r.prototype.reportError=s,c.implement(r.prototype,v),t.AppConfig=r});ace.define("ace/theme/textmate-css",["require","exports","module"],function(e,t,n){n.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`});ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(e,t,n){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText=e("./textmate-css"),t.$id="ace/theme/textmate";var c=e("../lib/dom");c.importCssString(t.cssText,t.cssClass,!1)});ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(e,t,n){"no use strict";var c=e("./lib/lang"),v=e("./lib/net"),s=e("./lib/dom"),a=e("./lib/app_config").AppConfig;n.exports=t=new a;var p={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};t.get=function(l){if(!p.hasOwnProperty(l))throw new Error("Unknown config key: "+l);return p[l]},t.set=function(l,d){if(p.hasOwnProperty(l))p[l]=d;else if(this.setDefaultValue("",l,d)==!1)throw new Error("Unknown config key: "+l);l=="useStrictCSP"&&s.useStrictCSP(d)},t.all=function(){return c.copyObject(p)},t.$modes={},t.moduleUrl=function(l,d){if(p.$moduleUrls[l])return p.$moduleUrls[l];var f=l.split("/");d=d||f[f.length-2]||"";var o=d=="snippets"?"/":"-",h=f[f.length-1];if(d=="worker"&&o=="-"){var _=new RegExp("^"+d+"[\\-_]|[\\-_]"+d+"$","g");h=h.replace(_,"")}(!h||h==d)&&f.length>1&&(h=f[f.length-2]);var m=p[d+"Path"];return m==null?m=p.basePath:o=="/"&&(d=o=""),m&&m.slice(-1)!="/"&&(m+="/"),m+d+o+h+this.get("suffix")},t.setModuleUrl=function(l,d){return p.$moduleUrls[l]=d};var u=function(l,d){if(l==="ace/theme/textmate"||l==="./theme/textmate")return d(null,e("./theme/textmate"));if(r)return r(l,d);console.error("loader is not configured")},r;t.setLoader=function(l){r=l},t.dynamicModules=Object.create(null),t.$loading={},t.$loaded={},t.loadModule=function(l,d){var f;if(Array.isArray(l))var o=l[0],h=l[1];else if(typeof l=="string")var h=l;var _=function(m){if(m&&!t.$loading[h])return d&&d(m);if(t.$loading[h]||(t.$loading[h]=[]),t.$loading[h].push(d),!(t.$loading[h].length>1)){var y=function(){u(h,function(C,E){E&&(t.$loaded[h]=E),t._emit("load.module",{name:h,module:E});var D=t.$loading[h];t.$loading[h]=null,D.forEach(function(g){g&&g(E)})})};if(!t.get("packaged"))return y();v.loadScript(t.moduleUrl(h,o),y),i()}};if(t.dynamicModules[h])t.dynamicModules[h]().then(function(m){m.default?_(m.default):_(m)});else{try{f=this.$require(h)}catch{}_(f||t.$loaded[h])}},t.$require=function(l){if(typeof n.require=="function"){var d="require";return n[d](l)}},t.setModuleLoader=function(l,d){t.dynamicModules[l]=d};var i=function(){!p.basePath&&!p.workerPath&&!p.modePath&&!p.themePath&&!Object.keys(p.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),i=function(){})};t.version="1.32.3"});ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(e,t,n){"use strict";e("./lib/fixoldbrowsers");var c=e("./config");c.setLoader(function(p,u){e([p],function(r){u(null,r)})});var v=function(){return this||typeof window<"u"&&window}();n.exports=function(p){c.init=s,c.$require=e,p.require=e,typeof define=="function"&&(p.define=define)},s(!0);function s(p){if(!(!v||!v.document)){c.set("packaged",p||e.packaged||n.packaged||v.define&&define.packaged);var u={},r="",i=document.currentScript||document._currentScript,l=i&&i.ownerDocument||document;i&&i.src&&(r=i.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var d=l.getElementsByTagName("script"),f=0;f<d.length;f++){var o=d[f],h=o.src||o.getAttribute("src");if(h){for(var _=o.attributes,m=0,y=_.length;m<y;m++){var C=_[m];C.name.indexOf("data-ace-")===0&&(u[a(C.name.replace(/^data-ace-/,""))]=C.value)}var E=h.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);E&&(r=E[1])}}r&&(u.base=u.base||r,u.packaged=!0),u.basePath=u.base,u.workerPath=u.workerPath||u.base,u.modePath=u.modePath||u.base,u.themePath=u.themePath||u.base,delete u.base;for(var D in u)typeof u[D]<"u"&&c.set(D,u[D])}}function a(p){return p.replace(/-(.)/g,function(u,r){return r.toUpperCase()})}});ace.define("ace/range",["require","exports","module"],function(e,t,n){"use strict";var c=function(){function v(s,a,p,u){this.start={row:s,column:a},this.end={row:p,column:u}}return v.prototype.isEqual=function(s){return this.start.row===s.start.row&&this.end.row===s.end.row&&this.start.column===s.start.column&&this.end.column===s.end.column},v.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},v.prototype.contains=function(s,a){return this.compare(s,a)==0},v.prototype.compareRange=function(s){var a,p=s.end,u=s.start;return a=this.compare(p.row,p.column),a==1?(a=this.compare(u.row,u.column),a==1?2:a==0?1:0):a==-1?-2:(a=this.compare(u.row,u.column),a==-1?-1:a==1?42:0)},v.prototype.comparePoint=function(s){return this.compare(s.row,s.column)},v.prototype.containsRange=function(s){return this.comparePoint(s.start)==0&&this.comparePoint(s.end)==0},v.prototype.intersects=function(s){var a=this.compareRange(s);return a==-1||a==0||a==1},v.prototype.isEnd=function(s,a){return this.end.row==s&&this.end.column==a},v.prototype.isStart=function(s,a){return this.start.row==s&&this.start.column==a},v.prototype.setStart=function(s,a){typeof s=="object"?(this.start.column=s.column,this.start.row=s.row):(this.start.row=s,this.start.column=a)},v.prototype.setEnd=function(s,a){typeof s=="object"?(this.end.column=s.column,this.end.row=s.row):(this.end.row=s,this.end.column=a)},v.prototype.inside=function(s,a){return this.compare(s,a)==0?!(this.isEnd(s,a)||this.isStart(s,a)):!1},v.prototype.insideStart=function(s,a){return this.compare(s,a)==0?!this.isEnd(s,a):!1},v.prototype.insideEnd=function(s,a){return this.compare(s,a)==0?!this.isStart(s,a):!1},v.prototype.compare=function(s,a){return!this.isMultiLine()&&s===this.start.row?a<this.start.column?-1:a>this.end.column?1:0:s<this.start.row?-1:s>this.end.row?1:this.start.row===s?a>=this.start.column?0:-1:this.end.row===s?a<=this.end.column?0:1:0},v.prototype.compareStart=function(s,a){return this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.compareEnd=function(s,a){return this.end.row==s&&this.end.column==a?1:this.compare(s,a)},v.prototype.compareInside=function(s,a){return this.end.row==s&&this.end.column==a?1:this.start.row==s&&this.start.column==a?-1:this.compare(s,a)},v.prototype.clipRows=function(s,a){if(this.end.row>a)var p={row:a+1,column:0};else if(this.end.row<s)var p={row:s,column:0};if(this.start.row>a)var u={row:a+1,column:0};else if(this.start.row<s)var u={row:s,column:0};return v.fromPoints(u||this.start,p||this.end)},v.prototype.extend=function(s,a){var p=this.compare(s,a);if(p==0)return this;if(p==-1)var u={row:s,column:a};else var r={row:s,column:a};return v.fromPoints(u||this.start,r||this.end)},v.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},v.prototype.isMultiLine=function(){return this.start.row!==this.end.row},v.prototype.clone=function(){return v.fromPoints(this.start,this.end)},v.prototype.collapseRows=function(){return this.end.column==0?new v(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new v(this.start.row,0,this.end.row,0)},v.prototype.toScreenRange=function(s){var a=s.documentToScreenPosition(this.start),p=s.documentToScreenPosition(this.end);return new v(a.row,a.column,p.row,p.column)},v.prototype.moveBy=function(s,a){this.start.row+=s,this.start.column+=a,this.end.row+=s,this.end.column+=a},v}();c.fromPoints=function(v,s){return new c(v.row,v.column,s.row,s.column)},c.comparePoints=function(v,s){return v.row-s.row||v.column-s.column},t.Range=c});ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./oop"),v=function(){var s={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}};s.PRINTABLE_KEYS[173]="-";var a,p;for(p in s.FUNCTION_KEYS)a=s.FUNCTION_KEYS[p].toLowerCase(),s[a]=parseInt(p,10);for(p in s.PRINTABLE_KEYS)a=s.PRINTABLE_KEYS[p].toLowerCase(),s[a]=parseInt(p,10);return c.mixin(s,s.MODIFIER_KEYS),c.mixin(s,s.PRINTABLE_KEYS),c.mixin(s,s.FUNCTION_KEYS),s.enter=s.return,s.escape=s.esc,s.del=s.delete,function(){for(var u=["cmd","ctrl","alt","shift"],r=Math.pow(2,u.length);r--;)s.KEY_MODS[r]=u.filter(function(i){return r&s.KEY_MODS[i]}).join("-")+"-"}(),s.KEY_MODS[0]="",s.KEY_MODS[-1]="input-",s}();c.mixin(t,v),t.default=t,t.keyCodeToString=function(s){var a=v[s];return typeof a!="string"&&(a=String.fromCharCode(s)),a.toLowerCase()}});ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./keys"),v=e("./useragent"),s=null,a=0,p;function u(){p=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return p={passive:!1},!0}})}catch{}}function r(){return p==null&&u(),p}function i(m,y,C){this.elem=m,this.type=y,this.callback=C}i.prototype.destroy=function(){d(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var l=t.addListener=function(m,y,C,E){m.addEventListener(y,C,r()),E&&E.$toDestroy.push(new i(m,y,C))},d=t.removeListener=function(m,y,C){m.removeEventListener(y,C,r())};t.stopEvent=function(m){return t.stopPropagation(m),t.preventDefault(m),!1},t.stopPropagation=function(m){m.stopPropagation&&m.stopPropagation()},t.preventDefault=function(m){m.preventDefault&&m.preventDefault()},t.getButton=function(m){return m.type=="dblclick"?0:m.type=="contextmenu"||v.isMac&&m.ctrlKey&&!m.altKey&&!m.shiftKey?2:m.button},t.capture=function(m,y,C){var E=m&&m.ownerDocument||document;function D(g){y&&y(g),C&&C(g),d(E,"mousemove",y),d(E,"mouseup",D),d(E,"dragstart",D)}return l(E,"mousemove",y),l(E,"mouseup",D),l(E,"dragstart",D),D},t.addMouseWheelListener=function(m,y,C){l(m,"wheel",function(E){var D=.15,g=E.deltaX||0,b=E.deltaY||0;switch(E.deltaMode){case E.DOM_DELTA_PIXEL:E.wheelX=g*D,E.wheelY=b*D;break;case E.DOM_DELTA_LINE:var L=15;E.wheelX=g*L,E.wheelY=b*L;break;case E.DOM_DELTA_PAGE:var S=150;E.wheelX=g*S,E.wheelY=b*S;break}y(E)},C)},t.addMultiMouseDownListener=function(m,y,C,E,D){var g=0,b,L,S,T={2:"dblclick",3:"tripleclick",4:"quadclick"};function M(w){if(t.getButton(w)!==0?g=0:w.detail>1?(g++,g>4&&(g=1)):g=1,v.isIE){var F=Math.abs(w.clientX-b)>5||Math.abs(w.clientY-L)>5;(!S||F)&&(g=1),S&&clearTimeout(S),S=setTimeout(function(){S=null},y[g-1]||600),g==1&&(b=w.clientX,L=w.clientY)}if(w._clicks=g,C[E]("mousedown",w),g>4)g=0;else if(g>1)return C[E](T[g],w)}Array.isArray(m)||(m=[m]),m.forEach(function(w){l(w,"mousedown",M,D)})};var f=function(m){return 0|(m.ctrlKey?1:0)|(m.altKey?2:0)|(m.shiftKey?4:0)|(m.metaKey?8:0)};t.getModifierString=function(m){return c.KEY_MODS[f(m)]};function o(m,y,C){var E=f(y);if(!v.isMac&&s){if(y.getModifierState&&(y.getModifierState("OS")||y.getModifierState("Win"))&&(E|=8),s.altGr)if((3&E)!=3)s.altGr=0;else return;if(C===18||C===17){var D="location"in y?y.location:y.keyLocation;if(C===17&&D===1)s[C]==1&&(a=y.timeStamp);else if(C===18&&E===3&&D===2){var g=y.timeStamp-a;g<50&&(s.altGr=!0)}}}if(C in c.MODIFIER_KEYS&&(C=-1),!E&&C===13){var D="location"in y?y.location:y.keyLocation;if(D===3&&(m(y,E,-C),y.defaultPrevented))return}if(v.isChromeOS&&E&8){if(m(y,E,C),y.defaultPrevented)return;E&=-9}return!E&&!(C in c.FUNCTION_KEYS)&&!(C in c.PRINTABLE_KEYS)?!1:m(y,E,C)}t.addCommandKeyListener=function(m,y,C){var E=null;l(m,"keydown",function(D){s[D.keyCode]=(s[D.keyCode]||0)+1;var g=o(y,D,D.keyCode);return E=D.defaultPrevented,g},C),l(m,"keypress",function(D){E&&(D.ctrlKey||D.altKey||D.shiftKey||D.metaKey)&&(t.stopEvent(D),E=null)},C),l(m,"keyup",function(D){s[D.keyCode]=null},C),s||(h(),l(window,"focus",h))};function h(){s=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!v.isOldIE){var _=1;t.nextTick=function(m,y){y=y||window;var C="zero-timeout-message-"+_++,E=function(D){D.data==C&&(t.stopPropagation(D),d(y,"message",E),m())};l(y,"message",E),y.postMessage(C,"*")}}t.$idleBlocked=!1,t.onIdle=function(m,y){return setTimeout(function C(){t.$idleBlocked?setTimeout(C,100):m()},y)},t.$idleBlockId=null,t.blockIdle=function(m){t.$idleBlockId&&clearTimeout(t.$idleBlockId),t.$idleBlocked=!0,t.$idleBlockId=setTimeout(function(){t.$idleBlocked=!1},m||100)},t.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(m){setTimeout(m,17)}});ace.define("ace/clipboard",["require","exports","module"],function(e,t,n){"use strict";var c;n.exports={lineMode:!1,pasteCancelled:function(){return c&&c>Date.now()-50?!0:c=!1},cancel:function(){c=Date.now()}}});ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../config").nls,s=e("../lib/useragent"),a=e("../lib/dom"),p=e("../lib/lang"),u=e("../clipboard"),r=s.isChrome<18,i=s.isIE,l=s.isChrome>63,d=400,f=e("../lib/keys"),o=f.KEY_MODS,h=s.isIOS,_=h?/\s/:/\n/,m=s.isMobile,y;y=function(C,E){var D=a.createElement("textarea");D.className="ace_text-input",D.setAttribute("wrap","off"),D.setAttribute("autocorrect","off"),D.setAttribute("autocapitalize","off"),D.setAttribute("spellcheck","false"),D.style.opacity="0",C.insertBefore(D,C.firstChild);var g=!1,b=!1,L=!1,S=!1,T="";m||(D.style.fontSize="1px");var M=!1,w=!1,F="",x=0,R=0,A=0,I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,k=0;try{var H=document.activeElement===D}catch{}this.setNumberOfExtraLines=function(j){if(I=Number.MAX_SAFE_INTEGER,$=Number.MIN_SAFE_INTEGER,j<0){k=0;return}k=j},this.setAriaOptions=function(j){if(j.activeDescendant?(D.setAttribute("aria-haspopup","true"),D.setAttribute("aria-autocomplete",j.inline?"both":"list"),D.setAttribute("aria-activedescendant",j.activeDescendant)):(D.setAttribute("aria-haspopup","false"),D.setAttribute("aria-autocomplete","both"),D.removeAttribute("aria-activedescendant")),j.role&&D.setAttribute("role",j.role),j.setLabel&&(D.setAttribute("aria-roledescription",v("editor")),E.session)){var ie=E.session.selection.cursor.row;D.setAttribute("aria-label",v("Cursor at row $0",[ie+1]))}},this.setAriaOptions({role:"textbox"}),c.addListener(D,"blur",function(j){w||(E.onBlur(j),H=!1)},E),c.addListener(D,"focus",function(j){if(!w){if(H=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}E.onFocus(j),s.isEdge?setTimeout(q):q()}},E),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:E.renderer.enableKeyboardAccessibility}),T||l||this.$focusScroll=="browser")return D.focus({preventScroll:!0});var j=D.style.top;D.style.position="fixed",D.style.top="0px";try{var ie=D.getBoundingClientRect().top!=0}catch{return}var de=[];if(ie)for(var Be=D.parentElement;Be&&Be.nodeType==1;)de.push(Be),Be.setAttribute("ace_nocontext","true"),!Be.parentElement&&Be.getRootNode?Be=Be.getRootNode().host:Be=Be.parentElement;D.focus({preventScroll:!0}),ie&&de.forEach(function(nt){nt.removeAttribute("ace_nocontext")}),setTimeout(function(){D.style.position="",D.style.top=="0px"&&(D.style.top=j)},0)},this.blur=function(){D.blur()},this.isFocused=function(){return H},E.on("beforeEndOperation",function(){var j=E.curOp,ie=j&&j.command&&j.command.name;if(ie!="insertstring"){var de=ie&&(j.docChanged||j.selectionChanged);L&&de&&(F=D.value="",bt()),q()}});var U=function(j,ie){for(var de=ie,Be=1;Be<=j-I&&Be<2*k+1;Be++)de+=E.session.getLine(j-Be).length+1;return de},q=h?function(j){if(!(!H||g&&!j||S)){j||(j="");var ie=`
 ab`+j+`cde fg
`;ie!=D.value&&(D.value=F=ie);var de=4,Be=4+(j.length||(E.selection.isEmpty()?0:1));(x!=de||R!=Be)&&D.setSelectionRange(de,Be),x=de,R=Be}}:function(){if(!(L||S)&&!(!H&&!B)){L=!0;var j=0,ie=0,de="";if(E.session){var Be=E.selection,nt=Be.getRange(),ct=Be.cursor.row;ct===$+1?(I=$+1,$=I+2*k):ct===I-1?($=I-1,I=$-2*k):(ct<I-1||ct>$+1)&&(I=ct>k?ct-k:0,$=ct>k?ct+k:2*k);for(var Ge=[],wt=I;wt<=$;wt++)Ge.push(E.session.getLine(wt));if(de=Ge.join(`
`),j=U(nt.start.row,nt.start.column),ie=U(nt.end.row,nt.end.column),nt.start.row<I){var qt=E.session.getLine(I-1);j=nt.start.row<I-1?0:j,ie+=qt.length+1,de=qt+`
`+de}else if(nt.end.row>$){var St=E.session.getLine($+1);ie=nt.end.row>$+1?St.length:nt.end.column,ie+=de.length+1,de=de+`
`+St}else m&&ct>0&&(de=`
`+de,ie+=1,j+=1);de.length>d&&(j<d&&ie<d?de=de.slice(0,d):(de=`
`,j==ie?j=ie=0:(j=0,ie=1)));var xn=de+`

`;xn!=F&&(D.value=F=xn,x=R=xn.length)}if(B&&(x=D.selectionStart,R=D.selectionEnd),R!=ie||x!=j||D.selectionEnd!=R)try{D.setSelectionRange(j,ie),x=j,R=ie}catch{}L=!1}};this.resetSelection=q,H&&E.onFocus();var N=function(j){return j.selectionStart===0&&j.selectionEnd>=F.length&&j.value===F&&F&&j.selectionEnd!==R},K=function(j){L||(g?g=!1:N(D)?(E.selectAll(),q()):m&&D.selectionStart!=x&&q())},O=null;this.setInputHandler=function(j){O=j},this.getInputHandler=function(){return O};var B=!1,W=function(j,ie){if(B&&(B=!1),b)return q(),j&&E.onPaste(j),b=!1,"";for(var de=D.selectionStart,Be=D.selectionEnd,nt=x,ct=F.length-R,Ge=j,wt=j.length-de,qt=j.length-Be,St=0;nt>0&&F[St]==j[St];)St++,nt--;for(Ge=Ge.slice(St),St=1;ct>0&&F.length-St>x-1&&F[F.length-St]==j[j.length-St];)St++,ct--;wt-=St-1,qt-=St-1;var xn=Ge.length-St+1;if(xn<0&&(nt=-xn,xn=0),Ge=Ge.slice(0,xn),!ie&&!Ge&&!wt&&!nt&&!ct&&!qt)return"";S=!0;var vi=!1;return s.isAndroid&&Ge==". "&&(Ge="  ",vi=!0),Ge&&!nt&&!ct&&!wt&&!qt||M?E.onTextInput(Ge):E.onTextInput(Ge,{extendLeft:nt,extendRight:ct,restoreStart:wt,restoreEnd:qt}),S=!1,F=j,x=de,R=Be,A=qt,vi?`
`:Ge},P=function(j){if(L)return we();if(j&&j.inputType){if(j.inputType=="historyUndo")return E.execCommand("undo");if(j.inputType=="historyRedo")return E.execCommand("redo")}var ie=D.value,de=W(ie,!0);(ie.length>d+100||_.test(de)||m&&x<1&&x==R)&&q()},X=function(j,ie,de){var Be=j.clipboardData||window.clipboardData;if(!(!Be||r)){var nt=i||de?"Text":"text/plain";try{return ie?Be.setData(nt,ie)!==!1:Be.getData(nt)}catch(ct){if(!de)return X(ct,ie,!0)}}},J=function(j,ie){var de=E.getCopyText();if(!de)return c.preventDefault(j);X(j,de)?(h&&(q(de),g=de,setTimeout(function(){g=!1},10)),ie?E.onCut():E.onCopy(),c.preventDefault(j)):(g=!0,D.value=de,D.select(),setTimeout(function(){g=!1,q(),ie?E.onCut():E.onCopy()}))},ve=function(j){J(j,!0)},Ee=function(j){J(j,!1)},De=function(j){var ie=X(j);u.pasteCancelled()||(typeof ie=="string"?(ie&&E.onPaste(ie,j),s.isIE&&setTimeout(q),c.preventDefault(j)):(D.value="",b=!0))};c.addCommandKeyListener(D,E.onCommandKey.bind(E),E),c.addListener(D,"select",K,E),c.addListener(D,"input",P,E),c.addListener(D,"cut",ve,E),c.addListener(D,"copy",Ee,E),c.addListener(D,"paste",De,E),(!("oncut"in D)||!("oncopy"in D)||!("onpaste"in D))&&c.addListener(C,"keydown",function(j){if(!(s.isMac&&!j.metaKey||!j.ctrlKey))switch(j.keyCode){case 67:Ee(j);break;case 86:De(j);break;case 88:ve(j);break}},E);var se=function(j){if(!(L||!E.onCompositionStart||E.$readOnly)&&(L={},!M)){j.data&&(L.useTextareaForIME=!1),setTimeout(we,0),E._signal("compositionStart"),E.on("mousedown",Jt);var ie=E.getSelectionRange();ie.end.row=ie.start.row,ie.end.column=ie.start.column,L.markerRange=ie,L.selectionStart=x,E.onCompositionStart(L),L.useTextareaForIME?(F=D.value="",x=0,R=0):(D.msGetInputContext&&(L.context=D.msGetInputContext()),D.getInputContext&&(L.context=D.getInputContext()))}},we=function(){if(!(!L||!E.onCompositionUpdate||E.$readOnly)){if(M)return Jt();if(L.useTextareaForIME)E.onCompositionUpdate(D.value);else{var j=D.value;W(j),L.markerRange&&(L.context&&(L.markerRange.start.column=L.selectionStart=L.context.compositionStartOffset),L.markerRange.end.column=L.markerRange.start.column+R-L.selectionStart+A)}}},bt=function(j){!E.onCompositionEnd||E.$readOnly||(L=!1,E.onCompositionEnd(),E.off("mousedown",Jt),j&&P())};function Jt(){w=!0,D.blur(),D.focus(),w=!1}var Bt=p.delayedCall(we,50).schedule.bind(null,null);function Ze(j){j.keyCode==27&&D.value.length<D.selectionStart&&(L||(F=D.value),x=R=-1,q()),Bt()}c.addListener(D,"compositionstart",se,E),c.addListener(D,"compositionupdate",we,E),c.addListener(D,"keyup",Ze,E),c.addListener(D,"keydown",Bt,E),c.addListener(D,"compositionend",bt,E),this.getElement=function(){return D},this.setCommandMode=function(j){M=j,D.readOnly=!1},this.setReadOnly=function(j){M||(D.readOnly=j)},this.setCopyWithEmptySelection=function(j){},this.onContextMenu=function(j){B=!0,q(),E._emit("nativecontextmenu",{target:E,domEvent:j}),this.moveToMouse(j,!0)},this.moveToMouse=function(j,ie){T||(T=D.style.cssText),D.style.cssText=(ie?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(x+R)*E.renderer.characterWidth*.5+"px;";var de=E.container.getBoundingClientRect(),Be=a.computedStyle(E.container),nt=de.top+(parseInt(Be.borderTopWidth)||0),ct=de.left+(parseInt(de.borderLeftWidth)||0),Ge=de.bottom-nt-D.clientHeight-2,wt=function(qt){a.translate(D,qt.clientX-ct-2,Math.min(qt.clientY-nt-2,Ge))};wt(j),j.type=="mousedown"&&(E.renderer.$isMousePressed=!0,clearTimeout(ce),s.isWin&&c.capture(E.container,wt,he))},this.onContextMenuClose=he;var ce;function he(){clearTimeout(ce),ce=setTimeout(function(){T&&(D.style.cssText=T,T=""),E.renderer.$isMousePressed=!1,E.renderer.$keepTextAreaAtCursor&&E.renderer.$moveTextAreaToCursor()},0)}var le=function(j){E.textInput.onContextMenu(j),he()};c.addListener(D,"mouseup",le,E),c.addListener(D,"mousedown",function(j){j.preventDefault(),he()},E),c.addListener(E.renderer.scroller,"contextmenu",le,E),c.addListener(D,"contextmenu",le,E),h&&oe(C,E,D);function oe(j,ie,de){var Be=null,nt=!1;de.addEventListener("keydown",function(Ge){Be&&clearTimeout(Be),nt=!0},!0),de.addEventListener("keyup",function(Ge){Be=setTimeout(function(){nt=!1},100)},!0);var ct=function(Ge){if(document.activeElement===de&&!(nt||L||ie.$mouseHandler.isMousePressed)&&!g){var wt=de.selectionStart,qt=de.selectionEnd,St=null,xn=0;if(wt==0?St=f.up:wt==1?St=f.home:qt>R&&F[qt]==`
`?St=f.end:wt<x&&F[wt-1]==" "?(St=f.left,xn=o.option):wt<x||wt==x&&R!=x&&wt==qt?St=f.left:qt>R&&F.slice(0,qt).split(`
`).length>2?St=f.down:qt>R&&F[qt-1]==" "?(St=f.right,xn=o.option):(qt>R||qt==R&&R!=x&&wt==qt)&&(St=f.right),wt!==qt&&(xn|=o.shift),St){var vi=ie.onCommandKey({},xn,St);if(!vi&&ie.commands){St=f.keyCodeToString(St);var VS=ie.commands.findKeyCommand(xn,St);VS&&ie.execCommand(VS)}x=wt,R=qt,q("")}}};document.addEventListener("selectionchange",ct),ie.on("destroy",function(){document.removeEventListener("selectionchange",ct)})}this.destroy=function(){D.parentElement&&D.parentElement.removeChild(D)}},t.TextInput=y,t.$setUserAgentForTests=function(C,E){m=C,h=E}});ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/useragent"),v=0,s=550,a=function(){function r(i){i.$clickSelection=null;var l=i.editor;l.setDefaultHandler("mousedown",this.onMouseDown.bind(i)),l.setDefaultHandler("dblclick",this.onDoubleClick.bind(i)),l.setDefaultHandler("tripleclick",this.onTripleClick.bind(i)),l.setDefaultHandler("quadclick",this.onQuadClick.bind(i)),l.setDefaultHandler("mousewheel",this.onMouseWheel.bind(i));var d=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];d.forEach(function(f){i[f]=this[f]},this),i.selectByLines=this.extendSelectionBy.bind(i,"getLineRange"),i.selectByWords=this.extendSelectionBy.bind(i,"getWordRange")}return r.prototype.onMouseDown=function(i){var l=i.inSelection(),d=i.getDocumentPosition();this.mousedownEvent=i;var f=this.editor,o=i.getButton();if(o!==0){var h=f.getSelectionRange(),_=h.isEmpty();(_||o==1)&&f.selection.moveToPosition(d),o==2&&(f.textInput.onContextMenu(i.domEvent),c.isMozilla||i.preventDefault());return}if(this.mousedownEvent.time=Date.now(),l&&!f.isFocused()&&(f.focus(),this.$focusTimeout&&!this.$clickSelection&&!f.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(i);return}return this.captureMouse(i),this.startSelect(d,i.domEvent._clicks>1),i.preventDefault()},r.prototype.startSelect=function(i,l){i=i||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var d=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?d.selection.selectToPosition(i):l||d.selection.moveToPosition(i),l||this.select(),d.setStyle("ace_selecting"),this.setState("select"))},r.prototype.select=function(){var i,l=this.editor,d=l.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var f=this.$clickSelection.comparePoint(d);if(f==-1)i=this.$clickSelection.end;else if(f==1)i=this.$clickSelection.start;else{var o=u(this.$clickSelection,d);d=o.cursor,i=o.anchor}l.selection.setSelectionAnchor(i.row,i.column)}l.selection.selectToPosition(d),l.renderer.scrollCursorIntoView()},r.prototype.extendSelectionBy=function(i){var l,d=this.editor,f=d.renderer.screenToTextCoordinates(this.x,this.y),o=d.selection[i](f.row,f.column);if(this.$clickSelection){var h=this.$clickSelection.comparePoint(o.start),_=this.$clickSelection.comparePoint(o.end);if(h==-1&&_<=0)l=this.$clickSelection.end,(o.end.row!=f.row||o.end.column!=f.column)&&(f=o.start);else if(_==1&&h>=0)l=this.$clickSelection.start,(o.start.row!=f.row||o.start.column!=f.column)&&(f=o.end);else if(h==-1&&_==1)f=o.end,l=o.start;else{var m=u(this.$clickSelection,f);f=m.cursor,l=m.anchor}d.selection.setSelectionAnchor(l.row,l.column)}d.selection.selectToPosition(f),d.renderer.scrollCursorIntoView()},r.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},r.prototype.focusWait=function(){var i=p(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),l=Date.now();(i>v||l-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},r.prototype.onDoubleClick=function(i){var l=i.getDocumentPosition(),d=this.editor,f=d.session,o=f.getBracketRange(l);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=d.selection.getWordRange(l.row,l.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},r.prototype.onTripleClick=function(i){var l=i.getDocumentPosition(),d=this.editor;this.setState("selectByLines");var f=d.getSelectionRange();f.isMultiLine()&&f.contains(l.row,l.column)?(this.$clickSelection=d.selection.getLineRange(f.start.row),this.$clickSelection.end=d.selection.getLineRange(f.end.row).end):this.$clickSelection=d.selection.getLineRange(l.row),this.select()},r.prototype.onQuadClick=function(i){var l=this.editor;l.selectAll(),this.$clickSelection=l.getSelectionRange(),this.setState("selectAll")},r.prototype.onMouseWheel=function(i){if(!i.getAccelKey()){i.getShiftKey()&&i.wheelY&&!i.wheelX&&(i.wheelX=i.wheelY,i.wheelY=0);var l=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var d=this.$lastScroll,f=i.domEvent.timeStamp,o=f-d.t,h=o?i.wheelX/o:d.vx,_=o?i.wheelY/o:d.vy;o<s&&(h=(h+d.vx)/2,_=(_+d.vy)/2);var m=Math.abs(h/_),y=!1;if(m>=1&&l.renderer.isScrollableBy(i.wheelX*i.speed,0)&&(y=!0),m<=1&&l.renderer.isScrollableBy(0,i.wheelY*i.speed)&&(y=!0),y)d.allowed=f;else if(f-d.allowed<s){var C=Math.abs(h)<=1.5*Math.abs(d.vx)&&Math.abs(_)<=1.5*Math.abs(d.vy);C?(y=!0,d.allowed=f):d.allowed=0}if(d.t=f,d.vx=h,d.vy=_,y)return l.renderer.scrollBy(i.wheelX*i.speed,i.wheelY*i.speed),i.stop()}},r}();a.prototype.selectEnd=a.prototype.selectByLinesEnd,a.prototype.selectAllEnd=a.prototype.selectByLinesEnd,a.prototype.selectByWordsEnd=a.prototype.selectByLinesEnd,t.DefaultHandlers=a;function p(r,i,l,d){return Math.sqrt(Math.pow(l-r,2)+Math.pow(d-i,2))}function u(r,i){if(r.start.row==r.end.row)var l=2*i.column-r.start.column-r.end.column;else if(r.start.row==r.end.row-1&&!r.start.column&&!r.end.column)var l=i.column-4;else var l=2*i.row-r.start.row-r.end.row;return l<0?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}});ace.define("ace/lib/scroll",["require","exports","module"],function(e,t,n){t.preventParentScroll=function(v){v.stopPropagation();var s=v.currentTarget,a=s.scrollHeight>s.clientHeight;a||v.preventDefault()}});ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var o=function(h,_){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&(m[C]=y[C])},o(h,_)};return function(h,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");o(h,_);function m(){this.constructor=h}h.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),v=this&&this.__values||function(o){var h=typeof Symbol=="function"&&Symbol.iterator,_=h&&o[h],m=0;if(_)return _.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&m>=o.length&&(o=void 0),{value:o&&o[m++],done:!o}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("./lib/dom"),a=e("./lib/event"),p=e("./range").Range,u=e("./lib/scroll").preventParentScroll,r="ace_tooltip",i=function(){function o(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}return o.prototype.$init=function(){return this.$element=s.createElement("div"),this.$element.className=r,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},o.prototype.getElement=function(){return this.$element||this.$init()},o.prototype.setText=function(h){this.getElement().textContent=h},o.prototype.setHtml=function(h){this.getElement().innerHTML=h},o.prototype.setPosition=function(h,_){this.getElement().style.left=h+"px",this.getElement().style.top=_+"px"},o.prototype.setClassName=function(h){s.addCssClass(this.getElement(),h)},o.prototype.setTheme=function(h){this.$element.className=r+" "+(h.isDark?"ace_dark ":"")+(h.cssClass||"")},o.prototype.show=function(h,_,m){h!=null&&this.setText(h),_!=null&&m!=null&&this.setPosition(_,m),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},o.prototype.hide=function(h){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=r,this.isOpen=!1)},o.prototype.getHeight=function(){return this.getElement().offsetHeight},o.prototype.getWidth=function(){return this.getElement().offsetWidth},o.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},o}(),l=function(){function o(){this.popups=[]}return o.prototype.addPopup=function(h){this.popups.push(h),this.updatePopups()},o.prototype.removePopup=function(h){var _=this.popups.indexOf(h);_!==-1&&(this.popups.splice(_,1),this.updatePopups())},o.prototype.updatePopups=function(){var h,_,m,y;this.popups.sort(function(M,w){return w.priority-M.priority});var C=[];try{for(var E=v(this.popups),D=E.next();!D.done;D=E.next()){var g=D.value,b=!0;try{for(var L=(m=void 0,v(C)),S=L.next();!S.done;S=L.next()){var T=S.value;if(this.doPopupsOverlap(T,g)){b=!1;break}}}catch(M){m={error:M}}finally{try{S&&!S.done&&(y=L.return)&&y.call(L)}finally{if(m)throw m.error}}b?C.push(g):g.hide()}}catch(M){h={error:M}}finally{try{D&&!D.done&&(_=E.return)&&_.call(E)}finally{if(h)throw h.error}}},o.prototype.doPopupsOverlap=function(h,_){var m=h.getElement().getBoundingClientRect(),y=_.getElement().getBoundingClientRect();return m.left<y.right&&m.right>y.left&&m.top<y.bottom&&m.bottom>y.top},o}(),d=new l;t.popupManager=d,t.Tooltip=i;var f=function(o){c(h,o);function h(_){_===void 0&&(_=document.body);var m=o.call(this,_)||this;m.timeout=void 0,m.lastT=0,m.idleTime=350,m.lastEvent=void 0,m.onMouseOut=m.onMouseOut.bind(m),m.onMouseMove=m.onMouseMove.bind(m),m.waitForHover=m.waitForHover.bind(m),m.hide=m.hide.bind(m);var y=m.getElement();return y.style.whiteSpace="pre-wrap",y.style.pointerEvents="auto",y.addEventListener("mouseout",m.onMouseOut),y.tabIndex=-1,y.addEventListener("blur",function(){y.contains(document.activeElement)||this.hide()}.bind(m)),y.addEventListener("wheel",u),m}return h.prototype.addToEditor=function(_){_.on("mousemove",this.onMouseMove),_.on("mousedown",this.hide),_.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},h.prototype.removeFromEditor=function(_){_.off("mousemove",this.onMouseMove),_.off("mousedown",this.hide),_.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},h.prototype.onMouseMove=function(_,m){this.lastEvent=_,this.lastT=Date.now();var y=m.$mouseHandler.isMousePressed;if(this.isOpen){var C=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(C.row,C.column)||y||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||y||(this.lastEvent=_,this.timeout=setTimeout(this.waitForHover,this.idleTime))},h.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var _=Date.now()-this.lastT;if(this.idleTime-_>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-_);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},h.prototype.isOutsideOfText=function(_){var m=_.editor,y=_.getDocumentPosition(),C=m.session.getLine(y.row);if(y.column==C.length){var E=m.renderer.pixelToScreenCoordinates(_.clientX,_.clientY),D=m.session.documentToScreenPosition(y.row,y.column);if(D.column!=E.column||D.row!=E.row)return!0}return!1},h.prototype.setDataProvider=function(_){this.$gatherData=_},h.prototype.showForRange=function(_,m,y,C){var E=10;if(!(C&&C!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var D=_.renderer;this.isOpen||(d.addPopup(this),this.$registerCloseEvents(),this.setTheme(D.theme)),this.isOpen=!0,this.addMarker(m,_.session),this.range=p.fromPoints(m.start,m.end);var g=D.textToScreenCoordinates(m.start.row,m.start.column),b=D.scroller.getBoundingClientRect();g.pageX<b.left&&(g.pageX=b.left);var L=this.getElement();L.innerHTML="",L.appendChild(y),L.style.maxHeight="",L.style.display="block";var S=L.clientHeight,T=L.clientWidth,M=window.innerHeight-g.pageY-D.lineHeight,w=!0;g.pageY-S<0&&g.pageY<M&&(w=!1),L.style.maxHeight=(w?g.pageY:M)-E+"px",L.style.top=w?"":g.pageY+D.lineHeight+"px",L.style.bottom=w?window.innerHeight-g.pageY+"px":"",L.style.left=Math.min(g.pageX,window.innerWidth-T-E)+"px"}},h.prototype.addMarker=function(_,m){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=m,this.marker=m&&m.addMarker(_,"ace_highlight-marker","text")},h.prototype.hide=function(_){!_&&document.activeElement==this.getElement()||_&&_.target&&(_.type!="keydown"||_.ctrlKey||_.metaKey)&&this.$element.contains(_.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,d.removePopup(this)))},h.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},h.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},h.prototype.onMouseOut=function(_){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!_.relatedTarget||this.getElement().contains(_.relatedTarget)||_&&_.currentTarget.contains(_.relatedTarget)||_.relatedTarget.classList.contains("ace_content")||this.hide())},h}(i);t.HoverTooltip=f});ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(d,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(d,f);function o(){this.constructor=d}d.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=this&&this.__values||function(l){var d=typeof Symbol=="function"&&Symbol.iterator,f=d&&l[d],o=0;if(f)return f.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&o>=l.length&&(l=void 0),{value:l&&l[o++],done:!l}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")},s=e("../lib/dom"),a=e("../lib/event"),p=e("../tooltip").Tooltip,u=e("../config").nls;function r(l){var d=l.editor,f=d.renderer.$gutterLayer,o=new i(d);l.editor.setDefaultHandler("guttermousedown",function(E){if(!(!d.isFocused()||E.getButton()!=0)){var D=f.getRegion(E);if(D!="foldWidgets"){var g=E.getDocumentPosition().row,b=d.session.selection;if(E.getShiftKey())b.selectTo(g,0);else{if(E.domEvent.detail==2)return d.selectAll(),E.preventDefault();l.$clickSelection=d.selection.getLineRange(g)}return l.setState("selectByLines"),l.captureMouse(E),E.preventDefault()}}});var h,_;function m(){var E=_.getDocumentPosition().row,D=d.session.getLength();if(E==D){var g=d.renderer.pixelToScreenCoordinates(0,_.y).row,b=_.$pos;if(g>d.session.documentToScreenRow(b.row,b.column))return y()}if(o.showTooltip(E),!!o.isOpen)if(d.on("mousewheel",y),l.$tooltipFollowsMouse)C(_);else{var L=_.getGutterRow(),S=f.$lines.get(L);if(S){var T=S.element.querySelector(".ace_gutter_annotation"),M=T.getBoundingClientRect(),w=o.getElement().style;w.left=M.right+"px",w.top=M.bottom+"px"}else C(_)}}function y(){h&&(h=clearTimeout(h)),o.isOpen&&(o.hideTooltip(),d.off("mousewheel",y))}function C(E){o.setPosition(E.x,E.y)}l.editor.setDefaultHandler("guttermousemove",function(E){var D=E.domEvent.target||E.domEvent.srcElement;if(s.hasCssClass(D,"ace_fold-widget"))return y();o.isOpen&&l.$tooltipFollowsMouse&&C(E),_=E,!h&&(h=setTimeout(function(){h=null,_&&!l.isMousePressed?m():y()},50))}),a.addListener(d.renderer.$gutter,"mouseout",function(E){_=null,!(!o.isOpen||h)&&(h=setTimeout(function(){h=null,y()},50))},d),d.on("changeSession",y),d.on("input",y)}t.GutterHandler=r;var i=function(l){c(d,l);function d(f){var o=l.call(this,f.container)||this;return o.editor=f,o}return d.prototype.setPosition=function(f,o){var h=window.innerWidth||document.documentElement.clientWidth,_=window.innerHeight||document.documentElement.clientHeight,m=this.getWidth(),y=this.getHeight();f+=15,o+=15,f+m>h&&(f-=f+m-h),o+y>_&&(o-=20+y),p.prototype.setPosition.call(this,f,o)},Object.defineProperty(d,"annotationLabels",{get:function(){return{error:{singular:u("error"),plural:u("errors")},warning:{singular:u("warning"),plural:u("warnings")},info:{singular:u("information message"),plural:u("information messages")}}},enumerable:!1,configurable:!0}),d.prototype.showTooltip=function(f){var o=this.editor.renderer.$gutterLayer,h=o.$annotations[f],_;h?_={text:Array.from(h.text),type:Array.from(h.type)}:_={text:[],type:[]};var m=o.session.getFoldLine(f);if(m&&o.$showFoldedAnnotations){for(var y={error:[],warning:[],info:[]},C,E=f+1;E<=m.end.row;E++)if(o.$annotations[E])for(var D=0;D<o.$annotations[E].text.length;D++){var g=o.$annotations[E].type[D];if(y[g].push(o.$annotations[E].text[D]),g==="error"){C="error_fold";continue}if(g==="warning"){C="warning_fold";continue}}if(C==="error_fold"||C==="warning_fold"){var b="".concat(d.annotationsToSummaryString(y)," in folded code.");_.text.push(b),_.type.push(C)}}if(_.text.length===0)return this.hide();for(var L={error:[],warning:[],info:[]},S=o.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",E=0;E<_.text.length;E++){var T="<span class='ace_".concat(_.type[E]," ").concat(S,"' aria-label='").concat(d.annotationLabels[_.type[E].replace("_fold","")].singular,"' role=img> </span> ").concat(_.text[E]);L[_.type[E].replace("_fold","")].push(T)}var M=[].concat(L.error,L.warning,L.info).join("<br>");this.setHtml(M),this.$element.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},d.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},d.annotationsToSummaryString=function(f){var o,h,_=[],m=["error","warning","info"];try{for(var y=v(m),C=y.next();!C.done;C=y.next()){var E=C.value;if(f[E].length){var D=f[E].length===1?d.annotationLabels[E].singular:d.annotationLabels[E].plural;_.push("".concat(f[E].length," ").concat(D))}}}catch(g){o={error:g}}finally{try{C&&!C.done&&(h=y.return)&&h.call(y)}finally{if(o)throw o.error}}return _.join(", ")},d}(p);t.GutterTooltip=i});ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=function(){function a(p,u){this.speed,this.wheelX,this.wheelY,this.domEvent=p,this.editor=u,this.x=this.clientX=p.clientX,this.y=this.clientY=p.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return a.prototype.stopPropagation=function(){c.stopPropagation(this.domEvent),this.propagationStopped=!0},a.prototype.preventDefault=function(){c.preventDefault(this.domEvent),this.defaultPrevented=!0},a.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},a.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},a.prototype.getGutterRow=function(){var p=this.getDocumentPosition().row,u=this.editor.session.documentToScreenRow(p,0),r=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return u-r},a.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var p=this.editor,u=p.getSelectionRange();if(u.isEmpty())this.$inSelection=!1;else{var r=this.getDocumentPosition();this.$inSelection=u.contains(r.row,r.column)}return this.$inSelection},a.prototype.getButton=function(){return c.getButton(this.domEvent)},a.prototype.getShiftKey=function(){return this.domEvent.shiftKey},a.prototype.getAccelKey=function(){return v.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},a}();t.MouseEvent=s});ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/event"),s=e("../lib/useragent"),a=200,p=200,u=5;function r(l){var d=l.editor,f=c.createElement("div");f.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",f.textContent="\xA0";var o=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];o.forEach(function(U){l[U]=this[U]},this),d.on("mousedown",this.onMouseDown.bind(l));var h=d.container,_,m,y,C,E,D,g=0,b,L,S,T,M;this.onDragStart=function(U){if(this.cancelDrag||!h.draggable){var q=this;return setTimeout(function(){q.startSelect(),q.captureMouse(U)},0),U.preventDefault()}E=d.getSelectionRange();var N=U.dataTransfer;N.effectAllowed=d.getReadOnly()?"copy":"copyMove",d.container.appendChild(f),N.setDragImage&&N.setDragImage(f,0,0),setTimeout(function(){d.container.removeChild(f)}),N.clearData(),N.setData("Text",d.session.getTextRange()),L=!0,this.setState("drag")},this.onDragEnd=function(U){if(h.draggable=!1,L=!1,this.setState(null),!d.getReadOnly()){var q=U.dataTransfer.dropEffect;!b&&q=="move"&&d.session.remove(d.getSelectionRange()),d.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(U){if(!(d.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||R(),g++,U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragOver=function(U){if(!(d.getReadOnly()||!k(U.dataTransfer)))return m=U.clientX,y=U.clientY,_||(R(),g++),I!==null&&(I=null),U.dataTransfer.dropEffect=b=H(U),v.preventDefault(U)},this.onDragLeave=function(U){if(g--,g<=0&&_)return A(),b=null,v.preventDefault(U)},this.onDrop=function(U){if(D){var q=U.dataTransfer;if(L)switch(b){case"move":E.contains(D.row,D.column)?E={start:D,end:D}:E=d.moveText(E,D);break;case"copy":E=d.moveText(E,D,!0);break}else{var N=q.getData("Text");E={start:D,end:d.session.insert(D,N)},d.focus(),b=null}return A(),v.preventDefault(U)}},v.addListener(h,"dragstart",this.onDragStart.bind(l),d),v.addListener(h,"dragend",this.onDragEnd.bind(l),d),v.addListener(h,"dragenter",this.onDragEnter.bind(l),d),v.addListener(h,"dragover",this.onDragOver.bind(l),d),v.addListener(h,"dragleave",this.onDragLeave.bind(l),d),v.addListener(h,"drop",this.onDrop.bind(l),d);function w(U,q){var N=Date.now(),K=!q||U.row!=q.row,O=!q||U.column!=q.column;if(!T||K||O)d.moveCursorToPosition(U),T=N,M={x:m,y};else{var B=i(M.x,M.y,m,y);B>u?T=null:N-T>=p&&(d.renderer.scrollCursorIntoView(),T=null)}}function F(U,q){var N=Date.now(),K=d.renderer.layerConfig.lineHeight,O=d.renderer.layerConfig.characterWidth,B=d.renderer.scroller.getBoundingClientRect(),W={x:{left:m-B.left,right:B.right-m},y:{top:y-B.top,bottom:B.bottom-y}},P=Math.min(W.x.left,W.x.right),X=Math.min(W.y.top,W.y.bottom),J={row:U.row,column:U.column};P/O<=2&&(J.column+=W.x.left<W.x.right?-3:2),X/K<=1&&(J.row+=W.y.top<W.y.bottom?-1:1);var ve=U.row!=J.row,Ee=U.column!=J.column,De=!q||U.row!=q.row;ve||Ee&&!De?S?N-S>=a&&d.renderer.scrollCursorIntoView(J):S=N:S=null}function x(){var U=D;D=d.renderer.screenToTextCoordinates(m,y),w(D,U),F(D,U)}function R(){E=d.selection.toOrientedRange(),_=d.session.addMarker(E,"ace_selection",d.getSelectionStyle()),d.clearSelection(),d.isFocused()&&d.renderer.$cursorLayer.setBlinking(!1),clearInterval(C),x(),C=setInterval(x,20),g=0,v.addListener(document,"mousemove",$)}function A(){clearInterval(C),d.session.removeMarker(_),_=null,d.selection.fromOrientedRange(E),d.isFocused()&&!L&&d.$resetCursorStyle(),E=null,D=null,g=0,S=null,T=null,v.removeListener(document,"mousemove",$)}var I=null;function $(){I==null&&(I=setTimeout(function(){I!=null&&_&&A()},20))}function k(U){var q=U.types;return!q||Array.prototype.some.call(q,function(N){return N=="text/plain"||N=="Text"})}function H(U){var q=["copy","copymove","all","uninitialized"],N=["move","copymove","linkmove","all","uninitialized"],K=s.isMac?U.altKey:U.ctrlKey,O="uninitialized";try{O=U.dataTransfer.effectAllowed.toLowerCase()}catch{}var B="none";return K&&q.indexOf(O)>=0?B="copy":N.indexOf(O)>=0?B="move":q.indexOf(O)>=0&&(B="copy"),B}}(function(){this.dragWait=function(){var l=Date.now()-this.mousedownEvent.time;l>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var l=this.editor.container;l.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(l){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var l=this.editor,d=l.container;d.draggable=!0,l.renderer.$cursorLayer.setBlinking(!1),l.setStyle("ace_dragging");var f=s.isWin?"default":"move";l.renderer.setCursorStyle(f),this.setState("dragReady")},this.onMouseDrag=function(l){var d=this.editor.container;if(s.isIE&&this.state=="dragReady"){var f=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>3&&d.dragDrop()}if(this.state==="dragWait"){var f=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);f>0&&(d.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(l){if(this.$dragEnabled){this.mousedownEvent=l;var d=this.editor,f=l.inSelection(),o=l.getButton(),h=l.domEvent.detail||1;if(h===1&&o===0&&f){if(l.editor.inMultiSelectMode&&(l.getAccelKey()||l.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=l.domEvent.target||l.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),d.getDragDelay()){if(s.isWebKit){this.cancelDrag=!0;var m=d.container;m.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(l,this.onMouseDrag.bind(this)),l.defaultPrevented=!0}}}}).call(r.prototype);function i(l,d,f,o){return Math.sqrt(Math.pow(f-l,2)+Math.pow(o-d,2))}t.DragdropHandler=r});ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./mouse_event").MouseEvent,v=e("../lib/event"),s=e("../lib/dom");t.addTouchListeners=function(a,p){var u="scroll",r,i,l,d,f,o,h=0,_,m=0,y=0,C=0,E,D;function g(){var w=window.navigator&&window.navigator.clipboard,F=!1,x=function(){var A=p.getCopyText(),I=p.session.getUndoManager().hasUndo();D.replaceChild(s.buildDom(F?["span",!A&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],A&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],A&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],w&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],I&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),D.firstChild)},R=function(A){var I=A.target.getAttribute("action");if(I=="more"||!F)return F=!F,x();I=="paste"?w.readText().then(function($){p.execCommand(I,$)}):I&&((I=="cut"||I=="copy")&&(w?w.writeText(p.getCopyText()):document.execCommand("copy")),p.execCommand(I)),D.firstChild.style.display="none",F=!1,I!="openCommandPalette"&&p.focus()};D=s.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(A){u="menu",A.stopPropagation(),A.preventDefault(),p.textInput.focus()},ontouchend:function(A){A.stopPropagation(),A.preventDefault(),R(A)},onclick:R},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],p.container)}function b(){D||g();var w=p.selection.cursor,F=p.renderer.textToScreenCoordinates(w.row,w.column),x=p.renderer.textToScreenCoordinates(0,0).pageX,R=p.renderer.scrollLeft,A=p.container.getBoundingClientRect();D.style.top=F.pageY-A.top-3+"px",F.pageX-A.left<A.width-70?(D.style.left="",D.style.right="10px"):(D.style.right="",D.style.left=x+R-A.left+"px"),D.style.display="",D.firstChild.style.display="none",p.on("input",L)}function L(w){D&&(D.style.display="none"),p.off("input",L)}function S(){f=null,clearTimeout(f);var w=p.selection.getRange(),F=w.contains(_.row,_.column);(w.isEmpty()||!F)&&(p.selection.moveToPosition(_),p.selection.selectWord()),u="wait",b()}function T(){f=null,clearTimeout(f),p.selection.moveToPosition(_);var w=m>=2?p.selection.getLineRange(_.row):p.session.getBracketRange(_);w&&!w.isEmpty()?p.selection.setRange(w):p.selection.selectWord(),u="wait"}v.addListener(a,"contextmenu",function(w){if(E){var F=p.textInput.getElement();F.focus()}},p),v.addListener(a,"touchstart",function(w){var F=w.touches;if(f||F.length>1){clearTimeout(f),f=null,l=-1,u="zoom";return}E=p.$mouseHandler.isMousePressed=!0;var x=p.renderer.layerConfig.lineHeight,R=p.renderer.layerConfig.lineHeight,A=w.timeStamp;d=A;var I=F[0],$=I.clientX,k=I.clientY;Math.abs(r-$)+Math.abs(i-k)>x&&(l=-1),r=w.clientX=$,i=w.clientY=k,y=C=0;var H=new c(w,p);if(_=H.getDocumentPosition(),A-l<500&&F.length==1&&!h)m++,w.preventDefault(),w.button=0,T();else{m=0;var U=p.selection.cursor,q=p.selection.isEmpty()?U:p.selection.anchor,N=p.renderer.$cursorLayer.getPixelPosition(U,!0),K=p.renderer.$cursorLayer.getPixelPosition(q,!0),O=p.renderer.scroller.getBoundingClientRect(),B=p.renderer.layerConfig.offset,W=p.renderer.scrollLeft,P=function(ve,Ee){return ve=ve/R,Ee=Ee/x-.75,ve*ve+Ee*Ee};if(w.clientX<O.left){u="zoom";return}var X=P(w.clientX-O.left-N.left+W,w.clientY-O.top-N.top+B),J=P(w.clientX-O.left-K.left+W,w.clientY-O.top-K.top+B);X<3.5&&J<3.5&&(u=X>J?"cursor":"anchor"),J<3.5?u="anchor":X<3.5?u="cursor":u="scroll",f=setTimeout(S,450)}l=A},p),v.addListener(a,"touchend",function(w){E=p.$mouseHandler.isMousePressed=!1,o&&clearInterval(o),u=="zoom"?(u="",h=0):f?(p.selection.moveToPosition(_),h=0,b()):u=="scroll"?(M(),L()):b(),clearTimeout(f),f=null},p),v.addListener(a,"touchmove",function(w){f&&(clearTimeout(f),f=null);var F=w.touches;if(!(F.length>1||u=="zoom")){var x=F[0],R=r-x.clientX,A=i-x.clientY;if(u=="wait")if(R*R+A*A>4)u="cursor";else return w.preventDefault();r=x.clientX,i=x.clientY,w.clientX=x.clientX,w.clientY=x.clientY;var I=w.timeStamp,$=I-d;if(d=I,u=="scroll"){var k=new c(w,p);k.speed=1,k.wheelX=R,k.wheelY=A,10*Math.abs(R)<Math.abs(A)&&(R=0),10*Math.abs(A)<Math.abs(R)&&(A=0),$!=0&&(y=R/$,C=A/$),p._emit("mousewheel",k),k.propagationStopped||(y=C=0)}else{var H=new c(w,p),U=H.getDocumentPosition();u=="cursor"?p.selection.moveCursorToPosition(U):u=="anchor"&&p.selection.setSelectionAnchor(U.row,U.column),p.renderer.scrollCursorIntoView(U),w.preventDefault()}}},p);function M(){h+=60,o=setInterval(function(){h--<=0&&(clearInterval(o),o=null),Math.abs(y)<.01&&(y=0),Math.abs(C)<.01&&(C=0),h<20&&(y=.9*y),h<20&&(C=.9*C);var w=p.session.getScrollTop();p.renderer.scrollBy(10*y,10*C),w==p.session.getScrollTop()&&(h=0)},10)}}});ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(e,t,n){"use strict";var c=e("../lib/event"),v=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,a=e("./default_gutter_handler").GutterHandler,p=e("./mouse_event").MouseEvent,u=e("./dragdrop_handler").DragdropHandler,r=e("./touch_handler").addTouchListeners,i=e("../config"),l=function(){function d(f){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var o=this;this.editor=f,new s(this),new a(this),new u(this);var h=function(y){var C=!document.hasFocus||!document.hasFocus()||!f.isFocused()&&document.activeElement==(f.textInput&&f.textInput.getElement());C&&window.focus(),f.focus(),setTimeout(function(){f.isFocused()||f.focus()})},_=f.renderer.getMouseEventTarget();c.addListener(_,"click",this.onMouseEvent.bind(this,"click"),f),c.addListener(_,"mousemove",this.onMouseMove.bind(this,"mousemove"),f),c.addMultiMouseDownListener([_,f.renderer.scrollBarV&&f.renderer.scrollBarV.inner,f.renderer.scrollBarH&&f.renderer.scrollBarH.inner,f.textInput&&f.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",f),c.addMouseWheelListener(f.container,this.onMouseWheel.bind(this,"mousewheel"),f),r(f.container,f);var m=f.renderer.$gutter;c.addListener(m,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),f),c.addListener(m,"click",this.onMouseEvent.bind(this,"gutterclick"),f),c.addListener(m,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),f),c.addListener(m,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),f),c.addListener(_,"mousedown",h,f),c.addListener(m,"mousedown",h,f),v.isIE&&f.renderer.scrollBarV&&(c.addListener(f.renderer.scrollBarV.element,"mousedown",h,f),c.addListener(f.renderer.scrollBarH.element,"mousedown",h,f)),f.on("mousemove",function(y){if(!(o.state||o.$dragDelay||!o.$dragEnabled)){var C=f.renderer.screenToTextCoordinates(y.x,y.y),E=f.session.selection.getRange(),D=f.renderer;!E.isEmpty()&&E.insideStart(C.row,C.column)?D.setCursorStyle("default"):D.setCursorStyle("")}},f)}return d.prototype.onMouseEvent=function(f,o){this.editor.session&&this.editor._emit(f,new p(o,this.editor))},d.prototype.onMouseMove=function(f,o){var h=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!h||!h.length||this.editor._emit(f,new p(o,this.editor))},d.prototype.onMouseWheel=function(f,o){var h=new p(o,this.editor);h.speed=this.$scrollSpeed*2,h.wheelX=o.wheelX,h.wheelY=o.wheelY,this.editor._emit(f,h)},d.prototype.setState=function(f){this.state=f},d.prototype.captureMouse=function(f,o){this.x=f.x,this.y=f.y,this.isMousePressed=!0;var h=this.editor,_=this.editor.renderer;_.$isMousePressed=!0;var m=this,y=function(b){if(b){if(v.isWebKit&&!b.which&&m.releaseMouse)return m.releaseMouse();m.x=b.clientX,m.y=b.clientY,o&&o(b),m.mouseEvent=new p(b,m.editor),m.$mouseMoved=!0}},C=function(b){h.off("beforeEndOperation",D),clearInterval(g),h.session&&E(),m[m.state+"End"]&&m[m.state+"End"](b),m.state="",m.isMousePressed=_.$isMousePressed=!1,_.$keepTextAreaAtCursor&&_.$moveTextAreaToCursor(),m.$onCaptureMouseMove=m.releaseMouse=null,b&&m.onMouseEvent("mouseup",b),h.endOperation()},E=function(){m[m.state]&&m[m.state](),m.$mouseMoved=!1};if(v.isOldIE&&f.domEvent.type=="dblclick")return setTimeout(function(){C(f)});var D=function(b){m.releaseMouse&&h.curOp.command.name&&h.curOp.selectionChanged&&(m[m.state+"End"]&&m[m.state+"End"](),m.state="",m.releaseMouse())};h.on("beforeEndOperation",D),h.startOperation({command:{name:"mouse"}}),m.$onCaptureMouseMove=y,m.releaseMouse=c.capture(this.editor.container,y,C);var g=setInterval(E,20)},d.prototype.cancelContextMenu=function(){var f=function(o){o&&o.domEvent&&o.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",f),o&&o.domEvent&&c.stopEvent(o.domEvent))}.bind(this);setTimeout(f,10),this.editor.on("nativecontextmenu",f)},d.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},d}();l.prototype.releaseMouse=null,i.defineOptions(l.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:v.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=l});ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){a.on("click",function(p){var u=p.getDocumentPosition(),r=a.session,i=r.getFoldAt(u.row,u.column,1);i&&(p.getAccelKey()?r.removeFold(i):r.expandFold(i),p.stop());var l=p.domEvent&&p.domEvent.target;l&&c.hasCssClass(l,"ace_inline_button")&&c.hasCssClass(l,"ace_toggle_wrap")&&(r.setOption("wrap",!r.getUseWrapMode()),a.renderer.scrollCursorIntoView())}),a.on("gutterclick",function(p){var u=a.renderer.$gutterLayer.getRegion(p);if(u=="foldWidgets"){var r=p.getDocumentPosition().row,i=a.session;i.foldWidgets&&i.foldWidgets[r]&&a.session.onFoldWidgetClick(r,p),a.isFocused()||a.focus(),p.stop()}}),a.on("gutterdblclick",function(p){var u=a.renderer.$gutterLayer.getRegion(p);if(u=="foldWidgets"){var r=p.getDocumentPosition().row,i=a.session,l=i.getParentFoldRangeData(r,!0),d=l.range||l.firstRange;if(d){r=d.start.row;var f=i.getFoldAt(r,i.getLine(r).length,1);f?i.removeFold(f):(i.addFold("...",d),a.renderer.scrollCursorIntoView({row:d.start.row,column:0}))}p.stop()}})}return s}();t.FoldHandler=v});ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../lib/event"),s=function(){function a(p){this.$editor=p,this.$data={editor:p},this.$handlers=[],this.setDefaultHandler(p.commands)}return a.prototype.setDefaultHandler=function(p){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=p,this.addKeyboardHandler(p,0)},a.prototype.setKeyboardHandler=function(p){var u=this.$handlers;if(u[u.length-1]!=p){for(;u[u.length-1]&&u[u.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(u[u.length-1]);this.addKeyboardHandler(p,1)}},a.prototype.addKeyboardHandler=function(p,u){if(p){typeof p=="function"&&!p.handleKeyboard&&(p.handleKeyboard=p);var r=this.$handlers.indexOf(p);r!=-1&&this.$handlers.splice(r,1),u==null?this.$handlers.push(p):this.$handlers.splice(u,0,p),r==-1&&p.attach&&p.attach(this.$editor)}},a.prototype.removeKeyboardHandler=function(p){var u=this.$handlers.indexOf(p);return u==-1?!1:(this.$handlers.splice(u,1),p.detach&&p.detach(this.$editor),!0)},a.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},a.prototype.getStatusText=function(){var p=this.$data,u=p.editor;return this.$handlers.map(function(r){return r.getStatusText&&r.getStatusText(u,p)||""}).filter(Boolean).join(" ")},a.prototype.$callKeyboardHandlers=function(p,u,r,i){for(var l,d=!1,f=this.$editor.commands,o=this.$handlers.length;o--&&(l=this.$handlers[o].handleKeyboard(this.$data,p,u,r,i),!(!(!l||!l.command)&&(l.command=="null"?d=!0:d=f.exec(l.command,this.$editor,l.args,i),d&&i&&p!=-1&&l.passEvent!=!0&&l.command.passEvent!=!0&&v.stopEvent(i),d))););return!d&&p==-1&&(l={command:"insertstring"},d=f.exec("insertstring",this.$editor,u)),d&&this.$editor._signal&&this.$editor._signal("keyboardActivity",l),d},a.prototype.onCommandKey=function(p,u,r){var i=c.keyCodeToString(r);return this.$callKeyboardHandlers(u,i,r,p)},a.prototype.onTextInput=function(p){return this.$callKeyboardHandlers(-1,p)},a}();t.KeyBinding=s});ace.define("ace/lib/bidiutil",["require","exports","module"],function(e,t,n){"use strict";var c=["\u0621","\u0641"],v=["\u063A","\u064A"],s=0,a=0,p=!1,u=!1,r=!1,i=!1,l=!1,d=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],o=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,_=1,m=0,y=1,C=2,E=3,D=4,g=5,b=6,L=7,S=8,T=9,M=10,w=11,F=12,x=13,R=14,A=15,I=16,$=17,k=18,H=[k,k,k,k,k,k,k,k,k,b,g,b,S,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,g,g,g,b,S,D,D,w,w,w,D,D,D,D,D,M,T,M,T,T,C,C,C,C,C,C,C,C,C,C,T,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,D,D,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,D,D,D,D,k,k,k,k,k,k,g,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,T,D,w,w,w,w,D,D,D,D,m,D,D,k,D,D,w,w,C,C,D,m,D,D,D,C,m,D,D,D,D,D],U=[S,S,S,S,S,S,S,S,S,S,S,k,k,k,m,y,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,S,g,x,R,A,I,$,T,w,w,w,w,w,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,T,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,D,S];function q(W,P,X,J){var ve=s?o:f,Ee=null,De=null,se=null,we=0,bt=null,Jt=null,Bt=-1,Ze=null,ce=null,he=[];if(!J)for(Ze=0,J=[];Ze<X;Ze++)J[Ze]=O(W[Ze]);for(a=s,p=!1,u=!1,r=!1,i=!1,ce=0;ce<X;ce++){if(Ee=we,he[ce]=De=K(W,J,he,ce),we=ve[Ee][De],bt=we&240,we&=15,P[ce]=se=ve[we][5],bt>0)if(bt==16){for(Ze=Bt;Ze<ce;Ze++)P[Ze]=1;Bt=-1}else Bt=-1;if(Jt=ve[we][6],Jt)Bt==-1&&(Bt=ce);else if(Bt>-1){for(Ze=Bt;Ze<ce;Ze++)P[Ze]=se;Bt=-1}J[ce]==g&&(P[ce]=0),a|=se}if(i){for(Ze=0;Ze<X;Ze++)if(J[Ze]==b){P[Ze]=s;for(var le=Ze-1;le>=0&&J[le]==S;le--)P[le]=s}}}function N(W,P,X){if(!(a<W)){if(W==1&&s==_&&!r){X.reverse();return}for(var J=X.length,ve=0,Ee,De,se,we;ve<J;){if(P[ve]>=W){for(Ee=ve+1;Ee<J&&P[Ee]>=W;)Ee++;for(De=ve,se=Ee-1;De<se;De++,se--)we=X[De],X[De]=X[se],X[se]=we;ve=Ee}ve++}}}function K(W,P,X,J){var ve=P[J],Ee,De,se,we;switch(ve){case m:case y:p=!1;case D:case E:return ve;case C:return p?E:C;case L:return p=!0,u=!0,y;case S:return D;case T:return J<1||J+1>=P.length||(Ee=X[J-1])!=C&&Ee!=E||(De=P[J+1])!=C&&De!=E?D:(p&&(De=E),De==Ee?De:D);case M:return Ee=J>0?X[J-1]:g,Ee==C&&J+1<P.length&&P[J+1]==C?C:D;case w:if(J>0&&X[J-1]==C)return C;if(p)return D;for(we=J+1,se=P.length;we<se&&P[we]==w;)we++;return we<se&&P[we]==C?C:D;case F:for(se=P.length,we=J+1;we<se&&P[we]==F;)we++;if(we<se){var bt=W[J],Jt=bt>=1425&&bt<=2303||bt==64286;if(Ee=P[we],Jt&&(Ee==y||Ee==L))return y}return J<1||(Ee=P[J-1])==g?D:X[J-1];case g:return p=!1,r=!0,s;case b:return i=!0,D;case x:case R:case I:case $:case A:p=!1;case k:return D}}function O(W){var P=W.charCodeAt(0),X=P>>8;return X==0?P>191?m:H[P]:X==5?/[\u0591-\u05f4]/.test(W)?y:m:X==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(W)?F:/[\u0660-\u0669\u066b-\u066c]/.test(W)?E:P==1642?w:/[\u06f0-\u06f9]/.test(W)?C:L:X==32&&P<=8287?U[P&255]:X==254&&P>=65136?L:D}function B(W){return W>="\u064B"&&W<="\u0655"}t.L=m,t.R=y,t.EN=C,t.ON_R=3,t.AN=4,t.R_H=5,t.B=6,t.RLE=7,t.DOT="\xB7",t.doBidiReorder=function(W,P,X){if(W.length<2)return{};var J=W.split(""),ve=new Array(J.length),Ee=new Array(J.length),De=[];s=X?_:h,q(J,De,J.length,P);for(var se=0;se<ve.length;ve[se]=se,se++);N(2,De,ve),N(1,De,ve);for(var se=0;se<ve.length-1;se++)P[se]===E?De[se]=t.AN:De[se]===y&&(P[se]>L&&P[se]<x||P[se]===D||P[se]===k)?De[se]=t.ON_R:se>0&&J[se-1]==="\u0644"&&/\u0622|\u0623|\u0625|\u0627/.test(J[se])&&(De[se-1]=De[se]=t.R_H,se++);J[J.length-1]===t.DOT&&(De[J.length-1]=t.B),J[0]==="\u202B"&&(De[0]=t.RLE);for(var se=0;se<ve.length;se++)Ee[se]=De[ve[se]];return{logicalFromVisual:ve,bidiLevels:Ee}},t.hasBidiCharacters=function(W,P){for(var X=!1,J=0;J<W.length;J++)P[J]=O(W.charAt(J)),!X&&(P[J]==y||P[J]==L||P[J]==E)&&(X=!0);return X},t.getVisualFromLogicalIdx=function(W,P){for(var X=0;X<P.logicalFromVisual.length;X++)if(P.logicalFromVisual[X]==W)return X;return 0}});ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(e,t,n){"use strict";var c=e("./lib/bidiutil"),v=e("./lib/lang"),s=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,a=function(){function p(u){this.session=u,this.bidiMap={},this.currentRow=null,this.bidiUtil=c,this.charWidths=[],this.EOL="\xAC",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="\xB6",this.RLE="\u202B",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=s.test(u.getValue())}return p.prototype.isBidiRow=function(u,r,i){return this.seenBidi?(u!==this.currentRow&&(this.currentRow=u,this.updateRowLine(r,i),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},p.prototype.onChange=function(u){this.seenBidi?this.currentRow=null:u.action=="insert"&&s.test(u.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},p.prototype.getDocumentRow=function(){var u=0,r=this.session.$screenRowCache;if(r.length){var i=this.session.$getRowCacheIndex(r,this.currentRow);i>=0&&(u=this.session.$docRowCache[i])}return u},p.prototype.getSplitIndex=function(){var u=0,r=this.session.$screenRowCache;if(r.length)for(var i,l=this.session.$getRowCacheIndex(r,this.currentRow);this.currentRow-u>0&&(i=this.session.$getRowCacheIndex(r,this.currentRow-u-1),i===l);)l=i,u++;else u=this.currentRow;return u},p.prototype.updateRowLine=function(u,r){u===void 0&&(u=this.getDocumentRow());var i=u===this.session.getLength()-1,l=i?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(u),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var d=this.session.$wrapData[u];d&&(r===void 0&&(r=this.getSplitIndex()),r>0&&d.length?(this.wrapIndent=d.indent,this.wrapOffset=this.wrapIndent*this.charWidths[c.L],this.line=r<d.length?this.line.substring(d[r-1],d[r]):this.line.substring(d[d.length-1])):this.line=this.line.substring(0,d[r]),r==d.length&&(this.line+=this.showInvisibles?l:c.DOT))}else this.line+=this.showInvisibles?l:c.DOT;var f=this.session,o=0,h;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(_,m){return _==="	"||f.isFullWidth(_.charCodeAt(0))?(h=_==="	"?f.getScreenTabSize(m+o):2,o+=h-1,v.stringRepeat(c.DOT,h)):_}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==c.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},p.prototype.updateBidiMap=function(){var u=[];c.hasBidiCharacters(this.line,u)||this.isRtlDir?this.bidiMap=c.doBidiReorder(this.line,u,this.isRtlDir):this.bidiMap={}},p.prototype.markAsDirty=function(){this.currentRow=null},p.prototype.updateCharacterWidths=function(u){if(this.characterWidth!==u.$characterSize.width){this.fontMetrics=u;var r=this.characterWidth=u.$characterSize.width,i=u.$measureCharWidth("\u05D4");this.charWidths[c.L]=this.charWidths[c.EN]=this.charWidths[c.ON_R]=r,this.charWidths[c.R]=this.charWidths[c.AN]=i,this.charWidths[c.R_H]=i*.45,this.charWidths[c.B]=this.charWidths[c.RLE]=0,this.currentRow=null}},p.prototype.setShowInvisibles=function(u){this.showInvisibles=u,this.currentRow=null},p.prototype.setEolChar=function(u){this.EOL=u},p.prototype.setContentWidth=function(u){this.contentWidth=u},p.prototype.isRtlLine=function(u){return this.$isRtl?!0:u!=null?this.session.getLine(u).charAt(0)==this.RLE:this.isRtlDir},p.prototype.setRtlDirection=function(u,r){for(var i=u.getCursorPosition(),l=u.selection.getSelectionAnchor().row;l<=i.row;l++)!r&&u.session.getLine(l).charAt(0)===u.session.$bidiHandler.RLE?u.session.doc.removeInLine(l,0,1):r&&u.session.getLine(l).charAt(0)!==u.session.$bidiHandler.RLE&&u.session.doc.insert({column:0,row:l},u.session.$bidiHandler.RLE)},p.prototype.getPosLeft=function(u){u-=this.wrapIndent;var r=this.line.charAt(0)===this.RLE?1:0,i=u>r?this.session.getOverwrite()?u:u-1:r,l=c.getVisualFromLogicalIdx(i,this.bidiMap),d=this.bidiMap.bidiLevels,f=0;!this.session.getOverwrite()&&u<=r&&d[l]%2!==0&&l++;for(var o=0;o<l;o++)f+=this.charWidths[d[o]];return!this.session.getOverwrite()&&u>r&&d[l]%2===0&&(f+=this.charWidths[d[l]]),this.wrapIndent&&(f+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(f+=this.rtlLineOffset),f},p.prototype.getSelections=function(u,r){var i=this.bidiMap,l=i.bidiLevels,d,f=[],o=0,h=Math.min(u,r)-this.wrapIndent,_=Math.max(u,r)-this.wrapIndent,m=!1,y=!1,C=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var E,D=0;D<l.length;D++)E=i.logicalFromVisual[D],d=l[D],m=E>=h&&E<_,m&&!y?C=o:!m&&y&&f.push({left:C,width:o-C}),o+=this.charWidths[d],y=m;if(m&&D===l.length&&f.push({left:C,width:o-C}),this.isRtlDir)for(var g=0;g<f.length;g++)f[g].left+=this.rtlLineOffset;return f},p.prototype.offsetToCol=function(i){this.isRtlDir&&(i-=this.rtlLineOffset);var r=0,i=Math.max(i,0),l=0,d=0,f=this.bidiMap.bidiLevels,o=this.charWidths[f[d]];for(this.wrapIndent&&(i-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);i>l+o/2;){if(l+=o,d===f.length-1){o=0;break}o=this.charWidths[f[++d]]}return d>0&&f[d-1]%2!==0&&f[d]%2===0?(i<l&&d--,r=this.bidiMap.logicalFromVisual[d]):d>0&&f[d-1]%2===0&&f[d]%2!==0?r=1+(i>l?this.bidiMap.logicalFromVisual[d]:this.bidiMap.logicalFromVisual[d-1]):this.isRtlDir&&d===f.length-1&&o===0&&f[d-1]%2===0||!this.isRtlDir&&d===0&&f[d]%2!==0?r=1+this.bidiMap.logicalFromVisual[d]:(d>0&&f[d-1]%2!==0&&o!==0&&d--,r=this.bidiMap.logicalFromVisual[d]),r===0&&this.isRtlDir&&r++,r+this.wrapIndent},p}();t.BidiHandler=a});ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=function(){function u(r){this.session=r,this.doc=r.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var i=this;this.cursor.on("change",function(l){i.$cursorChanged=!0,i.$silent||i._emit("changeCursor"),!i.$isEmpty&&!i.$silent&&i._emit("changeSelection"),!i.$keepDesiredColumnOnChange&&l.old.column!=l.value.column&&(i.$desiredColumn=null)}),this.anchor.on("change",function(){i.$anchorChanged=!0,!i.$isEmpty&&!i.$silent&&i._emit("changeSelection")})}return u.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},u.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},u.prototype.getCursor=function(){return this.lead.getPosition()},u.prototype.setAnchor=function(r,i){this.$isEmpty=!1,this.anchor.setPosition(r,i)},u.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},u.prototype.getSelectionLead=function(){return this.lead.getPosition()},u.prototype.isBackwards=function(){var r=this.anchor,i=this.lead;return r.row>i.row||r.row==i.row&&r.column>i.column},u.prototype.getRange=function(){var r=this.anchor,i=this.lead;return this.$isEmpty?a.fromPoints(i,i):this.isBackwards()?a.fromPoints(i,r):a.fromPoints(r,i)},u.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},u.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},u.prototype.setRange=function(r,i){var l=i?r.end:r.start,d=i?r.start:r.end;this.$setSelection(l.row,l.column,d.row,d.column)},u.prototype.$setSelection=function(r,i,l,d){if(!this.$silent){var f=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(r,i),this.cursor.setPosition(l,d),this.$isEmpty=!a.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||f!=this.$isEmpty||o)&&this._emit("changeSelection")}},u.prototype.$moveSelection=function(r){var i=this.lead;this.$isEmpty&&this.setSelectionAnchor(i.row,i.column),r.call(this)},u.prototype.selectTo=function(r,i){this.$moveSelection(function(){this.moveCursorTo(r,i)})},u.prototype.selectToPosition=function(r){this.$moveSelection(function(){this.moveCursorToPosition(r)})},u.prototype.moveTo=function(r,i){this.clearSelection(),this.moveCursorTo(r,i)},u.prototype.moveToPosition=function(r){this.clearSelection(),this.moveCursorToPosition(r)},u.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},u.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},u.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},u.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},u.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},u.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},u.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},u.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},u.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},u.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},u.prototype.getWordRange=function(r,i){if(typeof i>"u"){var l=r||this.lead;r=l.row,i=l.column}return this.session.getWordRange(r,i)},u.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},u.prototype.selectAWord=function(){var r=this.getCursor(),i=this.session.getAWordRange(r.row,r.column);this.setSelectionRange(i)},u.prototype.getLineRange=function(r,i){var l=typeof r=="number"?r:this.lead.row,d,f=this.session.getFoldLine(l);return f?(l=f.start.row,d=f.end.row):d=l,i===!0?new a(l,0,d,this.session.getLine(d).length):new a(l,0,d+1,0)},u.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},u.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},u.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},u.prototype.wouldMoveIntoSoftTab=function(r,i,l){var d=r.column,f=r.column+i;return l<0&&(d=r.column-i,f=r.column),this.session.isTabStop(r)&&this.doc.getLine(r.row).slice(d,f).split(" ").length-1==i},u.prototype.moveCursorLeft=function(){var r=this.lead.getPosition(),i;if(i=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(i.start.row,i.start.column);else if(r.column===0)r.row>0&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var l=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,l,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-l):this.moveCursorBy(0,-1)}},u.prototype.moveCursorRight=function(){var r=this.lead.getPosition(),i;if(i=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(i.end.row,i.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var l=this.session.getTabSize(),r=this.lead;this.wouldMoveIntoSoftTab(r,l,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,l):this.moveCursorBy(0,1)}},u.prototype.moveCursorLineStart=function(){var r=this.lead.row,i=this.lead.column,l=this.session.documentToScreenRow(r,i),d=this.session.screenToDocumentPosition(l,0),f=this.session.getDisplayLine(r,null,d.row,d.column),o=f.match(/^\s*/);o[0].length!=i&&!this.session.$useEmacsStyleLineStart&&(d.column+=o[0].length),this.moveCursorToPosition(d)},u.prototype.moveCursorLineEnd=function(){var r=this.lead,i=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==i.column){var l=this.session.getLine(i.row);if(i.column==l.length){var d=l.search(/\s+$/);d>0&&(i.column=d)}}this.moveCursorTo(i.row,i.column)},u.prototype.moveCursorFileEnd=function(){var r=this.doc.getLength()-1,i=this.doc.getLine(r).length;this.moveCursorTo(r,i)},u.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},u.prototype.moveCursorLongWordRight=function(){var r=this.lead.row,i=this.lead.column,l=this.doc.getLine(r),d=l.substring(i);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var f=this.session.getFoldAt(r,i,1);if(f){this.moveCursorTo(f.end.row,f.end.column);return}if(this.session.nonTokenRe.exec(d)&&(i+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,d=l.substring(i)),i>=l.length){this.moveCursorTo(r,l.length),this.moveCursorRight(),r<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(d)&&(i+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,i)},u.prototype.moveCursorLongWordLeft=function(){var r=this.lead.row,i=this.lead.column,l;if(l=this.session.getFoldAt(r,i,-1)){this.moveCursorTo(l.start.row,l.start.column);return}var d=this.session.getFoldStringAt(r,i,-1);d==null&&(d=this.doc.getLine(r).substring(0,i));var f=v.stringReverse(d);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(f)&&(i-=this.session.nonTokenRe.lastIndex,f=f.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),i<=0){this.moveCursorTo(r,0),this.moveCursorLeft(),r>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(f)&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,i)},u.prototype.$shortWordEndIndex=function(r){var i=0,l,d=/\s/,f=this.session.tokenRe;if(f.lastIndex=0,this.session.tokenRe.exec(r))i=this.session.tokenRe.lastIndex;else{for(;(l=r[i])&&d.test(l);)i++;if(i<1){for(f.lastIndex=0;(l=r[i])&&!f.test(l);)if(f.lastIndex=0,i++,d.test(l))if(i>2){i--;break}else{for(;(l=r[i])&&d.test(l);)i++;if(i>2)break}}}return f.lastIndex=0,i},u.prototype.moveCursorShortWordRight=function(){var r=this.lead.row,i=this.lead.column,l=this.doc.getLine(r),d=l.substring(i),f=this.session.getFoldAt(r,i,1);if(f)return this.moveCursorTo(f.end.row,f.end.column);if(i==l.length){var o=this.doc.getLength();do r++,d=this.doc.getLine(r);while(r<o&&/^\s*$/.test(d));/^\s+/.test(d)||(d=""),i=0}var h=this.$shortWordEndIndex(d);this.moveCursorTo(r,i+h)},u.prototype.moveCursorShortWordLeft=function(){var r=this.lead.row,i=this.lead.column,l;if(l=this.session.getFoldAt(r,i,-1))return this.moveCursorTo(l.start.row,l.start.column);var d=this.session.getLine(r).substring(0,i);if(i===0){do r--,d=this.doc.getLine(r);while(r>0&&/^\s*$/.test(d));i=d.length,/\s+$/.test(d)||(d="")}var f=v.stringReverse(d),o=this.$shortWordEndIndex(f);return this.moveCursorTo(r,i-o)},u.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},u.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},u.prototype.moveCursorBy=function(r,i){var l=this.session.documentToScreenPosition(this.lead.row,this.lead.column),d;if(i===0&&(r!==0&&(this.session.$bidiHandler.isBidiRow(l.row,this.lead.row)?(d=this.session.$bidiHandler.getPosLeft(l.column),l.column=Math.round(d/this.session.$bidiHandler.charWidths[0])):d=l.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?l.column=this.$desiredColumn:this.$desiredColumn=l.column),r!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var f=this.session.lineWidgets[this.lead.row];r<0?r-=f.rowsAbove||0:r>0&&(r+=f.rowCount-(f.rowsAbove||0))}var o=this.session.screenToDocumentPosition(l.row+r,l.column,d);r!==0&&i===0&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+i,i===0)},u.prototype.moveCursorToPosition=function(r){this.moveCursorTo(r.row,r.column)},u.prototype.moveCursorTo=function(r,i,l){var d=this.session.getFoldAt(r,i,1);d&&(r=d.start.row,i=d.start.column),this.$keepDesiredColumnOnChange=!0;var f=this.session.getLine(r);/[\uDC00-\uDFFF]/.test(f.charAt(i))&&f.charAt(i-1)&&(this.lead.row==r&&this.lead.column==i+1?i=i-1:i=i+1),this.lead.setPosition(r,i),this.$keepDesiredColumnOnChange=!1,l||(this.$desiredColumn=null)},u.prototype.moveCursorToScreen=function(r,i,l){var d=this.session.screenToDocumentPosition(r,i);this.moveCursorTo(d.row,d.column,l)},u.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},u.prototype.fromOrientedRange=function(r){this.setSelectionRange(r,r.cursor==r.start),this.$desiredColumn=r.desiredColumn||this.$desiredColumn},u.prototype.toOrientedRange=function(r){var i=this.getRange();return r?(r.start.column=i.start.column,r.start.row=i.start.row,r.end.column=i.end.column,r.end.row=i.end.row):r=i,r.cursor=this.isBackwards()?r.start:r.end,r.desiredColumn=this.$desiredColumn,r},u.prototype.getRangeOfMovements=function(r){var i=this.getCursor();try{r(this);var l=this.getCursor();return a.fromPoints(i,l)}catch{return a.fromPoints(i,i)}finally{this.moveCursorToPosition(i)}},u.prototype.toJSON=function(){if(this.rangeCount)var r=this.ranges.map(function(i){var l=i.clone();return l.isBackwards=i.cursor==i.start,l});else{var r=this.getRange();r.isBackwards=this.isBackwards()}return r},u.prototype.fromJSON=function(r){if(r.start==null)if(this.rangeList&&r.length>1){this.toSingleRange(r[0]);for(var i=r.length;i--;){var l=a.fromPoints(r[i].start,r[i].end);r[i].isBackwards&&(l.cursor=l.start),this.addRange(l,!0)}return}else r=r[0];this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},u.prototype.isEqual=function(r){if((r.length||this.rangeCount)&&r.length!=this.rangeCount)return!1;if(!r.length||!this.ranges)return this.getRange().isEqual(r);for(var i=this.ranges.length;i--;)if(!this.ranges[i].isEqual(r[i]))return!1;return!0},u}();p.prototype.setSelectionAnchor=p.prototype.setAnchor,p.prototype.getSelectionAnchor=p.prototype.getAnchor,p.prototype.setSelectionRange=p.prototype.setRange,c.implement(p.prototype,s),t.Selection=p});ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(e,t,n){"use strict";var c=e("./lib/report_error").reportError,v=2e3,s=function(){function a(p){this.splitRegex,this.states=p,this.regExps={},this.matchMappings={};for(var u in this.states){for(var r=this.states[u],i=[],l=0,d=this.matchMappings[u]={defaultToken:"text"},f="g",o=[],h=0;h<r.length;h++){var _=r[h];if(_.defaultToken&&(d.defaultToken=_.defaultToken),_.caseInsensitive&&f.indexOf("i")===-1&&(f+="i"),_.unicode&&f.indexOf("u")===-1&&(f+="u"),_.regex!=null){_.regex instanceof RegExp&&(_.regex=_.regex.toString().slice(1,-1));var m=_.regex,y=new RegExp("(?:("+m+")|(.))").exec("a").length-2;Array.isArray(_.token)?_.token.length==1||y==1?_.token=_.token[0]:y-1!=_.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:_,groupCount:y-1}),_.token=_.token[0]):(_.tokenArray=_.token,_.token=null,_.onMatch=this.$arrayTokens):typeof _.token=="function"&&!_.onMatch&&(y>1?_.onMatch=this.$applyToken:_.onMatch=_.token),y>1&&(/\\\d/.test(_.regex)?m=_.regex.replace(/\\([0-9]+)/g,function(C,E){return"\\"+(parseInt(E,10)+l+1)}):(y=1,m=this.removeCapturingGroups(_.regex)),!_.splitRegex&&typeof _.token!="string"&&o.push(_)),d[l]=h,l+=y,i.push(m),_.onMatch||(_.onMatch=null)}}i.length||(d[0]=0,i.push("$")),o.forEach(function(C){C.splitRegex=this.createSplitterRegexp(C.regex,f)},this),this.regExps[u]=new RegExp("("+i.join(")|(")+")|($)",f)}}return a.prototype.$setMaxTokenCount=function(p){v=p|0},a.prototype.$applyToken=function(p){var u=this.splitRegex.exec(p).slice(1),r=this.token.apply(this,u);if(typeof r=="string")return[{type:r,value:p}];for(var i=[],l=0,d=r.length;l<d;l++)u[l]&&(i[i.length]={type:r[l],value:u[l]});return i},a.prototype.$arrayTokens=function(p){if(!p)return[];var u=this.splitRegex.exec(p);if(!u)return"text";for(var r=[],i=this.tokenArray,l=0,d=i.length;l<d;l++)u[l+1]&&(r[r.length]={type:i[l],value:u[l+1]});return r},a.prototype.removeCapturingGroups=function(p){var u=p.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(r,i){return i?"(?:":r});return u},a.prototype.createSplitterRegexp=function(p,u){if(p.indexOf("(?=")!=-1){var r=0,i=!1,l={};p.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(d,f,o,h,_,m){return i?i=_!="]":_?i=!0:h?(r==l.stack&&(l.end=m+1,l.stack=-1),r--):o&&(r++,o.length!=1&&(l.stack=r,l.start=m)),d}),l.end!=null&&/^\)*$/.test(p.substr(l.end))&&(p=p.substring(0,l.start)+p.substr(l.end))}return p.charAt(0)!="^"&&(p="^"+p),p.charAt(p.length-1)!="$"&&(p+="$"),new RegExp(p,(u||"").replace("g",""))},a.prototype.getLineTokens=function(p,u){if(u&&typeof u!="string"){var r=u.slice(0);u=r[0],u==="#tmp"&&(r.shift(),u=r.shift())}else var r=[];var i=u||"start",l=this.states[i];l||(i="start",l=this.states[i]);var d=this.matchMappings[i],f=this.regExps[i];f.lastIndex=0;for(var o,h=[],_=0,m=0,y={type:null,value:""};o=f.exec(p);){var C=d.defaultToken,E=null,D=o[0],g=f.lastIndex;if(g-D.length>_){var b=p.substring(_,g-D.length);y.type==C?y.value+=b:(y.type&&h.push(y),y={type:C,value:b})}for(var L=0;L<o.length-2;L++)if(o[L+1]!==void 0){E=l[d[L]],E.onMatch?C=E.onMatch(D,i,r,p):C=E.token,E.next&&(typeof E.next=="string"?i=E.next:i=E.next(i,r),l=this.states[i],l||(this.reportError("state doesn't exist",i),i="start",l=this.states[i]),d=this.matchMappings[i],_=g,f=this.regExps[i],f.lastIndex=g),E.consumeLineEnd&&(_=g);break}if(D){if(typeof C=="string")(!E||E.merge!==!1)&&y.type===C?y.value+=D:(y.type&&h.push(y),y={type:C,value:D});else if(C){y.type&&h.push(y),y={type:null,value:""};for(var L=0;L<C.length;L++)h.push(C[L])}}if(_==p.length)break;if(_=g,m++>v){for(m>2*p.length&&this.reportError("infinite loop with in ace tokenizer",{startState:u,line:p});_<p.length;)y.type&&h.push(y),y={value:p.substring(_,_+=500),type:"overflow"};i="start",r=[];break}}return y.type&&h.push(y),r.length>1&&r[0]!==i&&r.unshift("#tmp",i),{tokens:h,state:r.length?r:i}},a}();s.prototype.reportError=c,t.Tokenizer=s});ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(e,t,n){"use strict";var c=e("../lib/deep_copy").deepCopy,v;v=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},function(){this.addRules=function(p,u){if(!u){for(var r in p)this.$rules[r]=p[r];return}for(var r in p){for(var i=p[r],l=0;l<i.length;l++){var d=i[l];(d.next||d.onMatch)&&(typeof d.next=="string"&&d.next.indexOf(u)!==0&&(d.next=u+d.next),d.nextState&&d.nextState.indexOf(u)!==0&&(d.nextState=u+d.nextState))}this.$rules[u+r]=i}},this.getRules=function(){return this.$rules},this.embedRules=function(p,u,r,i,l){var d=typeof p=="function"?new p().getRules():p;if(i)for(var f=0;f<i.length;f++)i[f]=u+i[f];else{i=[];for(var o in d)i.push(u+o)}if(this.addRules(d,u),r)for(var h=Array.prototype[l?"push":"unshift"],f=0;f<i.length;f++)h.apply(this.$rules[i[f]],c(r));this.$embeds||(this.$embeds=[]),this.$embeds.push(u)},this.getEmbeds=function(){return this.$embeds};var s=function(p,u){return(p!="start"||u.length)&&u.unshift(this.nextState,p),this.nextState},a=function(p,u){return u.shift(),u.shift()||"start"};this.normalizeRules=function(){var p=0,u=this.$rules;function r(i){var l=u[i];l.processed=!0;for(var d=0;d<l.length;d++){var f=l[d],o=null;Array.isArray(f)&&(o=f,f={}),!f.regex&&f.start&&(f.regex=f.start,f.next||(f.next=[]),f.next.push({defaultToken:f.token},{token:f.token+".end",regex:f.end||f.start,next:"pop"}),f.token=f.token+".start",f.push=!0);var h=f.next||f.push;if(h&&Array.isArray(h)){var _=f.stateName;_||(_=f.token,typeof _!="string"&&(_=_[0]||""),u[_]&&(_+=p++)),u[_]=h,f.next=_,r(_)}else h=="pop"&&(f.next=a);if(f.push&&(f.nextState=f.next||f.push,f.next=s,delete f.push),f.rules)for(var m in f.rules)u[m]?u[m].push&&u[m].push.apply(u[m],f.rules[m]):u[m]=f.rules[m];var y=typeof f=="string"?f:f.include;if(y&&(y==="$self"&&(y="start"),Array.isArray(y)?o=y.map(function(E){return u[E]}):o=u[y]),o){var C=[d,1].concat(o);f.noEscape&&(C=C.filter(function(E){return!E.next})),l.splice.apply(l,C),d--}f.keywordMap&&(f.token=this.createKeywordMapper(f.keywordMap,f.defaultToken||"text",f.caseInsensitive),delete f.defaultToken)}}Object.keys(u).forEach(r,this)},this.createKeywordMapper=function(p,u,r,i){var l=Object.create(null);return this.$keywordList=[],Object.keys(p).forEach(function(d){for(var f=p[d],o=f.split(i||"|"),h=o.length;h--;){var _=o[h];this.$keywordList.push(_),r&&(_=_.toLowerCase()),l[_]=d}},this),p=null,r?function(d){return l[d.toLowerCase()]||u}:function(d){return l[d]||u}},this.getKeywords=function(){return this.$keywords}}.call(v.prototype),t.TextHighlightRules=v});ace.define("ace/mode/behaviour",["require","exports","module"],function(e,t,n){"use strict";var c;c=function(){this.$behaviours={}},function(){this.add=function(v,s,a){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[v]:this.$behaviours[v]={}}this.$behaviours[v][s]=a},this.addBehaviours=function(v){for(var s in v)for(var a in v[s])this.add(s,a,v[s][a])},this.remove=function(v){this.$behaviours&&this.$behaviours[v]&&delete this.$behaviours[v]},this.inherit=function(v,s){if(typeof v=="function")var a=new v().getBehaviours(s);else var a=v.getBehaviours(s);this.addBehaviours(a)},this.getBehaviours=function(v){if(v){for(var s={},a=0;a<v.length;a++)this.$behaviours[v[a]]&&(s[v[a]]=this.$behaviours[v[a]]);return s}else return this.$behaviours}}.call(c.prototype),t.Behaviour=c});ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=function(){function s(a,p,u){this.$session=a,this.$row=p,this.$rowTokens=a.getTokens(p);var r=a.getTokenAt(p,u);this.$tokenIndex=r?r.index:-1}return s.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},s.prototype.stepForward=function(){this.$tokenIndex+=1;for(var a;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,a||(a=this.$session.getLength()),this.$row>=a)return this.$row=a-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},s.prototype.getCurrentTokenRow=function(){return this.$row},s.prototype.getCurrentTokenColumn=function(){var a=this.$rowTokens,p=this.$tokenIndex,u=a[p].start;if(u!==void 0)return u;for(u=0;p>0;)p-=1,u+=a[p].value.length;return u},s.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},s.prototype.getCurrentTokenRange=function(){var a=this.$rowTokens[this.$tokenIndex],p=this.getCurrentTokenColumn();return new c(this.$row,p,this.$row,p+a.value.length)},s}();t.TokenIterator=v});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(e,t,n){"use strict";var c=e("../../lib/oop"),v=e("../behaviour").Behaviour,s=e("../../token_iterator").TokenIterator,a=e("../../lib/lang"),p=["text","paren.rparen","rparen","paren","punctuation.operator"],u=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],r,i={},l={'"':'"',"'":"'"},d=function(h){var _=-1;if(h.multiSelect&&(_=h.selection.index,i.rangeCount!=h.multiSelect.rangeCount&&(i={rangeCount:h.multiSelect.rangeCount})),i[_])return r=i[_];r=i[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},f=function(h,_,m,y){var C=h.end.row-h.start.row;return{text:m+_+y,selection:[0,h.start.column+1,C,h.end.column+(C?0:1)]}},o;o=function(h){h=h||{},this.add("braces","insertion",function(_,m,y,C,E){var D=y.getCursorPosition(),g=C.doc.getLine(D.row);if(E=="{"){d(y);var b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&L!=="{"&&y.getWrapBehavioursEnabled())return f(b,L,"{","}");if(o.isSaneInsertion(y,C))return/[\]\}\)]/.test(g[D.column])||y.inMultiSelectMode||h.braces?(o.recordAutoInsert(y,C,"}"),{text:"{}",selection:[1,1]}):(o.recordMaybeInsert(y,C,"{"),{text:"{",selection:[1,1]})}else if(E=="}"){d(y);var S=g.substring(D.column,D.column+1);if(S=="}"){var T=C.$findOpeningBracket("}",{column:D.column+1,row:D.row});if(T!==null&&o.isAutoInsertedClosing(D,g,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(E==`
`||E==`\r
`){d(y);var M="";o.isMaybeInsertedClosing(D,g)&&(M=a.stringRepeat("}",r.maybeInsertedBrackets),o.clearMaybeInsertedClosing());var S=g.substring(D.column,D.column+1);if(S==="}"){var w=C.findMatchingBracket({row:D.row,column:D.column+1},"}");if(!w)return null;var F=this.$getIndent(C.getLine(w.row))}else if(M)var F=this.$getIndent(g);else{o.clearMaybeInsertedClosing();return}var x=F+C.getTabString();return{text:`
`+x+`
`+F+M,selection:[1,x.length,1,x.length]}}else o.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="{"){d(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.end.column,E.end.column+1);if(b=="}")return E.end.column++,E;r.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,m,y,C,E){if(E=="("){d(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"(",")");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,")"),{text:"()",selection:[1,1]}}else if(E==")"){d(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),S=L.substring(b.column,b.column+1);if(S==")"){var T=C.$findOpeningBracket(")",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="("){d(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b==")")return E.end.column++,E}}),this.add("brackets","insertion",function(_,m,y,C,E){if(E=="["){d(y);var D=y.getSelectionRange(),g=C.doc.getTextRange(D);if(g!==""&&y.getWrapBehavioursEnabled())return f(D,g,"[","]");if(o.isSaneInsertion(y,C))return o.recordAutoInsert(y,C,"]"),{text:"[]",selection:[1,1]}}else if(E=="]"){d(y);var b=y.getCursorPosition(),L=C.doc.getLine(b.row),S=L.substring(b.column,b.column+1);if(S=="]"){var T=C.$findOpeningBracket("]",{column:b.column+1,row:b.row});if(T!==null&&o.isAutoInsertedClosing(b,L,E))return o.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,m,y,C,E){var D=C.doc.getTextRange(E);if(!E.isMultiLine()&&D=="["){d(y);var g=C.doc.getLine(E.start.row),b=g.substring(E.start.column+1,E.start.column+2);if(b=="]")return E.end.column++,E}}),this.add("string_dquotes","insertion",function(_,m,y,C,E){var D=C.$mode.$quotes||l;if(E.length==1&&D[E]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(E)!=-1)return;d(y);var g=E,b=y.getSelectionRange(),L=C.doc.getTextRange(b);if(L!==""&&(L.length!=1||!D[L])&&y.getWrapBehavioursEnabled())return f(b,L,g,g);if(!L){var S=y.getCursorPosition(),T=C.doc.getLine(S.row),M=T.substring(S.column-1,S.column),w=T.substring(S.column,S.column+1),F=C.getTokenAt(S.row,S.column),x=C.getTokenAt(S.row,S.column+1);if(M=="\\"&&F&&/escape/.test(F.type))return null;var R=F&&/string|escape/.test(F.type),A=!x||/string|escape/.test(x.type),I;if(w==g)I=R!==A,I&&/string\.end/.test(x.type)&&(I=!1);else{if(R&&!A||R&&A)return null;var $=C.$mode.tokenRe;$.lastIndex=0;var k=$.test(M);$.lastIndex=0;var H=$.test(w),U=C.$mode.$pairQuotesAfter,q=U&&U[g]&&U[g].test(M);if(!q&&k||H||w&&!/[\s;,.})\]\\]/.test(w))return null;var N=T[S.column-2];if(M==g&&(N==g||$.test(N)))return null;I=!0}return{text:I?g+g:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,m,y,C,E){var D=C.$mode.$quotes||l,g=C.doc.getTextRange(E);if(!E.isMultiLine()&&D.hasOwnProperty(g)){d(y);var b=C.doc.getLine(E.start.row),L=b.substring(E.start.column+1,E.start.column+2);if(L==g)return E.end.column++,E}}),h.closeDocComment!==!1&&this.add("doc comment end","insertion",function(_,m,y,C,E){if(_==="doc-start"&&(E===`
`||E===`\r
`)&&y.selection.isEmpty()){var D=y.getCursorPosition(),g=C.doc.getLine(D.row),b=C.doc.getLine(D.row+1),L=this.$getIndent(g);if(/\s*\*/.test(b))return/^\s*\*/.test(g)?{text:E+L+"* ",selection:[1,3+L.length,1,3+L.length]}:{text:E+L+" * ",selection:[1,3+L.length,1,3+L.length]};if(/\/\*\*/.test(g.substring(0,D.column)))return{text:E+L+" * "+E+" "+L+"*/",selection:[1,4+L.length,1,4+L.length]}}})},o.isSaneInsertion=function(h,_){var m=h.getCursorPosition(),y=new s(_,m.row,m.column);if(!this.$matchTokenType(y.getCurrentToken()||"text",p)){if(/[)}\]]/.test(h.session.getLine(m.row)[m.column]))return!0;var C=new s(_,m.row,m.column+1);if(!this.$matchTokenType(C.getCurrentToken()||"text",p))return!1}return y.stepForward(),y.getCurrentTokenRow()!==m.row||this.$matchTokenType(y.getCurrentToken()||"text",u)},o.$matchTokenType=function(h,_){return _.indexOf(h.type||h)>-1},o.recordAutoInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isAutoInsertedClosing(y,C,r.autoInsertedLineEnd[0])||(r.autoInsertedBrackets=0),r.autoInsertedRow=y.row,r.autoInsertedLineEnd=m+C.substr(y.column),r.autoInsertedBrackets++},o.recordMaybeInsert=function(h,_,m){var y=h.getCursorPosition(),C=_.doc.getLine(y.row);this.isMaybeInsertedClosing(y,C)||(r.maybeInsertedBrackets=0),r.maybeInsertedRow=y.row,r.maybeInsertedLineStart=C.substr(0,y.column)+m,r.maybeInsertedLineEnd=C.substr(y.column),r.maybeInsertedBrackets++},o.isAutoInsertedClosing=function(h,_,m){return r.autoInsertedBrackets>0&&h.row===r.autoInsertedRow&&m===r.autoInsertedLineEnd[0]&&_.substr(h.column)===r.autoInsertedLineEnd},o.isMaybeInsertedClosing=function(h,_){return r.maybeInsertedBrackets>0&&h.row===r.maybeInsertedRow&&_.substr(h.column)===r.maybeInsertedLineEnd&&_.substr(0,h.column)==r.maybeInsertedLineStart},o.popAutoInsertedClosing=function(){r.autoInsertedLineEnd=r.autoInsertedLineEnd.substr(1),r.autoInsertedBrackets--},o.clearMaybeInsertedClosing=function(){r&&(r.maybeInsertedBrackets=0,r.maybeInsertedRow=-1)},c.inherits(o,v),t.CstyleBehaviour=o});ace.define("ace/unicode",["require","exports","module"],function(e,t,n){"use strict";for(var c=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],v=0,s=[],a=0;a<c.length;a+=2)s.push(v+=c[a]),c[a+1]&&s.push(45,v+=c[a+1]);t.wordChars=String.fromCharCode.apply(null,s)});ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../config"),v=e("../tokenizer").Tokenizer,s=e("./text_highlight_rules").TextHighlightRules,a=e("./behaviour/cstyle").CstyleBehaviour,p=e("../unicode"),u=e("../lib/lang"),r=e("../token_iterator").TokenIterator,i=e("../range").Range,l;l=function(){this.HighlightRules=s},function(){this.$defaultBehaviour=new a,this.tokenRe=new RegExp("^["+p.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+p.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new v(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(d,f,o,h){var _=f.doc,m=!0,y=!0,C=1/0,E=f.getTabSize(),D=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var L=this.lineCommentStart.map(u.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var L=u.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;L=new RegExp("^(\\s*)(?:"+L+") ?"),D=f.getUseSoftTabs();var M=function(H,U){var q=H.match(L);if(q){var N=q[1].length,K=q[0].length;!x(H,N,K)&&q[0][K-1]==" "&&K--,_.removeInLine(U,N,K)}},F=g+" ",T=function(H,U){(!m||/\S/.test(H))&&(x(H,C,C)?_.insertInLine({row:U,column:C},F):_.insertInLine({row:U,column:C},g))},w=function(H,U){return L.test(H)},x=function(H,U,q){for(var N=0;U--&&H.charAt(U)==" ";)N++;if(N%E!=0)return!1;for(var N=0;H.charAt(q++)==" ";)N++;return E>2?N%E!=E-1:N%E==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,b=this.blockComment.end,L=new RegExp("^(\\s*)(?:"+u.escapeRegExp(g)+")"),S=new RegExp("(?:"+u.escapeRegExp(b)+")\\s*$"),T=function(I,$){w(I,$)||(!m||/\S/.test(I))&&(_.insertInLine({row:$,column:I.length},b),_.insertInLine({row:$,column:C},g))},M=function(I,$){var k;(k=I.match(S))&&_.removeInLine($,I.length-k[0].length,I.length),(k=I.match(L))&&_.removeInLine($,k[1].length,k[0].length)},w=function(I,$){if(L.test(I))return!0;for(var k=f.getTokens($),H=0;H<k.length;H++)if(k[H].type==="comment")return!0}}function R(I){for(var $=o;$<=h;$++)I(_.getLine($),$)}var A=1/0;R(function(I,$){var k=I.search(/\S/);k!==-1?(k<C&&(C=k),y&&!w(I,$)&&(y=!1)):A>I.length&&(A=I.length)}),C==1/0&&(C=A,m=!1,y=!1),D&&C%E!=0&&(C=Math.floor(C/E)*E),R(y?M:T)},this.toggleBlockComment=function(d,f,o,h){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var m=new r(f,h.row,h.column),y=m.getCurrentToken(),C=f.selection,E=f.selection.toOrientedRange(),D,g;if(y&&/comment/.test(y.type)){for(var b,L;y&&/comment/.test(y.type);){var S=y.value.indexOf(_.start);if(S!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+S;b=new i(T,M,T,M+_.start.length);break}y=m.stepBackward()}for(var m=new r(f,h.row,h.column),y=m.getCurrentToken();y&&/comment/.test(y.type);){var S=y.value.indexOf(_.end);if(S!=-1){var T=m.getCurrentTokenRow(),M=m.getCurrentTokenColumn()+S;L=new i(T,M,T,M+_.end.length);break}y=m.stepForward()}L&&f.remove(L),b&&(f.remove(b),D=b.start.row,g=-_.start.length)}else g=_.start.length,D=o.start.row,f.insert(o.end,_.end),f.insert(o.start,_.start);E.start.row==D&&(E.start.column+=g),E.end.row==D&&(E.end.column+=g),f.selection.fromOrientedRange(E)}},this.getNextLineIndent=function(d,f,o){return this.$getIndent(f)},this.checkOutdent=function(d,f,o){return!1},this.autoOutdent=function(d,f,o){},this.$getIndent=function(d){return d.match(/^\s*/)[0]},this.createWorker=function(d){return null},this.createModeDelegates=function(d){this.$embeds=[],this.$modes={};for(var f in d)if(d[f]){var o=d[f],h=o.prototype.$id,_=c.$modes[h];_||(c.$modes[h]=_=new o),c.$modes[f]||(c.$modes[f]=_),this.$embeds.push(f),this.$modes[f]=_}for(var m=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],y=function(E){(function(D){var g=m[E],b=D[g];D[m[E]]=function(){return this.$delegator(g,arguments,b)}})(C)},C=this,f=0;f<m.length;f++)y(f)},this.$delegator=function(d,f,o){var h=f[0]||"start";if(typeof h!="string"){if(Array.isArray(h[2])){var _=h[2][h[2].length-1],m=this.$modes[_];if(m)return m[d].apply(m,[h[1]].concat([].slice.call(f,1)))}h=h[0]||"start"}for(var y=0;y<this.$embeds.length;y++)if(this.$modes[this.$embeds[y]]){var C=h.split(this.$embeds[y]);if(!C[0]&&C[1]){f[0]=C[1];var m=this.$modes[this.$embeds[y]];return m[d].apply(m,f)}}var E=o.apply(this,f);return o?E:void 0},this.transformAction=function(d,f,o,h,_){if(this.$behaviour){var m=this.$behaviour.getBehaviours();for(var y in m)if(m[y][f]){var C=m[y][f].apply(this,arguments);if(C)return C}}},this.getKeywords=function(d){if(!this.completionKeywords){var f=this.$tokenizer.rules,o=[];for(var h in f)for(var _=f[h],m=0,y=_.length;m<y;m++)if(typeof _[m].token=="string")/keyword|support|storage/.test(_[m].token)&&o.push(_[m].regex);else if(typeof _[m].token=="object"){for(var C=0,E=_[m].token.length;C<E;C++)if(/keyword|support|storage/.test(_[m].token[C])){var h=_[m].regex.match(/\(.+?\)/g)[C];o.push(h.substr(1,h.length-2))}}this.completionKeywords=o}return d?o.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(d,f,o,h){var _=this.$keywordList||this.$createKeywordList();return _.map(function(m){return{name:m,value:m,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}.call(l.prototype),t.Mode=l});ace.define("ace/apply_delta",["require","exports","module"],function(e,t,n){"use strict";function c(a,p){throw console.log("Invalid Delta:",a),"Invalid Delta: "+p}function v(a,p){return p.row>=0&&p.row<a.length&&p.column>=0&&p.column<=a[p.row].length}function s(a,p){p.action!="insert"&&p.action!="remove"&&c(p,"delta.action must be 'insert' or 'remove'"),p.lines instanceof Array||c(p,"delta.lines must be an Array"),(!p.start||!p.end)&&c(p,"delta.start/end must be an present");var u=p.start;v(a,p.start)||c(p,"delta.start must be contained in document");var r=p.end;p.action=="remove"&&!v(a,r)&&c(p,"delta.end must contained in document for 'remove' actions");var i=r.row-u.row,l=r.column-(i==0?u.column:0);(i!=p.lines.length-1||p.lines[i].length!=l)&&c(p,"delta.range must match delta lines")}t.applyDelta=function(a,p,u){var r=p.start.row,i=p.start.column,l=a[r]||"";switch(p.action){case"insert":var d=p.lines;if(d.length===1)a[r]=l.substring(0,i)+p.lines[0]+l.substring(i);else{var f=[r,1].concat(p.lines);a.splice.apply(a,f),a[r]=l.substring(0,i)+a[r],a[r+p.lines.length-1]+=l.substring(i)}break;case"remove":var o=p.end.column,h=p.end.row;r===h?a[r]=l.substring(0,i)+l.substring(o):a.splice(r,h-r+1,l.substring(0,i)+a[h].substring(o));break}}});ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function u(r,i,l){this.$onChange=this.onChange.bind(this),this.attach(r),typeof i!="number"?this.setPosition(i.row,i.column):this.setPosition(i,l)}return u.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},u.prototype.getDocument=function(){return this.document},u.prototype.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row)&&!(r.start.row>this.row)){var i=p(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(i.row,i.column,!0)}},u.prototype.setPosition=function(r,i,l){var d;if(l?d={row:r,column:i}:d=this.$clipPositionToDocument(r,i),!(this.row==d.row&&this.column==d.column)){var f={row:this.row,column:this.column};this.row=d.row,this.column=d.column,this._signal("change",{old:f,value:d})}},u.prototype.detach=function(){this.document.off("change",this.$onChange)},u.prototype.attach=function(r){this.document=r||this.document,this.document.on("change",this.$onChange)},u.prototype.$clipPositionToDocument=function(r,i){var l={};return r>=this.document.getLength()?(l.row=Math.max(0,this.document.getLength()-1),l.column=this.document.getLine(l.row).length):r<0?(l.row=0,l.column=0):(l.row=r,l.column=Math.min(this.document.getLine(l.row).length,Math.max(0,i))),i<0&&(l.column=0),l},u}();s.prototype.$insertRight=!1,c.implement(s.prototype,v);function a(u,r,i){var l=i?u.column<=r.column:u.column<r.column;return u.row<r.row||u.row==r.row&&l}function p(u,r,i){var l=u.action=="insert",d=(l?1:-1)*(u.end.row-u.start.row),f=(l?1:-1)*(u.end.column-u.start.column),o=u.start,h=l?o:u.end;return a(r,o,i)?{row:r.row,column:r.column}:a(h,r,!i)?{row:r.row+d,column:r.column+(r.row==h.row?f:0)}:{row:o.row,column:o.column}}t.Anchor=s});ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,a=e("./range").Range,p=e("./anchor").Anchor,u=function(){function r(i){this.$lines=[""],i.length===0?this.$lines=[""]:Array.isArray(i)?this.insertMergedLines({row:0,column:0},i):this.insert({row:0,column:0},i)}return r.prototype.setValue=function(i){var l=this.getLength()-1;this.remove(new a(0,0,l,this.getLine(l).length)),this.insert({row:0,column:0},i||"")},r.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},r.prototype.createAnchor=function(i,l){return new p(this,i,l)},r.prototype.$detectNewLine=function(i){var l=i.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=l?l[1]:`
`,this._signal("changeNewLineMode")},r.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},r.prototype.setNewLineMode=function(i){this.$newLineMode!==i&&(this.$newLineMode=i,this._signal("changeNewLineMode"))},r.prototype.getNewLineMode=function(){return this.$newLineMode},r.prototype.isNewLine=function(i){return i==`\r
`||i=="\r"||i==`
`},r.prototype.getLine=function(i){return this.$lines[i]||""},r.prototype.getLines=function(i,l){return this.$lines.slice(i,l+1)},r.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},r.prototype.getLength=function(){return this.$lines.length},r.prototype.getTextRange=function(i){return this.getLinesForRange(i).join(this.getNewLineCharacter())},r.prototype.getLinesForRange=function(i){var l;if(i.start.row===i.end.row)l=[this.getLine(i.start.row).substring(i.start.column,i.end.column)];else{l=this.getLines(i.start.row,i.end.row),l[0]=(l[0]||"").substring(i.start.column);var d=l.length-1;i.end.row-i.start.row==d&&(l[d]=l[d].substring(0,i.end.column))}return l},r.prototype.insertLines=function(i,l){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(i,l)},r.prototype.removeLines=function(i,l){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(i,l)},r.prototype.insertNewLine=function(i){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(i,["",""])},r.prototype.insert=function(i,l){return this.getLength()<=1&&this.$detectNewLine(l),this.insertMergedLines(i,this.$split(l))},r.prototype.insertInLine=function(i,l){var d=this.clippedPos(i.row,i.column),f=this.pos(i.row,i.column+l.length);return this.applyDelta({start:d,end:f,action:"insert",lines:[l]},!0),this.clonePos(f)},r.prototype.clippedPos=function(i,l){var d=this.getLength();i===void 0?i=d:i<0?i=0:i>=d&&(i=d-1,l=void 0);var f=this.getLine(i);return l==null&&(l=f.length),l=Math.min(Math.max(l,0),f.length),{row:i,column:l}},r.prototype.clonePos=function(i){return{row:i.row,column:i.column}},r.prototype.pos=function(i,l){return{row:i,column:l}},r.prototype.$clipPosition=function(i){var l=this.getLength();return i.row>=l?(i.row=Math.max(0,l-1),i.column=this.getLine(l-1).length):(i.row=Math.max(0,i.row),i.column=Math.min(Math.max(i.column,0),this.getLine(i.row).length)),i},r.prototype.insertFullLines=function(i,l){i=Math.min(Math.max(i,0),this.getLength());var d=0;i<this.getLength()?(l=l.concat([""]),d=0):(l=[""].concat(l),i--,d=this.$lines[i].length),this.insertMergedLines({row:i,column:d},l)},r.prototype.insertMergedLines=function(i,l){var d=this.clippedPos(i.row,i.column),f={row:d.row+l.length-1,column:(l.length==1?d.column:0)+l[l.length-1].length};return this.applyDelta({start:d,end:f,action:"insert",lines:l}),this.clonePos(f)},r.prototype.remove=function(i){var l=this.clippedPos(i.start.row,i.start.column),d=this.clippedPos(i.end.row,i.end.column);return this.applyDelta({start:l,end:d,action:"remove",lines:this.getLinesForRange({start:l,end:d})}),this.clonePos(l)},r.prototype.removeInLine=function(i,l,d){var f=this.clippedPos(i,l),o=this.clippedPos(i,d);return this.applyDelta({start:f,end:o,action:"remove",lines:this.getLinesForRange({start:f,end:o})},!0),this.clonePos(f)},r.prototype.removeFullLines=function(i,l){i=Math.min(Math.max(0,i),this.getLength()-1),l=Math.min(Math.max(0,l),this.getLength()-1);var d=l==this.getLength()-1&&i>0,f=l<this.getLength()-1,o=d?i-1:i,h=d?this.getLine(o).length:0,_=f?l+1:l,m=f?0:this.getLine(_).length,y=new a(o,h,_,m),C=this.$lines.slice(i,l+1);return this.applyDelta({start:y.start,end:y.end,action:"remove",lines:this.getLinesForRange(y)}),C},r.prototype.removeNewLine=function(i){i<this.getLength()-1&&i>=0&&this.applyDelta({start:this.pos(i,this.getLine(i).length),end:this.pos(i+1,0),action:"remove",lines:["",""]})},r.prototype.replace=function(i,l){if(i instanceof a||(i=a.fromPoints(i.start,i.end)),l.length===0&&i.isEmpty())return i.start;if(l==this.getTextRange(i))return i.end;this.remove(i);var d;return l?d=this.insert(i.start,l):d=i.start,d},r.prototype.applyDeltas=function(i){for(var l=0;l<i.length;l++)this.applyDelta(i[l])},r.prototype.revertDeltas=function(i){for(var l=i.length-1;l>=0;l--)this.revertDelta(i[l])},r.prototype.applyDelta=function(i,l){var d=i.action=="insert";(d?i.lines.length<=1&&!i.lines[0]:!a.comparePoints(i.start,i.end))||(d&&i.lines.length>2e4?this.$splitAndapplyLargeDelta(i,2e4):(v(this.$lines,i,l),this._signal("change",i)))},r.prototype.$safeApplyDelta=function(i){var l=this.$lines.length;(i.action=="remove"&&i.start.row<l&&i.end.row<l||i.action=="insert"&&i.start.row<=l)&&this.applyDelta(i)},r.prototype.$splitAndapplyLargeDelta=function(i,l){for(var d=i.lines,f=d.length-l+1,o=i.start.row,h=i.start.column,_=0,m=0;_<f;_=m){m+=l-1;var y=d.slice(_,m);y.push(""),this.applyDelta({start:this.pos(o+_,h),end:this.pos(o+m,h=0),action:i.action,lines:y},!0)}i.lines=d.slice(_),i.start.row=o+_,i.start.column=h,this.applyDelta(i,!0)},r.prototype.revertDelta=function(i){this.$safeApplyDelta({start:this.clonePos(i.start),end:this.clonePos(i.end),action:i.action=="insert"?"remove":"insert",lines:i.lines.slice()})},r.prototype.indexToPosition=function(i,l){for(var d=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=l||0,h=d.length;o<h;o++)if(i-=d[o].length+f,i<0)return{row:o,column:i+d[o].length+f};return{row:h-1,column:i+d[h-1].length+f}},r.prototype.positionToIndex=function(i,l){for(var d=this.$lines||this.getAllLines(),f=this.getNewLineCharacter().length,o=0,h=Math.min(i.row,d.length),_=l||0;_<h;++_)o+=d[_].length+f;return o+i.column},r.prototype.$split=function(i){return i.split(/\r\n|\r|\n/)},r}();u.prototype.$autoNewLine="",u.prototype.$newLineMode="auto",c.implement(u.prototype,s),t.Document=u});ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/event_emitter").EventEmitter,s=function(){function a(p,u){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=p;var r=this;this.$worker=function(){if(r.running){for(var i=new Date,l=r.currentLine,d=-1,f=r.doc,o=l;r.lines[l];)l++;var h=f.getLength(),_=0;for(r.running=!1;l<h;){r.$tokenizeRow(l),d=l;do l++;while(r.lines[l]);if(_++,_%5===0&&new Date-i>20){r.running=setTimeout(r.$worker,20);break}}r.currentLine=l,d==-1&&(d=l),o<=d&&r.fireUpdateEvent(o,d)}}}return a.prototype.setTokenizer=function(p){this.tokenizer=p,this.lines=[],this.states=[],this.start(0)},a.prototype.setDocument=function(p){this.doc=p,this.lines=[],this.states=[],this.stop()},a.prototype.fireUpdateEvent=function(p,u){var r={first:p,last:u};this._signal("update",{data:r})},a.prototype.start=function(p){this.currentLine=Math.min(p||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},a.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},a.prototype.$updateOnChange=function(p){var u=p.start.row,r=p.end.row-u;if(r===0)this.lines[u]=null;else if(p.action=="remove")this.lines.splice(u,r+1,null),this.states.splice(u,r+1,null);else{var i=Array(r+1);i.unshift(u,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(u,this.currentLine,this.doc.getLength()),this.stop()},a.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},a.prototype.getTokens=function(p){return this.lines[p]||this.$tokenizeRow(p)},a.prototype.getState=function(p){return this.currentLine==p&&this.$tokenizeRow(p),this.states[p]||"start"},a.prototype.$tokenizeRow=function(p){var u=this.doc.getLine(p),r=this.states[p-1],i=this.tokenizer.getLineTokens(u,r,p);return this.states[p]+""!=i.state+""?(this.states[p]=i.state,this.lines[p+1]=null,this.currentLine>p+1&&(this.currentLine=p+1)):this.currentLine==p&&(this.currentLine=p+1),this.lines[p]=i.tokens},a.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},a}();c.implement(s.prototype,v),t.BackgroundTokenizer=s});ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./range").Range,s=function(){function a(p,u,r){r===void 0&&(r="text"),this.setRegexp(p),this.clazz=u,this.type=r}return a.prototype.setRegexp=function(p){this.regExp+""!=p+""&&(this.regExp=p,this.cache=[])},a.prototype.update=function(p,u,r,i){if(this.regExp)for(var l=i.firstRow,d=i.lastRow,f={},o=l;o<=d;o++){var h=this.cache[o];h==null&&(h=c.getMatchOffsets(r.getLine(o),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(C){return new v(o,C.offset,o,C.offset+C.length)}),this.cache[o]=h.length?h:"");for(var _=h.length;_--;){var m=h[_].toScreenRange(r),y=m.toString();f[y]||(f[y]=!0,u.drawSingleLineMarker(p,m,this.clazz,i))}}},a}();s.prototype.MAX_RANGES=500,t.SearchHighlight=s});ace.define("ace/undomanager",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=function(){function D(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return D.prototype.addSession=function(g){this.$session=g},D.prototype.add=function(g,b,L){if(!this.$fromUndo&&g!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),b===!1||!this.lastDeltas){this.lastDeltas=[];var S=this.$undoStack.length;S>this.$undoDepth-1&&this.$undoStack.splice(0,S-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),g.id=this.$rev=++this.$maxRev}(g.action=="remove"||g.action=="insert")&&(this.$lastDelta=g),this.lastDeltas.push(g)}},D.prototype.addSelection=function(g,b){this.selections.push({value:g,rev:b||this.$rev})},D.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},D.prototype.markIgnored=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,S=L.length;S--;){var T=L[S][0];if(T.id<=g)break;T.id<b&&(T.ignore=!0)}this.lastDeltas=null},D.prototype.getSelection=function(g,b){for(var L=this.selections,S=L.length;S--;){var T=L[S];if(T.rev<g)return b&&(T=L[S+1]),T}},D.prototype.getRevision=function(){return this.$rev},D.prototype.getDeltas=function(g,b){b==null&&(b=this.$rev+1);for(var L=this.$undoStack,S=null,T=0,M=L.length;M--;){var w=L[M][0];if(w.id<b&&!S&&(S=M+1),w.id<=g){T=M+1;break}}return L.slice(T,S)},D.prototype.getChangedRanges=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.getChangedLines=function(g,b){b==null&&(b=this.$rev+1)},D.prototype.undo=function(g,b){this.lastDeltas=null;var L=this.$undoStack;if(v(L,L.length)){g||(g=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var S=L.pop(),T=null;return S&&(T=g.undoChanges(S,b),this.$redoStack.push(S),this.$syncRev()),this.$fromUndo=!1,T}},D.prototype.redo=function(g,b){if(this.lastDeltas=null,g||(g=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var L=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);E(this.$redoStack,L),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(M){M[0].id=++this.$maxRev},this)}var S=this.$redoStack.pop(),T=null;return S&&(T=g.redoChanges(S,b),this.$undoStack.push(S),this.$syncRev()),this.$fromUndo=!1,T},D.prototype.$syncRev=function(){var g=this.$undoStack,b=g[g.length-1],L=b&&b[0].id||0;this.$redoStackBaseRev=L,this.$rev=L},D.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},D.prototype.canUndo=function(){return this.$undoStack.length>0},D.prototype.canRedo=function(){return this.$redoStack.length>0},D.prototype.bookmark=function(g){g==null&&(g=this.$rev),this.mark=g},D.prototype.isAtBookmark=function(){return this.$rev===this.mark},D.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},D.prototype.fromJSON=function(g){this.reset(),this.$undoStack=g.$undoStack,this.$redoStack=g.$redoStack},D.prototype.$prettyPrint=function(g){return g?l(g):l(this.$undoStack)+`
---
`+l(this.$redoStack)},D}();c.prototype.hasUndo=c.prototype.canUndo,c.prototype.hasRedo=c.prototype.canRedo,c.prototype.isClean=c.prototype.isAtBookmark,c.prototype.markClean=c.prototype.bookmark;function v(D,g){for(var b=g;b--;){var L=D[b];if(L&&!L[0].ignore){for(;b<g-1;){var S=o(D[b],D[b+1]);D[b]=S[0],D[b+1]=S[1],b++}return!0}}}var s=e("./range").Range,a=s.comparePoints,p=s.comparePoints;function u(D){var g=D.action=="insert",b=D.start,L=D.end,S=(L.row-b.row)*(g?1:-1),T=(L.column-b.column)*(g?1:-1);g&&(L=b);for(var M in this.marks){var w=this.marks[M],F=p(w,b);if(!(F<0)){if(F===0&&g)if(w.bias==1)F=1;else{w.bias==-1;continue}var x=g?F:p(w,L);if(x>0){w.row+=S,w.column+=w.row==L.row?T:0;continue}!g&&x<=0&&(w.row=b.row,w.column=b.column,x===0&&(w.bias=1))}}}function r(D){return{row:D.row,column:D.column}}function i(D){return{start:r(D.start),end:r(D.end),action:D.action,lines:D.lines.slice()}}function l(D){if(D=D||this,Array.isArray(D))return D.map(l).join(`
`);var g="";return D.action?(g=D.action=="insert"?"+":"-",g+="["+D.lines+"]"):D.value&&(Array.isArray(D.value)?g=D.value.map(d).join(`
`):g=d(D.value)),D.start&&(g+=d(D)),(D.id||D.rev)&&(g+="	("+(D.id||D.rev)+")"),g}function d(D){return D.start.row+":"+D.start.column+"=>"+D.end.row+":"+D.end.column}function f(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;else if(!b&&L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.start,D.start)<=0)_(D,g,1);else return null;else if(!b&&!L)if(a(g.start,D.start)>=0)_(g,D,1);else if(a(g.end,D.start)<=0)_(D,g,-1);else return null;return[g,D]}function o(D,g){for(var b=D.length;b--;)for(var L=0;L<g.length;L++)if(!f(D[b],g[L])){for(;b<D.length;){for(;L--;)f(g[L],D[b]);L=g.length,b++}return[D,g]}return D.selectionBefore=g.selectionBefore=D.selectionAfter=g.selectionAfter=null,[g,D]}function h(D,g){var b=D.action=="insert",L=g.action=="insert";if(b&&L)a(D.start,g.start)<0?_(g,D,1):_(D,g,1);else if(b&&!L)a(D.start,g.end)>=0?_(D,g,-1):(a(D.start,g.start)<=0||_(D,s.fromPoints(g.start,D.start),-1),_(g,D,1));else if(!b&&L)a(g.start,D.end)>=0?_(g,D,-1):(a(g.start,D.start)<=0||_(g,s.fromPoints(D.start,g.start),-1),_(D,g,1));else if(!b&&!L)if(a(g.start,D.end)>=0)_(g,D,-1);else if(a(g.end,D.start)<=0)_(D,g,-1);else{var S,T;return a(D.start,g.start)<0&&(S=D,D=y(D,g.start)),a(D.end,g.end)>0&&(T=y(D,g.end)),m(g.end,D.start,D.end,-1),T&&!S&&(D.lines=T.lines,D.start=T.start,D.end=T.end,T=D),[g,S,T].filter(Boolean)}return[g,D]}function _(D,g,b){m(D.start,g.start,g.end,b),m(D.end,g.start,g.end,b)}function m(D,g,b,L){D.row==(L==1?g:b).row&&(D.column+=L*(b.column-g.column)),D.row+=L*(b.row-g.row)}function y(D,g){var b=D.lines,L=D.end;D.end=r(g);var S=D.end.row-D.start.row,T=b.splice(S,b.length),M=S?g.column:g.column-D.start.column;b.push(T[0].substring(0,M)),T[0]=T[0].substr(M);var w={start:r(g),end:L,lines:T,action:D.action};return w}function C(D,g){g=i(g);for(var b=D.length;b--;){for(var L=D[b],S=0;S<L.length;S++){var T=L[S],M=h(T,g);g=M[0],M.length!=2&&(M[2]?(L.splice(S+1,1,M[1],M[2]),S++):M[1]||(L.splice(S,1),S--))}L.length||D.splice(b,1)}return D}function E(D,g){for(var b=0;b<g.length;b++)for(var L=g[b],S=0;S<L.length;S++)C(D,L[S])}t.UndoManager=c});ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../range").Range,v=function(){function s(a,p){this.foldData=a,Array.isArray(p)?this.folds=p:p=this.folds=[p];var u=p[p.length-1];this.range=new c(p[0].start.row,p[0].start.column,u.end.row,u.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(r){r.setFoldLine(this)},this)}return s.prototype.shiftRow=function(a){this.start.row+=a,this.end.row+=a,this.folds.forEach(function(p){p.start.row+=a,p.end.row+=a})},s.prototype.addFold=function(a){if(a.sameRow){if(a.start.row<this.startRow||a.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(a),this.folds.sort(function(p,u){return-p.range.compareEnd(u.start.row,u.start.column)}),this.range.compareEnd(a.start.row,a.start.column)>0?(this.end.row=a.end.row,this.end.column=a.end.column):this.range.compareStart(a.end.row,a.end.column)<0&&(this.start.row=a.start.row,this.start.column=a.start.column)}else if(a.start.row==this.end.row)this.folds.push(a),this.end.row=a.end.row,this.end.column=a.end.column;else if(a.end.row==this.start.row)this.folds.unshift(a),this.start.row=a.start.row,this.start.column=a.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");a.foldLine=this},s.prototype.containsRow=function(a){return a>=this.start.row&&a<=this.end.row},s.prototype.walk=function(a,p,u){var r=0,i=this.folds,l,d,f,o=!0;p==null&&(p=this.end.row,u=this.end.column);for(var h=0;h<i.length;h++){if(l=i[h],d=l.range.compareStart(p,u),d==-1){a(null,p,u,r,o);return}if(f=a(null,l.start.row,l.start.column,r,o),f=!f&&a(l.placeholder,l.start.row,l.start.column,r),f||d===0)return;o=!l.sameRow,r=l.end.column}a(null,p,u,r,o)},s.prototype.getNextFoldTo=function(a,p){for(var u,r,i=0;i<this.folds.length;i++){if(u=this.folds[i],r=u.range.compareEnd(a,p),r==-1)return{fold:u,kind:"after"};if(r===0)return{fold:u,kind:"inside"}}return null},s.prototype.addRemoveChars=function(a,p,u){var r=this.getNextFoldTo(a,p),i,l;if(r){if(i=r.fold,r.kind=="inside"&&i.start.column!=p&&i.start.row!=a)window.console&&window.console.log(a,p,i);else if(i.start.row==a){l=this.folds;var d=l.indexOf(i);for(d===0&&(this.start.column+=u),d;d<l.length;d++){if(i=l[d],i.start.column+=u,!i.sameRow)return;i.end.column+=u}this.end.column+=u}}},s.prototype.split=function(a,p){var u=this.getNextFoldTo(a,p);if(!u||u.kind=="inside")return null;var r=u.fold,i=this.folds,l=this.foldData,d=i.indexOf(r),f=i[d-1];this.end.row=f.end.row,this.end.column=f.end.column,i=i.splice(d,i.length-d);var o=new s(l,i);return l.splice(l.indexOf(this)+1,0,o),o},s.prototype.merge=function(a){for(var p=a.folds,u=0;u<p.length;u++)this.addFold(p[u]);var r=this.foldData;r.splice(r.indexOf(a),1)},s.prototype.toString=function(){var a=[this.range.toString()+": ["];return this.folds.forEach(function(p){a.push("  "+p.toString())}),a.push("]"),a.join(`
`)},s.prototype.idxToPosition=function(a){for(var p=0,u=0;u<this.folds.length;u++){var r=this.folds[u];if(a-=r.start.column-p,a<0)return{row:r.start.row,column:r.start.column+a};if(a-=r.placeholder.length,a<0)return r.start;p=r.end.column}return{row:this.end.row,column:this.end.column+a}},s}();t.FoldLine=v});ace.define("ace/range_list",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("./range").Range,v=c.comparePoints,s=function(){function a(){this.ranges=[],this.$bias=1}return a.prototype.pointIndex=function(p,u,r){for(var i=this.ranges,l=r||0;l<i.length;l++){var d=i[l],f=v(p,d.end);if(!(f>0)){var o=v(p,d.start);return f===0?u&&o!==0?-l-2:l:o>0||o===0&&!u?l:-l-1}}return-l-1},a.prototype.add=function(p){var u=!p.isEmpty(),r=this.pointIndex(p.start,u);r<0&&(r=-r-1);var i=this.pointIndex(p.end,u,r);return i<0?i=-i-1:i++,this.ranges.splice(r,i-r,p)},a.prototype.addList=function(p){for(var u=[],r=p.length;r--;)u.push.apply(u,this.add(p[r]));return u},a.prototype.substractPoint=function(p){var u=this.pointIndex(p);if(u>=0)return this.ranges.splice(u,1)},a.prototype.merge=function(){var p=[],u=this.ranges;u=u.sort(function(f,o){return v(f.start,o.start)});for(var r=u[0],i,l=1;l<u.length;l++){i=r,r=u[l];var d=v(i.end,r.start);d<0||d==0&&!i.isEmpty()&&!r.isEmpty()||(v(i.end,r.end)<0&&(i.end.row=r.end.row,i.end.column=r.end.column),u.splice(l,1),p.push(r),r=i,l--)}return this.ranges=u,p},a.prototype.contains=function(p,u){return this.pointIndex({row:p,column:u})>=0},a.prototype.containsPoint=function(p){return this.pointIndex(p)>=0},a.prototype.rangeAtPoint=function(p){var u=this.pointIndex(p);if(u>=0)return this.ranges[u]},a.prototype.clipRows=function(p,u){var r=this.ranges;if(r[0].start.row>u||r[r.length-1].start.row<p)return[];var i=this.pointIndex({row:p,column:0});i<0&&(i=-i-1);var l=this.pointIndex({row:u,column:0},i);l<0&&(l=-l-1);for(var d=[],f=i;f<l;f++)d.push(r[f]);return d},a.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},a.prototype.attach=function(p){this.session&&this.detach(),this.session=p,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},a.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},a.prototype.$onChange=function(p){for(var u=p.start,r=p.end,i=u.row,l=r.row,d=this.ranges,f=0,o=d.length;f<o;f++){var h=d[f];if(h.end.row>=i)break}if(p.action=="insert")for(var _=l-i,m=-u.column+r.column;f<o;f++){var h=d[f];if(h.start.row>i)break;if(h.start.row==i&&h.start.column>=u.column&&(h.start.column==u.column&&this.$bias<=0||(h.start.column+=m,h.start.row+=_)),h.end.row==i&&h.end.column>=u.column){if(h.end.column==u.column&&this.$bias<0)continue;h.end.column==u.column&&m>0&&f<o-1&&h.end.column>h.start.column&&h.end.column==d[f+1].start.column&&(h.end.column-=m),h.end.column+=m,h.end.row+=_}}else for(var _=i-l,m=u.column-r.column;f<o;f++){var h=d[f];if(h.start.row>l)break;h.end.row<l&&(i<h.end.row||i==h.end.row&&u.column<h.end.column)?(h.end.row=i,h.end.column=u.column):h.end.row==l?h.end.column<=r.column?(_||h.end.column>u.column)&&(h.end.column=u.column,h.end.row=u.row):(h.end.column+=m,h.end.row+=_):h.end.row>l&&(h.end.row+=_),h.start.row<l&&(i<h.start.row||i==h.start.row&&u.column<h.start.column)?(h.start.row=i,h.start.column=u.column):h.start.row==l?h.start.column<=r.column?(_||h.start.column>u.column)&&(h.start.column=u.column,h.start.row=u.row):(h.start.column+=m,h.start.row+=_):h.start.row>l&&(h.start.row+=_)}if(_!=0&&f<o)for(;f<o;f++){var h=d[f];h.start.row+=_,h.end.row+=_}},a}();s.prototype.comparePoints=v,t.RangeList=s});ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var i=function(l,d){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},i(l,d)};return function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");i(l,d);function f(){this.constructor=l}l.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}(),v=e("../range_list").RangeList,s=function(i){c(l,i);function l(d,f){var o=i.call(this)||this;return o.foldLine=null,o.placeholder=f,o.range=d,o.start=d.start,o.end=d.end,o.sameRow=d.start.row==d.end.row,o.subFolds=o.ranges=[],o}return l.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},l.prototype.setFoldLine=function(d){this.foldLine=d,this.subFolds.forEach(function(f){f.setFoldLine(d)})},l.prototype.clone=function(){var d=this.range.clone(),f=new l(d,this.placeholder);return this.subFolds.forEach(function(o){f.subFolds.push(o.clone())}),f.collapseChildren=this.collapseChildren,f},l.prototype.addSubFold=function(d){if(!this.range.isEqual(d)){p(d,this.start);for(var m=d.start.row,y=d.start.column,f=0,o=-1;f<this.subFolds.length&&(o=this.subFolds[f].range.compare(m,y),o==1);f++);var h=this.subFolds[f],_=0;if(o==0){if(h.range.containsRange(d))return h.addSubFold(d);_=1}for(var m=d.range.end.row,y=d.range.end.column,C=f,o=-1;C<this.subFolds.length&&(o=this.subFolds[C].range.compare(m,y),o==1);C++);o==0&&C++;for(var E=this.subFolds.splice(f,C-f,d),D=o==0?E.length-1:E.length,g=_;g<D;g++)d.addSubFold(E[g]);return d.setFoldLine(this.foldLine),d}},l.prototype.restoreRange=function(d){return r(d,this.start)},l}(v);function a(i,l){i.row-=l.row,i.row==0&&(i.column-=l.column)}function p(i,l){a(i.start,l),a(i.end,l)}function u(i,l){i.row==0&&(i.column+=l.column),i.row+=l.row}function r(i,l){u(i.start,l),u(i.end,l)}t.Fold=s});ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("./fold_line").FoldLine,s=e("./fold").Fold,a=e("../token_iterator").TokenIterator,p=e("../mouse/mouse_event").MouseEvent;function u(){this.getFoldAt=function(r,i,l){var d=this.getFoldLine(r);if(!d)return null;for(var f=d.folds,o=0;o<f.length;o++){var h=f[o].range;if(h.contains(r,i)){if(l==1&&h.isEnd(r,i)&&!h.isEmpty())continue;if(l==-1&&h.isStart(r,i)&&!h.isEmpty())continue;return f[o]}}},this.getFoldsInRange=function(r){var i=r.start,l=r.end,d=this.$foldData,f=[];i.column+=1,l.column-=1;for(var o=0;o<d.length;o++){var h=d[o].range.compareRange(r);if(h!=2){if(h==-2)break;for(var _=d[o].folds,m=0;m<_.length;m++){var y=_[m];if(h=y.range.compareRange(r),h==-2)break;if(h==2)continue;if(h==42)break;f.push(y)}}}return i.column-=1,l.column+=1,f},this.getFoldsInRangeList=function(r){if(Array.isArray(r)){var i=[];r.forEach(function(l){i=i.concat(this.getFoldsInRange(l))},this)}else var i=this.getFoldsInRange(r);return i},this.getAllFolds=function(){for(var r=[],i=this.$foldData,l=0;l<i.length;l++)for(var d=0;d<i[l].folds.length;d++)r.push(i[l].folds[d]);return r},this.getFoldStringAt=function(r,i,l,d){if(d=d||this.getFoldLine(r),!d)return null;for(var f={end:{column:0}},o,h,_=0;_<d.folds.length;_++){h=d.folds[_];var m=h.range.compareEnd(r,i);if(m==-1){o=this.getLine(h.start.row).substring(f.end.column,h.start.column);break}else if(m===0)return null;f=h}return o||(o=this.getLine(h.start.row).substring(f.end.column)),l==-1?o.substring(0,i-f.end.column):l==1?o.substring(i-f.end.column):o},this.getFoldLine=function(r,i){var l=this.$foldData,d=0;for(i&&(d=l.indexOf(i)),d==-1&&(d=0),d;d<l.length;d++){var f=l[d];if(f.start.row<=r&&f.end.row>=r)return f;if(f.end.row>r)return null}return null},this.getNextFoldLine=function(r,i){var l=this.$foldData,d=0;for(i&&(d=l.indexOf(i)),d==-1&&(d=0),d;d<l.length;d++){var f=l[d];if(f.end.row>=r)return f}return null},this.getFoldedRowCount=function(r,i){for(var l=this.$foldData,d=i-r+1,f=0;f<l.length;f++){var o=l[f],h=o.end.row,_=o.start.row;if(h>=i){_<i&&(_>=r?d-=i-_:d=0);break}else h>=r&&(_>=r?d-=h-_:d-=h-r+1)}return d},this.$addFoldLine=function(r){return this.$foldData.push(r),this.$foldData.sort(function(i,l){return i.start.row-l.start.row}),r},this.addFold=function(r,i){var l=this.$foldData,d=!1,f;r instanceof s?f=r:(f=new s(i,r),f.collapseChildren=i.collapseChildren),this.$clipRangeToDocument(f.range);var o=f.start.row,h=f.start.column,_=f.end.row,m=f.end.column,y=this.getFoldAt(o,h,1),C=this.getFoldAt(_,m,-1);if(y&&C==y)return y.addSubFold(f);y&&!y.range.isStart(o,h)&&this.removeFold(y),C&&!C.range.isEnd(_,m)&&this.removeFold(C);var E=this.getFoldsInRange(f.range);E.length>0&&(this.removeFolds(E),f.collapseChildren||E.forEach(function(L){f.addSubFold(L)}));for(var D=0;D<l.length;D++){var g=l[D];if(_==g.start.row){g.addFold(f),d=!0;break}else if(o==g.end.row){if(g.addFold(f),d=!0,!f.sameRow){var b=l[D+1];if(b&&b.start.row==_){g.merge(b);break}}break}else if(_<=g.start.row)break}return d||(g=this.$addFoldLine(new v(this.$foldData,f))),this.$useWrapMode?this.$updateWrapData(g.start.row,g.start.row):this.$updateRowLengthCache(g.start.row,g.start.row),this.$modified=!0,this._signal("changeFold",{data:f,action:"add"}),f},this.addFolds=function(r){r.forEach(function(i){this.addFold(i)},this)},this.removeFold=function(r){var i=r.foldLine,l=i.start.row,d=i.end.row,f=this.$foldData,o=i.folds;if(o.length==1)f.splice(f.indexOf(i),1);else if(i.range.isEnd(r.end.row,r.end.column))o.pop(),i.end.row=o[o.length-1].end.row,i.end.column=o[o.length-1].end.column;else if(i.range.isStart(r.start.row,r.start.column))o.shift(),i.start.row=o[0].start.row,i.start.column=o[0].start.column;else if(r.sameRow)o.splice(o.indexOf(r),1);else{var h=i.split(r.start.row,r.start.column);o=h.folds,o.shift(),h.start.row=o[0].start.row,h.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(l,d):this.$updateRowLengthCache(l,d)),this.$modified=!0,this._signal("changeFold",{data:r,action:"remove"})},this.removeFolds=function(r){for(var i=[],l=0;l<r.length;l++)i.push(r[l]);i.forEach(function(d){this.removeFold(d)},this),this.$modified=!0},this.expandFold=function(r){this.removeFold(r),r.subFolds.forEach(function(i){r.restoreRange(i),this.addFold(i)},this),r.collapseChildren>0&&this.foldAll(r.start.row+1,r.end.row,r.collapseChildren-1),r.subFolds=[]},this.expandFolds=function(r){r.forEach(function(i){this.expandFold(i)},this)},this.unfold=function(r,i){var l,d;if(r==null)l=new c(0,0,this.getLength(),0),i==null&&(i=!0);else if(typeof r=="number")l=new c(r,0,r,this.getLine(r).length);else if("row"in r)l=c.fromPoints(r,r);else{if(Array.isArray(r))return d=[],r.forEach(function(o){d=d.concat(this.unfold(o))},this),d;l=r}d=this.getFoldsInRangeList(l);for(var f=d;d.length==1&&c.comparePoints(d[0].start,l.start)<0&&c.comparePoints(d[0].end,l.end)>0;)this.expandFolds(d),d=this.getFoldsInRangeList(l);if(i!=!1?this.removeFolds(d):this.expandFolds(d),f.length)return f},this.isRowFolded=function(r,i){return!!this.getFoldLine(r,i)},this.getRowFoldEnd=function(r,i){var l=this.getFoldLine(r,i);return l?l.end.row:r},this.getRowFoldStart=function(r,i){var l=this.getFoldLine(r,i);return l?l.start.row:r},this.getFoldDisplayLine=function(r,i,l,d,f){d==null&&(d=r.start.row),f==null&&(f=0),i==null&&(i=r.end.row),l==null&&(l=this.getLine(i).length);var o=this.doc,h="";return r.walk(function(_,m,y,C){if(!(m<d)){if(m==d){if(y<f)return;C=Math.max(f,C)}_!=null?h+=_:h+=o.getLine(m).substring(C,y)}},i,l),h},this.getDisplayLine=function(r,i,l,d){var f=this.getFoldLine(r);if(f)return this.getFoldDisplayLine(f,r,i,l,d);var o;return o=this.doc.getLine(r),o.substring(d||0,i||o.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(i){var l=i.folds.map(function(d){return d.clone()});return new v(r,l)}),r},this.toggleFold=function(r){var i=this.selection,l=i.getRange(),d,f;if(l.isEmpty()){var o=l.start;if(d=this.getFoldAt(o.row,o.column),d){this.expandFold(d);return}else(f=this.findMatchingBracket(o))?l.comparePoint(f)==1?l.end=f:(l.start=f,l.start.column++,l.end.column--):(f=this.findMatchingBracket({row:o.row,column:o.column+1}))?(l.comparePoint(f)==1?l.end=f:l.start=f,l.start.column++):l=this.getCommentFoldRange(o.row,o.column)||l}else{var h=this.getFoldsInRange(l);if(r&&h.length){this.expandFolds(h);return}else h.length==1&&(d=h[0])}if(d||(d=this.getFoldAt(l.start.row,l.start.column)),d&&d.range.toString()==l.toString()){this.expandFold(d);return}var _="...";if(!l.isMultiLine()){if(_=this.getTextRange(l),_.length<4)return;_=_.trim().substring(0,2)+".."}this.addFold(_,l)},this.getCommentFoldRange=function(r,i,l){var d=new a(this,r,i),f=d.getCurrentToken(),o=f&&f.type;if(f&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],o=="comment"&&(o+="|doc-start|\\.doc");var h=new RegExp(o),_=new c;if(l!=1){do f=d.stepBackward();while(f&&h.test(f.type)&&!/^comment.end/.test(f.type));f=d.stepForward()}if(_.start.row=d.getCurrentTokenRow(),_.start.column=d.getCurrentTokenColumn()+(/^comment.start/.test(f.type)?f.value.length:2),d=new a(this,r,i),l!=-1){var m=-1;do if(f=d.stepForward(),m==-1){var y=this.getState(d.$row);h.test(y)||(m=d.$row)}else if(d.$row>m)break;while(f&&h.test(f.type)&&!/^comment.start/.test(f.type));f=d.stepBackward()}else f=d.getCurrentToken();return _.end.row=d.getCurrentTokenRow(),_.end.column=d.getCurrentTokenColumn(),/^comment.end/.test(f.type)||(_.end.column+=f.value.length-2),_}},this.foldAll=function(r,i,l,d){l==null&&(l=1e5);var f=this.foldWidgets;if(f){i=i||this.getLength(),r=r||0;for(var o=r;o<i;o++)if(f[o]==null&&(f[o]=this.getFoldWidget(o)),f[o]=="start"&&!(d&&!d(o))){var h=this.getFoldWidgetRange(o);h&&h.isMultiLine()&&h.end.row<=i&&h.start.row>=r&&(o=h.end.row,h.collapseChildren=l,this.addFold("...",h))}}},this.foldToLevel=function(r){for(this.foldAll();r-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var r=this;this.foldAll(null,null,null,function(i){for(var l=r.getTokens(i),d=0;d<l.length;d++){var f=l[d];if(!(f.type=="text"&&/^\s+$/.test(f.value)))return!!/comment/.test(f.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(r){if(!this.$foldStyles[r])throw new Error("invalid fold style: "+r+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=r){this.$foldStyle=r,r=="manual"&&this.unfold();var i=this.$foldMode;this.$setFolding(null),this.$setFolding(i)}},this.$setFolding=function(r){if(this.$foldMode!=r){if(this.$foldMode=r,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!r||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=r.getFoldWidget.bind(r,this,this.$foldStyle),this.getFoldWidgetRange=r.getFoldWidgetRange.bind(r,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(r,i){var l=this.foldWidgets;if(!l||i&&l[r])return{};for(var d=r-1,f;d>=0;){var o=l[d];if(o==null&&(o=l[d]=this.getFoldWidget(d)),o=="start"){var h=this.getFoldWidgetRange(d);if(f||(f=h),h&&h.end.row>=r)break}d--}return{range:d!==-1&&h,firstRange:f}},this.onFoldWidgetClick=function(r,i){i instanceof p&&(i=i.domEvent);var l={children:i.shiftKey,all:i.ctrlKey||i.metaKey,siblings:i.altKey},d=this.$toggleFoldWidget(r,l);if(!d){var f=i.target||i.srcElement;f&&/ace_fold-widget/.test(f.className)&&(f.className+=" ace_invalid")}},this.$toggleFoldWidget=function(r,i){if(this.getFoldWidget){var l=this.getFoldWidget(r),d=this.getLine(r),f=l==="end"?-1:1,o=this.getFoldAt(r,f===-1?0:d.length,f);if(o)return i.children||i.all?this.removeFold(o):this.expandFold(o),o;var h=this.getFoldWidgetRange(r,!0);if(h&&!h.isMultiLine()&&(o=this.getFoldAt(h.start.row,h.start.column,1),o&&h.isEqual(o.range)))return this.removeFold(o),o;if(i.siblings){var _=this.getParentFoldRangeData(r);if(_.range)var m=_.range.start.row+1,y=_.range.end.row;this.foldAll(m,y,i.all?1e4:0)}else i.children?(y=h?h.end.row:this.getLength(),this.foldAll(r+1,y,i.all?1e4:0)):h&&(i.all&&(h.collapseChildren=1e4),this.addFold("...",h));return h}},this.toggleFoldWidget=function(r){var i=this.selection.getCursor().row;i=this.getRowFoldStart(i);var l=this.$toggleFoldWidget(i,{});if(!l){var d=this.getParentFoldRangeData(i,!0);if(l=d.range||d.firstRange,l){i=l.start.row;var f=this.getFoldAt(i,this.getLine(i).length,1);f?this.removeFold(f):this.addFold("...",l)}}},this.updateFoldWidgets=function(r){var i=r.start.row,l=r.end.row-i;if(l===0)this.foldWidgets[i]=null;else if(r.action=="remove")this.foldWidgets.splice(i,l+1,null);else{var d=Array(l+1);d.unshift(i,1),this.foldWidgets.splice.apply(this.foldWidgets,d)}},this.tokenizerUpdateFoldWidgets=function(r){var i=r.data;i.first!=i.last&&this.foldWidgets.length>i.first&&this.foldWidgets.splice(i.first,this.foldWidgets.length)}}t.Folding=u});ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t,n){"use strict";var c=e("../token_iterator").TokenIterator,v=e("../range").Range;function s(){this.findMatchingBracket=function(a,p){if(a.column==0)return null;var u=p||this.getLine(a.row).charAt(a.column-1);if(u=="")return null;var r=u.match(/([\(\[\{])|([\)\]\}])/);return r?r[1]?this.$findClosingBracket(r[1],a):this.$findOpeningBracket(r[2],a):null},this.getBracketRange=function(a){var p=this.getLine(a.row),u=!0,r,i=p.charAt(a.column-1),l=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(l||(i=p.charAt(a.column),a={row:a.row,column:a.column+1},l=i&&i.match(/([\(\[\{])|([\)\]\}])/),u=!1),!l)return null;if(l[1]){var d=this.$findClosingBracket(l[1],a);if(!d)return null;r=v.fromPoints(a,d),u||(r.end.column++,r.start.column--),r.cursor=r.end}else{var d=this.$findOpeningBracket(l[2],a);if(!d)return null;r=v.fromPoints(d,a),u||(r.start.column++,r.end.column--),r.cursor=r.start}return r},this.getMatchingBracketRanges=function(a,p){var u=this.getLine(a.row),r=/([\(\[\{])|([\)\]\}])/,i=!p&&u.charAt(a.column-1),l=i&&i.match(r);if(l||(i=(p===void 0||p)&&u.charAt(a.column),a={row:a.row,column:a.column+1},l=i&&i.match(r)),!l)return null;var d=new v(a.row,a.column-1,a.row,a.column),f=l[1]?this.$findClosingBracket(l[1],a):this.$findOpeningBracket(l[2],a);if(!f)return[d];var o=new v(f.row,f.column,f.row,f.column+1);return[d,o]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(a,p,u){var r=this.$brackets[a],i=1,l=new c(this,p.row,p.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){u||(u=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var f=p.column-l.getCurrentTokenColumn()-2,o=d.value;;){for(;f>=0;){var h=o.charAt(f);if(h==r){if(i-=1,i==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else h==a&&(i+=1);f-=1}do d=l.stepBackward();while(d&&!u.test(d.type));if(d==null)break;o=d.value,f=o.length-1}return null}},this.$findClosingBracket=function(a,p,u){var r=this.$brackets[a],i=1,l=new c(this,p.row,p.column),d=l.getCurrentToken();if(d||(d=l.stepForward()),!!d){u||(u=new RegExp("(\\.?"+d.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var f=p.column-l.getCurrentTokenColumn();;){for(var o=d.value,h=o.length;f<h;){var _=o.charAt(f);if(_==r){if(i-=1,i==0)return{row:l.getCurrentTokenRow(),column:f+l.getCurrentTokenColumn()}}else _==a&&(i+=1);f+=1}do d=l.stepForward();while(d&&!u.test(d.type));if(d==null)break;f=0}return null}},this.getMatchingTags=function(a){var p=new c(this,a.row,a.column),u=this.$findTagName(p);if(u){var r=p.stepBackward();return r.value==="<"?this.$findClosingTag(p,u):this.$findOpeningTag(p,u)}},this.$findTagName=function(a){var p=a.getCurrentToken(),u=!1,r=!1;if(p&&p.type.indexOf("tag-name")===-1)do r?p=a.stepBackward():p=a.stepForward(),p&&(p.value==="/>"?r=!0:p.type.indexOf("tag-name")!==-1&&(u=!0));while(p&&!u);return p},this.$findClosingTag=function(a,p){var u,r=p.value,i=p.value,l=0,d=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);p=a.stepForward();var f=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length),o=!1;do if(u=p,p=a.stepForward(),p){if(p.value===">"&&!o){var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);o=!0}if(p.type.indexOf("tag-name")!==-1){if(r=p.value,i===r){if(u.value==="<")l++;else if(u.value==="</"&&(l--,l<0)){a.stepBackward();var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2);p=a.stepForward();var m=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),p&&p.value===">")var y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);else return}}}else if(i===r&&p.value==="/>"&&(l--,l<0))var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+2),m=_,y=m,h=new v(f.end.row,f.end.column,f.end.row,f.end.column+1)}while(p&&l>=0);if(d&&h&&_&&y&&f&&m)return{openTag:new v(d.start.row,d.start.column,h.end.row,h.end.column),closeTag:new v(_.start.row,_.start.column,y.end.row,y.end.column),openTagName:f,closeTagName:m}},this.$findOpeningTag=function(a,p){var u=a.getCurrentToken(),r=p.value,i=0,l=a.getCurrentTokenRow(),d=a.getCurrentTokenColumn(),f=d+2,o=new v(l,d,l,f);a.stepForward();var h=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+p.value.length);if(p=a.stepForward(),!(!p||p.value!==">")){var _=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);a.stepBackward(),a.stepBackward();do if(p=u,l=a.getCurrentTokenRow(),d=a.getCurrentTokenColumn(),f=d+p.value.length,u=a.stepBackward(),p){if(p.type.indexOf("tag-name")!==-1){if(r===p.value)if(u.value==="<"){if(i++,i>0){var m=new v(l,d,l,f),y=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1);do p=a.stepForward();while(p&&p.value!==">");var C=new v(a.getCurrentTokenRow(),a.getCurrentTokenColumn(),a.getCurrentTokenRow(),a.getCurrentTokenColumn()+1)}}else u.value==="</"&&i--}else if(p.value==="/>"){for(var E=0,D=u;D;){if(D.type.indexOf("tag-name")!==-1&&D.value===r){i--;break}else if(D.value==="<")break;D=a.stepBackward(),E++}for(var g=0;g<E;g++)a.stepForward()}}while(u&&i<=0);if(y&&C&&o&&_&&m&&h)return{openTag:new v(y.start.row,y.start.column,C.end.row,C.end.column),closeTag:new v(o.start.row,o.start.column,_.end.row,_.end.column),openTagName:m,closeTagName:h}}}}t.BracketMatch=s});ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/lang"),s=e("./bidihandler").BidiHandler,a=e("./config"),p=e("./lib/event_emitter").EventEmitter,u=e("./selection").Selection,r=e("./mode/text").Mode,i=e("./range").Range,l=e("./document").Document,d=e("./background_tokenizer").BackgroundTokenizer,f=e("./search_highlight").SearchHighlight,o=e("./undomanager").UndoManager,h=function(){function S(T,M){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++S.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new d(new r().getTokenizer(),this);var w=this;this.bgTokenizer.on("update",function(F){w._signal("tokenizerUpdate",F)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof T!="object"||!T.getLine)&&(T=new l(T)),this.setDocument(T),this.selection=new u(this),this.$bidiHandler=new s(this),a.resetOptions(this),this.setMode(M),a._signal("session",this),this.destroyed=!1}return S.prototype.setDocument=function(T){this.doc&&this.doc.off("change",this.$onChange),this.doc=T,T.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},S.prototype.getDocument=function(){return this.doc},S.prototype.$resetRowCache=function(T){if(!T){this.$docRowCache=[],this.$screenRowCache=[];return}var M=this.$docRowCache.length,w=this.$getRowCacheIndex(this.$docRowCache,T)+1;M>w&&(this.$docRowCache.splice(w,M),this.$screenRowCache.splice(w,M))},S.prototype.$getRowCacheIndex=function(T,M){for(var w=0,F=T.length-1;w<=F;){var x=w+F>>1,R=T[x];if(M>R)w=x+1;else if(M<R)F=x-1;else return x}return w-1},S.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},S.prototype.onChangeFold=function(T){var M=T.data;this.$resetRowCache(M.start.row)},S.prototype.onChange=function(T){this.$modified=!0,this.$bidiHandler.onChange(T),this.$resetRowCache(T.start.row);var M=this.$updateInternalDataOnChange(T);!this.$fromUndo&&this.$undoManager&&(M&&M.length&&(this.$undoManager.add({action:"removeFolds",folds:M},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(T,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(T),this._signal("change",T)},S.prototype.setValue=function(T){this.doc.setValue(T),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},S.fromJSON=function(T){typeof T=="string"&&(T=JSON.parse(T));var M=new o;M.$undoStack=T.history.undo,M.$redoStack=T.history.redo,M.mark=T.history.mark,M.$rev=T.history.rev;var w=new S(T.value);return T.folds.forEach(function(F){w.addFold("...",i.fromPoints(F.start,F.end))}),w.setAnnotations(T.annotations),w.setBreakpoints(T.breakpoints),w.setMode(T.mode),w.setScrollLeft(T.scrollLeft),w.setScrollTop(T.scrollTop),w.setUndoManager(M),w.selection.fromJSON(T.selection),w},S.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(T){return T.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},S.prototype.toString=function(){return this.doc.getValue()},S.prototype.getSelection=function(){return this.selection},S.prototype.getState=function(T){return this.bgTokenizer.getState(T)},S.prototype.getTokens=function(T){return this.bgTokenizer.getTokens(T)},S.prototype.getTokenAt=function(T,M){var w=this.bgTokenizer.getTokens(T),F,x=0;if(M==null){var R=w.length-1;x=this.getLine(T).length}else for(var R=0;R<w.length&&(x+=w[R].value.length,!(x>=M));R++);return F=w[R],F?(F.index=R,F.start=x-F.value.length,F):null},S.prototype.setUndoManager=function(T){if(this.$undoManager=T,this.$informUndoManager&&this.$informUndoManager.cancel(),T){var M=this;T.addSession(this),this.$syncInformUndoManager=function(){M.$informUndoManager.cancel(),M.mergeUndoDeltas=!1},this.$informUndoManager=v.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},S.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},S.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},S.prototype.getTabString=function(){return this.getUseSoftTabs()?v.stringRepeat(" ",this.getTabSize()):"	"},S.prototype.setUseSoftTabs=function(T){this.setOption("useSoftTabs",T)},S.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},S.prototype.setTabSize=function(T){this.setOption("tabSize",T)},S.prototype.getTabSize=function(){return this.$tabSize},S.prototype.isTabStop=function(T){return this.$useSoftTabs&&T.column%this.$tabSize===0},S.prototype.setNavigateWithinSoftTabs=function(T){this.setOption("navigateWithinSoftTabs",T)},S.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},S.prototype.setOverwrite=function(T){this.setOption("overwrite",T)},S.prototype.getOverwrite=function(){return this.$overwrite},S.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},S.prototype.addGutterDecoration=function(T,M){this.$decorations[T]||(this.$decorations[T]=""),this.$decorations[T]+=" "+M,this._signal("changeBreakpoint",{})},S.prototype.removeGutterDecoration=function(T,M){this.$decorations[T]=(this.$decorations[T]||"").replace(" "+M,""),this._signal("changeBreakpoint",{})},S.prototype.getBreakpoints=function(){return this.$breakpoints},S.prototype.setBreakpoints=function(T){this.$breakpoints=[];for(var M=0;M<T.length;M++)this.$breakpoints[T[M]]="ace_breakpoint";this._signal("changeBreakpoint",{})},S.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},S.prototype.setBreakpoint=function(T,M){M===void 0&&(M="ace_breakpoint"),M?this.$breakpoints[T]=M:delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},S.prototype.clearBreakpoint=function(T){delete this.$breakpoints[T],this._signal("changeBreakpoint",{})},S.prototype.addMarker=function(T,M,w,F){var x=this.$markerId++,R={range:T,type:w||"line",renderer:typeof w=="function"?w:null,clazz:M,inFront:!!F,id:x};return F?(this.$frontMarkers[x]=R,this._signal("changeFrontMarker")):(this.$backMarkers[x]=R,this._signal("changeBackMarker")),x},S.prototype.addDynamicMarker=function(T,M){if(T.update){var w=this.$markerId++;return T.id=w,T.inFront=!!M,M?(this.$frontMarkers[w]=T,this._signal("changeFrontMarker")):(this.$backMarkers[w]=T,this._signal("changeBackMarker")),T}},S.prototype.removeMarker=function(T){var M=this.$frontMarkers[T]||this.$backMarkers[T];if(M){var w=M.inFront?this.$frontMarkers:this.$backMarkers;delete w[T],this._signal(M.inFront?"changeFrontMarker":"changeBackMarker")}},S.prototype.getMarkers=function(T){return T?this.$frontMarkers:this.$backMarkers},S.prototype.highlight=function(T){if(!this.$searchHighlight){var M=new f(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(M)}this.$searchHighlight.setRegexp(T)},S.prototype.highlightLines=function(T,M,w,F){typeof M!="number"&&(w=M,M=T),w||(w="ace_step");var x=new i(T,0,M,1/0);return x.id=this.addMarker(x,w,"fullLine",F),x},S.prototype.setAnnotations=function(T){this.$annotations=T,this._signal("changeAnnotation",{})},S.prototype.getAnnotations=function(){return this.$annotations||[]},S.prototype.clearAnnotations=function(){this.setAnnotations([])},S.prototype.$detectNewLine=function(T){var M=T.match(/^.*?(\r?\n)/m);M?this.$autoNewLine=M[1]:this.$autoNewLine=`
`},S.prototype.getWordRange=function(T,M){var w=this.getLine(T),F=!1;if(M>0&&(F=!!w.charAt(M-1).match(this.tokenRe)),F||(F=!!w.charAt(M).match(this.tokenRe)),F)var x=this.tokenRe;else if(/^\s+$/.test(w.slice(M-1,M+1)))var x=/\s/;else var x=this.nonTokenRe;var R=M;if(R>0){do R--;while(R>=0&&w.charAt(R).match(x));R++}for(var A=M;A<w.length&&w.charAt(A).match(x);)A++;return new i(T,R,T,A)},S.prototype.getAWordRange=function(T,M){for(var w=this.getWordRange(T,M),F=this.getLine(w.end.row);F.charAt(w.end.column).match(/[ \t]/);)w.end.column+=1;return w},S.prototype.setNewLineMode=function(T){this.doc.setNewLineMode(T)},S.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},S.prototype.setUseWorker=function(T){this.setOption("useWorker",T)},S.prototype.getUseWorker=function(){return this.$useWorker},S.prototype.onReloadTokenizer=function(T){var M=T.data;this.bgTokenizer.start(M.first),this._signal("tokenizerUpdate",T)},S.prototype.setMode=function(T,M){if(T&&typeof T=="object"){if(T.getTokenizer)return this.$onChangeMode(T);var w=T,F=w.path}else F=T||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new r),this.$modes[F]&&!w){this.$onChangeMode(this.$modes[F]),M&&M();return}this.$modeId=F,a.loadModule(["mode",F],function(x){if(this.$modeId!==F)return M&&M();this.$modes[F]&&!w?this.$onChangeMode(this.$modes[F]):x&&x.Mode&&(x=new x.Mode(w),w||(this.$modes[F]=x,x.$id=F),this.$onChangeMode(x)),M&&M()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},S.prototype.$onChangeMode=function(T,M){if(M||(this.$modeId=T.$id),this.$mode!==T){var w=this.$mode;this.$mode=T,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=T.getTokenizer();if(F.on!==void 0){var x=this.onReloadTokenizer.bind(this);F.on("update",x)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=T.tokenRe,this.nonTokenRe=T.nonTokenRe,M||(T.attachToSession&&T.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(T.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:w,mode:T}))}},S.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},S.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(T){a.warn("Could not load worker",T),this.$worker=null}},S.prototype.getMode=function(){return this.$mode},S.prototype.setScrollTop=function(T){this.$scrollTop===T||isNaN(T)||(this.$scrollTop=T,this._signal("changeScrollTop",T))},S.prototype.getScrollTop=function(){return this.$scrollTop},S.prototype.setScrollLeft=function(T){this.$scrollLeft===T||isNaN(T)||(this.$scrollLeft=T,this._signal("changeScrollLeft",T))},S.prototype.getScrollLeft=function(){return this.$scrollLeft},S.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},S.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var T=0;return this.lineWidgets.forEach(function(M){M&&M.screenWidth>T&&(T=M.screenWidth)}),this.lineWidgetWidth=T},S.prototype.$computeWidth=function(T){if(this.$modified||T){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var M=this.doc.getAllLines(),w=this.$rowLengthCache,F=0,x=0,R=this.$foldData[x],A=R?R.start.row:1/0,I=M.length,$=0;$<I;$++){if($>A){if($=R.end.row+1,$>=I)break;R=this.$foldData[x++],A=R?R.start.row:1/0}w[$]==null&&(w[$]=this.$getStringScreenWidth(M[$])[0]),w[$]>F&&(F=w[$])}this.screenWidth=F}},S.prototype.getLine=function(T){return this.doc.getLine(T)},S.prototype.getLines=function(T,M){return this.doc.getLines(T,M)},S.prototype.getLength=function(){return this.doc.getLength()},S.prototype.getTextRange=function(T){return this.doc.getTextRange(T||this.selection.getRange())},S.prototype.insert=function(T,M){return this.doc.insert(T,M)},S.prototype.remove=function(T){return this.doc.remove(T)},S.prototype.removeFullLines=function(T,M){return this.doc.removeFullLines(T,M)},S.prototype.undoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=T.length-1;w!=-1;w--){var F=T[w];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!M&&this.$undoSelect&&(T.selectionBefore?this.selection.fromJSON(T.selectionBefore):this.selection.setRange(this.$getUndoSelection(T,!0))),this.$fromUndo=!1}},S.prototype.redoChanges=function(T,M){if(T.length){this.$fromUndo=!0;for(var w=0;w<T.length;w++){var F=T[w];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!M&&this.$undoSelect&&(T.selectionAfter?this.selection.fromJSON(T.selectionAfter):this.selection.setRange(this.$getUndoSelection(T,!1))),this.$fromUndo=!1}},S.prototype.setUndoSelect=function(T){this.$undoSelect=T},S.prototype.$getUndoSelection=function(T,M){function w(I){return M?I.action!=="insert":I.action==="insert"}for(var F,x,R=0;R<T.length;R++){var A=T[R];if(A.start){if(!F){w(A)?F=i.fromPoints(A.start,A.end):F=i.fromPoints(A.start,A.start);continue}w(A)?(x=A.start,F.compare(x.row,x.column)==-1&&F.setStart(x),x=A.end,F.compare(x.row,x.column)==1&&F.setEnd(x)):(x=A.start,F.compare(x.row,x.column)==-1&&(F=i.fromPoints(A.start,A.start)))}}return F},S.prototype.replace=function(T,M){return this.doc.replace(T,M)},S.prototype.moveText=function(T,M,w){var F=this.getTextRange(T),x=this.getFoldsInRange(T),R=i.fromPoints(M,M);if(!w){this.remove(T);var A=T.start.row-T.end.row,I=A?-T.end.column:T.start.column-T.end.column;I&&(R.start.row==T.end.row&&R.start.column>T.end.column&&(R.start.column+=I),R.end.row==T.end.row&&R.end.column>T.end.column&&(R.end.column+=I)),A&&R.start.row>=T.end.row&&(R.start.row+=A,R.end.row+=A)}if(R.end=this.insert(R.start,F),x.length){var $=T.start,k=R.start,A=k.row-$.row,I=k.column-$.column;this.addFolds(x.map(function(q){return q=q.clone(),q.start.row==$.row&&(q.start.column+=I),q.end.row==$.row&&(q.end.column+=I),q.start.row+=A,q.end.row+=A,q}))}return R},S.prototype.indentRows=function(T,M,w){w=w.replace(/\t/g,this.getTabString());for(var F=T;F<=M;F++)this.doc.insertInLine({row:F,column:0},w)},S.prototype.outdentRows=function(T){for(var M=T.collapseRows(),w=new i(0,0,0,0),F=this.getTabSize(),x=M.start.row;x<=M.end.row;++x){var R=this.getLine(x);w.start.row=x,w.end.row=x;for(var A=0;A<F&&R.charAt(A)==" ";++A);A<F&&R.charAt(A)=="	"?(w.start.column=A,w.end.column=A+1):(w.start.column=0,w.end.column=A),this.remove(w)}},S.prototype.$moveLines=function(T,M,w){if(T=this.getRowFoldStart(T),M=this.getRowFoldEnd(M),w<0){var F=this.getRowFoldStart(T+w);if(F<0)return 0;var x=F-T}else if(w>0){var F=this.getRowFoldEnd(M+w);if(F>this.doc.getLength()-1)return 0;var x=F-M}else{T=this.$clipRowToDocument(T),M=this.$clipRowToDocument(M);var x=M-T+1}var R=new i(T,0,M,Number.MAX_VALUE),A=this.getFoldsInRange(R).map(function($){return $=$.clone(),$.start.row+=x,$.end.row+=x,$}),I=w==0?this.doc.getLines(T,M):this.doc.removeFullLines(T,M);return this.doc.insertFullLines(T+x,I),A.length&&this.addFolds(A),x},S.prototype.moveLinesUp=function(T,M){return this.$moveLines(T,M,-1)},S.prototype.moveLinesDown=function(T,M){return this.$moveLines(T,M,1)},S.prototype.duplicateLines=function(T,M){return this.$moveLines(T,M,0)},S.prototype.$clipRowToDocument=function(T){return Math.max(0,Math.min(T,this.doc.getLength()-1))},S.prototype.$clipColumnToRow=function(T,M){return M<0?0:Math.min(this.doc.getLine(T).length,M)},S.prototype.$clipPositionToDocument=function(T,M){if(M=Math.max(0,M),T<0)T=0,M=0;else{var w=this.doc.getLength();T>=w?(T=w-1,M=this.doc.getLine(w-1).length):M=Math.min(this.doc.getLine(T).length,M)}return{row:T,column:M}},S.prototype.$clipRangeToDocument=function(T){T.start.row<0?(T.start.row=0,T.start.column=0):T.start.column=this.$clipColumnToRow(T.start.row,T.start.column);var M=this.doc.getLength()-1;return T.end.row>M?(T.end.row=M,T.end.column=this.doc.getLine(M).length):T.end.column=this.$clipColumnToRow(T.end.row,T.end.column),T},S.prototype.setUseWrapMode=function(T){if(T!=this.$useWrapMode){if(this.$useWrapMode=T,this.$modified=!0,this.$resetRowCache(0),T){var M=this.getLength();this.$wrapData=Array(M),this.$updateWrapData(0,M-1)}this._signal("changeWrapMode")}},S.prototype.getUseWrapMode=function(){return this.$useWrapMode},S.prototype.setWrapLimitRange=function(T,M){(this.$wrapLimitRange.min!==T||this.$wrapLimitRange.max!==M)&&(this.$wrapLimitRange={min:T,max:M},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},S.prototype.adjustWrapLimit=function(T,M){var w=this.$wrapLimitRange;w.max<0&&(w={min:M,max:M});var F=this.$constrainWrapLimit(T,w.min,w.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},S.prototype.$constrainWrapLimit=function(T,M,w){return M&&(T=Math.max(M,T)),w&&(T=Math.min(w,T)),T},S.prototype.getWrapLimit=function(){return this.$wrapLimit},S.prototype.setWrapLimit=function(T){this.setWrapLimitRange(T,T)},S.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},S.prototype.$updateInternalDataOnChange=function(T){var M=this.$useWrapMode,w=T.action,F=T.start,x=T.end,R=F.row,A=x.row,I=A-R,$=null;if(this.$updating=!0,I!=0)if(w==="remove"){this[M?"$wrapData":"$rowLengthCache"].splice(R,I);var k=this.$foldData;$=this.getFoldsInRange(T),this.removeFolds($);var H=this.getFoldLine(x.row),U=0;if(H){H.addRemoveChars(x.row,x.column,F.column-x.column),H.shiftRow(-I);var q=this.getFoldLine(R);q&&q!==H&&(q.merge(H),H=q),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=x.row&&H.shiftRow(-I)}A=R}else{var N=Array(I);N.unshift(R,0);var K=M?this.$wrapData:this.$rowLengthCache;K.splice.apply(K,N);var k=this.$foldData,H=this.getFoldLine(R),U=0;if(H){var O=H.range.compareInside(F.row,F.column);O==0?(H=H.split(F.row,F.column),H&&(H.shiftRow(I),H.addRemoveChars(A,0,x.column-F.column))):O==-1&&(H.addRemoveChars(R,0,x.column-F.column),H.shiftRow(I)),U=k.indexOf(H)+1}for(U;U<k.length;U++){var H=k[U];H.start.row>=R&&H.shiftRow(I)}}else{I=Math.abs(T.start.column-T.end.column),w==="remove"&&($=this.getFoldsInRange(T),this.removeFolds($),I=-I);var H=this.getFoldLine(R);H&&H.addRemoveChars(R,F.column,I)}return M&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,M?this.$updateWrapData(R,A):this.$updateRowLengthCache(R,A),$},S.prototype.$updateRowLengthCache=function(T,M){this.$rowLengthCache[T]=null,this.$rowLengthCache[M]=null},S.prototype.$updateWrapData=function(T,M){var w=this.doc.getAllLines(),F=this.getTabSize(),x=this.$wrapData,R=this.$wrapLimit,A,I,$=T;for(M=Math.min(M,w.length-1);$<=M;)I=this.getFoldLine($,I),I?(A=[],I.walk(function(k,H,U,q){var N;if(k!=null){N=this.$getDisplayTokens(k,A.length),N[0]=y;for(var K=1;K<N.length;K++)N[K]=C}else N=this.$getDisplayTokens(w[H].substring(q,U),A.length);A=A.concat(N)}.bind(this),I.end.row,w[I.end.row].length+1),x[I.start.row]=this.$computeWrapSplits(A,R,F),$=I.end.row+1):(A=this.$getDisplayTokens(w[$]),x[$]=this.$computeWrapSplits(A,R,F),$++)},S.prototype.$computeWrapSplits=function(T,M,w){if(T.length==0)return[];var F=[],x=T.length,R=0,A=0,I=this.$wrapAsCode,$=this.$indentedSoftWrap,k=M<=Math.max(2*w,8)||$===!1?0:Math.floor(M/2);function H(){var O=0;if(k===0)return O;if($)for(var B=0;B<T.length;B++){var W=T[B];if(W==D)O+=1;else if(W==g)O+=w;else{if(W==b)continue;break}}return I&&$!==!1&&(O+=w),Math.min(O,k)}function U(O){for(var B=O-R,W=R;W<O;W++){var P=T[W];(P===12||P===2)&&(B-=1)}F.length||(q=H(),F.indent=q),A+=B,F.push(A),R=O}for(var q=0;x-R>M-q;){var N=R+M-q;if(T[N-1]>=D&&T[N]>=D){U(N);continue}if(T[N]==y||T[N]==C){for(N;N!=R-1&&T[N]!=y;N--);if(N>R){U(N);continue}for(N=R+M,N;N<T.length&&T[N]==C;N++);if(N==T.length)break;U(N);continue}for(var K=Math.max(N-(M-(M>>2)),R-1);N>K&&T[N]<y;)N--;if(I){for(;N>K&&T[N]<y;)N--;for(;N>K&&T[N]==E;)N--}else for(;N>K&&T[N]<D;)N--;if(N>K){U(++N);continue}N=R+M,T[N]==m&&N--,U(N-q)}return F},S.prototype.$getDisplayTokens=function(T,M){var w=[],F;M=M||0;for(var x=0;x<T.length;x++){var R=T.charCodeAt(x);if(R==9){F=this.getScreenTabSize(w.length+M),w.push(g);for(var A=1;A<F;A++)w.push(b)}else R==32?w.push(D):R>39&&R<48||R>57&&R<64?w.push(E):R>=4352&&L(R)?w.push(_,m):w.push(_)}return w},S.prototype.$getStringScreenWidth=function(T,M,w){if(M==0)return[0,0];M==null&&(M=1/0),w=w||0;var F,x;for(x=0;x<T.length&&(F=T.charCodeAt(x),F==9?w+=this.getScreenTabSize(w):F>=4352&&L(F)?w+=2:w+=1,!(w>M));x++);return[w,x]},S.prototype.getRowLength=function(T){var M=1;return this.lineWidgets&&(M+=this.lineWidgets[T]&&this.lineWidgets[T].rowCount||0),!this.$useWrapMode||!this.$wrapData[T]?M:this.$wrapData[T].length+M},S.prototype.getRowLineCount=function(T){return!this.$useWrapMode||!this.$wrapData[T]?1:this.$wrapData[T].length+1},S.prototype.getRowWrapIndent=function(T){if(this.$useWrapMode){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE),w=this.$wrapData[M.row];return w.length&&w[0]<M.column?w.indent:0}else return 0},S.prototype.getScreenLastRowColumn=function(T){var M=this.screenToDocumentPosition(T,Number.MAX_VALUE);return this.documentToScreenColumn(M.row,M.column)},S.prototype.getDocumentLastRowColumn=function(T,M){var w=this.documentToScreenRow(T,M);return this.getScreenLastRowColumn(w)},S.prototype.getDocumentLastRowColumnPosition=function(T,M){var w=this.documentToScreenRow(T,M);return this.screenToDocumentPosition(w,Number.MAX_VALUE/10)},S.prototype.getRowSplitData=function(T){if(this.$useWrapMode)return this.$wrapData[T]},S.prototype.getScreenTabSize=function(T){return this.$tabSize-(T%this.$tabSize|0)},S.prototype.screenToDocumentRow=function(T,M){return this.screenToDocumentPosition(T,M).row},S.prototype.screenToDocumentColumn=function(T,M){return this.screenToDocumentPosition(T,M).column},S.prototype.screenToDocumentPosition=function(T,M,w){if(T<0)return{row:0,column:0};var F,x=0,R=0,A,I=0,$=0,k=this.$screenRowCache,H=this.$getRowCacheIndex(k,T),U=k.length;if(U&&H>=0)var I=k[H],x=this.$docRowCache[H],q=T>k[U-1];else var q=!U;for(var N=this.getLength()-1,K=this.getNextFoldLine(x),O=K?K.start.row:1/0;I<=T&&($=this.getRowLength(x),!(I+$>T||x>=N));)I+=$,x++,x>O&&(x=K.end.row+1,K=this.getNextFoldLine(x,K),O=K?K.start.row:1/0),q&&(this.$docRowCache.push(x),this.$screenRowCache.push(I));if(K&&K.start.row<=x)F=this.getFoldDisplayLine(K),x=K.start.row;else{if(I+$<=T||x>N)return{row:N,column:this.getLine(N).length};F=this.getLine(x),K=null}var B=0,W=Math.floor(T-I);if(this.$useWrapMode){var P=this.$wrapData[x];P&&(A=P[W],W>0&&P.length&&(B=P.indent,R=P[W-1]||P[P.length-1],F=F.substring(R)))}return w!==void 0&&this.$bidiHandler.isBidiRow(I+W,x,W)&&(M=this.$bidiHandler.offsetToCol(w)),R+=this.$getStringScreenWidth(F,M-B)[1],this.$useWrapMode&&R>=A&&(R=A-1),K?K.idxToPosition(R):{row:x,column:R}},S.prototype.documentToScreenPosition=function(T,M){if(typeof M>"u")var w=this.$clipPositionToDocument(T.row,T.column);else w=this.$clipPositionToDocument(T,M);T=w.row,M=w.column;var F=0,x=null,R=null;R=this.getFoldAt(T,M,1),R&&(T=R.start.row,M=R.start.column);var A,I=0,$=this.$docRowCache,k=this.$getRowCacheIndex($,T),H=$.length;if(H&&k>=0)var I=$[k],F=this.$screenRowCache[k],U=T>$[H-1];else var U=!H;for(var q=this.getNextFoldLine(I),N=q?q.start.row:1/0;I<T;){if(I>=N){if(A=q.end.row+1,A>T)break;q=this.getNextFoldLine(A,q),N=q?q.start.row:1/0}else A=I+1;F+=this.getRowLength(I),I=A,U&&(this.$docRowCache.push(I),this.$screenRowCache.push(F))}var K="";q&&I>=N?(K=this.getFoldDisplayLine(q,T,M),x=q.start.row):(K=this.getLine(T).substring(0,M),x=T);var O=0;if(this.$useWrapMode){var B=this.$wrapData[x];if(B){for(var W=0;K.length>=B[W];)F++,W++;K=K.substring(B[W-1]||0,K.length),O=W>0?B.indent:0}}return this.lineWidgets&&this.lineWidgets[I]&&this.lineWidgets[I].rowsAbove&&(F+=this.lineWidgets[I].rowsAbove),{row:F,column:O+this.$getStringScreenWidth(K)[0]}},S.prototype.documentToScreenColumn=function(T,M){return this.documentToScreenPosition(T,M).column},S.prototype.documentToScreenRow=function(T,M){return this.documentToScreenPosition(T,M).row},S.prototype.getScreenLength=function(){var T=0,M=null;if(this.$useWrapMode)for(var x=this.$wrapData.length,R=0,F=0,M=this.$foldData[F++],A=M?M.start.row:1/0;R<x;){var I=this.$wrapData[R];T+=I?I.length+1:1,R++,R>A&&(R=M.end.row+1,M=this.$foldData[F++],A=M?M.start.row:1/0)}else{T=this.getLength();for(var w=this.$foldData,F=0;F<w.length;F++)M=w[F],T-=M.end.row-M.start.row}return this.lineWidgets&&(T+=this.$getWidgetScreenLength()),T},S.prototype.$setFontMetrics=function(T){this.$enableVarChar&&(this.$getStringScreenWidth=function(M,w,F){if(w===0)return[0,0];w||(w=1/0),F=F||0;var x,R;for(R=0;R<M.length&&(x=M.charAt(R),x==="	"?F+=this.getScreenTabSize(F):F+=T.getCharacterWidth(x),!(F>w));R++);return[F,R]})},S.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},S}();h.$uid=0,h.prototype.$modes=a.$modes,h.prototype.getValue=h.prototype.toString,h.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},h.prototype.$overwrite=!1,h.prototype.$mode=null,h.prototype.$modeId=null,h.prototype.$scrollTop=0,h.prototype.$scrollLeft=0,h.prototype.$wrapLimit=80,h.prototype.$useWrapMode=!1,h.prototype.$wrapLimitRange={min:null,max:null},h.prototype.lineWidgets=null,h.prototype.isFullWidth=L,c.implement(h.prototype,p);var _=1,m=2,y=3,C=4,E=9,D=10,g=11,b=12;function L(S){return S<4352?!1:S>=4352&&S<=4447||S>=4515&&S<=4519||S>=4602&&S<=4607||S>=9001&&S<=9002||S>=11904&&S<=11929||S>=11931&&S<=12019||S>=12032&&S<=12245||S>=12272&&S<=12283||S>=12288&&S<=12350||S>=12353&&S<=12438||S>=12441&&S<=12543||S>=12549&&S<=12589||S>=12593&&S<=12686||S>=12688&&S<=12730||S>=12736&&S<=12771||S>=12784&&S<=12830||S>=12832&&S<=12871||S>=12880&&S<=13054||S>=13056&&S<=19903||S>=19968&&S<=42124||S>=42128&&S<=42182||S>=43360&&S<=43388||S>=44032&&S<=55203||S>=55216&&S<=55238||S>=55243&&S<=55291||S>=63744&&S<=64255||S>=65040&&S<=65049||S>=65072&&S<=65106||S>=65108&&S<=65126||S>=65128&&S<=65131||S>=65281&&S<=65376||S>=65504&&S<=65510}e("./edit_session/folding").Folding.call(h.prototype),e("./edit_session/bracket_match").BracketMatch.call(h.prototype),a.defineOptions(h.prototype,"session",{wrap:{set:function(S){if(!S||S=="off"?S=!1:S=="free"?S=!0:S=="printMargin"?S=-1:typeof S=="string"&&(S=parseInt(S,10)||!1),this.$wrap!=S)if(this.$wrap=S,!S)this.setUseWrapMode(!1);else{var T=typeof S=="number"?S:null;this.setWrapLimitRange(T,T),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(S){S=S=="auto"?this.$mode.type!="text":S!="text",S!=this.$wrapAsCode&&(this.$wrapAsCode=S,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(S){this.$useWorker=S,this.$stopWorker(),S&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(S){S=parseInt(S),S>0&&this.$tabSize!==S&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=S,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(S){this.setFoldStyle(S)},handlesSet:!0},overwrite:{set:function(S){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(S){this.doc.setNewLineMode(S)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(S){this.setMode(S)},get:function(){return this.$modeId},handlesSet:!0}}),t.EditSession=h});ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t,n){"use strict";var c=e("./lib/lang"),v=e("./lib/oop"),s=e("./range").Range,a=function(){function u(){this.$options={}}return u.prototype.set=function(r){return v.mixin(this.$options,r),this},u.prototype.getOptions=function(){return c.copyObject(this.$options)},u.prototype.setOptions=function(r){this.$options=r},u.prototype.find=function(r){var i=this.$options,l=this.$matchIterator(r,i);if(!l)return!1;var d=null;return l.forEach(function(f,o,h,_){return d=new s(f,o,h,_),o==_&&i.start&&i.start.start&&i.skipCurrent!=!1&&d.isEqual(i.start)?(d=null,!1):!0}),d},u.prototype.findAll=function(r){var i=this.$options;if(!i.needle)return[];this.$assembleRegExp(i);var l=i.range,d=l?r.getLines(l.start.row,l.end.row):r.doc.getAllLines(),f=[],o=i.re;if(i.$isMultiLine){var h=o.length,_=d.length-h,m;e:for(var y=o.offset||0;y<=_;y++){for(var C=0;C<h;C++)if(d[y+C].search(o[C])==-1)continue e;var E=d[y],D=d[y+h-1],g=E.length-E.match(o[0])[0].length,b=D.match(o[h-1])[0].length;m&&m.end.row===y&&m.end.column>g||(f.push(m=new s(y,g,y+h-1,b)),h>2&&(y=y+h-2))}}else for(var L=0;L<d.length;L++)for(var S=c.getMatchOffsets(d[L],o),C=0;C<S.length;C++){var T=S[C];f.push(new s(L,T.offset,L,T.offset+T.length))}if(l){for(var M=l.start.column,w=l.end.column,L=0,C=f.length-1;L<C&&f[L].start.column<M&&f[L].start.row==0;)L++;for(var F=l.end.row-l.start.row;L<C&&f[C].end.column>w&&f[C].end.row==F;)C--;for(f=f.slice(L,C+1),L=0,C=f.length;L<C;L++)f[L].start.row+=l.start.row,f[L].end.row+=l.start.row}return f},u.prototype.replace=function(r,i){var l=this.$options,d=this.$assembleRegExp(l);if(l.$isMultiLine)return i;if(d){var f=d.exec(r);if(!f||f[0].length!=r.length)return null;if(i=r.replace(d,i),l.preserveCase){i=i.split("");for(var o=Math.min(r.length,r.length);o--;){var h=r[o];h&&h.toLowerCase()!=h?i[o]=i[o].toUpperCase():i[o]=i[o].toLowerCase()}i=i.join("")}return i}},u.prototype.$assembleRegExp=function(r,i){if(r.needle instanceof RegExp)return r.re=r.needle;var l=r.needle;if(!r.needle)return r.re=!1;r.regExp||(l=c.escapeRegExp(l));var d=r.caseSensitive?"gm":"gmi";try{new RegExp(l,"u"),r.$supportsUnicodeFlag=!0,d+="u"}catch{r.$supportsUnicodeFlag=!1}if(r.wholeWord&&(l=p(l,r)),r.$isMultiLine=!i&&/[\n\r]/.test(l),r.$isMultiLine)return r.re=this.$assembleMultilineRegExp(l,d);try{var f=new RegExp(l,d)}catch{f=!1}return r.re=f},u.prototype.$assembleMultilineRegExp=function(r,i){for(var l=r.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),d=[],f=0;f<l.length;f++)try{d.push(new RegExp(l[f],i))}catch{return!1}return d},u.prototype.$matchIterator=function(r,i){var l=this.$assembleRegExp(i);if(!l)return!1;var d=i.backwards==!0,f=i.skipCurrent!=!1,o=l.unicode,h=i.range,_=i.start;_||(_=h?h[d?"end":"start"]:r.selection.getRange()),_.start&&(_=_[f!=d?"end":"start"]);var m=h?h.start.row:0,y=h?h.end.row:r.getLength()-1;if(d)var C=function(g){var b=_.row;if(!D(b,_.column,g)){for(b--;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return;if(i.wrap!=!1){for(b=y,m=_.row;b>=m;b--)if(D(b,Number.MAX_VALUE,g))return}}};else var C=function(b){var L=_.row;if(!D(L,_.column,b)){for(L=L+1;L<=y;L++)if(D(L,0,b))return;if(i.wrap!=!1){for(L=m,y=_.row;L<=y;L++)if(D(L,0,b))return}}};if(i.$isMultiLine)var E=l.length,D=function(g,b,L){var S=d?g-E+1:g;if(!(S<0||S+E>r.getLength())){var T=r.getLine(S),M=T.search(l[0]);if(!(!d&&M<b||M===-1)){for(var w=1;w<E;w++)if(T=r.getLine(S+w),T.search(l[w])==-1)return;var F=T.match(l[E-1])[0].length;if(!(d&&F>b)&&L(S,M,S+E-1,F))return!0}}};else if(d)var D=function(b,L,S){var T=r.getLine(b),M=[],w,F=0;for(l.lastIndex=0;w=l.exec(T);){var x=w[0].length;if(F=w.index,!x){if(F>=T.length)break;l.lastIndex=F+=c.skipEmptyMatch(T,F,o)}if(w.index+x>L)break;M.push(w.index,x)}for(var R=M.length-1;R>=0;R-=2){var A=M[R-1],x=M[R];if(S(b,A,b,A+x))return!0}};else var D=function(b,L,S){var T=r.getLine(b),M,w;for(l.lastIndex=L;w=l.exec(T);){var F=w[0].length;if(M=w.index,S(b,M,b,M+F))return!0;if(!F&&(l.lastIndex=M+=c.skipEmptyMatch(T,M,o),M>=T.length))return!1}};return{forEach:C}},u}();function p(u,r){var i=c.supportsLookbehind();function l(h,_){_===void 0&&(_=!0);var m=i&&r.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return m.test(h)||r.regExp?i&&r.$supportsUnicodeFlag?_?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var d=Array.from(u),f=d[0],o=d[d.length-1];return l(f)+u+l(o,!1)}t.Search=a});ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var i=function(l,d){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,o){f.__proto__=o}||function(f,o){for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(f[h]=o[h])},i(l,d)};return function(l,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");i(l,d);function f(){this.constructor=l}l.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}(),v=e("../lib/keys"),s=e("../lib/useragent"),a=v.KEY_MODS,p=function(){function i(l,d){this.$init(l,d,!1)}return i.prototype.$init=function(l,d,f){this.platform=d||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(l),this.$singleCommand=f},i.prototype.addCommand=function(l){this.commands[l.name]&&this.removeCommand(l),this.commands[l.name]=l,l.bindKey&&this._buildKeyHash(l)},i.prototype.removeCommand=function(l,d){var f=l&&(typeof l=="string"?l:l.name);l=this.commands[f],d||delete this.commands[f];var o=this.commandKeyBinding;for(var h in o){var _=o[h];if(_==l)delete o[h];else if(Array.isArray(_)){var m=_.indexOf(l);m!=-1&&(_.splice(m,1),_.length==1&&(o[h]=_[0]))}}},i.prototype.bindKey=function(l,d,f){if(typeof l=="object"&&l&&(f==null&&(f=l.position),l=l[this.platform]),!!l){if(typeof d=="function")return this.addCommand({exec:d,bindKey:l,name:d.name||l});l.split("|").forEach(function(o){var h="";if(o.indexOf(" ")!=-1){var _=o.split(/\s+/);o=_.pop(),_.forEach(function(C){var E=this.parseKeys(C),D=a[E.hashId]+E.key;h+=(h?" ":"")+D,this._addCommandToBinding(h,"chainKeys")},this),h+=" "}var m=this.parseKeys(o),y=a[m.hashId]+m.key;this._addCommandToBinding(h+y,d,f)},this)}},i.prototype._addCommandToBinding=function(l,d,f){var o=this.commandKeyBinding,h;if(!d)delete o[l];else if(!o[l]||this.$singleCommand)o[l]=d;else{Array.isArray(o[l])?(h=o[l].indexOf(d))!=-1&&o[l].splice(h,1):o[l]=[o[l]],typeof f!="number"&&(f=u(d));var _=o[l];for(h=0;h<_.length;h++){var m=_[h],y=u(m);if(y>f)break}_.splice(h,0,d)}},i.prototype.addCommands=function(l){l&&Object.keys(l).forEach(function(d){var f=l[d];if(f){if(typeof f=="string")return this.bindKey(f,d);typeof f=="function"&&(f={exec:f}),typeof f=="object"&&(f.name||(f.name=d),this.addCommand(f))}},this)},i.prototype.removeCommands=function(l){Object.keys(l).forEach(function(d){this.removeCommand(l[d])},this)},i.prototype.bindKeys=function(l){Object.keys(l).forEach(function(d){this.bindKey(d,l[d])},this)},i.prototype._buildKeyHash=function(l){this.bindKey(l.bindKey,l)},i.prototype.parseKeys=function(l){var d=l.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(y){return y}),f=d.pop(),o=v[f];if(v.FUNCTION_KEYS[o])f=v.FUNCTION_KEYS[o].toLowerCase();else if(d.length){if(d.length==1&&d[0]=="shift")return{key:f.toUpperCase(),hashId:-1}}else return{key:f,hashId:-1};for(var h=0,_=d.length;_--;){var m=v.KEY_MODS[d[_]];if(m==null)return typeof console<"u"&&console.error("invalid modifier "+d[_]+" in "+l),!1;h|=m}return{key:f,hashId:h}},i.prototype.findKeyCommand=function(l,d){var f=a[l]+d;return this.commandKeyBinding[f]},i.prototype.handleKeyboard=function(l,d,f,o){if(!(o<0)){var h=a[d]+f,_=this.commandKeyBinding[h];return l.$keyChain&&(l.$keyChain+=" "+h,_=this.commandKeyBinding[l.$keyChain]||_),_&&(_=="chainKeys"||_[_.length-1]=="chainKeys")?(l.$keyChain=l.$keyChain||h,{command:"null"}):(l.$keyChain&&((!d||d==4)&&f.length==1?l.$keyChain=l.$keyChain.slice(0,-h.length-1):(d==-1||o>0)&&(l.$keyChain="")),{command:_})}},i.prototype.getStatusText=function(l,d){return d.$keyChain||""},i}();function u(i){return typeof i=="object"&&i.bindKey&&i.bindKey.position||(i.isDefault?-100:0)}var r=function(i){c(l,i);function l(d,f){var o=i.call(this,d,f)||this;return o.$singleCommand=!0,o}return l}(p);r.call=function(i,l,d){p.prototype.$init.call(i,l,d,!0)},p.call=function(i,l,d){p.prototype.$init.call(i,l,d,!1)},t.HashHandler=r,t.MultiHashHandler=p});ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var u=function(r,i){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,d){l.__proto__=d}||function(l,d){for(var f in d)Object.prototype.hasOwnProperty.call(d,f)&&(l[f]=d[f])},u(r,i)};return function(r,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");u(r,i);function l(){this.constructor=r}r.prototype=i===null?Object.create(i):(l.prototype=i.prototype,new l)}}(),v=e("../lib/oop"),s=e("../keyboard/hash_handler").MultiHashHandler,a=e("../lib/event_emitter").EventEmitter,p=function(u){c(r,u);function r(i,l){var d=u.call(this,l,i)||this;return d.byName=d.commands,d.setDefaultHandler("exec",function(f){return f.args?f.command.exec(f.editor,f.args,f.event,!1):f.command.exec(f.editor,{},f.event,!0)}),d}return r.prototype.exec=function(i,l,d){if(Array.isArray(i)){for(var f=i.length;f--;)if(this.exec(i[f],l,d))return!0;return!1}if(typeof i=="string"&&(i=this.commands[i]),!i||l&&l.$readOnly&&!i.readOnly||this.$checkCommandState!=!1&&i.isAvailable&&!i.isAvailable(l))return!1;var o={editor:l,command:i,args:d};return o.returnValue=this._emit("exec",o),this._signal("afterExec",o),o.returnValue!==!1},r.prototype.toggleRecording=function(i){if(!this.$inReplay)return i&&i._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(l){this.macro.push([l.command,l.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},r.prototype.replay=function(i){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(i);try{this.$inReplay=!0,this.macro.forEach(function(l){typeof l=="string"?this.exec(l,i):this.exec(l[0],i,l[1])},this)}finally{this.$inReplay=!1}}},r.prototype.trimMacro=function(i){return i.map(function(l){return typeof l[0]!="string"&&(l[0]=l[0].name),l[1]||(l=l[0]),l})},r}(s);v.implement(p.prototype,a),t.CommandManager=p});ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t,n){"use strict";var c=e("../lib/lang"),v=e("../config"),s=e("../range").Range;function a(u,r){return{win:u,mac:r}}t.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:a("Ctrl-,","Command-,"),exec:function(u){v.loadModule("ace/ext/settings_menu",function(r){r.init(u),u.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:a("Alt-E","F4"),exec:function(u){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(u,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:a("Alt-Shift-E","Shift-F4"),exec:function(u){v.loadModule("ace/ext/error_marker",function(r){r.showErrorMarker(u,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:a("Ctrl-A","Command-A"),exec:function(u){u.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:a(null,"Ctrl-L"),exec:function(u){u.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:a("Ctrl-L","Command-L"),exec:function(u,r){typeof r=="number"&&!isNaN(r)&&u.gotoLine(r),u.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:a("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(u){u.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:a("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(u){u.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:a("F2","F2"),exec:function(u){u.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:a("Alt-F2","Alt-F2"),exec:function(u){u.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:a(null,"Ctrl-Command-Option-0"),exec:function(u){u.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:a("Alt-0","Command-Option-0"),exec:function(u){u.session.foldAll(),u.session.unfold(u.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:a("Alt-Shift-0","Command-Option-Shift-0"),exec:function(u){u.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:a("Ctrl-K","Command-G"),exec:function(u){u.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:a("Ctrl-Shift-K","Command-Shift-G"),exec:function(u){u.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:a("Alt-K","Ctrl-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:a("Alt-Shift-K","Ctrl-Shift-G"),exec:function(u){u.selection.isEmpty()?u.selection.selectWord():u.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:a("Ctrl-F","Command-F"),exec:function(u){v.loadModule("ace/ext/searchbox",function(r){r.Search(u)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(u){u.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:a("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(u){u.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:a("Ctrl-Home","Command-Home|Command-Up"),exec:function(u){u.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:a("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(u){u.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:a("Up","Up|Ctrl-P"),exec:function(u,r){u.navigateUp(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:a("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(u){u.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:a("Ctrl-End","Command-End|Command-Down"),exec:function(u){u.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:a("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(u){u.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:a("Down","Down|Ctrl-N"),exec:function(u,r){u.navigateDown(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:a("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(u){u.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:a("Ctrl-Left","Option-Left"),exec:function(u){u.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:a("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:a("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(u){u.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:a("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(u){u.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:a("Left","Left|Ctrl-B"),exec:function(u,r){u.navigateLeft(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:a("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(u){u.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:a("Ctrl-Right","Option-Right"),exec:function(u){u.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:a("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:a("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(u){u.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:a("Shift-Right","Shift-Right"),exec:function(u){u.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:a("Right","Right|Ctrl-F"),exec:function(u,r){u.navigateRight(r.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(u){u.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:a(null,"Option-PageDown"),exec:function(u){u.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:a("PageDown","PageDown|Ctrl-V"),exec:function(u){u.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(u){u.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:a(null,"Option-PageUp"),exec:function(u){u.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(u){u.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:a("Ctrl-Up",null),exec:function(u){u.renderer.scrollBy(0,-2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:a("Ctrl-Down",null),exec:function(u){u.renderer.scrollBy(0,2*u.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(u){u.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(u){u.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:a("Ctrl-Alt-E","Command-Option-E"),exec:function(u){u.commands.toggleRecording(u)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:a("Ctrl-Shift-E","Command-Shift-E"),exec:function(u){u.commands.replay(u)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:a("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(u){u.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:a("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(u){u.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:a("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(u){u.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:a(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(u){},readOnly:!0},{name:"cut",description:"Cut",exec:function(u){var r=u.$copyWithEmptySelection&&u.selection.isEmpty(),i=r?u.selection.getLineRange():u.selection.getRange();u._emit("cut",i),i.isEmpty()||u.session.remove(i),u.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(u,r){u.$handlePaste(r)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:a("Ctrl-D","Command-D"),exec:function(u){u.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:a("Ctrl-Shift-D","Command-Shift-D"),exec:function(u){u.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:a("Ctrl-Alt-S","Command-Alt-S"),exec:function(u){u.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:a("Ctrl-/","Command-/"),exec:function(u){u.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:a("Ctrl-Shift-/","Command-Shift-/"),exec:function(u){u.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:a("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(u){u.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:a("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(u){u.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:a("Ctrl-H","Command-Option-F"),exec:function(u){v.loadModule("ace/ext/searchbox",function(r){r.Search(u,!0)})}},{name:"undo",description:"Undo",bindKey:a("Ctrl-Z","Command-Z"),exec:function(u){u.undo()}},{name:"redo",description:"Redo",bindKey:a("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(u){u.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:a("Alt-Shift-Up","Command-Option-Up"),exec:function(u){u.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:a("Alt-Up","Option-Up"),exec:function(u){u.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:a("Alt-Shift-Down","Command-Option-Down"),exec:function(u){u.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:a("Alt-Down","Option-Down"),exec:function(u){u.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:a("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(u){u.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:a("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(u){u.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:a("Shift-Delete",null),exec:function(u){if(u.selection.isEmpty())u.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:a("Alt-Backspace","Command-Backspace"),exec:function(u){u.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:a("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(u){u.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:a("Ctrl-Shift-Backspace",null),exec:function(u){var r=u.selection.getRange();r.start.column=0,u.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:a("Ctrl-Shift-Delete",null),exec:function(u){var r=u.selection.getRange();r.end.column=Number.MAX_VALUE,u.session.remove(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:a("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(u){u.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:a("Ctrl-Delete","Alt-Delete"),exec:function(u){u.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:a("Shift-Tab","Shift-Tab"),exec:function(u){u.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:a("Tab","Tab"),exec:function(u){u.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:a("Ctrl-[","Ctrl-["),exec:function(u){u.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:a("Ctrl-]","Ctrl-]"),exec:function(u){u.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(u,r){u.insert(r)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(u,r){u.insert(c.stringRepeat(r.text||"",r.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:a(null,"Ctrl-O"),exec:function(u){u.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:a("Alt-Shift-X","Ctrl-T"),exec:function(u){u.transposeLetters()},multiSelectAction:function(u){u.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:a("Ctrl-U","Ctrl-U"),exec:function(u){u.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:a("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(u){u.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:a(null,null),exec:function(u){u.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:a("Ctrl-Shift-L","Command-Shift-L"),exec:function(u){var r=u.selection.getRange();r.start.column=r.end.column=0,r.end.row++,u.selection.setRange(r,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:a("Ctrl+F3","F3"),exec:function(u){u.openLink()}},{name:"joinlines",description:"Join lines",bindKey:a(null,null),exec:function(u){for(var r=u.selection.isBackwards(),i=r?u.selection.getSelectionLead():u.selection.getSelectionAnchor(),l=r?u.selection.getSelectionAnchor():u.selection.getSelectionLead(),d=u.session.doc.getLine(i.row).length,f=u.session.doc.getTextRange(u.selection.getRange()),o=f.replace(/\n\s*/," ").length,h=u.session.doc.getLine(i.row),_=i.row+1;_<=l.row+1;_++){var m=c.stringTrimLeft(c.stringTrimRight(u.session.doc.getLine(_)));m.length!==0&&(m=" "+m),h+=m}l.row+1<u.session.doc.getLength()-1&&(h+=u.session.doc.getNewLineCharacter()),u.clearSelection(),u.session.doc.replace(new s(i.row,0,l.row+2,0),h),o>0?(u.selection.moveCursorTo(i.row,i.column),u.selection.selectTo(i.row,i.column+o)):(d=u.session.doc.getLine(i.row).length>d?d+1:d,u.selection.moveCursorTo(i.row,d))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:a(null,null),exec:function(u){var r=u.session.doc.getLength()-1,i=u.session.doc.getLine(r).length,l=u.selection.rangeList.ranges,d=[];l.length<1&&(l=[u.selection.getRange()]);for(var f=0;f<l.length;f++)f==l.length-1&&(l[f].end.row===r&&l[f].end.column===i||d.push(new s(l[f].end.row,l[f].end.column,r,i))),f===0?l[f].start.row===0&&l[f].start.column===0||d.push(new s(0,0,l[f].start.row,l[f].start.column)):d.push(new s(l[f-1].end.row,l[f-1].end.column,l[f].start.row,l[f].start.column));u.exitMultiSelectMode(),u.clearSelection();for(var f=0;f<d.length;f++)u.selection.addRange(d[f],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(u){u.selection.clearSelection(),u.navigateLineEnd(),u.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(u){u.selection.clearSelection();var r=u.getCursorPosition();u.selection.moveTo(r.row-1,Number.MAX_VALUE),u.insert(`
`),r.row===0&&u.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(u){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),u.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:a("F1","F1"),exec:function(u){u.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:a(null,null),exec:function(u){u.prompt({$type:"modes"})},readOnly:!0}];for(var p=1;p<9;p++)t.commands.push({name:"foldToLevel"+p,description:"Fold To Level "+p,level:p,exec:function(u){u.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})});ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("./lib/dom"),v=function(){function s(a){this.session=a,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return s.prototype.getRowLength=function(a){var p;return this.lineWidgets?p=this.lineWidgets[a]&&this.lineWidgets[a].rowCount||0:p=0,!this.$useWrapMode||!this.$wrapData[a]?1+p:this.$wrapData[a].length+1+p},s.prototype.$getWidgetScreenLength=function(){var a=0;return this.lineWidgets.forEach(function(p){p&&p.rowCount&&!p.hidden&&(a+=p.rowCount)}),a},s.prototype.$onChangeEditor=function(a){this.attach(a.editor)},s.prototype.attach=function(a){a&&a.widgetManager&&a.widgetManager!=this&&a.widgetManager.detach(),this.editor!=a&&(this.detach(),this.editor=a,a&&(a.widgetManager=this,a.renderer.on("beforeRender",this.measureWidgets),a.renderer.on("afterRender",this.renderWidgets)))},s.prototype.detach=function(a){var p=this.editor;if(p){this.editor=null,p.widgetManager=null,p.renderer.off("beforeRender",this.measureWidgets),p.renderer.off("afterRender",this.renderWidgets);var u=this.session.lineWidgets;u&&u.forEach(function(r){r&&r.el&&r.el.parentNode&&(r._inDocument=!1,r.el.parentNode.removeChild(r.el))})}},s.prototype.updateOnFold=function(a,p){var u=p.lineWidgets;if(!(!u||!a.action)){for(var r=a.data,i=r.start.row,l=r.end.row,d=a.action=="add",f=i+1;f<l;f++)u[f]&&(u[f].hidden=d);u[l]&&(d?u[i]?u[l].hidden=d:u[i]=u[l]:(u[i]==u[l]&&(u[i]=void 0),u[l].hidden=d))}},s.prototype.updateOnChange=function(a){var p=this.session.lineWidgets;if(p){var u=a.start.row,r=a.end.row-u;if(r!==0)if(a.action=="remove"){var i=p.splice(u+1,r);!p[u]&&i[i.length-1]&&(p[u]=i.pop()),i.forEach(function(d){d&&this.removeLineWidget(d)},this),this.$updateRows()}else{var l=new Array(r);p[u]&&p[u].column!=null&&a.start.column>p[u].column&&u++,l.unshift(u,0),p.splice.apply(p,l),this.$updateRows()}}},s.prototype.$updateRows=function(){var a=this.session.lineWidgets;if(a){var p=!0;a.forEach(function(u,r){if(u)for(p=!1,u.row=r;u.$oldWidget;)u.$oldWidget.row=r,u=u.$oldWidget}),p&&(this.session.lineWidgets=null)}},s.prototype.$registerLineWidget=function(a){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var p=this.session.lineWidgets[a.row];return p&&(a.$oldWidget=p,p.el&&p.el.parentNode&&(p.el.parentNode.removeChild(p.el),p._inDocument=!1)),this.session.lineWidgets[a.row]=a,a},s.prototype.addLineWidget=function(a){if(this.$registerLineWidget(a),a.session=this.session,!this.editor)return a;var p=this.editor.renderer;a.html&&!a.el&&(a.el=c.createElement("div"),a.el.innerHTML=a.html),a.text&&!a.el&&(a.el=c.createElement("div"),a.el.textContent=a.text),a.el&&(c.addCssClass(a.el,"ace_lineWidgetContainer"),a.className&&c.addCssClass(a.el,a.className),a.el.style.position="absolute",a.el.style.zIndex="5",p.container.appendChild(a.el),a._inDocument=!0,a.coverGutter||(a.el.style.zIndex="3"),a.pixelHeight==null&&(a.pixelHeight=a.el.offsetHeight)),a.rowCount==null&&(a.rowCount=a.pixelHeight/p.layerConfig.lineHeight);var u=this.session.getFoldAt(a.row,0);if(a.$fold=u,u){var r=this.session.lineWidgets;a.row==u.end.row&&!r[u.start.row]?r[u.start.row]=a:a.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows(),this.renderWidgets(null,p),this.onWidgetChanged(a),a},s.prototype.removeLineWidget=function(a){if(a._inDocument=!1,a.session=null,a.el&&a.el.parentNode&&a.el.parentNode.removeChild(a.el),a.editor&&a.editor.destroy)try{a.editor.destroy()}catch{}if(this.session.lineWidgets){var p=this.session.lineWidgets[a.row];if(p==a)this.session.lineWidgets[a.row]=a.$oldWidget,a.$oldWidget&&this.onWidgetChanged(a.$oldWidget);else for(;p;){if(p.$oldWidget==a){p.$oldWidget=a.$oldWidget;break}p=p.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:a.row}}}),this.$updateRows()},s.prototype.getWidgetsAtRow=function(a){for(var p=this.session.lineWidgets,u=p&&p[a],r=[];u;)r.push(u),u=u.$oldWidget;return r},s.prototype.onWidgetChanged=function(a){this.session._changedWidgets.push(a),this.editor&&this.editor.renderer.updateFull()},s.prototype.measureWidgets=function(a,p){var u=this.session._changedWidgets,r=p.layerConfig;if(!(!u||!u.length)){for(var i=1/0,l=0;l<u.length;l++){var d=u[l];if(!(!d||!d.el)&&d.session==this.session){if(!d._inDocument){if(this.session.lineWidgets[d.row]!=d)continue;d._inDocument=!0,p.container.appendChild(d.el)}d.h=d.el.offsetHeight,d.fixedWidth||(d.w=d.el.offsetWidth,d.screenWidth=Math.ceil(d.w/r.characterWidth));var f=d.h/r.lineHeight;d.coverLine&&(f-=this.session.getRowLineCount(d.row),f<0&&(f=0)),d.rowCount!=f&&(d.rowCount=f,d.row<i&&(i=d.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},s.prototype.renderWidgets=function(a,p){var u=p.layerConfig,r=this.session.lineWidgets;if(r){for(var i=Math.min(this.firstRow,u.firstRow),l=Math.max(this.lastRow,u.lastRow,r.length);i>0&&!r[i];)i--;this.firstRow=u.firstRow,this.lastRow=u.lastRow,p.$cursorLayer.config=u;for(var d=i;d<=l;d++){var f=r[d];if(!(!f||!f.el)){if(f.hidden){f.el.style.top=-100-(f.pixelHeight||0)+"px";continue}f._inDocument||(f._inDocument=!0,p.container.appendChild(f.el));var o=p.$cursorLayer.getPixelPosition({row:d,column:0},!0).top;f.coverLine||(o+=u.lineHeight*this.session.getRowLineCount(f.row)),f.el.style.top=o-u.offset+"px";var h=f.coverGutter?0:p.gutterWidth;f.fixedWidth||(h-=p.scrollLeft),f.el.style.left=h+"px",f.fullWidth&&f.screenWidth&&(f.el.style.minWidth=u.width+2*u.padding+"px"),f.fixedWidth?f.el.style.right=p.scrollBar.getWidth()+"px":f.el.style.right=""}}}},s}();t.LineWidgets=v});ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(e,t,n){"use strict";var c=e("../lib/keys"),v=e("../mouse/default_gutter_handler").GutterTooltip,s=function(){function p(u){this.editor=u,this.gutterLayer=u.renderer.$gutterLayer,this.element=u.renderer.$gutter,this.lines=u.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new v(this.editor)}return p.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},p.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},p.prototype.$onGutterKeyDown=function(u){if(this.annotationTooltip.isOpen){u.preventDefault(),u.keyCode===c.escape&&this.annotationTooltip.hideTooltip();return}if(u.target===this.element){if(u.keyCode!=c.enter)return;u.preventDefault();var r=this.editor.getCursorPosition().row;this.editor.isRowVisible(r)||this.editor.scrollToLine(r,!0,!0),setTimeout(function(){var i=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),l=this.$findNearestFoldWidget(i),d=this.$findNearestAnnotation(i);if(!(l===null&&d===null)){if(l===null&&d!==null){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(l!==null&&d===null){this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(d-i)<Math.abs(l-i)){this.activeRowIndex=d,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=l,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}.bind(this),10);return}this.$handleGutterKeyboardInteraction(u),setTimeout(function(){this.editor._signal("gutterkeydown",new a(u,this))}.bind(this),10)},p.prototype.$handleGutterKeyboardInteraction=function(u){if(u.keyCode===c.tab){u.preventDefault();return}if(u.keyCode===c.escape){u.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(u.keyCode===c.up){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(u.keyCode===c.down){switch(u.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(u.keyCode===c.left){u.preventDefault(),this.$switchLane("annotation");return}if(u.keyCode===c.right){u.preventDefault(),this.$switchLane("fold");return}if(u.keyCode===c.enter||u.keyCode===c.space){switch(u.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var r=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),u),setTimeout(function(){this.$rowIndexToRow(this.activeRowIndex)!==r&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(r),this.$focusFoldWidget(this.activeRowIndex))}.bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var i=this.lines.cells[this.activeRowIndex].element.childNodes[2],l=i.getBoundingClientRect(),d=this.annotationTooltip.getElement().style;d.left=l.right+"px",d.top=l.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},p.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},p.prototype.$isFoldWidgetVisible=function(u){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),i=this.$getFoldWidget(u).style.display!=="none";return r&&i},p.prototype.$isAnnotationVisible=function(u){var r=this.editor.isRowFullyVisible(this.$rowIndexToRow(u)),i=this.$getAnnotation(u).style.display!=="none";return r&&i},p.prototype.$getFoldWidget=function(u){var r=this.lines.get(u),i=r.element;return i.childNodes[1]},p.prototype.$getAnnotation=function(u){var r=this.lines.get(u),i=r.element;return i.childNodes[2]},p.prototype.$findNearestFoldWidget=function(u){if(this.$isFoldWidgetVisible(u))return u;for(var r=0;u-r>0||u+r<this.lines.getLength()-1;){if(r++,u-r>=0&&this.$isFoldWidgetVisible(u-r))return u-r;if(u+r<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(u+r))return u+r}return null},p.prototype.$findNearestAnnotation=function(u){if(this.$isAnnotationVisible(u))return u;for(var r=0;u-r>0||u+r<this.lines.getLength()-1;){if(r++,u-r>=0&&this.$isAnnotationVisible(u-r))return u-r;if(u+r<=this.lines.getLength()-1&&this.$isAnnotationVisible(u+r))return u+r}return null},p.prototype.$focusFoldWidget=function(u){if(u!=null){var r=this.$getFoldWidget(u);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},p.prototype.$focusAnnotation=function(u){if(u!=null){var r=this.$getAnnotation(u);r.classList.add(this.editor.renderer.keyboardFocusClassName),r.focus()}},p.prototype.$blurFoldWidget=function(u){var r=this.$getFoldWidget(u);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},p.prototype.$blurAnnotation=function(u){var r=this.$getAnnotation(u);r.classList.remove(this.editor.renderer.keyboardFocusClassName),r.blur()},p.prototype.$moveFoldWidgetUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveFoldWidgetDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isFoldWidgetVisible(u)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=u,this.$focusFoldWidget(this.activeRowIndex);return}},p.prototype.$moveAnnotationUp=function(){for(var u=this.activeRowIndex;u>0;)if(u--,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$moveAnnotationDown=function(){for(var u=this.activeRowIndex;u<this.lines.getLength()-1;)if(u++,this.$isAnnotationVisible(u)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=u,this.$focusAnnotation(this.activeRowIndex);return}},p.prototype.$switchLane=function(u){switch(u){case"annotation":if(this.activeLane==="annotation")break;var r=this.$findNearestAnnotation(this.activeRowIndex);if(r==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=r,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var i=this.$findNearestFoldWidget(this.activeRowIndex);if(i==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);break}},p.prototype.$rowIndexToRow=function(u){var r=this.lines.get(u);return r?r.row:null},p.prototype.$rowToRowIndex=function(u){for(var r=0;r<this.lines.getLength();r++){var i=this.lines.get(r);if(i.row==u)return r}return null},p}();t.GutterKeyboardHandler=s;var a=function(){function p(u,r){this.gutterKeyboardHandler=r,this.domEvent=u}return p.prototype.getKey=function(){return c.keyCodeToString(this.domEvent.keyCode)},p.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},p.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},p.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},p}();t.GutterKeyboardEvent=a});ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(e,t,n){"use strict";var c=this&&this.__values||function(M){var w=typeof Symbol=="function"&&Symbol.iterator,F=w&&M[w],x=0;if(F)return F.call(M);if(M&&typeof M.length=="number")return{next:function(){return M&&x>=M.length&&(M=void 0),{value:M&&M[x++],done:!M}}};throw new TypeError(w?"Object is not iterable.":"Symbol.iterator is not defined.")},v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/lang"),p=e("./lib/useragent"),u=e("./keyboard/textinput").TextInput,r=e("./mouse/mouse_handler").MouseHandler,i=e("./mouse/fold_handler").FoldHandler,l=e("./keyboard/keybinding").KeyBinding,d=e("./edit_session").EditSession,f=e("./search").Search,o=e("./range").Range,h=e("./lib/event_emitter").EventEmitter,_=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,y=e("./config"),C=e("./token_iterator").TokenIterator,E=e("./line_widgets").LineWidgets,D=e("./keyboard/gutter_handler").GutterKeyboardHandler,g=e("./config").nls,b=e("./clipboard"),L=e("./lib/keys"),S=function(){function M(w,F,x){this.session,this.$toDestroy=[];var R=w.getContainerElement();this.container=R,this.renderer=w,this.id="editor"+ ++M.$uid,this.commands=new _(p.isMac?"mac":"win",m),typeof document=="object"&&(this.textInput=new u(w.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new r(this),new i(this)),this.keyBinding=new l(this),this.$search=new f().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=a.delayedCall(function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(A,I){I._$emitInputEvent.schedule(31)}),this.setSession(F||x&&x.session||new d("")),y.resetOptions(this),x&&this.setOptions(x),y._signal("editor",this)}return M.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=a.delayedCall(this.endOperation.bind(this,!0)),this.on("change",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}.bind(this),!0)},M.prototype.startOperation=function(w){if(this.curOp){if(!w||this.curOp.command)return;this.prevOp=this.curOp}w||(this.previousCommand=null,w={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:w.command||{},args:w.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},M.prototype.endOperation=function(w){if(this.curOp&&this.session){if(w&&w.returnValue===!1||!this.session)return this.curOp=null;if(w==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var F=this.curOp.command,x=F&&F.scrollIntoView;if(x){switch(x){case"center-animate":x="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var R=this.selection.getRange(),A=this.renderer.layerConfig;(R.start.row>=A.lastRow||R.end.row<=A.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break;default:break}x=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},M.prototype.$historyTracker=function(w){if(this.$mergeUndoDeltas){var F=this.prevOp,x=this.$mergeableCommands,R=F.command&&w.command.name==F.command.name;if(w.command.name=="insertstring"){var A=w.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),R=R&&this.mergeNextCommand&&(!/\s/.test(A)||/\s/.test(F.args)),this.mergeNextCommand=!0}else R=R&&x.indexOf(w.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(R=!1),R?this.session.mergeUndoDeltas=!0:x.indexOf(w.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},M.prototype.setKeyboardHandler=function(w,F){if(w&&typeof w=="string"&&w!="ace"){this.$keybindingId=w;var x=this;y.loadModule(["keybinding",w],function(R){x.$keybindingId==w&&x.keyBinding.setKeyboardHandler(R&&R.handler),F&&F()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(w),F&&F()},M.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},M.prototype.setSession=function(w){if(this.session!=w){this.curOp&&this.endOperation(),this.curOp={};var F=this.session;if(F){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var x=this.session.getSelection();x.off("changeCursor",this.$onCursorChange),x.off("changeSelection",this.$onSelectionChange)}this.session=w,w?(this.$onDocumentChange=this.onDocumentChange.bind(this),w.on("change",this.$onDocumentChange),this.renderer.setSession(w),this.$onChangeMode=this.onChangeMode.bind(this),w.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),w.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),w.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),w.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),w.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),w.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=w.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(w)),this._signal("changeSession",{session:w,oldSession:F}),this.curOp=null,F&&F._signal("changeEditor",{oldEditor:this}),w&&w._signal("changeEditor",{editor:this}),w&&!w.destroyed&&w.bgTokenizer.scheduleStart()}},M.prototype.getSession=function(){return this.session},M.prototype.setValue=function(w,F){return this.session.doc.setValue(w),F?F==1?this.navigateFileEnd():F==-1&&this.navigateFileStart():this.selectAll(),w},M.prototype.getValue=function(){return this.session.getValue()},M.prototype.getSelection=function(){return this.selection},M.prototype.resize=function(w){this.renderer.onResize(w)},M.prototype.setTheme=function(w,F){this.renderer.setTheme(w,F)},M.prototype.getTheme=function(){return this.renderer.getTheme()},M.prototype.setStyle=function(w){this.renderer.setStyle(w)},M.prototype.unsetStyle=function(w){this.renderer.unsetStyle(w)},M.prototype.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},M.prototype.setFontSize=function(w){this.setOption("fontSize",w)},M.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var w=this;this.$highlightPending=!0,setTimeout(function(){w.$highlightPending=!1;var F=w.session;if(!(!F||F.destroyed)){F.$bracketHighlight&&(F.$bracketHighlight.markerIds.forEach(function(q){F.removeMarker(q)}),F.$bracketHighlight=null);var x=w.getCursorPosition(),R=w.getKeyboardHandler(),A=R&&R.$getDirectionForHighlight&&R.$getDirectionForHighlight(w),I=F.getMatchingBracketRanges(x,A);if(!I){var $=new C(F,x.row,x.column),k=$.getCurrentToken();if(k&&/\b(?:tag-open|tag-name)/.test(k.type)){var H=F.getMatchingTags(x);H&&(I=[H.openTagName,H.closeTagName])}}if(!I&&F.$mode.getMatching&&(I=F.$mode.getMatching(w.session)),!I){w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide();return}var U="ace_bracket";Array.isArray(I)?I.length==1&&(U="ace_error_bracket"):I=[I],I.length==2&&(o.comparePoints(I[0].end,I[1].start)==0?I=[o.fromPoints(I[0].start,I[1].end)]:o.comparePoints(I[0].start,I[1].end)==0&&(I=[o.fromPoints(I[1].start,I[0].end)])),F.$bracketHighlight={ranges:I,markerIds:I.map(function(q){return F.addMarker(q,U,"text")})},w.getHighlightIndentGuides()&&w.renderer.$textLayer.$highlightIndentGuide()}},50)}},M.prototype.focus=function(){this.textInput.focus()},M.prototype.isFocused=function(){return this.textInput.isFocused()},M.prototype.blur=function(){this.textInput.blur()},M.prototype.onFocus=function(w){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",w))},M.prototype.onBlur=function(w){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",w))},M.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},M.prototype.onDocumentChange=function(w){var F=this.session.$useWrapMode,x=w.start.row==w.end.row?w.end.row:1/0;this.renderer.updateLines(w.start.row,x,F),this._signal("change",w),this.$cursorChange()},M.prototype.onTokenizerUpdate=function(w){var F=w.data;this.renderer.updateLines(F.first,F.last)},M.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},M.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},M.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},M.prototype.$updateHighlightActiveLine=function(){var w=this.getSession(),F;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(F=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(F=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(F=!1)),w.$highlightLineMarker&&!F)w.removeMarker(w.$highlightLineMarker.id),w.$highlightLineMarker=null;else if(!w.$highlightLineMarker&&F){var x=new o(F.row,F.column,F.row,1/0);x.id=w.addMarker(x,"ace_active-line","screenLine"),w.$highlightLineMarker=x}else F&&(w.$highlightLineMarker.start.row=F.row,w.$highlightLineMarker.end.row=F.row,w.$highlightLineMarker.start.column=F.column,w._signal("changeBackMarker"))},M.prototype.onSelectionChange=function(w){var F=this.session;if(F.$selectionMarker&&F.removeMarker(F.$selectionMarker),F.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var x=this.selection.getRange(),R=this.getSelectionStyle();F.$selectionMarker=F.addMarker(x,"ace_selection",R)}var A=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(A),this._signal("changeSelection")},M.prototype.$getSelectionHighLightRegexp=function(){var w=this.session,F=this.getSelectionRange();if(!(F.isEmpty()||F.isMultiLine())){var x=F.start.column,R=F.end.column,A=w.getLine(F.start.row),I=A.substring(x,R);if(!(I.length>5e3||!/[\w\d]/.test(I))){var $=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),k=A.substring(x-1,R+1);if($.test(k))return $}}},M.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},M.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},M.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},M.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},M.prototype.onChangeMode=function(w){this.renderer.updateText(),this._emit("changeMode",w)},M.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},M.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},M.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},M.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},M.prototype.getCopyText=function(){var w=this.getSelectedText(),F=this.session.doc.getNewLineCharacter(),x=!1;if(!w&&this.$copyWithEmptySelection){x=!0;for(var R=this.selection.getAllRanges(),A=0;A<R.length;A++){var I=R[A];A&&R[A-1].start.row==I.start.row||(w+=this.session.getLine(I.start.row)+F)}}var $={text:w};return this._signal("copy",$),b.lineMode=x?$.text:!1,$.text},M.prototype.onCopy=function(){this.commands.exec("copy",this)},M.prototype.onCut=function(){this.commands.exec("cut",this)},M.prototype.onPaste=function(w,F){var x={text:w,event:F};this.commands.exec("paste",this,x)},M.prototype.$handlePaste=function(w){typeof w=="string"&&(w={text:w}),this._signal("paste",w);var F=w.text,x=F===b.lineMode,R=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)x?R.insert({row:this.selection.lead.row,column:0},F):this.insert(F);else if(x)this.selection.rangeList.ranges.forEach(function(U){R.insert({row:U.start.row,column:0},F)});else{var A=F.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,$=A.length==2&&(!A[0]||!A[1]);if(A.length!=I.length||$)return this.commands.exec("insertstring",this,F);for(var k=I.length;k--;){var H=I[k];H.isEmpty()||R.remove(H),R.insert(H.start,A[k])}}},M.prototype.execCommand=function(w,F){return this.commands.exec(w,this,F)},M.prototype.insert=function(w,F){var x=this.session,R=x.getMode(),A=this.getCursorPosition();if(this.getBehavioursEnabled()&&!F){var I=R.transformAction(x.getState(A.row),"insertion",this,x,w);I&&(w!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),w=I.text)}if(w=="	"&&(w=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&w.indexOf(`
`)==-1){var $=o.fromPoints(A,A);$.end.column+=w.length,this.session.remove($)}}else{var $=this.getSelectionRange();A=this.session.remove($),this.clearSelection()}if(w==`
`||w==`\r
`){var q=x.getLine(A.row);if(A.column>q.search(/\S|$/)){var k=q.substr(A.column).search(/\S|$/);x.doc.removeInLine(A.row,A.column,A.column+k)}}this.clearSelection();var H=A.column,U=x.getState(A.row),q=x.getLine(A.row),N=R.checkOutdent(U,q,w);if(x.insert(A,w),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new o(A.row,H+I.selection[0],A.row,H+I.selection[1])):this.selection.setSelectionRange(new o(A.row+I.selection[0],I.selection[1],A.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(x.getDocument().isNewLine(w)){var K=R.getNextLineIndent(U,q.slice(0,A.column),x.getTabString());x.insert({row:A.row+1,column:0},K)}N&&R.autoOutdent(U,x,A.row)}},M.prototype.autoIndent=function(){var w=this.session,F=w.getMode(),x,R;if(this.selection.isEmpty())x=0,R=w.doc.getLength()-1;else{var A=this.getSelectionRange();x=A.start.row,R=A.end.row}for(var I="",$="",k="",H,U,q,N=w.getTabString(),K=x;K<=R;K++)K>0&&(I=w.getState(K-1),$=w.getLine(K-1),k=F.getNextLineIndent(I,$,N)),H=w.getLine(K),U=F.$getIndent(H),k!==U&&(U.length>0&&(q=new o(K,0,K,U.length),w.remove(q)),k.length>0&&w.insert({row:K,column:0},k)),F.autoOutdent(I,w,K)},M.prototype.onTextInput=function(w,F){if(!F)return this.keyBinding.onTextInput(w);this.startOperation({command:{name:"insertstring"}});var x=this.applyComposition.bind(this,w,F);this.selection.rangeCount?this.forEachSelection(x):x(),this.endOperation()},M.prototype.applyComposition=function(w,F){if(F.extendLeft||F.extendRight){var x=this.selection.getRange();x.start.column-=F.extendLeft,x.end.column+=F.extendRight,x.start.column<0&&(x.start.row--,x.start.column+=this.session.getLine(x.start.row).length+1),this.selection.setRange(x),!w&&!x.isEmpty()&&this.remove()}if((w||!this.selection.isEmpty())&&this.insert(w,!0),F.restoreStart||F.restoreEnd){var x=this.selection.getRange();x.start.column-=F.restoreStart,x.end.column-=F.restoreEnd,this.selection.setRange(x)}},M.prototype.onCommandKey=function(w,F,x){return this.keyBinding.onCommandKey(w,F,x)},M.prototype.setOverwrite=function(w){this.session.setOverwrite(w)},M.prototype.getOverwrite=function(){return this.session.getOverwrite()},M.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},M.prototype.setScrollSpeed=function(w){this.setOption("scrollSpeed",w)},M.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},M.prototype.setDragDelay=function(w){this.setOption("dragDelay",w)},M.prototype.getDragDelay=function(){return this.getOption("dragDelay")},M.prototype.setSelectionStyle=function(w){this.setOption("selectionStyle",w)},M.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},M.prototype.setHighlightActiveLine=function(w){this.setOption("highlightActiveLine",w)},M.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},M.prototype.setHighlightGutterLine=function(w){this.setOption("highlightGutterLine",w)},M.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},M.prototype.setHighlightSelectedWord=function(w){this.setOption("highlightSelectedWord",w)},M.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},M.prototype.setAnimatedScroll=function(w){this.renderer.setAnimatedScroll(w)},M.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},M.prototype.setShowInvisibles=function(w){this.renderer.setShowInvisibles(w)},M.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},M.prototype.setDisplayIndentGuides=function(w){this.renderer.setDisplayIndentGuides(w)},M.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},M.prototype.setHighlightIndentGuides=function(w){this.renderer.setHighlightIndentGuides(w)},M.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},M.prototype.setShowPrintMargin=function(w){this.renderer.setShowPrintMargin(w)},M.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},M.prototype.setPrintMarginColumn=function(w){this.renderer.setPrintMarginColumn(w)},M.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},M.prototype.setReadOnly=function(w){this.setOption("readOnly",w)},M.prototype.getReadOnly=function(){return this.getOption("readOnly")},M.prototype.setBehavioursEnabled=function(w){this.setOption("behavioursEnabled",w)},M.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},M.prototype.setWrapBehavioursEnabled=function(w){this.setOption("wrapBehavioursEnabled",w)},M.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},M.prototype.setShowFoldWidgets=function(w){this.setOption("showFoldWidgets",w)},M.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},M.prototype.setFadeFoldWidgets=function(w){this.setOption("fadeFoldWidgets",w)},M.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},M.prototype.remove=function(w){this.selection.isEmpty()&&(w=="left"?this.selection.selectLeft():this.selection.selectRight());var F=this.getSelectionRange();if(this.getBehavioursEnabled()){var x=this.session,R=x.getState(F.start.row),A=x.getMode().transformAction(R,"deletion",this,x,F);if(F.end.column===0){var I=x.getTextRange(F);if(I[I.length-1]==`
`){var $=x.getLine(F.end.row);/^\s+$/.test($)&&(F.end.column=$.length)}}A&&(F=A)}this.session.remove(F),this.clearSelection()},M.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},M.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var w=this.getSelectionRange();w.start.column==w.end.column&&w.start.row==w.end.row&&(w.end.column=0,w.end.row++),this.session.remove(w),this.clearSelection()},M.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var w=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(w)},M.prototype.setGhostText=function(w,F){this.session.widgetManager||(this.session.widgetManager=new E(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(w,F)},M.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},M.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var w=this.getCursorPosition(),F=w.column;if(F!==0){var x=this.session.getLine(w.row),R,A;F<x.length?(R=x.charAt(F)+x.charAt(F-1),A=new o(w.row,F-1,w.row,F+1)):(R=x.charAt(F-1)+x.charAt(F-2),A=new o(w.row,F-2,w.row,F)),this.session.replace(A,R),this.session.selection.moveToPosition(A.end)}}},M.prototype.toLowerCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toLowerCase()),this.selection.setSelectionRange(w)},M.prototype.toUpperCase=function(){var w=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var F=this.getSelectionRange(),x=this.session.getTextRange(F);this.session.replace(F,x.toUpperCase()),this.selection.setSelectionRange(w)},M.prototype.indent=function(){var w=this.session,F=this.getSelectionRange();if(F.start.row<F.end.row){var x=this.$getSelectedRows();w.indentRows(x.first,x.last,"	");return}else if(F.start.column<F.end.column){var R=w.getTextRange(F);if(!/^\s+$/.test(R)){var x=this.$getSelectedRows();w.indentRows(x.first,x.last,"	");return}}var A=w.getLine(F.start.row),I=F.start,$=w.getTabSize(),k=w.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var H=$-k%$,U=a.stringRepeat(" ",H);else{for(var H=k%$;A[F.start.column-1]==" "&&H;)F.start.column--,H--;this.selection.setSelectionRange(F),U="	"}return this.insert(U)},M.prototype.blockIndent=function(){var w=this.$getSelectedRows();this.session.indentRows(w.first,w.last,"	")},M.prototype.blockOutdent=function(){var w=this.session.getSelection();this.session.outdentRows(w.getRange())},M.prototype.sortLines=function(){for(var w=this.$getSelectedRows(),F=this.session,x=[],R=w.first;R<=w.last;R++)x.push(F.getLine(R));x.sort(function($,k){return $.toLowerCase()<k.toLowerCase()?-1:$.toLowerCase()>k.toLowerCase()?1:0});for(var A=new o(0,0,0,0),R=w.first;R<=w.last;R++){var I=F.getLine(R);A.start.row=R,A.end.row=R,A.end.column=I.length,F.replace(A,x[R-w.first])}},M.prototype.toggleCommentLines=function(){var w=this.session.getState(this.getCursorPosition().row),F=this.$getSelectedRows();this.session.getMode().toggleCommentLines(w,this.session,F.first,F.last)},M.prototype.toggleBlockComment=function(){var w=this.getCursorPosition(),F=this.session.getState(w.row),x=this.getSelectionRange();this.session.getMode().toggleBlockComment(F,this.session,x,w)},M.prototype.getNumberAt=function(w,F){var x=/[\-]?[0-9]+(?:\.[0-9]+)?/g;x.lastIndex=0;for(var R=this.session.getLine(w);x.lastIndex<F;){var A=x.exec(R);if(A.index<=F&&A.index+A[0].length>=F){var I={value:A[0],start:A.index,end:A.index+A[0].length};return I}}return null},M.prototype.modifyNumber=function(w){var F=this.selection.getCursor().row,x=this.selection.getCursor().column,R=new o(F,x-1,F,x),A=this.session.getTextRange(R);if(!isNaN(parseFloat(A))&&isFinite(A)){var I=this.getNumberAt(F,x);if(I){var $=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,k=I.start+I.value.length-$,H=parseFloat(I.value);H*=Math.pow(10,k),$!==I.end&&x<$?w*=Math.pow(10,I.end-x-1):w*=Math.pow(10,I.end-x),H+=w,H/=Math.pow(10,k);var U=H.toFixed(k),q=new o(F,I.start,F,I.end);this.session.replace(q,U),this.moveCursorTo(F,Math.max(I.start+1,x+U.length-I.value.length))}}else this.toggleWord()},M.prototype.toggleWord=function(){var w=this.selection.getCursor().row,F=this.selection.getCursor().column;this.selection.selectWord();var x=this.getSelectedText(),R=this.selection.getWordRange().start.column,A=x.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=F-R-1;I<0&&(I=0);var $=0,k=0,H=this;x.match(/[A-Za-z0-9_]+/)&&A.forEach(function(X,J){k=$+X.length,I>=$&&I<=k&&(x=X,H.selection.clearSelection(),H.moveCursorTo(w,$+R),H.selection.selectTo(w,k+R)),$=k});for(var U=this.$toggleWordPairs,q,N=0;N<U.length;N++)for(var K=U[N],O=0;O<=1;O++){var B=+!O,W=x.match(new RegExp("^\\s?_?("+a.escapeRegExp(K[O])+")\\s?$","i"));if(W){var P=x.match(new RegExp("([_]|^|\\s)("+a.escapeRegExp(W[1])+")($|\\s)","g"));P&&(q=x.replace(new RegExp(a.escapeRegExp(K[O]),"i"),function(X){var J=K[B];return X.toUpperCase()==X?J=J.toUpperCase():X.charAt(0).toUpperCase()==X.charAt(0)&&(J=J.substr(0,0)+K[B].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(q),q="")}}},M.prototype.findLinkAt=function(w,F){var x,R,A=this.session.getLine(w),I=A.split(/((?:https?|ftp):\/\/[\S]+)/),$=F;$<0&&($=0);var k=0,H=0,U;try{for(var q=c(I),N=q.next();!N.done;N=q.next()){var K=N.value;if(H=k+K.length,$>=k&&$<=H&&K.match(/((?:https?|ftp):\/\/[\S]+)/)){U=K.replace(/[\s:.,'";}\]]+$/,"");break}k=H}}catch(O){x={error:O}}finally{try{N&&!N.done&&(R=q.return)&&R.call(q)}finally{if(x)throw x.error}}return U},M.prototype.openLink=function(){var w=this.selection.getCursor(),F=this.findLinkAt(w.row,w.column);return F&&window.open(F,"_blank"),F!=null},M.prototype.removeLines=function(){var w=this.$getSelectedRows();this.session.removeFullLines(w.first,w.last),this.clearSelection()},M.prototype.duplicateSelection=function(){var w=this.selection,F=this.session,x=w.getRange(),R=w.isBackwards();if(x.isEmpty()){var A=x.start.row;F.duplicateLines(A,A)}else{var I=R?x.start:x.end,$=F.insert(I,F.getTextRange(x));x.start=I,x.end=$,w.setSelectionRange(x,R)}},M.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},M.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},M.prototype.moveText=function(w,F,x){return this.session.moveText(w,F,x)},M.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},M.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},M.prototype.$moveLines=function(w,F){var x,R,A=this.selection;if(!A.inMultiSelectMode||this.inVirtualSelectionMode){var I=A.toOrientedRange();x=this.$getSelectedRows(I),R=this.session.$moveLines(x.first,x.last,F?0:w),F&&w==-1&&(R=0),I.moveBy(R,0),A.fromOrientedRange(I)}else{var $=A.rangeList.ranges;A.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var k=0,H=0,U=$.length,q=0;q<U;q++){var N=q;$[q].moveBy(k,0),x=this.$getSelectedRows($[q]);for(var K=x.first,O=x.last;++q<U;){H&&$[q].moveBy(H,0);var B=this.$getSelectedRows($[q]);if(F&&B.first!=O)break;if(!F&&B.first>O+1)break;O=B.last}for(q--,k=this.session.$moveLines(K,O,F?0:w),F&&w==-1&&(N=q+1);N<=q;)$[N].moveBy(k,0),N++;F||(k=0),H+=k}A.fromOrientedRange(A.ranges[0]),A.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},M.prototype.$getSelectedRows=function(w){return w=(w||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(w.start.row),last:this.session.getRowFoldEnd(w.end.row)}},M.prototype.onCompositionStart=function(w){this.renderer.showComposition(w)},M.prototype.onCompositionUpdate=function(w){this.renderer.setCompositionText(w)},M.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},M.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},M.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},M.prototype.isRowVisible=function(w){return w>=this.getFirstVisibleRow()&&w<=this.getLastVisibleRow()},M.prototype.isRowFullyVisible=function(w){return w>=this.renderer.getFirstFullyVisibleRow()&&w<=this.renderer.getLastFullyVisibleRow()},M.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},M.prototype.$moveByPage=function(w,F){var x=this.renderer,R=this.renderer.layerConfig,A=w*Math.floor(R.height/R.lineHeight);F===!0?this.selection.$moveSelection(function(){this.moveCursorBy(A,0)}):F===!1&&(this.selection.moveCursorBy(A,0),this.selection.clearSelection());var I=x.scrollTop;x.scrollBy(0,A*R.lineHeight),F!=null&&x.scrollCursorIntoView(null,.5),x.animateScrolling(I)},M.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},M.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},M.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},M.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},M.prototype.scrollPageDown=function(){this.$moveByPage(1)},M.prototype.scrollPageUp=function(){this.$moveByPage(-1)},M.prototype.scrollToRow=function(w){this.renderer.scrollToRow(w)},M.prototype.scrollToLine=function(w,F,x,R){this.renderer.scrollToLine(w,F,x,R)},M.prototype.centerSelection=function(){var w=this.getSelectionRange(),F={row:Math.floor(w.start.row+(w.end.row-w.start.row)/2),column:Math.floor(w.start.column+(w.end.column-w.start.column)/2)};this.renderer.alignCursor(F,.5)},M.prototype.getCursorPosition=function(){return this.selection.getCursor()},M.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},M.prototype.getSelectionRange=function(){return this.selection.getRange()},M.prototype.selectAll=function(){this.selection.selectAll()},M.prototype.clearSelection=function(){this.selection.clearSelection()},M.prototype.moveCursorTo=function(w,F){this.selection.moveCursorTo(w,F)},M.prototype.moveCursorToPosition=function(w){this.selection.moveCursorToPosition(w)},M.prototype.jumpToMatching=function(w,F){var x=this.getCursorPosition(),R=new C(this.session,x.row,x.column),A=R.getCurrentToken(),I=0;A&&A.type.indexOf("tag-name")!==-1&&(A=R.stepBackward());var $=A||R.stepForward();if($){var k,H=!1,U={},q=x.column-$.start,N,K={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if($.value.match(/[{}()\[\]]/g)){for(;q<$.value.length&&!H;q++)if(K[$.value[q]])switch(N=K[$.value[q]]+"."+$.type.replace("rparen","lparen"),isNaN(U[N])&&(U[N]=0),$.value[q]){case"(":case"[":case"{":U[N]++;break;case")":case"]":case"}":U[N]--,U[N]===-1&&(k="bracket",H=!0);break}}else $.type.indexOf("tag-name")!==-1&&(isNaN(U[$.value])&&(U[$.value]=0),A.value==="<"&&I>1?U[$.value]++:A.value==="</"&&U[$.value]--,U[$.value]===-1&&(k="tag",H=!0));H||(A=$,I++,$=R.stepForward(),q=0)}while($&&!H);if(k){var O,B;if(k==="bracket")O=this.session.getBracketRange(x),O||(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1,R.getCurrentTokenRow(),R.getCurrentTokenColumn()+q-1),B=O.start,(F||B.row===x.row&&Math.abs(B.column-x.column)<2)&&(O=this.session.getBracketRange(B)));else if(k==="tag"){if(!$||$.type.indexOf("tag-name")===-1)return;if(O=new o(R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2,R.getCurrentTokenRow(),R.getCurrentTokenColumn()-2),O.compare(x.row,x.column)===0){var W=this.session.getMatchingTags(x);W&&(W.openTag.contains(x.row,x.column)?(O=W.closeTag,B=O.start):(O=W.openTag,W.closeTag.start.row===x.row&&W.closeTag.start.column===x.column?B=O.end:B=O.start))}B=B||O.start}B=O&&O.cursor||B,B&&(w?O&&F?this.selection.setRange(O):O&&O.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(B.row,B.column):this.selection.moveTo(B.row,B.column))}}},M.prototype.gotoLine=function(w,F,x){this.selection.clearSelection(),this.session.unfold({row:w-1,column:F||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(w-1,F||0),this.isRowFullyVisible(w-1)||this.scrollToLine(w-1,!0,x)},M.prototype.navigateTo=function(w,F){this.selection.moveTo(w,F)},M.prototype.navigateUp=function(w){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(-w||-1,0)},M.prototype.navigateDown=function(w){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var F=this.selection.anchor.getPosition();return this.moveCursorToPosition(F)}this.selection.clearSelection(),this.selection.moveCursorBy(w||1,0)},M.prototype.navigateLeft=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorLeft();else{var F=this.getSelectionRange().start;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateRight=function(w){if(this.selection.isEmpty())for(w=w||1;w--;)this.selection.moveCursorRight();else{var F=this.getSelectionRange().end;this.moveCursorToPosition(F)}this.clearSelection()},M.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},M.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},M.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},M.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},M.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},M.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},M.prototype.replace=function(w,F){F&&this.$search.set(F);var x=this.$search.find(this.session),R=0;return x&&(this.$tryReplace(x,w)&&(R=1),this.selection.setSelectionRange(x),this.renderer.scrollSelectionIntoView(x.start,x.end)),R},M.prototype.replaceAll=function(w,F){F&&this.$search.set(F);var x=this.$search.findAll(this.session),R=0;if(!x.length)return R;var A=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=x.length-1;I>=0;--I)this.$tryReplace(x[I],w)&&R++;return this.selection.setSelectionRange(A),R},M.prototype.$tryReplace=function(w,F){var x=this.session.getTextRange(w);return F=this.$search.replace(x,F),F!==null?(w.end=this.session.replace(w,F),w):null},M.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},M.prototype.find=function(w,F,x){F||(F={}),typeof w=="string"||w instanceof RegExp?F.needle=w:typeof w=="object"&&v.mixin(F,w);var R=this.selection.getRange();F.needle==null&&(w=this.session.getTextRange(R)||this.$search.$options.needle,w||(R=this.session.getWordRange(R.start.row,R.start.column),w=this.session.getTextRange(R)),this.$search.set({needle:w})),this.$search.set(F),F.start||this.$search.set({start:R});var A=this.$search.find(this.session);if(F.preventScroll)return A;if(A)return this.revealRange(A,x),A;F.backwards?R.start=R.end:R.end=R.start,this.selection.setRange(R)},M.prototype.findNext=function(w,F){this.find({skipCurrent:!0,backwards:!1},w,F)},M.prototype.findPrevious=function(w,F){this.find(w,{skipCurrent:!0,backwards:!0},F)},M.prototype.revealRange=function(w,F){this.session.unfold(w),this.selection.setSelectionRange(w);var x=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(w.start,w.end,.5),F!==!1&&this.renderer.animateScrolling(x)},M.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},M.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(w){w.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},M.prototype.setAutoScrollEditorIntoView=function(w){if(w){var F,x=this,R=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var A=this.$scrollAnchor;A.style.cssText="position:absolute",this.container.insertBefore(A,this.container.firstChild);var I=this.on("changeSelection",function(){R=!0}),$=this.renderer.on("beforeRender",function(){R&&(F=x.renderer.container.getBoundingClientRect())}),k=this.renderer.on("afterRender",function(){if(R&&F&&(x.isFocused()||x.searchBox&&x.searchBox.isFocused())){var H=x.renderer,U=H.$cursorLayer.$pixelPos,q=H.layerConfig,N=U.top-q.offset;U.top>=0&&N+F.top<0?R=!0:U.top<q.height&&U.top+F.top+q.lineHeight>window.innerHeight?R=!1:R=null,R!=null&&(A.style.top=N+"px",A.style.left=U.left+"px",A.style.height=q.lineHeight+"px",A.scrollIntoView(R)),R=F=null}});this.setAutoScrollEditorIntoView=function(H){H||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",k),this.renderer.off("beforeRender",$))}}},M.prototype.$resetCursorStyle=function(){var w=this.$cursorStyle||"ace",F=this.renderer.$cursorLayer;F&&(F.setSmoothBlinking(/smooth/.test(w)),F.isBlinking=!this.$readOnly&&w!="wide",s.setCssClass(F.element,"ace_slim-cursors",/slim/.test(w)))},M.prototype.prompt=function(w,F,x){var R=this;y.loadModule("ace/ext/prompt",function(A){A.prompt(R,w,F,x)})},M}();S.$uid=0,S.prototype.curOp=null,S.prototype.prevOp={},S.prototype.$mergeableCommands=["backspace","del","insertstring"],S.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],v.implement(S.prototype,h),y.defineOptions(S.prototype,"editor",{selectionStyle:{set:function(M){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:M})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(M){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(M){this.textInput.setReadOnly(M),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(M){this.textInput.setCopyWithEmptySelection(M)},initialValue:!1},cursorStyle:{set:function(M){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(M){this.setAutoScrollEditorIntoView(M)}},keyboardHandler:{set:function(M){this.setKeyboardHandler(M)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(M){this.session.setValue(M)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(M){this.setSession(M)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(M){this.renderer.$gutterLayer.setShowLineNumbers(M),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),M&&this.$relativeLineNumbers?T.attach(this):T.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(M){this.$showLineNumbers&&M?T.attach(this):T.detach(this)}},placeholder:{set:function(M){this.$updatePlaceholder||(this.$updatePlaceholder=function(){var w=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(w&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!w&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var F=s.createElement("div");F.className="ace_placeholder",F.textContent=this.$placeholder||"",this.renderer.placeholderNode=F,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!w&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}.bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(M){var w={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(R){R.blur(),R.renderer.scroller.focus()},readOnly:!0},F=function(R){if(R.target==this.renderer.scroller&&R.keyCode===L.enter){R.preventDefault();var A=this.getCursorPosition().row;this.isRowVisible(A)||this.scrollToLine(A,!0,!0),this.focus()}},x;M?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(p.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",g("editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",g("Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",F.bind(this)),this.commands.addCommand(w),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",g("editor")),this.renderer.$gutter.setAttribute("aria-label",g("Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),x||(x=new D(this)),x.addListener()):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",F.bind(this)),this.commands.removeCommand(w),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),x&&x.removeListener())},initialValue:!1},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var T={getText:function(M,w){return(Math.abs(M.selection.lead.row-w)||w+1+(w<9?"\xB7":""))+""},getWidth:function(M,w,F){return Math.max(w.toString().length,(F.lastRow+1).toString().length,2)*F.characterWidth},update:function(M,w){w.renderer.$loop.schedule(w.renderer.CHANGE_GUTTER)},attach:function(M){M.renderer.$gutterLayer.$renderer=this,M.on("changeSelection",this.update),this.update(null,M)},detach:function(M){M.renderer.$gutterLayer.$renderer==this&&(M.renderer.$gutterLayer.$renderer=null),M.off("changeSelection",this.update),this.update(null,M)}};t.Editor=S});ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a,p){this.element=a,this.canvasHeight=p||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return s.prototype.moveContainer=function(a){c.translate(this.element,0,-(a.firstRowScreen*a.lineHeight%this.canvasHeight)-a.offset*this.$offsetCoefficient)},s.prototype.pageChanged=function(a,p){return Math.floor(a.firstRowScreen*a.lineHeight/this.canvasHeight)!==Math.floor(p.firstRowScreen*p.lineHeight/this.canvasHeight)},s.prototype.computeLineTop=function(a,p,u){var r=p.firstRowScreen*p.lineHeight,i=Math.floor(r/this.canvasHeight),l=u.documentToScreenRow(a,0)*p.lineHeight;return l-i*this.canvasHeight},s.prototype.computeLineHeight=function(a,p,u){return p.lineHeight*u.getRowLineCount(a)},s.prototype.getLength=function(){return this.cells.length},s.prototype.get=function(a){return this.cells[a]},s.prototype.shift=function(){this.$cacheCell(this.cells.shift())},s.prototype.pop=function(){this.$cacheCell(this.cells.pop())},s.prototype.push=function(a){if(Array.isArray(a)){this.cells.push.apply(this.cells,a);for(var p=c.createFragment(this.element),u=0;u<a.length;u++)p.appendChild(a[u].element);this.element.appendChild(p)}else this.cells.push(a),this.element.appendChild(a.element)},s.prototype.unshift=function(a){if(Array.isArray(a)){this.cells.unshift.apply(this.cells,a);for(var p=c.createFragment(this.element),u=0;u<a.length;u++)p.appendChild(a[u].element);this.element.firstChild?this.element.insertBefore(p,this.element.firstChild):this.element.appendChild(p)}else this.cells.unshift(a),this.element.insertAdjacentElement("afterbegin",a.element)},s.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},s.prototype.$cacheCell=function(a){a&&(a.element.remove(),this.cellCache.push(a))},s.prototype.createCell=function(a,p,u,r){var i=this.cellCache.pop();if(!i){var l=c.createElement("div");r&&r(l),this.element.appendChild(l),i={element:l,text:"",row:a}}return i.row=a,i},s}();t.Lines=v});ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/lang"),a=e("../lib/event_emitter").EventEmitter,p=e("./lines").Lines,u=e("../config").nls,r=function(){function l(d){this.element=c.createElement("div"),this.element.className="ace_layer ace_gutter-layer",d.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new p(this.element),this.$lines.$offsetCoefficient=1}return l.prototype.setSession=function(d){this.session&&this.session.off("change",this.$updateAnnotations),this.session=d,d&&d.on("change",this.$updateAnnotations)},l.prototype.addGutterDecoration=function(d,f){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(d,f)},l.prototype.removeGutterDecoration=function(d,f){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(d,f)},l.prototype.setAnnotations=function(d){this.$annotations=[];for(var f=0;f<d.length;f++){var o=d[f],h=o.row,_=this.$annotations[h];_||(_=this.$annotations[h]={text:[],type:[]});var m=o.text,y=o.type;m=m?s.escapeHTML(m):o.html||"",_.text.indexOf(m)===-1&&(_.text.push(m),_.type.push(y));var C=o.className;C?_.className=C:y=="error"?_.className=" ace_error":y=="warning"&&_.className!=" ace_error"?_.className=" ace_warning":y=="info"&&!_.className&&(_.className=" ace_info")}},l.prototype.$updateAnnotations=function(d){if(this.$annotations.length){var f=d.start.row,o=d.end.row-f;if(o!==0)if(d.action=="remove")this.$annotations.splice(f,o+1,null);else{var h=new Array(o+1);h.unshift(f,1),this.$annotations.splice.apply(this.$annotations,h)}}},l.prototype.update=function(d){this.config=d;var f=this.session,o=d.firstRow,h=Math.min(d.lastRow+d.gutterOffset,f.getLength()-1);this.oldLastRow=h,this.config=d,this.$lines.moveContainer(d),this.$updateCursorRow();for(var _=f.getNextFoldLine(o),m=_?_.start.row:1/0,y=null,C=-1,E=o;;){if(E>m&&(E=_.end.row+1,_=f.getNextFoldLine(E,_),m=_?_.start.row:1/0),E>h){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}y=this.$lines.get(++C),y?y.row=E:(y=this.$lines.createCell(E,d,this.session,i),this.$lines.push(y)),this.$renderCell(y,d,_,E),E++}this._signal("afterRender"),this.$updateGutterWidth(d)},l.prototype.$updateGutterWidth=function(d){var f=this.session,o=f.gutterRenderer||this.$renderer,h=f.$firstLineNumber,_=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||f.$useWrapMode)&&(_=f.getLength()+h-1);var m=o?o.getWidth(f,_,d):_.toString().length*d.characterWidth,y=this.$padding||this.$computePadding();m+=y.left+y.right,m!==this.gutterWidth&&!isNaN(m)&&(this.gutterWidth=m,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",m))},l.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var d=this.session.selection.getCursor();this.$cursorRow!==d.row&&(this.$cursorRow=d.row)}},l.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var d=this.session.selection.cursor.row;if(this.$cursorRow=d,!(this.$cursorCell&&this.$cursorCell.row==d)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var f=this.$lines.cells;this.$cursorCell=null;for(var o=0;o<f.length;o++){var h=f[o];if(h.row>=this.$cursorRow){if(h.row>this.$cursorRow){var _=this.session.getFoldLine(this.$cursorRow);if(o>0&&_&&_.start.row==f[o-1].row)h=f[o-1];else break}h.element.className="ace_gutter-active-line "+h.element.className,this.$cursorCell=h;break}}}}},l.prototype.scrollLines=function(d){var f=this.config;if(this.config=d,this.$updateCursorRow(),this.$lines.pageChanged(f,d))return this.update(d);this.$lines.moveContainer(d);var o=Math.min(d.lastRow+d.gutterOffset,this.session.getLength()-1),h=this.oldLastRow;if(this.oldLastRow=o,!f||h<d.firstRow)return this.update(d);if(o<f.firstRow)return this.update(d);if(f.firstRow<d.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,d.firstRow-1);_>0;_--)this.$lines.shift();if(h>o)for(var _=this.session.getFoldedRowCount(o+1,h);_>0;_--)this.$lines.pop();d.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLines(d,d.firstRow,f.firstRow-1)),o>h&&this.$lines.push(this.$renderLines(d,h+1,o)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(d)},l.prototype.$renderLines=function(d,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,d,this.session,i);this.$renderCell(C,d,m,_),h.push(C),_++}return h},l.prototype.$renderCell=function(d,f,o,h){var _=d.element,m=this.session,y=_.childNodes[0],C=_.childNodes[1],E=_.childNodes[2],D=E.firstChild,g=m.$firstLineNumber,b=m.$breakpoints,L=m.$decorations,S=m.gutterRenderer||this.$renderer,T=this.$showFoldWidgets&&m.foldWidgets,M=o?o.start.row:Number.MAX_VALUE,w=f.lineHeight+"px",F=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",x=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",R=(S?S.getText(m,h):h+g).toString();if(this.$highlightGutterLine&&(h==this.$cursorRow||o&&h<this.$cursorRow&&h>=M&&this.$cursorRow<=o.end.row)&&(F+="ace_gutter-active-line ",this.$cursorCell!=d&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=d)),b[h]&&(F+=b[h]),L[h]&&(F+=L[h]),this.$annotations[h]&&h!==M&&(F+=this.$annotations[h].className),T){var A=T[h];A==null&&(A=T[h]=m.getFoldWidget(h))}if(A){var I="ace_fold-widget ace_"+A,$=A=="start"&&h==M&&h<o.end.row;if($){I+=" ace_closed";for(var k="",H=!1,U=h+1;U<=o.end.row;U++)if(this.$annotations[U]){if(this.$annotations[U].className===" ace_error"){H=!0,k=" ace_error_fold";break}if(this.$annotations[U].className===" ace_warning"){H=!0,k=" ace_warning_fold";continue}}F+=k}else I+=" ace_open";C.className!=I&&(C.className=I),c.setStyle(C.style,"height",w),c.setStyle(C.style,"display","inline-block"),C.setAttribute("role","button"),C.setAttribute("tabindex","-1");var q=m.getFoldWidgetRange(h);q?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[q.start.row+1,q.end.row+1])):o?C.setAttribute("aria-label",u("Toggle code folding, rows $0 through $1",[o.start.row+1,o.end.row+1])):C.setAttribute("aria-label",u("Toggle code folding, row $0",[h+1])),$?(C.setAttribute("aria-expanded","false"),C.setAttribute("title",u("Unfold code"))):(C.setAttribute("aria-expanded","true"),C.setAttribute("title",u("Fold code")))}else C&&(c.setStyle(C.style,"display","none"),C.setAttribute("tabindex","0"),C.removeAttribute("role"),C.removeAttribute("aria-label"));return H&&this.$showFoldedAnnotations?(E.className="ace_gutter_annotation",D.className=x,D.className+=k,c.setStyle(D.style,"height",w),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",w),E.setAttribute("aria-label",u("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):this.$annotations[h]?(E.className="ace_gutter_annotation",D.className=x,this.$useSvgGutterIcons?D.className+=this.$annotations[h].className:_.classList.add(this.$annotations[h].className.replace(" ","")),c.setStyle(D.style,"height",w),c.setStyle(E.style,"display","block"),c.setStyle(E.style,"height",w),E.setAttribute("aria-label",u("Read annotations row $0",[R])),E.setAttribute("tabindex","-1"),E.setAttribute("role","button")):(c.setStyle(E.style,"display","none"),E.removeAttribute("aria-label"),E.removeAttribute("role"),E.setAttribute("tabindex","0")),R!==y.data&&(y.data=R),_.className!=F&&(_.className=F),c.setStyle(d.element.style,"height",this.$lines.computeLineHeight(h,f,m)+"px"),c.setStyle(d.element.style,"top",this.$lines.computeLineTop(h,f,m)+"px"),d.text=R,E.style.display==="none"&&C.style.display==="none"?d.element.setAttribute("aria-hidden",!0):d.element.setAttribute("aria-hidden",!1),d},l.prototype.setHighlightGutterLine=function(d){this.$highlightGutterLine=d},l.prototype.setShowLineNumbers=function(d){this.$renderer=!d&&{getWidth:function(){return 0},getText:function(){return""}}},l.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},l.prototype.setShowFoldWidgets=function(d){d?c.addCssClass(this.element,"ace_folding-enabled"):c.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=d,this.$padding=null},l.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},l.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var d=c.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(d.borderLeftWidth)||0)+(parseInt(d.paddingLeft)||0)+1,this.$padding.right=(parseInt(d.borderRightWidth)||0)+(parseInt(d.paddingRight)||0),this.$padding},l.prototype.getRegion=function(d){var f=this.$padding||this.$computePadding(),o=this.element.getBoundingClientRect();if(d.x<f.left+o.left)return"markers";if(this.$showFoldWidgets&&d.x>o.right-f.right)return"foldWidgets"},l}();r.prototype.$fixedWidth=!1,r.prototype.$highlightGutterLine=!0,r.prototype.$renderer="",r.prototype.$showLineNumbers=!0,r.prototype.$showFoldWidgets=!0,v.implement(r.prototype,a);function i(l){var d=document.createTextNode("");l.appendChild(d);var f=c.createElement("span");l.appendChild(f);var o=c.createElement("span");l.appendChild(o);var h=c.createElement("span");return o.appendChild(h),l}t.Gutter=r});ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../range").Range,v=e("../lib/dom"),s=function(){function p(u){this.element=v.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)}return p.prototype.setPadding=function(u){this.$padding=u},p.prototype.setSession=function(u){this.session=u},p.prototype.setMarkers=function(u){this.markers=u},p.prototype.elt=function(u,r){var i=this.i!=-1&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=r,i.className=u},p.prototype.update=function(u){if(u){this.config=u,this.i=0;var r;for(var i in this.markers){var l=this.markers[i];if(!l.range){l.update(r,this,this.session,u);continue}var d=l.range.clipRows(u.firstRow,u.lastRow);if(!d.isEmpty())if(d=d.toScreenRange(this.session),l.renderer){var f=this.$getTop(d.start.row,u),o=this.$padding+d.start.column*u.characterWidth;l.renderer(r,d,o,f,u)}else l.type=="fullLine"?this.drawFullLineMarker(r,d,l.clazz,u):l.type=="screenLine"?this.drawScreenLineMarker(r,d,l.clazz,u):d.isMultiLine()?l.type=="text"?this.drawTextMarker(r,d,l.clazz,u):this.drawMultiLineMarker(r,d,l.clazz,u):this.drawSingleLineMarker(r,d,l.clazz+" ace_start ace_br15",u)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},p.prototype.$getTop=function(u,r){return(u-r.firstRowScreen)*r.lineHeight},p.prototype.drawTextMarker=function(u,r,i,l,d){for(var f=this.session,o=r.start.row,h=r.end.row,_=o,m=0,y=0,C=f.getScreenLastRowColumn(_),E=new c(_,r.start.column,_,y);_<=h;_++)E.start.row=E.end.row=_,E.start.column=_==o?r.start.column:f.getRowWrapIndent(_),E.end.column=C,m=y,y=C,C=_+1<h?f.getScreenLastRowColumn(_+1):_==h?0:r.end.column,this.drawSingleLineMarker(u,E,i+(_==o?" ace_start":"")+" ace_br"+a(_==o||_==o+1&&r.start.column,m<y,y>C,_==h),l,_==h?0:1,d)},p.prototype.drawMultiLineMarker=function(u,r,i,l,d){var f=this.$padding,o=l.lineHeight,h=this.$getTop(r.start.row,l),_=f+r.start.column*l.characterWidth;if(d=d||"",this.session.$bidiHandler.isBidiRow(r.start.row)){var m=r.clone();m.end.row=m.start.row,m.end.column=this.session.getLine(m.start.row).length,this.drawBidiSingleLineMarker(u,m,i+" ace_br1 ace_start",l,null,d)}else this.elt(i+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+h+"px;left:"+_+"px;"+(d||""));if(this.session.$bidiHandler.isBidiRow(r.end.row)){var m=r.clone();m.start.row=m.end.row,m.start.column=0,this.drawBidiSingleLineMarker(u,m,i+" ace_br12",l,null,d)}else{h=this.$getTop(r.end.row,l);var y=r.end.column*l.characterWidth;this.elt(i+" ace_br12","height:"+o+"px;width:"+y+"px;top:"+h+"px;left:"+f+"px;"+(d||""))}if(o=(r.end.row-r.start.row-1)*l.lineHeight,!(o<=0)){h=this.$getTop(r.start.row+1,l);var C=(r.start.column?1:0)|(r.end.column?0:8);this.elt(i+(C?" ace_br"+C:""),"height:"+o+"px;right:0;top:"+h+"px;left:"+f+"px;"+(d||""))}},p.prototype.drawSingleLineMarker=function(u,r,i,l,d,f){if(this.session.$bidiHandler.isBidiRow(r.start.row))return this.drawBidiSingleLineMarker(u,r,i,l,d,f);var o=l.lineHeight,h=(r.end.column+(d||0)-r.start.column)*l.characterWidth,_=this.$getTop(r.start.row,l),m=this.$padding+r.start.column*l.characterWidth;this.elt(i,"height:"+o+"px;width:"+h+"px;top:"+_+"px;left:"+m+"px;"+(f||""))},p.prototype.drawBidiSingleLineMarker=function(u,r,i,l,d,f){var o=l.lineHeight,h=this.$getTop(r.start.row,l),_=this.$padding,m=this.session.$bidiHandler.getSelections(r.start.column,r.end.column);m.forEach(function(y){this.elt(i,"height:"+o+"px;width:"+(y.width+(d||0))+"px;top:"+h+"px;left:"+(_+y.left)+"px;"+(f||""))},this)},p.prototype.drawFullLineMarker=function(u,r,i,l,d){var f=this.$getTop(r.start.row,l),o=l.lineHeight;r.start.row!=r.end.row&&(o+=this.$getTop(r.end.row,l)-f),this.elt(i,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(d||""))},p.prototype.drawScreenLineMarker=function(u,r,i,l,d){var f=this.$getTop(r.start.row,l),o=l.lineHeight;this.elt(i,"height:"+o+"px;top:"+f+"px;left:0;right:0;"+(d||""))},p}();s.prototype.$padding=0;function a(p,u,r,i){return(p?1:0)|(u?2:0)|(r?4:0)|(i?8:0)}t.Marker=s});ace.define("ace/layer/text_util",["require","exports","module"],function(e,t,n){var c=new Set(["text","rparen","lparen"]);t.isTextToken=function(v){return c.has(v)}});ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("./lines").Lines,p=e("../lib/event_emitter").EventEmitter,u=e("../config").nls,r=e("./text_util").isTextToken,i=function(){function l(d){this.dom=v,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",d.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new a(this.element)}return l.prototype.$updateEolChar=function(){var d=this.session.doc,f=d.getNewLineCharacter()==`
`&&d.getNewLineMode()!="windows",o=f?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=o)return this.EOL_CHAR=o,!0},l.prototype.setPadding=function(d){this.$padding=d,this.element.style.margin="0 "+d+"px"},l.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},l.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},l.prototype.$setFontMetrics=function(d){this.$fontMetrics=d,this.$fontMetrics.on("changeCharacterSize",function(f){this._signal("changeCharacterSize",f)}.bind(this)),this.$pollSizeChanges()},l.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},l.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},l.prototype.setSession=function(d){this.session=d,d&&this.$computeTabString()},l.prototype.setShowInvisibles=function(d){return this.showInvisibles==d?!1:(this.showInvisibles=d,typeof d=="string"?(this.showSpaces=/tab/i.test(d),this.showTabs=/space/i.test(d),this.showEOL=/eol/i.test(d)):this.showSpaces=this.showTabs=this.showEOL=d,this.$computeTabString(),!0)},l.prototype.setDisplayIndentGuides=function(d){return this.displayIndentGuides==d?!1:(this.displayIndentGuides=d,this.$computeTabString(),!0)},l.prototype.setHighlightIndentGuides=function(d){return this.$highlightIndentGuides===d?!1:(this.$highlightIndentGuides=d,d)},l.prototype.$computeTabString=function(){var d=this.session.getTabSize();this.tabSize=d;for(var f=this.$tabStrings=[0],o=1;o<d+1;o++)if(this.showTabs){var h=this.dom.createElement("span");h.className="ace_invisible ace_invisible_tab",h.textContent=s.stringRepeat(this.TAB_CHAR,o),f.push(h)}else f.push(this.dom.createTextNode(s.stringRepeat(" ",o),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var _="ace_indent-guide",m=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?s.stringRepeat(this.SPACE_CHAR,this.tabSize):s.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",E=this.showTabs?s.stringRepeat(this.TAB_CHAR,this.tabSize):y,h=this.dom.createElement("span");h.className=_+m,h.textContent=y,this.$tabStrings[" "]=h;var h=this.dom.createElement("span");h.className=_+C,h.textContent=E,this.$tabStrings["	"]=h}},l.prototype.updateLines=function(d,f,o){if(this.config.lastRow!=d.lastRow||this.config.firstRow!=d.firstRow)return this.update(d);this.config=d;for(var h=Math.max(f,d.firstRow),_=Math.min(o,d.lastRow),m=this.element.childNodes,y=0,E=d.firstRow;E<h;E++){var D=this.session.getFoldLine(E);if(D)if(D.containsRow(h)){h=D.start.row;break}else E=D.end.row;y++}for(var C=!1,E=h,D=this.session.getNextFoldLine(E),g=D?D.start.row:1/0;E>g&&(E=D.end.row+1,D=this.session.getNextFoldLine(E,D),g=D?D.start.row:1/0),!(E>_);){var b=m[y++];if(b){this.dom.removeChildren(b),this.$renderLine(b,E,E==g?D:!1),C&&(b.style.top=this.$lines.computeLineTop(E,d,this.session)+"px");var L=d.lineHeight*this.session.getRowLength(E)+"px";b.style.height!=L&&(C=!0,b.style.height=L)}E++}if(C)for(;y<this.$lines.cells.length;){var S=this.$lines.cells[y++];S.element.style.top=this.$lines.computeLineTop(S.row,d,this.session)+"px"}},l.prototype.scrollLines=function(d){var f=this.config;if(this.config=d,this.$lines.pageChanged(f,d))return this.update(d);this.$lines.moveContainer(d);var o=d.lastRow,h=f?f.lastRow:-1;if(!f||h<d.firstRow)return this.update(d);if(o<f.firstRow)return this.update(d);if(!f||f.lastRow<d.firstRow)return this.update(d);if(d.lastRow<f.firstRow)return this.update(d);if(f.firstRow<d.firstRow)for(var _=this.session.getFoldedRowCount(f.firstRow,d.firstRow-1);_>0;_--)this.$lines.shift();if(f.lastRow>d.lastRow)for(var _=this.session.getFoldedRowCount(d.lastRow+1,f.lastRow);_>0;_--)this.$lines.pop();d.firstRow<f.firstRow&&this.$lines.unshift(this.$renderLinesFragment(d,d.firstRow,f.firstRow-1)),d.lastRow>f.lastRow&&this.$lines.push(this.$renderLinesFragment(d,f.lastRow+1,d.lastRow)),this.$highlightIndentGuide()},l.prototype.$renderLinesFragment=function(d,f,o){for(var h=[],_=f,m=this.session.getNextFoldLine(_),y=m?m.start.row:1/0;_>y&&(_=m.end.row+1,m=this.session.getNextFoldLine(_,m),y=m?m.start.row:1/0),!(_>o);){var C=this.$lines.createCell(_,d,this.session),E=C.element;this.dom.removeChildren(E),v.setStyle(E.style,"height",this.$lines.computeLineHeight(_,d,this.session)+"px"),v.setStyle(E.style,"top",this.$lines.computeLineTop(_,d,this.session)+"px"),this.$renderLine(E,_,_==y?m:!1),this.$useLineGroups()?E.className="ace_line_group":E.className="ace_line",h.push(C),_++}return h},l.prototype.update=function(d){this.$lines.moveContainer(d),this.config=d;for(var f=d.firstRow,o=d.lastRow,h=this.$lines;h.getLength();)h.pop();h.push(this.$renderLinesFragment(d,f,o))},l.prototype.$renderToken=function(d,f,o,h){for(var _=this,m=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,E=0;C=m.exec(h);){var D=C[1],g=C[2],b=C[3],L=C[4],S=C[5];if(!(!_.showSpaces&&g)){var T=E!=C.index?h.slice(E,C.index):"";if(E=C.index+C[0].length,T&&y.appendChild(this.dom.createTextNode(T,this.element)),D){var M=_.session.getScreenTabSize(f+C.index);y.appendChild(_.$tabStrings[M].cloneNode(!0)),f+=M-1}else if(g)if(_.showSpaces){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space",w.textContent=s.stringRepeat(_.SPACE_CHAR,g.length),y.appendChild(w)}else y.appendChild(this.dom.createTextNode(g,this.element));else if(b){var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_space ace_invalid",w.textContent=s.stringRepeat(_.SPACE_CHAR,b.length),y.appendChild(w)}else if(L){f+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className=_.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",w.textContent=_.showSpaces?_.SPACE_CHAR:L,y.appendChild(w)}else if(S){f+=1;var w=this.dom.createElement("span");w.style.width=_.config.characterWidth*2+"px",w.className="ace_cjk",w.textContent=S,y.appendChild(w)}}}if(y.appendChild(this.dom.createTextNode(E?h.slice(E):h,this.element)),r(o.type))d.appendChild(y);else{var F="ace_"+o.type.replace(/\./g," ace_"),w=this.dom.createElement("span");o.type=="fold"&&(w.style.width=o.value.length*this.config.characterWidth+"px",w.setAttribute("title",u("Unfold code"))),w.className=F,w.appendChild(y),d.appendChild(w)}return f+h.length},l.prototype.renderIndentGuide=function(d,f,o){var h=f.search(this.$indentGuideRe);if(h<=0||h>=o)return f;if(f[0]==" "){h-=h%this.tabSize;for(var _=h/this.tabSize,m=0;m<_;m++)d.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}else if(f[0]=="	"){for(var m=0;m<h;m++)d.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),f.substr(h)}return this.$highlightIndentGuide(),f},l.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var d=this.session.doc.$lines;if(d){var f=this.session.selection.getCursor(),o=/^\s*/.exec(this.session.doc.getLine(f.row))[0].length,h=Math.floor(o/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:h,start:f.row};var _=this.session.$bracketHighlight;if(_){for(var m=this.session.$bracketHighlight.ranges,y=0;y<m.length;y++)if(f.row!==m[y].start.row){this.$highlightIndentGuideMarker.end=m[y].start.row,f.row>m[y].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&d[f.row]!==""&&f.column===d[f.row].length){this.$highlightIndentGuideMarker.dir=1;for(var y=f.row+1;y<d.length;y++){var C=d[y],E=/^\s*/.exec(C)[0].length;if(C!==""&&(this.$highlightIndentGuideMarker.end=y,E<=o))break}}this.$renderHighlightIndentGuide()}}},l.prototype.$clearActiveIndentGuide=function(){for(var d=this.$lines.cells,f=0;f<d.length;f++){var o=d[f],h=o.element.childNodes;if(h.length>0){for(var _=0;_<h.length;_++)if(h[_].classList&&h[_].classList.contains("ace_indent-guide-active")){h[_].classList.remove("ace_indent-guide-active");break}}}},l.prototype.$setIndentGuideActive=function(d,f){var o=this.session.doc.getLine(d.row);if(o!==""){var h=d.element.childNodes;if(h){var _=h[f-1];_&&_.classList&&_.classList.contains("ace_indent-guide")&&_.classList.add("ace_indent-guide-active")}}},l.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var d=this.$lines.cells;this.$clearActiveIndentGuide();var f=this.$highlightIndentGuideMarker.indentLevel;if(f!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var o=0;o<d.length;o++){var h=d[o];if(this.$highlightIndentGuideMarker.end&&h.row>=this.$highlightIndentGuideMarker.start+1){if(h.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}else for(var o=d.length-1;o>=0;o--){var h=d[o];if(this.$highlightIndentGuideMarker.end&&h.row<this.$highlightIndentGuideMarker.start){if(h.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(h,f)}}}},l.prototype.$createLineElement=function(d){var f=this.dom.createElement("div");return f.className="ace_line",f.style.height=this.config.lineHeight+"px",f},l.prototype.$renderWrappedLine=function(d,f,o){var h=0,_=0,m=o[0],y=0,C=this.$createLineElement();d.appendChild(C);for(var E=0;E<f.length;E++){var D=f[E],g=D.value;if(E==0&&this.displayIndentGuides){if(h=g.length,g=this.renderIndentGuide(C,g,m),!g)continue;h-=g.length}if(h+g.length<m)y=this.$renderToken(C,y,D,g),h+=g.length;else{for(;h+g.length>=m;)y=this.$renderToken(C,y,D,g.substring(0,m-h)),g=g.substring(m-h),h=m,C=this.$createLineElement(),d.appendChild(C),C.appendChild(this.dom.createTextNode(s.stringRepeat("\xA0",o.indent),this.element)),_++,y=0,m=o[_]||Number.MAX_VALUE;g.length!=0&&(h+=g.length,y=this.$renderToken(C,y,D,g))}}o[o.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},l.prototype.$renderSimpleLine=function(d,f){for(var o=0,h=0;h<f.length;h++){var _=f[h],m=_.value;if(!(h==0&&this.displayIndentGuides&&(m=this.renderIndentGuide(d,m),!m))){if(o+m.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(d,o,_,m);o=this.$renderToken(d,o,_,m)}}},l.prototype.$renderOverflowMessage=function(d,f,o,h,_){o&&this.$renderToken(d,f,o,h.slice(0,this.MAX_LINE_LENGTH-f));var m=this.dom.createElement("span");m.className="ace_inline_button ace_keyword ace_toggle_wrap",m.textContent=_?"<hide>":"<click to see more...>",d.appendChild(m)},l.prototype.$renderLine=function(d,f,o){if(!o&&o!=!1&&(o=this.session.getFoldLine(f)),o)var h=this.$getFoldLineTokens(f,o);else var h=this.session.getTokens(f);var _=d;if(h.length){var m=this.session.getRowSplitData(f);if(m&&m.length){this.$renderWrappedLine(d,h,m);var _=d.lastChild}else{var _=d;this.$useLineGroups()&&(_=this.$createLineElement(),d.appendChild(_)),this.$renderSimpleLine(_,h)}}else this.$useLineGroups()&&(_=this.$createLineElement(),d.appendChild(_));if(this.showEOL&&_){o&&(f=o.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=f==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,_.appendChild(y)}},l.prototype.$getFoldLineTokens=function(d,f){var o=this.session,h=[];function _(y,C,E){for(var D=0,g=0;g+y[D].value.length<C;)if(g+=y[D].value.length,D++,D==y.length)return;if(g!=C){var b=y[D].value.substring(C-g);b.length>E-C&&(b=b.substring(0,E-C)),h.push({type:y[D].type,value:b}),g=C+b.length,D+=1}for(;g<E&&D<y.length;){var b=y[D].value;b.length+g>E?h.push({type:y[D].type,value:b.substring(0,E-g)}):h.push(y[D]),g+=b.length,D+=1}}var m=o.getTokens(d);return f.walk(function(y,C,E,D,g){y!=null?h.push({type:"fold",value:y}):(g&&(m=o.getTokens(C)),m.length&&_(m,D,E))},f.end.row,this.session.getLine(f.end.row).length),h},l.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},l}();i.prototype.EOF_CHAR="\xB6",i.prototype.EOL_CHAR_LF="\xAC",i.prototype.EOL_CHAR_CRLF="\xA4",i.prototype.EOL_CHAR=i.prototype.EOL_CHAR_LF,i.prototype.TAB_CHAR="\u2014",i.prototype.SPACE_CHAR="\xB7",i.prototype.$padding=0,i.prototype.MAX_LINE_LENGTH=1e4,i.prototype.showInvisibles=!1,i.prototype.showSpaces=!1,i.prototype.showTabs=!1,i.prototype.showEOL=!1,i.prototype.displayIndentGuides=!0,i.prototype.$highlightIndentGuides=!0,i.prototype.$tabStrings=[],i.prototype.destroy={},i.prototype.onChangeTabSize=i.prototype.$computeTabString,c.implement(i.prototype,p),t.Text=i});ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=function(){function s(a){this.element=c.createElement("div"),this.element.className="ace_layer ace_cursor-layer",a.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),c.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return s.prototype.$updateOpacity=function(a){for(var p=this.cursors,u=p.length;u--;)c.setStyle(p[u].style,"opacity",a?"":"0")},s.prototype.$startCssAnimation=function(){for(var a=this.cursors,p=a.length;p--;)a[p].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout(function(){this.$isAnimating&&c.addCssClass(this.element,"ace_animate-blinking")}.bind(this))},s.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,c.removeCssClass(this.element,"ace_animate-blinking")},s.prototype.setPadding=function(a){this.$padding=a},s.prototype.setSession=function(a){this.session=a},s.prototype.setBlinking=function(a){a!=this.isBlinking&&(this.isBlinking=a,this.restartTimer())},s.prototype.setBlinkInterval=function(a){a!=this.blinkInterval&&(this.blinkInterval=a,this.restartTimer())},s.prototype.setSmoothBlinking=function(a){a!=this.smoothBlinking&&(this.smoothBlinking=a,c.setCssClass(this.element,"ace_smooth-blinking",a),this.$updateCursors(!0),this.restartTimer())},s.prototype.addCursor=function(){var a=c.createElement("div");return a.className="ace_cursor",this.element.appendChild(a),this.cursors.push(a),a},s.prototype.removeCursor=function(){if(this.cursors.length>1){var a=this.cursors.pop();return a.parentNode.removeChild(a),a}},s.prototype.hideCursor=function(){this.isVisible=!1,c.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.showCursor=function(){this.isVisible=!0,c.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},s.prototype.restartTimer=function(){var a=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,c.removeCssClass(this.element,"ace_smooth-blinking")),a(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout(function(){this.$isSmoothBlinking&&c.addCssClass(this.element,"ace_smooth-blinking")}.bind(this))),c.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var p=function(){this.timeoutId=setTimeout(function(){a(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){a(!0),p()},this.blinkInterval),p()}},s.prototype.getPixelPosition=function(a,p){if(!this.config||!this.session)return{left:0,top:0};a||(a=this.session.selection.getCursor());var u=this.session.documentToScreenPosition(a),r=this.$padding+(this.session.$bidiHandler.isBidiRow(u.row,a.row)?this.session.$bidiHandler.getPosLeft(u.column):u.column*this.config.characterWidth),i=(u.row-(p?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:r,top:i}},s.prototype.isCursorInView=function(a,p){return a.top>=0&&a.top<p.maxHeight},s.prototype.update=function(a){this.config=a;var p=this.session.$selectionMarkers,u=0,r=0;(p===void 0||p.length===0)&&(p=[{cursor:null}]);for(var u=0,i=p.length;u<i;u++){var l=this.getPixelPosition(p[u].cursor,!0);if(!((l.top>a.height+a.offset||l.top<0)&&u>1)){var d=this.cursors[r++]||this.addCursor(),f=d.style;this.drawCursor?this.drawCursor(d,l,a,p[u],this.session):this.isCursorInView(l,a)?(c.setStyle(f,"display","block"),c.translate(d,l.left,l.top),c.setStyle(f,"width",Math.round(a.characterWidth)+"px"),c.setStyle(f,"height",a.lineHeight+"px")):c.setStyle(f,"display","none")}}for(;this.cursors.length>r;)this.removeCursor();var o=this.session.getOverwrite();this.$setOverwrite(o),this.$pixelPos=l,this.restartTimer()},s.prototype.$setOverwrite=function(a){a!=this.overwrite&&(this.overwrite=a,a?c.addCssClass(this.element,"ace_overwrite-cursors"):c.removeCssClass(this.element,"ace_overwrite-cursors"))},s.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},s}();v.prototype.$padding=0,v.prototype.drawCursor=null,t.Cursor=v});ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var d=function(f,o){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,_){h.__proto__=_}||function(h,_){for(var m in _)Object.prototype.hasOwnProperty.call(_,m)&&(h[m]=_[m])},d(f,o)};return function(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");d(f,o);function h(){this.constructor=f}f.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter,u=32768,r=function(){function d(f,o){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+o,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="\xA0",this.element.appendChild(this.inner),f.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addListener(this.element,"scroll",this.onScroll.bind(this)),a.addListener(this.element,"mousedown",a.preventDefault)}return d.prototype.setVisible=function(f){this.element.style.display=f?"":"none",this.isVisible=f,this.coeff=1},d}();v.implement(r.prototype,p);var i=function(d){c(f,d);function f(o,h){var _=d.call(this,o,"-v")||this;return _.scrollTop=0,_.scrollHeight=0,h.$scrollbarWidth=_.width=s.scrollbarWidth(o.ownerDocument),_.inner.style.width=_.element.style.width=(_.width||15)+5+"px",_.$minWidth=0,_}return f.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var o=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-o)/(this.coeff-o)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},f.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},f.prototype.setHeight=function(o){this.element.style.height=o+"px"},f.prototype.setScrollHeight=function(o){this.scrollHeight=o,o>u?(this.coeff=u/o,o=u):this.coeff!=1&&(this.coeff=1),this.inner.style.height=o+"px"},f.prototype.setScrollTop=function(o){this.scrollTop!=o&&(this.skipEvent=!0,this.scrollTop=o,this.element.scrollTop=o*this.coeff)},f}(r);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var l=function(d){c(f,d);function f(o,h){var _=d.call(this,o,"-h")||this;return _.scrollLeft=0,_.height=h.$scrollbarWidth,_.inner.style.height=_.element.style.height=(_.height||15)+5+"px",_}return f.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},f.prototype.getHeight=function(){return this.isVisible?this.height:0},f.prototype.setWidth=function(o){this.element.style.width=o+"px"},f.prototype.setInnerWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollWidth=function(o){this.inner.style.width=o+"px"},f.prototype.setScrollLeft=function(o){this.scrollLeft!=o&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=o)},f}(r);t.ScrollBar=i,t.ScrollBarV=i,t.ScrollBarH=l,t.VScrollBar=i,t.HScrollBar=l});ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=this&&this.__extends||function(){var l=function(d,f){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,h){o.__proto__=h}||function(o,h){for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(o[_]=h[_])},l(d,f)};return function(d,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");l(d,f);function o(){this.constructor=d}d.prototype=f===null?Object.create(f):(o.prototype=f.prototype,new o)}}(),v=e("./lib/oop"),s=e("./lib/dom"),a=e("./lib/event"),p=e("./lib/event_emitter").EventEmitter;s.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var u=function(){function l(d,f){this.element=s.createElement("div"),this.element.className="ace_sb"+f,this.inner=s.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,d.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,a.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return l.prototype.setVisible=function(d){this.element.style.display=d?"":"none",this.isVisible=d,this.coeff=1},l}();v.implement(u.prototype,p);var r=function(l){c(d,l);function d(f,o){var h=l.call(this,f,"-v")||this;return h.scrollTop=0,h.scrollHeight=0,h.parent=f,h.width=h.VScrollWidth,h.renderer=o,h.inner.style.width=h.element.style.width=(h.width||15)+"px",h.$minWidth=0,h}return d.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientY,m=function(L){_=L.clientY},y=function(){clearInterval(g)},C=o.clientY,E=this.thumbTop,D=function(){if(_!==void 0){var L=h.scrollTopFromThumbTop(E+_-C);L!==h.scrollTop&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(b)}),a.preventDefault(o)}},d.prototype.getHeight=function(){return this.height},d.prototype.scrollTopFromThumbTop=function(f){var o=f*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return o=o>>0,o<0?o=0:o>this.pageHeight-this.viewHeight&&(o=this.pageHeight-this.viewHeight),o},d.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},d.prototype.setHeight=function(f){this.height=Math.max(0,f),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},d.prototype.setScrollHeight=function(f,o){this.pageHeight===f&&!o||(this.pageHeight=f,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},d.prototype.setScrollTop=function(f){this.scrollTop=f,f<0&&(f=0),this.thumbTop=f*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},d}(u);r.prototype.setInnerHeight=r.prototype.setScrollHeight;var i=function(l){c(d,l);function d(f,o){var h=l.call(this,f,"-h")||this;return h.scrollLeft=0,h.scrollWidth=0,h.height=h.HScrollHeight,h.inner.style.height=h.element.style.height=(h.height||12)+"px",h.renderer=o,h}return d.prototype.onMouseDown=function(f,o){if(f==="mousedown"&&!(a.getButton(o)!==0||o.detail===2)){if(o.target===this.inner){var h=this,_=o.clientX,m=function(L){_=L.clientX},y=function(){clearInterval(g)},C=o.clientX,E=this.thumbLeft,D=function(){if(_!==void 0){var L=h.scrollLeftFromThumbLeft(E+_-C);L!==h.scrollLeft&&h._emit("scroll",{data:L})}};a.capture(this.inner,m,y);var g=setInterval(D,20);return a.preventDefault(o)}var b=o.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(b)}),a.preventDefault(o)}},d.prototype.getHeight=function(){return this.isVisible?this.height:0},d.prototype.scrollLeftFromThumbLeft=function(f){var o=f*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return o=o>>0,o<0?o=0:o>this.pageWidth-this.viewWidth&&(o=this.pageWidth-this.viewWidth),o},d.prototype.setWidth=function(f){this.width=Math.max(0,f),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},d.prototype.setScrollWidth=function(f,o){this.pageWidth===f&&!o||(this.pageWidth=f,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},d.prototype.setScrollLeft=function(f){this.scrollLeft=f,f<0&&(f=0),this.thumbLeft=f*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},d}(u);i.prototype.setInnerWidth=i.prototype.setScrollWidth,t.ScrollBar=r,t.ScrollBarV=r,t.ScrollBarH=i,t.VScrollBar=r,t.HScrollBar=i});ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t,n){"use strict";var c=e("./lib/event"),v=function(){function s(a,p){this.onRender=a,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=p||window;var u=this;this._flush=function(r){u.pending=!1;var i=u.changes;if(i&&(c.blockIdle(100),u.changes=0,u.onRender(i)),u.changes){if(u.$recursionLimit--<0)return;u.schedule()}else u.$recursionLimit=2}}return s.prototype.schedule=function(a){this.changes=this.changes|a,this.changes&&!this.pending&&(c.nextFrame(this._flush),this.pending=!0)},s.prototype.clear=function(a){var p=this.changes;return this.changes=0,p},s}();t.RenderLoop=v});ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(e,t,n){var c=e("../lib/oop"),v=e("../lib/dom"),s=e("../lib/lang"),a=e("../lib/event"),p=e("../lib/useragent"),u=e("../lib/event_emitter").EventEmitter,r=512,i=typeof ResizeObserver=="function",l=200,d=function(){function f(o){this.el=v.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=v.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=v.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),o.appendChild(this.el),this.$measureNode.textContent=s.stringRepeat("X",r),this.$characterSize={width:0,height:0},i?this.$addObserver():this.checkForSizeChanges()}return f.prototype.$setMeasureNodeStyles=function(o,h){o.width=o.height="auto",o.left=o.top="0px",o.visibility="hidden",o.position="absolute",o.whiteSpace="pre",p.isIE<8?o["font-family"]="inherit":o.font="inherit",o.overflow=h?"hidden":"visible"},f.prototype.checkForSizeChanges=function(o){if(o===void 0&&(o=this.$measureSizes()),o&&(this.$characterSize.width!==o.width||this.$characterSize.height!==o.height)){this.$measureNode.style.fontWeight="bold";var h=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=o,this.charSizes=Object.create(null),this.allowBoldFonts=h&&h.width===o.width&&h.height===o.height,this._emit("changeCharacterSize",{data:o})}},f.prototype.$addObserver=function(){var o=this;this.$observer=new window.ResizeObserver(function(h){o.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},f.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var o=this;return this.$pollSizeChangesTimer=a.onIdle(function h(){o.checkForSizeChanges(),a.onIdle(h,500)},500)},f.prototype.setPolling=function(o){o?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},f.prototype.$measureSizes=function(o){var h={height:(o||this.$measureNode).clientHeight,width:(o||this.$measureNode).clientWidth/r};return h.width===0||h.height===0?null:h},f.prototype.$measureCharWidth=function(o){this.$main.textContent=s.stringRepeat(o,r);var h=this.$main.getBoundingClientRect();return h.width/r},f.prototype.getCharacterWidth=function(o){var h=this.charSizes[o];return h===void 0&&(h=this.charSizes[o]=this.$measureCharWidth(o)/this.$characterSize.width),h},f.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},f.prototype.$getZoom=function(o){return!o||!o.parentElement?1:(window.getComputedStyle(o).zoom||1)*this.$getZoom(o.parentElement)},f.prototype.$initTransformMeasureNodes=function(){var o=function(h,_){return["div",{style:"position: absolute;top:"+h+"px;left:"+_+"px;"}]};this.els=v.buildDom([o(0,0),o(l,0),o(0,l),o(l,l)],this.el)},f.prototype.transformCoordinates=function(o,h){if(o){var _=this.$getZoom(this.el);o=E(1/_,o)}function m($,k,H){var U=$[1]*k[0]-$[0]*k[1];return[(-k[1]*H[0]+k[0]*H[1])/U,(+$[1]*H[0]-$[0]*H[1])/U]}function y($,k){return[$[0]-k[0],$[1]-k[1]]}function C($,k){return[$[0]+k[0],$[1]+k[1]]}function E($,k){return[$*k[0],$*k[1]]}this.els||this.$initTransformMeasureNodes();function D($){var k=$.getBoundingClientRect();return[k.left,k.top]}var g=D(this.els[0]),b=D(this.els[1]),L=D(this.els[2]),S=D(this.els[3]),T=m(y(S,b),y(S,L),y(C(b,L),C(S,g))),M=E(1+T[0],y(b,g)),w=E(1+T[1],y(L,g));if(h){var F=h,x=T[0]*F[0]/l+T[1]*F[1]/l+1,R=C(E(F[0],M),E(F[1],w));return C(E(1/x/l,R),g)}var A=y(o,g),I=m(y(M,E(T[0],A)),y(w,E(T[1],A)),A);return E(l,I)},f}();d.prototype.$characterSize={width:0,height:0},c.implement(d.prototype,u),t.FontMetrics=d});ace.define("ace/css/editor-css",["require","exports","module"],function(e,t,n){n.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}
.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
    white-space: pre;
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}`});ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(e,t,n){"use strict";var c=e("../lib/dom"),v=e("../lib/oop"),s=e("../lib/event_emitter").EventEmitter,a=function(){function p(u,r){this.canvas=c.createElement("canvas"),this.renderer=r,this.pixelRatio=1,this.maxHeight=r.layerConfig.maxHeight,this.lineHeight=r.layerConfig.lineHeight,this.canvasHeight=u.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=u.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},u.element.appendChild(this.canvas)}return p.prototype.$updateDecorators=function(u){var r=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(u){this.maxHeight=u.maxHeight,this.lineHeight=u.lineHeight,this.canvasHeight=u.height;var i=(u.lastRow+1)*this.lineHeight;i<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var l=this.canvas.getContext("2d");function d(S,T){return S.priority<T.priority?-1:S.priority>T.priority?1:0}var f=this.renderer.session.$annotations;if(l.clearRect(0,0,this.canvas.width,this.canvas.height),f){var o={info:1,warning:2,error:3};f.forEach(function(S){S.priority=o[S.type]||null}),f=f.sort(d);for(var h=this.renderer.session.$foldData,_=0;_<f.length;_++){var m=f[_].row,y=this.compensateFoldRows(m,h),C=Math.round((m-y)*this.lineHeight*this.heightRatio),E=Math.round((m-y)*this.lineHeight*this.heightRatio),D=Math.round(((m-y)*this.lineHeight+this.lineHeight)*this.heightRatio),g=D-E;if(g<this.minDecorationHeight){var b=(E+D)/2|0;b<this.halfMinDecorationHeight?b=this.halfMinDecorationHeight:b+this.halfMinDecorationHeight>this.canvasHeight&&(b=this.canvasHeight-this.halfMinDecorationHeight),E=Math.round(b-this.halfMinDecorationHeight),D=Math.round(b+this.halfMinDecorationHeight)}l.fillStyle=r[f[_].type]||null,l.fillRect(0,C,this.canvasWidth,D-E)}}var L=this.renderer.session.selection.getCursor();if(L){var y=this.compensateFoldRows(L.row,h),C=Math.round((L.row-y)*this.lineHeight*this.heightRatio);l.fillStyle="rgba(0, 0, 0, 0.5)",l.fillRect(0,C,this.canvasWidth,2)}},p.prototype.compensateFoldRows=function(u,r){var i=0;if(r&&r.length>0)for(var l=0;l<r.length;l++)u>r[l].start.row&&u<r[l].end.row?i+=u-r[l].start.row:u>=r[l].end.row&&(i+=r[l].end.row-r[l].start.row);return i},p}();v.implement(a.prototype,s),t.Decorator=a});ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent"],function(e,t,n){"use strict";var c=e("./lib/oop"),v=e("./lib/dom"),s=e("./lib/lang"),a=e("./config"),p=e("./layer/gutter").Gutter,u=e("./layer/marker").Marker,r=e("./layer/text").Text,i=e("./layer/cursor").Cursor,l=e("./scrollbar").HScrollBar,d=e("./scrollbar").VScrollBar,f=e("./scrollbar_custom").HScrollBar,o=e("./scrollbar_custom").VScrollBar,h=e("./renderloop").RenderLoop,_=e("./layer/font_metrics").FontMetrics,m=e("./lib/event_emitter").EventEmitter,y=e("./css/editor-css"),C=e("./layer/decorators").Decorator,E=e("./lib/useragent");v.importCssString(y,"ace_editor.css",!1);var D=function(){function g(b,L){var S=this;this.container=b||v.createElement("div"),v.addCssClass(this.container,"ace_editor"),v.HI_DPI&&v.addCssClass(this.container,"ace_hidpi"),this.setTheme(L),a.get("useStrictCSP")==null&&a.set("useStrictCSP",!1),this.$gutter=v.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=v.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=v.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new p(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new u(this.content);var T=this.$textLayer=new r(this.content);this.canvas=T.element,this.$markerFront=new u(this.content),this.$cursorLayer=new i(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new d(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.on("scroll",function(M){S.$scrollAnimation||S.session.setScrollTop(M.data-S.scrollMargin.top)}),this.scrollBarH.on("scroll",function(M){S.$scrollAnimation||S.session.setScrollLeft(M.data-S.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new _(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(M){S.updateCharacterSize(),S.onResize(!0,S.gutterWidth,S.$size.width,S.$size.height),S._signal("changeCharacterSize",M)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!E.isIOS,this.$loop=new h(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),a.resetOptions(this),a._signal("renderer",this)}return g.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),v.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},g.prototype.setSession=function(b){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=b,b&&this.scrollMargin.top&&b.getScrollTop()<=0&&b.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(b),this.$markerBack.setSession(b),this.$markerFront.setSession(b),this.$gutterLayer.setSession(b),this.$textLayer.setSession(b),b&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},g.prototype.updateLines=function(b,L,S){if(L===void 0&&(L=1/0),this.$changedLines?(this.$changedLines.firstRow>b&&(this.$changedLines.firstRow=b),this.$changedLines.lastRow<L&&(this.$changedLines.lastRow=L)):this.$changedLines={firstRow:b,lastRow:L},this.$changedLines.lastRow<this.layerConfig.firstRow)if(S)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},g.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},g.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},g.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},g.prototype.updateFull=function(b){b?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},g.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},g.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},g.prototype.onResize=function(b,L,S,T){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=b?1:0;var M=this.container;T||(T=M.clientHeight||M.scrollHeight),S||(S=M.clientWidth||M.scrollWidth);var w=this.$updateCachedSize(b,L,S,T);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!S&&!T)return this.resizing=0;b&&(this.$gutterLayer.$padding=null),b?this.$renderChanges(w|this.$changes,!0):this.$loop.schedule(w|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},g.prototype.$updateCachedSize=function(b,L,S,T){T-=this.$extraHeight||0;var M=0,w=this.$size,F={width:w.width,height:w.height,scrollerHeight:w.scrollerHeight,scrollerWidth:w.scrollerWidth};if(T&&(b||w.height!=T)&&(w.height=T,M|=this.CHANGE_SIZE,w.scrollerHeight=w.height,this.$horizScroll&&(w.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(w.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",M=M|this.CHANGE_SCROLL),S&&(b||w.width!=S)){M|=this.CHANGE_SIZE,w.width=S,L==null&&(L=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=L,v.setStyle(this.scrollBarH.element.style,"left",L+"px"),v.setStyle(this.scroller.style,"left",L+this.margin.left+"px"),w.scrollerWidth=Math.max(0,S-L-this.scrollBarV.getWidth()-this.margin.h),v.setStyle(this.$gutter.style,"left",this.margin.left+"px");var x=this.scrollBarV.getWidth()+"px";v.setStyle(this.scrollBarH.element.style,"right",x),v.setStyle(this.scroller.style,"right",x),v.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(w.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||b)&&(M|=this.CHANGE_FULL)}return w.$dirty=!S||!T,M&&this._signal("resize",F),M},g.prototype.onGutterResize=function(b){var L=this.$showGutter?b:0;L!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,L,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},g.prototype.adjustWrapLimit=function(){var b=this.$size.scrollerWidth-this.$padding*2,L=Math.floor(b/this.characterWidth);return this.session.adjustWrapLimit(L,this.$showPrintMargin&&this.$printMarginColumn)},g.prototype.setAnimatedScroll=function(b){this.setOption("animatedScroll",b)},g.prototype.getAnimatedScroll=function(){return this.$animatedScroll},g.prototype.setShowInvisibles=function(b){this.setOption("showInvisibles",b),this.session.$bidiHandler.setShowInvisibles(b)},g.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},g.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},g.prototype.setDisplayIndentGuides=function(b){this.setOption("displayIndentGuides",b)},g.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},g.prototype.setHighlightIndentGuides=function(b){this.setOption("highlightIndentGuides",b)},g.prototype.setShowPrintMargin=function(b){this.setOption("showPrintMargin",b)},g.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},g.prototype.setPrintMarginColumn=function(b){this.setOption("printMarginColumn",b)},g.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},g.prototype.getShowGutter=function(){return this.getOption("showGutter")},g.prototype.setShowGutter=function(b){return this.setOption("showGutter",b)},g.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},g.prototype.setFadeFoldWidgets=function(b){this.setOption("fadeFoldWidgets",b)},g.prototype.setHighlightGutterLine=function(b){this.setOption("highlightGutterLine",b)},g.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},g.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var b=v.createElement("div");b.className="ace_layer ace_print-margin-layer",this.$printMarginEl=v.createElement("div"),this.$printMarginEl.className="ace_print-margin",b.appendChild(this.$printMarginEl),this.content.insertBefore(b,this.content.firstChild)}var L=this.$printMarginEl.style;L.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",L.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},g.prototype.getContainerElement=function(){return this.container},g.prototype.getMouseEventTarget=function(){return this.scroller},g.prototype.getTextAreaContainer=function(){return this.container},g.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var b=this.textarea.style,L=this.$composition;if(!this.$keepTextAreaAtCursor&&!L){v.translate(this.textarea,-100,0);return}var S=this.$cursorLayer.$pixelPos;if(S){L&&L.markerRange&&(S=this.$cursorLayer.getPixelPosition(L.markerRange.start,!0));var T=this.layerConfig,M=S.top,w=S.left;M-=T.offset;var F=L&&L.useTextareaForIME||E.isMobile?this.lineHeight:1;if(M<0||M>T.height-F){v.translate(this.textarea,0,0);return}var x=1,R=this.$size.height-F;if(!L)M+=this.lineHeight;else if(L.useTextareaForIME){var A=this.textarea.value;x=this.characterWidth*this.session.$getStringScreenWidth(A)[0]}else M+=this.lineHeight+2;w-=this.scrollLeft,w>this.$size.scrollerWidth-x&&(w=this.$size.scrollerWidth-x),w+=this.gutterWidth+this.margin.left,v.setStyle(b,"height",F+"px"),v.setStyle(b,"width",x+"px"),v.translate(this.textarea,Math.min(w,this.$size.scrollerWidth-x),Math.min(M,R))}}},g.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},g.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},g.prototype.getLastFullyVisibleRow=function(){var b=this.layerConfig,L=b.lastRow,S=this.session.documentToScreenRow(L,0)*b.lineHeight;return S-this.session.getScrollTop()>b.height-b.lineHeight?L-1:L},g.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},g.prototype.setPadding=function(b){this.$padding=b,this.$textLayer.setPadding(b),this.$cursorLayer.setPadding(b),this.$markerFront.setPadding(b),this.$markerBack.setPadding(b),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},g.prototype.setScrollMargin=function(b,L,S,T){var M=this.scrollMargin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=S|0,M.v=M.top+M.bottom,M.h=M.left+M.right,M.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-M.top),this.updateFull()},g.prototype.setMargin=function(b,L,S,T){var M=this.margin;M.top=b|0,M.bottom=L|0,M.right=T|0,M.left=S|0,M.v=M.top+M.bottom,M.h=M.left+M.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},g.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},g.prototype.setHScrollBarAlwaysVisible=function(b){this.setOption("hScrollBarAlwaysVisible",b)},g.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},g.prototype.setVScrollBarAlwaysVisible=function(b){this.setOption("vScrollBarAlwaysVisible",b)},g.prototype.$updateScrollBarV=function(){var b=this.layerConfig.maxHeight,L=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(b-=(L-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>b-L&&(b=this.scrollTop+L,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(b+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},g.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},g.prototype.freeze=function(){this.$frozen=!0},g.prototype.unfreeze=function(){this.$frozen=!1},g.prototype.$renderChanges=function(b,L){if(this.$changes&&(b|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!b&&!L){this.$changes|=b;return}if(this.$size.$dirty)return this.$changes|=b,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",b),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var S=this.layerConfig;if(b&this.CHANGE_FULL||b&this.CHANGE_SIZE||b&this.CHANGE_TEXT||b&this.CHANGE_LINES||b&this.CHANGE_SCROLL||b&this.CHANGE_H_SCROLL){if(b|=this.$computeLayerConfig()|this.$loop.clear(),S.firstRow!=this.layerConfig.firstRow&&S.firstRowScreen==this.layerConfig.firstRowScreen){var T=this.scrollTop+(S.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;T>0&&(this.scrollTop=T,b=b|this.CHANGE_SCROLL,b|=this.$computeLayerConfig()|this.$loop.clear())}S=this.layerConfig,this.$updateScrollBarV(),b&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),v.translate(this.content,-this.scrollLeft,-S.offset);var M=S.width+2*this.$padding+"px",w=S.minHeight+"px";v.setStyle(this.content.style,"width",M),v.setStyle(this.content.style,"height",w)}if(b&this.CHANGE_H_SCROLL&&(v.translate(this.content,-this.scrollLeft,-S.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),b&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}if(b&this.CHANGE_SCROLL){this.$changedLines=null,b&this.CHANGE_TEXT||b&this.CHANGE_LINES?this.$textLayer.update(S):this.$textLayer.scrollLines(S),this.$showGutter&&(b&this.CHANGE_GUTTER||b&this.CHANGE_LINES?this.$gutterLayer.update(S):this.$gutterLayer.scrollLines(S)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S),this.$markerBack.update(S),this.$markerFront.update(S),this.$cursorLayer.update(S),this.$moveTextAreaToCursor(),this._signal("afterRender",b);return}b&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(S),this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_LINES?((this.$updateLines()||b&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_TEXT||b&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)):b&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(S),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(S)),b&this.CHANGE_CURSOR&&(this.$cursorLayer.update(S),this.$moveTextAreaToCursor()),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(S),b&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(S),this._signal("afterRender",b)},g.prototype.$autosize=function(){var b=this.session.getScreenLength()*this.lineHeight,L=this.$maxLines*this.lineHeight,S=Math.min(L,Math.max((this.$minLines||1)*this.lineHeight,b))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(S+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&S>this.$maxPixelHeight&&(S=this.$maxPixelHeight);var T=S<=2*this.lineHeight,M=!T&&b>L;if(S!=this.desiredHeight||this.$size.height!=this.desiredHeight||M!=this.$vScroll){M!=this.$vScroll&&(this.$vScroll=M,this.scrollBarV.setVisible(M));var w=this.container.clientWidth;this.container.style.height=S+"px",this.$updateCachedSize(!0,this.$gutterWidth,w,S),this.desiredHeight=S,this._signal("autosize")}},g.prototype.$computeLayerConfig=function(){var b=this.session,L=this.$size,S=L.height<=2*this.lineHeight,T=this.session.getScreenLength(),M=T*this.lineHeight,w=this.$getLongestLine(),F=!S&&(this.$hScrollBarAlwaysVisible||L.scrollerWidth-w-2*this.$padding<0),x=this.$horizScroll!==F;x&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var R=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var A=L.scrollerHeight+this.lineHeight,I=!this.$maxLines&&this.$scrollPastEnd?(L.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;M+=I;var $=this.scrollMargin;this.session.setScrollTop(Math.max(-$.top,Math.min(this.scrollTop,M-L.scrollerHeight+$.bottom))),this.session.setScrollLeft(Math.max(-$.left,Math.min(this.scrollLeft,w+2*this.$padding-L.scrollerWidth+$.right)));var k=!S&&(this.$vScrollBarAlwaysVisible||L.scrollerHeight-M+I<0||this.scrollTop>$.top),H=R!==k;H&&(this.$vScroll=k,this.scrollBarV.setVisible(k));var U=this.scrollTop%this.lineHeight,q=Math.ceil(A/this.lineHeight)-1,N=Math.max(0,Math.round((this.scrollTop-U)/this.lineHeight)),K=N+q,O,B,W=this.lineHeight;N=b.screenToDocumentRow(N,0);var P=b.getFoldLine(N);P&&(N=P.start.row),O=b.documentToScreenRow(N,0),B=b.getRowLength(N)*W,K=Math.min(b.screenToDocumentRow(K,0),b.getLength()-1),A=L.scrollerHeight+b.getRowLength(K)*W+B,U=this.scrollTop-O*W;var X=0;return(this.layerConfig.width!=w||x)&&(X=this.CHANGE_H_SCROLL),(x||H)&&(X|=this.$updateCachedSize(!0,this.gutterWidth,L.width,L.height),this._signal("scrollbarVisibilityChanged"),H&&(w=this.$getLongestLine())),this.layerConfig={width:w,padding:this.$padding,firstRow:N,firstRowScreen:O,lastRow:K,lineHeight:W,characterWidth:this.characterWidth,minHeight:A,maxHeight:M,offset:U,gutterOffset:W?Math.max(0,Math.ceil((U+L.height-L.scrollerHeight)/W)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(w-this.$padding),X},g.prototype.$updateLines=function(){if(this.$changedLines){var b=this.$changedLines.firstRow,L=this.$changedLines.lastRow;this.$changedLines=null;var S=this.layerConfig;if(!(b>S.lastRow+1)&&!(L<S.firstRow)){if(L===1/0){this.$showGutter&&this.$gutterLayer.update(S),this.$textLayer.update(S);return}return this.$textLayer.updateLines(S,b,L),!0}}},g.prototype.$getLongestLine=function(){var b=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(b+=1),this.$textLayer&&b>this.$textLayer.MAX_LINE_LENGTH&&(b=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(b*this.characterWidth))},g.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},g.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},g.prototype.addGutterDecoration=function(b,L){this.$gutterLayer.addGutterDecoration(b,L)},g.prototype.removeGutterDecoration=function(b,L){this.$gutterLayer.removeGutterDecoration(b,L)},g.prototype.updateBreakpoints=function(b){this._rows=b,this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.setAnnotations=function(b){this.$gutterLayer.setAnnotations(b),this.$loop.schedule(this.CHANGE_GUTTER)},g.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},g.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},g.prototype.showCursor=function(){this.$cursorLayer.showCursor()},g.prototype.scrollSelectionIntoView=function(b,L,S){this.scrollCursorIntoView(b,S),this.scrollCursorIntoView(L,S)},g.prototype.scrollCursorIntoView=function(b,L,S){if(this.$size.scrollerHeight!==0){var T=this.$cursorLayer.getPixelPosition(b),M=T.left,w=T.top,F=S&&S.top||0,x=S&&S.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var R=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;R+F>w?(L&&R+F>w+this.lineHeight&&(w-=L*this.$size.scrollerHeight),w===0&&(w=-this.scrollMargin.top),this.session.setScrollTop(w)):R+this.$size.scrollerHeight-x<w+this.lineHeight&&(L&&R+this.$size.scrollerHeight-x<w-this.lineHeight&&(w+=L*this.$size.scrollerHeight),this.session.setScrollTop(w+this.lineHeight+x-this.$size.scrollerHeight));var A=this.scrollLeft,I=2*this.layerConfig.characterWidth;M-I<A?(M-=I,M<this.$padding+I&&(M=-this.scrollMargin.left),this.session.setScrollLeft(M)):(M+=I,A+this.$size.scrollerWidth<M+this.characterWidth?this.session.setScrollLeft(Math.round(M+this.characterWidth-this.$size.scrollerWidth)):A<=this.$padding&&M-A<this.characterWidth&&this.session.setScrollLeft(0))}},g.prototype.getScrollTop=function(){return this.session.getScrollTop()},g.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},g.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},g.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},g.prototype.scrollToRow=function(b){this.session.setScrollTop(b*this.lineHeight)},g.prototype.alignCursor=function(b,L){typeof b=="number"&&(b={row:b,column:0});var S=this.$cursorLayer.getPixelPosition(b),T=this.$size.scrollerHeight-this.lineHeight,M=S.top-T*(L||0);return this.session.setScrollTop(M),M},g.prototype.$calcSteps=function(b,L){var S=0,T=this.STEPS,M=[],w=function(F,x,R){return R*(Math.pow(F-1,3)+1)+x};for(S=0;S<T;++S)M.push(w(S/this.STEPS,b,L-b));return M},g.prototype.scrollToLine=function(b,L,S,T){var M=this.$cursorLayer.getPixelPosition({row:b,column:0}),w=M.top;L&&(w-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(w),S!==!1&&this.animateScrolling(F,T)},g.prototype.animateScrolling=function(b,L){var S=this.scrollTop;if(!this.$animatedScroll)return;var T=this;if(b==S)return;if(this.$scrollAnimation){var M=this.$scrollAnimation.steps;if(M.length&&(b=M[0],b==S))return}var w=T.$calcSteps(b,S);this.$scrollAnimation={from:b,to:S,steps:w},clearInterval(this.$timer),T.session.setScrollTop(w.shift()),T.session.$scrollTop=S;function F(){T.$timer=clearInterval(T.$timer),T.$scrollAnimation=null,T.$stopAnimation=!1,L&&L()}this.$timer=setInterval(function(){if(T.$stopAnimation){F();return}if(!T.session)return clearInterval(T.$timer);w.length?(T.session.setScrollTop(w.shift()),T.session.$scrollTop=S):S!=null?(T.session.$scrollTop=-1,T.session.setScrollTop(S),S=null):F()},10)},g.prototype.scrollToY=function(b){this.scrollTop!==b&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=b)},g.prototype.scrollToX=function(b){this.scrollLeft!==b&&(this.scrollLeft=b),this.$loop.schedule(this.CHANGE_H_SCROLL)},g.prototype.scrollTo=function(b,L){this.session.setScrollTop(L),this.session.setScrollLeft(b)},g.prototype.scrollBy=function(b,L){L&&this.session.setScrollTop(this.session.getScrollTop()+L),b&&this.session.setScrollLeft(this.session.getScrollLeft()+b)},g.prototype.isScrollableBy=function(b,L){if(L<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||L>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||b<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||b>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},g.prototype.pixelToScreenCoordinates=function(b,L){var S;if(this.$hasCssTransforms){S={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else S=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-S.left-this.$padding,w=M/this.characterWidth,F=Math.floor((L+this.scrollTop-S.top)/this.lineHeight),x=this.$blockCursor?Math.floor(w):Math.round(w);return{row:F,column:x,side:w-x>0?1:-1,offsetX:M}},g.prototype.screenToTextCoordinates=function(b,L){var S;if(this.$hasCssTransforms){S={top:0,left:0};var T=this.$fontMetrics.transformCoordinates([b,L]);b=T[1]-this.gutterWidth-this.margin.left,L=T[0]}else S=this.scroller.getBoundingClientRect();var M=b+this.scrollLeft-S.left-this.$padding,w=M/this.characterWidth,F=this.$blockCursor?Math.floor(w):Math.round(w),x=Math.floor((L+this.scrollTop-S.top)/this.lineHeight);return this.session.screenToDocumentPosition(x,Math.max(F,0),M)},g.prototype.textToScreenCoordinates=function(b,L){var S=this.scroller.getBoundingClientRect(),T=this.session.documentToScreenPosition(b,L),M=this.$padding+(this.session.$bidiHandler.isBidiRow(T.row,b)?this.session.$bidiHandler.getPosLeft(T.column):Math.round(T.column*this.characterWidth)),w=T.row*this.lineHeight;return{pageX:S.left+M-this.scrollLeft,pageY:S.top+w-this.scrollTop}},g.prototype.visualizeFocus=function(){v.addCssClass(this.container,"ace_focus")},g.prototype.visualizeBlur=function(){v.removeCssClass(this.container,"ace_focus")},g.prototype.showComposition=function(b){this.$composition=b,b.cssText||(b.cssText=this.textarea.style.cssText),b.useTextareaForIME==null&&(b.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(v.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):b.markerId=this.session.addMarker(b.markerRange,"ace_composition_marker","text")},g.prototype.setCompositionText=function(b){var L=this.session.selection.cursor;this.addToken(b,"composition_placeholder",L.row,L.column),this.$moveTextAreaToCursor()},g.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),v.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var b=this.session.selection.cursor;this.removeExtraToken(b.row,b.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},g.prototype.setGhostText=function(b,L){var S=this.session.selection.cursor,T=L||{row:S.row,column:S.column};this.removeGhostText();var M=b.split(`
`);if(this.addToken(M[0],"ghost_text",T.row,T.column),this.$ghostText={text:b,position:{row:T.row,column:T.column}},M.length>1){this.$ghostTextWidget={text:M.slice(1).join(`
`),row:T.row,column:T.column,className:"ace_ghost_text"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var w=this.$cursorLayer.getPixelPosition(T,!0),F=this.container,x=F.getBoundingClientRect().height,R=M.length*this.lineHeight,A=R<x-w.top;if(A)return;R<x?this.scrollBy(0,(M.length-1)*this.lineHeight):this.scrollBy(0,w.top)}},g.prototype.removeGhostText=function(){if(this.$ghostText){var b=this.$ghostText.position;this.removeExtraToken(b.row,b.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},g.prototype.addToken=function(b,L,S,T){var M=this.session;M.bgTokenizer.lines[S]=null;var w={type:L,value:b},F=M.getTokens(S);if(T==null||!F.length)F.push(w);else for(var x=0,R=0;R<F.length;R++){var A=F[R];if(x+=A.value.length,T<=x){var I=A.value.length-(x-T),$=A.value.slice(0,I),k=A.value.slice(I);F.splice(R,1,{type:A.type,value:$},w,{type:A.type,value:k});break}}this.updateLines(S,S)},g.prototype.removeExtraToken=function(b,L){this.session.bgTokenizer.lines[b]=null,this.updateLines(b,b)},g.prototype.setTheme=function(b,L){var S=this;if(this.$themeId=b,S._dispatchEvent("themeChange",{theme:b}),!b||typeof b=="string"){var T=b||this.$options.theme.initialValue;a.loadModule(["theme",T],M)}else M(b);function M(w){if(S.$themeId!=b)return L&&L();if(!w||!w.cssClass)throw new Error("couldn't load module "+b+" or it didn't call define");w.$id&&(S.$themeId=w.$id),v.importCssString(w.cssText,w.cssClass,S.container),S.theme&&v.removeCssClass(S.container,S.theme.cssClass);var F="padding"in w?w.padding:"padding"in(S.theme||{})?4:S.$padding;S.$padding&&F!=S.$padding&&S.setPadding(F),S.$theme=w.cssClass,S.theme=w,v.addCssClass(S.container,w.cssClass),v.setCssClass(S.container,"ace_dark",w.isDark),S.$size&&(S.$size.width=0,S.$updateSizeAsync()),S._dispatchEvent("themeLoaded",{theme:w}),L&&L()}},g.prototype.getTheme=function(){return this.$themeId},g.prototype.setStyle=function(b,L){v.setCssClass(this.container,b,L!==!1)},g.prototype.unsetStyle=function(b){v.removeCssClass(this.container,b)},g.prototype.setCursorStyle=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.setMouseCursor=function(b){v.setStyle(this.scroller.style,"cursor",b)},g.prototype.attachToShadowRoot=function(){v.importCssString(y,"ace_editor.css",this.container)},g.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},g.prototype.$updateCustomScrollbar=function(b){var L=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,b===!0?(this.scrollBarV=new o(this.container,this),this.scrollBarH=new f(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollTop(S.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollLeft(S.data-L.scrollMargin.left)}),this.$scrollDecorator=new C(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new d(this.container,this),this.scrollBarH=new l(this.container,this),this.scrollBarV.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollTop(S.data-L.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(S){L.$scrollAnimation||L.session.setScrollLeft(S.data-L.scrollMargin.left)}))},g.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var b=this;this.$resizeTimer=s.delayedCall(function(){b.destroyed||b.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(L){var S=L[0].contentRect.width,T=L[0].contentRect.height;Math.abs(b.$size.width-S)>1||Math.abs(b.$size.height-T)>1?b.$resizeTimer.delay():b.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},g}();D.prototype.CHANGE_CURSOR=1,D.prototype.CHANGE_MARKER=2,D.prototype.CHANGE_GUTTER=4,D.prototype.CHANGE_SCROLL=8,D.prototype.CHANGE_LINES=16,D.prototype.CHANGE_TEXT=32,D.prototype.CHANGE_SIZE=64,D.prototype.CHANGE_MARKER_BACK=128,D.prototype.CHANGE_MARKER_FRONT=256,D.prototype.CHANGE_FULL=512,D.prototype.CHANGE_H_SCROLL=1024,D.prototype.$changes=0,D.prototype.$padding=null,D.prototype.$frozen=!1,D.prototype.STEPS=8,c.implement(D.prototype,m),a.defineOptions(D.prototype,"renderer",{useResizeObserver:{set:function(g){!g&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):g&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(g){this.$textLayer.setShowInvisibles(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(g){typeof g=="number"&&(this.$printMarginColumn=g),this.$showPrintMargin=!!g,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(g){this.$gutter.style.display=g?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(g){this.$gutterLayer.$useSvgGutterIcons=g},initialValue:!1},showFoldedAnnotations:{set:function(g){this.$gutterLayer.$showFoldedAnnotations=g},initialValue:!1},fadeFoldWidgets:{set:function(g){v.setCssClass(this.$gutter,"ace_fade-fold-widgets",g)},initialValue:!1},showFoldWidgets:{set:function(g){this.$gutterLayer.setShowFoldWidgets(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(g){this.$textLayer.setDisplayIndentGuides(g)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(g){this.$textLayer.setHighlightIndentGuides(g)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(g){this.$gutterLayer.setHighlightGutterLine(g),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(g){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(g){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(g){typeof g=="number"&&(g=g+"px"),this.container.style.fontSize=g,this.updateFontSize()},initialValue:12},fontFamily:{set:function(g){this.container.style.fontFamily=g,this.updateFontSize()}},maxLines:{set:function(g){this.updateFull()}},minLines:{set:function(g){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(g){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(g){g=+g||0,this.$scrollPastEnd!=g&&(this.$scrollPastEnd=g,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(g){this.$gutterLayer.$fixedWidth=!!g,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(g){this.$updateCustomScrollbar(g)},initialValue:!1},theme:{set:function(g){this.setTheme(g)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!E.isMobile&&!E.isIE}}),t.VirtualRenderer=D});ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t,n){"use strict";var c=e("../lib/oop"),v=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,a=e("../config");function p(l){var d="importScripts('"+v.qualifyURL(l)+"');";try{return new Blob([d],{type:"application/javascript"})}catch{var f=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,o=new f;return o.append(d),o.getBlob("application/javascript")}}function u(l){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(a.get("loadWorkerFromBlob")){var d=p(l),f=window.URL||window.webkitURL,o=f.createObjectURL(d);return new Worker(o)}return new Worker(l)}var r=function(l){l.postMessage||(l=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=l,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){c.implement(this,s),this.$createWorkerFromOldConfig=function(l,d,f,o,h){if(e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),a.get("packaged")||!e.toUrl)o=o||a.moduleUrl(d,"worker");else{var _=this.$normalizePath;o=o||_(e.toUrl("ace/worker/worker.js",null,"_"));var m={};l.forEach(function(y){m[y]=_(e.toUrl(y,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=u(o),h&&this.send("importScripts",h),this.$worker.postMessage({init:!0,tlns:m,module:d,classname:f}),this.$worker},this.onMessage=function(l){var d=l.data;switch(d.type){case"event":this._signal(d.name,{data:d.data});break;case"call":var f=this.callbacks[d.id];f&&(f(d.data),delete this.callbacks[d.id]);break;case"error":this.reportError(d.data);break;case"log":window.console&&console.log&&console.log.apply(console,d.data);break}},this.reportError=function(l){window.console&&console.error&&console.error(l)},this.$normalizePath=function(l){return v.qualifyURL(l)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(l){l.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(l,d){this.$worker.postMessage({command:l,args:d})},this.call=function(l,d,f){if(f){var o=this.callbackId++;this.callbacks[o]=f,d.push(o)}this.send(l,d)},this.emit=function(l,d){try{d.data&&d.data.err&&(d.data.err={message:d.data.err.message,stack:d.data.err.stack,code:d.data.err.code}),this.$worker&&this.$worker.postMessage({event:l,data:{data:d.data}})}catch(f){console.error(f.stack)}},this.attachToDocument=function(l){this.$doc&&this.terminate(),this.$doc=l,this.call("setValue",[l.getValue()]),l.on("change",this.changeListener,!0)},this.changeListener=function(l){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),l.action=="insert"?this.deltaQueue.push(l.start,l.lines):this.deltaQueue.push(l.start,l.end)},this.$sendDeltaQueue=function(){var l=this.deltaQueue;l&&(this.deltaQueue=null,l.length>50&&l.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:l}))}}).call(r.prototype);var i=function(l,d,f){var o=null,h=!1,_=Object.create(s),m=[],y=new r({messageBuffer:m,terminate:function(){},postMessage:function(E){m.push(E),o&&(h?setTimeout(C):C())}});y.setEmitSync=function(E){h=E};var C=function(){var E=m.shift();E.command?o[E.command].apply(o,E.args):E.event&&_._signal(E.event,E.data)};return _.postMessage=function(E){y.onMessage({data:E})},_.callback=function(E,D){this.postMessage({type:"call",id:D,data:E})},_.emit=function(E,D){this.postMessage({type:"event",name:E,data:D})},a.loadModule(["worker",d],function(E){for(o=new E[f](_);m.length;)C()}),y};t.UIWorkerClient=i,t.WorkerClient=r,t.createWorker=u});ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t,n){"use strict";var c=e("./range").Range,v=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),a=function(){function p(u,r,i,l,d,f){var o=this;this.length=r,this.session=u,this.doc=u.getDocument(),this.mainClass=d,this.othersClass=f,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=l,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=i;var h=u.getUndoManager().$undoStack||u.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=h.length,this.setup(),u.selection.on("changeCursor",this.$onCursorChange)}return p.prototype.setup=function(){var u=this,r=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=r.createAnchor(this.$pos.row,this.$pos.column);var l=this.pos;l.$insertRight=!0,l.detach(),l.markerId=i.addMarker(new c(l.row,l.column,l.row,l.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(d){var f=r.createAnchor(d.row,d.column);f.$insertRight=!0,f.detach(),u.others.push(f)}),i.setUndoSelect(!1)},p.prototype.showOtherMarkers=function(){if(!this.othersActive){var u=this.session,r=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=u.addMarker(new c(i.row,i.column,i.row,i.column+r.length),r.othersClass,null,!1)})}},p.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var u=0;u<this.others.length;u++)this.session.removeMarker(this.others[u].markerId)}},p.prototype.onUpdate=function(u){if(this.$updating)return this.updateAnchors(u);var r=u;if(r.start.row===r.end.row&&r.start.row===this.pos.row){this.$updating=!0;var i=u.action==="insert"?r.end.column-r.start.column:r.start.column-r.end.column,l=r.start.column>=this.pos.column&&r.start.column<=this.pos.column+this.length+1,d=r.start.column-this.pos.column;if(this.updateAnchors(u),l&&(this.length+=i),l&&!this.session.$fromUndo){if(u.action==="insert")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+d};this.doc.insertMergedLines(h,u.lines)}else if(u.action==="remove")for(var f=this.others.length-1;f>=0;f--){var o=this.others[f],h={row:o.row,column:o.column+d};this.doc.remove(new c(h.row,h.column,h.row,h.column-i))}}this.$updating=!1,this.updateMarkers()}},p.prototype.updateAnchors=function(u){this.pos.onChange(u);for(var r=this.others.length;r--;)this.others[r].onChange(u);this.updateMarkers()},p.prototype.updateMarkers=function(){if(!this.$updating){var u=this,r=this.session,i=function(d,f){r.removeMarker(d.markerId),d.markerId=r.addMarker(new c(d.row,d.column,d.row,d.column+u.length),f,null,!1)};i(this.pos,this.mainClass);for(var l=this.others.length;l--;)i(this.others[l],this.othersClass)}},p.prototype.onCursorChange=function(u){if(!(this.$updating||!this.session)){var r=this.session.selection.getCursor();r.row===this.pos.row&&r.column>=this.pos.column&&r.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",u)):(this.hideOtherMarkers(),this._emit("cursorLeave",u))}},p.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},p.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var u=this.session.getUndoManager(),r=(u.$undoStack||u.$undostack).length-this.$undoStackDepth,i=0;i<r;i++)u.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},p}();s.implement(a.prototype,v),t.PlaceHolder=a});ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t,n){var c=e("../lib/event"),v=e("../lib/useragent");function s(p,u){return p.row==u.row&&p.column==u.column}function a(p){var u=p.domEvent,r=u.altKey,i=u.shiftKey,l=u.ctrlKey,d=p.getAccelKey(),f=p.getButton();if(l&&v.isMac&&(f=u.button),p.editor.inMultiSelectMode&&f==2){p.editor.textInput.onContextMenu(p.domEvent);return}if(!l&&!r&&!d){f===0&&p.editor.inMultiSelectMode&&p.editor.exitMultiSelectMode();return}if(f===0){var o=p.editor,h=o.selection,_=o.inMultiSelectMode,m=p.getDocumentPosition(),y=h.getCursor(),C=p.inSelection()||h.isEmpty()&&s(m,y),E=p.x,D=p.y,g=function(k){E=k.clientX,D=k.clientY},b=o.session,L=o.renderer.pixelToScreenCoordinates(E,D),S=L,T;if(o.$mouseHandler.$enableJumpToDef)l&&r||d&&r?T=i?"block":"add":r&&o.$blockSelectEnabled&&(T="block");else if(d&&!r){if(T="add",!_&&i)return}else r&&o.$blockSelectEnabled&&(T="block");if(T&&v.isMac&&u.ctrlKey&&o.$mouseHandler.cancelContextMenu(),T=="add"){if(!_&&C)return;if(!_){var M=h.toOrientedRange();o.addSelectionMarker(M)}var w=h.rangeList.rangeAtPoint(m);o.inVirtualSelectionMode=!0,i&&(w=null,M=h.ranges[0]||M,o.removeSelectionMarker(M)),o.once("mouseup",function(){var k=h.toOrientedRange();w&&k.isEmpty()&&s(w.cursor,k.cursor)?h.substractPoint(k.cursor):(i?h.substractPoint(M.cursor):M&&(o.removeSelectionMarker(M),h.addRange(M)),h.addRange(k)),o.inVirtualSelectionMode=!1})}else if(T=="block"){p.stop(),o.inVirtualSelectionMode=!0;var F,x=[],R=function(){var k=o.renderer.pixelToScreenCoordinates(E,D),H=b.screenToDocumentPosition(k.row,k.column,k.offsetX);s(S,k)&&s(H,h.lead)||(S=k,o.selection.moveToPosition(H),o.renderer.scrollCursorIntoView(),o.removeSelectionMarkers(x),x=h.rectangularRangeBlock(S,L),o.$mouseHandler.$clickSelection&&x.length==1&&x[0].isEmpty()&&(x[0]=o.$mouseHandler.$clickSelection.clone()),x.forEach(o.addSelectionMarker,o),o.updateSelectionMarkers())};_&&!d?h.toSingleRange():!_&&d&&(F=h.toOrientedRange(),o.addSelectionMarker(F)),i?L=b.documentToScreenPosition(h.lead):h.moveToPosition(m),S={row:-1,column:-1};var A=function(k){R(),clearInterval($),o.removeSelectionMarkers(x),x.length||(x=[h.toOrientedRange()]),F&&(o.removeSelectionMarker(F),h.toSingleRange(F));for(var H=0;H<x.length;H++)h.addRange(x[H]);o.inVirtualSelectionMode=!1,o.$mouseHandler.$clickSelection=null},I=R;c.capture(o.container,g,A);var $=setInterval(function(){I()},20);return p.preventDefault()}}}t.onMouseDown=a});ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t,n){t.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(v){v.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(v){v.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(v){v.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(v){v.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(v){v.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(v){v.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(v){v.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(v){v.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(v){v.multiSelect.rangeCount>1?v.multiSelect.joinSelections():v.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(v){v.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(v){v.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(v){v.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],t.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(v){v.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(v){return v&&v.inMultiSelectMode}}];var c=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new c(t.multiSelectCommands)});ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t,n){var c=e("./range_list").RangeList,v=e("./range").Range,s=e("./selection").Selection,a=e("./mouse/multi_select_handler").onMouseDown,p=e("./lib/event"),u=e("./lib/lang"),r=e("./commands/multi_select_commands");t.commands=r.defaultCommands.concat(r.multiSelectCommands);var i=e("./search").Search,l=new i;function d(y,C,E){return l.$options.wrap=!0,l.$options.needle=C,l.$options.backwards=E==-1,l.find(y)}var f=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(f.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(y,C){if(y){if(!this.inMultiSelectMode&&this.rangeCount===0){var E=this.toOrientedRange();if(this.rangeList.add(E),this.rangeList.add(y),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),C||this.fromOrientedRange(y);this.rangeList.removeAll(),this.rangeList.add(E),this.$onAddRange(E)}y.cursor||(y.cursor=y.end);var D=this.rangeList.add(y);return this.$onAddRange(y),D.length&&this.$onRemoveRange(D),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),C||this.fromOrientedRange(y)}},this.toSingleRange=function(y){y=y||this.ranges[0];var C=this.rangeList.removeAll();C.length&&this.$onRemoveRange(C),y&&this.fromOrientedRange(y)},this.substractPoint=function(y){var C=this.rangeList.substractPoint(y);if(C)return this.$onRemoveRange(C),C[0]},this.mergeOverlappingRanges=function(){var y=this.rangeList.merge();y.length&&this.$onRemoveRange(y)},this.$onAddRange=function(y){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(y),this._signal("addRange",{range:y})},this.$onRemoveRange=function(y){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var C=this.rangeList.ranges.pop();y.push(C),this.rangeCount=0}for(var E=y.length;E--;){var D=this.ranges.indexOf(y[E]);this.ranges.splice(D,1)}this._signal("removeRange",{ranges:y}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),C=C||this.ranges[0],C&&!C.isEqual(this.getRange())&&this.fromOrientedRange(C)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new c,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var y=this.ranges.length?this.ranges:[this.getRange()],C=[],E=0;E<y.length;E++){var D=y[E],g=D.start.row,b=D.end.row;if(g===b)C.push(D.clone());else{for(C.push(new v(g,D.start.column,g,this.session.getLine(g).length));++g<b;)C.push(this.getLineRange(g,!0));C.push(new v(b,0,b,D.end.column))}E==0&&!this.isBackwards()&&(C=C.reverse())}this.toSingleRange();for(var E=C.length;E--;)this.addRange(C[E])},this.joinSelections=function(){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var y=this.rangeList.ranges,C=y[y.length-1],E=v.fromPoints(y[0].start,C.end);this.toSingleRange(),this.setSelectionRange(E,C.cursor==C.start)}else{var D=this.session.documentToScreenPosition(this.cursor),g=this.session.documentToScreenPosition(this.anchor),b=this.rectangularRangeBlock(D,g);b.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(y,C,E){var D=[],g=y.column<C.column;if(g)var b=y.column,L=C.column,S=y.offsetX,T=C.offsetX;else var b=C.column,L=y.column,S=C.offsetX,T=y.offsetX;var M=y.row<C.row;if(M)var w=y.row,F=C.row;else var w=C.row,F=y.row;b<0&&(b=0),w<0&&(w=0),w==F&&(E=!0);for(var x,R=w;R<=F;R++){var A=v.fromPoints(this.session.screenToDocumentPosition(R,b,S),this.session.screenToDocumentPosition(R,L,T));if(A.isEmpty()){if(x&&h(A.end,x))break;x=A.end}A.cursor=g?A.start:A.end,D.push(A)}if(M&&D.reverse(),!E){for(var I=D.length-1;D[I].isEmpty()&&I>0;)I--;if(I>0)for(var $=0;D[$].isEmpty();)$++;for(var k=I;k>=$;k--)D[k].isEmpty()&&D.splice(k,1)}return D}}.call(s.prototype);var o=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(y){y.cursor||(y.cursor=y.end);var C=this.getSelectionStyle();return y.marker=this.session.addMarker(y,"ace_selection",C),this.session.$selectionMarkers.push(y),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,y},this.removeSelectionMarker=function(y){if(y.marker){this.session.removeMarker(y.marker);var C=this.session.$selectionMarkers.indexOf(y);C!=-1&&this.session.$selectionMarkers.splice(C,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(y){for(var C=this.session.$selectionMarkers,E=y.length;E--;){var D=y[E];if(D.marker){this.session.removeMarker(D.marker);var g=C.indexOf(D);g!=-1&&C.splice(g,1)}}this.session.selectionMarkerCount=C.length},this.$onAddRange=function(y){this.addSelectionMarker(y.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(y){this.removeSelectionMarkers(y.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(y){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(r.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(y){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(r.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(y){var C=y.command,E=y.editor;if(E.multiSelect){if(C.multiSelectAction)C.multiSelectAction=="forEach"?D=E.forEachSelection(C,y.args):C.multiSelectAction=="forEachLine"?D=E.forEachSelection(C,y.args,!0):C.multiSelectAction=="single"?(E.exitMultiSelectMode(),D=C.exec(E,y.args||{})):D=C.multiSelectAction(E,y.args||{});else{var D=C.exec(E,y.args||{});E.multiSelect.addRange(E.multiSelect.toOrientedRange()),E.multiSelect.mergeOverlappingRanges()}return D}},this.forEachSelection=function(y,C,E){if(!this.inVirtualSelectionMode){var D=E&&E.keepOrder,g=E==!0||E&&E.$byLines,b=this.session,L=this.selection,S=L.rangeList,T=(D?L:S).ranges,M;if(!T.length)return y.exec?y.exec(this,C||{}):y(this,C||{});var w=L._eventRegistry;L._eventRegistry={};var F=new s(b);this.inVirtualSelectionMode=!0;for(var x=T.length;x--;){if(g)for(;x>0&&T[x].start.row==T[x-1].end.row;)x--;F.fromOrientedRange(T[x]),F.index=x,this.selection=b.selection=F;var R=y.exec?y.exec(this,C||{}):y(this,C||{});!M&&R!==void 0&&(M=R),F.toOrientedRange(T[x])}F.detach(),this.selection=b.selection=L,this.inVirtualSelectionMode=!1,L._eventRegistry=w,L.mergeOverlappingRanges(),L.ranges[0]&&L.fromOrientedRange(L.ranges[0]);var A=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),A&&A.from==A.to&&this.renderer.animateScrolling(A.from),M}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var y="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var C=this.multiSelect.rangeList.ranges,E=[],D=0;D<C.length;D++)E.push(this.session.getTextRange(C[D]));var g=this.session.getDocument().getNewLineCharacter();y=E.join(g),y.length==(E.length-1)*g.length&&(y="")}else this.selection.isEmpty()||(y=this.session.getTextRange(this.getSelectionRange()));return y},this.$checkMultiselectChange=function(y,C){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var E=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&C==this.multiSelect.anchor)return;var D=C==this.multiSelect.anchor?E.cursor==E.start?E.end:E.start:E.cursor;D.row!=C.row||this.session.$clipPositionToDocument(D.row,D.column).column!=C.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(y,C,E){if(C=C||{},C.needle=y||C.needle,C.needle==null){var D=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();C.needle=this.session.getTextRange(D)}this.$search.set(C);var g=this.$search.findAll(this.session);if(!g.length)return 0;var b=this.multiSelect;E||b.toSingleRange(g[0]);for(var L=g.length;L--;)b.addRange(g[L],!0);return D&&b.rangeList.rangeAtPoint(D.start)&&b.addRange(D,!0),g.length},this.selectMoreLines=function(y,C){var E=this.selection.toOrientedRange(),D=E.cursor==E.end,g=this.session.documentToScreenPosition(E.cursor);this.selection.$desiredColumn&&(g.column=this.selection.$desiredColumn);var b=this.session.screenToDocumentPosition(g.row+y,g.column);if(E.isEmpty())var S=b;else var L=this.session.documentToScreenPosition(D?E.end:E.start),S=this.session.screenToDocumentPosition(L.row+y,L.column);if(D){var T=v.fromPoints(b,S);T.cursor=T.start}else{var T=v.fromPoints(S,b);T.cursor=T.end}if(T.desiredColumn=g.column,!this.selection.inMultiSelectMode)this.selection.addRange(E);else if(C)var M=E.cursor;this.selection.addRange(T),M&&this.selection.substractPoint(M)},this.transposeSelections=function(y){for(var C=this.session,E=C.multiSelect,D=E.ranges,g=D.length;g--;){var b=D[g];if(b.isEmpty()){var L=C.getWordRange(b.start.row,b.start.column);b.start.row=L.start.row,b.start.column=L.start.column,b.end.row=L.end.row,b.end.column=L.end.column}}E.mergeOverlappingRanges();for(var S=[],g=D.length;g--;){var b=D[g];S.unshift(C.getTextRange(b))}y<0?S.unshift(S.pop()):S.push(S.shift());for(var g=D.length;g--;){var b=D[g],T=b.clone();C.replace(b,S[g]),b.start.row=T.start.row,b.start.column=T.start.column}E.fromOrientedRange(E.ranges[0])},this.selectMore=function(y,C,E){var D=this.session,g=D.multiSelect,b=g.toOrientedRange();if(!(b.isEmpty()&&(b=D.getWordRange(b.start.row,b.start.column),b.cursor=y==-1?b.start:b.end,this.multiSelect.addRange(b),E))){var L=D.getTextRange(b),S=d(D,L,y);S&&(S.cursor=y==-1?S.start:S.end,this.session.unfold(S),this.multiSelect.addRange(S),this.renderer.scrollCursorIntoView(null,.5)),C&&this.multiSelect.substractPoint(b.cursor)}},this.alignCursors=function(){var y=this.session,C=y.multiSelect,E=C.ranges,D=-1,g=E.filter(function(I){if(I.cursor.row==D)return!0;D=I.cursor.row});if(!E.length||g.length==E.length-1){var b=this.selection.getRange(),L=b.start.row,S=b.end.row,T=L==S;if(T){var M=this.session.getLength(),w;do w=this.session.getLine(S);while(/[=:]/.test(w)&&++S<M);do w=this.session.getLine(L);while(/[=:]/.test(w)&&--L>0);L<0&&(L=0),S>=M&&(S=M-1)}var F=this.session.removeFullLines(L,S);F=this.$reAlignText(F,T),this.session.insert({row:L,column:0},F.join(`
`)+`
`),T||(b.start.column=0,b.end.column=F[F.length-1].length),this.selection.setRange(b)}else{g.forEach(function(I){C.substractPoint(I.cursor)});var x=0,R=1/0,A=E.map(function(I){var $=I.cursor,k=y.getLine($.row),H=k.substr($.column).search(/\S/g);return H==-1&&(H=0),$.column>x&&(x=$.column),H<R&&(R=H),H});E.forEach(function(I,$){var k=I.cursor,H=x-k.column,U=A[$]-R;H>U?y.insert(k,u.stringRepeat(" ",H-U)):y.remove(new v(k.row,k.column,k.row,k.column-H+U)),I.start.column=I.end.column=x,I.start.row=I.end.row=k.row,I.cursor=I.end}),C.fromOrientedRange(E[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(y,C){var E=!0,D=!0,g,b,L;return y.map(function(F){var x=F.match(/(\s*)(.*?)(\s*)([=:].*)/);return x?g==null?(g=x[1].length,b=x[2].length,L=x[3].length,x):(g+b+L!=x[1].length+x[2].length+x[3].length&&(D=!1),g!=x[1].length&&(E=!1),g>x[1].length&&(g=x[1].length),b<x[2].length&&(b=x[2].length),L>x[3].length&&(L=x[3].length),x):[F]}).map(C?T:E?D?M:T:w);function S(F){return u.stringRepeat(" ",F)}function T(F){return F[2]?S(g)+F[2]+S(b-F[2].length+L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function M(F){return F[2]?S(g+b-F[2].length)+F[2]+S(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}function w(F){return F[2]?S(g)+F[2]+S(L)+F[4].replace(/^([=:])\s+/,"$1 "):F[0]}}}).call(o.prototype);function h(y,C){return y.row==C.row&&y.column==C.column}t.onSessionChange=function(y){var C=y.session;C&&!C.multiSelect&&(C.$selectionMarkers=[],C.selection.$initRangeList(),C.multiSelect=C.selection),this.multiSelect=C&&C.multiSelect;var E=y.oldSession;E&&(E.multiSelect.off("addRange",this.$onAddRange),E.multiSelect.off("removeRange",this.$onRemoveRange),E.multiSelect.off("multiSelect",this.$onMultiSelect),E.multiSelect.off("singleSelect",this.$onSingleSelect),E.multiSelect.lead.off("change",this.$checkMultiselectChange),E.multiSelect.anchor.off("change",this.$checkMultiselectChange)),C&&(C.multiSelect.on("addRange",this.$onAddRange),C.multiSelect.on("removeRange",this.$onRemoveRange),C.multiSelect.on("multiSelect",this.$onMultiSelect),C.multiSelect.on("singleSelect",this.$onSingleSelect),C.multiSelect.lead.on("change",this.$checkMultiselectChange),C.multiSelect.anchor.on("change",this.$checkMultiselectChange)),C&&this.inMultiSelectMode!=C.selection.inMultiSelectMode&&(C.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _(y){y.$multiselectOnSessionChange||(y.$onAddRange=y.$onAddRange.bind(y),y.$onRemoveRange=y.$onRemoveRange.bind(y),y.$onMultiSelect=y.$onMultiSelect.bind(y),y.$onSingleSelect=y.$onSingleSelect.bind(y),y.$multiselectOnSessionChange=t.onSessionChange.bind(y),y.$checkMultiselectChange=y.$checkMultiselectChange.bind(y),y.$multiselectOnSessionChange(y),y.on("changeSession",y.$multiselectOnSessionChange),y.on("mousedown",a),y.commands.addCommands(r.defaultCommands),m(y))}function m(y){if(!y.textInput)return;var C=y.textInput.getElement(),E=!1;p.addListener(C,"keydown",function(g){var b=g.keyCode==18&&!(g.ctrlKey||g.shiftKey||g.metaKey);y.$blockSelectEnabled&&b?E||(y.renderer.setMouseCursor("crosshair"),E=!0):E&&D()},y),p.addListener(C,"keyup",D,y),p.addListener(C,"blur",D,y);function D(g){E&&(y.renderer.setMouseCursor(""),E=!1)}}t.MultiSelect=_,e("./config").defineOptions(o.prototype,"editor",{enableMultiselect:{set:function(y){_(this),y?this.on("mousedown",a):this.off("mousedown",a)},value:!0},enableBlockSelect:{set:function(y){this.$blockSelectEnabled=y},value:!0}})});ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t,n){"use strict";var c=e("../../range").Range,v=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(s,a,p){var u=s.getLine(p);return this.foldingStartMarker.test(u)?"start":a=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(u)?"end":""},this.getFoldWidgetRange=function(s,a,p){return null},this.indentationBlock=function(s,a,p){var u=/\S/,r=s.getLine(a),i=r.search(u);if(i!=-1){for(var l=p||r.length,d=s.getLength(),f=a,o=a;++a<d;){var h=s.getLine(a).search(u);if(h!=-1){if(h<=i){var _=s.getTokenAt(a,0);if(!_||_.type!=="string")break}o=a}}if(o>f){var m=s.getLine(o).length;return new c(f,l,o,m)}}},this.openingBracketBlock=function(s,a,p,u,r){var i={row:p,column:u+1},l=s.$findClosingBracket(a,i,r);if(l){var d=s.foldWidgets[l.row];return d==null&&(d=s.getFoldWidget(l.row)),d=="start"&&l.row>i.row&&(l.row--,l.column=s.getLine(l.row).length),c.fromPoints(i,l)}},this.closingBracketBlock=function(s,a,p,u,r){var i={row:p,column:u},l=s.$findOpeningBracket(a,i);if(l)return l.column++,i.column--,c.fromPoints(l,i)}}).call(v.prototype)});ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(e,t,n){"use strict";var c=e("../line_widgets").LineWidgets,v=e("../lib/dom"),s=e("../range").Range,a=e("../config").nls;function p(r,i,l){for(var d=0,f=r.length-1;d<=f;){var o=d+f>>1,h=l(i,r[o]);if(h>0)d=o+1;else if(h<0)f=o-1;else return o}return-(d+1)}function u(r,i,l){var d=r.getAnnotations().sort(s.comparePoints);if(d.length){var f=p(d,{row:i,column:-1},s.comparePoints);f<0&&(f=-f-1),f>=d.length?f=l>0?0:d.length-1:f===0&&l<0&&(f=d.length-1);var o=d[f];if(!(!o||!l)){if(o.row===i){do o=d[f+=l];while(o&&o.row===i);if(!o)return d.slice()}var h=[];i=o.row;do h[l<0?"unshift":"push"](o),o=d[f+=l];while(o&&o.row==i);return h.length&&h}}}t.showErrorMarker=function(r,i){var l=r.session;l.widgetManager||(l.widgetManager=new c(l),l.widgetManager.attach(r));var d=r.getCursorPosition(),f=d.row,o=l.widgetManager.getWidgetsAtRow(f).filter(function(b){return b.type=="errorMarker"})[0];o?o.destroy():f-=i;var h=u(l,f,i),_;if(h){var m=h[0];d.column=(m.pos&&typeof m.column!="number"?m.pos.sc:m.column)||0,d.row=m.row,_=r.renderer.$gutterLayer.$annotations[d.row]}else{if(o)return;_={text:[a("Looks good!")],className:"ace_ok"}}r.session.unfold(d.row),r.selection.moveToPosition(d);var y={row:d.row,fixedWidth:!0,coverGutter:!0,el:v.createElement("div"),type:"errorMarker"},C=y.el.appendChild(v.createElement("div")),E=y.el.appendChild(v.createElement("div"));E.className="error_widget_arrow "+_.className;var D=r.renderer.$cursorLayer.getPixelPosition(d).left;E.style.left=D+r.renderer.gutterWidth-5+"px",y.el.className="error_widget_wrapper",C.className="error_widget "+_.className,C.innerHTML=_.text.join("<br>"),C.appendChild(v.createElement("div"));var g=function(b,L,S){if(L===0&&(S==="esc"||S==="return"))return y.destroy(),{command:"null"}};y.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(g),l.widgetManager.removeLineWidget(y),r.off("changeSelection",y.destroy),r.off("changeSession",y.destroy),r.off("mouseup",y.destroy),r.off("change",y.destroy))},r.keyBinding.addKeyboardHandler(g),r.on("changeSelection",y.destroy),r.on("changeSession",y.destroy),r.on("mouseup",y.destroy),r.on("change",y.destroy),r.session.widgetManager.addLineWidget(y),y.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:y.el.offsetHeight})},v.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)});ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(e,t,n){"use strict";e("./loader_build")(t);var c=e("./lib/dom"),v=e("./range").Range,s=e("./editor").Editor,a=e("./edit_session").EditSession,p=e("./undomanager").UndoManager,u=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.edit=function(r,i){if(typeof r=="string"){var l=r;if(r=document.getElementById(l),!r)throw new Error("ace.edit can't find div #"+l)}if(r&&r.env&&r.env.editor instanceof s)return r.env.editor;var d="";if(r&&/input|textarea/i.test(r.tagName)){var f=r;d=f.value,r=c.createElement("pre"),f.parentNode.replaceChild(r,f)}else r&&(d=r.textContent,r.innerHTML="");var o=t.createEditSession(d),h=new s(new u(r),o,i),_={document:o,editor:h,onResize:h.resize.bind(h,null)};return f&&(_.textarea=f),h.on("destroy",function(){_.editor.container.env=null}),h.container.env=h.env=_,h},t.createEditSession=function(r,i){var l=new a(r,i);return l.setUndoManager(new p),l},t.Range=v,t.Editor=s,t.EditSession=a,t.UndoManager=p,t.VirtualRenderer=u,t.version=t.config.version});(function(){ace.require(["ace/ace"],function(e){e&&(e.config.init(!0),e.define=ace.define);var t=function(){return this}();!t&&typeof window<"u"&&(t=window),!t&&typeof self<"u"&&(t=self),t.ace||(t.ace=e);for(var n in e)e.hasOwnProperty(n)&&(t.ace[n]=e[n]);t.ace.default=t.ace,typeof Nh=="object"&&typeof bF=="object"&&Nh&&(Nh.exports=t.ace)})})()});var Mx=_t(Tx=>{"use strict";Tx.supports=function(...t){let n=t.reduce((c,v)=>Object.assign(c,v),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})}});var Bo=_t((v_e,Lx)=>{"use strict";Lx.exports=class extends Error{constructor(t,n){super(t||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var Ax=_t(t_=>{"use strict";t_.byteLength=X4;t_.toByteArray=Z4;t_.fromByteArray=n6;var ga=[],Co=[],Q4=typeof Uint8Array<"u"?Uint8Array:Array,A0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(bs=0,Fx=A0.length;bs<Fx;++bs)ga[bs]=A0[bs],Co[A0.charCodeAt(bs)]=bs;var bs,Fx;Co["-".charCodeAt(0)]=62;Co["_".charCodeAt(0)]=63;function xx(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var c=n===t?0:4-n%4;return[n,c]}function X4(e){var t=xx(e),n=t[0],c=t[1];return(n+c)*3/4-c}function Y4(e,t,n){return(t+n)*3/4-n}function Z4(e){var t,n=xx(e),c=n[0],v=n[1],s=new Q4(Y4(e,c,v)),a=0,p=v>0?c-4:c,u;for(u=0;u<p;u+=4)t=Co[e.charCodeAt(u)]<<18|Co[e.charCodeAt(u+1)]<<12|Co[e.charCodeAt(u+2)]<<6|Co[e.charCodeAt(u+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=t&255;return v===2&&(t=Co[e.charCodeAt(u)]<<2|Co[e.charCodeAt(u+1)]>>4,s[a++]=t&255),v===1&&(t=Co[e.charCodeAt(u)]<<10|Co[e.charCodeAt(u+1)]<<4|Co[e.charCodeAt(u+2)]>>2,s[a++]=t>>8&255,s[a++]=t&255),s}function e6(e){return ga[e>>18&63]+ga[e>>12&63]+ga[e>>6&63]+ga[e&63]}function t6(e,t,n){for(var c,v=[],s=t;s<n;s+=3)c=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),v.push(e6(c));return v.join("")}function n6(e){for(var t,n=e.length,c=n%3,v=[],s=16383,a=0,p=n-c;a<p;a+=s)v.push(t6(e,a,a+s>p?p:a+s));return c===1?(t=e[n-1],v.push(ga[t>>2]+ga[t<<4&63]+"==")):c===2&&(t=(e[n-2]<<8)+e[n-1],v.push(ga[t>>10]+ga[t>>4&63]+ga[t<<2&63]+"=")),v.join("")}});var Ix=_t(I0=>{I0.read=function(e,t,n,c,v){var s,a,p=v*8-c-1,u=(1<<p)-1,r=u>>1,i=-7,l=n?v-1:0,d=n?-1:1,f=e[t+l];for(l+=d,s=f&(1<<-i)-1,f>>=-i,i+=p;i>0;s=s*256+e[t+l],l+=d,i-=8);for(a=s&(1<<-i)-1,s>>=-i,i+=c;i>0;a=a*256+e[t+l],l+=d,i-=8);if(s===0)s=1-r;else{if(s===u)return a?NaN:(f?-1:1)*(1/0);a=a+Math.pow(2,c),s=s-r}return(f?-1:1)*a*Math.pow(2,s-c)};I0.write=function(e,t,n,c,v,s){var a,p,u,r=s*8-v-1,i=(1<<r)-1,l=i>>1,d=v===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=c?0:s-1,o=c?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(p=isNaN(t)?1:0,a=i):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+l>=1?t+=d/u:t+=d*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=i?(p=0,a=i):a+l>=1?(p=(t*u-1)*Math.pow(2,v),a=a+l):(p=t*Math.pow(2,l-1)*Math.pow(2,v),a=0));v>=8;e[n+f]=p&255,f+=o,p/=256,v-=8);for(a=a<<v|p,r+=v;r>0;e[n+f]=a&255,f+=o,a/=256,r-=8);e[n+f-o]|=h*128}});var o_=_t(Jc=>{"use strict";var R0=Ax(),Vc=Ix(),Rx=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Jc.Buffer=te;Jc.SlowBuffer=s6;Jc.INSPECT_MAX_BYTES=50;var n_=2147483647;Jc.kMaxLength=n_;te.TYPED_ARRAY_SUPPORT=r6();!te.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function r6(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(te.prototype,"parent",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.buffer}});Object.defineProperty(te.prototype,"offset",{enumerable:!0,get:function(){if(te.isBuffer(this))return this.byteOffset}});function ri(e){if(e>n_)throw new RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,te.prototype),t}function te(e,t,n){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return H0(e)}return Hx(e,t,n)}te.poolSize=8192;function Hx(e,t,n){if(typeof e=="string")return a6(e,t);if(ArrayBuffer.isView(e))return i6(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ya(e,ArrayBuffer)||e&&ya(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ya(e,SharedArrayBuffer)||e&&ya(e.buffer,SharedArrayBuffer)))return k0(e,t,n);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let c=e.valueOf&&e.valueOf();if(c!=null&&c!==e)return te.from(c,t,n);let v=u6(e);if(v)return v;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return te.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}te.from=function(e,t,n){return Hx(e,t,n)};Object.setPrototypeOf(te.prototype,Uint8Array.prototype);Object.setPrototypeOf(te,Uint8Array);function Px(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function o6(e,t,n){return Px(e),e<=0?ri(e):t!==void 0?typeof n=="string"?ri(e).fill(t,n):ri(e).fill(t):ri(e)}te.alloc=function(e,t,n){return o6(e,t,n)};function H0(e){return Px(e),ri(e<0?0:P0(e)|0)}te.allocUnsafe=function(e){return H0(e)};te.allocUnsafeSlow=function(e){return H0(e)};function a6(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!te.isEncoding(t))throw new TypeError("Unknown encoding: "+t);let n=Nx(e,t)|0,c=ri(n),v=c.write(e,t);return v!==n&&(c=c.slice(0,v)),c}function $0(e){let t=e.length<0?0:P0(e.length)|0,n=ri(t);for(let c=0;c<t;c+=1)n[c]=e[c]&255;return n}function i6(e){if(ya(e,Uint8Array)){let t=new Uint8Array(e);return k0(t.buffer,t.byteOffset,t.byteLength)}return $0(e)}function k0(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let c;return t===void 0&&n===void 0?c=new Uint8Array(e):n===void 0?c=new Uint8Array(e,t):c=new Uint8Array(e,t,n),Object.setPrototypeOf(c,te.prototype),c}function u6(e){if(te.isBuffer(e)){let t=P0(e.length)|0,n=ri(t);return n.length===0||e.copy(n,0,0,t),n}if(e.length!==void 0)return typeof e.length!="number"||B0(e.length)?ri(0):$0(e);if(e.type==="Buffer"&&Array.isArray(e.data))return $0(e.data)}function P0(e){if(e>=n_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n_.toString(16)+" bytes");return e|0}function s6(e){return+e!=e&&(e=0),te.alloc(+e)}te.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==te.prototype};te.compare=function(t,n){if(ya(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),ya(n,Uint8Array)&&(n=te.from(n,n.offset,n.byteLength)),!te.isBuffer(t)||!te.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===n)return 0;let c=t.length,v=n.length;for(let s=0,a=Math.min(c,v);s<a;++s)if(t[s]!==n[s]){c=t[s],v=n[s];break}return c<v?-1:v<c?1:0};te.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};te.concat=function(t,n){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return te.alloc(0);let c;if(n===void 0)for(n=0,c=0;c<t.length;++c)n+=t[c].length;let v=te.allocUnsafe(n),s=0;for(c=0;c<t.length;++c){let a=t[c];if(ya(a,Uint8Array))s+a.length>v.length?(te.isBuffer(a)||(a=te.from(a)),a.copy(v,s)):Uint8Array.prototype.set.call(v,a,s);else if(te.isBuffer(a))a.copy(v,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=a.length}return v};function Nx(e,t){if(te.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ya(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&n===0)return 0;let v=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return O0(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return jx(e).length;default:if(v)return c?-1:O0(e).length;t=(""+t).toLowerCase(),v=!0}}te.byteLength=Nx;function c6(e,t,n){let c=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,t>>>=0,n<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return y6(this,t,n);case"utf8":case"utf-8":return Wx(this,t,n);case"ascii":return m6(this,t,n);case"latin1":case"binary":return g6(this,t,n);case"base64":return _6(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D6(this,t,n);default:if(c)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),c=!0}}te.prototype._isBuffer=!0;function ws(e,t,n){let c=e[t];e[t]=e[n],e[n]=c}te.prototype.swap16=function(){let t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<t;n+=2)ws(this,n,n+1);return this};te.prototype.swap32=function(){let t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<t;n+=4)ws(this,n,n+3),ws(this,n+1,n+2);return this};te.prototype.swap64=function(){let t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<t;n+=8)ws(this,n,n+7),ws(this,n+1,n+6),ws(this,n+2,n+5),ws(this,n+3,n+4);return this};te.prototype.toString=function(){let t=this.length;return t===0?"":arguments.length===0?Wx(this,0,t):c6.apply(this,arguments)};te.prototype.toLocaleString=te.prototype.toString;te.prototype.equals=function(t){if(!te.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:te.compare(this,t)===0};te.prototype.inspect=function(){let t="",n=Jc.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"};Rx&&(te.prototype[Rx]=te.prototype.inspect);te.prototype.compare=function(t,n,c,v,s){if(ya(t,Uint8Array)&&(t=te.from(t,t.offset,t.byteLength)),!te.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(n===void 0&&(n=0),c===void 0&&(c=t?t.length:0),v===void 0&&(v=0),s===void 0&&(s=this.length),n<0||c>t.length||v<0||s>this.length)throw new RangeError("out of range index");if(v>=s&&n>=c)return 0;if(v>=s)return-1;if(n>=c)return 1;if(n>>>=0,c>>>=0,v>>>=0,s>>>=0,this===t)return 0;let a=s-v,p=c-n,u=Math.min(a,p),r=this.slice(v,s),i=t.slice(n,c);for(let l=0;l<u;++l)if(r[l]!==i[l]){a=r[l],p=i[l];break}return a<p?-1:p<a?1:0};function Bx(e,t,n,c,v){if(e.length===0)return-1;if(typeof n=="string"?(c=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,B0(n)&&(n=v?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(v)return-1;n=e.length-1}else if(n<0)if(v)n=0;else return-1;if(typeof t=="string"&&(t=te.from(t,c)),te.isBuffer(t))return t.length===0?-1:$x(e,t,n,c,v);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?v?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):$x(e,[t],n,c,v);throw new TypeError("val must be string, number or Buffer")}function $x(e,t,n,c,v){let s=1,a=e.length,p=t.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(e.length<2||t.length<2)return-1;s=2,a/=2,p/=2,n/=2}function u(i,l){return s===1?i[l]:i.readUInt16BE(l*s)}let r;if(v){let i=-1;for(r=n;r<a;r++)if(u(e,r)===u(t,i===-1?0:r-i)){if(i===-1&&(i=r),r-i+1===p)return i*s}else i!==-1&&(r-=r-i),i=-1}else for(n+p>a&&(n=a-p),r=n;r>=0;r--){let i=!0;for(let l=0;l<p;l++)if(u(e,r+l)!==u(t,l)){i=!1;break}if(i)return r}return-1}te.prototype.includes=function(t,n,c){return this.indexOf(t,n,c)!==-1};te.prototype.indexOf=function(t,n,c){return Bx(this,t,n,c,!0)};te.prototype.lastIndexOf=function(t,n,c){return Bx(this,t,n,c,!1)};function l6(e,t,n,c){n=Number(n)||0;let v=e.length-n;c?(c=Number(c),c>v&&(c=v)):c=v;let s=t.length;c>s/2&&(c=s/2);let a;for(a=0;a<c;++a){let p=parseInt(t.substr(a*2,2),16);if(B0(p))return a;e[n+a]=p}return a}function f6(e,t,n,c){return r_(O0(t,e.length-n),e,n,c)}function d6(e,t,n,c){return r_(S6(t),e,n,c)}function p6(e,t,n,c){return r_(jx(t),e,n,c)}function h6(e,t,n,c){return r_(E6(t,e.length-n),e,n,c)}te.prototype.write=function(t,n,c,v){if(n===void 0)v="utf8",c=this.length,n=0;else if(c===void 0&&typeof n=="string")v=n,c=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(c)?(c=c>>>0,v===void 0&&(v="utf8")):(v=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-n;if((c===void 0||c>s)&&(c=s),t.length>0&&(c<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");v||(v="utf8");let a=!1;for(;;)switch(v){case"hex":return l6(this,t,n,c);case"utf8":case"utf-8":return f6(this,t,n,c);case"ascii":case"latin1":case"binary":return d6(this,t,n,c);case"base64":return p6(this,t,n,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h6(this,t,n,c);default:if(a)throw new TypeError("Unknown encoding: "+v);v=(""+v).toLowerCase(),a=!0}};te.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _6(e,t,n){return t===0&&n===e.length?R0.fromByteArray(e):R0.fromByteArray(e.slice(t,n))}function Wx(e,t,n){n=Math.min(e.length,n);let c=[],v=t;for(;v<n;){let s=e[v],a=null,p=s>239?4:s>223?3:s>191?2:1;if(v+p<=n){let u,r,i,l;switch(p){case 1:s<128&&(a=s);break;case 2:u=e[v+1],(u&192)===128&&(l=(s&31)<<6|u&63,l>127&&(a=l));break;case 3:u=e[v+1],r=e[v+2],(u&192)===128&&(r&192)===128&&(l=(s&15)<<12|(u&63)<<6|r&63,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:u=e[v+1],r=e[v+2],i=e[v+3],(u&192)===128&&(r&192)===128&&(i&192)===128&&(l=(s&15)<<18|(u&63)<<12|(r&63)<<6|i&63,l>65535&&l<1114112&&(a=l))}}a===null?(a=65533,p=1):a>65535&&(a-=65536,c.push(a>>>10&1023|55296),a=56320|a&1023),c.push(a),v+=p}return v6(c)}var kx=4096;function v6(e){let t=e.length;if(t<=kx)return String.fromCharCode.apply(String,e);let n="",c=0;for(;c<t;)n+=String.fromCharCode.apply(String,e.slice(c,c+=kx));return n}function m6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]&127);return c}function g6(e,t,n){let c="";n=Math.min(e.length,n);for(let v=t;v<n;++v)c+=String.fromCharCode(e[v]);return c}function y6(e,t,n){let c=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>c)&&(n=c);let v="";for(let s=t;s<n;++s)v+=T6[e[s]];return v}function D6(e,t,n){let c=e.slice(t,n),v="";for(let s=0;s<c.length-1;s+=2)v+=String.fromCharCode(c[s]+c[s+1]*256);return v}te.prototype.slice=function(t,n){let c=this.length;t=~~t,n=n===void 0?c:~~n,t<0?(t+=c,t<0&&(t=0)):t>c&&(t=c),n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),n<t&&(n=t);let v=this.subarray(t,n);return Object.setPrototypeOf(v,te.prototype),v};function Wn(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}te.prototype.readUintLE=te.prototype.readUIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Wn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return v};te.prototype.readUintBE=te.prototype.readUIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Wn(t,n,this.length);let v=this[t+--n],s=1;for(;n>0&&(s*=256);)v+=this[t+--n]*s;return v};te.prototype.readUint8=te.prototype.readUInt8=function(t,n){return t=t>>>0,n||Wn(t,1,this.length),this[t]};te.prototype.readUint16LE=te.prototype.readUInt16LE=function(t,n){return t=t>>>0,n||Wn(t,2,this.length),this[t]|this[t+1]<<8};te.prototype.readUint16BE=te.prototype.readUInt16BE=function(t,n){return t=t>>>0,n||Wn(t,2,this.length),this[t]<<8|this[t+1]};te.prototype.readUint32LE=te.prototype.readUInt32LE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};te.prototype.readUint32BE=te.prototype.readUInt32BE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};te.prototype.readBigUInt64LE=Du(function(t){t=t>>>0,Gc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&zf(t,this.length-8);let v=n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,s=this[++t]+this[++t]*2**8+this[++t]*2**16+c*2**24;return BigInt(v)+(BigInt(s)<<BigInt(32))});te.prototype.readBigUInt64BE=Du(function(t){t=t>>>0,Gc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&zf(t,this.length-8);let v=n*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],s=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c;return(BigInt(v)<<BigInt(32))+BigInt(s)});te.prototype.readIntLE=function(t,n,c){t=t>>>0,n=n>>>0,c||Wn(t,n,this.length);let v=this[t],s=1,a=0;for(;++a<n&&(s*=256);)v+=this[t+a]*s;return s*=128,v>=s&&(v-=Math.pow(2,8*n)),v};te.prototype.readIntBE=function(t,n,c){t=t>>>0,n=n>>>0,c||Wn(t,n,this.length);let v=n,s=1,a=this[t+--v];for(;v>0&&(s*=256);)a+=this[t+--v]*s;return s*=128,a>=s&&(a-=Math.pow(2,8*n)),a};te.prototype.readInt8=function(t,n){return t=t>>>0,n||Wn(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};te.prototype.readInt16LE=function(t,n){t=t>>>0,n||Wn(t,2,this.length);let c=this[t]|this[t+1]<<8;return c&32768?c|4294901760:c};te.prototype.readInt16BE=function(t,n){t=t>>>0,n||Wn(t,2,this.length);let c=this[t+1]|this[t]<<8;return c&32768?c|4294901760:c};te.prototype.readInt32LE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};te.prototype.readInt32BE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};te.prototype.readBigInt64LE=Du(function(t){t=t>>>0,Gc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&zf(t,this.length-8);let v=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(c<<24);return(BigInt(v)<<BigInt(32))+BigInt(n+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)});te.prototype.readBigInt64BE=Du(function(t){t=t>>>0,Gc(t,"offset");let n=this[t],c=this[t+7];(n===void 0||c===void 0)&&zf(t,this.length-8);let v=(n<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(v)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+c)});te.prototype.readFloatLE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),Vc.read(this,t,!0,23,4)};te.prototype.readFloatBE=function(t,n){return t=t>>>0,n||Wn(t,4,this.length),Vc.read(this,t,!1,23,4)};te.prototype.readDoubleLE=function(t,n){return t=t>>>0,n||Wn(t,8,this.length),Vc.read(this,t,!0,52,8)};te.prototype.readDoubleBE=function(t,n){return t=t>>>0,n||Wn(t,8,this.length),Vc.read(this,t,!1,52,8)};function zr(e,t,n,c,v,s){if(!te.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>v||t<s)throw new RangeError('"value" argument is out of bounds');if(n+c>e.length)throw new RangeError("Index out of range")}te.prototype.writeUintLE=te.prototype.writeUIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let p=Math.pow(2,8*c)-1;zr(this,t,n,c,p,0)}let s=1,a=0;for(this[n]=t&255;++a<c&&(s*=256);)this[n+a]=t/s&255;return n+c};te.prototype.writeUintBE=te.prototype.writeUIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,c=c>>>0,!v){let p=Math.pow(2,8*c)-1;zr(this,t,n,c,p,0)}let s=c-1,a=1;for(this[n+s]=t&255;--s>=0&&(a*=256);)this[n+s]=t/a&255;return n+c};te.prototype.writeUint8=te.prototype.writeUInt8=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,1,255,0),this[n]=t&255,n+1};te.prototype.writeUint16LE=te.prototype.writeUInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,2,65535,0),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeUint16BE=te.prototype.writeUInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,2,65535,0),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeUint32LE=te.prototype.writeUInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,4,4294967295,0),this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t&255,n+4};te.prototype.writeUint32BE=te.prototype.writeUInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,4,4294967295,0),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};function Ux(e,t,n,c,v){Jx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s,s=s>>8,e[n++]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,a=a>>8,e[n++]=a,n}function qx(e,t,n,c,v){Jx(t,c,v,e,n,7);let s=Number(t&BigInt(4294967295));e[n+7]=s,s=s>>8,e[n+6]=s,s=s>>8,e[n+5]=s,s=s>>8,e[n+4]=s;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a=a>>8,e[n+2]=a,a=a>>8,e[n+1]=a,a=a>>8,e[n]=a,n+8}te.prototype.writeBigUInt64LE=Du(function(t,n=0){return Ux(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeBigUInt64BE=Du(function(t,n=0){return qx(this,t,n,BigInt(0),BigInt("0xffffffffffffffff"))});te.prototype.writeIntLE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let u=Math.pow(2,8*c-1);zr(this,t,n,c,u-1,-u)}let s=0,a=1,p=0;for(this[n]=t&255;++s<c&&(a*=256);)t<0&&p===0&&this[n+s-1]!==0&&(p=1),this[n+s]=(t/a>>0)-p&255;return n+c};te.prototype.writeIntBE=function(t,n,c,v){if(t=+t,n=n>>>0,!v){let u=Math.pow(2,8*c-1);zr(this,t,n,c,u-1,-u)}let s=c-1,a=1,p=0;for(this[n+s]=t&255;--s>=0&&(a*=256);)t<0&&p===0&&this[n+s+1]!==0&&(p=1),this[n+s]=(t/a>>0)-p&255;return n+c};te.prototype.writeInt8=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,1,127,-128),t<0&&(t=255+t+1),this[n]=t&255,n+1};te.prototype.writeInt16LE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,2,32767,-32768),this[n]=t&255,this[n+1]=t>>>8,n+2};te.prototype.writeInt16BE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,2,32767,-32768),this[n]=t>>>8,this[n+1]=t&255,n+2};te.prototype.writeInt32LE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,4,2147483647,-2147483648),this[n]=t&255,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24,n+4};te.prototype.writeInt32BE=function(t,n,c){return t=+t,n=n>>>0,c||zr(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t&255,n+4};te.prototype.writeBigInt64LE=Du(function(t,n=0){return Ux(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});te.prototype.writeBigInt64BE=Du(function(t,n=0){return qx(this,t,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function zx(e,t,n,c,v,s){if(n+c>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Vx(e,t,n,c,v){return t=+t,n=n>>>0,v||zx(e,t,n,4,34028234663852886e22,-34028234663852886e22),Vc.write(e,t,n,c,23,4),n+4}te.prototype.writeFloatLE=function(t,n,c){return Vx(this,t,n,!0,c)};te.prototype.writeFloatBE=function(t,n,c){return Vx(this,t,n,!1,c)};function Gx(e,t,n,c,v){return t=+t,n=n>>>0,v||zx(e,t,n,8,17976931348623157e292,-17976931348623157e292),Vc.write(e,t,n,c,52,8),n+8}te.prototype.writeDoubleLE=function(t,n,c){return Gx(this,t,n,!0,c)};te.prototype.writeDoubleBE=function(t,n,c){return Gx(this,t,n,!1,c)};te.prototype.copy=function(t,n,c,v){if(!te.isBuffer(t))throw new TypeError("argument should be a Buffer");if(c||(c=0),!v&&v!==0&&(v=this.length),n>=t.length&&(n=t.length),n||(n=0),v>0&&v<c&&(v=c),v===c||t.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(v<0)throw new RangeError("sourceEnd out of bounds");v>this.length&&(v=this.length),t.length-n<v-c&&(v=t.length-n+c);let s=v-c;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,c,v):Uint8Array.prototype.set.call(t,this.subarray(c,v),n),s};te.prototype.fill=function(t,n,c,v){if(typeof t=="string"){if(typeof n=="string"?(v=n,n=0,c=this.length):typeof c=="string"&&(v=c,c=this.length),v!==void 0&&typeof v!="string")throw new TypeError("encoding must be a string");if(typeof v=="string"&&!te.isEncoding(v))throw new TypeError("Unknown encoding: "+v);if(t.length===1){let a=t.charCodeAt(0);(v==="utf8"&&a<128||v==="latin1")&&(t=a)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(n<0||this.length<n||this.length<c)throw new RangeError("Out of range index");if(c<=n)return this;n=n>>>0,c=c===void 0?this.length:c>>>0,t||(t=0);let s;if(typeof t=="number")for(s=n;s<c;++s)this[s]=t;else{let a=te.isBuffer(t)?t:te.from(t,v),p=a.length;if(p===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<c-n;++s)this[s+n]=a[s%p]}return this};var zc={};function N0(e,t,n){zc[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(v){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:v,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}N0("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);N0("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError);N0("ERR_OUT_OF_RANGE",function(e,t,n){let c=`The value of "${e}" is out of range.`,v=n;return Number.isInteger(n)&&Math.abs(n)>2**32?v=Ox(String(n)):typeof n=="bigint"&&(v=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(v=Ox(v)),v+="n"),c+=` It must be ${t}. Received ${v}`,c},RangeError);function Ox(e){let t="",n=e.length,c=e[0]==="-"?1:0;for(;n>=c+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function C6(e,t,n){Gc(t,"offset"),(e[t]===void 0||e[t+n]===void 0)&&zf(t,e.length-(n+1))}function Jx(e,t,n,c,v,s){if(e>n||e<t){let a=typeof t=="bigint"?"n":"",p;throw s>3?t===0||t===BigInt(0)?p=`>= 0${a} and < 2${a} ** ${(s+1)*8}${a}`:p=`>= -(2${a} ** ${(s+1)*8-1}${a}) and < 2 ** ${(s+1)*8-1}${a}`:p=`>= ${t}${a} and <= ${n}${a}`,new zc.ERR_OUT_OF_RANGE("value",p,e)}C6(c,v,s)}function Gc(e,t){if(typeof e!="number")throw new zc.ERR_INVALID_ARG_TYPE(t,"number",e)}function zf(e,t,n){throw Math.floor(e)!==e?(Gc(e,n),new zc.ERR_OUT_OF_RANGE(n||"offset","an integer",e)):t<0?new zc.ERR_BUFFER_OUT_OF_BOUNDS:new zc.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}var b6=/[^+/0-9A-Za-z-_]/g;function w6(e){if(e=e.split("=")[0],e=e.trim().replace(b6,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function O0(e,t){t=t||1/0;let n,c=e.length,v=null,s=[];for(let a=0;a<c;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!v){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}else if(a+1===c){(t-=3)>-1&&s.push(239,191,189);continue}v=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),v=n;continue}n=(v-55296<<10|n-56320)+65536}else v&&(t-=3)>-1&&s.push(239,191,189);if(v=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,n&63|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return s}function S6(e){let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n)&255);return t}function E6(e,t){let n,c,v,s=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),c=n>>8,v=n%256,s.push(v),s.push(c);return s}function jx(e){return R0.toByteArray(w6(e))}function r_(e,t,n,c){let v;for(v=0;v<c&&!(v+n>=t.length||v>=e.length);++v)t[v+n]=e[v];return v}function ya(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function B0(e){return e!==e}var T6=function(){let e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){let c=n*16;for(let v=0;v<16;++v)t[c+v]=e[n]+e[v]}return t}();function Du(e){return typeof BigInt>"u"?M6:e}function M6(){throw new Error("BigInt not supported")}});var U0=_t((C_e,Kx)=>{"use strict";var W0=null;Kx.exports=function(){return W0===null&&(W0={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),W0}});var V0=_t(Qx=>{"use strict";var q0=Bo(),L6=new Set(["buffer","view","utf8"]),z0=class{constructor(t){if(this.encode=t.encode||this.encode,this.decode=t.decode||this.decode,this.name=t.name||this.name,this.format=t.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!L6.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");t.createViewTranscoder&&(this.createViewTranscoder=t.createViewTranscoder),t.createBufferTranscoder&&(this.createBufferTranscoder=t.createBufferTranscoder),t.createUTF8Transcoder&&(this.createUTF8Transcoder=t.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new q0(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Qx.Encoding=z0});var K0=_t(a_=>{"use strict";var{Buffer:J0}=o_()||{},{Encoding:j0}=V0(),F6=U0(),Vf=class extends j0{constructor(t){super({...t,format:"buffer"})}createViewTranscoder(){return new Gf({encode:this.encode,decode:t=>this.decode(J0.from(t.buffer,t.byteOffset,t.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},Gf=class extends j0{constructor(t){super({...t,format:"view"})}createBufferTranscoder(){return new Vf({encode:t=>{let n=this.encode(t);return J0.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},G0=class extends j0{constructor(t){super({...t,format:"utf8"})}createBufferTranscoder(){return new Vf({encode:t=>J0.from(this.encode(t),"utf8"),decode:t=>this.decode(t.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:t,textDecoder:n}=F6();return new Gf({encode:c=>t.encode(this.encode(c)),decode:c=>this.decode(n.decode(c)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};a_.BufferFormat=Vf;a_.ViewFormat=Gf;a_.UTF8Format=G0});var eA=_t(Ss=>{"use strict";var{Buffer:pr}=o_()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Yx,textDecoder:Xx}=U0()(),{BufferFormat:Jf,ViewFormat:Q0,UTF8Format:Zx}=K0(),i_=e=>e;Ss.utf8=new Zx({encode:function(e){return pr.isBuffer(e)?e.toString("utf8"):ArrayBuffer.isView(e)?Xx.decode(e):String(e)},decode:i_,name:"utf8",createViewTranscoder(){return new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:Yx.encode(e)},decode:function(e){return Xx.decode(e)},name:`${this.name}+view`})},createBufferTranscoder(){return new Jf({encode:function(e){return pr.isBuffer(e)?e:ArrayBuffer.isView(e)?pr.from(e.buffer,e.byteOffset,e.byteLength):pr.from(String(e),"utf8")},decode:function(e){return e.toString("utf8")},name:`${this.name}+buffer`})}});Ss.json=new Zx({encode:JSON.stringify,decode:JSON.parse,name:"json"});Ss.buffer=new Jf({encode:function(e){return pr.isBuffer(e)?e:ArrayBuffer.isView(e)?pr.from(e.buffer,e.byteOffset,e.byteLength):pr.from(String(e),"utf8")},decode:i_,name:"buffer",createViewTranscoder(){return new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:pr.from(String(e),"utf8")},decode:function(e){return pr.from(e.buffer,e.byteOffset,e.byteLength)},name:`${this.name}+view`})}});Ss.view=new Q0({encode:function(e){return ArrayBuffer.isView(e)?e:Yx.encode(e)},decode:i_,name:"view",createBufferTranscoder(){return new Jf({encode:function(e){return pr.isBuffer(e)?e:ArrayBuffer.isView(e)?pr.from(e.buffer,e.byteOffset,e.byteLength):pr.from(String(e),"utf8")},decode:i_,name:`${this.name}+buffer`})}});Ss.hex=new Jf({encode:function(e){return pr.isBuffer(e)?e:pr.from(String(e),"hex")},decode:function(e){return e.toString("hex")},name:"hex"});Ss.base64=new Jf({encode:function(e){return pr.isBuffer(e)?e:pr.from(String(e),"base64")},decode:function(e){return e.toString("base64")},name:"base64"})});var rA=_t(nA=>{"use strict";var tA=Bo(),s_=eA(),{Encoding:x6}=V0(),{BufferFormat:A6,ViewFormat:I6,UTF8Format:R6}=K0(),jf=Symbol("formats"),u_=Symbol("encodings"),$6=new Set(["buffer","view","utf8"]),X0=class{constructor(t){if(Array.isArray(t)){if(!t.every(n=>$6.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[u_]=new Map,this[jf]=new Set(t);for(let n in s_)try{this.encoding(n)}catch(c){if(c.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw c}}encodings(){return Array.from(new Set(this[u_].values()))}encoding(t){let n=this[u_].get(t);if(n===void 0){if(typeof t=="string"&&t!==""){if(n=P6[t],!n)throw new tA(`Encoding '${t}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof t!="object"||t===null)throw new TypeError("First argument 'encoding' must be a string or object");n=k6(t)}let{name:c,format:v}=n;if(!this[jf].has(v))if(this[jf].has("view"))n=n.createViewTranscoder();else if(this[jf].has("buffer"))n=n.createBufferTranscoder();else if(this[jf].has("utf8"))n=n.createUTF8Transcoder();else throw new tA(`Encoding '${c}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let s of[t,c,n.name,n.commonName])this[u_].set(s,n)}return n}};nA.Transcoder=X0;function k6(e){if(e instanceof x6)return e;let t="type"in e&&typeof e.type=="string"?e.type:void 0,n=e.name||t||`anonymous-${N6++}`;switch(O6(e)){case"view":return new I6({...e,name:n});case"utf8":return new R6({...e,name:n});case"buffer":return new A6({...e,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function O6(e){return"format"in e&&e.format!==void 0?e.format:"buffer"in e&&typeof e.buffer=="boolean"?e.buffer?"buffer":"utf8":"code"in e&&Number.isInteger(e.code)?"view":"buffer"}var H6={binary:s_.buffer,"utf-8":s_.utf8},P6={...s_,...H6},N6=0});var hA=_t((T_e,Y0)=>{"use strict";var jc=typeof Reflect=="object"?Reflect:null,oA=jc&&typeof jc.apply=="function"?jc.apply:function(t,n,c){return Function.prototype.apply.call(t,n,c)},c_;jc&&typeof jc.ownKeys=="function"?c_=jc.ownKeys:Object.getOwnPropertySymbols?c_=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:c_=function(t){return Object.getOwnPropertyNames(t)};function B6(e){console&&console.warn&&console.warn(e)}var iA=Number.isNaN||function(t){return t!==t};function Vt(){Vt.init.call(this)}Y0.exports=Vt;Y0.exports.once=z6;Vt.EventEmitter=Vt;Vt.prototype._events=void 0;Vt.prototype._eventsCount=0;Vt.prototype._maxListeners=void 0;var aA=10;function l_(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Vt,"defaultMaxListeners",{enumerable:!0,get:function(){return aA},set:function(e){if(typeof e!="number"||e<0||iA(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");aA=e}});Vt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Vt.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||iA(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function uA(e){return e._maxListeners===void 0?Vt.defaultMaxListeners:e._maxListeners}Vt.prototype.getMaxListeners=function(){return uA(this)};Vt.prototype.emit=function(t){for(var n=[],c=1;c<arguments.length;c++)n.push(arguments[c]);var v=t==="error",s=this._events;if(s!==void 0)v=v&&s.error===void 0;else if(!v)return!1;if(v){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var p=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw p.context=a,p}var u=s[t];if(u===void 0)return!1;if(typeof u=="function")oA(u,this,n);else for(var r=u.length,i=dA(u,r),c=0;c<r;++c)oA(i[c],this,n);return!0};function sA(e,t,n,c){var v,s,a;if(l_(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),a=s[t]),a===void 0)a=s[t]=n,++e._eventsCount;else if(typeof a=="function"?a=s[t]=c?[n,a]:[a,n]:c?a.unshift(n):a.push(n),v=uA(e),v>0&&a.length>v&&!a.warned){a.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=a.length,B6(p)}return e}Vt.prototype.addListener=function(t,n){return sA(this,t,n,!1)};Vt.prototype.on=Vt.prototype.addListener;Vt.prototype.prependListener=function(t,n){return sA(this,t,n,!0)};function W6(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function cA(e,t,n){var c={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},v=W6.bind(c);return v.listener=n,c.wrapFn=v,v}Vt.prototype.once=function(t,n){return l_(n),this.on(t,cA(this,t,n)),this};Vt.prototype.prependOnceListener=function(t,n){return l_(n),this.prependListener(t,cA(this,t,n)),this};Vt.prototype.removeListener=function(t,n){var c,v,s,a,p;if(l_(n),v=this._events,v===void 0)return this;if(c=v[t],c===void 0)return this;if(c===n||c.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete v[t],v.removeListener&&this.emit("removeListener",t,c.listener||n));else if(typeof c!="function"){for(s=-1,a=c.length-1;a>=0;a--)if(c[a]===n||c[a].listener===n){p=c[a].listener,s=a;break}if(s<0)return this;s===0?c.shift():U6(c,s),c.length===1&&(v[t]=c[0]),v.removeListener!==void 0&&this.emit("removeListener",t,p||n)}return this};Vt.prototype.off=Vt.prototype.removeListener;Vt.prototype.removeAllListeners=function(t){var n,c,v;if(c=this._events,c===void 0)return this;if(c.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):c[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete c[t]),this;if(arguments.length===0){var s=Object.keys(c),a;for(v=0;v<s.length;++v)a=s[v],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=c[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(v=n.length-1;v>=0;v--)this.removeListener(t,n[v]);return this};function lA(e,t,n){var c=e._events;if(c===void 0)return[];var v=c[t];return v===void 0?[]:typeof v=="function"?n?[v.listener||v]:[v]:n?q6(v):dA(v,v.length)}Vt.prototype.listeners=function(t){return lA(this,t,!0)};Vt.prototype.rawListeners=function(t){return lA(this,t,!1)};Vt.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):fA.call(e,t)};Vt.prototype.listenerCount=fA;function fA(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Vt.prototype.eventNames=function(){return this._eventsCount>0?c_(this._events):[]};function dA(e,t){for(var n=new Array(t),c=0;c<t;++c)n[c]=e[c];return n}function U6(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function q6(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function z6(e,t){return new Promise(function(n,c){function v(a){e.removeListener(t,s),c(a)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",v),n([].slice.call(arguments))}pA(e,t,s,{once:!0}),t!=="error"&&V6(e,v,{once:!0})})}function V6(e,t,n){typeof e.on=="function"&&pA(e,"error",t,n)}function pA(e,t,n,c){if(typeof e.on=="function")c.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function v(s){c.once&&e.removeEventListener(t,v),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}});var vA=_t((M_e,_A)=>{_A.exports=typeof queueMicrotask=="function"?queueMicrotask:e=>Promise.resolve().then(e)});var Kf=_t(Z0=>{"use strict";var mA=vA();Z0.fromCallback=function(e,t){if(e===void 0){var n=new Promise(function(c,v){e=function(s,a){s?v(s):c(a)}});e[t!==void 0?t:"promise"]=n}else if(typeof e!="function")throw new TypeError("Callback must be a function");return e};Z0.fromPromise=function(e,t){if(t===void 0)return e;e.then(function(n){mA(()=>t(null,n))}).catch(function(n){mA(()=>t(n))})}});var f_=_t(eD=>{"use strict";eD.getCallback=function(e,t){return typeof e=="function"?e:t};eD.getOptions=function(e,t){return typeof e=="object"&&e!==null?e:t!==void 0?t:{}}});var Tu=_t(__=>{"use strict";var{fromCallback:tD}=Kf(),uo=Bo(),{getOptions:nD,getCallback:gA}=f_(),Es=Symbol("promise"),Kc=Symbol("callback"),Da=Symbol("working"),Ts=Symbol("handleOne"),oi=Symbol("handleMany"),rD=Symbol("autoClose"),Su=Symbol("finishWork"),Ca=Symbol("returnMany"),Cu=Symbol("closing"),Qf=Symbol("handleClose"),d_=Symbol("closed"),Xf=Symbol("closeCallbacks"),wu=Symbol("keyEncoding"),Ms=Symbol("valueEncoding"),oD=Symbol("abortOnClose"),p_=Symbol("legacy"),aD=Symbol("keys"),iD=Symbol("values"),bu=Symbol("limit"),bo=Symbol("count"),h_=Object.freeze({}),G6=()=>{},yA=!1,Yf=class{constructor(t,n,c){if(typeof t!="object"||t===null){let v=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${v}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[d_]=!1,this[Xf]=[],this[Da]=!1,this[Cu]=!1,this[rD]=!1,this[Kc]=null,this[Ts]=this[Ts].bind(this),this[oi]=this[oi].bind(this),this[Qf]=this[Qf].bind(this),this[wu]=n[wu],this[Ms]=n[Ms],this[p_]=c,this[bu]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[bo]=0,this[oD]=!!n.abortOnClose,this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get count(){return this[bo]}get limit(){return this[bu]}next(t){let n;if(t===void 0)n=new Promise((c,v)=>{t=(s,a,p)=>{s?v(s):this[p_]?a===void 0&&p===void 0?c():c([a,p]):c(a)}});else if(typeof t!="function")throw new TypeError("Callback must be a function");return this[Cu]?this.nextTick(t,new uo("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(t,new uo("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Da]=!0,this[Kc]=t,this[bo]>=this[bu]?this.nextTick(this[Ts],null):this._next(this[Ts])),n}_next(t){this.nextTick(t)}nextv(t,n,c){return c=gA(n,c),c=tD(c,Es),n=nD(n,h_),Number.isInteger(t)?(this[Cu]?this.nextTick(c,new uo("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(c,new uo("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(t<1&&(t=1),this[bu]<1/0&&(t=Math.min(t,this[bu]-this[bo])),this[Da]=!0,this[Kc]=c,t<=0?this.nextTick(this[oi],null,[]):this._nextv(t,n,this[oi])),c[Es]):(this.nextTick(c,new TypeError("The first argument 'size' must be an integer")),c[Es])}_nextv(t,n,c){let v=[],s=(a,p,u)=>{if(a)return c(a);if(this[p_]?p===void 0&&u===void 0:p===void 0)return c(null,v);v.push(this[p_]?[p,u]:p),v.length===t?c(null,v):this._next(s)};this._next(s)}all(t,n){return n=gA(t,n),n=tD(n,Es),t=nD(t,h_),this[Cu]?this.nextTick(n,new uo("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[Da]?this.nextTick(n,new uo("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[Da]=!0,this[Kc]=n,this[rD]=!0,this[bo]>=this[bu]?this.nextTick(this[oi],null,[]):this._all(t,this[oi])),n[Es]}_all(t,n){let c=this[bo],v=[],s=()=>{let p=this[bu]<1/0?Math.min(1e3,this[bu]-c):1e3;p<=0?this.nextTick(n,null,v):this._nextv(p,h_,a)},a=(p,u)=>{p?n(p):u.length===0?n(null,v):(v.push.apply(v,u),c+=u.length,s())};s()}[Su](){let t=this[Kc];return this[oD]&&t===null?G6:(this[Da]=!1,this[Kc]=null,this[Cu]&&this._close(this[Qf]),t)}[Ca](t,n,c){this[rD]?this.close(t.bind(null,n,c)):t(n,c)}seek(t,n){if(n=nD(n,h_),!this[Cu]){if(this[Da])throw new uo("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let c=this.db.keyEncoding(n.keyEncoding||this[wu]),v=c.format;n.keyEncoding!==v&&(n={...n,keyEncoding:v});let s=this.db.prefixKey(c.encode(t),v);this._seek(s,n)}}}_seek(t,n){throw new uo("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(t){return t=tD(t,Es),this[d_]?this.nextTick(t):this[Cu]?this[Xf].push(t):(this[Cu]=!0,this[Xf].push(t),this[Da]?this[oD]&&this[Su]()(new uo("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[Qf])),t[Es]}_close(t){this.nextTick(t)}[Qf](){this[d_]=!0,this.db.detachResource(this);let t=this[Xf];this[Xf]=[];for(let n of t)n()}async*[Symbol.asyncIterator](){try{let t;for(;(t=await this.next())!==void 0;)yield t}finally{this[d_]||await this.close()}}},Qc=class extends Yf{constructor(t,n){super(t,n,!0),this[aD]=n.keys!==!1,this[iD]=n.values!==!1}[Ts](t,n,c){let v=this[Su]();if(t)return v(t);try{n=this[aD]&&n!==void 0?this[wu].decode(n):void 0,c=this[iD]&&c!==void 0?this[Ms].decode(c):void 0}catch(s){return v(new Eu("entry",s))}n===void 0&&c===void 0||this[bo]++,v(null,n,c)}[oi](t,n){let c=this[Su]();if(t)return this[Ca](c,t);try{for(let v of n){let s=v[0],a=v[1];v[0]=this[aD]&&s!==void 0?this[wu].decode(s):void 0,v[1]=this[iD]&&a!==void 0?this[Ms].decode(a):void 0}}catch(v){return this[Ca](c,new Eu("entries",v))}this[bo]+=n.length,this[Ca](c,null,n)}end(t){return!yA&&typeof console<"u"&&(yA=!0,console.warn(new uo("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(t)}},uD=class extends Yf{constructor(t,n){super(t,n,!1)}[Ts](t,n){let c=this[Su]();if(t)return c(t);try{n=n!==void 0?this[wu].decode(n):void 0}catch(v){return c(new Eu("key",v))}n!==void 0&&this[bo]++,c(null,n)}[oi](t,n){let c=this[Su]();if(t)return this[Ca](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[wu].decode(s):void 0}}catch(v){return this[Ca](c,new Eu("keys",v))}this[bo]+=n.length,this[Ca](c,null,n)}},sD=class extends Yf{constructor(t,n){super(t,n,!1)}[Ts](t,n){let c=this[Su]();if(t)return c(t);try{n=n!==void 0?this[Ms].decode(n):void 0}catch(v){return c(new Eu("value",v))}n!==void 0&&this[bo]++,c(null,n)}[oi](t,n){let c=this[Su]();if(t)return this[Ca](c,t);try{for(let v=0;v<n.length;v++){let s=n[v];n[v]=s!==void 0?this[Ms].decode(s):void 0}}catch(v){return this[Ca](c,new Eu("values",v))}this[bo]+=n.length,this[Ca](c,null,n)}},Eu=class extends uo{constructor(t,n){super(`Iterator could not decode ${t}`,{code:"LEVEL_DECODE_ERROR",cause:n})}};for(let e of["_ended property","_nexting property","_end method"])Object.defineProperty(Qc.prototype,e.split(" ")[0],{get(){throw new uo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new uo(`The ${e} has been removed`,{code:"LEVEL_LEGACY"})}});Qc.keyEncoding=wu;Qc.valueEncoding=Ms;__.AbstractIterator=Qc;__.AbstractKeyIterator=uD;__.AbstractValueIterator=sD});var DA=_t(cD=>{"use strict";var{AbstractKeyIterator:J6,AbstractValueIterator:j6}=Tu(),Ls=Symbol("iterator"),Zf=Symbol("callback"),Xc=Symbol("handleOne"),Fs=Symbol("handleMany"),ed=class extends J6{constructor(t,n){super(t,n),this[Ls]=t.iterator({...n,keys:!0,values:!1}),this[Xc]=this[Xc].bind(this),this[Fs]=this[Fs].bind(this)}},v_=class extends j6{constructor(t,n){super(t,n),this[Ls]=t.iterator({...n,keys:!1,values:!0}),this[Xc]=this[Xc].bind(this),this[Fs]=this[Fs].bind(this)}};for(let e of[ed,v_]){let t=e===ed,n=t?c=>c[0]:c=>c[1];e.prototype._next=function(c){this[Zf]=c,this[Ls].next(this[Xc])},e.prototype[Xc]=function(c,v,s){let a=this[Zf];c?a(c):a(null,t?v:s)},e.prototype._nextv=function(c,v,s){this[Zf]=s,this[Ls].nextv(c,v,this[Fs])},e.prototype._all=function(c,v){this[Zf]=v,this[Ls].all(c,this[Fs])},e.prototype[Fs]=function(c,v){let s=this[Zf];c?s(c):s(null,v.map(n))},e.prototype._seek=function(c,v){this[Ls].seek(c,v)},e.prototype._close=function(c){this[Ls].close(c)}}cD.DefaultKeyIterator=ed;cD.DefaultValueIterator=v_});var CA=_t(b_=>{"use strict";var{AbstractIterator:K6,AbstractKeyIterator:Q6,AbstractValueIterator:X6}=Tu(),lD=Bo(),Vr=Symbol("nut"),D_=Symbol("undefer"),C_=Symbol("factory"),m_=class extends K6{constructor(t,n){super(t,n),this[Vr]=null,this[C_]=()=>t.iterator(n),this.db.defer(()=>this[D_]())}},g_=class extends Q6{constructor(t,n){super(t,n),this[Vr]=null,this[C_]=()=>t.keys(n),this.db.defer(()=>this[D_]())}},y_=class extends X6{constructor(t,n){super(t,n),this[Vr]=null,this[C_]=()=>t.values(n),this.db.defer(()=>this[D_]())}};for(let e of[m_,g_,y_])e.prototype[D_]=function(){this.db.status==="open"&&(this[Vr]=this[C_]())},e.prototype._next=function(t){this[Vr]!==null?this[Vr].next(t):this.db.status==="opening"?this.db.defer(()=>this._next(t)):this.nextTick(t,new lD("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._nextv=function(t,n,c){this[Vr]!==null?this[Vr].nextv(t,n,c):this.db.status==="opening"?this.db.defer(()=>this._nextv(t,n,c)):this.nextTick(c,new lD("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._all=function(t,n){this[Vr]!==null?this[Vr].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(t,n)):this.nextTick(n,new lD("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},e.prototype._seek=function(t,n){this[Vr]!==null?this[Vr]._seek(t,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(t,n))},e.prototype._close=function(t){this[Vr]!==null?this[Vr].close(t):this.db.status==="opening"?this.db.defer(()=>this._close(t)):this.nextTick(t)};b_.DeferredIterator=m_;b_.DeferredKeyIterator=g_;b_.DeferredValueIterator=y_});var dD=_t(wA=>{"use strict";var{fromCallback:bA}=Kf(),w_=Bo(),{getCallback:Y6,getOptions:Z6}=f_(),S_=Symbol("promise"),wo=Symbol("status"),Yc=Symbol("operations"),td=Symbol("finishClose"),Zc=Symbol("closeCallbacks"),fD=class{constructor(t){if(typeof t!="object"||t===null){let n=t===null?"null":typeof t;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[Yc]=[],this[Zc]=[],this[wo]="open",this[td]=this[td].bind(this),this.db=t,this.db.attachResource(this),this.nextTick=t.nextTick}get length(){return this[Yc].length}put(t,n,c){if(this[wo]!=="open")throw new w_("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let v=this.db._checkKey(t)||this.db._checkValue(n);if(v)throw v;let s=c&&c.sublevel!=null?c.sublevel:this.db,a=c,p=s.keyEncoding(c&&c.keyEncoding),u=s.valueEncoding(c&&c.valueEncoding),r=p.format;c={...c,keyEncoding:r,valueEncoding:u.format},s!==this.db&&(c.sublevel=null);let i=s.prefixKey(p.encode(t),r),l=u.encode(n);return this._put(i,l,c),this[Yc].push({...a,type:"put",key:t,value:n}),this}_put(t,n,c){}del(t,n){if(this[wo]!=="open")throw new w_("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let c=this.db._checkKey(t);if(c)throw c;let v=n&&n.sublevel!=null?n.sublevel:this.db,s=n,a=v.keyEncoding(n&&n.keyEncoding),p=a.format;return n={...n,keyEncoding:p},v!==this.db&&(n.sublevel=null),this._del(v.prefixKey(a.encode(t),p),n),this[Yc].push({...s,type:"del",key:t}),this}_del(t,n){}clear(){if(this[wo]!=="open")throw new w_("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[Yc]=[],this}_clear(){}write(t,n){return n=Y6(t,n),n=bA(n,S_),t=Z6(t),this[wo]!=="open"?this.nextTick(n,new w_("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[wo]="writing",this._write(t,c=>{this[wo]="closing",this[Zc].push(()=>n(c)),c||this.db.emit("batch",this[Yc]),this._close(this[td])})),n[S_]}_write(t,n){}close(t){return t=bA(t,S_),this[wo]==="closing"?this[Zc].push(t):this[wo]==="closed"?this.nextTick(t):(this[Zc].push(t),this[wo]!=="writing"&&(this[wo]="closing",this._close(this[td]))),t[S_]}_close(t){this.nextTick(t)}[td](){this[wo]="closed",this.db.detachResource(this);let t=this[Zc];this[Zc]=[];for(let n of t)n()}};wA.AbstractChainedBatch=fD});var EA=_t(SA=>{"use strict";var{AbstractChainedBatch:eq}=dD(),tq=Bo(),el=Symbol("encoded"),pD=class extends eq{constructor(t){super(t),this[el]=[]}_put(t,n,c){this[el].push({...c,type:"put",key:t,value:n})}_del(t,n){this[el].push({...n,type:"del",key:t})}_clear(){this[el]=[]}_write(t,n){this.db.status==="opening"?this.db.defer(()=>this._write(t,n)):this.db.status==="open"?this[el].length===0?this.nextTick(n):this.db._batch(this[el],t,n):this.nextTick(n,new tq("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};SA.DefaultChainedBatch=pD});var LA=_t((k_e,MA)=>{"use strict";var TA=Bo(),nq=Object.prototype.hasOwnProperty,rq=new Set(["lt","lte","gt","gte"]);MA.exports=function(e,t){let n={};for(let c in e)if(nq.call(e,c)&&!(c==="keyEncoding"||c==="valueEncoding")){if(c==="start"||c==="end")throw new TA(`The legacy range option '${c}' has been removed`,{code:"LEVEL_LEGACY"});if(c==="encoding")throw new TA("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rq.has(c)?n[c]=t.encode(e[c]):n[c]=e[c]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n}});var hD=_t((O_e,xA)=>{var FA;xA.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:global):e=>(FA||(FA=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0))});var RA=_t((H_e,IA)=>{"use strict";var AA=hD();IA.exports=function(e,...t){t.length===0?AA(e):AA(()=>e(...t))}});var $A=_t(E_=>{"use strict";var{AbstractIterator:oq,AbstractKeyIterator:aq,AbstractValueIterator:iq}=Tu(),tl=Symbol("unfix"),Wo=Symbol("iterator"),xs=Symbol("handleOne"),Mu=Symbol("handleMany"),ai=Symbol("callback"),nd=class extends oq{constructor(t,n,c,v){super(t,n),this[Wo]=c,this[tl]=v,this[xs]=this[xs].bind(this),this[Mu]=this[Mu].bind(this),this[ai]=null}[xs](t,n,c){let v=this[ai];if(t)return v(t);n!==void 0&&(n=this[tl](n)),v(t,n,c)}[Mu](t,n){let c=this[ai];if(t)return c(t);for(let v of n){let s=v[0];s!==void 0&&(v[0]=this[tl](s))}c(t,n)}},rd=class extends aq{constructor(t,n,c,v){super(t,n),this[Wo]=c,this[tl]=v,this[xs]=this[xs].bind(this),this[Mu]=this[Mu].bind(this),this[ai]=null}[xs](t,n){let c=this[ai];if(t)return c(t);n!==void 0&&(n=this[tl](n)),c(t,n)}[Mu](t,n){let c=this[ai];if(t)return c(t);for(let v=0;v<n.length;v++){let s=n[v];s!==void 0&&(n[v]=this[tl](s))}c(t,n)}},od=class extends iq{constructor(t,n,c){super(t,n),this[Wo]=c}};for(let e of[nd,rd])e.prototype._next=function(t){this[ai]=t,this[Wo].next(this[xs])},e.prototype._nextv=function(t,n,c){this[ai]=c,this[Wo].nextv(t,n,this[Mu])},e.prototype._all=function(t,n){this[ai]=n,this[Wo].all(t,this[Mu])};for(let e of[od])e.prototype._next=function(t){this[Wo].next(t)},e.prototype._nextv=function(t,n,c){this[Wo].nextv(t,n,c)},e.prototype._all=function(t,n){this[Wo].all(t,n)};for(let e of[nd,rd,od])e.prototype._seek=function(t,n){this[Wo].seek(t,n)},e.prototype._close=function(t){this[Wo].close(t)};E_.AbstractSublevelIterator=nd;E_.AbstractSublevelKeyIterator=rd;E_.AbstractSublevelValueIterator=od});var PA=_t((N_e,HA)=>{"use strict";var _D=Bo(),{Buffer:gD}=o_()||{},{AbstractSublevelIterator:uq,AbstractSublevelKeyIterator:sq,AbstractSublevelValueIterator:cq}=$A(),ii=Symbol("prefix"),kA=Symbol("upperBound"),ad=Symbol("prefixRange"),so=Symbol("parent"),vD=Symbol("unfix"),OA=new TextEncoder,lq={separator:"!"};HA.exports=function({AbstractLevel:e}){class t extends e{static defaults(c){if(typeof c=="string")throw new _D("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(c&&c.open)throw new _D("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return c==null?lq:c.separator?c:{...c,separator:"!"}}constructor(c,v,s){let{separator:a,manifest:p,...u}=t.defaults(s);v=dq(v,a);let r=a.charCodeAt(0)+1,i=c[so]||c;if(!OA.encode(v).every(f=>f>r&&f<127))throw new _D(`Prefix must use bytes > ${r} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(fq(i,p),u);let l=(c.prefix||"")+a+v+a,d=l.slice(0,-1)+String.fromCharCode(r);this[so]=i,this[ii]=new T_(l),this[kA]=new T_(d),this[vD]=new yD,this.nextTick=i.nextTick}prefixKey(c,v){if(v==="utf8")return this[ii].utf8+c;if(c.byteLength===0)return this[ii][v];if(v==="view"){let s=this[ii].view,a=new Uint8Array(s.byteLength+c.byteLength);return a.set(s,0),a.set(c,s.byteLength),a}else{let s=this[ii].buffer;return gD.concat([s,c],s.byteLength+c.byteLength)}}[ad](c,v){c.gte!==void 0?c.gte=this.prefixKey(c.gte,v):c.gt!==void 0?c.gt=this.prefixKey(c.gt,v):c.gte=this[ii][v],c.lte!==void 0?c.lte=this.prefixKey(c.lte,v):c.lt!==void 0?c.lt=this.prefixKey(c.lt,v):c.lte=this[kA][v]}get prefix(){return this[ii].utf8}get db(){return this[so]}_open(c,v){this[so].open({passive:!0},v)}_put(c,v,s,a){this[so].put(c,v,s,a)}_get(c,v,s){this[so].get(c,v,s)}_getMany(c,v,s){this[so].getMany(c,v,s)}_del(c,v,s){this[so].del(c,v,s)}_batch(c,v,s){this[so].batch(c,v,s)}_clear(c,v){this[ad](c,c.keyEncoding),this[so].clear(c,v)}_iterator(c){this[ad](c,c.keyEncoding);let v=this[so].iterator(c),s=this[vD].get(this[ii].utf8.length,c.keyEncoding);return new uq(this,c,v,s)}_keys(c){this[ad](c,c.keyEncoding);let v=this[so].keys(c),s=this[vD].get(this[ii].utf8.length,c.keyEncoding);return new sq(this,c,v,s)}_values(c){this[ad](c,c.keyEncoding);let v=this[so].values(c);return new cq(this,c,v)}}return{AbstractSublevel:t}};var fq=function(e,t){return{...e.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...t,encodings:{utf8:mD(e,"utf8"),buffer:mD(e,"buffer"),view:mD(e,"view")}}},mD=function(e,t){return e.supports.encodings[t]?e.keyEncoding(t).name===t:!1},T_=class{constructor(t){this.utf8=t,this.view=OA.encode(t),this.buffer=gD?gD.from(this.view.buffer,0,this.view.byteLength):{}}},yD=class{constructor(){this.cache=new Map}get(t,n){let c=this.cache.get(n);return c===void 0&&(n==="view"?c=function(v,s){return s.subarray(v)}.bind(null,t):c=function(v,s){return s.slice(v)}.bind(null,t),this.cache.set(n,c)),c}},dq=function(e,t){let n=0,c=e.length;for(;n<c&&e[n]===t;)n++;for(;c>n&&e[c-1]===t;)c--;return e.slice(n,c)}});var SD=_t(wD=>{"use strict";var{supports:pq}=Mx(),{Transcoder:hq}=rA(),{EventEmitter:_q}=hA(),{fromCallback:Lu}=Kf(),Uo=Bo(),{AbstractIterator:As}=Tu(),{DefaultKeyIterator:vq,DefaultValueIterator:mq}=DA(),{DeferredIterator:gq,DeferredKeyIterator:yq,DeferredValueIterator:Dq}=CA(),{DefaultChainedBatch:NA}=EA(),{getCallback:Is,getOptions:Fu}=f_(),M_=LA(),dt=Symbol("promise"),ui=Symbol("landed"),Rs=Symbol("resources"),DD=Symbol("closeResources"),id=Symbol("operations"),ud=Symbol("undefer"),L_=Symbol("deferOpen"),BA=Symbol("options"),yt=Symbol("status"),$s=Symbol("defaultOptions"),nl=Symbol("transcoder"),F_=Symbol("keyEncoding"),CD=Symbol("valueEncoding"),Cq=()=>{},sd=class extends _q{constructor(t,n){if(super(),typeof t!="object"||t===null)throw new TypeError("The first argument 'manifest' must be an object");n=Fu(n);let{keyEncoding:c,valueEncoding:v,passive:s,...a}=n;this[Rs]=new Set,this[id]=[],this[L_]=!0,this[BA]=a,this[yt]="opening",this.supports=pq(t,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:t.snapshots!==!1,permanence:t.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:t.encodings||{},events:Object.assign({},t.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[nl]=new hq(bq(this)),this[F_]=this[nl].encoding(c||"utf8"),this[CD]=this[nl].encoding(v||"utf8");for(let p of this[nl].encodings())this.supports.encodings[p.commonName]||(this.supports.encodings[p.commonName]=!0);this[$s]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[F_].commonName,valueEncoding:this[CD].commonName}),key:Object.freeze({keyEncoding:this[F_].commonName})},this.nextTick(()=>{this[L_]&&this.open({passive:!1},Cq)})}get status(){return this[yt]}keyEncoding(t){return this[nl].encoding(t??this[F_])}valueEncoding(t){return this[nl].encoding(t??this[CD])}open(t,n){n=Is(t,n),n=Lu(n,dt),t={...this[BA],...Fu(t)},t.createIfMissing=t.createIfMissing!==!1,t.errorIfExists=!!t.errorIfExists;let c=v=>{this[yt]==="closing"||this[yt]==="opening"?this.once(ui,v?()=>c(v):c):this[yt]!=="open"?n(new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:v})):n()};return t.passive?this[yt]==="opening"?this.once(ui,c):this.nextTick(c):this[yt]==="closed"||this[L_]?(this[L_]=!1,this[yt]="opening",this.emit("opening"),this._open(t,v=>{if(v){this[yt]="closed",this[DD](()=>{this.emit(ui),c(v)}),this[ud]();return}this[yt]="open",this[ud](),this.emit(ui),this[yt]==="open"&&this.emit("open"),this[yt]==="open"&&this.emit("ready"),c()})):this[yt]==="open"?this.nextTick(c):this.once(ui,()=>this.open(t,n)),n[dt]}_open(t,n){this.nextTick(n)}close(t){t=Lu(t,dt);let n=c=>{this[yt]==="opening"||this[yt]==="closing"?this.once(ui,c?n(c):n):this[yt]!=="closed"?t(new Uo("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:c})):t()};if(this[yt]==="open"){this[yt]="closing",this.emit("closing");let c=v=>{this[yt]="open",this[ud](),this.emit(ui),n(v)};this[DD](()=>{this._close(v=>{if(v)return c(v);this[yt]="closed",this[ud](),this.emit(ui),this[yt]==="closed"&&this.emit("closed"),n()})})}else this[yt]==="closed"?this.nextTick(n):this.once(ui,()=>this.close(t));return t[dt]}[DD](t){if(this[Rs].size===0)return this.nextTick(t);let n=this[Rs].size,c=!0,v=()=>{--n===0&&(c?this.nextTick(t):t())};for(let s of this[Rs])s.close(v);c=!1,this[Rs].clear()}_close(t){this.nextTick(t)}get(t,n,c){if(c=Is(n,c),c=Lu(c,dt),n=Fu(n,this[$s].entry),this[yt]==="opening")return this.defer(()=>this.get(t,n,c)),c[dt];if(rl(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=this.valueEncoding(n.valueEncoding),p=s.format,u=a.format;return(n.keyEncoding!==p||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:p,valueEncoding:u})),this._get(this.prefixKey(s.encode(t),p),n,(r,i)=>{if(r)return(r.code==="LEVEL_NOT_FOUND"||r.notFound||/NotFound/i.test(r))&&(r.code||(r.code="LEVEL_NOT_FOUND"),r.notFound||(r.notFound=!0),r.status||(r.status=404)),c(r);try{i=a.decode(i)}catch(l){return c(new Uo("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,i)}),c[dt]}_get(t,n,c){this.nextTick(c,new Error("NotFound"))}getMany(t,n,c){if(c=Is(n,c),c=Lu(c,dt),n=Fu(n,this[$s].entry),this[yt]==="opening")return this.defer(()=>this.getMany(t,n,c)),c[dt];if(rl(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'keys' must be an array")),c[dt];if(t.length===0)return this.nextTick(c,null,[]),c[dt];let v=this.keyEncoding(n.keyEncoding),s=this.valueEncoding(n.valueEncoding),a=v.format,p=s.format;(n.keyEncoding!==a||n.valueEncoding!==p)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:p}));let u=new Array(t.length);for(let r=0;r<t.length;r++){let i=t[r],l=this._checkKey(i);if(l)return this.nextTick(c,l),c[dt];u[r]=this.prefixKey(v.encode(i),a)}return this._getMany(u,n,(r,i)=>{if(r)return c(r);try{for(let l=0;l<i.length;l++)i[l]!==void 0&&(i[l]=s.decode(i[l]))}catch(l){return c(new Uo(`Could not decode one or more of ${i.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:l}))}c(null,i)}),c[dt]}_getMany(t,n,c){this.nextTick(c,null,new Array(t.length).fill(void 0))}put(t,n,c,v){if(v=Is(c,v),v=Lu(v,dt),c=Fu(c,this[$s].entry),this[yt]==="opening")return this.defer(()=>this.put(t,n,c,v)),v[dt];if(rl(this,v))return v[dt];let s=this._checkKey(t)||this._checkValue(n);if(s)return this.nextTick(v,s),v[dt];let a=this.keyEncoding(c.keyEncoding),p=this.valueEncoding(c.valueEncoding),u=a.format,r=p.format;(c.keyEncoding!==u||c.valueEncoding!==r)&&(c=Object.assign({},c,{keyEncoding:u,valueEncoding:r}));let i=this.prefixKey(a.encode(t),u),l=p.encode(n);return this._put(i,l,c,d=>{if(d)return v(d);this.emit("put",t,n),v()}),v[dt]}_put(t,n,c,v){this.nextTick(v)}del(t,n,c){if(c=Is(n,c),c=Lu(c,dt),n=Fu(n,this[$s].key),this[yt]==="opening")return this.defer(()=>this.del(t,n,c)),c[dt];if(rl(this,c))return c[dt];let v=this._checkKey(t);if(v)return this.nextTick(c,v),c[dt];let s=this.keyEncoding(n.keyEncoding),a=s.format;return n.keyEncoding!==a&&(n=Object.assign({},n,{keyEncoding:a})),this._del(this.prefixKey(s.encode(t),a),n,p=>{if(p)return c(p);this.emit("del",t),c()}),c[dt]}_del(t,n,c){this.nextTick(c)}batch(t,n,c){if(!arguments.length){if(this[yt]==="opening")return new NA(this);if(this[yt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof t=="function"?c=t:c=Is(n,c),c=Lu(c,dt),n=Fu(n,this[$s].empty),this[yt]==="opening")return this.defer(()=>this.batch(t,n,c)),c[dt];if(rl(this,c))return c[dt];if(!Array.isArray(t))return this.nextTick(c,new TypeError("The first argument 'operations' must be an array")),c[dt];if(t.length===0)return this.nextTick(c),c[dt];let v=new Array(t.length),{keyEncoding:s,valueEncoding:a,...p}=n;for(let u=0;u<t.length;u++){if(typeof t[u]!="object"||t[u]===null)return this.nextTick(c,new TypeError("A batch operation must be an object")),c[dt];let r=Object.assign({},t[u]);if(r.type!=="put"&&r.type!=="del")return this.nextTick(c,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),c[dt];let i=this._checkKey(r.key);if(i)return this.nextTick(c,i),c[dt];let l=r.sublevel!=null?r.sublevel:this,d=l.keyEncoding(r.keyEncoding||s),f=d.format;if(r.key=l.prefixKey(d.encode(r.key),f),r.keyEncoding=f,r.type==="put"){let o=this._checkValue(r.value);if(o)return this.nextTick(c,o),c[dt];let h=l.valueEncoding(r.valueEncoding||a);r.value=h.encode(r.value),r.valueEncoding=h.format}l!==this&&(r.sublevel=null),v[u]=r}return this._batch(v,p,u=>{if(u)return c(u);this.emit("batch",t),c()}),c[dt]}_batch(t,n,c){this.nextTick(c)}sublevel(t,n){return this._sublevel(t,bD.defaults(n))}_sublevel(t,n){return new bD(this,t,n)}prefixKey(t,n){return t}clear(t,n){if(n=Is(t,n),n=Lu(n,dt),t=Fu(t,this[$s].empty),this[yt]==="opening")return this.defer(()=>this.clear(t,n)),n[dt];if(rl(this,n))return n[dt];let c=t,v=this.keyEncoding(t.keyEncoding);return t=M_(t,v),t.keyEncoding=v.format,t.limit===0?this.nextTick(n):this._clear(t,s=>{if(s)return n(s);this.emit("clear",c),n()}),n[dt]}_clear(t,n){this.nextTick(n)}iterator(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=M_(t,n),t.keys=t.keys!==!1,t.values=t.values!==!1,t[As.keyEncoding]=n,t[As.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[yt]==="opening")return new gq(this,t);if(this[yt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(t)}_iterator(t){return new As(this,t)}keys(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=M_(t,n),t[As.keyEncoding]=n,t[As.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[yt]==="opening")return new yq(this,t);if(this[yt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(t)}_keys(t){return new vq(this,t)}values(t){let n=this.keyEncoding(t&&t.keyEncoding),c=this.valueEncoding(t&&t.valueEncoding);if(t=M_(t,n),t[As.keyEncoding]=n,t[As.valueEncoding]=c,t.keyEncoding=n.format,t.valueEncoding=c.format,this[yt]==="opening")return new Dq(this,t);if(this[yt]!=="open")throw new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(t)}_values(t){return new mq(this,t)}defer(t){if(typeof t!="function")throw new TypeError("The first argument must be a function");this[id].push(t)}[ud](){if(this[id].length===0)return;let t=this[id];this[id]=[];for(let n of t)n()}attachResource(t){if(typeof t!="object"||t===null||typeof t.close!="function")throw new TypeError("The first argument must be a resource object");this[Rs].add(t)}detachResource(t){this[Rs].delete(t)}_chainedBatch(){return new NA(this)}_checkKey(t){if(t==null)return new Uo("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(t){if(t==null)return new Uo("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};sd.prototype.nextTick=RA();var{AbstractSublevel:bD}=PA()({AbstractLevel:sd});wD.AbstractLevel=sd;wD.AbstractSublevel=bD;var rl=function(e,t){return e[yt]!=="open"?(e.nextTick(t,new Uo("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},bq=function(e){return Object.keys(e.supports.encodings).filter(t=>!!e.supports.encodings[t])}});var ED=_t(ks=>{"use strict";ks.AbstractLevel=SD().AbstractLevel;ks.AbstractSublevel=SD().AbstractSublevel;ks.AbstractIterator=Tu().AbstractIterator;ks.AbstractKeyIterator=Tu().AbstractKeyIterator;ks.AbstractValueIterator=Tu().AbstractValueIterator;ks.AbstractChainedBatch=dD().AbstractChainedBatch});var UA=_t((U_e,WA)=>{WA.exports=Sq;var wq=hD();function Sq(e,t,n){if(typeof t!="number")throw new Error("second argument must be a Number");let c,v,s,a,p,u=!0,r;Array.isArray(e)?(c=[],s=v=e.length):(a=Object.keys(e),c={},s=v=a.length);function i(d){function f(){n&&n(d,c),n=null}u?wq(f):f()}function l(d,f,o){if(c[d]=o,f&&(p=!0),--s===0||f)i(f);else if(!p&&r<v){let h;a?(h=a[r],r+=1,e[h](function(_,m){l(h,_,m)})):(h=r,r+=1,e[h](function(_,m){l(h,_,m)}))}}r=t,s?a?a.some(function(d,f){return e[d](function(o,h){l(d,o,h)}),f===t-1}):e.some(function(d,f){return d(function(o,h){l(f,o,h)}),f===t-1}):i(null),u=!1}});var TD=_t((q_e,qA)=>{"use strict";qA.exports=function(t){let n=t.gte!==void 0?t.gte:t.gt!==void 0?t.gt:void 0,c=t.lte!==void 0?t.lte:t.lt!==void 0?t.lt:void 0,v=t.gte===void 0,s=t.lte===void 0;return n!==void 0&&c!==void 0?IDBKeyRange.bound(n,c,v,s):n!==void 0?IDBKeyRange.lowerBound(n,v):c!==void 0?IDBKeyRange.upperBound(c,s):null}});var MD=_t((z_e,zA)=>{"use strict";var Eq=new TextEncoder;zA.exports=function(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):Eq.encode(e)}});var KA=_t(jA=>{"use strict";var{AbstractIterator:Tq}=ED(),VA=TD(),x_=MD(),ba=Symbol("cache"),si=Symbol("finished"),co=Symbol("options"),ci=Symbol("currentOptions"),Os=Symbol("position"),LD=Symbol("location"),ol=Symbol("first"),GA={},FD=class extends Tq{constructor(t,n,c){super(t,c),this[ba]=[],this[si]=this.limit===0,this[co]=c,this[ci]={...c},this[Os]=void 0,this[LD]=n,this[ol]=!0}_nextv(t,n,c){if(this[ol]=!1,this[si])return this.nextTick(c,null,[]);if(this[ba].length>0)return t=Math.min(t,this[ba].length),this.nextTick(c,null,this[ba].splice(0,t));this[Os]!==void 0&&(this[co].reverse?(this[ci].lt=this[Os],this[ci].lte=void 0):(this[ci].gt=this[Os],this[ci].gte=void 0));let v;try{v=VA(this[ci])}catch{return this[si]=!0,this.nextTick(c,null,[])}let s=this.db.db.transaction([this[LD]],"readonly"),a=s.objectStore(this[LD]),p=[];if(this[co].reverse){let u=!this[co].values&&a.openKeyCursor?"openKeyCursor":"openCursor";a[u](v,"prev").onsuccess=r=>{let i=r.target.result;if(i){let{key:l,value:d}=i;this[Os]=l,p.push([this[co].keys&&l!==void 0?x_(l):void 0,this[co].values&&d!==void 0?x_(d):void 0]),p.length<t?i.continue():JA(s)}else this[si]=!0}}else{let u,r,i=()=>{if(u===void 0||r===void 0)return;let l=Math.max(u.length,r.length);l===0||t===1/0?this[si]=!0:this[Os]=u[l-1],p.length=l;for(let d=0;d<l;d++){let f=u[d],o=r[d];p[d]=[this[co].keys&&f!==void 0?x_(f):void 0,this[co].values&&o!==void 0?x_(o):void 0]}JA(s)};this[co].keys||t<1/0?a.getAllKeys(v,t<1/0?t:void 0).onsuccess=l=>{u=l.target.result,i()}:(u=[],this.nextTick(i)),this[co].values?a.getAll(v,t<1/0?t:void 0).onsuccess=l=>{r=l.target.result,i()}:(r=[],this.nextTick(i))}s.onabort=()=>{c(s.error||new Error("aborted by user")),c=null},s.oncomplete=()=>{c(null,p),c=null}}_next(t){if(this[ba].length>0){let[n,c]=this[ba].shift();this.nextTick(t,null,n,c)}else if(this[si])this.nextTick(t);else{let n=Math.min(100,this.limit-this.count);this[ol]&&(this[ol]=!1,n=1),this._nextv(n,GA,(c,v)=>{if(c)return t(c);this[ba]=v,this._next(t)})}}_all(t,n){this[ol]=!1;let c=this[ba].splice(0,this[ba].length),v=this.limit-this.count-c.length;if(v<=0)return this.nextTick(n,null,c);this._nextv(v,GA,(s,a)=>{if(s)return n(s);c.length>0&&(a=c.concat(a)),n(null,a)})}_seek(t,n){this[ol]=!0,this[ba]=[],this[si]=!1,this[Os]=void 0,this[ci]={...this[co]};let c;try{c=VA(this[co])}catch{this[si]=!0;return}c!==null&&!c.includes(t)?this[si]=!0:this[co].reverse?this[ci].lte=t:this[ci].gte=t}};jA.Iterator=FD;function JA(e){typeof e.commit=="function"&&e.commit()}});var XA=_t((G_e,QA)=>{"use strict";QA.exports=function(t,n,c,v,s){if(v.limit===0)return t.nextTick(s);let a=t.db.transaction([n],"readwrite"),p=a.objectStore(n),u=0;a.oncomplete=function(){s()},a.onabort=function(){s(a.error||new Error("aborted by user"))};let r=p.openKeyCursor?"openKeyCursor":"openCursor",i=v.reverse?"prev":"next";p[r](c,i).onsuccess=function(l){let d=l.target.result;d&&(p.delete(d.key).onsuccess=function(){(v.limit<=0||++u<v.limit)&&d.continue()})}}});var rI=_t(nI=>{"use strict";var{AbstractLevel:Mq}=ED(),YA=Bo(),Lq=UA(),{fromCallback:Fq}=Kf(),{Iterator:xq}=KA(),ZA=MD(),Aq=XA(),Iq=TD(),tI="level-js-",cd=Symbol("idb"),xD=Symbol("namePrefix"),li=Symbol("location"),AD=Symbol("version"),Hs=Symbol("store"),ld=Symbol("onComplete"),eI=Symbol("promise"),A_=class extends Mq{constructor(t,n,c){if(typeof n=="function"||typeof c=="function")throw new YA("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:v,version:s,...a}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},a),typeof t!="string")throw new Error("constructor requires a location string argument");this[li]=t,this[xD]=v??tI,this[AD]=parseInt(s||1,10),this[cd]=null}get location(){return this[li]}get namePrefix(){return this[xD]}get version(){return this[AD]}get db(){return this[cd]}get type(){return"browser-level"}_open(t,n){let c=indexedDB.open(this[xD]+this[li],this[AD]);c.onerror=function(){n(c.error||new Error("unknown error"))},c.onsuccess=()=>{this[cd]=c.result,n()},c.onupgradeneeded=v=>{let s=v.target.result;s.objectStoreNames.contains(this[li])||s.createObjectStore(this[li])}}[Hs](t){return this[cd].transaction([this[li]],t).objectStore(this[li])}[ld](t,n){let c=t.transaction;c.onabort=function(){n(c.error||new Error("aborted by user"))},c.oncomplete=function(){n(null,t.result)}}_get(t,n,c){let v=this[Hs]("readonly"),s;try{s=v.get(t)}catch(a){return this.nextTick(c,a)}this[ld](s,function(a,p){if(a)return c(a);if(p===void 0)return c(new YA("Entry not found",{code:"LEVEL_NOT_FOUND"}));c(null,ZA(p))})}_getMany(t,n,c){let v=this[Hs]("readonly"),s=t.map(a=>p=>{let u;try{u=v.get(a)}catch(r){return p(r)}u.onsuccess=()=>{let r=u.result;p(null,r===void 0?r:ZA(r))},u.onerror=r=>{r.stopPropagation(),p(u.error)}});Lq(s,16,c)}_del(t,n,c){let v=this[Hs]("readwrite"),s;try{s=v.delete(t)}catch(a){return this.nextTick(c,a)}this[ld](s,c)}_put(t,n,c,v){let s=this[Hs]("readwrite"),a;try{a=s.put(n,t)}catch(p){return this.nextTick(v,p)}this[ld](a,v)}_iterator(t){return new xq(this,this[li],t)}_batch(t,n,c){let v=this[Hs]("readwrite"),s=v.transaction,a=0,p;s.onabort=function(){c(p||s.error||new Error("aborted by user"))},s.oncomplete=function(){c()};function u(){let r=t[a++],i=r.key,l;try{l=r.type==="del"?v.delete(i):v.put(r.value,i)}catch(d){p=d,s.abort();return}a<t.length?l.onsuccess=u:typeof s.commit=="function"&&s.commit()}u()}_clear(t,n){let c,v;try{c=Iq(t)}catch{return this.nextTick(n)}if(t.limit>=0)return Aq(this,this[li],c,t,n);try{let s=this[Hs]("readwrite");v=c?s.delete(c):s.clear()}catch(s){return this.nextTick(n,s)}this[ld](v,n)}_close(t){this[cd].close(),this.nextTick(t)}};A_.destroy=function(e,t,n){typeof t=="function"&&(n=t,t=tI),n=Fq(n,eI);let c=indexedDB.deleteDatabase(t+e);return c.onsuccess=function(){n()},c.onerror=function(v){n(v)},n[eI]};nI.BrowserLevel=A_});var ID=_t(oI=>{oI.Level=rI().BrowserLevel});var Fk=_t((Uv,Vw)=>{(function(e,t){typeof Uv=="object"&&typeof Vw=="object"?Vw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Uv=="object"?Uv.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let c=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(c._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,c=n._renderService.dimensions;if(c.css.cell.width===0||c.css.cell.height===0)return;let v=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,s=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(s.getPropertyValue("height")),p=Math.max(0,parseInt(s.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),r=a-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),i=p-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(i/c.css.cell.width)),rows:Math.max(1,Math.floor(r/c.css.cell.height))}}}})(),e})())});var Ak=_t((zv,Gw)=>{(function(e,t){typeof zv=="object"&&typeof Gw=="object"?Gw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof zv=="object"?zv.WebglAddon=t():e.WebglAddon=t()})(self,()=>(()=>{"use strict";var e={965:function(v,s,a){var p=this&&this.__decorate||function(D,g,b,L){var S,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var w=D.length-1;w>=0;w--)(S=D[w])&&(M=(T<3?S(M):T>3?S(g,b,M):S(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M};Object.defineProperty(s,"__esModule",{value:!0}),s.GlyphRenderer=void 0;let u=a(374),r=a(509),i=a(855),l=a(859),d=a(776),f=a(381),o=11,h=o*Float32Array.BYTES_PER_ELEMENT,_,m=0,y=0,C=0;class E extends l.Disposable{constructor(g,b,L){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let S=this._gl;r.TextureAtlas.maxAtlasPages===void 0&&(r.TextureAtlas.maxAtlasPages=Math.min(32,(0,u.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS))),r.TextureAtlas.maxTextureSize=(0,u.throwIfFalsy)(S.getParameter(S.MAX_TEXTURE_SIZE))),this._program=(0,u.throwIfFalsy)((0,f.createProgram)(S,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(R){let A="";for(let I=1;I<R;I++)A+=` else if (v_texpage == ${I}) { outColor = texture(u_texture[${I}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${R}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${A}
}`}(r.TextureAtlas.maxAtlasPages))),this.register((0,l.toDisposable)(()=>S.deleteProgram(this._program))),this._projectionLocation=(0,u.throwIfFalsy)(S.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,u.throwIfFalsy)(S.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,u.throwIfFalsy)(S.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=S.createVertexArray(),S.bindVertexArray(this._vertexArrayObject);let T=new Float32Array([0,0,1,0,0,1,1,1]),M=S.createBuffer();this.register((0,l.toDisposable)(()=>S.deleteBuffer(M))),S.bindBuffer(S.ARRAY_BUFFER,M),S.bufferData(S.ARRAY_BUFFER,T,S.STATIC_DRAW),S.enableVertexAttribArray(0),S.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let w=new Uint8Array([0,1,2,3]),F=S.createBuffer();this.register((0,l.toDisposable)(()=>S.deleteBuffer(F))),S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,F),S.bufferData(S.ELEMENT_ARRAY_BUFFER,w,S.STATIC_DRAW),this._attributesBuffer=(0,u.throwIfFalsy)(S.createBuffer()),this.register((0,l.toDisposable)(()=>S.deleteBuffer(this._attributesBuffer))),S.bindBuffer(S.ARRAY_BUFFER,this._attributesBuffer),S.enableVertexAttribArray(2),S.vertexAttribPointer(2,2,S.FLOAT,!1,h,0),S.vertexAttribDivisor(2,1),S.enableVertexAttribArray(3),S.vertexAttribPointer(3,2,S.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(3,1),S.enableVertexAttribArray(4),S.vertexAttribPointer(4,1,S.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(4,1),S.enableVertexAttribArray(5),S.vertexAttribPointer(5,2,S.FLOAT,!1,h,5*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(5,1),S.enableVertexAttribArray(6),S.vertexAttribPointer(6,2,S.FLOAT,!1,h,7*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(6,1),S.enableVertexAttribArray(1),S.vertexAttribPointer(1,2,S.FLOAT,!1,h,9*Float32Array.BYTES_PER_ELEMENT),S.vertexAttribDivisor(1,1),S.useProgram(this._program);let x=new Int32Array(r.TextureAtlas.maxAtlasPages);for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++)x[R]=R;S.uniform1iv(this._textureLocation,x),S.uniformMatrix4fv(this._projectionLocation,!1,f.PROJECTION_MATRIX),this._atlasTextures=[];for(let R=0;R<r.TextureAtlas.maxAtlasPages;R++){let A=new f.GLTexture((0,u.throwIfFalsy)(S.createTexture()));this.register((0,l.toDisposable)(()=>S.deleteTexture(A.texture))),S.activeTexture(S.TEXTURE0+R),S.bindTexture(S.TEXTURE_2D,A.texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[R]=A}S.enable(S.BLEND),S.blendFunc(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(g,b,L,S,T,M,w,F){this._updateCell(this._vertices.attributes,g,b,L,S,T,M,w,F)}_updateCell(g,b,L,S,T,M,w,F,x){m=(L*this._terminal.cols+b)*o,S!==i.NULL_CELL_CODE&&S!==void 0?this._atlas&&(_=F&&F.length>1?this._atlas.getRasterizedGlyphCombinedChar(F,T,M,w,!1):this._atlas.getRasterizedGlyph(S,T,M,w,!1),y=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),T!==x&&_.offset.x>y?(C=_.offset.x-y,g[m]=-(_.offset.x-C)+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=(_.size.x-C)/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x+C/this._atlas.pages[_.texturePage].canvas.width,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x-C/this._atlas.pages[_.texturePage].canvas.width,g[m+8]=_.sizeClipSpace.y):(g[m]=-_.offset.x+this._dimensions.device.char.left,g[m+1]=-_.offset.y+this._dimensions.device.char.top,g[m+2]=_.size.x/this._dimensions.device.canvas.width,g[m+3]=_.size.y/this._dimensions.device.canvas.height,g[m+4]=_.texturePage,g[m+5]=_.texturePositionClipSpace.x,g[m+6]=_.texturePositionClipSpace.y,g[m+7]=_.sizeClipSpace.x,g[m+8]=_.sizeClipSpace.y)):g.fill(0,m,m+o-1-2)}clear(){let g=this._terminal,b=g.cols*g.rows*o;this._vertices.count!==b?this._vertices.attributes=new Float32Array(b):this._vertices.attributes.fill(0);let L=0;for(;L<this._vertices.attributesBuffers.length;L++)this._vertices.count!==b?this._vertices.attributesBuffers[L]=new Float32Array(b):this._vertices.attributesBuffers[L].fill(0);this._vertices.count=b,L=0;for(let S=0;S<g.rows;S++)for(let T=0;T<g.cols;T++)this._vertices.attributes[L+9]=T/g.cols,this._vertices.attributes[L+10]=S/g.rows,L+=o}handleResize(){let g=this._gl;g.useProgram(this._program),g.viewport(0,0,g.canvas.width,g.canvas.height),g.uniform2f(this._resolutionLocation,g.canvas.width,g.canvas.height),this.clear()}render(g){if(!this._atlas)return;let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let L=this._vertices.attributesBuffers[this._activeBuffer],S=0;for(let T=0;T<g.lineLengths.length;T++){let M=T*this._terminal.cols*o,w=this._vertices.attributes.subarray(M,M+g.lineLengths[T]*o);L.set(w,S),S+=w.length}b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,L.subarray(0,S),b.STREAM_DRAW);for(let T=0;T<this._atlas.pages.length;T++)this._atlas.pages[T].version!==this._atlasTextures[T].version&&this._bindAtlasPageTexture(b,this._atlas,T);b.drawElementsInstanced(b.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,S/o)}setAtlas(g){this._atlas=g;for(let b of this._atlasTextures)b.version=-1}_bindAtlasPageTexture(g,b,L){g.activeTexture(g.TEXTURE0+L),g.bindTexture(g.TEXTURE_2D,this._atlasTextures[L].texture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,b.pages[L].canvas),g.generateMipmap(g.TEXTURE_2D),this._atlasTextures[L].version=b.pages[L].version}setDimensions(g){this._dimensions=g}}s.GlyphRenderer=E,p([d.traceCall],E.prototype,"updateCell",null)},742:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RectangleRenderer=void 0;let p=a(374),u=a(859),r=a(310),i=a(381),l=8*Float32Array.BYTES_PER_ELEMENT;class d{constructor(){this.attributes=new Float32Array(160),this.count=0}}let f=0,o=0,h=0,_=0,m=0,y=0,C=0;class E extends u.Disposable{constructor(g,b,L,S){super(),this._terminal=g,this._gl=b,this._dimensions=L,this._themeService=S,this._vertices=new d,this._verticesCursor=new d;let T=this._gl;this._program=(0,p.throwIfFalsy)((0,i.createProgram)(T,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,u.toDisposable)(()=>T.deleteProgram(this._program))),this._projectionLocation=(0,p.throwIfFalsy)(T.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=T.createVertexArray(),T.bindVertexArray(this._vertexArrayObject);let M=new Float32Array([0,0,1,0,0,1,1,1]),w=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(w))),T.bindBuffer(T.ARRAY_BUFFER,w),T.bufferData(T.ARRAY_BUFFER,M,T.STATIC_DRAW),T.enableVertexAttribArray(3),T.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let F=new Uint8Array([0,1,2,3]),x=T.createBuffer();this.register((0,u.toDisposable)(()=>T.deleteBuffer(x))),T.bindBuffer(T.ELEMENT_ARRAY_BUFFER,x),T.bufferData(T.ELEMENT_ARRAY_BUFFER,F,T.STATIC_DRAW),this._attributesBuffer=(0,p.throwIfFalsy)(T.createBuffer()),this.register((0,u.toDisposable)(()=>T.deleteBuffer(this._attributesBuffer))),T.bindBuffer(T.ARRAY_BUFFER,this._attributesBuffer),T.enableVertexAttribArray(0),T.vertexAttribPointer(0,2,T.FLOAT,!1,l,0),T.vertexAttribDivisor(0,1),T.enableVertexAttribArray(1),T.vertexAttribPointer(1,2,T.FLOAT,!1,l,2*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(1,1),T.enableVertexAttribArray(2),T.vertexAttribPointer(2,4,T.FLOAT,!1,l,4*Float32Array.BYTES_PER_ELEMENT),T.vertexAttribDivisor(2,1),this._updateCachedColors(S.colors),this.register(this._themeService.onChangeColors(R=>{this._updateCachedColors(R),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(g){let b=this._gl;b.useProgram(this._program),b.bindVertexArray(this._vertexArrayObject),b.uniformMatrix4fv(this._projectionLocation,!1,i.PROJECTION_MATRIX),b.bindBuffer(b.ARRAY_BUFFER,this._attributesBuffer),b.bufferData(b.ARRAY_BUFFER,g.attributes,b.DYNAMIC_DRAW),b.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,b.UNSIGNED_BYTE,0,g.count)}handleResize(){this._updateViewportRectangle()}setDimensions(g){this._dimensions=g}_updateCachedColors(g){this._bgFloat=this._colorToFloat32Array(g.background),this._cursorFloat=this._colorToFloat32Array(g.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(g){let b=this._terminal,L=this._vertices,S,T,M,w,F,x,R,A,I,$,k,H=1;for(S=0;S<b.rows;S++){for(M=-1,w=0,F=0,x=!1,T=0;T<b.cols;T++)R=(S*b.cols+T)*r.RENDER_MODEL_INDICIES_PER_CELL,A=g.cells[R+r.RENDER_MODEL_BG_OFFSET],I=g.cells[R+r.RENDER_MODEL_FG_OFFSET],$=!!(67108864&I),(A!==w||I!==F&&(x||$))&&((w!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,w,M,T,S)),M=T,w=A,F=I,x=$);(w!==0||x&&F!==0)&&(k=8*H++,this._updateRectangle(L,k,F,w,M,b.cols,S))}L.count=H}updateCursor(g){let b=this._verticesCursor,L=g.cursor;if(!L||L.style==="block")return void(b.count=0);let S,T=0;L.style!=="bar"&&L.style!=="outline"||(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.style==="bar"?L.dpr*L.cursorWidth:L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),L.style!=="underline"&&L.style!=="outline"||(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,(L.y+1)*this._dimensions.device.cell.height-L.dpr,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat)),L.style==="outline"&&(S=8*T++,this._addRectangleFloat(b.attributes,S,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat),S=8*T++,this._addRectangleFloat(b.attributes,S,(L.x+L.width)*this._dimensions.device.cell.width-L.dpr,L.y*this._dimensions.device.cell.height,L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),b.count=T}_updateRectangle(g,b,L,S,T,M,w){if(67108864&L)switch(50331648&L){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&L].rgba;break;case 50331648:f=(16777215&L)<<8;break;default:f=this._themeService.colors.foreground.rgba}else switch(50331648&S){case 16777216:case 33554432:f=this._themeService.colors.ansi[255&S].rgba;break;case 50331648:f=(16777215&S)<<8;break;default:f=this._themeService.colors.background.rgba}g.attributes.length<b+4&&(g.attributes=(0,i.expandFloat32Array)(g.attributes,this._terminal.rows*this._terminal.cols*8)),o=T*this._dimensions.device.cell.width,h=w*this._dimensions.device.cell.height,_=(f>>24&255)/255,m=(f>>16&255)/255,y=(f>>8&255)/255,C=1,this._addRectangle(g.attributes,b,o,h,(M-T)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,_,m,y,C)}_addRectangle(g,b,L,S,T,M,w,F,x,R){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=S/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w,g[b+5]=F,g[b+6]=x,g[b+7]=R}_addRectangleFloat(g,b,L,S,T,M,w){g[b]=L/this._dimensions.device.canvas.width,g[b+1]=S/this._dimensions.device.canvas.height,g[b+2]=T/this._dimensions.device.canvas.width,g[b+3]=M/this._dimensions.device.canvas.height,g[b+4]=w[0],g[b+5]=w[1],g[b+6]=w[2],g[b+7]=w[3]}_colorToFloat32Array(g){return new Float32Array([(g.rgba>>24&255)/255,(g.rgba>>16&255)/255,(g.rgba>>8&255)/255,(255&g.rgba)/255])}}s.RectangleRenderer=E},310:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderModel=s.COMBINED_CHAR_BIT_MASK=s.RENDER_MODEL_EXT_OFFSET=s.RENDER_MODEL_FG_OFFSET=s.RENDER_MODEL_BG_OFFSET=s.RENDER_MODEL_INDICIES_PER_CELL=void 0;let p=a(296);s.RENDER_MODEL_INDICIES_PER_CELL=4,s.RENDER_MODEL_BG_OFFSET=1,s.RENDER_MODEL_FG_OFFSET=2,s.RENDER_MODEL_EXT_OFFSET=3,s.COMBINED_CHAR_BIT_MASK=2147483648,s.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,p.createSelectionRenderModel)()}resize(u,r){let i=u*r*s.RENDER_MODEL_INDICIES_PER_CELL;i!==this.cells.length&&(this.cells=new Uint32Array(i),this.lineLengths=new Uint32Array(r))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:function(v,s,a){var p=this&&this.__decorate||function(M,w,F,x){var R,A=arguments.length,I=A<3?w:x===null?x=Object.getOwnPropertyDescriptor(w,F):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(M,w,F,x);else for(var $=M.length-1;$>=0;$--)(R=M[$])&&(I=(A<3?R(I):A>3?R(w,F,I):R(w,F))||I);return A>3&&I&&Object.defineProperty(w,F,I),I};Object.defineProperty(s,"__esModule",{value:!0}),s.JoinedCellData=s.WebglRenderer=void 0;let u=a(820),r=a(274),i=a(627),l=a(457),d=a(56),f=a(374),o=a(345),h=a(859),_=a(147),m=a(782),y=a(855),C=a(776),E=a(965),D=a(742),g=a(310),b=a(733);class L extends h.Disposable{constructor(w,F,x,R,A,I,$,k,H){super(),this._terminal=w,this._characterJoinerService=F,this._charSizeService=x,this._coreBrowserService=R,this._coreService=A,this._decorationService=I,this._optionsService=$,this._themeService=k,this._cursorBlinkStateManager=new h.MutableDisposable,this._charAtlasDisposable=this.register(new h.MutableDisposable),this._model=new g.RenderModel,this._workCell=new m.CellData,this._rectangleRenderer=this.register(new h.MutableDisposable),this._glyphRenderer=this.register(new h.MutableDisposable),this._onChangeTextureAtlas=this.register(new o.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new o.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new o.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new o.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new o.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new r.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new b.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,$,this._themeService)],this.dimensions=(0,f.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register($.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:H};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextlost",q=>{console.log("webglcontextlost event received"),q.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(q)},3e3)})),this.register((0,u.addDisposableDomListener)(this._canvas,"webglcontextrestored",q=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,i.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,d.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(q,N)=>this._setCanvasDevicePixelDimensions(q,N))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,h.toDisposable)(()=>{var q;for(let N of this._renderLayers)N.dispose();(q=this._canvas.parentElement)===null||q===void 0||q.removeChild(this._canvas),(0,i.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var w;return(w=this._charAtlas)===null||w===void 0?void 0:w.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(w,F){var x,R,A,I;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let $ of this._renderLayers)$.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(x=this._rectangleRenderer.value)===null||x===void 0||x.setDimensions(this.dimensions),(R=this._rectangleRenderer.value)===null||R===void 0||R.handleResize(),(A=this._glyphRenderer.value)===null||A===void 0||A.setDimensions(this.dimensions),(I=this._glyphRenderer.value)===null||I===void 0||I.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var w;for(let F of this._renderLayers)F.handleBlur(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.pause(),this._requestRedrawViewport()}handleFocus(){var w;for(let F of this._renderLayers)F.handleFocus(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.resume(),this._requestRedrawViewport()}handleSelectionChanged(w,F,x){for(let R of this._renderLayers)R.handleSelectionChanged(this._terminal,w,F,x);this._model.selection.update(this._terminal,w,F,x),this._requestRedrawViewport()}handleCursorMove(){var w;for(let F of this._renderLayers)F.handleCursorMove(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new D.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new E.GlyphRenderer(this._terminal,this._gl,this.dimensions),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var w;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let F=(0,i.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==F&&(this._onChangeTextureAtlas.fire(F.pages[0].canvas),this._charAtlasDisposable.value=(0,h.getDisposeArrayDisposable)([(0,o.forwardEvent)(F.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,o.forwardEvent)(F.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=F,this._charAtlas.warmUp(),(w=this._glyphRenderer.value)===null||w===void 0||w.setAtlas(this._charAtlas)}_clearModel(w){var F;this._model.clear(),w&&((F=this._glyphRenderer.value)===null||F===void 0||F.clear())}clearTextureAtlas(){var w;(w=this._charAtlas)===null||w===void 0||w.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var w;this._clearModel(!0);for(let F of this._renderLayers)F.reset(this._terminal);(w=this._cursorBlinkStateManager.value)===null||w===void 0||w.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(w){return-1}deregisterCharacterJoiner(w){return!1}renderRows(w,F){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let x of this._renderLayers)x.handleGridChanged(this._terminal,w,F);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(w,F),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new l.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(w,F){let x=this._core,R,A,I,$,k,H,U,q,N,K,O,B,W,P=this._workCell;w=T(w,x.rows-1,0),F=T(F,x.rows-1,0);let X=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,J=Math.min(this._terminal.buffer.active.cursorX,x.cols-1),ve=-1,Ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let De=!1;for(A=w;A<=F;A++)for(I=A+x.buffer.ydisp,$=x.buffer.lines.get(I),this._model.lineLengths[A]=0,k=this._characterJoinerService.getJoinedCharacters(I),B=0;B<x.cols;B++)if(R=this._cellColorResolver.result.bg,$.loadCell(B,P),B===0&&(R=this._cellColorResolver.result.bg),H=!1,U=B,k.length>0&&B===k[0][0]&&(H=!0,q=k.shift(),P=new S(P,$.translateToString(!0,q[0],q[1]),q[1]-q[0]),U=q[1]-1),N=P.getChars(),K=P.getCode(),O=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(P,B,I),Ee&&I===X&&(B===J&&(this._model.cursor={x:J,y:this._terminal.buffer.active.cursorY,width:P.getWidth(),style:this._coreBrowserService.isFocused?x.options.cursorStyle||"block":x.options.cursorInactiveStyle,cursorWidth:x.options.cursorWidth,dpr:this._devicePixelRatio},ve=J+P.getWidth()-1),B>=J&&B<=ve&&(this._coreBrowserService.isFocused&&(x.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&x.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),K!==y.NULL_CELL_CODE&&(this._model.lineLengths[A]=B+1),(this._model.cells[O]!==K||this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(De=!0,N.length>1&&(K|=g.COMBINED_CHAR_BIT_MASK),this._model.cells[O]=K,this._model.cells[O+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[O+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[O+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.value.updateCell(B,A,K,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,N,R),H))for(P=this._workCell,B++;B<U;B++)W=(A*x.cols+B)*g.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(B,A,y.NULL_CELL_CODE,0,0,0,y.NULL_CELL_CHAR,0),this._model.cells[W]=y.NULL_CELL_CODE,this._model.cells[W+g.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[W+g.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[W+g.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;De&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(w,F){this._canvas.width===w&&this._canvas.height===F||(this._canvas.width=w,this._canvas.height=F,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){let w=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:w,end:w})}}s.WebglRenderer=L,p([C.traceCall],L.prototype,"renderRows",null);class S extends _.AttributeData{constructor(w,F,x){super(),this.content=0,this.combinedData="",this.fg=w.fg,this.bg=w.bg,this.combinedData=F,this._width=x}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(w){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function T(M,w,F=0){return Math.max(Math.min(M,w),F)}s.JoinedCellData=S},381:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GLTexture=s.expandFloat32Array=s.createShader=s.createProgram=s.PROJECTION_MATRIX=void 0;let p=a(374);function u(r,i,l){let d=(0,p.throwIfFalsy)(r.createShader(i));if(r.shaderSource(d,l),r.compileShader(d),r.getShaderParameter(d,r.COMPILE_STATUS))return d;console.error(r.getShaderInfoLog(d)),r.deleteShader(d)}s.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),s.createProgram=function(r,i,l){let d=(0,p.throwIfFalsy)(r.createProgram());if(r.attachShader(d,(0,p.throwIfFalsy)(u(r,r.VERTEX_SHADER,i))),r.attachShader(d,(0,p.throwIfFalsy)(u(r,r.FRAGMENT_SHADER,l))),r.linkProgram(d),r.getProgramParameter(d,r.LINK_STATUS))return d;console.error(r.getProgramInfoLog(d)),r.deleteProgram(d)},s.createShader=u,s.expandFloat32Array=function(r,i){let l=Math.min(2*r.length,i),d=new Float32Array(l);for(let f=0;f<r.length;f++)d[f]=r[f];return d},s.GLTexture=class{constructor(r){this.texture=r,this.version=-1}}},592:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseRenderLayer=void 0;let p=a(627),u=a(237),r=a(374),i=a(859);class l extends i.Disposable{constructor(f,o,h,_,m,y,C,E){super(),this._container=o,this._alpha=m,this._coreBrowserService=y,this._optionsService=C,this._themeService=E,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${h}-layer`),this._canvas.style.zIndex=_.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(D=>{this._refreshCharAtlas(f,D),this.reset(f)})),this.register((0,i.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,r.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(f){}handleFocus(f){}handleCursorMove(f){}handleGridChanged(f,o,h){}handleSelectionChanged(f,o,h,_=!1){}_setTransparency(f,o){if(o===this._alpha)return;let h=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,h),this._refreshCharAtlas(f,this._themeService.colors),this.handleGridChanged(f,0,f.rows-1)}_refreshCharAtlas(f,o){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,p.acquireTextureAtlas)(f,this._optionsService.rawOptions,o,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(f,o){this._deviceCellWidth=o.device.cell.width,this._deviceCellHeight=o.device.cell.height,this._deviceCharWidth=o.device.char.width,this._deviceCharHeight=o.device.char.height,this._deviceCharLeft=o.device.char.left,this._deviceCharTop=o.device.char.top,this._canvas.width=o.device.canvas.width,this._canvas.height=o.device.canvas.height,this._canvas.style.width=`${o.css.canvas.width}px`,this._canvas.style.height=`${o.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(f,this._themeService.colors)}_fillBottomLineAtCells(f,o,h=1){this._ctx.fillRect(f*this._deviceCellWidth,(o+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,h*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(f,o,h,_){this._alpha?this._ctx.clearRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,_*this._deviceCellHeight))}_fillCharTrueColor(f,o,h,_){this._ctx.font=this._getFont(f,!1,!1),this._ctx.textBaseline=u.TEXT_BASELINE,this._clipCell(h,_,o.getWidth()),this._ctx.fillText(o.getChars(),h*this._deviceCellWidth+this._deviceCharLeft,_*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(f,o,h){this._ctx.beginPath(),this._ctx.rect(f*this._deviceCellWidth,o*this._deviceCellHeight,h*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(f,o,h){return`${h?"italic":""} ${o?f.options.fontWeightBold:f.options.fontWeight} ${f.options.fontSize*this._coreBrowserService.dpr}px ${f.options.fontFamily}`}}s.BaseRenderLayer=l},733:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkRenderLayer=void 0;let p=a(197),u=a(237),r=a(592);class i extends r.BaseRenderLayer{constructor(d,f,o,h,_,m,y){super(o,d,"link",f,!0,_,m,y),this.register(h.onShowLinkUnderline(C=>this._handleShowLinkUnderline(C))),this.register(h.onHideLinkUnderline(C=>this._handleHideLinkUnderline(C)))}resize(d,f){super.resize(d,f),this._state=void 0}reset(d){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let d=this._state.y2-this._state.y1-1;d>0&&this._clearCells(0,this._state.y1+1,this._state.cols,d),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(d){if(d.fg===u.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:d.fg!==void 0&&(0,p.is256Color)(d.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[d.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,d.y1===d.y2)this._fillBottomLineAtCells(d.x1,d.y1,d.x2-d.x1);else{this._fillBottomLineAtCells(d.x1,d.y1,d.cols-d.x1);for(let f=d.y1+1;f<d.y2;f++)this._fillBottomLineAtCells(0,f,d.cols);this._fillBottomLineAtCells(0,d.y2,d.x2)}this._state=d}_handleHideLinkUnderline(d){this._clearCurrentLink()}}s.LinkRenderLayer=i},820:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,p,u,r){a.addEventListener(p,u,r);let i=!1;return{dispose:()=>{i||(i=!0,a.removeEventListener(p,u,r))}}}},274:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellColorResolver=void 0;let a,p=0,u=0,r=!1,i=!1,l=!1;s.CellColorResolver=class{constructor(d,f,o,h,_){this._terminal=d,this._selectionRenderModel=f,this._decorationService=o,this._coreBrowserService=h,this._themeService=_,this.result={fg:0,bg:0,ext:0}}resolve(d,f,o){this.result.bg=d.bg,this.result.fg=d.fg,this.result.ext=268435456&d.bg?d.extended.ext:0,u=0,p=0,i=!1,r=!1,l=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(f,o,"bottom",h=>{h.backgroundColorRGB&&(u=h.backgroundColorRGB.rgba>>8&16777215,i=!0),h.foregroundColorRGB&&(p=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),l=this._selectionRenderModel.isCellSelected(this._terminal,f,o),l&&(u=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,i=!0,a.selectionForeground&&(p=a.selectionForeground.rgba>>8&16777215,r=!0)),this._decorationService.forEachDecorationAtCell(f,o,"top",h=>{h.backgroundColorRGB&&(u=h.backgroundColorRGB.rgba>>8&16777215,i=!0),h.foregroundColorRGB&&(p=h.foregroundColorRGB.rgba>>8&16777215,r=!0)}),i&&(u=l?-16777216&d.bg&-134217729|u|50331648:-16777216&d.bg|u|50331648),r&&(p=-16777216&d.fg&-67108865|p|50331648),67108864&this.result.fg&&(i&&!r&&(p=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,r=!0),!i&&r&&(u=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,i=!0)),a=void 0,this.result.bg=i?u:this.result.bg,this.result.fg=r?p:this.result.fg}}},627:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.removeTerminalFromCache=s.acquireTextureAtlas=void 0;let p=a(509),u=a(197),r=[];s.acquireTextureAtlas=function(i,l,d,f,o,h,_,m){let y=(0,u.generateConfig)(f,o,h,_,l,d,m);for(let D=0;D<r.length;D++){let g=r[D],b=g.ownedBy.indexOf(i);if(b>=0){if((0,u.configEquals)(g.config,y))return g.atlas;g.ownedBy.length===1?(g.atlas.dispose(),r.splice(D,1)):g.ownedBy.splice(b,1);break}}for(let D=0;D<r.length;D++){let g=r[D];if((0,u.configEquals)(g.config,y))return g.ownedBy.push(i),g.atlas}let C=i._core,E={atlas:new p.TextureAtlas(document,y,C.unicodeService),config:y,ownedBy:[i]};return r.push(E),E.atlas},s.removeTerminalFromCache=function(i){for(let l=0;l<r.length;l++){let d=r[l].ownedBy.indexOf(i);if(d!==-1){r[l].ownedBy.length===1?(r[l].atlas.dispose(),r.splice(l,1)):r[l].ownedBy.splice(d,1);break}}}},197:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.is256Color=s.configEquals=s.generateConfig=void 0;let p=a(160);s.generateConfig=function(u,r,i,l,d,f,o){let h={foreground:f.foreground,background:f.background,cursor:p.NULL_COLOR,cursorAccent:p.NULL_COLOR,selectionForeground:p.NULL_COLOR,selectionBackgroundTransparent:p.NULL_COLOR,selectionBackgroundOpaque:p.NULL_COLOR,selectionInactiveBackgroundTransparent:p.NULL_COLOR,selectionInactiveBackgroundOpaque:p.NULL_COLOR,ansi:f.ansi.slice(),contrastCache:f.contrastCache,halfContrastCache:f.halfContrastCache};return{customGlyphs:d.customGlyphs,devicePixelRatio:o,letterSpacing:d.letterSpacing,lineHeight:d.lineHeight,deviceCellWidth:u,deviceCellHeight:r,deviceCharWidth:i,deviceCharHeight:l,fontFamily:d.fontFamily,fontSize:d.fontSize,fontWeight:d.fontWeight,fontWeightBold:d.fontWeightBold,allowTransparency:d.allowTransparency,drawBoldTextInBrightColors:d.drawBoldTextInBrightColors,minimumContrastRatio:d.minimumContrastRatio,colors:h}},s.configEquals=function(u,r){for(let i=0;i<u.colors.ansi.length;i++)if(u.colors.ansi[i].rgba!==r.colors.ansi[i].rgba)return!1;return u.devicePixelRatio===r.devicePixelRatio&&u.customGlyphs===r.customGlyphs&&u.lineHeight===r.lineHeight&&u.letterSpacing===r.letterSpacing&&u.fontFamily===r.fontFamily&&u.fontSize===r.fontSize&&u.fontWeight===r.fontWeight&&u.fontWeightBold===r.fontWeightBold&&u.allowTransparency===r.allowTransparency&&u.deviceCharWidth===r.deviceCharWidth&&u.deviceCharHeight===r.deviceCharHeight&&u.drawBoldTextInBrightColors===r.drawBoldTextInBrightColors&&u.minimumContrastRatio===r.minimumContrastRatio&&u.colors.foreground.rgba===r.colors.foreground.rgba&&u.colors.background.rgba===r.colors.background.rgba},s.is256Color=function(u){return(50331648&u)==16777216||(50331648&u)==33554432}},237:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let p=a(399);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},457:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CursorBlinkStateManager=void 0,s.CursorBlinkStateManager=class{constructor(a,p){this._renderCallback=a,this._coreBrowserService=p,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,p>0)return void this._restartInterval(p)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let p=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(p)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tryDrawCustomChar=s.powerlineDefinitions=s.boxDrawingDefinitions=s.blockElementDefinitions=void 0;let p=a(374);s.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let u={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};s.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2551":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2552":{1:(f,o)=>`M.5,1 L.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u2553":{1:(f,o)=>`M${.5-f},1 L${.5-f},.5 L1,.5 M${.5+f},.5 L${.5+f},1`},"\u2554":{1:(f,o)=>`M1,${.5-o} L${.5-f},${.5-o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2555":{1:(f,o)=>`M0,${.5-o} L.5,${.5-o} L.5,1 M0,${.5+o} L.5,${.5+o}`},"\u2556":{1:(f,o)=>`M${.5+f},1 L${.5+f},.5 L0,.5 M${.5-f},.5 L${.5-f},1`},"\u2557":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5+f},${.5-o} L${.5+f},1`},"\u2558":{1:(f,o)=>`M.5,0 L.5,${.5+o} L1,${.5+o} M.5,${.5-o} L1,${.5-o}`},"\u2559":{1:(f,o)=>`M1,.5 L${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u255A":{1:(f,o)=>`M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0 M1,${.5+o} L${.5-f},${.5+o} L${.5-f},0`},"\u255B":{1:(f,o)=>`M0,${.5+o} L.5,${.5+o} L.5,0 M0,${.5-o} L.5,${.5-o}`},"\u255C":{1:(f,o)=>`M0,.5 L${.5+f},.5 L${.5+f},0 M${.5-f},.5 L${.5-f},0`},"\u255D":{1:(f,o)=>`M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M0,${.5+o} L${.5+f},${.5+o} L${.5+f},0`},"\u255E":{1:(f,o)=>`M.5,0 L.5,1 M.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"\u255F":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1 M${.5+f},.5 L1,.5`},"\u2560":{1:(f,o)=>`M${.5-f},0 L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2561":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L.5,${.5-o} M0,${.5+o} L.5,${.5+o}`},"\u2562":{1:(f,o)=>`M0,.5 L${.5-f},.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u2563":{1:(f,o)=>`M${.5+f},0 L${.5+f},1 M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0`},"\u2564":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o} M.5,${.5+o} L.5,1`},"\u2565":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},1 M${.5+f},.5 L${.5+f},1`},"\u2566":{1:(f,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1`},"\u2567":{1:(f,o)=>`M.5,0 L.5,${.5-o} M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u2568":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},.5 L${.5-f},0 M${.5+f},.5 L${.5+f},0`},"\u2569":{1:(f,o)=>`M0,${.5+o} L1,${.5+o} M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u256A":{1:(f,o)=>`M.5,0 L.5,1 M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"\u256B":{1:(f,o)=>`M0,.5 L1,.5 M${.5-f},0 L${.5-f},1 M${.5+f},0 L${.5+f},1`},"\u256C":{1:(f,o)=>`M0,${.5+o} L${.5-f},${.5+o} L${.5-f},1 M1,${.5+o} L${.5+f},${.5+o} L${.5+f},1 M0,${.5-o} L${.5-f},${.5-o} L${.5-f},0 M1,${.5-o} L${.5+f},${.5-o} L${.5+f},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,1,.5`},"\u256E":{1:(f,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,0,.5`},"\u256F":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,0,.5`},"\u2570":{1:(f,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,1,.5`}},s.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},s.powerlineDefinitions["\uE0BB"]=s.powerlineDefinitions["\uE0BD"],s.powerlineDefinitions["\uE0BF"]=s.powerlineDefinitions["\uE0B9"],s.tryDrawCustomChar=function(f,o,h,_,m,y,C,E){let D=s.blockElementDefinitions[o];if(D)return function(S,T,M,w,F,x){for(let R=0;R<T.length;R++){let A=T[R],I=F/8,$=x/8;S.fillRect(M+A.x*I,w+A.y*$,A.w*I,A.h*$)}}(f,D,h,_,m,y),!0;let g=u[o];if(g)return function(S,T,M,w,F,x){let R=r.get(T);R||(R=new Map,r.set(T,R));let A=S.fillStyle;if(typeof A!="string")throw new Error(`Unexpected fillStyle type "${A}"`);let I=R.get(A);if(!I){let $=T[0].length,k=T.length,H=document.createElement("canvas");H.width=$,H.height=k;let U=(0,p.throwIfFalsy)(H.getContext("2d")),q=new ImageData($,k),N,K,O,B;if(A.startsWith("#"))N=parseInt(A.slice(1,3),16),K=parseInt(A.slice(3,5),16),O=parseInt(A.slice(5,7),16),B=A.length>7&&parseInt(A.slice(7,9),16)||1;else{if(!A.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${A}" when drawing pattern glyph`);[N,K,O,B]=A.substring(5,A.length-1).split(",").map(W=>parseFloat(W))}for(let W=0;W<k;W++)for(let P=0;P<$;P++)q.data[4*(W*$+P)]=N,q.data[4*(W*$+P)+1]=K,q.data[4*(W*$+P)+2]=O,q.data[4*(W*$+P)+3]=T[W][P]*(255*B);U.putImageData(q,0,0),I=(0,p.throwIfFalsy)(S.createPattern(H,null)),R.set(A,I)}S.fillStyle=I,S.fillRect(M,w,F,x)}(f,g,h,_,m,y),!0;let b=s.boxDrawingDefinitions[o];if(b)return function(S,T,M,w,F,x,R){S.strokeStyle=S.fillStyle;for(let[A,I]of Object.entries(T)){let $;S.beginPath(),S.lineWidth=R*Number.parseInt(A),$=typeof I=="function"?I(.15,.15/x*F):I;for(let k of $.split(" ")){let H=k[0],U=l[H];if(!U){console.error(`Could not find drawing instructions for "${H}"`);continue}let q=k.substring(1).split(",");q[0]&&q[1]&&U(S,d(q,F,x,M,w,!0,R))}S.stroke(),S.closePath()}}(f,b,h,_,m,y,E),!0;let L=s.powerlineDefinitions[o];return!!L&&(function(S,T,M,w,F,x,R,A){var I,$;let k=new Path2D;k.rect(M,w,F,x),S.clip(k),S.beginPath();let H=R/12;S.lineWidth=A*H;for(let U of T.d.split(" ")){let q=U[0],N=l[q];if(!N){console.error(`Could not find drawing instructions for "${q}"`);continue}let K=U.substring(1).split(",");K[0]&&K[1]&&N(S,d(K,F,x,M,w,!1,A,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(H/2),(($=T.rightPadding)!==null&&$!==void 0?$:0)*(H/2)))}T.type===1?(S.strokeStyle=S.fillStyle,S.stroke()):S.fill(),S.closePath()}(f,L,h,_,m,y,C,E),!0)};let r=new Map;function i(f,o,h=0){return Math.max(Math.min(f,o),h)}let l={C:(f,o)=>f.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]),L:(f,o)=>f.lineTo(o[0],o[1]),M:(f,o)=>f.moveTo(o[0],o[1])};function d(f,o,h,_,m,y,C,E=0,D=0){let g=f.map(b=>parseFloat(b)||parseInt(b));if(g.length<2)throw new Error("Too few arguments for instruction");for(let b=0;b<g.length;b+=2)g[b]*=o-E*C-D*C,y&&g[b]!==0&&(g[b]=i(Math.round(g[b]+.5)-.5,o,0)),g[b]+=_+E*C;for(let b=1;b<g.length;b+=2)g[b]*=h,y&&g[b]!==0&&(g[b]=i(Math.round(g[b]+.5)-.5,h,0)),g[b]+=m;return g}},56:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.observeDevicePixelDimensions=void 0;let p=a(859);s.observeDevicePixelDimensions=function(u,r,i){let l=new r.ResizeObserver(d=>{let f=d.find(_=>_.target===u);if(!f)return;if(!("devicePixelContentBoxSize"in f))return l?.disconnect(),void(l=void 0);let o=f.devicePixelContentBoxSize[0].inlineSize,h=f.devicePixelContentBoxSize[0].blockSize;o>0&&h>0&&i(o,h)});try{l.observe(u,{box:["device-pixel-content-box"]})}catch{l.disconnect(),l=void 0}return(0,p.toDisposable)(()=>l?.disconnect())}},374:(v,s)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},s.excludeFromContrastRatioDemands=function(p){return a(p)||function(u){return 9472<=u&&u<=9631}(p)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,r,i,l=!1){if(this.selectionStart=r,this.selectionEnd=i,!r||!i||r[0]===i[0]&&r[1]===i[1])return void this.clear();let d=r[1]-u.buffer.active.viewportY,f=i[1]-u.buffer.active.viewportY,o=Math.max(d,0),h=Math.min(f,u.rows-1);o>=u.rows||h<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=l,this.viewportStartRow=d,this.viewportEndRow=f,this.viewportCappedStartRow=o,this.viewportCappedEndRow=h,this.startCol=r[0],this.endCol=i[0])}isCellSelected(u,r,i){return!!this.hasSelection&&(i-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?r>=this.startCol&&i>=this.viewportCappedStartRow&&r<this.endCol&&i<=this.viewportCappedEndRow:r<this.startCol&&i>=this.viewportCappedStartRow&&r>=this.endCol&&i<=this.viewportCappedEndRow:i>this.viewportStartRow&&i<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&i===this.viewportStartRow&&r>=this.startCol&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportEndRow&&r<this.endCol||this.viewportStartRow<this.viewportEndRow&&i===this.viewportStartRow&&r>=this.startCol)}}s.createSelectionRenderModel=function(){return new a}},509:function(v,s,a){var p=this&&this.__decorate||function(L,S,T,M){var w,F=arguments.length,x=F<3?S:M===null?M=Object.getOwnPropertyDescriptor(S,T):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(L,S,T,M);else for(var R=L.length-1;R>=0;R--)(w=L[R])&&(x=(F<3?w(x):F>3?w(S,T,x):w(S,T))||x);return F>3&&x&&Object.defineProperty(S,T,x),x};Object.defineProperty(s,"__esModule",{value:!0}),s.TextureAtlas=void 0;let u=a(237),r=a(860),i=a(374),l=a(160),d=a(345),f=a(485),o=a(385),h=a(147),_=a(855),m=a(776),y={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},C;class E{get pages(){return this._pages}constructor(S,T,M){this._document=S,this._config=T,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new f.FourKeyMap,this._cacheMapCombined=new f.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new h.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new d.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new d.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=b(S,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,i.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(let S of this.pages)S.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let S=new o.IdleTaskQueue;for(let T=33;T<126;T++)S.enqueue(()=>{if(!this._cacheMap.get(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT)){let M=this._drawToCache(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT);this._cacheMap.set(T,_.DEFAULT_COLOR,_.DEFAULT_COLOR,_.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let S of this._pages)S.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(E.maxAtlasPages&&this._pages.length>=Math.max(4,E.maxAtlasPages)){let T=this._pages.filter(I=>2*I.canvas.width<=(E.maxTextureSize||4096)).sort((I,$)=>$.canvas.width!==I.canvas.width?$.canvas.width-I.canvas.width:$.percentageUsed-I.percentageUsed),M=-1,w=0;for(let I=0;I<T.length;I++)if(T[I].canvas.width!==w)M=I,w=T[I].canvas.width;else if(I-M==3)break;let F=T.slice(M,M+4),x=F.map(I=>I.glyphs[0].texturePage).sort((I,$)=>I>$?1:-1),R=this.pages.length-F.length,A=this._mergePages(F,R);A.version++;for(let I=x.length-1;I>=0;I--)this._deletePage(x[I]);this.pages.push(A),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(A.canvas)}let S=new D(this._document,this._textureSize);return this._pages.push(S),this._activePages.push(S),this._onAddTextureAtlasCanvas.fire(S.canvas),S}_mergePages(S,T){let M=2*S[0].canvas.width,w=new D(this._document,M,S);for(let[F,x]of S.entries()){let R=F*x.canvas.width%M,A=Math.floor(F/2)*x.canvas.height;w.ctx.drawImage(x.canvas,R,A);for(let $ of x.glyphs)$.texturePage=T,$.sizeClipSpace.x=$.size.x/M,$.sizeClipSpace.y=$.size.y/M,$.texturePosition.x+=R,$.texturePosition.y+=A,$.texturePositionClipSpace.x=$.texturePosition.x/M,$.texturePositionClipSpace.y=$.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(x.canvas);let I=this._activePages.indexOf(x);I!==-1&&this._activePages.splice(I,1)}return w}_deletePage(S){this._pages.splice(S,1);for(let T=S;T<this._pages.length;T++){let M=this._pages[T];for(let w of M.glyphs)w.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(S,T,M,w,F){return this._getFromCacheMap(this._cacheMapCombined,S,T,M,w,F)}getRasterizedGlyph(S,T,M,w,F){return this._getFromCacheMap(this._cacheMap,S,T,M,w,F)}_getFromCacheMap(S,T,M,w,F,x=!1){return C=S.get(T,M,w,F),C||(C=this._drawToCache(T,M,w,F,x),S.set(T,M,w,F,C)),C}_getColorFromAnsiIndex(S){if(S>=this._config.colors.ansi.length)throw new Error("No color found for idx "+S);return this._config.colors.ansi[S]}_getBackgroundColor(S,T,M,w){if(this._config.allowTransparency)return l.NULL_COLOR;let F;switch(S){case 16777216:case 33554432:F=this._getColorFromAnsiIndex(T);break;case 50331648:let x=h.AttributeData.toColorRGB(T);F=l.rgba.toColor(x[0],x[1],x[2]);break;default:F=M?l.color.opaque(this._config.colors.foreground):this._config.colors.background}return F}_getForegroundColor(S,T,M,w,F,x,R,A,I,$){let k=this._getMinimumContrastColor(S,T,M,w,F,x,!1,I,A,$);if(k)return k;let H;switch(F){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&I&&x<8&&(x+=8),H=this._getColorFromAnsiIndex(x);break;case 50331648:let U=h.AttributeData.toColorRGB(x);H=l.rgba.toColor(U[0],U[1],U[2]);break;default:H=R?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(H=l.color.opaque(H)),A&&(H=l.color.multiplyOpacity(H,u.DIM_OPACITY)),H}_resolveBackgroundRgba(S,T,M){switch(S){case 16777216:case 33554432:return this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(S,T,M,w){switch(S){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&w&&T<8&&(T+=8),this._getColorFromAnsiIndex(T).rgba;case 50331648:return T<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(S,T,M,w,F,x,R,A,I,$){if(this._config.minimumContrastRatio===1||$)return;let k=this._getContrastCache(I),H=k.getColor(S,w);if(H!==void 0)return H||void 0;let U=this._resolveBackgroundRgba(T,M,R),q=this._resolveForegroundRgba(F,x,R,A),N=l.rgba.ensureContrastRatio(U,q,this._config.minimumContrastRatio/(I?2:1));if(!N)return void k.setColor(S,w,null);let K=l.rgba.toColor(N>>24&255,N>>16&255,N>>8&255);return k.setColor(S,w,K),K}_getContrastCache(S){return S?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(S,T,M,w,F=!1){let x=typeof S=="number"?String.fromCharCode(S):S,R=Math.min(this._config.deviceCellWidth*Math.max(x.length,2)+4,this._textureSize);this._tmpCanvas.width<R&&(this._tmpCanvas.width=R);let A=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<A&&(this._tmpCanvas.height=A),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=T,this._workAttributeData.extended.ext=w,this._workAttributeData.isInvisible())return y;let I=!!this._workAttributeData.isBold(),$=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),H=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),q=!!this._workAttributeData.isStrikethrough(),N=!!this._workAttributeData.isOverline(),K=this._workAttributeData.getFgColor(),O=this._workAttributeData.getFgColorMode(),B=this._workAttributeData.getBgColor(),W=this._workAttributeData.getBgColorMode();if($){let oe=K;K=B,B=oe;let j=O;O=W,W=j}let P=this._getBackgroundColor(W,B,$,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let X=I?this._config.fontWeightBold:this._config.fontWeight,J=H?"italic":"";this._tmpCtx.font=`${J} ${X} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=u.TEXT_BASELINE;let ve=x.length===1&&(0,i.isPowerlineGlyph)(x.charCodeAt(0)),Ee=x.length===1&&(0,i.isRestrictedPowerlineGlyph)(x.charCodeAt(0)),De=this._getForegroundColor(T,W,B,M,O,K,$,k,I,(0,i.excludeFromContrastRatioDemands)(x.charCodeAt(0)));this._tmpCtx.fillStyle=De.css;let se=Ee?0:4,we=!1;this._config.customGlyphs!==!1&&(we=(0,r.tryDrawCustomChar)(this._tmpCtx,x,se,se,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let bt,Jt=!ve;if(bt=typeof S=="number"?this._unicodeService.wcwidth(S):this._unicodeService.getStringCellWidth(S),U){this._tmpCtx.save();let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;if(this._tmpCtx.lineWidth=oe,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())Jt=!1,this._tmpCtx.strokeStyle=`rgb(${h.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{Jt=!1;let ct=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&ct<8&&(ct+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(ct).css}this._tmpCtx.beginPath();let ie=se,de=Math.ceil(se+this._config.deviceCharHeight)-j-(F?2*oe:0),Be=de+oe,nt=de+2*oe;for(let ct=0;ct<bt;ct++){this._tmpCtx.save();let Ge=ie+ct*this._config.deviceCellWidth,wt=ie+(ct+1)*this._config.deviceCellWidth,qt=Ge+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(wt,de),this._tmpCtx.moveTo(Ge,nt),this._tmpCtx.lineTo(wt,nt);break;case 3:let St=oe<=1?nt:Math.ceil(se+this._config.deviceCharHeight-oe/2)-j,xn=oe<=1?de:Math.ceil(se+this._config.deviceCharHeight+oe/2)-j,vi=new Path2D;vi.rect(Ge,de,this._config.deviceCellWidth,nt-de),this._tmpCtx.clip(vi),this._tmpCtx.moveTo(Ge-this._config.deviceCellWidth/2,Be),this._tmpCtx.bezierCurveTo(Ge-this._config.deviceCellWidth/2,xn,Ge,xn,Ge,Be),this._tmpCtx.bezierCurveTo(Ge,St,qt,St,qt,Be),this._tmpCtx.bezierCurveTo(qt,xn,wt,xn,wt,Be),this._tmpCtx.bezierCurveTo(wt,St,wt+this._config.deviceCellWidth/2,St,wt+this._config.deviceCellWidth/2,Be);break;case 4:this._tmpCtx.setLineDash([Math.round(oe),Math.round(oe)]),this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(wt,de);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(wt,de);break;default:this._tmpCtx.moveTo(Ge,de),this._tmpCtx.lineTo(wt,de)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!we&&this._config.fontSize>=12&&!this._config.allowTransparency&&x!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let ct=this._tmpCtx.measureText(x);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in ct&&ct.actualBoundingBoxDescent>0){this._tmpCtx.save();let Ge=new Path2D;Ge.rect(ie,de-Math.ceil(oe/2),this._config.deviceCellWidth*bt,nt-de+Math.ceil(oe/2)),this._tmpCtx.clip(Ge),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=P.css,this._tmpCtx.strokeText(x,se,se+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(N){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),j=oe%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*bt,se+j),this._tmpCtx.stroke()}if(we||this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight),x==="_"&&!this._config.allowTransparency){let oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,De,Jt);if(oe)for(let j=1;j<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=P.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(x,se,se+this._config.deviceCharHeight-j),oe=g(this._tmpCtx.getImageData(se,se,this._config.deviceCellWidth,this._config.deviceCellHeight),P,De,Jt),oe);j++);}if(q){let oe=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),j=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=oe,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(se,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.lineTo(se+this._config.deviceCharWidth*bt,se+Math.floor(this._config.deviceCharHeight/2)-j),this._tmpCtx.stroke()}this._tmpCtx.restore();let Bt=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),Ze;if(Ze=this._config.allowTransparency?function(oe){for(let j=0;j<oe.data.length;j+=4)if(oe.data[j+3]>0)return!1;return!0}(Bt):g(Bt,P,De,Jt),Ze)return y;let ce=this._findGlyphBoundingBox(Bt,this._workBoundingBox,R,Ee,we,se),he,le;for(;;){if(this._activePages.length===0){let oe=this._createNewPage();he=oe,le=oe.currentRow,le.height=ce.size.y;break}he=this._activePages[this._activePages.length-1],le=he.currentRow;for(let oe of this._activePages)ce.size.y<=oe.currentRow.height&&(he=oe,le=oe.currentRow);for(let oe=this._activePages.length-1;oe>=0;oe--)for(let j of this._activePages[oe].fixedRows)j.height<=le.height&&ce.size.y<=j.height&&(he=this._activePages[oe],le=j);if(le.y+ce.size.y>=he.canvas.height||le.height>ce.size.y+2){let oe=!1;if(he.currentRow.y+he.currentRow.height+ce.size.y>=he.canvas.height){let j;for(let ie of this._activePages)if(ie.currentRow.y+ie.currentRow.height+ce.size.y<ie.canvas.height){j=ie;break}if(j)he=j;else if(E.maxAtlasPages&&this._pages.length>=E.maxAtlasPages&&le.y+ce.size.y<=he.canvas.height&&le.height>=ce.size.y&&le.x+ce.size.x<=he.canvas.width)oe=!0;else{let ie=this._createNewPage();he=ie,le=ie.currentRow,le.height=ce.size.y,oe=!0}}oe||(he.currentRow.height>0&&he.fixedRows.push(he.currentRow),le={x:0,y:he.currentRow.y+he.currentRow.height,height:ce.size.y},he.fixedRows.push(le),he.currentRow={x:0,y:le.y+le.height,height:0})}if(le.x+ce.size.x<=he.canvas.width)break;le===he.currentRow?(le.x=0,le.y+=le.height,le.height=0):he.fixedRows.splice(he.fixedRows.indexOf(le),1)}return ce.texturePage=this._pages.indexOf(he),ce.texturePosition.x=le.x,ce.texturePosition.y=le.y,ce.texturePositionClipSpace.x=le.x/he.canvas.width,ce.texturePositionClipSpace.y=le.y/he.canvas.height,ce.sizeClipSpace.x/=he.canvas.width,ce.sizeClipSpace.y/=he.canvas.height,le.height=Math.max(le.height,ce.size.y),le.x+=ce.size.x,he.ctx.putImageData(Bt,ce.texturePosition.x-this._workBoundingBox.left,ce.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ce.size.x,ce.size.y),he.addGlyph(ce),he.version++,ce}_findGlyphBoundingBox(S,T,M,w,F,x){T.top=0;let R=w?this._config.deviceCellHeight:this._tmpCanvas.height,A=w?this._config.deviceCellWidth:M,I=!1;for(let $=0;$<R;$++){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(S.data[H]!==0){T.top=$,I=!0;break}}if(I)break}T.left=0,I=!1;for(let $=0;$<x+A;$++){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(S.data[H]!==0){T.left=$,I=!0;break}}if(I)break}T.right=A,I=!1;for(let $=x+A-1;$>=x;$--){for(let k=0;k<R;k++){let H=k*this._tmpCanvas.width*4+4*$+3;if(S.data[H]!==0){T.right=$,I=!0;break}}if(I)break}T.bottom=R,I=!1;for(let $=R-1;$>=0;$--){for(let k=0;k<A;k++){let H=$*this._tmpCanvas.width*4+4*k+3;if(S.data[H]!==0){T.bottom=$,I=!0;break}}if(I)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:T.right-T.left+1,y:T.bottom-T.top+1},sizeClipSpace:{x:T.right-T.left+1,y:T.bottom-T.top+1},offset:{x:-T.left+x+(w||F?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-T.top+x+(w||F?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}s.TextureAtlas=E,p([m.traceCall],E.prototype,"_drawToCache",null);class D{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(S){this._glyphs.push(S),this._usedPixels+=S.size.x*S.size.y}constructor(S,T,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(let w of M)this._glyphs.push(...w.glyphs),this._usedPixels+=w._usedPixels;this.canvas=b(S,T,T),this.ctx=(0,i.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function g(L,S,T,M){let w=S.rgba>>>24,F=S.rgba>>>16&255,x=S.rgba>>>8&255,R=T.rgba>>>24,A=T.rgba>>>16&255,I=T.rgba>>>8&255,$=Math.floor((Math.abs(w-R)+Math.abs(F-A)+Math.abs(x-I))/12),k=!0;for(let H=0;H<L.data.length;H+=4)L.data[H]===w&&L.data[H+1]===F&&L.data[H+2]===x||M&&Math.abs(L.data[H]-w)+Math.abs(L.data[H+1]-F)+Math.abs(L.data[H+2]-x)<$?L.data[H+3]=0:k=!1;return k}function b(L,S,T){let M=L.createElement("canvas");return M.width=S,M.height=T,M}},160:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let p=a(399),u=0,r=0,i=0,l=0;var d,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(d||(s.channels=d={})),function(C){function E(D,g){return l=Math.round(255*g),[u,r,i]=_.toChannels(D.rgba),{css:d.toCss(u,r,i,l),rgba:d.toRgba(u,r,i,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,S=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),i=w+Math.round((S-w)*l),{css:d.toCss(u,r,i),rgba:d.toRgba(u,r,i)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,r,i]=_.toChannels(g),{css:d.toCss(u,r,i),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),_.toColor(u,r,i);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(u,r,i,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),r=parseInt(b[2]),i=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(u,r,i,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[u,r,i,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(u,r,i,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,S=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w>0||F>0||x>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w<255||F<255||x<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let S=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(S,T)<L){if(T<S){let F=E(g,b,L),x=y(S,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(S,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),w=y(S,h.relativeLuminance(M>>8));if(w<L){let F=E(g,b,L);return w>y(S,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,S){return{css:d.toCss(g,b,L,S),rgba:d.toRgba(g,b,L,S)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},345:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let u=[];for(let r=0;r<this._listeners.length;r++)u.push(this._listeners[r]);for(let r=0;r<u.length;r++)u[r].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,p){return a(u=>p.fire(u))}},859:(v,s)=>{function a(p){for(let u of p)u.dispose();p.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let u=this._disposables.indexOf(p);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var u;this._isDisposed||p===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},s.toDisposable=function(p){return{dispose:p}},s.disposeArray=a,s.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},485:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,r,i){this._data[u]||(this._data[u]={}),this._data[u][r]=i}get(u,r){return this._data[u]?this._data[u][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(p,u,r,i,l){this._data.get(p,u)||this._data.set(p,u,new a),this._data.get(p,u).set(r,i,l)}get(p,u,r,i){var l;return(l=this._data.get(p,u))===null||l===void 0?void 0:l.get(r,i)}clear(){this._data.clear()}}},399:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,p=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),s.isIpad=p==="iPad",s.isIphone=p==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),s.isLinux=p.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},385:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let p=a(399);class u{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let d=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(d=Date.now(),this._tasks[this._i]()||this._i++,d=Math.max(1,Date.now()-d),f=Math.max(d,f),h=l.timeRemaining(),1.5*f>h)return o-d<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-d))}ms`),void this._start();o=h}this.clear()}}class r extends u{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let d=Date.now()+l;return{timeRemaining:()=>Math.max(0,d-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(i){return requestIdleCallback(i)}_cancelCallback(i){cancelIdleCallback(i)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(i){this._queue.clear(),this._queue.enqueue(i)}flush(){this._queue.flush()}}},147:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,i=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=i}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=p},782:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let p=a(133),u=a(855),r=a(147);class i extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(d){let f=new i;return f.setFromCharData(d),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(d){this.fg=d[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(d[u.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(d[u.CHAR_DATA_CHAR_INDEX].length===2){let o=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|d[u.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[u.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=d[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=i},855:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},133:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,p=0,u=a.length){let r="";for(let i=p;i<u;++i){let l=a[i];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let u=a.length;if(!u)return 0;let r=0,i=0;if(this._interim){let l=a.charCodeAt(i++);56320<=l&&l<=57343?p[r++]=1024*(this._interim-55296)+l-56320+65536:(p[r++]=this._interim,p[r++]=l),this._interim=0}for(let l=i;l<u;++l){let d=a.charCodeAt(l);if(55296<=d&&d<=56319){if(++l>=u)return this._interim=d,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?p[r++]=1024*(d-55296)+f-56320+65536:(p[r++]=d,p[r++]=f)}else d!==65279&&(p[r++]=d)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let u=a.length;if(!u)return 0;let r,i,l,d,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=u)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:p[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(p[f++]=C):C<65536||C>1114111||(p[f++]=C)),this.interim.fill(0)}let _=u-4,m=h;for(;m<u;){for(;!(!(m<_)||128&(r=a[m])||128&(i=a[m+1])||128&(l=a[m+2])||128&(d=a[m+3]));)p[f++]=r,p[f++]=i,p[f++]=l,p[f++]=d,m+=4;if(r=a[m++],r<128)p[f++]=r;else if((224&r)==192){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(o=(31&r)<<6|63&i,o<128){m--;continue}p[f++]=o}else if((240&r)==224){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&i)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;p[f++]=o}else if((248&r)==240){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,this.interim[2]=l,f;if(d=a[m++],(192&d)!=128){m--;continue}if(o=(7&r)<<18|(63&i)<<12|(63&l)<<6|63&d,o<65536||o>1114111)continue;p[f++]=o}}return f}}},776:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(859),i=a(97),l={trace:i.LogLevelEnum.TRACE,debug:i.LogLevelEnum.DEBUG,info:i.LogLevelEnum.INFO,warn:i.LogLevelEnum.WARN,error:i.LogLevelEnum.ERROR,off:i.LogLevelEnum.OFF},d,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=i.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),d=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=p([u(0,i.IOptionsService)],f),s.setTraceLogger=function(o){d=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(d.logLevel!==i.LogLevelEnum.TRACE)return m.apply(this,y);d.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return d.trace(`GlyphRenderer#${m.name} return`,C),C}}},726:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",p="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[p]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);let r=function(i,l,d){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[p].push({id:f,index:h}):(o[p]=[{id:f,index:h}],o[a]=o)})(r,i,d)};return r.toString=()=>u,s.serviceRegistry.set(u,r),r}},97:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let p=a(726);var u;s.IBufferService=(0,p.createDecorator)("BufferService"),s.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),s.ICoreService=(0,p.createDecorator)("CoreService"),s.ICharsetService=(0,p.createDecorator)("CharsetService"),s.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,p.createDecorator)("LogService"),s.IOptionsService=(0,p.createDecorator)("OptionsService"),s.IOscLinkService=(0,p.createDecorator)("OscLinkService"),s.IUnicodeService=(0,p.createDecorator)("UnicodeService"),s.IDecorationService=(0,p.createDecorator)("DecorationService")}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebglAddon=void 0;let s=n(345),a=n(859),p=n(399),u=n(666),r=n(776);class i extends a.Disposable{constructor(d){if(p.isSafari&&(0,p.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=d,this._onChangeTextureAtlas=this.register(new s.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new s.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new s.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new s.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(d){let f=d._core;if(!d.element)return void this.register(f.onWillOpen(()=>this.activate(d)));this._terminal=d;let o=f.coreService,h=f.optionsService,_=f,m=_._renderService,y=_._characterJoinerService,C=_._charSizeService,E=_._coreBrowserService,D=_._decorationService,g=_._logService,b=_._themeService;(0,r.setTraceLogger)(g),this._renderer=this.register(new u.WebglRenderer(d,y,C,E,o,D,h,b,this._preserveDrawingBuffer)),this.register((0,s.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,s.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,s.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,s.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),m.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let L=this._terminal._core._renderService;L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(d.cols,d.rows)}))}get textureAtlas(){var d;return(d=this._renderer)===null||d===void 0?void 0:d.textureAtlas}clearTextureAtlas(){var d;(d=this._renderer)===null||d===void 0||d.clearTextureAtlas()}}v.WebglAddon=i})(),c})())});var Rk=_t((Gv,Jw)=>{(function(e,t){typeof Gv=="object"&&typeof Jw=="object"?Jw.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Gv=="object"?Gv.WebLinksAddon=t():e.WebLinksAddon=t()})(self,()=>(()=>{"use strict";var e={6:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.LinkComputer=s.WebLinkProvider=void 0,s.WebLinkProvider=class{constructor(p,u,r,i={}){this._terminal=p,this._regex=u,this._handler=r,this._options=i}provideLinks(p,u){let r=a.computeLink(p,this._regex,this._terminal,this._handler);u(this._addCallbacks(r))}_addCallbacks(p){return p.map(u=>(u.leave=this._options.leave,u.hover=(r,i)=>{if(this._options.hover){let{range:l}=u;this._options.hover(r,i,l)}},u))}};class a{static computeLink(u,r,i,l){let d=new RegExp(r.source,(r.flags||"")+"g"),[f,o]=a._getWindowedLineStrings(u-1,i),h=f.join(""),_,m=[];for(;_=d.exec(h);){let y=_[0];try{let L=new URL(y),S=decodeURI(L.toString());if(y!==S&&y+"/"!==S)continue}catch{continue}let[C,E]=a._mapStrIdx(i,o,0,_.index),[D,g]=a._mapStrIdx(i,C,E,y.length);if(C===-1||E===-1||D===-1||g===-1)continue;let b={start:{x:E+1,y:C+1},end:{x:g,y:D+1}};m.push({range:b,text:y,activate:l})}return m}static _getWindowedLineStrings(u,r){let i,l=u,d=u,f=0,o="",h=[];if(i=r.buffer.active.getLine(u)){let _=i.translateToString(!0);if(i.isWrapped&&_[0]!==" "){for(f=0;(i=r.buffer.active.getLine(--l))&&f<2048&&(o=i.translateToString(!0),f+=o.length,h.push(o),i.isWrapped&&o.indexOf(" ")===-1););h.reverse()}for(h.push(_),f=0;(i=r.buffer.active.getLine(++d))&&i.isWrapped&&f<2048&&(o=i.translateToString(!0),f+=o.length,h.push(o),o.indexOf(" ")===-1););}return[h,l]}static _mapStrIdx(u,r,i,l){let d=u.buffer.active,f=d.getNullCell(),o=i;for(;l;){let h=d.getLine(r);if(!h)return[-1,-1];for(let _=o;_<h.length;++_){h.getCell(_,f);let m=f.getChars();if(f.getWidth()&&(l-=m.length||1,_===h.length-1&&m==="")){let y=d.getLine(r+1);y&&y.isWrapped&&(y.getCell(0,f),f.getWidth()===2&&(l+=1))}if(l<0)return[r,_]}r++,o=0}return[r,o]}}s.LinkComputer=a}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v](a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;let s=n(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function p(u,r){let i=window.open();if(i){try{i.opener=null}catch{}i.location.href=r}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(u=p,r={}){this._handler=u,this._options=r}activate(u){this._terminal=u;let r=this._options,i=r.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new s.WebLinkProvider(this._terminal,i,this._handler,r))}dispose(){var u;(u=this._linkProvider)===null||u===void 0||u.dispose()}}})(),c})())});var Bk=_t((Kv,Xw)=>{(function(e,t){if(typeof Kv=="object"&&typeof Xw=="object")Xw.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var c in n)(typeof Kv=="object"?Kv:e)[c]=n[c]}})(self,()=>(()=>{"use strict";var e={4567:function(v,s,a){var p=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.AccessibilityManager=void 0;let r=a(9042),i=a(6114),l=a(9924),d=a(844),f=a(5596),o=a(4725),h=a(3656),_=s.AccessibilityManager=class extends d.Disposable{constructor(m,y){super(),this._terminal=m,this._renderService=y,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new l.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,h.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,d.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(m){for(let y=0;y<m;y++)this._handleChar(" ")}_handleChar(m){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==m&&(this._charsToAnnounce+=m):this._charsToAnnounce+=m,m===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=r.tooMuchOutput)),i.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,i.isMac&&this._liveRegion.remove()}_handleKey(m){this._clearLiveRegion(),/\p{Control}/u.test(m)||this._charsToConsume.push(m)}_refreshRows(m,y){this._liveRegionDebouncer.refresh(m,y,this._terminal.rows)}_renderRows(m,y){let C=this._terminal.buffer,E=C.lines.length.toString();for(let D=m;D<=y;D++){let g=C.translateBufferLineToString(C.ydisp+D,!0),b=(C.ydisp+D+1).toString(),L=this._rowElements[D];L&&(g.length===0?L.innerText="\xA0":L.textContent=g,L.setAttribute("aria-posinset",b),L.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(m,y){let C=m.target,E=this._rowElements[y===0?1:this._rowElements.length-2];if(C.getAttribute("aria-posinset")===(y===0?"1":`${this._terminal.buffer.lines.length}`)||m.relatedTarget!==E)return;let D,g;if(y===0?(D=C,g=this._rowElements.pop(),this._rowContainer.removeChild(g)):(D=this._rowElements.shift(),g=C,this._rowContainer.removeChild(D)),D.removeEventListener("focus",this._topBoundaryFocusListener),g.removeEventListener("focus",this._bottomBoundaryFocusListener),y===0){let b=this._createAccessibilityTreeNode();this._rowElements.unshift(b),this._rowContainer.insertAdjacentElement("afterbegin",b)}else{let b=this._createAccessibilityTreeNode();this._rowElements.push(b),this._rowContainer.appendChild(b)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(y===0?-1:1),this._rowElements[y===0?1:this._rowElements.length-2].focus(),m.preventDefault(),m.stopImmediatePropagation()}_handleResize(m){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let y=this._rowContainer.children.length;y<this._terminal.rows;y++)this._rowElements[y]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[y]);for(;this._rowElements.length>m;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let m=document.createElement("div");return m.setAttribute("role","listitem"),m.tabIndex=-1,this._refreshRowDimensions(m),m}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let m=0;m<this._terminal.rows;m++)this._refreshRowDimensions(this._rowElements[m])}}_refreshRowDimensions(m){m.style.height=`${this._renderService.dimensions.css.cell.height}px`}};s.AccessibilityManager=_=p([u(1,o.IRenderService)],_)},3614:(v,s)=>{function a(i){return i.replace(/\r?\n/g,"\r")}function p(i,l){return l?"\x1B[200~"+i+"\x1B[201~":i}function u(i,l,d,f){i=p(i=a(i),d.decPrivateModes.bracketedPasteMode&&f.rawOptions.ignoreBracketedPasteMode!==!0),d.triggerDataEvent(i,!0),l.value=""}function r(i,l,d){let f=d.getBoundingClientRect(),o=i.clientX-f.left-10,h=i.clientY-f.top-10;l.style.width="20px",l.style.height="20px",l.style.left=`${o}px`,l.style.top=`${h}px`,l.style.zIndex="1000",l.focus()}Object.defineProperty(s,"__esModule",{value:!0}),s.rightClickHandler=s.moveTextAreaUnderMouseCursor=s.paste=s.handlePasteEvent=s.copyHandler=s.bracketTextForPaste=s.prepareTextForTerminal=void 0,s.prepareTextForTerminal=a,s.bracketTextForPaste=p,s.copyHandler=function(i,l){i.clipboardData&&i.clipboardData.setData("text/plain",l.selectionText),i.preventDefault()},s.handlePasteEvent=function(i,l,d,f){i.stopPropagation(),i.clipboardData&&u(i.clipboardData.getData("text/plain"),l,d,f)},s.paste=u,s.moveTextAreaUnderMouseCursor=r,s.rightClickHandler=function(i,l,d,f,o){r(i,l,d),o&&f.rightClickSelect(i),l.value=f.selectionText,l.select()}},7239:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorContrastCache=void 0;let p=a(1505);s.ColorContrastCache=class{constructor(){this._color=new p.TwoKeyMap,this._css=new p.TwoKeyMap}setCss(u,r,i){this._css.set(u,r,i)}getCss(u,r){return this._css.get(u,r)}setColor(u,r,i){this._color.set(u,r,i)}getColor(u,r){return this._color.get(u,r)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.addDisposableDomListener=void 0,s.addDisposableDomListener=function(a,p,u,r){a.addEventListener(p,u,r);let i=!1;return{dispose:()=>{i||(i=!0,a.removeEventListener(p,u,r))}}}},6465:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Linkifier2=void 0;let r=a(3656),i=a(8460),l=a(844),d=a(2585),f=s.Linkifier2=class extends l.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new i.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new i.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,l.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,l.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{let h=this._linkProviders.indexOf(o);h!==-1&&this._linkProviders.splice(h,1)}}}attachToDom(o,h,_){this._element=o,this._mouseService=h,this._renderService=_,this.register((0,r.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,r.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,r.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!h)return;this._isMouseOut=!1;let _=o.composedPath();for(let m=0;m<_.length;m++){let y=_[m];if(y.classList.contains("xterm"))break;if(y.classList.contains("xterm-hover"))return}this._lastBufferCell&&h.x===this._lastBufferCell.x&&h.y===this._lastBufferCell.y||(this._handleHover(h),this._lastBufferCell=h)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,h){var _,m;this._activeProviderReplies&&h||((_=this._activeProviderReplies)===null||_===void 0||_.forEach(C=>{C?.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let y=!1;for(let[C,E]of this._linkProviders.entries())h?!((m=this._activeProviderReplies)===null||m===void 0)&&m.get(C)&&(y=this._checkLinkProviderResult(C,o,y)):E.provideLinks(o.y,D=>{var g,b;if(this._isMouseOut)return;let L=D?.map(S=>({link:S}));(g=this._activeProviderReplies)===null||g===void 0||g.set(C,L),y=this._checkLinkProviderResult(C,o,y),((b=this._activeProviderReplies)===null||b===void 0?void 0:b.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,h){let _=new Set;for(let m=0;m<h.size;m++){let y=h.get(m);if(y)for(let C=0;C<y.length;C++){let E=y[C],D=E.link.range.start.y<o?0:E.link.range.start.x,g=E.link.range.end.y>o?this._bufferService.cols:E.link.range.end.x;for(let b=D;b<=g;b++){if(_.has(b)){y.splice(C--,1);break}_.add(b)}}}}_checkLinkProviderResult(o,h,_){var m;if(!this._activeProviderReplies)return _;let y=this._activeProviderReplies.get(o),C=!1;for(let E=0;E<o;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(C=!0);if(!C&&y){let E=y.find(D=>this._linkAtPosition(D.link,h));E&&(_=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!_)for(let E=0;E<this._activeProviderReplies.size;E++){let D=(m=this._activeProviderReplies.get(E))===null||m===void 0?void 0:m.find(g=>this._linkAtPosition(g.link,h));if(D){_=!0,this._handleNewLink(D);break}}return _}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;let h=this._positionFromMouseEvent(o,this._element,this._mouseService);h&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,h)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,h){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!h||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=h)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,l.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let h=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);h&&this._linkAtPosition(o.link,h)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.pointerCursor},set:_=>{var m,y;!((m=this._currentLink)===null||m===void 0)&&m.state&&this._currentLink.state.decorations.pointerCursor!==_&&(this._currentLink.state.decorations.pointerCursor=_,this._currentLink.state.isHovered&&((y=this._element)===null||y===void 0||y.classList.toggle("xterm-cursor-pointer",_)))}},underline:{get:()=>{var _,m;return(m=(_=this._currentLink)===null||_===void 0?void 0:_.state)===null||m===void 0?void 0:m.decorations.underline},set:_=>{var m,y,C;!((m=this._currentLink)===null||m===void 0)&&m.state&&((C=(y=this._currentLink)===null||y===void 0?void 0:y.state)===null||C===void 0?void 0:C.decorations.underline)!==_&&(this._currentLink.state.decorations.underline=_,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,_))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(_=>{if(!this._currentLink)return;let m=_.start===0?0:_.start+1+this._bufferService.buffer.ydisp,y=this._bufferService.buffer.ydisp+1+_.end;if(this._currentLink.link.range.start.y>=m&&this._currentLink.link.range.end.y<=y&&(this._clearCurrentLink(m,y),this._lastMouseEvent&&this._element)){let C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),h.hover&&h.hover(_,h.text)}_fireUnderlineEvent(o,h){let _=o.range,m=this._bufferService.buffer.ydisp,y=this._createLinkUnderlineEvent(_.start.x-1,_.start.y-m-1,_.end.x,_.end.y-m-1,void 0);(h?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(y)}_linkLeave(o,h,_){var m;!((m=this._currentLink)===null||m===void 0)&&m.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(h,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),h.leave&&h.leave(_,h.text)}_linkAtPosition(o,h){let _=o.range.start.y*this._bufferService.cols+o.range.start.x,m=o.range.end.y*this._bufferService.cols+o.range.end.x,y=h.y*this._bufferService.cols+h.x;return _<=y&&y<=m}_positionFromMouseEvent(o,h,_){let m=_.getCoords(o,h,this._bufferService.cols,this._bufferService.rows);if(m)return{x:m[0],y:m[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,h,_,m,y){return{x1:o,y1:h,x2:_,y2:m,cols:this._bufferService.cols,fg:y}}};s.Linkifier2=f=p([u(0,d.IBufferService)],f)},9042:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.tooMuchOutput=s.promptLabel=void 0,s.promptLabel="Terminal input",s.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,s,a){var p=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},u=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkProvider=void 0;let r=a(511),i=a(2585),l=s.OscLinkProvider=class{constructor(f,o,h){this._bufferService=f,this._optionsService=o,this._oscLinkService=h}provideLinks(f,o){var h;let _=this._bufferService.buffer.lines.get(f-1);if(!_)return void o(void 0);let m=[],y=this._optionsService.rawOptions.linkHandler,C=new r.CellData,E=_.getTrimmedLength(),D=-1,g=-1,b=!1;for(let L=0;L<E;L++)if(g!==-1||_.hasContent(L)){if(_.loadCell(L,C),C.hasExtendedAttrs()&&C.extended.urlId){if(g===-1){g=L,D=C.extended.urlId;continue}b=C.extended.urlId!==D}else g!==-1&&(b=!0);if(b||g!==-1&&L===E-1){let S=(h=this._oscLinkService.getLinkData(D))===null||h===void 0?void 0:h.uri;if(S){let T={start:{x:g+1,y:f},end:{x:L+(b||L!==E-1?0:1),y:f}},M=!1;if(!y?.allowNonHttpProtocols)try{let w=new URL(S);["http:","https:"].includes(w.protocol)||(M=!0)}catch{M=!0}M||m.push({text:S,range:T,activate:(w,F)=>y?y.activate(w,F,T):d(0,F),hover:(w,F)=>{var x;return(x=y?.hover)===null||x===void 0?void 0:x.call(y,w,F,T)},leave:(w,F)=>{var x;return(x=y?.leave)===null||x===void 0?void 0:x.call(y,w,F,T)}})}b=!1,C.hasExtendedAttrs()&&C.extended.urlId?(g=L,D=C.extended.urlId):(g=-1,D=-1)}}o(m)}};function d(f,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){let h=window.open();if(h){try{h.opener=null}catch{}h.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}s.OscLinkProvider=l=p([u(0,i.IBufferService),u(1,i.IOptionsService),u(2,i.IOscLinkService)],l)},6193:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.RenderDebouncer=void 0,s.RenderDebouncer=class{constructor(a,p){this._parentWindow=a,this._renderCallback=p,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,p,u){this._rowCount=u,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ScreenDprMonitor=void 0;let p=a(844);class u extends p.Disposable{constructor(i){super(),this._parentWindow=i,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,p.toDisposable)(()=>{this.clearListener()}))}setListener(i){this._listener&&this.clearListener(),this._listener=i,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var i;this._outerListener&&((i=this._resolutionMediaMatchList)===null||i===void 0||i.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}s.ScreenDprMonitor=u},3236:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Terminal=void 0;let p=a(3614),u=a(3656),r=a(6465),i=a(9042),l=a(3730),d=a(1680),f=a(3107),o=a(5744),h=a(2950),_=a(1296),m=a(428),y=a(4269),C=a(5114),E=a(8934),D=a(3230),g=a(9312),b=a(4725),L=a(6731),S=a(8055),T=a(8969),M=a(8460),w=a(844),F=a(6114),x=a(8437),R=a(2584),A=a(7399),I=a(5941),$=a(9074),k=a(2585),H=a(5435),U=a(4567),q=typeof window<"u"?window.document:null;class N extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(O={}){super(O),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new w.MutableDisposable),this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(r.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(l.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance($.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((B,W)=>this.refresh(B,W))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(B=>this._reportWindowsOptions(B))),this.register(this._inputHandler.onColor(B=>this._handleColorEvent(B))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(B=>this._afterResize(B.cols,B.rows))),this.register((0,w.toDisposable)(()=>{var B,W;this._customKeyEventHandler=void 0,(W=(B=this.element)===null||B===void 0?void 0:B.parentNode)===null||W===void 0||W.removeChild(this.element)}))}_handleColorEvent(O){if(this._themeService)for(let B of O){let W,P="";switch(B.index){case 256:W="foreground",P="10";break;case 257:W="background",P="11";break;case 258:W="cursor",P="12";break;default:W="ansi",P="4;"+B.index}switch(B.type){case 0:let X=S.color.toColorRGB(W==="ansi"?this._themeService.colors.ansi[B.index]:this._themeService.colors[W]);this.coreService.triggerDataEvent(`${R.C0.ESC}]${P};${(0,I.toRgbString)(X)}${R.C1_ESCAPED.ST}`);break;case 1:if(W==="ansi")this._themeService.modifyColors(J=>J.ansi[B.index]=S.rgba.toColor(...B.color));else{let J=W;this._themeService.modifyColors(ve=>ve[J]=S.rgba.toColor(...B.color))}break;case 2:this._themeService.restoreColor(B.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(O){O?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(O){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[I"),this.updateCursorStyle(O),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var O;return(O=this.textarea)===null||O===void 0?void 0:O.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(R.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let O=this.buffer.ybase+this.buffer.y,B=this.buffer.lines.get(O);if(!B)return;let W=Math.min(this.buffer.x,this.cols-1),P=this._renderService.dimensions.css.cell.height,X=B.getWidth(W),J=this._renderService.dimensions.css.cell.width*X,ve=this.buffer.y*this._renderService.dimensions.css.cell.height,Ee=W*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Ee+"px",this.textarea.style.top=ve+"px",this.textarea.style.width=J+"px",this.textarea.style.height=P+"px",this.textarea.style.lineHeight=P+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",B=>{this.hasSelection()&&(0,p.copyHandler)(B,this._selectionService)}));let O=B=>(0,p.handlePasteEvent)(B,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",O)),this.register((0,u.addDisposableDomListener)(this.element,"paste",O)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",B=>{B.button===2&&(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",B=>{(0,p.rightClickHandler)(B,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",B=>{B.button===1&&(0,p.moveTextAreaUnderMouseCursor)(B,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",O=>this._keyUp(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",O=>this._keyDown(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",O=>this._keyPress(O),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",O=>this._compositionHelper.compositionupdate(O))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,u.addDisposableDomListener)(this.textarea,"input",O=>this._inputEvent(O),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(O){var B;if(!O)throw new Error("Terminal requires a parent element.");O.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=O.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),O.appendChild(this.element);let W=q.createDocumentFragment();this._viewportElement=q.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),W.appendChild(this._viewportElement),this._viewportScrollArea=q.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=q.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=q.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),W.appendChild(this.screenElement),this.textarea=q.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",i.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,(B=this._document.defaultView)!==null&&B!==void 0?B:window),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",P=>this._handleTextAreaFocus(P))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(y.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(D.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(P=>this._onRender.fire(P))),this.onResize(P=>this._renderService.resize(P.cols,P.rows)),this._compositionView=q.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(h.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(W);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(d.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(g.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(P=>this.scrollLines(P.amount,P.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(P=>this._renderService.handleSelectionChanged(P.start,P.end,P.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(P=>{this.textarea.value=P,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(P=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(f.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",P=>this._selectionService.handleMouseDown(P))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",P=>this._handleScreenReaderModeOptionChange(P))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",P=>{!this._overviewRulerRenderer&&P&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(_.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let O=this,B=this.element;function W(J){let ve=O._mouseService.getMouseReportCoords(J,O.screenElement);if(!ve)return!1;let Ee,De;switch(J.overrideType||J.type){case"mousemove":De=32,J.buttons===void 0?(Ee=3,J.button!==void 0&&(Ee=J.button<3?J.button:3)):Ee=1&J.buttons?0:4&J.buttons?1:2&J.buttons?2:3;break;case"mouseup":De=0,Ee=J.button<3?J.button:3;break;case"mousedown":De=1,Ee=J.button<3?J.button:3;break;case"wheel":if(O.viewport.getLinesScrolled(J)===0)return!1;De=J.deltaY<0?0:1,Ee=4;break;default:return!1}return!(De===void 0||Ee===void 0||Ee>4)&&O.coreMouseService.triggerMouseEvent({col:ve.col,row:ve.row,x:ve.x,y:ve.y,button:Ee,action:De,ctrl:J.ctrlKey,alt:J.altKey,shift:J.shiftKey})}let P={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:J=>(W(J),J.buttons||(this._document.removeEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.removeEventListener("mousemove",P.mousedrag)),this.cancel(J)),wheel:J=>(W(J),this.cancel(J,!0)),mousedrag:J=>{J.buttons&&W(J)},mousemove:J=>{J.buttons||W(J)}};this.register(this.coreMouseService.onProtocolChange(J=>{J?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(J)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&J?P.mousemove||(B.addEventListener("mousemove",X.mousemove),P.mousemove=X.mousemove):(B.removeEventListener("mousemove",P.mousemove),P.mousemove=null),16&J?P.wheel||(B.addEventListener("wheel",X.wheel,{passive:!1}),P.wheel=X.wheel):(B.removeEventListener("wheel",P.wheel),P.wheel=null),2&J?P.mouseup||(B.addEventListener("mouseup",X.mouseup),P.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",P.mouseup),B.removeEventListener("mouseup",P.mouseup),P.mouseup=null),4&J?P.mousedrag||(P.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",P.mousedrag),P.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(B,"mousedown",J=>{if(J.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(J))return W(J),P.mouseup&&this._document.addEventListener("mouseup",P.mouseup),P.mousedrag&&this._document.addEventListener("mousemove",P.mousedrag),this.cancel(J)})),this.register((0,u.addDisposableDomListener)(B,"wheel",J=>{if(!P.wheel){if(!this.buffer.hasScrollback){let ve=this.viewport.getLinesScrolled(J);if(ve===0)return;let Ee=R.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(J.deltaY<0?"A":"B"),De="";for(let se=0;se<Math.abs(ve);se++)De+=Ee;return this.coreService.triggerDataEvent(De,!0),this.cancel(J,!0)}return this.viewport.handleWheel(J)?this.cancel(J):void 0}},{passive:!1})),this.register((0,u.addDisposableDomListener)(B,"touchstart",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(J),this.cancel(J)},{passive:!0})),this.register((0,u.addDisposableDomListener)(B,"touchmove",J=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(J)?void 0:this.cancel(J)},{passive:!1}))}refresh(O,B){var W;(W=this._renderService)===null||W===void 0||W.refreshRows(O,B)}updateCursorStyle(O){var B;!((B=this._selectionService)===null||B===void 0)&&B.shouldColumnSelect(O)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(O,B,W=0){var P;W===1?(super.scrollLines(O,B,W),this.refresh(0,this.rows-1)):(P=this.viewport)===null||P===void 0||P.scrollLines(O)}paste(O){(0,p.paste)(O,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(O){this._customKeyEventHandler=O}registerLinkProvider(O){return this.linkifier2.registerLinkProvider(O)}registerCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let B=this._characterJoinerService.register(O);return this.refresh(0,this.rows-1),B}deregisterCharacterJoiner(O){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(O)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(O){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+O)}registerDecoration(O){return this._decorationService.registerDecoration(O)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(O,B,W){this._selectionService.setSelection(O,B,W)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var O;(O=this._selectionService)===null||O===void 0||O.clearSelection()}selectAll(){var O;(O=this._selectionService)===null||O===void 0||O.selectAll()}selectLines(O,B){var W;(W=this._selectionService)===null||W===void 0||W.selectLines(O,B)}_keyDown(O){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;let B=this.browser.isMac&&this.options.macOptionIsMeta&&O.altKey;if(!B&&!this._compositionHelper.keydown(O))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;B||O.key!=="Dead"&&O.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let W=(0,A.evaluateKeyboardEvent)(O,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(O),W.type===3||W.type===2){let P=this.rows-1;return this.scrollLines(W.type===2?-P:P),this.cancel(O,!0)}return W.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,O)||(W.cancel&&this.cancel(O,!0),!W.key||!!(O.key&&!O.ctrlKey&&!O.altKey&&!O.metaKey&&O.key.length===1&&O.key.charCodeAt(0)>=65&&O.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(W.key!==R.C0.ETX&&W.key!==R.C0.CR||(this.textarea.value=""),this._onKey.fire({key:W.key,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(W.key,!0),!this.optionsService.rawOptions.screenReaderMode||O.altKey||O.ctrlKey?this.cancel(O,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(O,B){let W=O.isMac&&!this.options.macOptionIsMeta&&B.altKey&&!B.ctrlKey&&!B.metaKey||O.isWindows&&B.altKey&&B.ctrlKey&&!B.metaKey||O.isWindows&&B.getModifierState("AltGraph");return B.type==="keypress"?W:W&&(!B.keyCode||B.keyCode>47)}_keyUp(O){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1||(function(B){return B.keyCode===16||B.keyCode===17||B.keyCode===18}(O)||this.focus(),this.updateCursorStyle(O),this._keyPressHandled=!1)}_keyPress(O){let B;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(O)===!1)return!1;if(this.cancel(O),O.charCode)B=O.charCode;else if(O.which===null||O.which===void 0)B=O.keyCode;else{if(O.which===0||O.charCode===0)return!1;B=O.which}return!(!B||(O.altKey||O.ctrlKey||O.metaKey)&&!this._isThirdLevelShift(this.browser,O)||(B=String.fromCharCode(B),this._onKey.fire({key:B,domEvent:O}),this._showCursor(),this.coreService.triggerDataEvent(B,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(O){if(O.data&&O.inputType==="insertText"&&(!O.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let B=O.data;return this.coreService.triggerDataEvent(B,!0),this.cancel(O),!0}return!1}resize(O,B){O!==this.cols||B!==this.rows?super.resize(O,B):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(O,B){var W,P;(W=this._charSizeService)===null||W===void 0||W.measure(),(P=this.viewport)===null||P===void 0||P.syncScrollArea(!0)}clear(){var O;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let B=1;B<this.rows;B++)this.buffer.lines.push(this.buffer.getBlankLine(x.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(O=this.viewport)===null||O===void 0||O.reset(),this.refresh(0,this.rows-1)}}reset(){var O,B;this.options.rows=this.rows,this.options.cols=this.cols;let W=this._customKeyEventHandler;this._setup(),super.reset(),(O=this._selectionService)===null||O===void 0||O.reset(),this._decorationService.reset(),(B=this.viewport)===null||B===void 0||B.reset(),this._customKeyEventHandler=W,this.refresh(0,this.rows-1)}clearTextureAtlas(){var O;(O=this._renderService)===null||O===void 0||O.clearTextureAtlas()}_reportFocus(){var O;!((O=this.element)===null||O===void 0)&&O.classList.contains("focus")?this.coreService.triggerDataEvent(R.C0.ESC+"[I"):this.coreService.triggerDataEvent(R.C0.ESC+"[O")}_reportWindowsOptions(O){if(this._renderService)switch(O){case H.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let B=this._renderService.dimensions.css.canvas.width.toFixed(0),W=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[4;${W};${B}t`);break;case H.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let P=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${R.C0.ESC}[6;${X};${P}t`)}}cancel(O,B){if(this.options.cancelEvents||B)return O.preventDefault(),O.stopPropagation(),!1}}s.Terminal=N},9924:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TimeBasedDebouncer=void 0,s.TimeBasedDebouncer=class{constructor(a,p=1e3){this._renderCallback=a,this._debounceThresholdMS=p,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,p,u){this._rowCount=u,a=a!==void 0?a:0,p=p!==void 0?p:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,p):p;let r=Date.now();if(r-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=r,this._innerRefresh();else if(!this._additionalRefreshRequested){let i=r-this._lastRefreshMs,l=this._debounceThresholdMS-i;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},l)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),p=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,p)}}},1680:function(v,s,a){var p=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},u=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.Viewport=void 0;let r=a(3656),i=a(4725),l=a(8460),d=a(844),f=a(2585),o=s.Viewport=class extends d.Disposable{constructor(h,_,m,y,C,E,D,g){super(),this._viewportElement=h,this._scrollArea=_,this._bufferService=m,this._optionsService=y,this._charSizeService=C,this._renderService=E,this._coreBrowserService=D,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new l.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,r.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(g.colors),this.register(g.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(h){this._viewportElement.style.backgroundColor=h.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(h){if(h)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let _=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==_&&(this._lastRecordedBufferHeight=_,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let h=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==h&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=h),this._refreshAnimationFrame=null}syncScrollArea(h=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(h)}_handleScroll(h){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let _=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:_,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let h=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(h*(this._smoothScrollState.target-this._smoothScrollState.origin)),h<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(h,_){let m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(_<0&&this._viewportElement.scrollTop!==0||_>0&&m<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)}handleWheel(h){let _=this._getPixelsScrolled(h);return _!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+_:this._smoothScrollState.target+=_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}scrollLines(h){if(h!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let _=h*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+_,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:h,suppressScrollEvent:!1})}_getPixelsScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?_*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._currentRowHeight*this._bufferService.rows),_}getBufferElements(h,_){var m;let y,C="",E=[],D=_??this._bufferService.buffer.lines.length,g=this._bufferService.buffer.lines;for(let b=h;b<D;b++){let L=g.get(b);if(!L)continue;let S=(m=g.get(b+1))===null||m===void 0?void 0:m.isWrapped;if(C+=L.translateToString(!S),!S||b===g.length-1){let T=document.createElement("div");T.textContent=C,E.push(T),C.length>0&&(y=T),C=""}}return{bufferElements:E,cursorElement:y}}getLinesScrolled(h){if(h.deltaY===0||h.shiftKey)return 0;let _=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(_/=this._currentRowHeight+0,this._wheelPartialScroll+=_,_=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(_*=this._bufferService.rows),_}_applyScrollModifier(h,_){let m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&_.altKey||m==="ctrl"&&_.ctrlKey||m==="shift"&&_.shiftKey?h*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:h*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(h){this._lastTouchY=h.touches[0].pageY}handleTouchMove(h){let _=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,_!==0&&(this._viewportElement.scrollTop+=_,this._bubbleScroll(h,_))}};s.Viewport=o=p([u(2,f.IBufferService),u(3,f.IOptionsService),u(4,i.ICharSizeService),u(5,i.IRenderService),u(6,i.ICoreBrowserService),u(7,i.IThemeService)],o)},3107:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferDecorationRenderer=void 0;let r=a(3656),i=a(4725),l=a(844),d=a(2585),f=s.BufferDecorationRenderer=class extends l.Disposable{constructor(o,h,_,m){super(),this._screenElement=o,this._bufferService=h,this._decorationService=_,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,r.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(y=>this._removeDecoration(y))),this.register((0,l.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var h,_;let m=document.createElement("div");m.classList.add("xterm-decoration"),m.classList.toggle("xterm-decoration-top-layer",((h=o?.options)===null||h===void 0?void 0:h.layer)==="top"),m.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,m.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",m.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",m.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let y=(_=o.options.x)!==null&&_!==void 0?_:0;return y&&y>this._bufferService.cols&&(m.style.display="none"),this._refreshXPosition(o,m),m}_refreshStyle(o){let h=o.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let _=this._decorationElements.get(o);_||(_=this._createElement(o),o.element=_,this._decorationElements.set(o,_),this._container.appendChild(_),o.onDispose(()=>{this._decorationElements.delete(o),_.remove()})),_.style.top=h*this._renderService.dimensions.css.cell.height+"px",_.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(_)}}_refreshXPosition(o,h=o.element){var _;if(!h)return;let m=(_=o.options.x)!==null&&_!==void 0?_:0;(o.options.anchor||"left")==="right"?h.style.right=m?m*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=m?m*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var h;(h=this._decorationElements.get(o))===null||h===void 0||h.remove(),this._decorationElements.delete(o),o.dispose()}};s.BufferDecorationRenderer=f=p([u(1,d.IBufferService),u(2,d.IDecorationService),u(3,i.IRenderService)],f)},5871:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorZoneStore=void 0,s.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let p of this._zones)if(p.color===a.options.overviewRulerOptions.color&&p.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(p,a.marker.line))return;if(this._lineAdjacentToZone(p,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(p,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,p){return p>=a.startBufferLine&&p<=a.endBufferLine}_lineAdjacentToZone(a,p,u){return p>=a.startBufferLine-this._linePadding[u||"full"]&&p<=a.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(a,p){a.startBufferLine=Math.min(a.startBufferLine,p),a.endBufferLine=Math.max(a.endBufferLine,p)}}},5744:function(v,s,a){var p=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var S=y.length-1;S>=0;S--)(g=y[S])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},u=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OverviewRulerRenderer=void 0;let r=a(5871),i=a(3656),l=a(4725),d=a(844),f=a(2585),o={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},_={full:0,left:0,center:0,right:0},m=s.OverviewRulerRenderer=class extends d.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(y,C,E,D,g,b,L){var S;super(),this._viewportElement=y,this._screenElement=C,this._bufferService=E,this._decorationService=D,this._renderService=g,this._optionsService=b,this._coreBrowseService=L,this._colorZoneStore=new r.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(S=this._viewportElement.parentElement)===null||S===void 0||S.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,d.toDisposable)(()=>{var M;(M=this._canvas)===null||M===void 0||M.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,i.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let y=Math.floor(this._canvas.width/3),C=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=y,h.center=C,h.right=y,this._refreshDrawHeightConstants(),_.full=0,_.left=0,_.center=h.left,_.right=h.left+h.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);let y=this._canvas.height/this._bufferService.buffer.lines.length,C=Math.round(Math.max(Math.min(y,12),6)*this._coreBrowseService.dpr);o.left=C,o.center=C,o.right=C}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let C of this._decorationService.decorations)this._colorZoneStore.addDecoration(C);this._ctx.lineWidth=1;let y=this._colorZoneStore.zones;for(let C of y)C.position!=="full"&&this._renderColorZone(C);for(let C of y)C.position==="full"&&this._renderColorZone(C);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(y){this._ctx.fillStyle=y.color,this._ctx.fillRect(_[y.position||"full"],Math.round((this._canvas.height-1)*(y.startBufferLine/this._bufferService.buffers.active.lines.length)-o[y.position||"full"]/2),h[y.position||"full"],Math.round((this._canvas.height-1)*((y.endBufferLine-y.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[y.position||"full"]))}_queueRefresh(y,C){this._shouldUpdateDimensions=y||this._shouldUpdateDimensions,this._shouldUpdateAnchor=C||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};s.OverviewRulerRenderer=m=p([u(2,f.IBufferService),u(3,f.IDecorationService),u(4,l.IRenderService),u(5,f.IOptionsService),u(6,l.ICoreBrowserService)],m)},2950:function(v,s,a){var p=this&&this.__decorate||function(f,o,h,_){var m,y=arguments.length,C=y<3?o:_===null?_=Object.getOwnPropertyDescriptor(o,h):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(f,o,h,_);else for(var E=f.length-1;E>=0;E--)(m=f[E])&&(C=(y<3?m(C):y>3?m(o,h,C):m(o,h))||C);return y>3&&C&&Object.defineProperty(o,h,C),C},u=this&&this.__param||function(f,o){return function(h,_){o(h,_,f)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CompositionHelper=void 0;let r=a(4725),i=a(2585),l=a(2584),d=s.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(f,o,h,_,m,y){this._textarea=f,this._compositionView=o,this._bufferService=h,this._optionsService=_,this._coreService=m,this._renderService=y,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(f){this._compositionView.textContent=f.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(f){if(this._isComposing||this._isSendingComposition){if(f.keyCode===229||f.keyCode===16||f.keyCode===17||f.keyCode===18)return!1;this._finalizeComposition(!1)}return f.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(f){if(this._compositionView.classList.remove("active"),this._isComposing=!1,f){let o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let h;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,h=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),h.length>0&&this._coreService.triggerDataEvent(h,!0)}},0)}else{this._isSendingComposition=!1;let o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){let f=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let o=this._textarea.value,h=o.replace(f,"");this._dataAlreadySent=h,o.length>f.length?this._coreService.triggerDataEvent(h,!0):o.length<f.length?this._coreService.triggerDataEvent(`${l.C0.DEL}`,!0):o.length===f.length&&o!==f&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(f){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),h=this._renderService.dimensions.css.cell.height,_=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=_+"px",this._compositionView.style.height=h+"px",this._compositionView.style.lineHeight=h+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let y=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=_+"px",this._textarea.style.width=Math.max(y.width,1)+"px",this._textarea.style.height=Math.max(y.height,1)+"px",this._textarea.style.lineHeight=y.height+"px"}f||setTimeout(()=>this.updateCompositionElements(!0),0)}}};s.CompositionHelper=d=p([u(2,i.IBufferService),u(3,i.IOptionsService),u(4,i.ICoreService),u(5,r.IRenderService)],d)},9806:(v,s)=>{function a(p,u,r){let i=r.getBoundingClientRect(),l=p.getComputedStyle(r),d=parseInt(l.getPropertyValue("padding-left")),f=parseInt(l.getPropertyValue("padding-top"));return[u.clientX-i.left-d,u.clientY-i.top-f]}Object.defineProperty(s,"__esModule",{value:!0}),s.getCoords=s.getCoordsRelativeToElement=void 0,s.getCoordsRelativeToElement=a,s.getCoords=function(p,u,r,i,l,d,f,o,h){if(!d)return;let _=a(p,u,r);return _?(_[0]=Math.ceil((_[0]+(h?f/2:0))/f),_[1]=Math.ceil(_[1]/o),_[0]=Math.min(Math.max(_[0],1),i+(h?1:0)),_[1]=Math.min(Math.max(_[1],1),l),_):void 0}},9504:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.moveToCellSequence=void 0;let p=a(2584);function u(o,h,_,m){let y=o-r(o,_),C=h-r(h,_),E=Math.abs(y-C)-function(D,g,b){let L=0,S=D-r(D,b),T=g-r(g,b);for(let M=0;M<Math.abs(S-T);M++){let w=i(D,g)==="A"?-1:1,F=b.buffer.lines.get(S+w*M);F?.isWrapped&&L++}return L}(o,h,_);return f(E,d(i(o,h),m))}function r(o,h){let _=0,m=h.buffer.lines.get(o),y=m?.isWrapped;for(;y&&o>=0&&o<h.rows;)_++,m=h.buffer.lines.get(--o),y=m?.isWrapped;return _}function i(o,h){return o>h?"A":"B"}function l(o,h,_,m,y,C){let E=o,D=h,g="";for(;E!==_||D!==m;)E+=y?1:-1,y&&E>C.cols-1?(g+=C.buffer.translateBufferLineToString(D,!1,o,E),E=0,o=0,D++):!y&&E<0&&(g+=C.buffer.translateBufferLineToString(D,!1,0,o+1),E=C.cols-1,o=E,D--);return g+C.buffer.translateBufferLineToString(D,!1,o,E)}function d(o,h){let _=h?"O":"[";return p.C0.ESC+_+o}function f(o,h){o=Math.floor(o);let _="";for(let m=0;m<o;m++)_+=h;return _}s.moveToCellSequence=function(o,h,_,m){let y=_.buffer.x,C=_.buffer.y;if(!_.buffer.hasScrollback)return function(g,b,L,S,T,M){return u(b,S,T,M).length===0?"":f(l(g,b,g,b-r(b,T),!1,T).length,d("D",M))}(y,C,0,h,_,m)+u(C,h,_,m)+function(g,b,L,S,T,M){let w;w=u(b,S,T,M).length>0?S-r(S,T):b;let F=S,x=function(R,A,I,$,k,H){let U;return U=u(I,$,k,H).length>0?$-r($,k):A,R<I&&U<=$||R>=I&&U<$?"C":"D"}(g,b,L,S,T,M);return f(l(g,w,L,F,x==="C",T).length,d(x,M))}(y,C,o,h,_,m);let E;if(C===h)return E=y>o?"D":"C",f(Math.abs(y-o),d(E,m));E=C>h?"D":"C";let D=Math.abs(C-h);return f(function(g,b){return b.cols-g}(C>h?o:y,_)+(D-1)*_.cols+1+((C>h?y:o)-1),d(E,m))}},1296:function(v,s,a){var p=this&&this.__decorate||function(T,M,w,F){var x,R=arguments.length,A=R<3?M:F===null?F=Object.getOwnPropertyDescriptor(M,w):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,M,w,F);else for(var I=T.length-1;I>=0;I--)(x=T[I])&&(A=(R<3?x(A):R>3?x(M,w,A):x(M,w))||A);return R>3&&A&&Object.defineProperty(M,w,A),A},u=this&&this.__param||function(T,M){return function(w,F){M(w,F,T)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRenderer=void 0;let r=a(3787),i=a(2550),l=a(2223),d=a(6171),f=a(4725),o=a(8055),h=a(8460),_=a(844),m=a(2585),y="xterm-dom-renderer-owner-",C="xterm-rows",E="xterm-fg-",D="xterm-bg-",g="xterm-focus",b="xterm-selection",L=1,S=s.DomRenderer=class extends _.Disposable{constructor(T,M,w,F,x,R,A,I,$,k){super(),this._element=T,this._screenElement=M,this._viewportElement=w,this._linkifier2=F,this._charSizeService=R,this._optionsService=A,this._bufferService=I,this._coreBrowserService=$,this._themeService=k,this._terminalClass=L++,this._rowElements=[],this.onRequestRedraw=this.register(new h.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(b),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,d.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(H=>this._injectCss(H))),this._injectCss(this._themeService.colors),this._rowFactory=x.createInstance(r.DomRendererRowFactory,document),this._element.classList.add(y+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(H=>this._handleLinkHover(H))),this.register(this._linkifier2.onHideLinkUnderline(H=>this._handleLinkLeave(H))),this.register((0,_.toDisposable)(()=>{this._element.classList.remove(y+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new i.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let w of this._rowElements)w.style.width=`${this.dimensions.css.canvas.width}px`,w.style.height=`${this.dimensions.css.cell.height}px`,w.style.lineHeight=`${this.dimensions.css.cell.height}px`,w.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let M=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=M,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let M=`${this._terminalSelector} .${C} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;M+=`${this._terminalSelector} .${C} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,M+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,M+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",M+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,M+=`${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C}.${g} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,M+=`${this._terminalSelector} .${b} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${b} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${b} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(let[w,F]of T.ansi.entries())M+=`${this._terminalSelector} .${E}${w} { color: ${F.css}; }${this._terminalSelector} .${E}${w}.xterm-dim { color: ${o.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${D}${w} { background-color: ${F.css}; }`;M+=`${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${E}${l.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${D}${l.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=M}_setDefaultSpacing(){let T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,M){for(let w=this._rowElements.length;w<=M;w++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>M;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,M){this._refreshRowElements(T,M),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(g)}handleFocus(){this._rowContainer.classList.add(g),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,M,w){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,M,w),this.renderRows(0,this._bufferService.rows-1),!T||!M)return;let F=T[1]-this._bufferService.buffer.ydisp,x=M[1]-this._bufferService.buffer.ydisp,R=Math.max(F,0),A=Math.min(x,this._bufferService.rows-1);if(R>=this._bufferService.rows||A<0)return;let I=document.createDocumentFragment();if(w){let $=T[0]>M[0];I.appendChild(this._createSelectionElement(R,$?M[0]:T[0],$?T[0]:M[0],A-R+1))}else{let $=F===R?T[0]:0,k=R===x?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(R,$,k));let H=A-R-1;if(I.appendChild(this._createSelectionElement(R+1,0,this._bufferService.cols,H)),R!==A){let U=x===A?M[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(A,0,U))}}this._selectionContainer.appendChild(I)}_createSelectionElement(T,M,w,F=1){let x=document.createElement("div");return x.style.height=F*this.dimensions.css.cell.height+"px",x.style.top=T*this.dimensions.css.cell.height+"px",x.style.left=M*this.dimensions.css.cell.width+"px",x.style.width=this.dimensions.css.cell.width*(w-M)+"px",x}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let T of this._rowElements)T.replaceChildren()}renderRows(T,M){let w=this._bufferService.buffer,F=w.ybase+w.y,x=Math.min(w.x,this._bufferService.cols-1),R=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let $=T;$<=M;$++){let k=$+w.ydisp,H=this._rowElements[$],U=w.lines.get(k);if(!H||!U)break;H.replaceChildren(...this._rowFactory.createRow(U,k,k===F,A,I,x,R,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${y}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,M,w,F,x,R){w<0&&(T=0),F<0&&(M=0);let A=this._bufferService.rows-1;w=Math.max(Math.min(w,A),0),F=Math.max(Math.min(F,A),0),x=Math.min(x,this._bufferService.cols);let I=this._bufferService.buffer,$=I.ybase+I.y,k=Math.min(I.x,x-1),H=this._optionsService.rawOptions.cursorBlink,U=this._optionsService.rawOptions.cursorStyle,q=this._optionsService.rawOptions.cursorInactiveStyle;for(let N=w;N<=F;++N){let K=N+I.ydisp,O=this._rowElements[N],B=I.lines.get(K);if(!O||!B)break;O.replaceChildren(...this._rowFactory.createRow(B,K,K===$,U,q,k,H,this.dimensions.css.cell.width,this._widthCache,R?N===w?T:0:-1,R?(N===F?M:x)-1:-1))}}};s.DomRenderer=S=p([u(4,m.IInstantiationService),u(5,f.ICharSizeService),u(6,m.IOptionsService),u(7,m.IBufferService),u(8,f.ICoreBrowserService),u(9,f.IThemeService)],S)},3787:function(v,s,a){var p=this&&this.__decorate||function(E,D,g,b){var L,S=arguments.length,T=S<3?D:b===null?b=Object.getOwnPropertyDescriptor(D,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,D,g,b);else for(var M=E.length-1;M>=0;M--)(L=E[M])&&(T=(S<3?L(T):S>3?L(D,g,T):L(D,g))||T);return S>3&&T&&Object.defineProperty(D,g,T),T},u=this&&this.__param||function(E,D){return function(g,b){D(g,b,E)}};Object.defineProperty(s,"__esModule",{value:!0}),s.DomRendererRowFactory=void 0;let r=a(2223),i=a(643),l=a(511),d=a(2585),f=a(8055),o=a(4725),h=a(4269),_=a(6171),m=a(3734),y=s.DomRendererRowFactory=class{constructor(E,D,g,b,L,S,T){this._document=E,this._characterJoinerService=D,this._optionsService=g,this._coreBrowserService=b,this._coreService=L,this._decorationService=S,this._themeService=T,this._workCell=new l.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,D,g){this._selectionStart=E,this._selectionEnd=D,this._columnSelectMode=g}createRow(E,D,g,b,L,S,T,M,w,F,x){let R=[],A=this._characterJoinerService.getJoinedCharacters(D),I=this._themeService.colors,$,k=E.getNoBgTrimmedLength();g&&k<S+1&&(k=S+1);let H=0,U="",q=0,N=0,K=0,O=!1,B=0,W=!1,P=0,X=[],J=F!==-1&&x!==-1;for(let ve=0;ve<k;ve++){E.loadCell(ve,this._workCell);let Ee=this._workCell.getWidth();if(Ee===0)continue;let De=!1,se=ve,we=this._workCell;if(A.length>0&&ve===A[0][0]){De=!0;let Ge=A.shift();we=new h.JoinedCellData(this._workCell,E.translateToString(!0,Ge[0],Ge[1]),Ge[1]-Ge[0]),se=Ge[1]-1,Ee=we.getWidth()}let bt=this._isCellInSelection(ve,D),Jt=g&&ve===S,Bt=J&&ve>=F&&ve<=x,Ze=!1;this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ge=>{Ze=!0});let ce=we.getChars()||i.WHITESPACE_CELL_CHAR;if(ce===" "&&(we.isUnderline()||we.isOverline())&&(ce="\xA0"),P=Ee*M-w.get(ce,we.isBold(),we.isItalic()),$){if(H&&(bt&&W||!bt&&!W&&we.bg===q)&&(bt&&W&&I.selectionForeground||we.fg===N)&&we.extended.ext===K&&Bt===O&&P===B&&!Jt&&!De&&!Ze){U+=ce,H++;continue}H&&($.textContent=U),$=this._document.createElement("span"),H=0,U=""}else $=this._document.createElement("span");if(q=we.bg,N=we.fg,K=we.extended.ext,O=Bt,B=P,W=bt,De&&S>=ve&&S<=se&&(S=ve),!this._coreService.isCursorHidden&&Jt){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&X.push("xterm-cursor-blink"),X.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(we.isBold()&&X.push("xterm-bold"),we.isItalic()&&X.push("xterm-italic"),we.isDim()&&X.push("xterm-dim"),U=we.isInvisible()?i.WHITESPACE_CELL_CHAR:we.getChars()||i.WHITESPACE_CELL_CHAR,we.isUnderline()&&(X.push(`xterm-underline-${we.extended.underlineStyle}`),U===" "&&(U="\xA0"),!we.isUnderlineColorDefault()))if(we.isUnderlineColorRGB())$.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(we.getUnderlineColor()).join(",")})`;else{let Ge=we.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&we.isBold()&&Ge<8&&(Ge+=8),$.style.textDecorationColor=I.ansi[Ge].css}we.isOverline()&&(X.push("xterm-overline"),U===" "&&(U="\xA0")),we.isStrikethrough()&&X.push("xterm-strikethrough"),Bt&&($.style.textDecoration="underline");let he=we.getFgColor(),le=we.getFgColorMode(),oe=we.getBgColor(),j=we.getBgColorMode(),ie=!!we.isInverse();if(ie){let Ge=he;he=oe,oe=Ge;let wt=le;le=j,j=wt}let de,Be,nt,ct=!1;switch(this._decorationService.forEachDecorationAtCell(ve,D,void 0,Ge=>{Ge.options.layer!=="top"&&ct||(Ge.backgroundColorRGB&&(j=50331648,oe=Ge.backgroundColorRGB.rgba>>8&16777215,de=Ge.backgroundColorRGB),Ge.foregroundColorRGB&&(le=50331648,he=Ge.foregroundColorRGB.rgba>>8&16777215,Be=Ge.foregroundColorRGB),ct=Ge.options.layer==="top")}),!ct&&bt&&(de=this._coreBrowserService.isFocused?I.selectionBackgroundOpaque:I.selectionInactiveBackgroundOpaque,oe=de.rgba>>8&16777215,j=50331648,ct=!0,I.selectionForeground&&(le=50331648,he=I.selectionForeground.rgba>>8&16777215,Be=I.selectionForeground)),ct&&X.push("xterm-decoration-top"),j){case 16777216:case 33554432:nt=I.ansi[oe],X.push(`xterm-bg-${oe}`);break;case 50331648:nt=f.rgba.toColor(oe>>16,oe>>8&255,255&oe),this._addStyle($,`background-color:#${C((oe>>>0).toString(16),"0",6)}`);break;default:ie?(nt=I.foreground,X.push(`xterm-bg-${r.INVERTED_DEFAULT_COLOR}`)):nt=I.background}switch(de||we.isDim()&&(de=f.color.multiplyOpacity(nt,.5)),le){case 16777216:case 33554432:we.isBold()&&he<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(he+=8),this._applyMinimumContrast($,nt,I.ansi[he],we,de,void 0)||X.push(`xterm-fg-${he}`);break;case 50331648:let Ge=f.rgba.toColor(he>>16&255,he>>8&255,255&he);this._applyMinimumContrast($,nt,Ge,we,de,Be)||this._addStyle($,`color:#${C(he.toString(16),"0",6)}`);break;default:this._applyMinimumContrast($,nt,I.foreground,we,de,void 0)||ie&&X.push(`xterm-fg-${r.INVERTED_DEFAULT_COLOR}`)}X.length&&($.className=X.join(" "),X.length=0),Jt||De||Ze?$.textContent=U:H++,P!==this.defaultSpacing&&($.style.letterSpacing=`${P}px`),R.push($),ve=se}return $&&H&&($.textContent=U),R}_applyMinimumContrast(E,D,g,b,L,S){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,_.excludeFromContrastRatioDemands)(b.getCode()))return!1;let T=this._getContrastCache(b),M;if(L||S||(M=T.getColor(D.rgba,g.rgba)),M===void 0){let w=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);M=f.color.ensureContrastRatio(L||D,S||g,w),T.setColor((L||D).rgba,(S||g).rgba,M??null)}return!!M&&(this._addStyle(E,`color:${M.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,D){E.setAttribute("style",`${E.getAttribute("style")||""}${D};`)}_isCellInSelection(E,D){let g=this._selectionStart,b=this._selectionEnd;return!(!g||!b)&&(this._columnSelectMode?g[0]<=b[0]?E>=g[0]&&D>=g[1]&&E<b[0]&&D<=b[1]:E<g[0]&&D>=g[1]&&E>=b[0]&&D<=b[1]:D>g[1]&&D<b[1]||g[1]===b[1]&&D===g[1]&&E>=g[0]&&E<b[0]||g[1]<b[1]&&D===b[1]&&E<b[0]||g[1]<b[1]&&D===g[1]&&E>=g[0])}};function C(E,D,g){for(;E.length<g;)E=D+E;return E}s.DomRendererRowFactory=y=p([u(1,o.ICharacterJoinerService),u(2,d.IOptionsService),u(3,o.ICoreBrowserService),u(4,d.ICoreService),u(5,d.IDecorationService),u(6,o.IThemeService)],y)},2550:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WidthCache=void 0,s.WidthCache=class{constructor(a){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let p=a.createElement("span"),u=a.createElement("span");u.style.fontWeight="bold";let r=a.createElement("span");r.style.fontStyle="italic";let i=a.createElement("span");i.style.fontWeight="bold",i.style.fontStyle="italic",this._measureElements=[p,u,r,i],this._container.appendChild(p),this._container.appendChild(u),this._container.appendChild(r),this._container.appendChild(i),a.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,p,u,r){a===this._font&&p===this._fontSize&&u===this._weight&&r===this._weightBold||(this._font=a,this._fontSize=p,this._weight=u,this._weightBold=r,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${r}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${r}`,this.clear())}get(a,p,u){let r=0;if(!p&&!u&&a.length===1&&(r=a.charCodeAt(0))<256)return this._flat[r]!==-9999?this._flat[r]:this._flat[r]=this._measure(a,0);let i=a;p&&(i+="B"),u&&(i+="I");let l=this._holey.get(i);if(l===void 0){let d=0;p&&(d|=1),u&&(d|=2),l=this._measure(a,d),this._holey.set(i,l)}return l}_measure(a,p){let u=this._measureElements[p];return u.textContent=a.repeat(32),u.offsetWidth/32}}},2223:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TEXT_BASELINE=s.DIM_OPACITY=s.INVERTED_DEFAULT_COLOR=void 0;let p=a(6114);s.INVERTED_DEFAULT_COLOR=257,s.DIM_OPACITY=.5,s.TEXT_BASELINE=p.isFirefox||p.isLegacyEdge?"bottom":"ideographic"},6171:(v,s)=>{function a(p){return 57508<=p&&p<=57558}Object.defineProperty(s,"__esModule",{value:!0}),s.createRenderDimensions=s.excludeFromContrastRatioDemands=s.isRestrictedPowerlineGlyph=s.isPowerlineGlyph=s.throwIfFalsy=void 0,s.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},s.isPowerlineGlyph=a,s.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},s.excludeFromContrastRatioDemands=function(p){return a(p)||function(u){return 9472<=u&&u<=9631}(p)},s.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionModel=void 0,s.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,p=this.selectionEnd;return!(!a||!p)&&(a[1]>p[1]||a[1]===p[1]&&a[0]>p[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharSizeService=void 0;let r=a(2585),i=a(8460),l=a(844),d=s.CharSizeService=class extends l.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,h,_){super(),this._optionsService=_,this.width=0,this.height=0,this._onCharSizeChange=this.register(new i.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new f(o,h,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};s.CharSizeService=d=p([u(2,r.IOptionsService)],d);class f{constructor(h,_,m){this._document=h,this._parentElement=_,this._optionsService=m,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let h={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return h.width!==0&&h.height!==0&&(this._result.width=h.width/32,this._result.height=Math.ceil(h.height)),this._result}}},4269:function(v,s,a){var p=this&&this.__decorate||function(h,_,m,y){var C,E=arguments.length,D=E<3?_:y===null?y=Object.getOwnPropertyDescriptor(_,m):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,_,m,y);else for(var g=h.length-1;g>=0;g--)(C=h[g])&&(D=(E<3?C(D):E>3?C(_,m,D):C(_,m))||D);return E>3&&D&&Object.defineProperty(_,m,D),D},u=this&&this.__param||function(h,_){return function(m,y){_(m,y,h)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterJoinerService=s.JoinedCellData=void 0;let r=a(3734),i=a(643),l=a(511),d=a(2585);class f extends r.AttributeData{constructor(_,m,y){super(),this.content=0,this.combinedData="",this.fg=_.fg,this.bg=_.bg,this.combinedData=m,this._width=y}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(_){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.JoinedCellData=f;let o=s.CharacterJoinerService=class Nk{constructor(_){this._bufferService=_,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}register(_){let m={id:this._nextCharacterJoinerId++,handler:_};return this._characterJoiners.push(m),m.id}deregister(_){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===_)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(_){if(this._characterJoiners.length===0)return[];let m=this._bufferService.buffer.lines.get(_);if(!m||m.length===0)return[];let y=[],C=m.translateToString(!0),E=0,D=0,g=0,b=m.getFg(0),L=m.getBg(0);for(let S=0;S<m.getTrimmedLength();S++)if(m.loadCell(S,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==L){if(S-E>1){let T=this._getJoinedRanges(C,g,D,m,E);for(let M=0;M<T.length;M++)y.push(T[M])}E=S,g=D,b=this._workCell.fg,L=this._workCell.bg}D+=this._workCell.getChars().length||i.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){let S=this._getJoinedRanges(C,g,D,m,E);for(let T=0;T<S.length;T++)y.push(S[T])}return y}_getJoinedRanges(_,m,y,C,E){let D=_.substring(m,y),g=[];try{g=this._characterJoiners[0].handler(D)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{let L=this._characterJoiners[b].handler(D);for(let S=0;S<L.length;S++)Nk._mergeRanges(g,L[S])}catch(L){console.error(L)}return this._stringRangesToCellRanges(g,C,E),g}_stringRangesToCellRanges(_,m,y){let C=0,E=!1,D=0,g=_[C];if(g){for(let b=y;b<this._bufferService.cols;b++){let L=m.getWidth(b),S=m.getString(b).length||i.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!E&&g[0]<=D&&(g[0]=b,E=!0),g[1]<=D){if(g[1]=b,g=_[++C],!g)break;g[0]<=D?(g[0]=b,E=!0):E=!1}D+=S}}g&&(g[1]=this._bufferService.cols)}}static _mergeRanges(_,m){let y=!1;for(let C=0;C<_.length;C++){let E=_[C];if(y){if(m[1]<=E[0])return _[C-1][1]=m[1],_;if(m[1]<=E[1])return _[C-1][1]=Math.max(m[1],E[1]),_.splice(C,1),_;_.splice(C,1),C--}else{if(m[1]<=E[0])return _.splice(C,0,m),_;if(m[1]<=E[1])return E[0]=Math.min(m[0],E[0]),_;m[0]<E[1]&&(E[0]=Math.min(m[0],E[0]),y=!0)}}return y?_[_.length-1][1]=m[1]:_.push(m),_}};s.CharacterJoinerService=o=p([u(0,d.IBufferService)],o)},5114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreBrowserService=void 0,s.CoreBrowserService=class{constructor(a,p){this._textarea=a,this.window=p,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(v,s,a){var p=this&&this.__decorate||function(d,f,o,h){var _,m=arguments.length,y=m<3?f:h===null?h=Object.getOwnPropertyDescriptor(f,o):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(d,f,o,h);else for(var C=d.length-1;C>=0;C--)(_=d[C])&&(y=(m<3?_(y):m>3?_(f,o,y):_(f,o))||y);return m>3&&y&&Object.defineProperty(f,o,y),y},u=this&&this.__param||function(d,f){return function(o,h){f(o,h,d)}};Object.defineProperty(s,"__esModule",{value:!0}),s.MouseService=void 0;let r=a(4725),i=a(9806),l=s.MouseService=class{constructor(d,f){this._renderService=d,this._charSizeService=f}getCoords(d,f,o,h,_){return(0,i.getCoords)(window,d,f,o,h,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,_)}getMouseReportCoords(d,f){let o=(0,i.getCoordsRelativeToElement)(window,d,f);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};s.MouseService=l=p([u(0,r.IRenderService),u(1,r.ICharSizeService)],l)},3230:function(v,s,a){var p=this&&this.__decorate||function(y,C,E,D){var g,b=arguments.length,L=b<3?C:D===null?D=Object.getOwnPropertyDescriptor(C,E):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(y,C,E,D);else for(var S=y.length-1;S>=0;S--)(g=y[S])&&(L=(b<3?g(L):b>3?g(C,E,L):g(C,E))||L);return b>3&&L&&Object.defineProperty(C,E,L),L},u=this&&this.__param||function(y,C){return function(E,D){C(E,D,y)}};Object.defineProperty(s,"__esModule",{value:!0}),s.RenderService=void 0;let r=a(3656),i=a(6193),l=a(5596),d=a(4725),f=a(8460),o=a(844),h=a(7226),_=a(2585),m=s.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(y,C,E,D,g,b,L,S){if(super(),this._rowCount=y,this._charSizeService=D,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new h.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new f.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new f.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new f.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new f.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new i.RenderDebouncer(L.window,(T,M)=>this._renderRows(T,M)),this.register(this._renderDebouncer),this._screenDprMonitor=new l.ScreenDprMonitor(L.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(b.onResize(()=>this._fullRefresh())),this.register(b.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(g.onDecorationRegistered(()=>this._fullRefresh())),this.register(g.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(b.buffer.y,b.buffer.y,!0))),this.register((0,r.addDisposableDomListener)(L.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(S.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in L.window){let T=new L.window.IntersectionObserver(M=>this._handleIntersectionChange(M[M.length-1]),{threshold:0});T.observe(C),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(y){this._isPaused=y.isIntersecting===void 0?y.intersectionRatio===0:!y.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(y,C,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(y,C,this._rowCount))}_renderRows(y,C){this._renderer.value&&(y=Math.min(y,this._rowCount-1),C=Math.min(C,this._rowCount-1),this._renderer.value.renderRows(y,C),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:y,end:C}),this._onRender.fire({start:y,end:C}),this._isNextRenderRedrawOnly=!0)}resize(y,C){this._rowCount=C,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(y){this._renderer.value=y,this._renderer.value.onRequestRedraw(C=>this.refreshRows(C.start,C.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(y){return this._renderDebouncer.addRefreshCallback(y)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var y,C;this._renderer.value&&((C=(y=this._renderer.value).clearTextureAtlas)===null||C===void 0||C.call(y),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(y,C){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(y,C)):this._renderer.value.handleResize(y,C),this._fullRefresh())}handleCharSizeChanged(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCharSizeChanged()}handleBlur(){var y;(y=this._renderer.value)===null||y===void 0||y.handleBlur()}handleFocus(){var y;(y=this._renderer.value)===null||y===void 0||y.handleFocus()}handleSelectionChanged(y,C,E){var D;this._selectionState.start=y,this._selectionState.end=C,this._selectionState.columnSelectMode=E,(D=this._renderer.value)===null||D===void 0||D.handleSelectionChanged(y,C,E)}handleCursorMove(){var y;(y=this._renderer.value)===null||y===void 0||y.handleCursorMove()}clear(){var y;(y=this._renderer.value)===null||y===void 0||y.clear()}};s.RenderService=m=p([u(2,_.IOptionsService),u(3,d.ICharSizeService),u(4,_.IDecorationService),u(5,_.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],m)},9312:function(v,s,a){var p=this&&this.__decorate||function(g,b,L,S){var T,M=arguments.length,w=M<3?b:S===null?S=Object.getOwnPropertyDescriptor(b,L):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,b,L,S);else for(var F=g.length-1;F>=0;F--)(T=g[F])&&(w=(M<3?T(w):M>3?T(b,L,w):T(b,L))||w);return M>3&&w&&Object.defineProperty(b,L,w),w},u=this&&this.__param||function(g,b){return function(L,S){b(L,S,g)}};Object.defineProperty(s,"__esModule",{value:!0}),s.SelectionService=void 0;let r=a(9806),i=a(9504),l=a(456),d=a(4725),f=a(8460),o=a(844),h=a(6114),_=a(4841),m=a(511),y=a(2585),C=String.fromCharCode(160),E=new RegExp(C,"g"),D=s.SelectionService=class extends o.Disposable{constructor(g,b,L,S,T,M,w,F,x){super(),this._element=g,this._screenElement=b,this._linkifier=L,this._bufferService=S,this._coreService=T,this._mouseService=M,this._optionsService=w,this._renderService=F,this._coreBrowserService=x,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=R=>this._handleMouseMove(R),this._mouseUpListener=R=>this._handleMouseUp(R),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(R=>this._handleTrim(R)),this.register(this._bufferService.buffers.onBufferActivate(R=>this._handleBufferActivate(R))),this.enable(),this._model=new l.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!g||!b||g[0]===b[0]&&g[1]===b[1])}get selectionText(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!g||!b)return"";let L=this._bufferService.buffer,S=[];if(this._activeSelectionMode===3){if(g[0]===b[0])return"";let T=g[0]<b[0]?g[0]:b[0],M=g[0]<b[0]?b[0]:g[0];for(let w=g[1];w<=b[1];w++){let F=L.translateBufferLineToString(w,!0,T,M);S.push(F)}}else{let T=g[1]===b[1]?b[0]:void 0;S.push(L.translateBufferLineToString(g[1],!0,g[0],T));for(let M=g[1]+1;M<=b[1]-1;M++){let w=L.lines.get(M),F=L.translateBufferLineToString(M,!0);w?.isWrapped?S[S.length-1]+=F:S.push(F)}if(g[1]!==b[1]){let M=L.lines.get(b[1]),w=L.translateBufferLineToString(b[1],!0,0,b[0]);M&&M.isWrapped?S[S.length-1]+=w:S.push(w)}}return S.map(T=>T.replace(E," ")).join(h.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(g){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),h.isLinux&&g&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(g){let b=this._getMouseBufferCoords(g),L=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!!(L&&S&&b)&&this._areCoordsInSelection(b,L,S)}isCellInSelection(g,b){let L=this._model.finalSelectionStart,S=this._model.finalSelectionEnd;return!(!L||!S)&&this._areCoordsInSelection([g,b],L,S)}_areCoordsInSelection(g,b,L){return g[1]>b[1]&&g[1]<L[1]||b[1]===L[1]&&g[1]===b[1]&&g[0]>=b[0]&&g[0]<L[0]||b[1]<L[1]&&g[1]===L[1]&&g[0]<L[0]||b[1]<L[1]&&g[1]===b[1]&&g[0]>=b[0]}_selectWordAtCursor(g,b){var L,S;let T=(S=(L=this._linkifier.currentLink)===null||L===void 0?void 0:L.link)===null||S===void 0?void 0:S.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,_.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let M=this._getMouseBufferCoords(g);return!!M&&(this._selectWordAt(M,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(g,b){this._model.clearSelection(),g=Math.max(g,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,g],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(g){this._model.handleTrim(g)&&this.refresh()}_getMouseBufferCoords(g){let b=this._mouseService.getCoords(g,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(g){let b=(0,r.getCoordsRelativeToElement)(this._coreBrowserService.window,g,this._screenElement)[1],L=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=L?0:(b>L&&(b-=L),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(g){return h.isMac?g.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:g.shiftKey}handleMouseDown(g){if(this._mouseDownTimeStamp=g.timeStamp,(g.button!==2||!this.hasSelection)&&g.button===0){if(!this._enabled){if(!this.shouldForceSelection(g))return;g.stopPropagation()}g.preventDefault(),this._dragScrollAmount=0,this._enabled&&g.shiftKey?this._handleIncrementalClick(g):g.detail===1?this._handleSingleClick(g):g.detail===2?this._handleDoubleClick(g):g.detail===3&&this._handleTripleClick(g),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(g){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(g))}_handleSingleClick(g){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(g)?3:0,this._model.selectionStart=this._getMouseBufferCoords(g),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(g){this._selectWordAtCursor(g,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(g){let b=this._getMouseBufferCoords(g);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(g){return g.altKey&&!(h.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(g){if(g.stopImmediatePropagation(),!this._model.selectionStart)return;let b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(g),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(g),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){let S=L.lines.get(this._model.selectionEnd[1]);S&&S.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let g=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(g.ydisp+this._bufferService.rows,g.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=g.ydisp),this.refresh()}}_handleMouseUp(g){let b=g.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&g.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let L=this._mouseService.getCoords(g,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){let S=(0,i.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(S,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let g=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,L=!(!g||!b||g[0]===b[0]&&g[1]===b[1]);L?g&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&g[0]===this._oldSelectionStart[0]&&g[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(g,b,L)):this._oldHasSelection&&this._fireOnSelectionChange(g,b,L)}_fireOnSelectionChange(g,b,L){this._oldSelectionStart=g,this._oldSelectionEnd=b,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(g){this.clearSelection(),this._trimListener.dispose(),this._trimListener=g.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(g,b){let L=b;for(let S=0;b>=S;S++){let T=g.loadCell(S,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:T>1&&b!==S&&(L+=T-1)}return L}setSelection(g,b,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[g,b],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(g){this._isClickInSelection(g)||(this._selectWordAtCursor(g,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(g,b,L=!0,S=!0){if(g[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,M=T.lines.get(g[1]);if(!M)return;let w=T.translateBufferLineToString(g[1],!1),F=this._convertViewportColToCharacterIndex(M,g[0]),x=F,R=g[0]-F,A=0,I=0,$=0,k=0;if(w.charAt(F)===" "){for(;F>0&&w.charAt(F-1)===" ";)F--;for(;x<w.length&&w.charAt(x+1)===" ";)x++}else{let q=g[0],N=g[0];M.getWidth(q)===0&&(A++,q--),M.getWidth(N)===2&&(I++,N++);let K=M.getString(N).length;for(K>1&&(k+=K-1,x+=K-1);q>0&&F>0&&!this._isCharWordSeparator(M.loadCell(q-1,this._workCell));){M.loadCell(q-1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,q--):O>1&&($+=O-1,F-=O-1),F--,q--}for(;N<M.length&&x+1<w.length&&!this._isCharWordSeparator(M.loadCell(N+1,this._workCell));){M.loadCell(N+1,this._workCell);let O=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,N++):O>1&&(k+=O-1,x+=O-1),x++,N++}}x++;let H=F+R-A+$,U=Math.min(this._bufferService.cols,x-F+A+I-$-k);if(b||w.slice(F,x).trim()!==""){if(L&&H===0&&M.getCodePoint(0)!==32){let q=T.lines.get(g[1]-1);if(q&&M.isWrapped&&q.getCodePoint(this._bufferService.cols-1)!==32){let N=this._getWordAt([this._bufferService.cols-1,g[1]-1],!1,!0,!1);if(N){let K=this._bufferService.cols-N.start;H-=K,U+=K}}}if(S&&H+U===this._bufferService.cols&&M.getCodePoint(this._bufferService.cols-1)!==32){let q=T.lines.get(g[1]+1);if(q?.isWrapped&&q.getCodePoint(0)!==32){let N=this._getWordAt([0,g[1]+1],!1,!1,!0);N&&(U+=N.length)}}return{start:H,length:U}}}_selectWordAt(g,b){let L=this._getWordAt(g,b);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,g[1]--;this._model.selectionStart=[L.start,g[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(g){let b=this._getWordAt(g,!0);if(b){let L=g[1];for(;b.start<0;)b.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,L]}}_isCharWordSeparator(g){return g.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(g.getChars())>=0}_selectLineAt(g){let b=this._bufferService.buffer.getWrappedRangeForLine(g),L={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,_.getRangeLength)(L,this._bufferService.cols)}};s.SelectionService=D=p([u(3,y.IBufferService),u(4,y.ICoreService),u(5,d.IMouseService),u(6,y.IOptionsService),u(7,d.IRenderService),u(8,d.ICoreBrowserService)],D)},4725:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IThemeService=s.ICharacterJoinerService=s.ISelectionService=s.IRenderService=s.IMouseService=s.ICoreBrowserService=s.ICharSizeService=void 0;let p=a(8343);s.ICharSizeService=(0,p.createDecorator)("CharSizeService"),s.ICoreBrowserService=(0,p.createDecorator)("CoreBrowserService"),s.IMouseService=(0,p.createDecorator)("MouseService"),s.IRenderService=(0,p.createDecorator)("RenderService"),s.ISelectionService=(0,p.createDecorator)("SelectionService"),s.ICharacterJoinerService=(0,p.createDecorator)("CharacterJoinerService"),s.IThemeService=(0,p.createDecorator)("ThemeService")},6731:function(v,s,a){var p=this&&this.__decorate||function(D,g,b,L){var S,T=arguments.length,M=T<3?g:L===null?L=Object.getOwnPropertyDescriptor(g,b):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(D,g,b,L);else for(var w=D.length-1;w>=0;w--)(S=D[w])&&(M=(T<3?S(M):T>3?S(g,b,M):S(g,b))||M);return T>3&&M&&Object.defineProperty(g,b,M),M},u=this&&this.__param||function(D,g){return function(b,L){g(b,L,D)}};Object.defineProperty(s,"__esModule",{value:!0}),s.ThemeService=s.DEFAULT_ANSI_COLORS=void 0;let r=a(7239),i=a(8055),l=a(8460),d=a(844),f=a(2585),o=i.css.toColor("#ffffff"),h=i.css.toColor("#000000"),_=i.css.toColor("#ffffff"),m=i.css.toColor("#000000"),y={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};s.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let D=[i.css.toColor("#2e3436"),i.css.toColor("#cc0000"),i.css.toColor("#4e9a06"),i.css.toColor("#c4a000"),i.css.toColor("#3465a4"),i.css.toColor("#75507b"),i.css.toColor("#06989a"),i.css.toColor("#d3d7cf"),i.css.toColor("#555753"),i.css.toColor("#ef2929"),i.css.toColor("#8ae234"),i.css.toColor("#fce94f"),i.css.toColor("#729fcf"),i.css.toColor("#ad7fa8"),i.css.toColor("#34e2e2"),i.css.toColor("#eeeeec")],g=[0,95,135,175,215,255];for(let b=0;b<216;b++){let L=g[b/36%6|0],S=g[b/6%6|0],T=g[b%6];D.push({css:i.channels.toCss(L,S,T),rgba:i.channels.toRgba(L,S,T)})}for(let b=0;b<24;b++){let L=8+10*b;D.push({css:i.channels.toCss(L,L,L),rgba:i.channels.toRgba(L,L,L)})}return D})());let C=s.ThemeService=class extends d.Disposable{get colors(){return this._colors}constructor(D){super(),this._optionsService=D,this._contrastCache=new r.ColorContrastCache,this._halfContrastCache=new r.ColorContrastCache,this._onChangeColors=this.register(new l.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:h,cursor:_,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:y,selectionBackgroundOpaque:i.color.blend(h,y),selectionInactiveBackgroundTransparent:y,selectionInactiveBackgroundOpaque:i.color.blend(h,y),ansi:s.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(D={}){let g=this._colors;if(g.foreground=E(D.foreground,o),g.background=E(D.background,h),g.cursor=E(D.cursor,_),g.cursorAccent=E(D.cursorAccent,m),g.selectionBackgroundTransparent=E(D.selectionBackground,y),g.selectionBackgroundOpaque=i.color.blend(g.background,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundTransparent=E(D.selectionInactiveBackground,g.selectionBackgroundTransparent),g.selectionInactiveBackgroundOpaque=i.color.blend(g.background,g.selectionInactiveBackgroundTransparent),g.selectionForeground=D.selectionForeground?E(D.selectionForeground,i.NULL_COLOR):void 0,g.selectionForeground===i.NULL_COLOR&&(g.selectionForeground=void 0),i.color.isOpaque(g.selectionBackgroundTransparent)&&(g.selectionBackgroundTransparent=i.color.opacity(g.selectionBackgroundTransparent,.3)),i.color.isOpaque(g.selectionInactiveBackgroundTransparent)&&(g.selectionInactiveBackgroundTransparent=i.color.opacity(g.selectionInactiveBackgroundTransparent,.3)),g.ansi=s.DEFAULT_ANSI_COLORS.slice(),g.ansi[0]=E(D.black,s.DEFAULT_ANSI_COLORS[0]),g.ansi[1]=E(D.red,s.DEFAULT_ANSI_COLORS[1]),g.ansi[2]=E(D.green,s.DEFAULT_ANSI_COLORS[2]),g.ansi[3]=E(D.yellow,s.DEFAULT_ANSI_COLORS[3]),g.ansi[4]=E(D.blue,s.DEFAULT_ANSI_COLORS[4]),g.ansi[5]=E(D.magenta,s.DEFAULT_ANSI_COLORS[5]),g.ansi[6]=E(D.cyan,s.DEFAULT_ANSI_COLORS[6]),g.ansi[7]=E(D.white,s.DEFAULT_ANSI_COLORS[7]),g.ansi[8]=E(D.brightBlack,s.DEFAULT_ANSI_COLORS[8]),g.ansi[9]=E(D.brightRed,s.DEFAULT_ANSI_COLORS[9]),g.ansi[10]=E(D.brightGreen,s.DEFAULT_ANSI_COLORS[10]),g.ansi[11]=E(D.brightYellow,s.DEFAULT_ANSI_COLORS[11]),g.ansi[12]=E(D.brightBlue,s.DEFAULT_ANSI_COLORS[12]),g.ansi[13]=E(D.brightMagenta,s.DEFAULT_ANSI_COLORS[13]),g.ansi[14]=E(D.brightCyan,s.DEFAULT_ANSI_COLORS[14]),g.ansi[15]=E(D.brightWhite,s.DEFAULT_ANSI_COLORS[15]),D.extendedAnsi){let b=Math.min(g.ansi.length-16,D.extendedAnsi.length);for(let L=0;L<b;L++)g.ansi[L+16]=E(D.extendedAnsi[L],s.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(D){this._restoreColor(D),this._onChangeColors.fire(this.colors)}_restoreColor(D){if(D!==void 0)switch(D){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[D]=this._restoreColors.ansi[D]}else for(let g=0;g<this._restoreColors.ansi.length;++g)this._colors.ansi[g]=this._restoreColors.ansi[g]}modifyColors(D){D(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(D,g){if(D!==void 0)try{return i.css.toColor(D)}catch{}return g}s.ThemeService=C=p([u(0,f.IOptionsService)],C)},6349:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CircularList=void 0;let p=a(8460),u=a(844);class r extends u.Disposable{constructor(l){super(),this._maxLength=l,this.onDeleteEmitter=this.register(new p.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new p.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new p.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(l){if(this._maxLength===l)return;let d=new Array(l);for(let f=0;f<Math.min(l,this.length);f++)d[f]=this._array[this._getCyclicIndex(f)];this._array=d,this._maxLength=l,this._startIndex=0}get length(){return this._length}set length(l){if(l>this._length)for(let d=this._length;d<l;d++)this._array[d]=void 0;this._length=l}get(l){return this._array[this._getCyclicIndex(l)]}set(l,d){this._array[this._getCyclicIndex(l)]=d}push(l){this._array[this._getCyclicIndex(this._length)]=l,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(l,d,...f){if(d){for(let o=l;o<this._length-d;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+d)];this._length-=d,this.onDeleteEmitter.fire({index:l,amount:d})}for(let o=this._length-1;o>=l;o--)this._array[this._getCyclicIndex(o+f.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<f.length;o++)this._array[this._getCyclicIndex(l+o)]=f[o];if(f.length&&this.onInsertEmitter.fire({index:l,amount:f.length}),this._length+f.length>this._maxLength){let o=this._length+f.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=f.length}trimStart(l){l>this._length&&(l=this._length),this._startIndex+=l,this._length-=l,this.onTrimEmitter.fire(l)}shiftElements(l,d,f){if(!(d<=0)){if(l<0||l>=this._length)throw new Error("start argument out of range");if(l+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(let h=d-1;h>=0;h--)this.set(l+h+f,this.get(l+h));let o=l+d+f-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<d;o++)this.set(l+o+f,this.get(l+o))}}_getCyclicIndex(l){return(this._startIndex+l)%this._maxLength}}s.CircularList=r},1439:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.clone=void 0,s.clone=function a(p,u=5){if(typeof p!="object")return p;let r=Array.isArray(p)?[]:{};for(let i in p)r[i]=u<=1?p[i]:p[i]&&a(p[i],u-1);return r}},8055:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.contrastRatio=s.toPaddedHex=s.rgba=s.rgb=s.css=s.color=s.channels=s.NULL_COLOR=void 0;let p=a(6114),u=0,r=0,i=0,l=0;var d,f,o,h,_;function m(C){let E=C.toString(16);return E.length<2?"0"+E:E}function y(C,E){return C<E?(E+.05)/(C+.05):(C+.05)/(E+.05)}s.NULL_COLOR={css:"#00000000",rgba:0},function(C){C.toCss=function(E,D,g,b){return b!==void 0?`#${m(E)}${m(D)}${m(g)}${m(b)}`:`#${m(E)}${m(D)}${m(g)}`},C.toRgba=function(E,D,g,b=255){return(E<<24|D<<16|g<<8|b)>>>0}}(d||(s.channels=d={})),function(C){function E(D,g){return l=Math.round(255*g),[u,r,i]=_.toChannels(D.rgba),{css:d.toCss(u,r,i,l),rgba:d.toRgba(u,r,i,l)}}C.blend=function(D,g){if(l=(255&g.rgba)/255,l===1)return{css:g.css,rgba:g.rgba};let b=g.rgba>>24&255,L=g.rgba>>16&255,S=g.rgba>>8&255,T=D.rgba>>24&255,M=D.rgba>>16&255,w=D.rgba>>8&255;return u=T+Math.round((b-T)*l),r=M+Math.round((L-M)*l),i=w+Math.round((S-w)*l),{css:d.toCss(u,r,i),rgba:d.toRgba(u,r,i)}},C.isOpaque=function(D){return(255&D.rgba)==255},C.ensureContrastRatio=function(D,g,b){let L=_.ensureContrastRatio(D.rgba,g.rgba,b);if(L)return _.toColor(L>>24&255,L>>16&255,L>>8&255)},C.opaque=function(D){let g=(255|D.rgba)>>>0;return[u,r,i]=_.toChannels(g),{css:d.toCss(u,r,i),rgba:g}},C.opacity=E,C.multiplyOpacity=function(D,g){return l=255&D.rgba,E(D,l*g/255)},C.toColorRGB=function(D){return[D.rgba>>24&255,D.rgba>>16&255,D.rgba>>8&255]}}(f||(s.color=f={})),function(C){let E,D;if(!p.isNode){let g=document.createElement("canvas");g.width=1,g.height=1;let b=g.getContext("2d",{willReadFrequently:!0});b&&(E=b,E.globalCompositeOperation="copy",D=E.createLinearGradient(0,0,1,1))}C.toColor=function(g){if(g.match(/#[\da-f]{3,8}/i))switch(g.length){case 4:return u=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),_.toColor(u,r,i);case 5:return u=parseInt(g.slice(1,2).repeat(2),16),r=parseInt(g.slice(2,3).repeat(2),16),i=parseInt(g.slice(3,4).repeat(2),16),l=parseInt(g.slice(4,5).repeat(2),16),_.toColor(u,r,i,l);case 7:return{css:g,rgba:(parseInt(g.slice(1),16)<<8|255)>>>0};case 9:return{css:g,rgba:parseInt(g.slice(1),16)>>>0}}let b=g.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return u=parseInt(b[1]),r=parseInt(b[2]),i=parseInt(b[3]),l=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(u,r,i,l);if(!E||!D)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=D,E.fillStyle=g,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[u,r,i,l]=E.getImageData(0,0,1,1).data,l!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(u,r,i,l),css:g}}}(o||(s.css=o={})),function(C){function E(D,g,b){let L=D/255,S=g/255,T=b/255;return .2126*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.7152*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}C.relativeLuminance=function(D){return E(D>>16&255,D>>8&255,255&D)},C.relativeLuminance2=E}(h||(s.rgb=h={})),function(C){function E(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w>0||F>0||x>0);)w-=Math.max(0,Math.ceil(.1*w)),F-=Math.max(0,Math.ceil(.1*F)),x-=Math.max(0,Math.ceil(.1*x)),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}function D(g,b,L){let S=g>>24&255,T=g>>16&255,M=g>>8&255,w=b>>24&255,F=b>>16&255,x=b>>8&255,R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));for(;R<L&&(w<255||F<255||x<255);)w=Math.min(255,w+Math.ceil(.1*(255-w))),F=Math.min(255,F+Math.ceil(.1*(255-F))),x=Math.min(255,x+Math.ceil(.1*(255-x))),R=y(h.relativeLuminance2(w,F,x),h.relativeLuminance2(S,T,M));return(w<<24|F<<16|x<<8|255)>>>0}C.ensureContrastRatio=function(g,b,L){let S=h.relativeLuminance(g>>8),T=h.relativeLuminance(b>>8);if(y(S,T)<L){if(T<S){let F=E(g,b,L),x=y(S,h.relativeLuminance(F>>8));if(x<L){let R=D(g,b,L);return x>y(S,h.relativeLuminance(R>>8))?F:R}return F}let M=D(g,b,L),w=y(S,h.relativeLuminance(M>>8));if(w<L){let F=E(g,b,L);return w>y(S,h.relativeLuminance(F>>8))?M:F}return M}},C.reduceLuminance=E,C.increaseLuminance=D,C.toChannels=function(g){return[g>>24&255,g>>16&255,g>>8&255,255&g]},C.toColor=function(g,b,L,S){return{css:d.toCss(g,b,L,S),rgba:d.toRgba(g,b,L,S)}}}(_||(s.rgba=_={})),s.toPaddedHex=m,s.contrastRatio=y},8969:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CoreTerminal=void 0;let p=a(844),u=a(2585),r=a(4348),i=a(7866),l=a(744),d=a(7302),f=a(6975),o=a(8460),h=a(1753),_=a(1480),m=a(7994),y=a(9282),C=a(5435),E=a(5981),D=a(2660),g=!1;class b extends p.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(S=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(S.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(S){for(let T in S)this.optionsService.options[T]=S[T]}constructor(S){super(),this._windowsWrappingHeuristics=this.register(new p.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new r.InstantiationService,this.optionsService=this.register(new d.OptionsService(S)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(l.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(i.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(f.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(h.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(_.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(D.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((T,M)=>this._inputHandler.parse(T,M))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(S,T){this._writeBuffer.write(S,T)}writeSync(S,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!g&&(this._logService.warn("writeSync is unreliable and will be removed soon."),g=!0),this._writeBuffer.writeSync(S,T)}resize(S,T){isNaN(S)||isNaN(T)||(S=Math.max(S,l.MINIMUM_COLS),T=Math.max(T,l.MINIMUM_ROWS),this._bufferService.resize(S,T))}scroll(S,T=!1){this._bufferService.scroll(S,T)}scrollLines(S,T,M){this._bufferService.scrollLines(S,T,M)}scrollPages(S){this.scrollLines(S*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(S){let T=S-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(S,T){return this._inputHandler.registerEscHandler(S,T)}registerDcsHandler(S,T){return this._inputHandler.registerDcsHandler(S,T)}registerCsiHandler(S,T){return this._inputHandler.registerCsiHandler(S,T)}registerOscHandler(S,T){return this._inputHandler.registerOscHandler(S,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let S=!1,T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?S=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(S=!0),S?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let S=[];S.push(this.onLineFeed(y.updateWindowsModeWrappedState.bind(null,this._bufferService))),S.push(this.registerCsiHandler({final:"H"},()=>((0,y.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,p.toDisposable)(()=>{for(let T of S)T.dispose()})}}}s.CoreTerminal=b},8460:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.forwardEvent=s.EventEmitter=void 0,s.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let p=0;p<this._listeners.length;p++)if(this._listeners[p]===a)return void this._listeners.splice(p,1)}}})),this._event}fire(a,p){let u=[];for(let r=0;r<this._listeners.length;r++)u.push(this._listeners[r]);for(let r=0;r<u.length;r++)u[r].call(void 0,a,p)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},s.forwardEvent=function(a,p){return a(u=>p.fire(u))}},5435:function(v,s,a){var p=this&&this.__decorate||function(R,A,I,$){var k,H=arguments.length,U=H<3?A:$===null?$=Object.getOwnPropertyDescriptor(A,I):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")U=Reflect.decorate(R,A,I,$);else for(var q=R.length-1;q>=0;q--)(k=R[q])&&(U=(H<3?k(U):H>3?k(A,I,U):k(A,I))||U);return H>3&&U&&Object.defineProperty(A,I,U),U},u=this&&this.__param||function(R,A){return function(I,$){A(I,$,R)}};Object.defineProperty(s,"__esModule",{value:!0}),s.InputHandler=s.WindowsOptionsReportType=void 0;let r=a(2584),i=a(7116),l=a(2015),d=a(844),f=a(482),o=a(8437),h=a(8460),_=a(643),m=a(511),y=a(3734),C=a(2585),E=a(6242),D=a(6351),g=a(5941),b={"(":0,")":1,"*":2,"+":3,"-":1,".":2},L=131072;function S(R,A){if(R>24)return A.setWinLines||!1;switch(R){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(R){R[R.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",R[R.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(s.WindowsOptionsReportType=T={}));let M=0;class w extends d.Disposable{getAttrData(){return this._curAttrData}constructor(A,I,$,k,H,U,q,N,K=new l.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=I,this._coreService=$,this._logService=k,this._optionsService=H,this._oscLinkService=U,this._coreMouseService=q,this._unicodeService=N,this._parser=K,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new f.StringToUtf32,this._utf8Decoder=new f.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new h.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new h.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new h.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new h.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new h.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new h.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new h.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new h.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new h.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new h.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new h.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._parser.setCsiHandlerFallback((O,B)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(O),params:B.toArray()})}),this._parser.setEscHandlerFallback(O=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(O)})}),this._parser.setExecuteHandlerFallback(O=>{this._logService.debug("Unknown EXECUTE code: ",{code:O})}),this._parser.setOscHandlerFallback((O,B,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:O,action:B,data:W})}),this._parser.setDcsHandlerFallback((O,B,W)=>{B==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(O),action:B,payload:W})}),this._parser.setPrintHandler((O,B,W)=>this.print(O,B,W)),this._parser.registerCsiHandler({final:"@"},O=>this.insertChars(O)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},O=>this.scrollLeft(O)),this._parser.registerCsiHandler({final:"A"},O=>this.cursorUp(O)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},O=>this.scrollRight(O)),this._parser.registerCsiHandler({final:"B"},O=>this.cursorDown(O)),this._parser.registerCsiHandler({final:"C"},O=>this.cursorForward(O)),this._parser.registerCsiHandler({final:"D"},O=>this.cursorBackward(O)),this._parser.registerCsiHandler({final:"E"},O=>this.cursorNextLine(O)),this._parser.registerCsiHandler({final:"F"},O=>this.cursorPrecedingLine(O)),this._parser.registerCsiHandler({final:"G"},O=>this.cursorCharAbsolute(O)),this._parser.registerCsiHandler({final:"H"},O=>this.cursorPosition(O)),this._parser.registerCsiHandler({final:"I"},O=>this.cursorForwardTab(O)),this._parser.registerCsiHandler({final:"J"},O=>this.eraseInDisplay(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},O=>this.eraseInDisplay(O,!0)),this._parser.registerCsiHandler({final:"K"},O=>this.eraseInLine(O,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},O=>this.eraseInLine(O,!0)),this._parser.registerCsiHandler({final:"L"},O=>this.insertLines(O)),this._parser.registerCsiHandler({final:"M"},O=>this.deleteLines(O)),this._parser.registerCsiHandler({final:"P"},O=>this.deleteChars(O)),this._parser.registerCsiHandler({final:"S"},O=>this.scrollUp(O)),this._parser.registerCsiHandler({final:"T"},O=>this.scrollDown(O)),this._parser.registerCsiHandler({final:"X"},O=>this.eraseChars(O)),this._parser.registerCsiHandler({final:"Z"},O=>this.cursorBackwardTab(O)),this._parser.registerCsiHandler({final:"`"},O=>this.charPosAbsolute(O)),this._parser.registerCsiHandler({final:"a"},O=>this.hPositionRelative(O)),this._parser.registerCsiHandler({final:"b"},O=>this.repeatPrecedingCharacter(O)),this._parser.registerCsiHandler({final:"c"},O=>this.sendDeviceAttributesPrimary(O)),this._parser.registerCsiHandler({prefix:">",final:"c"},O=>this.sendDeviceAttributesSecondary(O)),this._parser.registerCsiHandler({final:"d"},O=>this.linePosAbsolute(O)),this._parser.registerCsiHandler({final:"e"},O=>this.vPositionRelative(O)),this._parser.registerCsiHandler({final:"f"},O=>this.hVPosition(O)),this._parser.registerCsiHandler({final:"g"},O=>this.tabClear(O)),this._parser.registerCsiHandler({final:"h"},O=>this.setMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"h"},O=>this.setModePrivate(O)),this._parser.registerCsiHandler({final:"l"},O=>this.resetMode(O)),this._parser.registerCsiHandler({prefix:"?",final:"l"},O=>this.resetModePrivate(O)),this._parser.registerCsiHandler({final:"m"},O=>this.charAttributes(O)),this._parser.registerCsiHandler({final:"n"},O=>this.deviceStatus(O)),this._parser.registerCsiHandler({prefix:"?",final:"n"},O=>this.deviceStatusPrivate(O)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},O=>this.softReset(O)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},O=>this.setCursorStyle(O)),this._parser.registerCsiHandler({final:"r"},O=>this.setScrollRegion(O)),this._parser.registerCsiHandler({final:"s"},O=>this.saveCursor(O)),this._parser.registerCsiHandler({final:"t"},O=>this.windowOptions(O)),this._parser.registerCsiHandler({final:"u"},O=>this.restoreCursor(O)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},O=>this.insertColumns(O)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},O=>this.deleteColumns(O)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},O=>this.selectProtected(O)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},O=>this.requestMode(O,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},O=>this.requestMode(O,!1)),this._parser.setExecuteHandler(r.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(r.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(r.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(r.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(r.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(r.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(r.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(r.C1.IND,()=>this.index()),this._parser.setExecuteHandler(r.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(r.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(O=>(this.setTitle(O),this.setIconName(O),!0))),this._parser.registerOscHandler(1,new E.OscHandler(O=>this.setIconName(O))),this._parser.registerOscHandler(2,new E.OscHandler(O=>this.setTitle(O))),this._parser.registerOscHandler(4,new E.OscHandler(O=>this.setOrReportIndexedColor(O))),this._parser.registerOscHandler(8,new E.OscHandler(O=>this.setHyperlink(O))),this._parser.registerOscHandler(10,new E.OscHandler(O=>this.setOrReportFgColor(O))),this._parser.registerOscHandler(11,new E.OscHandler(O=>this.setOrReportBgColor(O))),this._parser.registerOscHandler(12,new E.OscHandler(O=>this.setOrReportCursorColor(O))),this._parser.registerOscHandler(104,new E.OscHandler(O=>this.restoreIndexedColor(O))),this._parser.registerOscHandler(110,new E.OscHandler(O=>this.restoreFgColor(O))),this._parser.registerOscHandler(111,new E.OscHandler(O=>this.restoreBgColor(O))),this._parser.registerOscHandler(112,new E.OscHandler(O=>this.restoreCursorColor(O))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let O in i.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:O},()=>this.selectCharset("("+O)),this._parser.registerEscHandler({intermediates:")",final:O},()=>this.selectCharset(")"+O)),this._parser.registerEscHandler({intermediates:"*",final:O},()=>this.selectCharset("*"+O)),this._parser.registerEscHandler({intermediates:"+",final:O},()=>this.selectCharset("+"+O)),this._parser.registerEscHandler({intermediates:"-",final:O},()=>this.selectCharset("-"+O)),this._parser.registerEscHandler({intermediates:".",final:O},()=>this.selectCharset("."+O)),this._parser.registerEscHandler({intermediates:"/",final:O},()=>this.selectCharset("/"+O));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(O=>(this._logService.error("Parsing error: ",O),O)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new D.DcsHandler((O,B)=>this.requestStatusString(O,B)))}_preserveStack(A,I,$,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=$,this._parseStack.position=k}_logSlowResolvingAsync(A){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([A,new Promise((I,$)=>setTimeout(()=>$("#SLOW_TIMEOUT"),5e3))]).catch(I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,I){let $,k=this._activeBuffer.x,H=this._activeBuffer.y,U=0,q=this._parseStack.paused;if(q){if($=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync($),$;k=this._parseStack.cursorStartX,H=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>L&&(U=this._parseStack.position+L)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,N=>String.fromCharCode(N)).join("")}"`),typeof A=="string"?A.split("").map(N=>N.charCodeAt(0)):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<L&&(this._parseBuffer=new Uint32Array(Math.min(A.length,L))),q||this._dirtyRowTracker.clearRange(),A.length>L)for(let N=U;N<A.length;N+=L){let K=N+L<A.length?N+L:A.length,O=typeof A=="string"?this._stringDecoder.decode(A.substring(N,K),this._parseBuffer):this._utf8Decoder.decode(A.subarray(N,K),this._parseBuffer);if($=this._parser.parse(this._parseBuffer,O))return this._preserveStack(k,H,O,N),this._logSlowResolvingAsync($),$}else if(!q){let N=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if($=this._parser.parse(this._parseBuffer,N))return this._preserveStack(k,H,N,0),this._logSlowResolvingAsync($),$}this._activeBuffer.x===k&&this._activeBuffer.y===H||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,I,$){let k,H,U=this._charsetService.charset,q=this._optionsService.rawOptions.screenReaderMode,N=this._bufferService.cols,K=this._coreService.decPrivateModes.wraparound,O=this._coreService.modes.insertMode,B=this._curAttrData,W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&$-I>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodePoint(this._activeBuffer.x-1,0,1,B.fg,B.bg,B.extended);for(let P=I;P<$;++P){if(k=A[P],H=this._unicodeService.wcwidth(k),k<127&&U){let X=U[String.fromCharCode(k)];X&&(k=X.charCodeAt(0))}if(q&&this._onA11yChar.fire((0,f.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),H||!this._activeBuffer.x){if(this._activeBuffer.x+H-1>=N){if(K){for(;this._activeBuffer.x<N;)W.setCellFromCodePoint(this._activeBuffer.x++,0,1,B.fg,B.bg,B.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=N-1,H===2)continue}if(O&&(W.insertCells(this._activeBuffer.x,H,this._activeBuffer.getNullCell(B),B),W.getWidth(N-1)===2&&W.setCellFromCodePoint(N-1,_.NULL_CELL_CODE,_.NULL_CELL_WIDTH,B.fg,B.bg,B.extended)),W.setCellFromCodePoint(this._activeBuffer.x++,k,H,B.fg,B.bg,B.extended),H>0)for(;--H;)W.setCellFromCodePoint(this._activeBuffer.x++,0,0,B.fg,B.bg,B.extended)}else W.getWidth(this._activeBuffer.x-1)?W.addCodepointToCell(this._activeBuffer.x-1,k):W.addCodepointToCell(this._activeBuffer.x-2,k)}$-I>0&&(W.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<N&&$-I>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodePoint(this._activeBuffer.x,0,1,B.fg,B.bg,B.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,I){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,I):this._parser.registerCsiHandler(A,$=>!S($.params[0],this._optionsService.rawOptions.windowOptions)||I($))}registerDcsHandler(A,I){return this._parser.registerDcsHandler(A,new D.DcsHandler(I))}registerEscHandler(A,I){return this._parser.registerEscHandler(A,I)}registerOscHandler(A,I){return this._parser.registerOscHandler(A,new E.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=A,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+I)}cursorUp(A){let I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){let I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){let I=A.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=A.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){let I=A.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,I,$,k=!1,H=!1){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);U.replaceCells(I,$,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),H),k&&(U.isWrapped=!1)}_resetBufferLine(A,I=!1){let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);$&&($.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),$.isWrapped=!1)}eraseInDisplay(A,I=!1){let $;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);$<this._bufferService.rows;$++)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty($);break;case 1:for($=this._activeBuffer.y,this._dirtyRowTracker.markDirty($),this._eraseInBufferLine($,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get($+1).isWrapped=!1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 2:for($=this._bufferService.rows,this._dirtyRowTracker.markDirty($-1);$--;)this._resetBufferLine($,I);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(A,I=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,H=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;I--;)this._activeBuffer.lines.splice(H-1,1),this._activeBuffer.lines.splice($,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let I=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let $=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;I--;)this._activeBuffer.lines.splice($,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let I=A.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=A.params[0]||1;for(let $=this._activeBuffer.scrollTop;$<=this._activeBuffer.scrollBottom;++$){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+$);k.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;let I=A.params[0]||1,$=new Uint32Array(I);for(let k=0;k<I;++k)$[k]=this._parser.precedingCodepoint;return this.print($,0,$.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(r.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(r.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(r.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(r.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(r.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,i.DEFAULT_CHARSET),this._charsetService.setgCharset(1,i.DEFAULT_CHARSET),this._charsetService.setgCharset(2,i.DEFAULT_CHARSET),this._charsetService.setgCharset(3,i.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let I=0;I<A.length;I++)switch(A.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,I){let $=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:H}=this._coreMouseService,U=this._coreService,{buffers:q,cols:N}=this._bufferService,{active:K,alt:O}=q,B=this._optionsService.rawOptions,W=ve=>ve?1:2,P=A.params[0];return X=P,J=I?P===2?4:P===4?W(U.modes.insertMode):P===12?3:P===20?W(B.convertEol):0:P===1?W($.applicationCursorKeys):P===3?B.windowOptions.setWinLines?N===80?2:N===132?1:0:0:P===6?W($.origin):P===7?W($.wraparound):P===8?3:P===9?W(k==="X10"):P===12?W(B.cursorBlink):P===25?W(!U.isCursorHidden):P===45?W($.reverseWraparound):P===66?W($.applicationKeypad):P===67?4:P===1e3?W(k==="VT200"):P===1002?W(k==="DRAG"):P===1003?W(k==="ANY"):P===1004?W($.sendFocus):P===1005?4:P===1006?W(H==="SGR"):P===1015?4:P===1016?W(H==="SGR_PIXELS"):P===1048?1:P===47||P===1047||P===1049?W(K===O):P===2004?W($.bracketedPasteMode):0,U.triggerDataEvent(`${r.C0.ESC}[${I?"":"?"}${X};${J}$y`),!0;var X,J}_updateAttrColor(A,I,$,k,H){return I===2?(A|=50331648,A&=-16777216,A|=y.AttributeData.fromColorRGB([$,k,H])):I===5&&(A&=-50331904,A|=33554432|255&$),A}_extractColor(A,I,$){let k=[0,0,-1,0,0,0],H=0,U=0;do{if(k[U+H]=A.params[I+U],A.hasSubParams(I+U)){let q=A.getSubParams(I+U),N=0;do k[1]===5&&(H=1),k[U+N+1+H]=q[N];while(++N<q.length&&N+U+1+H<k.length);break}if(k[1]===5&&U+H>=2||k[1]===2&&U+H>=5)break;k[1]&&(H=1)}while(++U+I<A.length&&U+H<k.length);for(let q=2;q<k.length;++q)k[q]===-1&&(k[q]=0);switch(k[0]){case 38:$.fg=this._updateAttrColor($.fg,k[1],k[3],k[4],k[5]);break;case 48:$.bg=this._updateAttrColor($.bg,k[1],k[3],k[4],k[5]);break;case 58:$.extended=$.extended.clone(),$.extended.underlineColor=this._updateAttrColor($.extended.underlineColor,k[1],k[3],k[4],k[5])}return U}_processUnderline(A,I){I.extended=I.extended.clone(),(!~A||A>5)&&(A=1),I.extended.underlineStyle=A,I.fg|=268435456,A===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(A){A.fg=o.DEFAULT_ATTR_DATA.fg,A.bg=o.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;let I=A.length,$,k=this._curAttrData;for(let H=0;H<I;H++)$=A.params[H],$>=30&&$<=37?(k.fg&=-50331904,k.fg|=16777216|$-30):$>=40&&$<=47?(k.bg&=-50331904,k.bg|=16777216|$-40):$>=90&&$<=97?(k.fg&=-50331904,k.fg|=16777224|$-90):$>=100&&$<=107?(k.bg&=-50331904,k.bg|=16777224|$-100):$===0?this._processSGR0(k):$===1?k.fg|=134217728:$===3?k.bg|=67108864:$===4?(k.fg|=268435456,this._processUnderline(A.hasSubParams(H)?A.getSubParams(H)[0]:1,k)):$===5?k.fg|=536870912:$===7?k.fg|=67108864:$===8?k.fg|=1073741824:$===9?k.fg|=2147483648:$===2?k.bg|=134217728:$===21?this._processUnderline(2,k):$===22?(k.fg&=-134217729,k.bg&=-134217729):$===23?k.bg&=-67108865:$===24?(k.fg&=-268435457,this._processUnderline(0,k)):$===25?k.fg&=-536870913:$===27?k.fg&=-67108865:$===28?k.fg&=-1073741825:$===29?k.fg&=2147483647:$===39?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):$===49?(k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):$===38||$===48||$===58?H+=this._extractColor(A,H,k):$===53?k.bg|=1073741824:$===55?k.bg&=-1073741825:$===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):$===100?(k.fg&=-67108864,k.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",$);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${r.C0.ESC}[0n`);break;case 6:let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[${I};${$}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){let I=this._activeBuffer.y+1,$=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${r.C0.ESC}[?${I};${$}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){let I=A.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let $=I%2==1;return this._optionsService.options.cursorBlink=$,!0}setScrollRegion(A){let I=A.params[0]||1,$;return(A.length<2||($=A.params[1])>this._bufferService.rows||$===0)&&($=this._bufferService.rows),$>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=$-1,this._setCursor(0,0)),!0}windowOptions(A){if(!S(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;let I=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${r.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){let I=[],$=A.split(";");for(;$.length>1;){let k=$.shift(),H=$.shift();if(/^\d+$/.exec(k)){let U=parseInt(k);if(x(U))if(H==="?")I.push({type:0,index:U});else{let q=(0,g.parseColor)(H);q&&I.push({type:1,index:U,color:q})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(A){let I=A.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(A,I){this._getCurrentLinkId()&&this._finishHyperlink();let $=A.split(":"),k,H=$.findIndex(U=>U.startsWith("id="));return H!==-1&&(k=$[H].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,I){let $=A.split(";");for(let k=0;k<$.length&&!(I>=this._specialColors.length);++k,++I)if($[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{let H=(0,g.parseColor)($[k]);H&&this._onColor.fire([{type:1,index:this._specialColors[I],color:H}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;let I=[],$=A.split(";");for(let k=0;k<$.length;++k)if(/^\d+$/.exec($[k])){let H=parseInt($[k]);x(H)&&I.push({type:2,index:H})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,i.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(b[A[0]],i.CHARSETS[A[1]]||i.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){let A=new m.CellData;A.content=4194304|"E".charCodeAt(0),A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){let $=this._activeBuffer.ybase+this._activeBuffer.y+I,k=this._activeBuffer.lines.get($);k&&(k.fill(A),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,I){let $=this._bufferService.buffer,k=this._optionsService.rawOptions;return(H=>(this._coreService.triggerDataEvent(`${r.C0.ESC}${H}${r.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${$.scrollTop+1};${$.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,I){this._dirtyRowTracker.markRangeDirty(A,I)}}s.InputHandler=w;let F=class{constructor(R){this._bufferService=R,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(R){R<this.start?this.start=R:R>this.end&&(this.end=R)}markRangeDirty(R,A){R>A&&(M=R,R=A,A=M),R<this.start&&(this.start=R),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function x(R){return 0<=R&&R<256}F=p([u(0,C.IBufferService)],F)},844:(v,s)=>{function a(p){for(let u of p)u.dispose();p.length=0}Object.defineProperty(s,"__esModule",{value:!0}),s.getDisposeArrayDisposable=s.disposeArray=s.toDisposable=s.MutableDisposable=s.Disposable=void 0,s.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let p of this._disposables)p.dispose();this._disposables.length=0}register(p){return this._disposables.push(p),p}unregister(p){let u=this._disposables.indexOf(p);u!==-1&&this._disposables.splice(u,1)}},s.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(p){var u;this._isDisposed||p===this._value||((u=this._value)===null||u===void 0||u.dispose(),this._value=p)}clear(){this.value=void 0}dispose(){var p;this._isDisposed=!0,(p=this._value)===null||p===void 0||p.dispose(),this._value=void 0}},s.toDisposable=function(p){return{dispose:p}},s.disposeArray=a,s.getDisposeArrayDisposable=function(p){return{dispose:()=>a(p)}}},1505:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FourKeyMap=s.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(u,r,i){this._data[u]||(this._data[u]={}),this._data[u][r]=i}get(u,r){return this._data[u]?this._data[u][r]:void 0}clear(){this._data={}}}s.TwoKeyMap=a,s.FourKeyMap=class{constructor(){this._data=new a}set(p,u,r,i,l){this._data.get(p,u)||this._data.set(p,u,new a),this._data.get(p,u).set(r,i,l)}get(p,u,r,i){var l;return(l=this._data.get(p,u))===null||l===void 0?void 0:l.get(r,i)}clear(){this._data.clear()}}},6114:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isChromeOS=s.isLinux=s.isWindows=s.isIphone=s.isIpad=s.isMac=s.getSafariVersion=s.isSafari=s.isLegacyEdge=s.isFirefox=s.isNode=void 0,s.isNode=typeof navigator>"u";let a=s.isNode?"node":navigator.userAgent,p=s.isNode?"node":navigator.platform;s.isFirefox=a.includes("Firefox"),s.isLegacyEdge=a.includes("Edge"),s.isSafari=/^((?!chrome|android).)*safari/i.test(a),s.getSafariVersion=function(){if(!s.isSafari)return 0;let u=a.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},s.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(p),s.isIpad=p==="iPad",s.isIphone=p==="iPhone",s.isWindows=["Windows","Win16","Win32","WinCE"].includes(p),s.isLinux=p.indexOf("Linux")>=0,s.isChromeOS=/\bCrOS\b/.test(a)},6106:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SortedList=void 0;let a=0;s.SortedList=class{constructor(p){this._getKey=p,this._array=[]}clear(){this._array.length=0}insert(p){this._array.length!==0?(a=this._search(this._getKey(p)),this._array.splice(a,0,p)):this._array.push(p)}delete(p){if(this._array.length===0)return!1;let u=this._getKey(p);if(u===void 0||(a=this._search(u),a===-1)||this._getKey(this._array[a])!==u)return!1;do if(this._array[a]===p)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===u);return!1}*getKeyIterator(p){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===p)}forEachByKey(p,u){if(this._array.length!==0&&(a=this._search(p),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===p))do u(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===p)}values(){return[...this._array].values()}_search(p){let u=0,r=this._array.length-1;for(;r>=u;){let i=u+r>>1,l=this._getKey(this._array[i]);if(l>p)r=i-1;else{if(!(l<p)){for(;i>0&&this._getKey(this._array[i-1])===p;)i--;return i}u=i+1}}return u}}},7226:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DebouncedIdleTask=s.IdleTaskQueue=s.PriorityTaskQueue=void 0;let p=a(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(l){this._tasks.push(l),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(l){this._idleCallback=void 0;let d=0,f=0,o=l.timeRemaining(),h=0;for(;this._i<this._tasks.length;){if(d=Date.now(),this._tasks[this._i]()||this._i++,d=Math.max(1,Date.now()-d),f=Math.max(d,f),h=l.timeRemaining(),1.5*f>h)return o-d<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-d))}ms`),void this._start();o=h}this.clear()}}class r extends u{_requestCallback(l){return setTimeout(()=>l(this._createDeadline(16)))}_cancelCallback(l){clearTimeout(l)}_createDeadline(l){let d=Date.now()+l;return{timeRemaining:()=>Math.max(0,d-Date.now())}}}s.PriorityTaskQueue=r,s.IdleTaskQueue=!p.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(i){return requestIdleCallback(i)}_cancelCallback(i){cancelIdleCallback(i)}}:r,s.DebouncedIdleTask=class{constructor(){this._queue=new s.IdleTaskQueue}set(i){this._queue.clear(),this._queue.enqueue(i)}flush(){this._queue.flush()}}},9282:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.updateWindowsModeWrappedState=void 0;let p=a(643);s.updateWindowsModeWrappedState=function(u){let r=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),i=r?.get(u.cols-1),l=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);l&&i&&(l.isWrapped=i[p.CHAR_DATA_CODE_INDEX]!==p.NULL_CELL_CODE&&i[p.CHAR_DATA_CODE_INDEX]!==p.WHITESPACE_CELL_CODE)}},3734:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ExtendedAttrs=s.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new p}static toColorRGB(r){return[r>>>16&255,r>>>8&255,255&r]}static fromColorRGB(r){return(255&r[0])<<16|(255&r[1])<<8|255&r[2]}clone(){let r=new a;return r.fg=this.fg,r.bg=this.bg,r.extended=this.extended.clone(),r}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}s.AttributeData=a;class p{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(r){this._ext=r}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(r){this._ext&=-469762049,this._ext|=r<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(r){this._ext&=-67108864,this._ext|=67108863&r}get urlId(){return this._urlId}set urlId(r){this._urlId=r}constructor(r=0,i=0){this._ext=0,this._urlId=0,this._ext=r,this._urlId=i}clone(){return new p(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}s.ExtendedAttrs=p},9092:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Buffer=s.MAX_BUFFER_SIZE=void 0;let p=a(6349),u=a(7226),r=a(3734),i=a(8437),l=a(4634),d=a(511),f=a(643),o=a(4863),h=a(7116);s.MAX_BUFFER_SIZE=4294967295,s.Buffer=class{constructor(_,m,y){this._hasScrollback=_,this._optionsService=m,this._bufferService=y,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=i.DEFAULT_ATTR_DATA.clone(),this.savedCharset=h.DEFAULT_CHARSET,this.markers=[],this._nullCell=d.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]),this._whitespaceCell=d.CellData.fromCharData([0,f.WHITESPACE_CELL_CHAR,f.WHITESPACE_CELL_WIDTH,f.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(_){return _?(this._nullCell.fg=_.fg,this._nullCell.bg=_.bg,this._nullCell.extended=_.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new r.ExtendedAttrs),this._nullCell}getWhitespaceCell(_){return _?(this._whitespaceCell.fg=_.fg,this._whitespaceCell.bg=_.bg,this._whitespaceCell.extended=_.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new r.ExtendedAttrs),this._whitespaceCell}getBlankLine(_,m){return new i.BufferLine(this._bufferService.cols,this.getNullCell(_),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let _=this.ybase+this.y-this.ydisp;return _>=0&&_<this._rows}_getCorrectBufferLength(_){if(!this._hasScrollback)return _;let m=_+this._optionsService.rawOptions.scrollback;return m>s.MAX_BUFFER_SIZE?s.MAX_BUFFER_SIZE:m}fillViewportRows(_){if(this.lines.length===0){_===void 0&&(_=i.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(_))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new p.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(_,m){let y=this.getNullCell(i.DEFAULT_ATTR_DATA),C=0,E=this._getCorrectBufferLength(m);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<_)for(let g=0;g<this.lines.length;g++)C+=+this.lines.get(g).resize(_,y);let D=0;if(this._rows<m)for(let g=this._rows;g<m;g++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new i.BufferLine(_,y)):this.ybase>0&&this.lines.length<=this.ybase+this.y+D+1?(this.ybase--,D++,this.ydisp>0&&this.ydisp--):this.lines.push(new i.BufferLine(_,y)));else for(let g=this._rows;g>m;g--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){let g=this.lines.length-E;g>0&&(this.lines.trimStart(g),this.ybase=Math.max(this.ybase-g,0),this.ydisp=Math.max(this.ydisp-g,0),this.savedY=Math.max(this.savedY-g,0)),this.lines.maxLength=E}this.x=Math.min(this.x,_-1),this.y=Math.min(this.y,m-1),D&&(this.y+=D),this.savedX=Math.min(this.savedX,_-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(_,m),this._cols>_))for(let D=0;D<this.lines.length;D++)C+=+this.lines.get(D).resize(_,y);this._cols=_,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let _=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,_=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return _}get _isReflowEnabled(){let _=this._optionsService.rawOptions.windowsPty;return _&&_.buildNumber?this._hasScrollback&&_.backend==="conpty"&&_.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(_,m){this._cols!==_&&(_>this._cols?this._reflowLarger(_,m):this._reflowSmaller(_,m))}_reflowLarger(_,m){let y=(0,l.reflowLargerGetLinesToRemove)(this.lines,this._cols,_,this.ybase+this.y,this.getNullCell(i.DEFAULT_ATTR_DATA));if(y.length>0){let C=(0,l.reflowLargerCreateNewLayout)(this.lines,y);(0,l.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(_,m,C.countRemoved)}}_reflowLargerAdjustViewport(_,m,y){let C=this.getNullCell(i.DEFAULT_ATTR_DATA),E=y;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new i.BufferLine(_,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-y,0)}_reflowSmaller(_,m){let y=this.getNullCell(i.DEFAULT_ATTR_DATA),C=[],E=0;for(let D=this.lines.length-1;D>=0;D--){let g=this.lines.get(D);if(!g||!g.isWrapped&&g.getTrimmedLength()<=_)continue;let b=[g];for(;g.isWrapped&&D>0;)g=this.lines.get(--D),b.unshift(g);let L=this.ybase+this.y;if(L>=D&&L<D+b.length)continue;let S=b[b.length-1].getTrimmedLength(),T=(0,l.reflowSmallerGetNewLineLengths)(b,this._cols,_),M=T.length-b.length,w;w=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+M):Math.max(0,this.lines.length-this.lines.maxLength+M);let F=[];for(let k=0;k<M;k++){let H=this.getBlankLine(i.DEFAULT_ATTR_DATA,!0);F.push(H)}F.length>0&&(C.push({start:D+b.length+E,newLines:F}),E+=F.length),b.push(...F);let x=T.length-1,R=T[x];R===0&&(x--,R=T[x]);let A=b.length-M-1,I=S;for(;A>=0;){let k=Math.min(I,R);if(b[x]===void 0)break;if(b[x].copyCellsFrom(b[A],I-k,R-k,k,!0),R-=k,R===0&&(x--,R=T[x]),I-=k,I===0){A--;let H=Math.max(A,0);I=(0,l.getWrappedLineTrimmedLength)(b,H,this._cols)}}for(let k=0;k<b.length;k++)T[k]<_&&b[k].setCell(T[k],y);let $=M-w;for(;$-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+M,this.ybase+m-1)}if(C.length>0){let D=[],g=[];for(let x=0;x<this.lines.length;x++)g.push(this.lines.get(x));let b=this.lines.length,L=b-1,S=0,T=C[S];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let M=0;for(let x=Math.min(this.lines.maxLength-1,b+E-1);x>=0;x--)if(T&&T.start>L+M){for(let R=T.newLines.length-1;R>=0;R--)this.lines.set(x--,T.newLines[R]);x++,D.push({index:L+1,amount:T.newLines.length}),M+=T.newLines.length,T=C[++S]}else this.lines.set(x,g[L--]);let w=0;for(let x=D.length-1;x>=0;x--)D[x].index+=w,this.lines.onInsertEmitter.fire(D[x]),w+=D[x].amount;let F=Math.max(0,b+E-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(_,m,y=0,C){let E=this.lines.get(_);return E?E.translateToString(m,y,C):""}getWrappedRangeForLine(_){let m=_,y=_;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;y+1<this.lines.length&&this.lines.get(y+1).isWrapped;)y++;return{first:m,last:y}}setupTabStops(_){for(_!=null?this.tabs[_]||(_=this.prevStop(_)):(this.tabs={},_=0);_<this._cols;_+=this._optionsService.rawOptions.tabStopWidth)this.tabs[_]=!0}prevStop(_){for(_==null&&(_=this.x);!this.tabs[--_]&&_>0;);return _>=this._cols?this._cols-1:_<0?0:_}nextStop(_){for(_==null&&(_=this.x);!this.tabs[++_]&&_<this._cols;);return _>=this._cols?this._cols-1:_<0?0:_}clearMarkers(_){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===_&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let _=0;_<this.markers.length;_++)this.markers[_].dispose(),this.markers.splice(_--,1);this._isClearing=!1}addMarker(_){let m=new o.Marker(_);return this.markers.push(m),m.register(this.lines.onTrim(y=>{m.line-=y,m.line<0&&m.dispose()})),m.register(this.lines.onInsert(y=>{m.line>=y.index&&(m.line+=y.amount)})),m.register(this.lines.onDelete(y=>{m.line>=y.index&&m.line<y.index+y.amount&&m.dispose(),m.line>y.index&&(m.line-=y.amount)})),m.register(m.onDispose(()=>this._removeMarker(m))),m}_removeMarker(_){this._isClearing||this.markers.splice(this.markers.indexOf(_),1)}}},8437:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLine=s.DEFAULT_ATTR_DATA=void 0;let p=a(3734),u=a(511),r=a(643),i=a(482);s.DEFAULT_ATTR_DATA=Object.freeze(new p.AttributeData);let l=0;class d{constructor(o,h,_=!1){this.isWrapped=_,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);let m=h||u.CellData.fromCharData([0,r.NULL_CELL_CHAR,r.NULL_CELL_WIDTH,r.NULL_CELL_CODE]);for(let y=0;y<o;++y)this.setCell(y,m);this.length=o}get(o){let h=this._data[3*o+0],_=2097151&h;return[this._data[3*o+1],2097152&h?this._combined[o]:_?(0,i.stringFromCodePoint)(_):"",h>>22,2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):_]}set(o,h){this._data[3*o+1]=h[r.CHAR_DATA_ATTR_INDEX],h[r.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=h[1],this._data[3*o+0]=2097152|o|h[r.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=h[r.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[r.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&h}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){let h=this._data[3*o+0];return 2097152&h?this._combined[o]:2097151&h?(0,i.stringFromCodePoint)(2097151&h):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,h){return l=3*o,h.content=this._data[l+0],h.fg=this._data[l+1],h.bg=this._data[l+2],2097152&h.content&&(h.combinedData=this._combined[o]),268435456&h.bg&&(h.extended=this._extendedAttrs[o]),h}setCell(o,h){2097152&h.content&&(this._combined[o]=h.combinedData),268435456&h.bg&&(this._extendedAttrs[o]=h.extended),this._data[3*o+0]=h.content,this._data[3*o+1]=h.fg,this._data[3*o+2]=h.bg}setCellFromCodePoint(o,h,_,m,y,C){268435456&y&&(this._extendedAttrs[o]=C),this._data[3*o+0]=h|_<<22,this._data[3*o+1]=m,this._data[3*o+2]=y}addCodepointToCell(o,h){let _=this._data[3*o+0];2097152&_?this._combined[o]+=(0,i.stringFromCodePoint)(h):(2097151&_?(this._combined[o]=(0,i.stringFromCodePoint)(2097151&_)+(0,i.stringFromCodePoint)(h),_&=-2097152,_|=2097152):_=h|4194304,this._data[3*o+0]=_)}insertCells(o,h,_,m){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),h<this.length-o){let y=new u.CellData;for(let C=this.length-o-h-1;C>=0;--C)this.setCell(o+h+C,this.loadCell(o+C,y));for(let C=0;C<h;++C)this.setCell(o+C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}deleteCells(o,h,_,m){if(o%=this.length,h<this.length-o){let y=new u.CellData;for(let C=0;C<this.length-o-h;++C)this.setCell(o+C,this.loadCell(o+h+C,y));for(let C=this.length-h;C<this.length;++C)this.setCell(C,_)}else for(let y=o;y<this.length;++y)this.setCell(y,_);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs)}replaceCells(o,h,_,m,y=!1){if(y)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&!this.isProtected(h)&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);o<h&&o<this.length;)this.isProtected(o)||this.setCell(o,_),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs),h<this.length&&this.getWidth(h-1)===2&&this.setCellFromCodePoint(h,0,1,m?.fg||0,m?.bg||0,m?.extended||new p.ExtendedAttrs);o<h&&o<this.length;)this.setCell(o++,_)}resize(o,h){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let _=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*_)this._data=new Uint32Array(this._data.buffer,0,_);else{let m=new Uint32Array(_);m.set(this._data),this._data=m}for(let m=this.length;m<o;++m)this.setCell(m,h)}else{this._data=this._data.subarray(0,_);let m=Object.keys(this._combined);for(let C=0;C<m.length;C++){let E=parseInt(m[C],10);E>=o&&delete this._combined[E]}let y=Object.keys(this._extendedAttrs);for(let C=0;C<y.length;C++){let E=parseInt(y[C],10);E>=o&&delete this._extendedAttrs[E]}}return this.length=o,4*_*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,h=!1){if(h)for(let _=0;_<this.length;++_)this.isProtected(_)||this.setCell(_,o);else{this._combined={},this._extendedAttrs={};for(let _=0;_<this.length;++_)this.setCell(_,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(let h in o._combined)this._combined[h]=o._combined[h];this._extendedAttrs={};for(let h in o._extendedAttrs)this._extendedAttrs[h]=o._extendedAttrs[h];this.isWrapped=o.isWrapped}clone(){let o=new d(0);o._data=new Uint32Array(this._data),o.length=this.length;for(let h in this._combined)o._combined[h]=this._combined[h];for(let h in this._extendedAttrs)o._extendedAttrs[h]=this._extendedAttrs[h];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,h,_,m,y){let C=o._data;if(y)for(let D=m-1;D>=0;D--){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}else for(let D=0;D<m;D++){for(let g=0;g<3;g++)this._data[3*(_+D)+g]=C[3*(h+D)+g];268435456&C[3*(h+D)+2]&&(this._extendedAttrs[_+D]=o._extendedAttrs[h+D])}let E=Object.keys(o._combined);for(let D=0;D<E.length;D++){let g=parseInt(E[D],10);g>=h&&(this._combined[g-h+_]=o._combined[g])}}translateToString(o=!1,h=0,_=this.length){o&&(_=Math.min(_,this.getTrimmedLength()));let m="";for(;h<_;){let y=this._data[3*h+0],C=2097151&y;m+=2097152&y?this._combined[h]:C?(0,i.stringFromCodePoint)(C):r.WHITESPACE_CELL_CHAR,h+=y>>22||1}return m}}s.BufferLine=d},4841:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getRangeLength=void 0,s.getRangeLength=function(a,p){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return p*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(v,s)=>{function a(p,u,r){if(u===p.length-1)return p[u].getTrimmedLength();let i=!p[u].hasContent(r-1)&&p[u].getWidth(r-1)===1,l=p[u+1].getWidth(0)===2;return i&&l?r-1:r}Object.defineProperty(s,"__esModule",{value:!0}),s.getWrappedLineTrimmedLength=s.reflowSmallerGetNewLineLengths=s.reflowLargerApplyNewLayout=s.reflowLargerCreateNewLayout=s.reflowLargerGetLinesToRemove=void 0,s.reflowLargerGetLinesToRemove=function(p,u,r,i,l){let d=[];for(let f=0;f<p.length-1;f++){let o=f,h=p.get(++o);if(!h.isWrapped)continue;let _=[p.get(f)];for(;o<p.length&&h.isWrapped;)_.push(h),h=p.get(++o);if(i>=f&&i<o){f+=_.length-1;continue}let m=0,y=a(_,m,u),C=1,E=0;for(;C<_.length;){let g=a(_,C,u),b=g-E,L=r-y,S=Math.min(b,L);_[m].copyCellsFrom(_[C],E,y,S,!1),y+=S,y===r&&(m++,y=0),E+=S,E===g&&(C++,E=0),y===0&&m!==0&&_[m-1].getWidth(r-1)===2&&(_[m].copyCellsFrom(_[m-1],r-1,y++,1,!1),_[m-1].setCell(r-1,l))}_[m].replaceCells(y,r,l);let D=0;for(let g=_.length-1;g>0&&(g>m||_[g].getTrimmedLength()===0);g--)D++;D>0&&(d.push(f+_.length-D),d.push(D)),f+=_.length-1}return d},s.reflowLargerCreateNewLayout=function(p,u){let r=[],i=0,l=u[i],d=0;for(let f=0;f<p.length;f++)if(l===f){let o=u[++i];p.onDeleteEmitter.fire({index:f-d,amount:o}),f+=o-1,d+=o,l=u[++i]}else r.push(f);return{layout:r,countRemoved:d}},s.reflowLargerApplyNewLayout=function(p,u){let r=[];for(let i=0;i<u.length;i++)r.push(p.get(u[i]));for(let i=0;i<r.length;i++)p.set(i,r[i]);p.length=u.length},s.reflowSmallerGetNewLineLengths=function(p,u,r){let i=[],l=p.map((h,_)=>a(p,_,u)).reduce((h,_)=>h+_),d=0,f=0,o=0;for(;o<l;){if(l-o<r){i.push(l-o);break}d+=r;let h=a(p,f,u);d>h&&(d-=h,f++);let _=p[f].getWidth(d-1)===2;_&&d--;let m=_?r-1:r;i.push(m),o+=m}return i},s.getWrappedLineTrimmedLength=a},5295:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferSet=void 0;let p=a(8460),u=a(844),r=a(9092);class i extends u.Disposable{constructor(d,f){super(),this._optionsService=d,this._bufferService=f,this._onBufferActivate=this.register(new p.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new r.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new r.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(d){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(d),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(d,f){this._normal.resize(d,f),this._alt.resize(d,f),this.setupTabStops(d)}setupTabStops(d){this._normal.setupTabStops(d),this._alt.setupTabStops(d)}}s.BufferSet=i},511:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CellData=void 0;let p=a(482),u=a(643),r=a(3734);class i extends r.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new r.ExtendedAttrs,this.combinedData=""}static fromCharData(d){let f=new i;return f.setFromCharData(d),f}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,p.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(d){this.fg=d[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let f=!1;if(d[u.CHAR_DATA_CHAR_INDEX].length>2)f=!0;else if(d[u.CHAR_DATA_CHAR_INDEX].length===2){let o=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){let h=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=h&&h<=57343?this.content=1024*(o-55296)+h-56320+65536|d[u.CHAR_DATA_WIDTH_INDEX]<<22:f=!0}else f=!0}else this.content=d[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[u.CHAR_DATA_WIDTH_INDEX]<<22;f&&(this.combinedData=d[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|d[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}s.CellData=i},643:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WHITESPACE_CELL_CODE=s.WHITESPACE_CELL_WIDTH=s.WHITESPACE_CELL_CHAR=s.NULL_CELL_CODE=s.NULL_CELL_WIDTH=s.NULL_CELL_CHAR=s.CHAR_DATA_CODE_INDEX=s.CHAR_DATA_WIDTH_INDEX=s.CHAR_DATA_CHAR_INDEX=s.CHAR_DATA_ATTR_INDEX=s.DEFAULT_EXT=s.DEFAULT_ATTR=s.DEFAULT_COLOR=void 0,s.DEFAULT_COLOR=0,s.DEFAULT_ATTR=256|s.DEFAULT_COLOR<<9,s.DEFAULT_EXT=0,s.CHAR_DATA_ATTR_INDEX=0,s.CHAR_DATA_CHAR_INDEX=1,s.CHAR_DATA_WIDTH_INDEX=2,s.CHAR_DATA_CODE_INDEX=3,s.NULL_CELL_CHAR="",s.NULL_CELL_WIDTH=1,s.NULL_CELL_CODE=0,s.WHITESPACE_CELL_CHAR=" ",s.WHITESPACE_CELL_WIDTH=1,s.WHITESPACE_CELL_CODE=32},4863:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Marker=void 0;let p=a(8460),u=a(844);class r{get id(){return this._id}constructor(l){this.line=l,this.isDisposed=!1,this._disposables=[],this._id=r._nextId++,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(l){return this._disposables.push(l),l}}s.Marker=r,r._nextId=1},7116:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_CHARSET=s.CHARSETS=void 0,s.CHARSETS={},s.DEFAULT_CHARSET=s.CHARSETS.B,s.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},s.CHARSETS.A={"#":"\xA3"},s.CHARSETS.B=void 0,s.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},s.CHARSETS.C=s.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},s.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},s.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},s.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},s.CHARSETS.E=s.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},s.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},s.CHARSETS.H=s.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},s.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(v,s)=>{var a,p,u;Object.defineProperty(s,"__esModule",{value:!0}),s.C1_ESCAPED=s.C1=s.C0=void 0,function(r){r.NUL="\0",r.SOH="",r.STX="",r.ETX="",r.EOT="",r.ENQ="",r.ACK="",r.BEL="\x07",r.BS="\b",r.HT="	",r.LF=`
`,r.VT="\v",r.FF="\f",r.CR="\r",r.SO="",r.SI="",r.DLE="",r.DC1="",r.DC2="",r.DC3="",r.DC4="",r.NAK="",r.SYN="",r.ETB="",r.CAN="",r.EM="",r.SUB="",r.ESC="\x1B",r.FS="",r.GS="",r.RS="",r.US="",r.SP=" ",r.DEL="\x7F"}(a||(s.C0=a={})),function(r){r.PAD="\x80",r.HOP="\x81",r.BPH="\x82",r.NBH="\x83",r.IND="\x84",r.NEL="\x85",r.SSA="\x86",r.ESA="\x87",r.HTS="\x88",r.HTJ="\x89",r.VTS="\x8A",r.PLD="\x8B",r.PLU="\x8C",r.RI="\x8D",r.SS2="\x8E",r.SS3="\x8F",r.DCS="\x90",r.PU1="\x91",r.PU2="\x92",r.STS="\x93",r.CCH="\x94",r.MW="\x95",r.SPA="\x96",r.EPA="\x97",r.SOS="\x98",r.SGCI="\x99",r.SCI="\x9A",r.CSI="\x9B",r.ST="\x9C",r.OSC="\x9D",r.PM="\x9E",r.APC="\x9F"}(p||(s.C1=p={})),function(r){r.ST=`${a.ESC}\\`}(u||(s.C1_ESCAPED=u={}))},7399:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.evaluateKeyboardEvent=void 0;let p=a(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};s.evaluateKeyboardEvent=function(r,i,l,d){let f={type:0,cancel:!1,key:void 0},o=(r.shiftKey?1:0)|(r.altKey?2:0)|(r.ctrlKey?4:0)|(r.metaKey?8:0);switch(r.keyCode){case 0:r.key==="UIKeyInputUpArrow"?f.key=i?p.C0.ESC+"OA":p.C0.ESC+"[A":r.key==="UIKeyInputLeftArrow"?f.key=i?p.C0.ESC+"OD":p.C0.ESC+"[D":r.key==="UIKeyInputRightArrow"?f.key=i?p.C0.ESC+"OC":p.C0.ESC+"[C":r.key==="UIKeyInputDownArrow"&&(f.key=i?p.C0.ESC+"OB":p.C0.ESC+"[B");break;case 8:if(r.altKey){f.key=p.C0.ESC+p.C0.DEL;break}f.key=p.C0.DEL;break;case 9:if(r.shiftKey){f.key=p.C0.ESC+"[Z";break}f.key=p.C0.HT,f.cancel=!0;break;case 13:f.key=r.altKey?p.C0.ESC+p.C0.CR:p.C0.CR,f.cancel=!0;break;case 27:f.key=p.C0.ESC,r.altKey&&(f.key=p.C0.ESC+p.C0.ESC),f.cancel=!0;break;case 37:if(r.metaKey)break;o?(f.key=p.C0.ESC+"[1;"+(o+1)+"D",f.key===p.C0.ESC+"[1;3D"&&(f.key=p.C0.ESC+(l?"b":"[1;5D"))):f.key=i?p.C0.ESC+"OD":p.C0.ESC+"[D";break;case 39:if(r.metaKey)break;o?(f.key=p.C0.ESC+"[1;"+(o+1)+"C",f.key===p.C0.ESC+"[1;3C"&&(f.key=p.C0.ESC+(l?"f":"[1;5C"))):f.key=i?p.C0.ESC+"OC":p.C0.ESC+"[C";break;case 38:if(r.metaKey)break;o?(f.key=p.C0.ESC+"[1;"+(o+1)+"A",l||f.key!==p.C0.ESC+"[1;3A"||(f.key=p.C0.ESC+"[1;5A")):f.key=i?p.C0.ESC+"OA":p.C0.ESC+"[A";break;case 40:if(r.metaKey)break;o?(f.key=p.C0.ESC+"[1;"+(o+1)+"B",l||f.key!==p.C0.ESC+"[1;3B"||(f.key=p.C0.ESC+"[1;5B")):f.key=i?p.C0.ESC+"OB":p.C0.ESC+"[B";break;case 45:r.shiftKey||r.ctrlKey||(f.key=p.C0.ESC+"[2~");break;case 46:f.key=o?p.C0.ESC+"[3;"+(o+1)+"~":p.C0.ESC+"[3~";break;case 36:f.key=o?p.C0.ESC+"[1;"+(o+1)+"H":i?p.C0.ESC+"OH":p.C0.ESC+"[H";break;case 35:f.key=o?p.C0.ESC+"[1;"+(o+1)+"F":i?p.C0.ESC+"OF":p.C0.ESC+"[F";break;case 33:r.shiftKey?f.type=2:r.ctrlKey?f.key=p.C0.ESC+"[5;"+(o+1)+"~":f.key=p.C0.ESC+"[5~";break;case 34:r.shiftKey?f.type=3:r.ctrlKey?f.key=p.C0.ESC+"[6;"+(o+1)+"~":f.key=p.C0.ESC+"[6~";break;case 112:f.key=o?p.C0.ESC+"[1;"+(o+1)+"P":p.C0.ESC+"OP";break;case 113:f.key=o?p.C0.ESC+"[1;"+(o+1)+"Q":p.C0.ESC+"OQ";break;case 114:f.key=o?p.C0.ESC+"[1;"+(o+1)+"R":p.C0.ESC+"OR";break;case 115:f.key=o?p.C0.ESC+"[1;"+(o+1)+"S":p.C0.ESC+"OS";break;case 116:f.key=o?p.C0.ESC+"[15;"+(o+1)+"~":p.C0.ESC+"[15~";break;case 117:f.key=o?p.C0.ESC+"[17;"+(o+1)+"~":p.C0.ESC+"[17~";break;case 118:f.key=o?p.C0.ESC+"[18;"+(o+1)+"~":p.C0.ESC+"[18~";break;case 119:f.key=o?p.C0.ESC+"[19;"+(o+1)+"~":p.C0.ESC+"[19~";break;case 120:f.key=o?p.C0.ESC+"[20;"+(o+1)+"~":p.C0.ESC+"[20~";break;case 121:f.key=o?p.C0.ESC+"[21;"+(o+1)+"~":p.C0.ESC+"[21~";break;case 122:f.key=o?p.C0.ESC+"[23;"+(o+1)+"~":p.C0.ESC+"[23~";break;case 123:f.key=o?p.C0.ESC+"[24;"+(o+1)+"~":p.C0.ESC+"[24~";break;default:if(!r.ctrlKey||r.shiftKey||r.altKey||r.metaKey)if(l&&!d||!r.altKey||r.metaKey)!l||r.altKey||r.ctrlKey||r.shiftKey||!r.metaKey?r.key&&!r.ctrlKey&&!r.altKey&&!r.metaKey&&r.keyCode>=48&&r.key.length===1?f.key=r.key:r.key&&r.ctrlKey&&(r.key==="_"&&(f.key=p.C0.US),r.key==="@"&&(f.key=p.C0.NUL)):r.keyCode===65&&(f.type=1);else{let h=u[r.keyCode],_=h?.[r.shiftKey?1:0];if(_)f.key=p.C0.ESC+_;else if(r.keyCode>=65&&r.keyCode<=90){let m=r.ctrlKey?r.keyCode-64:r.keyCode+32,y=String.fromCharCode(m);r.shiftKey&&(y=y.toUpperCase()),f.key=p.C0.ESC+y}else if(r.keyCode===32)f.key=p.C0.ESC+(r.ctrlKey?p.C0.NUL:" ");else if(r.key==="Dead"&&r.code.startsWith("Key")){let m=r.code.slice(3,4);r.shiftKey||(m=m.toLowerCase()),f.key=p.C0.ESC+m,f.cancel=!0}}else r.keyCode>=65&&r.keyCode<=90?f.key=String.fromCharCode(r.keyCode-64):r.keyCode===32?f.key=p.C0.NUL:r.keyCode>=51&&r.keyCode<=55?f.key=String.fromCharCode(r.keyCode-51+27):r.keyCode===56?f.key=p.C0.DEL:r.keyCode===219?f.key=p.C0.ESC:r.keyCode===220?f.key=p.C0.FS:r.keyCode===221&&(f.key=p.C0.GS)}return f}},482:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Utf8ToUtf32=s.StringToUtf32=s.utf32ToString=s.stringFromCodePoint=void 0,s.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},s.utf32ToString=function(a,p=0,u=a.length){let r="";for(let i=p;i<u;++i){let l=a[i];l>65535?(l-=65536,r+=String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):r+=String.fromCharCode(l)}return r},s.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,p){let u=a.length;if(!u)return 0;let r=0,i=0;if(this._interim){let l=a.charCodeAt(i++);56320<=l&&l<=57343?p[r++]=1024*(this._interim-55296)+l-56320+65536:(p[r++]=this._interim,p[r++]=l),this._interim=0}for(let l=i;l<u;++l){let d=a.charCodeAt(l);if(55296<=d&&d<=56319){if(++l>=u)return this._interim=d,r;let f=a.charCodeAt(l);56320<=f&&f<=57343?p[r++]=1024*(d-55296)+f-56320+65536:(p[r++]=d,p[r++]=f)}else d!==65279&&(p[r++]=d)}return r}},s.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,p){let u=a.length;if(!u)return 0;let r,i,l,d,f=0,o=0,h=0;if(this.interim[0]){let y=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let E,D=0;for(;(E=63&this.interim[++D])&&D<4;)C<<=6,C|=E;let g=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=g-D;for(;h<b;){if(h>=u)return 0;if(E=a[h++],(192&E)!=128){h--,y=!0;break}this.interim[D++]=E,C<<=6,C|=63&E}y||(g===2?C<128?h--:p[f++]=C:g===3?C<2048||C>=55296&&C<=57343||C===65279||(p[f++]=C):C<65536||C>1114111||(p[f++]=C)),this.interim.fill(0)}let _=u-4,m=h;for(;m<u;){for(;!(!(m<_)||128&(r=a[m])||128&(i=a[m+1])||128&(l=a[m+2])||128&(d=a[m+3]));)p[f++]=r,p[f++]=i,p[f++]=l,p[f++]=d,m+=4;if(r=a[m++],r<128)p[f++]=r;else if((224&r)==192){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(o=(31&r)<<6|63&i,o<128){m--;continue}p[f++]=o}else if((240&r)==224){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,f;if(l=a[m++],(192&l)!=128){m--;continue}if(o=(15&r)<<12|(63&i)<<6|63&l,o<2048||o>=55296&&o<=57343||o===65279)continue;p[f++]=o}else if((248&r)==240){if(m>=u)return this.interim[0]=r,f;if(i=a[m++],(192&i)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,f;if(l=a[m++],(192&l)!=128){m--;continue}if(m>=u)return this.interim[0]=r,this.interim[1]=i,this.interim[2]=l,f;if(d=a[m++],(192&d)!=128){m--;continue}if(o=(7&r)<<18|(63&i)<<12|(63&l)<<6|63&d,o<65536||o>1114111)continue;p[f++]=o}}return f}}},225:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],p=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],u;s.UnicodeV6=class{constructor(){if(this.version="6",!u){u=new Uint8Array(65536),u.fill(1),u[0]=0,u.fill(0,1,32),u.fill(0,127,160),u.fill(2,4352,4448),u[9001]=2,u[9002]=2,u.fill(2,11904,42192),u[12351]=1,u.fill(2,44032,55204),u.fill(2,63744,64256),u.fill(2,65040,65050),u.fill(2,65072,65136),u.fill(2,65280,65377),u.fill(2,65504,65511);for(let r=0;r<a.length;++r)u.fill(0,a[r][0],a[r][1]+1)}}wcwidth(r){return r<32?0:r<127?1:r<65536?u[r]:function(i,l){let d,f=0,o=l.length-1;if(i<l[0][0]||i>l[o][1])return!1;for(;o>=f;)if(d=f+o>>1,i>l[d][1])f=d+1;else{if(!(i<l[d][0]))return!0;o=d-1}return!1}(r,p)?0:r>=131072&&r<=196605||r>=196608&&r<=262141?2:1}}},5981:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WriteBuffer=void 0;let p=a(8460),u=a(844);class r extends u.Disposable{constructor(l){super(),this._action=l,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new p.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(l,d){if(d!==void 0&&this._syncCalls>d)return void(this._syncCalls=0);if(this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let f;for(this._isSyncWriting=!0;f=this._writeBuffer.shift();){this._action(f);let o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(l,d){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(d),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=l.length,this._writeBuffer.push(l),this._callbacks.push(d)}_innerWrite(l=0,d=!0){let f=l||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let o=this._writeBuffer[this._bufferOffset],h=this._action(o,d);if(h){let m=y=>Date.now()-f>=12?setTimeout(()=>this._innerWrite(0,y)):this._innerWrite(f,y);return void h.catch(y=>(queueMicrotask(()=>{throw y}),Promise.resolve(!1))).then(m)}let _=this._callbacks[this._bufferOffset];if(_&&_(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-f>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}s.WriteBuffer=r},5941:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.toRgbString=s.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,p=/^[\da-f]+$/;function u(r,i){let l=r.toString(16),d=l.length<2?"0"+l:l;switch(i){case 4:return l[0];case 8:return d;case 12:return(d+d).slice(0,3);default:return d+d}}s.parseColor=function(r){if(!r)return;let i=r.toLowerCase();if(i.indexOf("rgb:")===0){i=i.slice(4);let l=a.exec(i);if(l){let d=l[1]?15:l[4]?255:l[7]?4095:65535;return[Math.round(parseInt(l[1]||l[4]||l[7]||l[10],16)/d*255),Math.round(parseInt(l[2]||l[5]||l[8]||l[11],16)/d*255),Math.round(parseInt(l[3]||l[6]||l[9]||l[12],16)/d*255)]}}else if(i.indexOf("#")===0&&(i=i.slice(1),p.exec(i)&&[3,6,9,12].includes(i.length))){let l=i.length/3,d=[0,0,0];for(let f=0;f<3;++f){let o=parseInt(i.slice(l*f,l*f+l),16);d[f]=l===1?o<<4:l===2?o:l===3?o>>4:o>>8}return d}},s.toRgbString=function(r,i=16){let[l,d,f]=r;return`rgb:${u(l,i)}/${u(d,i)}/${u(f,i)}`}},5770:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PAYLOAD_LIMIT=void 0,s.PAYLOAD_LIMIT=1e7},6351:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DcsHandler=s.DcsParser=void 0;let p=a(482),u=a(8742),r=a(5770),i=[];s.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=i,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=i}registerHandler(d,f){this._handlers[d]===void 0&&(this._handlers[d]=[]);let o=this._handlers[d];return o.push(f),{dispose:()=>{let h=o.indexOf(f);h!==-1&&o.splice(h,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}reset(){if(this._active.length)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].unhook(!1);this._stack.paused=!1,this._active=i,this._ident=0}hook(d,f){if(this.reset(),this._ident=d,this._active=this._handlers[d]||i,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(f);else this._handlerFb(this._ident,"HOOK",f)}put(d,f,o){if(this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].put(d,f,o);else this._handlerFb(this._ident,"PUT",(0,p.utf32ToString)(d,f,o))}unhook(d,f=!0){if(this._active.length){let o=!1,h=this._active.length-1,_=!1;if(this._stack.paused&&(h=this._stack.loopPosition-1,o=f,_=this._stack.fallThrough,this._stack.paused=!1),!_&&o===!1){for(;h>=0&&(o=this._active[h].unhook(d),o!==!0);h--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!1,o;h--}for(;h>=0;h--)if(o=this._active[h].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=h,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",d);this._active=i,this._ident=0}};let l=new u.Params;l.addParam(0),s.DcsHandler=class{constructor(d){this._handler=d,this._data="",this._params=l,this._hitLimit=!1}hook(d){this._params=d.length>1||d.params[0]?d.clone():l,this._data="",this._hitLimit=!1}put(d,f,o){this._hitLimit||(this._data+=(0,p.utf32ToString)(d,f,o),this._data.length>r.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(d){let f=!1;if(this._hitLimit)f=!1;else if(d&&(f=this._handler(this._data,this._params),f instanceof Promise))return f.then(o=>(this._params=l,this._data="",this._hitLimit=!1,o));return this._params=l,this._data="",this._hitLimit=!1,f}}},2015:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.EscapeSequenceParser=s.VT500_TRANSITION_TABLE=s.TransitionTable=void 0;let p=a(844),u=a(8742),r=a(6242),i=a(6351);class l{constructor(h){this.table=new Uint8Array(h)}setDefault(h,_){this.table.fill(h<<4|_)}add(h,_,m,y){this.table[_<<8|h]=m<<4|y}addMany(h,_,m,y){for(let C=0;C<h.length;C++)this.table[_<<8|h[C]]=m<<4|y}}s.TransitionTable=l;let d=160;s.VT500_TRANSITION_TABLE=function(){let o=new l(4095),h=Array.apply(null,Array(256)).map((D,g)=>g),_=(D,g)=>h.slice(D,g),m=_(32,127),y=_(0,24);y.push(25),y.push.apply(y,_(28,32));let C=_(0,14),E;for(E in o.setDefault(1,0),o.addMany(m,0,2,0),C)o.addMany([24,26,153,154],E,3,0),o.addMany(_(128,144),E,3,0),o.addMany(_(144,152),E,3,0),o.add(156,E,0,0),o.add(27,E,11,1),o.add(157,E,4,8),o.addMany([152,158,159],E,0,7),o.add(155,E,11,3),o.add(144,E,11,9);return o.addMany(y,0,3,0),o.addMany(y,1,3,1),o.add(127,1,0,1),o.addMany(y,8,0,8),o.addMany(y,3,3,3),o.add(127,3,0,3),o.addMany(y,4,3,4),o.add(127,4,0,4),o.addMany(y,6,3,6),o.addMany(y,5,3,5),o.add(127,5,0,5),o.addMany(y,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(m,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(_(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(m,7,0,7),o.addMany(y,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(_(64,127),3,7,0),o.addMany(_(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(_(48,60),4,8,4),o.addMany(_(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(_(32,64),6,0,6),o.add(127,6,0,6),o.addMany(_(64,127),6,0,0),o.addMany(_(32,48),3,9,5),o.addMany(_(32,48),5,9,5),o.addMany(_(48,64),5,0,6),o.addMany(_(64,127),5,7,0),o.addMany(_(32,48),4,9,5),o.addMany(_(32,48),1,9,2),o.addMany(_(32,48),2,9,2),o.addMany(_(48,127),2,10,0),o.addMany(_(48,80),1,10,0),o.addMany(_(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(_(96,127),1,10,0),o.add(80,1,11,9),o.addMany(y,9,0,9),o.add(127,9,0,9),o.addMany(_(28,32),9,0,9),o.addMany(_(32,48),9,9,12),o.addMany(_(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(y,11,0,11),o.addMany(_(32,128),11,0,11),o.addMany(_(28,32),11,0,11),o.addMany(y,10,0,10),o.add(127,10,0,10),o.addMany(_(28,32),10,0,10),o.addMany(_(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(_(32,48),10,9,12),o.addMany(y,12,0,12),o.add(127,12,0,12),o.addMany(_(28,32),12,0,12),o.addMany(_(32,48),12,9,12),o.addMany(_(48,64),12,0,11),o.addMany(_(64,127),12,12,13),o.addMany(_(64,127),10,12,13),o.addMany(_(64,127),9,12,13),o.addMany(y,13,13,13),o.addMany(m,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(d,0,2,0),o.add(d,8,5,8),o.add(d,6,0,6),o.add(d,11,0,11),o.add(d,13,13,13),o}();class f extends p.Disposable{constructor(h=s.VT500_TRANSITION_TABLE){super(),this._transitions=h,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(_,m,y)=>{},this._executeHandlerFb=_=>{},this._csiHandlerFb=(_,m)=>{},this._escHandlerFb=_=>{},this._errorHandlerFb=_=>_,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,p.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new r.OscParser),this._dcsParser=this.register(new i.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(h,_=[64,126]){let m=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=h.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<h.intermediates.length;++C){let E=h.intermediates.charCodeAt(C);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=E}}if(h.final.length!==1)throw new Error("final must be a single byte");let y=h.final.charCodeAt(0);if(_[0]>y||y>_[1])throw new Error(`final must be in range ${_[0]} .. ${_[1]}`);return m<<=8,m|=y,m}identToString(h){let _=[];for(;h;)_.push(String.fromCharCode(255&h)),h>>=8;return _.reverse().join("")}setPrintHandler(h){this._printHandler=h}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(h,_){let m=this._identifier(h,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);let y=this._escHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearEscHandler(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]}setEscHandlerFallback(h){this._escHandlerFb=h}setExecuteHandler(h,_){this._executeHandlers[h.charCodeAt(0)]=_}clearExecuteHandler(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]}setExecuteHandlerFallback(h){this._executeHandlerFb=h}registerCsiHandler(h,_){let m=this._identifier(h);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);let y=this._csiHandlers[m];return y.push(_),{dispose:()=>{let C=y.indexOf(_);C!==-1&&y.splice(C,1)}}}clearCsiHandler(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]}setCsiHandlerFallback(h){this._csiHandlerFb=h}registerDcsHandler(h,_){return this._dcsParser.registerHandler(this._identifier(h),_)}clearDcsHandler(h){this._dcsParser.clearHandler(this._identifier(h))}setDcsHandlerFallback(h){this._dcsParser.setHandlerFallback(h)}registerOscHandler(h,_){return this._oscParser.registerHandler(h,_)}clearOscHandler(h){this._oscParser.clearHandler(h)}setOscHandlerFallback(h){this._oscParser.setHandlerFallback(h)}setErrorHandler(h){this._errorHandler=h}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(h,_,m,y,C){this._parseStack.state=h,this._parseStack.handlers=_,this._parseStack.handlerPos=m,this._parseStack.transition=y,this._parseStack.chunkPos=C}parse(h,_,m){let y,C=0,E=0,D=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,D=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let g=this._parseStack.handlers,b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](this._params),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 4:if(m===!1&&b>-1){for(;b>=0&&(y=g[b](),y!==!0);b--)if(y instanceof Promise)return this._parseStack.handlerPos=b,y}this._parseStack.handlers=[];break;case 6:if(C=h[this._parseStack.chunkPos],y=this._dcsParser.unhook(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=h[this._parseStack.chunkPos],y=this._oscParser.end(C!==24&&C!==26,m),y)return y;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,D=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let g=D;g<_;++g){switch(C=h[g],E=this._transitions.table[this.currentState<<8|(C<160?C:d)],E>>4){case 2:for(let M=g+1;;++M){if(M>=_||(C=h[M])<32||C>126&&C<d){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<d){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<d){this._printHandler(h,g,M),g=M-1;break}if(++M>=_||(C=h[M])<32||C>126&&C<d){this._printHandler(h,g,M),g=M-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:g,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let b=this._csiHandlers[this._collect<<8|C],L=b?b.length-1:-1;for(;L>=0&&(y=b[L](this._params),y!==!0);L--)if(y instanceof Promise)return this._preserveStack(3,b,L,E,g),y;L<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingCodepoint=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++g<_&&(C=h[g])>47&&C<60);g--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:let S=this._escHandlers[this._collect<<8|C],T=S?S.length-1:-1;for(;T>=0&&(y=S[T](),y!==!0);T--)if(y instanceof Promise)return this._preserveStack(4,S,T,E,g),y;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let M=g+1;;++M)if(M>=_||(C=h[M])===24||C===26||C===27||C>127&&C<d){this._dcsParser.put(h,g,M),g=M-1;break}break;case 14:if(y=this._dcsParser.unhook(C!==24&&C!==26),y)return this._preserveStack(6,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let M=g+1;;M++)if(M>=_||(C=h[M])<32||C>127&&C<d){this._oscParser.put(h,g,M),g=M-1;break}break;case 6:if(y=this._oscParser.end(C!==24&&C!==26),y)return this._preserveStack(5,[],0,E,g),y;C===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}s.EscapeSequenceParser=f},6242:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OscHandler=s.OscParser=void 0;let p=a(5770),u=a(482),r=[];s.OscParser=class{constructor(){this._state=0,this._active=r,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(i,l){this._handlers[i]===void 0&&(this._handlers[i]=[]);let d=this._handlers[i];return d.push(l),{dispose:()=>{let f=d.indexOf(l);f!==-1&&d.splice(f,1)}}}clearHandler(i){this._handlers[i]&&delete this._handlers[i]}setHandlerFallback(i){this._handlerFb=i}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=r}reset(){if(this._state===2)for(let i=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;i>=0;--i)this._active[i].end(!1);this._stack.paused=!1,this._active=r,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||r,this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].start();else this._handlerFb(this._id,"START")}_put(i,l,d){if(this._active.length)for(let f=this._active.length-1;f>=0;f--)this._active[f].put(i,l,d);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(i,l,d))}start(){this.reset(),this._state=1}put(i,l,d){if(this._state!==3){if(this._state===1)for(;l<d;){let f=i[l++];if(f===59){this._state=2,this._start();break}if(f<48||57<f)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+f-48}this._state===2&&d-l>0&&this._put(i,l,d)}}end(i,l=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let d=!1,f=this._active.length-1,o=!1;if(this._stack.paused&&(f=this._stack.loopPosition-1,d=l,o=this._stack.fallThrough,this._stack.paused=!1),!o&&d===!1){for(;f>=0&&(d=this._active[f].end(i),d!==!0);f--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!1,d;f--}for(;f>=0;f--)if(d=this._active[f].end(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=f,this._stack.fallThrough=!0,d}else this._handlerFb(this._id,"END",i);this._active=r,this._id=-1,this._state=0}}},s.OscHandler=class{constructor(i){this._handler=i,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(i,l,d){this._hitLimit||(this._data+=(0,u.utf32ToString)(i,l,d),this._data.length>p.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(i){let l=!1;if(this._hitLimit)l=!1;else if(i&&(l=this._handler(this._data),l instanceof Promise))return l.then(d=>(this._data="",this._hitLimit=!1,d));return this._data="",this._hitLimit=!1,l}}},8742:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.Params=void 0;let a=2147483647;class p{static fromArray(r){let i=new p;if(!r.length)return i;for(let l=Array.isArray(r[0])?1:0;l<r.length;++l){let d=r[l];if(Array.isArray(d))for(let f=0;f<d.length;++f)i.addSubParam(d[f]);else i.addParam(d)}return i}constructor(r=32,i=32){if(this.maxLength=r,this.maxSubParamsLength=i,i>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(r),this.length=0,this._subParams=new Int32Array(i),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(r),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let r=new p(this.maxLength,this.maxSubParamsLength);return r.params.set(this.params),r.length=this.length,r._subParams.set(this._subParams),r._subParamsLength=this._subParamsLength,r._subParamsIdx.set(this._subParamsIdx),r._rejectDigits=this._rejectDigits,r._rejectSubDigits=this._rejectSubDigits,r._digitIsSub=this._digitIsSub,r}toArray(){let r=[];for(let i=0;i<this.length;++i){r.push(this.params[i]);let l=this._subParamsIdx[i]>>8,d=255&this._subParamsIdx[i];d-l>0&&r.push(Array.prototype.slice.call(this._subParams,l,d))}return r}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(r){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=r>a?a:r}}addSubParam(r){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(r<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=r>a?a:r,this._subParamsIdx[this.length-1]++}}hasSubParams(r){return(255&this._subParamsIdx[r])-(this._subParamsIdx[r]>>8)>0}getSubParams(r){let i=this._subParamsIdx[r]>>8,l=255&this._subParamsIdx[r];return l-i>0?this._subParams.subarray(i,l):null}getSubParamsAll(){let r={};for(let i=0;i<this.length;++i){let l=this._subParamsIdx[i]>>8,d=255&this._subParamsIdx[i];d-l>0&&(r[i]=this._subParams.slice(l,d))}return r}addDigit(r){let i;if(this._rejectDigits||!(i=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let l=this._digitIsSub?this._subParams:this.params,d=l[i-1];l[i-1]=~d?Math.min(10*d+r,a):r}}s.Params=p},5741:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AddonManager=void 0,s.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,p){let u={instance:p,dispose:p.dispose,isDisposed:!1};this._addons.push(u),p.dispose=()=>this._wrappedAddonDispose(u),p.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let p=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===a){p=u;break}if(p===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(p,1)}}},8771:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferApiView=void 0;let p=a(3785),u=a(511);s.BufferApiView=class{constructor(r,i){this._buffer=r,this.type=i}init(r){return this._buffer=r,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(r){let i=this._buffer.lines.get(r);if(i)return new p.BufferLineApiView(i)}getNullCell(){return new u.CellData}}},3785:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferLineApiView=void 0;let p=a(511);s.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,r){if(!(u<0||u>=this._line.length))return r?(this._line.loadCell(u,r),r):this._line.loadCell(u,new p.CellData)}translateToString(u,r,i){return this._line.translateToString(u,r,i)}}},8285:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BufferNamespaceApi=void 0;let p=a(8771),u=a(8460),r=a(844);class i extends r.Disposable{constructor(d){super(),this._core=d,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new p.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new p.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}s.BufferNamespaceApi=i},7975:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ParserApi=void 0,s.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,p){return this._core.registerCsiHandler(a,u=>p(u.toArray()))}addCsiHandler(a,p){return this.registerCsiHandler(a,p)}registerDcsHandler(a,p){return this._core.registerDcsHandler(a,(u,r)=>p(u,r.toArray()))}addDcsHandler(a,p){return this.registerDcsHandler(a,p)}registerEscHandler(a,p){return this._core.registerEscHandler(a,p)}addEscHandler(a,p){return this.registerEscHandler(a,p)}registerOscHandler(a,p){return this._core.registerOscHandler(a,p)}addOscHandler(a,p){return this.registerOscHandler(a,p)}}},7090:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeApi=void 0,s.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.BufferService=s.MINIMUM_ROWS=s.MINIMUM_COLS=void 0;let r=a(8460),i=a(844),l=a(5295),d=a(2585);s.MINIMUM_COLS=2,s.MINIMUM_ROWS=1;let f=s.BufferService=class extends i.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new r.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,s.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,s.MINIMUM_ROWS),this.buffers=this.register(new l.BufferSet(o,this))}resize(o,h){this.cols=o,this.rows=h,this.buffers.resize(o,h),this._onResize.fire({cols:o,rows:h})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,h=!1){let _=this.buffer,m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===o.fg&&m.getBg(0)===o.bg||(m=_.getBlankLine(o,h),this._cachedBlankLine=m),m.isWrapped=h;let y=_.ybase+_.scrollTop,C=_.ybase+_.scrollBottom;if(_.scrollTop===0){let E=_.lines.isFull;C===_.lines.length-1?E?_.lines.recycle().copyFrom(m):_.lines.push(m.clone()):_.lines.splice(C+1,0,m.clone()),E?this.isUserScrolling&&(_.ydisp=Math.max(_.ydisp-1,0)):(_.ybase++,this.isUserScrolling||_.ydisp++)}else{let E=C-y+1;_.lines.shiftElements(y+1,E-1,-1),_.lines.set(C,m.clone())}this.isUserScrolling||(_.ydisp=_.ybase),this._onScroll.fire(_.ydisp)}scrollLines(o,h,_){let m=this.buffer;if(o<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else o+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);let y=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+o,m.ybase),0),y!==m.ydisp&&(h||this._onScroll.fire(m.ydisp))}};s.BufferService=f=p([u(0,d.IOptionsService)],f)},7994:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharsetService=void 0,s.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,p){this._charsets[a]=p,this.glevel===a&&(this.charset=p)}}},1753:function(v,s,a){var p=this&&this.__decorate||function(m,y,C,E){var D,g=arguments.length,b=g<3?y:E===null?E=Object.getOwnPropertyDescriptor(y,C):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(m,y,C,E);else for(var L=m.length-1;L>=0;L--)(D=m[L])&&(b=(g<3?D(b):g>3?D(y,C,b):D(y,C))||b);return g>3&&b&&Object.defineProperty(y,C,b),b},u=this&&this.__param||function(m,y){return function(C,E){y(C,E,m)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreMouseService=void 0;let r=a(2585),i=a(8460),l=a(844),d={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function f(m,y){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||y||(C|=3)),C}let o=String.fromCharCode,h={DEFAULT:m=>{let y=[f(m,!1)+32,m.col+32,m.row+32];return y[0]>255||y[1]>255||y[2]>255?"":`\x1B[M${o(y[0])}${o(y[1])}${o(y[2])}`},SGR:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.col};${m.row}${y}`},SGR_PIXELS:m=>{let y=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${f(m,!0)};${m.x};${m.y}${y}`}},_=s.CoreMouseService=class extends l.Disposable{constructor(m,y){super(),this._bufferService=m,this._coreService=y,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new i.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let C of Object.keys(d))this.addProtocol(C,d[C]);for(let C of Object.keys(h))this.addEncoding(C,h[C]);this.reset()}addProtocol(m,y){this._protocols[m]=y}addEncoding(m,y){this._encodings[m]=y}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;let y=this._encodings[this._activeEncoding](m);return y&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(y):this._coreService.triggerDataEvent(y,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,y,C){if(C){if(m.x!==y.x||m.y!==y.y)return!1}else if(m.col!==y.col||m.row!==y.row)return!1;return m.button===y.button&&m.action===y.action&&m.ctrl===y.ctrl&&m.alt===y.alt&&m.shift===y.shift}};s.CoreMouseService=_=p([u(0,r.IBufferService),u(1,r.ICoreService)],_)},6975:function(v,s,a){var p=this&&this.__decorate||function(_,m,y,C){var E,D=arguments.length,g=D<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,y):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(_,m,y,C);else for(var b=_.length-1;b>=0;b--)(E=_[b])&&(g=(D<3?E(g):D>3?E(m,y,g):E(m,y))||g);return D>3&&g&&Object.defineProperty(m,y,g),g},u=this&&this.__param||function(_,m){return function(y,C){m(y,C,_)}};Object.defineProperty(s,"__esModule",{value:!0}),s.CoreService=void 0;let r=a(1439),i=a(8460),l=a(844),d=a(2585),f=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),h=s.CoreService=class extends l.Disposable{constructor(_,m,y){super(),this._bufferService=_,this._logService=m,this._optionsService=y,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new i.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new i.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new i.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new i.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}reset(){this.modes=(0,r.clone)(f),this.decPrivateModes=(0,r.clone)(o)}triggerDataEvent(_,m=!1){if(this._optionsService.rawOptions.disableStdin)return;let y=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&y.ybase!==y.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${_}"`,()=>_.split("").map(C=>C.charCodeAt(0))),this._onData.fire(_)}triggerBinaryEvent(_){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${_}"`,()=>_.split("").map(m=>m.charCodeAt(0))),this._onBinary.fire(_))}};s.CoreService=h=p([u(0,d.IBufferService),u(1,d.ILogService),u(2,d.IOptionsService)],h)},9074:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DecorationService=void 0;let p=a(8055),u=a(8460),r=a(844),i=a(6106),l=0,d=0;class f extends r.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new i.SortedList(_=>_?.marker.line),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,r.toDisposable)(()=>this.reset()))}registerDecoration(_){if(_.marker.isDisposed)return;let m=new o(_);if(m){let y=m.marker.onDispose(()=>m.dispose());m.onDispose(()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),y.dispose())}),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(let _ of this._decorations.values())_.dispose();this._decorations.clear()}*getDecorationsAtCell(_,m,y){var C,E,D;let g=0,b=0;for(let L of this._decorations.getKeyIterator(m))g=(C=L.options.x)!==null&&C!==void 0?C:0,b=g+((E=L.options.width)!==null&&E!==void 0?E:1),_>=g&&_<b&&(!y||((D=L.options.layer)!==null&&D!==void 0?D:"bottom")===y)&&(yield L)}forEachDecorationAtCell(_,m,y,C){this._decorations.forEachByKey(m,E=>{var D,g,b;l=(D=E.options.x)!==null&&D!==void 0?D:0,d=l+((g=E.options.width)!==null&&g!==void 0?g:1),_>=l&&_<d&&(!y||((b=E.options.layer)!==null&&b!==void 0?b:"bottom")===y)&&C(E)})}}s.DecorationService=f;class o extends r.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=p.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=p.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(_){super(),this.options=_,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=_.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.InstantiationService=s.ServiceCollection=void 0;let p=a(2585),u=a(8343);class r{constructor(...l){this._entries=new Map;for(let[d,f]of l)this.set(d,f)}set(l,d){let f=this._entries.get(l);return this._entries.set(l,d),f}forEach(l){for(let[d,f]of this._entries.entries())l(d,f)}has(l){return this._entries.has(l)}get(l){return this._entries.get(l)}}s.ServiceCollection=r,s.InstantiationService=class{constructor(){this._services=new r,this._services.set(p.IInstantiationService,this)}setService(i,l){this._services.set(i,l)}getService(i){return this._services.get(i)}createInstance(i,...l){let d=(0,u.getServiceDependencies)(i).sort((h,_)=>h.index-_.index),f=[];for(let h of d){let _=this._services.get(h.id);if(!_)throw new Error(`[createInstance] ${i.name} depends on UNKNOWN service ${h.id}.`);f.push(_)}let o=d.length>0?d[0].index:l.length;if(l.length!==o)throw new Error(`[createInstance] First service dependency of ${i.name} at position ${o+1} conflicts with ${l.length} static arguments`);return new i(...l,...f)}}},7866:function(v,s,a){var p=this&&this.__decorate||function(o,h,_,m){var y,C=arguments.length,E=C<3?h:m===null?m=Object.getOwnPropertyDescriptor(h,_):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,h,_,m);else for(var D=o.length-1;D>=0;D--)(y=o[D])&&(E=(C<3?y(E):C>3?y(h,_,E):y(h,_))||E);return C>3&&E&&Object.defineProperty(h,_,E),E},u=this&&this.__param||function(o,h){return function(_,m){h(_,m,o)}};Object.defineProperty(s,"__esModule",{value:!0}),s.traceCall=s.setTraceLogger=s.LogService=void 0;let r=a(844),i=a(2585),l={trace:i.LogLevelEnum.TRACE,debug:i.LogLevelEnum.DEBUG,info:i.LogLevelEnum.INFO,warn:i.LogLevelEnum.WARN,error:i.LogLevelEnum.ERROR,off:i.LogLevelEnum.OFF},d,f=s.LogService=class extends r.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=i.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),d=this}_updateLogLevel(){this._logLevel=l[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let h=0;h<o.length;h++)typeof o[h]=="function"&&(o[h]=o[h]())}_log(o,h,_){this._evalLazyOptionalParams(_),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+h,..._)}trace(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.TRACE&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.trace.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}debug(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.DEBUG&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.debug.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.log,o,h)}info(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.INFO&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.info.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.info,o,h)}warn(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.WARN&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.warn.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.warn,o,h)}error(o,...h){var _,m;this._logLevel<=i.LogLevelEnum.ERROR&&this._log((m=(_=this._optionsService.options.logger)===null||_===void 0?void 0:_.error.bind(this._optionsService.options.logger))!==null&&m!==void 0?m:console.error,o,h)}};s.LogService=f=p([u(0,i.IOptionsService)],f),s.setTraceLogger=function(o){d=o},s.traceCall=function(o,h,_){if(typeof _.value!="function")throw new Error("not supported");let m=_.value;_.value=function(...y){if(d.logLevel!==i.LogLevelEnum.TRACE)return m.apply(this,y);d.trace(`GlyphRenderer#${m.name}(${y.map(E=>JSON.stringify(E)).join(", ")})`);let C=m.apply(this,y);return d.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.OptionsService=s.DEFAULT_OPTIONS=void 0;let p=a(8460),u=a(844),r=a(6114);s.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:r.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let i=["normal","bold","100","200","300","400","500","600","700","800","900"];class l extends u.Disposable{constructor(f){super(),this._onOptionChange=this.register(new p.EventEmitter),this.onOptionChange=this._onOptionChange.event;let o=Object.assign({},s.DEFAULT_OPTIONS);for(let h in f)if(h in o)try{let _=f[h];o[h]=this._sanitizeAndValidateOption(h,_)}catch(_){console.error(_)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(f,o){return this.onOptionChange(h=>{h===f&&o(this.rawOptions[f])})}onMultipleOptionChange(f,o){return this.onOptionChange(h=>{f.indexOf(h)!==-1&&o()})}_setupOptions(){let f=h=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);return this.rawOptions[h]},o=(h,_)=>{if(!(h in s.DEFAULT_OPTIONS))throw new Error(`No option with key "${h}"`);_=this._sanitizeAndValidateOption(h,_),this.rawOptions[h]!==_&&(this.rawOptions[h]=_,this._onOptionChange.fire(h))};for(let h in this.rawOptions){let _={get:f.bind(this,h),set:o.bind(this,h)};Object.defineProperty(this.options,h,_)}}_sanitizeAndValidateOption(f,o){switch(f){case"cursorStyle":if(o||(o=s.DEFAULT_OPTIONS[f]),!function(h){return h==="block"||h==="underline"||h==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${f}`);break;case"wordSeparator":o||(o=s.DEFAULT_OPTIONS[f]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=i.includes(o)?o:s.DEFAULT_OPTIONS[f];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${f} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${f} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${f} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${f} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}s.OptionsService=l},2660:function(v,s,a){var p=this&&this.__decorate||function(l,d,f,o){var h,_=arguments.length,m=_<3?d:o===null?o=Object.getOwnPropertyDescriptor(d,f):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(l,d,f,o);else for(var y=l.length-1;y>=0;y--)(h=l[y])&&(m=(_<3?h(m):_>3?h(d,f,m):h(d,f))||m);return _>3&&m&&Object.defineProperty(d,f,m),m},u=this&&this.__param||function(l,d){return function(f,o){d(f,o,l)}};Object.defineProperty(s,"__esModule",{value:!0}),s.OscLinkService=void 0;let r=a(2585),i=s.OscLinkService=class{constructor(l){this._bufferService=l,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(l){let d=this._bufferService.buffer;if(l.id===void 0){let y=d.addMarker(d.ybase+d.y),C={data:l,id:this._nextId++,lines:[y]};return y.onDispose(()=>this._removeMarkerFromLink(C,y)),this._dataByLinkId.set(C.id,C),C.id}let f=l,o=this._getEntryIdKey(f),h=this._entriesWithId.get(o);if(h)return this.addLineToLink(h.id,d.ybase+d.y),h.id;let _=d.addMarker(d.ybase+d.y),m={id:this._nextId++,key:this._getEntryIdKey(f),data:f,lines:[_]};return _.onDispose(()=>this._removeMarkerFromLink(m,_)),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(l,d){let f=this._dataByLinkId.get(l);if(f&&f.lines.every(o=>o.line!==d)){let o=this._bufferService.buffer.addMarker(d);f.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(f,o))}}getLinkData(l){var d;return(d=this._dataByLinkId.get(l))===null||d===void 0?void 0:d.data}_getEntryIdKey(l){return`${l.id};;${l.uri}`}_removeMarkerFromLink(l,d){let f=l.lines.indexOf(d);f!==-1&&(l.lines.splice(f,1),l.lines.length===0&&(l.data.id!==void 0&&this._entriesWithId.delete(l.key),this._dataByLinkId.delete(l.id)))}};s.OscLinkService=i=p([u(0,r.IBufferService)],i)},8343:(v,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createDecorator=s.getServiceDependencies=s.serviceRegistry=void 0;let a="di$target",p="di$dependencies";s.serviceRegistry=new Map,s.getServiceDependencies=function(u){return u[p]||[]},s.createDecorator=function(u){if(s.serviceRegistry.has(u))return s.serviceRegistry.get(u);let r=function(i,l,d){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(f,o,h){o[a]===o?o[p].push({id:f,index:h}):(o[p]=[{id:f,index:h}],o[a]=o)})(r,i,d)};return r.toString=()=>u,s.serviceRegistry.set(u,r),r}},2585:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.IDecorationService=s.IUnicodeService=s.IOscLinkService=s.IOptionsService=s.ILogService=s.LogLevelEnum=s.IInstantiationService=s.ICharsetService=s.ICoreService=s.ICoreMouseService=s.IBufferService=void 0;let p=a(8343);var u;s.IBufferService=(0,p.createDecorator)("BufferService"),s.ICoreMouseService=(0,p.createDecorator)("CoreMouseService"),s.ICoreService=(0,p.createDecorator)("CoreService"),s.ICharsetService=(0,p.createDecorator)("CharsetService"),s.IInstantiationService=(0,p.createDecorator)("InstantiationService"),function(r){r[r.TRACE=0]="TRACE",r[r.DEBUG=1]="DEBUG",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.OFF=5]="OFF"}(u||(s.LogLevelEnum=u={})),s.ILogService=(0,p.createDecorator)("LogService"),s.IOptionsService=(0,p.createDecorator)("OptionsService"),s.IOscLinkService=(0,p.createDecorator)("OscLinkService"),s.IUnicodeService=(0,p.createDecorator)("UnicodeService"),s.IDecorationService=(0,p.createDecorator)("DecorationService")},1480:(v,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.UnicodeService=void 0;let p=a(8460),u=a(225);s.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new p.EventEmitter,this.onChange=this._onChange.event;let r=new u.UnicodeV6;this.register(r),this._active=r.version,this._activeProvider=r}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(r){if(!this._providers[r])throw new Error(`unknown Unicode version "${r}"`);this._active=r,this._activeProvider=this._providers[r],this._onChange.fire(r)}register(r){this._providers[r.version]=r}wcwidth(r){return this._activeProvider.wcwidth(r)}getStringCellWidth(r){let i=0,l=r.length;for(let d=0;d<l;++d){let f=r.charCodeAt(d);if(55296<=f&&f<=56319){if(++d>=l)return i+this.wcwidth(f);let o=r.charCodeAt(d);56320<=o&&o<=57343?f=1024*(f-55296)+o-56320+65536:i+=this.wcwidth(o)}i+=this.wcwidth(f)}return i}}}},t={};function n(v){var s=t[v];if(s!==void 0)return s.exports;var a=t[v]={exports:{}};return e[v].call(a.exports,a,a.exports,n),a.exports}var c={};return(()=>{var v=c;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;let s=n(9042),a=n(3236),p=n(844),u=n(5741),r=n(8285),i=n(7975),l=n(7090),d=["cols","rows"];class f extends p.Disposable{constructor(h){super(),this._core=this.register(new a.Terminal(h)),this._addonManager=this.register(new u.AddonManager),this._publicOptions=Object.assign({},this._core.options);let _=y=>this._core.options[y],m=(y,C)=>{this._checkReadonlyOptions(y),this._core.options[y]=C};for(let y in this._core.options){let C={get:_.bind(this,y),set:m.bind(this,y)};Object.defineProperty(this._publicOptions,y,C)}}_checkReadonlyOptions(h){if(d.includes(h))throw new Error(`Option "${h}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new i.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new l.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new r.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let h=this._core.coreService.decPrivateModes,_="none";switch(this._core.coreMouseService.activeProtocol){case"X10":_="x10";break;case"VT200":_="vt200";break;case"DRAG":_="drag";break;case"ANY":_="any"}return{applicationCursorKeysMode:h.applicationCursorKeys,applicationKeypadMode:h.applicationKeypad,bracketedPasteMode:h.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:_,originMode:h.origin,reverseWraparoundMode:h.reverseWraparound,sendFocusMode:h.sendFocus,wraparoundMode:h.wraparound}}get options(){return this._publicOptions}set options(h){for(let _ in h)this._publicOptions[_]=h[_]}blur(){this._core.blur()}focus(){this._core.focus()}resize(h,_){this._verifyIntegers(h,_),this._core.resize(h,_)}open(h){this._core.open(h)}attachCustomKeyEventHandler(h){this._core.attachCustomKeyEventHandler(h)}registerLinkProvider(h){return this._core.registerLinkProvider(h)}registerCharacterJoiner(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)}deregisterCharacterJoiner(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)}registerMarker(h=0){return this._verifyIntegers(h),this._core.registerMarker(h)}registerDecoration(h){var _,m,y;return this._checkProposedApi(),this._verifyPositiveIntegers((_=h.x)!==null&&_!==void 0?_:0,(m=h.width)!==null&&m!==void 0?m:0,(y=h.height)!==null&&y!==void 0?y:0),this._core.registerDecoration(h)}hasSelection(){return this._core.hasSelection()}select(h,_,m){this._verifyIntegers(h,_,m),this._core.select(h,_,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(h,_){this._verifyIntegers(h,_),this._core.selectLines(h,_)}dispose(){super.dispose()}scrollLines(h){this._verifyIntegers(h),this._core.scrollLines(h)}scrollPages(h){this._verifyIntegers(h),this._core.scrollPages(h)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(h){this._verifyIntegers(h),this._core.scrollToLine(h)}clear(){this._core.clear()}write(h,_){this._core.write(h,_)}writeln(h,_){this._core.write(h),this._core.write(`\r
`,_)}paste(h){this._core.paste(h)}refresh(h,_){this._verifyIntegers(h,_),this._core.refresh(h,_)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(h){this._addonManager.loadAddon(this,h)}static get strings(){return s}_verifyIntegers(...h){for(let _ of h)if(_===1/0||isNaN(_)||_%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...h){for(let _ of h)if(_&&(_===1/0||isNaN(_)||_%1!=0||_<0))throw new Error("This API only accepts positive integers")}}v.Terminal=f})(),c})())});var JS=function(e){return function(t){for(var n=t.length,c=new Array(n),v=0;v<n;v++)c[v]=e(t[v]);return c}};var Pd={compose:function(e){return function(t){return function(n){return e(t(n))}}}};var ye=function(e){return e.identity},Ce={identity:function(e){return e},Semigroupoid0:function(){return Pd}};var en=!0;var Oe=function(e){return function(t){return function(n){return e(n)(t)}}},be=function(e){return function(t){return e}};var jS=function(e){return function(t){return t(e)}};var tn=function(){function e(){}return e.value=new e,e}();var V=function(e){return e.map};var Et=function(e){return V(e)(be(void 0))},Gs=function(e){var t=V(e);return function(n){return function(c){return t(be(c))(n)}}},Bd=function(e){var t=V(e);return function(n){return t(be(n))}};var It={map:JS};var KS=function(e){return function(t){return e+t}},QS=function(e){return function(t){return e.length===0?t:t.length===0?e:e.concat(t)}};var An=function(e){return e.reflectSymbol};var Hu={append:KS};var jt={append:QS};var me=function(e){return e.append};var ym={alt:me(jt),Functor0:function(){return It}},bn=function(e){return e.alt};var XS=function(e){return function(t){for(var n=e.length,c=t.length,v=new Array(n*c),s=0,a=0;a<n;a++)for(var p=e[a],u=0;u<c;u++)v[s++]=p(t[u]);return v}};var VO=ye(Ce);var Pu={apply:XS,Functor0:function(){return It}},ut=function(e){return e.apply};var Eo=function(e){var t=ut(e),n=V(e.Functor0());return function(c){return function(v){return t(n(be(VO))(c))(v)}}};var ee=function(e){return e.pure},yl=function(e){var t=ee(e);return function(n){return function(c){if(!n)return c;if(n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): "+[n.constructor.name,c.constructor.name])}}},jr=function(e){var t=ee(e);return function(n){return function(c){if(n)return c;if(!n)return t(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[n.constructor.name,c.constructor.name])}}},Dl=function(e){var t=ut(e.Apply0()),n=ee(e);return function(c){return function(v){return t(n(c))(v)}}};var Js={pure:function(e){return[e]},Apply0:function(){return Pu}};var YS=function(e){return function(t){for(var n=[],c=0,v=e.length;c<v;c++)Array.prototype.push.apply(n,t(e[c]));return n}};var Lt=function(e){return e.discard};var gi={bind:YS,Apply0:function(){return Pu}},ae=function(e){return e.bind},ln=function(e){return Oe(ae(e))},js=function(e){var t=ln(e);return function(n){return function(c){return function(v){return t(n)(c(v))}}}};var Ft={discard:function(e){return ae(e)}};var jO=function(e){return function(t){if(e<1)return[];var n=new Array(e);return n.fill(t)}},KO=function(e){return function(t){for(var n=[],c=0,v=0;v<e;v++)n[c++]=t;return n}},ZS=typeof Array.prototype.fill=="function"?jO:KO,eE=function(){function e(v,s){this.head=v,this.tail=s}var t={};function n(v){return function(s){return new e(v,s)}}function c(v){for(var s=[],a=0,p=v;p!==t;)s[a++]=p.head,p=p.tail;return s}return function(v){return function(s){return c(v(n)(t)(s))}}}(),Kr=function(e){return e.length},Cm=function(e){return function(t){return function(n){return n.length===0?e({}):t(n[0])(n.slice(1))}}},tE=function(e){return function(t){return function(n){return function(c){return c<0||c>=n.length?t:e(n[c])}}}};var nE=function(e){return function(t){return function(n){return function(c){for(var v=0,s=c.length;v<s;v++)if(n(c[v]))return e(v);return t}}}};var rE=function(e){return function(t){return function(n){return function(c){if(n<0||n>=c.length)return t;var v=c.slice();return v.splice(n,1),e(v)}}}};var Cl=function(e){return function(t){return t.filter(e)}};var oE=function(){function e(t,n,c,v,s,a){var p,u,r,i,l,d,f;for(p=s+(a-s>>1),p-s>1&&e(t,n,v,c,s,p),a-p>1&&e(t,n,v,c,p,a),u=s,r=p,i=s;u<p&&r<a;)l=v[u],d=v[r],f=n(t(l)(d)),f>0?(c[i++]=d,++r):(c[i++]=l,++u);for(;u<p;)c[i++]=v[u++];for(;r<a;)c[i++]=v[r++]}return function(t){return function(n){return function(c){var v;return c.length<2?c:(v=c.slice(0),e(t,n,v,c.slice(0),0,c.length),v)}}}}(),Ud=function(e){return function(t){return function(n){return n.slice(e,t)}}};var iE=function(e){var t=ae(e.Bind1()),n=yl(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return n(s)(v)})}}};var uE=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(v)(function(s){return n(c(s))})}}},qn=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return function(c){return function(v){return t(c)(function(s){return t(v)(function(a){return n(s(a))})})}}};var sE=String.fromCharCode(65535),cE=String.fromCharCode(0),XO=Number.POSITIVE_INFINITY,YO=Number.NEGATIVE_INFINITY;var qd=function(e){return function(t){return function(n){return function(c){return function(v){return c<v?e:c===v?t:n}}}}};var lE=qd,fE=qd,dE=qd,pE=qd,hE=function(e){return function(t){return function(n){for(var c=0,v=t.length,s=n.length;c<v&&c<s;){var a=t[c],p=n[c],u=e(a)(p);if(u!==0)return u;c++}return v===s?0:v>s?-1:1}}};var zd=function(e){return function(t){return e===t}};var _E=zd,vE=zd,mE=zd,gE=zd,yE=function(e){return function(t){return function(n){if(t.length!==n.length)return!1;for(var c=0;c<t.length;c++)if(!e(t[c])(n[c]))return!1;return!0}}};var Vd={eq:function(e){return function(t){return!0}}},vr={eq:gE};var wl={eq:vE},Sl={eq:_E},DE={eq:mE};var Ue=function(e){return e.eq};var Xo=function(e){return{eq:yE(Ue(e))}};var fe=function(){function e(){}return e.value=new e,e}(),pe=function(){function e(){}return e.value=new e,e}(),Ie=function(){function e(){}return e.value=new e,e}();var mr={compare:function(e){return function(t){return Ie.value}},Eq0:function(){return Vd}},Kt=function(){return{compare:dE(fe.value)(Ie.value)(pe.value),Eq0:function(){return vr}}}();var Qs=function(){return{compare:fE(fe.value)(Ie.value)(pe.value),Eq0:function(){return wl}}}(),wn=function(){return{compare:lE(fe.value)(Ie.value)(pe.value),Eq0:function(){return Sl}}}(),Gd=function(){return{compare:pE(fe.value)(Ie.value)(pe.value),Eq0:function(){return DE}}}();var Te=function(e){return e.compare},i2=Te(wn);var Tl=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe)return c;if(v instanceof Ie||v instanceof pe)return n;throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): "+[v.constructor.name])}}},Jd=function(e){var t=Te(e);return function(n){return function(c){var v=t(n)(c);if(v instanceof fe||v instanceof Ie)return n;if(v instanceof pe)return c;throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): "+[v.constructor.name])}}},Di=function(e){var t=Te(e),n=Xo(e.Eq0());return{compare:function(){var c=function(v){return function(s){var a=t(v)(s);if(a instanceof Ie)return 0;if(a instanceof fe)return 1;if(a instanceof pe)return-1;throw new Error("Failed pattern match at Data.Ord (line 79, column 7 - line 82, column 17): "+[a.constructor.name])}};return function(v){return function(s){return i2(0)(hE(c)(v)(s))}}}(),Eq0:function(){return n}}};var Sm=function(e){var t=Jd(e),n=Tl(e);return function(c){return function(v){return function(s){return t(v)(n(c)(s))}}}};var Yo=function(e){return e.top};var jd={top:2147483647,bottom:-2147483648,Ord0:function(){return wn}},Ml={top:sE,bottom:cE,Ord0:function(){return Gd}};var $a=function(e){return e.bottom};var EE=function(e){return e.toString()},TE=function(e){var t=e.toString();return isNaN(t+".0")?t:t+".0"};var ME=function(e){var t=e.length;return'"'+e.replace(/[\0-\x1F\x7F"\\]/g,function(n,c){switch(n){case'"':case"\\":return"\\"+n;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var v=c+1,s=v<t&&e[v]>="0"&&e[v]<="9"?"\\&":"";return"\\"+n.charCodeAt(0).toString(10)+s})+'"'};var Oa={show:ME};var Mo={show:TE},ea={show:EE};var LE={show:function(e){if(e)return"true";if(!e)return"false";throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): "+[e.constructor.name])}},Fe=function(e){return e.show};var d2=ye(Ce),G=function(){function e(){}return e.value=new e,e}(),z=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var Em=function(e){var t=me(e);return{append:function(n){return function(c){if(n instanceof G)return c;if(c instanceof G)return n;if(n instanceof z&&c instanceof z)return new z(t(n.value0)(c.value0));throw new Error("Failed pattern match at Data.Maybe (line 182, column 1 - line 185, column 43): "+[n.constructor.name,c.constructor.name])}}}};var xE=function(e){var t=Em(e);return{mempty:G.value,Semigroup0:function(){return t}}};var tt=function(e){return function(t){return function(n){if(n instanceof G)return e;if(n instanceof z)return t(n.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Ha=tt(!0)(be(!1)),Ys=tt(!1)(be(!0));var Tt={map:function(e){return function(t){return t instanceof z?new z(e(t.value0)):G.value}}},p2=V(Tt);var Mn=function(e){return tt(e)(d2)},Qr=function(){return function(e){if(e instanceof z)return e.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[e.constructor.name])}};var Xd={apply:function(e){return function(t){if(e instanceof z)return p2(e.value0)(t);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return Tt}};var gr={bind:function(e){return function(t){if(e instanceof z)return t(e.value0);if(e instanceof G)return G.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[e.constructor.name,t.constructor.name])}},Apply0:function(){return Xd}};var qe=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),He=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var bi={map:function(e){return function(t){if(t instanceof qe)return new qe(t.value0);if(t instanceof He)return new He(e(t.value0));throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): "+[t.constructor.name])}}},h2=V(bi);var gn=function(e){return function(t){return function(n){if(n instanceof qe)return e(n.value0);if(n instanceof He)return t(n.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},Yd=function(){return gn(be(G.value))(z.create)}();var AE=gn(be(!1))(be(!0));var IE={apply:function(e){return function(t){if(e instanceof qe)return new qe(e.value0);if(e instanceof He)return h2(e.value0)(t);throw new Error("Failed pattern match at Data.Either (line 70, column 1 - line 72, column 30): "+[e.constructor.name,t.constructor.name])}},Functor0:function(){return bi}};var Nu=function(){return{pure:He.create,Apply0:function(){return IE}}}();var Lo=function(e){return e};var Pa={map:function(e){return function(t){return e(t)}}};var Zd={apply:function(e){return function(t){return e(t)}},Functor0:function(){return Pa}},Tm={bind:function(e){return function(t){return t(e)}},Apply0:function(){return Zd}},ep={pure:Lo,Apply0:function(){return Zd}},ho={Applicative0:function(){return ep},Bind1:function(){return Tm}};var Na={mempty:"",Semigroup0:function(){return Hu}};var Bu={mempty:[],Semigroup0:function(){return jt}};var at=function(e){return e.mempty};var kE=function(e){return function(){return e}},OE=function(e){return function(t){return function(){return t(e())()}}};var HE=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},ta={Applicative0:function(){return Xt},Bind1:function(){return yr}},yr={bind:OE,Apply0:function(){return Fm(0)}},Xt={pure:kE,Apply0:function(){return Fm(0)}},PE=HE("functorEffect","Effect",function(){return{map:Dl(Xt)}}),Fm=HE("applyEffect","Effect",function(){return{apply:qn(ta),Functor0:function(){return PE(0)}}}),Pe=PE(20),xm=Fm(23);var NE=function(e){return function(){return{value:e}}};var Ke=function(e){return function(){return e.value}},BE=function(e){return function(t){return function(){var n=e(t.value);return t.value=n.state,n.value}}},Pt=function(e){return function(t){return function(){t.value=e}}};var b2=Et(Pe),nn=NE,Am=BE,WE=function(e){return Am(function(t){var n=e(t);return{state:n,value:n}})},Xr=function(e){return function(t){return b2(WE(e)(t))}};var E2=ln(yr),T2=V(Pe),hn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rn=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ar=function(e){return e.tailRecM};var np={tailRecM:function(e){return function(t){var n=function(c){if(c instanceof rn)return c.value0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): "+[c.constructor.name])};return function(){var v=E2(nn)(e(t))();return function(){for(;!function(){var a=Ke(v)();if(a instanceof hn){var p=e(a.value0)();return Pt(p)(v)(),!1}if(a instanceof rn)return!0;throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): "+[a.constructor.name])}(););return{}}(),T2(n)(Ke(v))()}}},Monad0:function(){return ta}};var UE=function(e){return function(t){return function(){return e(t())}}};var rp=function(e){return function(t){return function(){for(var n=0,c=e.length;n<c;n++)t(e[n])()}}};var op={map:UE};var x2=function(){function e(t,n,c,v,s,a){var p,u,r,i,l,d,f;for(p=s+(a-s>>1),p-s>1&&e(t,n,v,c,s,p),a-p>1&&e(t,n,v,c,p,a),u=s,r=p,i=s;u<p&&r<a;)l=v[u],d=v[r],f=n(t(l)(d)),f>0?(c[i++]=d,++r):(c[i++]=l,++u);for(;u<p;)c[i++]=v[u++];for(;r<a;)c[i++]=v[r++]}return function(t){return function(n){return function(c){return function(){return c.length<2||e(t,n,c,c.slice(0),0,c.length),c}}}}}();var QE=function(e){return function(t){return e&&t}},XE=function(e){return function(t){return e||t}},YE=function(e){return!e};var Ll=function(e){return e.tt};var na=function(e){return e.not};var Om=function(e){return e.implies};var Fl=function(e){return e.ff};var Wu=function(e){return e.disj},_o={ff:!1,tt:!0,implies:function(e){return function(t){return Wu(_o)(na(_o)(e))(t)}},conj:QE,disj:XE,not:YE};var ec=function(e){return e.conj},xl=function(e){var t=Fl(e),n=Ll(e),c=Om(e),v=ec(e),s=Wu(e),a=na(e);return{ff:function(p){return t},tt:function(p){return n},implies:function(p){return function(u){return function(r){return c(p(r))(u(r))}}},conj:function(p){return function(u){return function(r){return v(p(r))(u(r))}}},disj:function(p){return function(u){return function(r){return s(p(r))(u(r))}}},not:function(p){return function(u){return a(p(u))}}}};var eT=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=v-1;s>=0;s--)c=e(n[s])(c);return c}}},tT=function(e){return function(t){return function(n){for(var c=t,v=n.length,s=0;s<v;s++)c=e(c)(n[s]);return c}}};var nT={empty:[],Alt0:function(){return ym}},$r=function(e){return e.empty};var ne=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ba=function(e){return function(t){return e(t.value0)(t.value1)}};var on=function(e){return e.value1};var Wa={map:function(e){return function(t){return new ne(t.value0,e(t.value1))}}};var Pn=function(e){return e.value0};var ip=function(e){var t=Ue(e);return function(n){var c=Ue(n);return{eq:function(v){return function(s){return t(v.value0)(s.value0)&&c(v.value1)(s.value1)}}}}},Uu=function(e){var t=Te(e),n=ip(e.Eq0());return function(c){var v=Te(c),s=n(c.Eq0());return{compare:function(a){return function(p){var u=t(a.value0)(p.value0);return u instanceof fe?fe.value:u instanceof pe?pe.value:v(a.value1)(p.value1)}},Eq0:function(){return s}}}};var Zr=function(e){return e.bimap};var J2={append:function(e){return function(t){return e instanceof z?e:t}}};var aT=function(){return{mempty:G.value,Semigroup0:function(){return J2}}}();var Z=function(e){return e};var cp=function(){return Z};var j2=cp();var fn=function(){return j2};var K2=ye(Ce);var Q2=fn();var Nt=function(e){return e.foldr};var vt=function(e){var t=Eo(e.Apply0()),n=ee(e);return function(c){var v=Nt(c);return function(s){return v(function(a){return t(s(a))})(n(void 0))}}},lp=function(e){var t=vt(e);return function(n){return Oe(t(n))}};var Ht=function(e){return e.foldl};var Fo=function(e){var t=Ht(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return function(a){var p=function(u){return function(r){return u.init?{init:!1,acc:r}:{init:!1,acc:c(u.acc)(c(s)(r))}}};return t(p)({init:!0,acc:v})(a).acc}}}};var zt={foldr:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof G)return t;if(n instanceof z)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof G)return t;if(c instanceof z)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,c.constructor.name])}}}};var fp={foldr:function(e){return function(t){return function(n){if(n instanceof qe)return t;if(n instanceof He)return e(n.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof qe)return t;if(n instanceof He)return e(t)(n.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[e.constructor.name,t.constructor.name,n.constructor.name])}}},foldMap:function(e){var t=at(e);return function(n){return function(c){if(c instanceof qe)return t;if(c instanceof He)return n(c.value0);throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): "+[n.constructor.name,c.constructor.name])}}}};var fT=function(e){var t=Nt(e);return function(n){var c=me(n.Semigroup0()),v=at(n);return function(s){return t(function(a){return function(p){return c(s(a))(p)}})(v)}}},Mt={foldr:eT,foldl:tT,foldMap:function(e){return fT(Mt)(e)}};var Wt=function(e){return e.foldMap};var dp=function(e){var t=Wt(e)(aT);return function(n){var c=Ue(n);return function(v){var s=t(function(a){var p=c(v)(a.value0);return p?new z(a.value1):G.value});return function(a){return Q2(s(a))}}}};var zu=function(e){var t=Wt(e);return function(n){return t(n)(K2)}};var _T=function(){function e(v){return[v]}function t(v){return function(s){return[v,s]}}function n(v){return function(s){return function(a){return[v,s,a]}}}function c(v){return function(s){return v.concat(s)}}return function(v){return function(s){return function(a){return function(p){return function(u){function r(i,l){switch(l-i){case 0:return a([]);case 1:return s(e)(p(u[i]));case 2:return v(s(t)(p(u[i])))(p(u[i+1]));case 3:return v(v(s(n)(p(u[i])))(p(u[i+1])))(p(u[i+2]));default:var d=i+Math.floor((l-i)/4)*2;return v(s(c)(r(i,d)))(r(d,l))}}return r(0,u.length)}}}}}}();var AH=ye(Ce),_n=function(e){return e.traverse};var Pl={traverse:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){return function(v){if(v instanceof G)return t(G.value);if(v instanceof z)return n(z.create)(c(v.value0));throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name,v.constructor.name])}}},sequence:function(e){var t=ee(e),n=V(e.Apply0().Functor0());return function(c){if(c instanceof G)return t(G.value);if(c instanceof z)return n(z.create)(c.value0);throw new Error("Failed pattern match at Data.Traversable (line 115, column 1 - line 119, column 33): "+[c.constructor.name])}},Functor0:function(){return Tt},Foldable1:function(){return zt}};var wT=function(e){var t=_n(e);return function(n){return t(n)(AH)}},Mi={traverse:function(e){var t=e.Apply0();return _T(ut(t))(V(t.Functor0()))(ee(e))},sequence:function(e){return wT(Mi)(e)},Functor0:function(){return It},Foldable1:function(){return Mt}};var ST=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],p=s;;){var u=v(p);if(e(u))return a;var r=t(u);a.push(n(r)),p=c(r)}}}}}}};var ET=function(e){return function(t){return function(n){return function(c){return function(v){return function(s){for(var a=[],p=s;;){var u=v(p);a.push(n(u));var r=c(u);if(e(r))return a;p=t(r)}}}}}}};var vp=function(e){return e.foldl1};var BH=Qr();var Ym={unfoldr1:ET(Ha)(BH)(Pn)(on)};var UH=Qr(),ra=function(e){return e.unfoldr};var oc={unfoldr:ST(Ha)(UH)(Pn)(on),Unfoldable10:function(){return Ym}};var QH=Qr();var XH=me(jt);var gp=function(){return Cm(be(G.value))(function(e){return function(t){return new z({head:e,tail:t})}})}();var tg=function(){return Cm(be(G.value))(function(e){return function(t){return new z(t)}})}();var FT=function(e){return oE(e)(function(t){if(t instanceof pe)return 1;if(t instanceof Ie)return 0;if(t instanceof fe)return-1;throw new Error("Failed pattern match at Data.Array (line 870, column 31 - line 873, column 11): "+[t.constructor.name])})};var ng=function(e){var t=Te(e);return function(n){return FT(t)(n)}};var ic=function(e){return[e]},xT=function(e){return Kr(e)===0};var AT=function(){return tE(z.create)(G.value)}();var yp=function(e){return AT(e)(0)};var Dp=function(e){return eE(Nt(e))};var IT=function(){return nE(z.create)(G.value)}();var rg=function(e){return function(t){var n=e<1;return n?t:Ud(e)(Kr(t))(t)}};var RT=function(){return rE(z.create)(G.value)}(),og=function(e){return function(t){return function(n){return n.length===0?[]:tt(n)(function(c){return QH(RT(c)(n))})(IT(e(t))(n))}}};var yn=function(e){return function(t){return XH([e])(t)}};var ag=Oe(ae(gi)),oa=function(e){return ag(function(){var t=tt([])(ic);return function(n){return t(e(n))}}())};var YH=function(){function e(a){this.fn=a}var t={},n=function(a,p){this.head=a,this.tail=p};function c(a){return new n(a,t)}function v(a){return function(p){return new n(a,p)}}function s(a){for(var p=[],u=a;u!==t;)p.push(u.head),u=u.tail;return p}return function(a){return function(p){return function(u){var r=function(l,d){return a(p(v)(u(l)))(d)},i=function(l,d,f){if(d===0)return l;var o=f[d-1];return new e(function(){var h=i(r(o,l),d-1,f);return h})};return function(l){for(var d=p(c)(u(l[l.length-1])),f=i(d,l.length-1,l);f instanceof e;)f=f.fn();return p(s)(f)}}}}}();var Jn=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var bp=function(e){var t=$r(e);return function(n){return new Jn(n,t)}};var wp=function(e){var t=bn(e.Plus1().Alt0()),n=ee(e.Applicative0());return function(c){return t(n(c.value0))(c.value1)}};var uc=function(e){var t=V(e);return{map:function(n){return function(c){return new Jn(n(c.value0),t(n)(c.value1))}}}};var Ul=function(e){var t=Wt(e),n=Ht(e),c=Nt(e);return{foldMap:function(v){var s=me(v.Semigroup0()),a=t(v);return function(p){return function(u){return s(p(u.value0))(a(p)(u.value1))}}},foldl:function(v){return function(s){return function(a){return n(v)(v(s)(a.value0))(a.value1)}}},foldr:function(v){return function(s){return function(a){return v(a.value0)(c(v)(s)(a.value1))}}}}};var cg=function(e){var t=Ht(e),n=Nt(e),c=Ul(e);return{foldMap1:function(v){var s=me(v);return function(a){return function(p){return t(function(u){return function(r){return s(u)(a(r))}})(a(p.value0))(p.value1)}}},foldr1:function(v){return function(s){return tt(s.value0)(v(s.value0))(n(function(a){var p=tt(a)(v(a));return function(u){return z.create(p(u))}})(G.value)(s.value1))}},foldl1:function(v){return function(s){return t(v)(s.value0)(s.value1)}},Foldable0:function(){return c}}};var OT=function(e){return function(t){return function(n){return(n|0)===n?e(n):t}}},jn=function(e){return e};var Sp=function(e){return function(t){return t.toString(e)}};var Ep=isFinite;var ql=Math.abs;var zl=function(e){return function(t){return e%t}},fg=Math.round;var PT=Yo(jd),NT=$a(jd);var dg=16;var pg=function(){return OT(z.create)(G.value)}(),mP=function(e){if(!Ep(e))return 0;if(e>=jn(PT))return PT;if(e<=jn(NT))return NT;if(en)return Mn(0)(pg(e));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[e.constructor.name])},sc=function(e){return mP(fg(e))};var gP=typeof Array.from=="function",Fee=typeof Symbol<"u"&&Symbol!=null&&typeof Symbol.iterator<"u"&&typeof String.prototype[Symbol.iterator]=="function",xee=typeof String.prototype.fromCodePoint=="function",yP=typeof String.prototype.codePointAt=="function",BT=function(e){return yP?function(t){return t.codePointAt(0)}:e};var WT=function(e){return function(t){return gP?function(n){return Array.from(n,t)}:e}};function xi(e){return e.charCodeAt(0)}function UT(e){return String.fromCharCode(e)}var Vl={Applicative0:function(){return Js},Plus1:function(){return nT}};var qT=$a(Ml),zT=Yo(Ml);var VT=function(e){return e.fromEnum};var Ai=function(e){return function(t){return function(n){return e(t(n)+1|0)}}},Ii=function(e){return function(t){return function(n){return e(t(n)-1|0)}}};var hg=function(e){return e>=xi(qT)&&e<=xi(zT)?new z(UT(e)):G.value},EP={succ:Ai(hg)(xi),pred:Ii(hg)(xi),Ord0:function(){return Gd}};var GT=function(){return{cardinality:xi(zT)-xi(qT)|0,toEnum:hg,fromEnum:xi,Bounded0:function(){return Ml},Enum1:function(){return EP}}}();var Gu=function(e){return e.length};var Tp=function(e){return function(t){return t.substr(0,e)}},lc=function(e){return function(t){return t.substring(e)}};var Ri=function(e){return function(t){if(e>=0&&e<t.length)return t.charAt(e);throw new Error("Data.String.Unsafe.charAt: Invalid index.")}};var KT=function(e){return function(t){return lc(Gu(t)-e|0)(t)}};var Mp=function(e){return function(t){return Tp(Gu(t)-e|0)(t)}};var _g=function(e){return function(t){return t.split(e)}};var to=function(e){return function(t){return t.join(e)}};var ZT=function(e){return e===""};var Jl=VT(GT),$P=V(Tt),kP=ra(oc);var t1=function(e){return function(t){return(((e-55296|0)*1024|0)+(t-56320|0)|0)+65536|0}};var n1=function(e){return 56320<=e&&e<=57343},r1=function(e){return 55296<=e&&e<=56319},OP=function(e){var t=Gu(e);if(t===0)return G.value;if(t===1)return new z({head:Jl(Ri(0)(e)),tail:""});var n=Jl(Ri(1)(e)),c=Jl(Ri(0)(e)),v=r1(c)&&n1(n);return v?new z({head:t1(c)(n),tail:lc(2)(e)}):new z({head:c,tail:lc(1)(e)})},HP=function(e){return $P(function(t){return new ne(t.head,t.tail)})(OP(e))},PP=function(e){return kP(HP)(e)},NP=function(e){var t=Jl(Ri(0)(e)),n=r1(t)&&Gu(e)>1;if(n){var c=Jl(Ri(1)(e)),v=n1(c);return v?t1(t)(c):t}return t},BP=BT(NP),WP=WT(PP)(BP),Ju=function(e){return Kr(WP(e))};var vg=Sm(wn),o1=Tl(wn),a1=Jd(wn);var mg=Sm(Qs);var i1=Fe(Mo);var u1=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),s1=function(e){return function(t){return zl(zl(e)(t)+t)(t)}},GP=function(e){return function(t){return function(n){return function(c){var v=vg(0)(255)(e),s=jn(v)/255,a=vg(0)(255)(t),p=jn(a)/255,u=vg(0)(255)(n),r=o1(o1(v)(a))(u),i=a1(a1(v)(a))(u),l=r-i|0,d=jn(l)/255,f=jn(r+i|0)/(255*2),o=function(){if(l===0)return 0;if(en)return d/(1-ql(2*f-1));throw new Error("Failed pattern match at Color (line 160, column 3 - line 162, column 64): "+[])}(),h=jn(u)/255,_=function(y){if(y===0)return 0;if(r===v)return s1((p-h)/d)(6);if(r===a)return(h-s)/d+2;if(en)return(s-p)/d+4;throw new Error("Failed pattern match at Color (line 150, column 3 - line 150, column 15): "+[y.constructor.name])},m=60*_(l);return new u1(m,o,f,c)}}}},ju=function(e){return function(t){return function(n){return GP(e)(t)(n)(1)}}};var JP=function(e){return function(t){return function(n){return function(c){var v=mg(0)(1)(t),s=mg(0)(1)(n),a=mg(0)(1)(c);return new u1(e,v,s,a)}}}};var c1=function(e){return function(t){return function(n){return JP(e)(t)(n)(1)}}},l1=c1(0)(0)(1);var f1=function(e){var t=function(p){return i1(jn(sc(100*p))/100)},n=t(e.value1*100)+"%",c=t(e.value2*100)+"%",v=t(e.value0),s=i1(e.value3),a=e.value3===1;return a?"hsl("+(v+(", "+(n+(", "+(c+")"))))):"hsla("+(v+(", "+(n+(", "+(c+(", "+(s+")")))))))};var jP=function(e){var t=e===360;return t?e:s1(e)(360)};var KP=function(e){var t=jP(e.value0)/60,n=(1-ql(2*e.value2-1))*e.value1,c=e.value2-n/2,v=n*(1-ql(zl(t)(2)-1)),s=function(){if(t<1)return{r:n,g:v,b:0};if(1<=t&&t<2)return{r:v,g:n,b:0};if(2<=t&&t<3)return{r:0,g:n,b:v};if(3<=t&&t<4)return{r:0,g:v,b:n};if(4<=t&&t<5)return{r:v,g:0,b:n};if(en)return{r:n,g:0,b:v};throw new Error("Failed pattern match at Color (line 356, column 3 - line 362, column 43): "+[])}();return{r:s.r+c,g:s.g+c,b:s.b+c,a:e.value3}};var QP=function(e){var t=KP(e),n=sc(255*t.g),c=sc(255*t.r),v=sc(255*t.b);return{r:c,g:n,b:v,a:t.a}};var pc=function(e){var t=function(v){var s=Sp(dg)(v),a=Ju(s)===1;return a?"0"+s:s},n=QP(e),c=function(){if(n.a===1)return"";if(en)return t(sc(255*n.a));throw new Error("Failed pattern match at Color (line 429, column 3 - line 431, column 46): "+[])}();return"#"+(t(n.r)+(t(n.g)+(t(n.b)+c)))};var gg=c1(0)(0)(0);var Ye=function(){function e(){}return e.value=new e,e}(),Re=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),yg=function(e){return e},nN=function(e){return new Re(e.value0,e.value1)};var rN=function(e){var t=function(n){return function(c){var v=n,s=!1,a;function p(u,r){if(r instanceof Re&&r.value1 instanceof Re&&r.value1.value1 instanceof Re){v=new Re(r,u),c=r.value1.value1.value1;return}var i=function(d){return d instanceof Re&&d.value1 instanceof Re&&d.value1.value1 instanceof Ye?new Re(e(d.value0),new Re(e(d.value1.value0),Ye.value)):d instanceof Re&&d.value1 instanceof Ye?new Re(e(d.value0),Ye.value):Ye.value},l=function(d){return function(f){var o=d,h=!1,_;function m(y,C){if(y instanceof Re&&y.value0 instanceof Re&&y.value0.value1 instanceof Re&&y.value0.value1.value1 instanceof Re){o=y.value1,f=new Re(e(y.value0.value0),new Re(e(y.value0.value1.value0),new Re(e(y.value0.value1.value1.value0),C)));return}return h=!0,C}for(;!h;)_=m(o,f);return _}};return s=!0,l(u)(i(r))}for(;!s;)a=p(v,c);return a}};return t(Ye.value)},Dg={map:rN};var kr={foldr:function(e){return function(t){var n=function(){var v=function(s){return function(a){var p=s,u=!1,r;function i(l,d){if(d instanceof Ye)return u=!0,l;if(d instanceof Re){p=new Re(d.value0,l),a=d.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[l.constructor.name,d.constructor.name])}for(;!u;)r=i(p,a);return r}};return v(Ye.value)}(),c=Ht(kr)(Oe(e))(t);return function(v){return c(n(v))}}},foldl:function(e){var t=function(n){return function(c){var v=n,s=!1,a;function p(u,r){if(r instanceof Ye)return s=!0,u;if(r instanceof Re){v=e(u)(r.value0),c=r.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[r.constructor.name])}for(;!s;)a=p(v,c);return a}};return t},foldMap:function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return Ht(kr)(function(v){var s=t(v);return function(a){return s(c(a))}})(n)}}};var oN=Nt(kr);var Lp={append:function(e){return function(t){return oN(Re.create)(t)(e)}}},v1=me(Lp);var m1={append:function(e){return function(t){return new Jn(e.value0,v1(e.value1)(nN(t)))}}};var aN={alt:v1,Functor0:function(){return Dg}},g1=function(){return{empty:Ye.value,Alt0:function(){return aN}}}();var Ku=function(){var e=function(t){return function(n){var c=t,v=!1,s;function a(p,u){if(u instanceof Ye)return v=!0,p;if(u instanceof Re){c=new Re(u.value0,p),n=u.value1;return}throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): "+[p.constructor.name,u.constructor.name])}for(;!v;)s=a(c,n);return s}};return e(Ye.value)}();var w1=function(e){return e instanceof Ye};var Fp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var E1=function(e){var t=!1,n;function c(v){if(v.value0 instanceof Ye&&v.value1 instanceof Ye)return t=!0,G.value;if(v.value0 instanceof Ye){e=new Fp(Ku(v.value1),Ye.value);return}if(v.value0 instanceof Re)return t=!0,new z(new ne(v.value0.value0,new Fp(v.value0.value1,v.value1)));throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): "+[v.constructor.name])}for(;!t;)n=c(e);return n},T1=function(e){return function(t){return new Fp(e.value0,new Re(t,e.value1))}};var M1=function(e){return e.value0 instanceof Ye&&e.value1 instanceof Ye};var L1=function(){return new Fp(Ye.value,Ye.value)}();var _c=function(){function e(){}return e.value=new e,e}(),xp=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var F1=function(e){return function(t){if(e instanceof _c)return t;if(t instanceof _c)return e;if(e instanceof xp)return new xp(e.value0,T1(e.value1)(t));throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): "+[e.constructor.name,t.constructor.name])}},pN=function(e){return function(t){return function(n){var c=function(s){return function(a){return function(p){var u=s,r=a,i=!1,l;function d(f,o,h){if(h instanceof Ye)return i=!0,o;if(h instanceof Re){u=f,r=f(o)(h.value0),p=h.value1;return}throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): "+[f.constructor.name,o.constructor.name,h.constructor.name])}for(;!i;)l=d(u,r,p);return l}}},v=function(s){return function(a){var p=s,u=!1,r;function i(l,d){var f=E1(l);if(f instanceof G)return u=!0,c(function(o){return function(h){return h(o)}})(t)(d);if(f instanceof z){p=f.value0.value1,a=new Re(e(f.value0.value0),d);return}throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): "+[f.constructor.name])}for(;!u;)r=i(p,a);return r}};return v(n)(Ye.value)}}},x1=function(e){if(e instanceof _c)return G.value;if(e instanceof xp)return new z(new ne(e.value0,function(){var t=M1(e.value1);return t?_c.value:pN(F1)(_c.value)(e.value1)}()));throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): "+[e.constructor.name])};var A1=function(){return _c.value}(),I1=F1;var R1={append:I1};var $1=function(e){return function(t){return I1(e)(new xp(t,L1))}};var _N=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},vN=me(R1);var Cg=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Kl=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ql=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),k1=function(e){var t=!1,n;function c(v){var s=function(u){return u},a=function(u){return function(r){return new Cg(u.value0,vN(u.value1)(r))}};if(v.value0 instanceof Kl){var p=x1(v.value1);if(p instanceof G)return t=!0,new Kl(v.value0.value0);if(p instanceof z){e=a(s(p.value0.value0)(v.value0.value0))(p.value0.value1);return}throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): "+[p.constructor.name])}if(v.value0 instanceof Ql)return t=!0,new Ql(v.value0.value0,function(u){return a(v.value0.value1(u))(v.value1)});throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): "+[v.value0.constructor.name])}for(;!t;)n=c(e);return n},ia=function(e){var t=V(e);return function(n){var c=n.Monad0(),v=V(c.Bind1().Apply0().Functor0()),s=ee(c.Applicative0()),a=ar(n);return function(p){var u=function(r){var i=k1(r);if(i instanceof Kl)return v(rn.create)(s(i.value0));if(i instanceof Ql)return v(hn.create)(p(t(i.value1)(i.value0)));throw new Error("Failed pattern match at Control.Monad.Free (line 194, column 10 - line 196, column 37): "+[i.constructor.name])};return a(u)}}};var O1=function(e){return new Cg(e,A1)};var vc={Applicative0:function(){return Dr},Bind1:function(){return Kn}},Ua={map:function(e){return function(t){return ln(Kn)(function(){var n=ee(Dr);return function(c){return n(e(c))}}())(t)}}},Kn={bind:function(e){return function(t){return new Cg(e.value0,$1(e.value1)(t))}},Apply0:function(){return bg(0)}},Dr={pure:function(e){return O1(Kl.create(e))},Apply0:function(){return bg(0)}},bg=_N("freeApply","Control.Monad.Free",function(){return{apply:qn(vc),Functor0:function(){return Ua}}}),Ap=bg(77);var mN=ee(Dr);var mt=function(e){return O1(new Ql(e,function(t){return mN(t)}))};var H1=function(e){var t=e.Monad0(),n=V(t.Bind1().Apply0().Functor0()),c=ee(t.Applicative0()),v=ar(e);return function(s){var a=function(p){var u=k1(p);if(u instanceof Kl)return n(rn.create)(c(u.value0));if(u instanceof Ql)return n(function(r){return hn.create(u.value1(r))})(s(u.value0));throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): "+[u.constructor.name])};return v(a)}};var no=function(e){return e.state},mc=function(e){var t=no(e);return function(n){return t(function(c){return new ne(void 0,n)})}},Qn=function(e){var t=no(e);return function(n){return t(function(c){return new ne(void 0,n(c))})}},Xu=function(e){var t=no(e);return function(n){return t(function(c){var v=n(c);return new ne(v,v)})}},Yu=function(e){var t=no(e);return function(n){return t(function(c){return new ne(n(c),c)})}},ro=function(e){return no(e)(function(t){return new ne(t,t)})};var yN={dimap:function(e){return function(t){return function(n){return function(c){return n(e(c))}}}}},$i={first:function(e){return function(t){return e(Pn(t))}},second:function(e){return function(t){return e(on(t))}},Profunctor0:function(){return yN}};var Ip={dimap:function(e){return function(t){return function(n){return function(c){return t(n(e(c)))}}}}},Zu=function(e){return e.dimap};var go={first:function(e){return function(t){return new ne(e(t.value0),t.value1)}},second:V(Wa),Profunctor0:function(){return Ip}},es=function(e){return e.second},gc=function(e){return e.first};var xN=fn(),AN=ye(Ce);var IN=function(e){return xN(e(AN))},br=function(e){return function(t){return IN(t)(e)}};var $p=function(e){return e},Hr=function(e){return function(t){return $p(e)(be(t))}};var Nn=function(){var e={},t="Pure",n="Throw",c="Catch",v="Sync",s="Async",a="Bind",p="Bracket",u="Fork",r="Sequential",i="Map",l="Apply",d="Alt",f="Cons",o="Resume",h="Release",_="Finalizer",m="Finalized",y="Forked",C="Fiber",E="Thunk";function D(N,K,O,B){this.tag=N,this._1=K,this._2=O,this._3=B}function g(N){var K=function(O,B,W){return new D(N,O,B,W)};return K.tag=N,K}function b(N){return new D(t,void 0)}function L(N){try{N()}catch(K){setTimeout(function(){throw K},0)}}function S(N,K,O){try{return K(O())}catch(B){return N(B)}}function T(N,K,O){try{return K(O)()}catch(B){return O(N(B))(),b}}var M=function(){var N=1024,K=0,O=0,B=new Array(N),W=!1;function P(){var X;for(W=!0;K!==0;)K--,X=B[O],B[O]=void 0,O=(O+1)%N,X();W=!1}return{isDraining:function(){return W},enqueue:function(X){var J,ve;K===N&&(ve=W,P(),W=ve),B[(O+K)%N]=X,K++,W||P()}}}();function w(N){var K={},O=0,B=0;return{register:function(W){var P=O++;W.onComplete({rethrow:!0,handler:function(X){return function(){B--,delete K[P]}}})(),K[P]=W,B++},isEmpty:function(){return B===0},killAll:function(W,P){return function(){if(B===0)return P();var X=0,J={};function ve(De){J[De]=K[De].kill(W,function(se){return function(){delete J[De],X--,N.isLeft(se)&&N.fromLeft(se)&&setTimeout(function(){throw N.fromLeft(se)},0),X===0&&P()}})()}for(var Ee in K)K.hasOwnProperty(Ee)&&(X++,ve(Ee));return K={},O=0,B=0,function(De){return new D(v,function(){for(var se in J)J.hasOwnProperty(se)&&J[se]()})}}}}}var F=0,x=1,R=2,A=3,I=4,$=5,k=6;function H(N,K,O){var B=0,W=F,P=O,X=null,J=null,ve=null,Ee=null,De=null,se=0,we=0,bt=null,Jt=!0;function Bt(le){for(var oe,j,ie;;)switch(oe=null,j=null,ie=null,W){case R:W=x;try{P=ve(P),Ee===null?ve=null:(ve=Ee._1,Ee=Ee._2)}catch(Be){W=$,X=N.left(Be),P=null}break;case A:N.isLeft(P)?(W=$,X=P,P=null):ve===null?W=$:(W=R,P=N.fromRight(P));break;case x:switch(P.tag){case a:ve&&(Ee=new D(f,ve,Ee)),ve=P._2,W=x,P=P._1;break;case t:ve===null?(W=$,P=N.right(P._1)):(W=R,P=P._1);break;case v:W=A,P=S(N.left,N.right,P._1);break;case s:W=I,P=T(N.left,P._1,function(Be){return function(){B===le&&(B++,M.enqueue(function(){B===le+1&&(W=A,P=Be,Bt(B))}))}});return;case n:W=$,X=N.left(P._1),P=null;break;case c:ve===null?De=new D(f,P,De,J):De=new D(f,P,new D(f,new D(o,ve,Ee),De,J),J),ve=null,Ee=null,W=x,P=P._1;break;case p:se++,ve===null?De=new D(f,P,De,J):De=new D(f,P,new D(f,new D(o,ve,Ee),De,J),J),ve=null,Ee=null,W=x,P=P._1;break;case u:W=A,oe=H(N,K,P._2),K&&K.register(oe),P._1&&oe.run(),P=N.right(oe);break;case r:W=x,P=q(N,K,P._1);break}break;case $:if(ve=null,Ee=null,De===null)W=k,P=J||X||P;else switch(oe=De._3,ie=De._1,De=De._2,ie.tag){case c:J&&J!==oe&&se===0?W=$:X&&(W=x,P=ie._2(N.fromLeft(X)),X=null);break;case o:J&&J!==oe&&se===0||X?W=$:(ve=ie._1,Ee=ie._2,W=R,P=N.fromRight(P));break;case p:se--,X===null&&(j=N.fromRight(P),De=new D(f,new D(h,ie._2,j),De,oe),(J===oe||se>0)&&(W=x,P=ie._3(j)));break;case h:De=new D(f,new D(m,P,X),De,J),W=x,J&&J!==oe&&se===0?P=ie._1.killed(N.fromLeft(J))(ie._2):X?P=ie._1.failed(N.fromLeft(X))(ie._2):P=ie._1.completed(N.fromRight(P))(ie._2),X=null,se++;break;case _:se++,De=new D(f,new D(m,P,X),De,J),W=x,P=ie._1;break;case m:se--,W=$,P=ie._1,X=ie._2;break}break;case k:for(var de in bt)bt.hasOwnProperty(de)&&(Jt=Jt&&bt[de].rethrow,L(bt[de].handler(P)));bt=null,J&&X?setTimeout(function(){throw N.fromLeft(X)},0):N.isLeft(P)&&Jt&&setTimeout(function(){if(Jt)throw N.fromLeft(P)},0);return;case F:W=x;break;case I:return}}function Ze(le){return function(){if(W===k)return Jt=Jt&&le.rethrow,le.handler(P)(),function(){};var oe=we++;return bt=bt||{},bt[oe]=le,function(){bt!==null&&delete bt[oe]}}}function ce(le,oe){return function(){if(W===k)return oe(N.right(void 0))(),function(){};var j=Ze({rethrow:!1,handler:function(){return oe(N.right(void 0))}})();switch(W){case F:J=N.left(le),W=k,P=J,Bt(B);break;case I:J===null&&(J=N.left(le)),se===0&&(W===I&&(De=new D(f,new D(_,P(le)),De,J)),W=$,P=null,X=null,Bt(++B));break;default:J===null&&(J=N.left(le)),se===0&&(W=$,P=null,X=null)}return j}}function he(le){return function(){var oe=Ze({rethrow:!1,handler:le})();return W===F&&Bt(B),oe}}return{kill:ce,join:he,onComplete:Ze,isSuspended:function(){return W===F},run:function(){W===F&&(M.isDraining()?Bt(B):M.enqueue(function(){Bt(B)}))}}}function U(N,K,O,B){var W=0,P={},X=0,J={},ve=new Error("[ParAff] Early exit"),Ee=null,De=e;function se(Ze,ce,he){var le=ce,oe=null,j=null,ie=0,de={},Be,nt;e:for(;;)switch(Be=null,le.tag){case y:if(le._3===e&&(Be=P[le._1],de[ie++]=Be.kill(Ze,function(ct){return function(){ie--,ie===0&&he(ct)()}})),oe===null)break e;le=oe._2,j===null?oe=null:(oe=j._1,j=j._2);break;case i:le=le._2;break;case l:case d:oe&&(j=new D(f,oe,j)),oe=le,le=le._1;break}if(ie===0)he(N.right(void 0))();else for(nt=0,Be=ie;nt<Be;nt++)de[nt]=de[nt]();return de}function we(Ze,ce,he){var le,oe,j,ie,de,Be;N.isLeft(Ze)?(le=Ze,oe=null):(oe=Ze,le=null);e:for(;;){if(j=null,ie=null,de=null,Be=null,Ee!==null)return;if(ce===null){B(le||oe)();return}if(ce._3!==e)return;switch(ce.tag){case i:le===null?(ce._3=N.right(ce._1(N.fromRight(oe))),oe=ce._3):ce._3=le;break;case l:if(j=ce._1._3,ie=ce._2._3,le){if(ce._3=le,de=!0,Be=X++,J[Be]=se(ve,le===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?we(le,null,null):we(le,he._1,he._2)}}),de){de=!1;return}}else{if(j===e||ie===e)return;oe=N.right(N.fromRight(j)(N.fromRight(ie))),ce._3=oe}break;case d:if(j=ce._1._3,ie=ce._2._3,j===e&&N.isLeft(ie)||ie===e&&N.isLeft(j))return;if(j!==e&&N.isLeft(j)&&ie!==e&&N.isLeft(ie))le=oe===j?ie:j,oe=null,ce._3=le;else if(ce._3=oe,de=!0,Be=X++,J[Be]=se(ve,oe===j?ce._2:ce._1,function(){return function(){delete J[Be],de?de=!1:he===null?we(oe,null,null):we(oe,he._1,he._2)}}),de){de=!1;return}break}he===null?ce=null:(ce=he._1,he=he._2)}}function bt(Ze){return function(ce){return function(){delete P[Ze._1],Ze._3=ce,we(ce,Ze._2._1,Ze._2._2)}}}function Jt(){var Ze=x,ce=O,he=null,le=null,oe,j;e:for(;;)switch(oe=null,j=null,Ze){case x:switch(ce.tag){case i:he&&(le=new D(f,he,le)),he=new D(i,ce._1,e,e),ce=ce._2;break;case l:he&&(le=new D(f,he,le)),he=new D(l,e,ce._2,e),ce=ce._1;break;case d:he&&(le=new D(f,he,le)),he=new D(d,e,ce._2,e),ce=ce._1;break;default:j=W++,Ze=$,oe=ce,ce=new D(y,j,new D(f,he,le),e),oe=H(N,K,oe),oe.onComplete({rethrow:!1,handler:bt(ce)})(),P[j]=oe,K&&K.register(oe)}break;case $:if(he===null)break e;he._1===e?(he._1=ce,Ze=x,ce=he._2,he._2=e):(he._2=ce,ce=he,le===null?he=null:(he=le._1,le=le._2))}for(De=ce,j=0;j<W;j++)P[j].run()}function Bt(Ze,ce){Ee=N.left(Ze);var he;for(var le in J)if(J.hasOwnProperty(le)){he=J[le];for(le in he)he.hasOwnProperty(le)&&he[le]()}J=null;var oe=se(Ze,De,ce);return function(j){return new D(s,function(ie){return function(){for(var de in oe)oe.hasOwnProperty(de)&&oe[de]();return b}})}}return Jt(),function(Ze){return new D(s,function(ce){return function(){return Bt(Ze,ce)}})}}function q(N,K,O){return new D(s,function(B){return function(){return U(N,K,O,B)}})}return D.EMPTY=e,D.Pure=g(t),D.Throw=g(n),D.Catch=g(c),D.Sync=g(v),D.Async=g(s),D.Bind=g(a),D.Bracket=g(p),D.Fork=g(u),D.Seq=g(r),D.ParMap=g(i),D.ParApply=g(l),D.ParAlt=g(d),D.Fiber=H,D.Supervisor=w,D.Scheduler=M,D.nonCanceler=b,D}(),j1=Nn.Pure,K1=Nn.Throw;function Q1(e){return function(t){return Nn.Catch(e,t)}}function X1(e){return function(t){return t.tag===Nn.Pure.tag?Nn.Pure(e(t._1)):Nn.Bind(t,function(n){return Nn.Pure(e(n))})}}function Y1(e){return function(t){return Nn.Bind(e,t)}}function Eg(e){return function(t){return Nn.Fork(e,t)}}var Z1=Nn.Sync;function eM(e){return function(t){return Nn.ParMap(e,t)}}function tM(e){return function(t){return Nn.ParApply(e,t)}}var Ao=Nn.Async;function kp(e){return function(t){return function(n){return Nn.Bracket(e,t,n)}}}function nM(e,t){return function(){return Nn.Fiber(e,null,t)}}var RN=function(){function e(n,c){return n===0&&typeof setImmediate<"u"?setImmediate(c):setTimeout(c,n)}function t(n,c){return n===0&&typeof clearImmediate<"u"?clearImmediate(c):clearTimeout(c)}return function(n,c){return Nn.Async(function(v){return function(){var s=e(c,v(n()));return function(){return Nn.Sync(function(){return n(t(c,s))})}}})}}(),rM=Nn.Seq;function Rn(e){return new Error(e)}function Pr(e){return function(){throw e}}function Op(e){return function(t){return function(){try{return t()}catch(n){return n instanceof Error||Object.prototype.toString.call(n)==="[object Error]"?e(n)():e(new Error(n.toString()))()}}}}var oM=function(e){return Pr(Rn(e))};var wr=function(e){return e.throwError};var HN={throwError:Pr,Monad0:function(){return ta}};var aM={catchError:Oe(Op),MonadThrow0:function(){return HN}};var ca=function(e){return e.catchError};var Xl=function(e){var t=ca(e),n=e.MonadThrow0().Monad0(),c=V(n.Bind1().Apply0().Functor0()),v=ee(n.Applicative0());return function(s){return t(c(He.create)(s))(function(a){return v(qe.create(a))})}};var Sr=function(e){return e.ask};var ht=function(e){return e.lift};var Hp={liftEffect:ye(Ce),Monad0:function(){return ta}},Je=function(e){return e.liftEffect};var qa=function(e){return e.tell};var WN=V(bi);var Tg=function(e){return e};var Mg=function(e){return e};var Pp=function(e){return function(t){return e(t)}},Np=function(e){var t=V(e);return{map:function(n){return Pp(t(WN(n)))}}};var Lg=function(e){return{Applicative0:function(){return rf(e)},Bind1:function(){return Bp(e)}}},Bp=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(gn(function(s){return n(qe.create(s))})(function(s){var a=v(s);return a}))}},Apply0:function(){return uM(e)}}},uM=function(e){var t=Np(e.Bind1().Apply0().Functor0());return{apply:qn(Lg(e)),Functor0:function(){return t}}},rf=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return Tg(t(He.create(n)))}}(),Apply0:function(){return uM(e)}}};var sM=function(e){var t=Lg(e);return{throwError:function(){var n=ee(e.Applicative0());return function(c){return Tg(n(qe.create(c)))}}(),Monad0:function(){return t}}};var cM=function(e){var t=me(e);return function(n){var c=n.Bind1(),v=ae(c),s=ee(n.Applicative0()),a=Np(c.Apply0().Functor0());return{alt:function(p){return function(u){return v(p)(function(r){if(r instanceof He)return s(new He(r.value0));if(r instanceof qe)return v(u)(function(i){if(i instanceof He)return s(new He(i.value0));if(i instanceof qe)return s(new qe(t(r.value0)(i.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[i.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[r.constructor.name])})}},Functor0:function(){return a}}}};var UN=V(Tt);var Fg=function(e){return e},lM=function(e){return e};var Wp={lift:function(e){var t=uE(e)(z.create);return function(n){return Fg(t(n))}}},qN=ht(Wp);var zN=function(e){var t=V(e);return{map:function(n){return function(c){return t(UN(n))(c)}}}},Up=function(e){return{Applicative0:function(){return Ag(e)},Bind1:function(){return xg(e)}}},xg=function(e){var t=ae(e.Bind1()),n=ee(e.Applicative0());return{bind:function(c){return function(v){return t(c)(function(s){if(s instanceof G)return n(G.value);if(s instanceof z){var a=v(s.value0);return a}throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 54, column 11 - line 56, column 42): "+[s.constructor.name])})}},Apply0:function(){return fM(e)}}},fM=function(e){var t=zN(e.Bind1().Apply0().Functor0());return{apply:qn(Up(e)),Functor0:function(){return t}}},Ag=function(e){return{pure:function(){var t=ee(e.Applicative0());return function(n){return Fg(t(z.create(n)))}}(),Apply0:function(){return fM(e)}}};var dM=function(e){var t=ar(e),n=e.Monad0(),c=ae(n.Bind1()),v=ee(n.Applicative0()),s=Up(n);return{tailRecM:function(a){var p=t(function(u){var r=a(u);return c(r)(function(i){return v(function(){if(i instanceof G)return new rn(G.value);if(i instanceof z&&i.value0 instanceof hn)return new hn(i.value0.value0);if(i instanceof z&&i.value0 instanceof rn)return new rn(new z(i.value0.value0));throw new Error("Failed pattern match at Control.Monad.Maybe.Trans (line 82, column 16 - line 85, column 43): "+[i.constructor.name])}())})});return function(u){return Fg(p(u))}},Monad0:function(){return s}}},pM=function(e){var t=e.Monad0(),n=qN(t),c=no(e),v=Up(t);return{state:function(s){return n(c(s))},Monad0:function(){return v}}};var hM=function(e){return e};var sr=function(e){return e};var Cc={lift:function(e){return function(t){return hM(be(t))}}},VN=ht(Cc),_M=function(e){return function(t){return function(n){return e(t(n))}}},GN=function(e){return{map:function(){var t=V(e);return function(n){return _M(t(n))}}()}};var vM=function(e){var t=ut(e),n=GN(e.Functor0());return{apply:function(c){return function(v){return function(s){return t(c(s))(v(s))}}},Functor0:function(){return n}}},za=function(e){var t=ae(e),n=vM(e.Apply0());return{bind:function(c){return function(v){return function(s){return t(c(s))(function(a){var p=v(a);return p(s)})}}},Apply0:function(){return n}}};var bc=function(e){var t=vM(e.Apply0());return{pure:function(){var n=ee(e);return function(c){return hM(be(n(c)))}}(),Apply0:function(){return t}}},of=function(e){var t=bc(e.Applicative0()),n=za(e.Bind1());return{Applicative0:function(){return t},Bind1:function(){return n}}},Pi=function(e){var t=of(e);return{ask:ee(e.Applicative0()),Monad0:function(){return t}}};var fa=function(e){var t=e.Monad0(),n=of(t);return{liftEffect:function(){var c=VN(t),v=Je(e);return function(s){return c(v(s))}}(),Monad0:function(){return n}}},Ni=function(e){var t=e.Monad0(),n=ln(t.Bind1()),c=ee(t.Applicative0()),v=ar(e),s=of(t);return{tailRecM:function(a){return function(p){var u=function(r){return function(i){var l=a(i);return n(c)(l(r))}};return function(r){return v(u(r))(p)}}},Monad0:function(){return s}}};var Rg=function(e){return e},$g=function(e){return e};var qp=function(e){return function(t){return e(t)}},kg=function(e){var t=V(e);return{map:function(n){return qp(t(function(c){return new ne(n(c.value0),c.value1)}))}}};var zp=function(e){var t=me(e);return function(n){var c=ut(n),v=n.Functor0(),s=V(v),a=kg(v);return{apply:function(p){return function(u){var r=function(i){return function(l){return new ne(i.value0(l.value0),t(i.value1)(l.value1))}};return c(s(r)(p))(u)}},Functor0:function(){return a}}}},Og=function(e){var t=me(e),n=zp(e);return function(c){var v=ae(c),s=c.Apply0(),a=V(s.Functor0()),p=n(s);return{bind:function(u){return function(r){return v(u)(function(i){var l=r(i.value0);return a(function(d){return new ne(d.value0,t(i.value1)(d.value1))})(l)})}},Apply0:function(){return p}}}};var Hg=function(e){var t=at(e),n=zp(e.Semigroup0());return function(c){var v=ee(c),s=n(c.Apply0());return{pure:function(a){return v(new ne(a,t))},Apply0:function(){return s}}}},mM=function(e){var t=Hg(e),n=Og(e.Semigroup0());return function(c){var v=t(c.Applicative0()),s=n(c.Bind1());return{Applicative0:function(){return v},Bind1:function(){return s}}}};var gM=function(e){var t=e.Semigroup0(),n=mM(e);return function(c){var v=n(c);return{tell:function(){var s=ee(c.Applicative0()),a=ne.create(void 0);return function(p){return Rg(s(a(p)))}}(),Semigroup0:function(){return t},Monad1:function(){return v}}}};var wc=function(e){return e.sequential},Bi=function(e){return e.parallel};var XN=ye(Ce),YN=function(e){var t=wc(e),n=vt(e.Applicative1()),c=Bi(e);return function(v){var s=n(v);return function(a){var p=s(function(u){return c(a(u))});return function(u){return t(p(u))}}}};var Sc=function(e){var t=YN(e);return function(n){return t(n)(XN)}};var ts=function(e){return e()};var DM=function(e){return e()};var CM=function(e){throw new Error(e)};var bM=function(){return CM};var r5=bM(),o5=DM,Wi=function(e){return o5(function(){return r5(e)})};var wM=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},a5=ee(Xt),Wg=Et(Pe),SM=V(Pe);var i5=function(e){return e},EM=Eg(!1);var u5={map:eM},yo={map:X1},s5=V(yo),TM=Eg(!0),c5=function(){var e=function(c){if(c instanceof He)return c.value0;if(c instanceof qe)return Wi("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): "+[c.constructor.name])},t=function(c){if(c instanceof qe)return c.value0;if(c instanceof He)return Wi("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): "+[c.constructor.name])},n=function(c){if(c instanceof qe)return!0;if(c instanceof He)return!1;throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): "+[c.constructor.name])};return{isLeft:n,fromLeft:t,fromRight:e,left:qe.create,right:He.create}}(),MM=function(e){return nM(c5,e)},LM=function(e){return function(){var n=MM(e)();return n.run(),n}},Ug=function(e){return Wg(LM(e))};var l5=function(e){return function(t){return kp(e)({killed:be(t),failed:be(t),completed:be(t)})}},f5={apply:tM,Functor0:function(){return u5}};var ns={Applicative0:function(){return Do},Bind1:function(){return Sn}},Sn={bind:Y1,Apply0:function(){return FM(0)}},Do={pure:j1,Apply0:function(){return FM(0)}},FM=wM("applyAff","Effect.Aff",function(){return{apply:qn(ns),Functor0:function(){return yo}}});var jp=ee(Do),xM=ae(Sn);var d5=ln(Sn);var AM=function(e){return function(t){return l5(jp(void 0))(be(e))(be(t))}};var Ln={liftEffect:Z1,Monad0:function(){return ns}},Jp=Je(Ln),rs=function(e){return i5(be(Jp(e)))},af=function(e){return Ao(function(t){return SM(rs)(e.join(t))})},IM={map:function(e){return function(t){return ts(MM(s5(e)(af(t))))}}};var uf=function(e){return function(t){return xM(Jp(t.isSuspended))(function(n){return n?Jp(Wg(t.kill(e,be(a5(void 0))))):Ao(function(c){return SM(rs)(t.kill(e,c))})})}};var Kp={throwError:K1,Monad0:function(){return ns}},RM={catchError:Q1,MonadThrow0:function(){return Kp}},p5=Xl(RM);var h5=function(e){return function(t){return LM(d5(function(n){return Jp(e(n))})(p5(t)))}},sf=function(e){return function(t){return Wg(h5(e)(t))}};var Ui={parallel:Z,sequential:rM,Monad0:function(){return ns},Applicative1:function(){return $M(0)}},$M=wM("applicativeParAff","Effect.Aff",function(){return{pure:function(){var e=Bi(Ui);return function(t){return e(jp(t))}}(),Apply0:function(){return f5}}}),qg=$M(136);var _5=Sc(Ui)(Mt);var v5={append:function(e){return function(t){return function(n){return _5([e(n),t(n)])}}}};var os={tailRecM:function(e){var t=function(n){return xM(e(n))(function(c){if(c instanceof rn)return jp(c.value0);if(c instanceof hn)return t(c.value0);throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): "+[c.constructor.name])})};return t},Monad0:function(){return ns}};var zg=be(jp(void 0)),kM={mempty:zg,Semigroup0:function(){return v5}};var qi=function(){function e(){this.head=null,this.last=null,this.size=0}function t(i,l){this.queue=i,this.value=l,this.next=null,this.prev=null}function n(i){this.draining=!1,this.error=null,this.value=i,this.takes=new e,this.reads=new e,this.puts=new e}var c={};function v(i){try{i()}catch(l){setTimeout(function(){throw l},0)}}function s(i,l){var d=new t(i,l);switch(i.size){case 0:i.head=d;break;case 1:d.prev=i.head,i.head.next=d,i.last=d;break;default:d.prev=i.last,i.last.next=d,i.last=d}return i.size++,d}function a(i){var l;switch(i.size){case 0:return null;case 1:l=i.head,i.head=null;break;case 2:l=i.last,i.head.next=null,i.last=null;break;default:l=i.last,i.last=l.prev,i.last.next=null}return l.prev=null,l.queue=null,i.size--,l.value}function p(i){var l;switch(i.size){case 0:return null;case 1:l=i.head,i.head=null;break;case 2:l=i.head,i.last.prev=null,i.head=i.last,i.last=null;break;default:l=i.head,i.head=l.next,i.head.prev=null}return l.next=null,l.queue=null,i.size--,l.value}function u(i){if(i.queue!==null){if(i.queue.last===i){a(i.queue);return}if(i.queue.head===i){p(i.queue);return}i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.queue.size--,i.queue=null,i.value=null,i.next=null,i.prev=null}}function r(i,l){if(!l.draining){var d=l.puts,f=l.takes,o=l.reads,h,_,m,y,C;for(l.draining=!0;;){if(h=null,_=null,m=null,y=l.value,C=o.size,l.error!==null){for(y=i.left(l.error);h=p(d);)v(h.cb(y));for(;_=p(o);)v(_(y));for(;m=p(f);)v(m(y));break}if(y===c&&(h=p(d))&&(l.value=y=h.value),y!==c){for(m=p(f);C--&&(_=p(o));)v(_(i.right(y)));m!==null&&(l.value=c,v(m(i.right(y))))}if(h!==null&&v(h.cb(i.right(void 0))),l.value===c&&d.size===0||l.value!==c&&f.size===0)break}l.draining=!1}}return n.EMPTY=c,n.putLast=s,n.takeLast=a,n.takeHead=p,n.deleteCell=u,n.drainVar=r,n}();function Vg(){return new qi(qi.EMPTY)}function OM(e,t,n,c){return function(){var v=qi.putLast(n.puts,{cb:c,value:t});return qi.drainVar(e,n),function(){qi.deleteCell(v)}}}function HM(e,t,n){return function(){var c=qi.putLast(t.takes,n);return qi.drainVar(e,t),function(){qi.deleteCell(c)}}}var PM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),NM=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),BM=function(){function e(){}return e.value=new e,e}();var WM=function(){return{left:qe.create,right:He.create,nothing:G.value,just:z.create,killed:PM.create,filled:NM.create,empty:BM.value}}();var UM=function(e){return function(t){return function(n){return OM(WM,e,t,n)}}};var qM=function(e){return function(t){return HM(WM,e,t)}};var y5=Je(Ln);var Gg=function(e){return Ao(function(t){return function(){var c=qM(e)(t)();return rs(c)}})};var cf=function(e){return function(t){return Ao(function(n){return function(){var v=UM(e)(t)(n)();return rs(v)}})}};var lf=y5(Vg);var S5=function(e){var t=V(e);return{map:function(n){return function(c){return function(v){return t(function(s){return new ne(n(s.value0),s.value1)})(c(v))}}}}};var GM=function(e){return{Applicative0:function(){return Kg(e)},Bind1:function(){return E5(e)}}},E5=function(e){var t=ae(e.Bind1());return{bind:function(n){return function(c){return function(v){return t(n(v))(function(s){var a=c(s.value0);return a(s.value1)})}}},Apply0:function(){return JM(e)}}},JM=function(e){var t=S5(e.Bind1().Apply0().Functor0());return{apply:qn(GM(e)),Functor0:function(){return t}}},Kg=function(e){var t=ee(e.Applicative0());return{pure:function(n){return function(c){return t(new ne(n,c))}},Apply0:function(){return JM(e)}}};var jM=function(e){var t=ee(e.Applicative0()),n=GM(e);return{state:function(c){return function(v){return t(c(v))}},Monad0:function(){return n}}};var T5=ht(Cc);var Ec={liftAff:ye(Ce),MonadEffect0:function(){return Ln}},Xn=function(e){return e.liftAff};var Qp=function(e){var t=e.MonadEffect0(),n=fa(t);return{liftAff:function(){var c=T5(t.Monad0()),v=Xn(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}};var da=Z,Xg=Z;var M5=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var QM=function(e){return function(t){return da(function(n){return e(n.value0)(n.value1)})(t)}};var XM=function(e){return function(t){return Xg(new M5(e,t))}},Yg={map:function(e){return function(t){return da(function(n){return XM(function(c){return e(n.value0(c))})(n.value1)})(t)}}};var YM=XM(ye(Ce));var Xe=function(){function e(){}return e.value=new e,e}(),ot=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Ct=function(){function e(t,n,c,v,s,a,p){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a,this.value6=p}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(p){return new e(t,n,c,v,s,a,p)}}}}}}},e}(),zi=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Va=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Vi=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),pa=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),Gi=function(){function e(t,n,c,v,s,a){this.value0=t,this.value1=n,this.value2=c,this.value3=v,this.value4=s,this.value5=a}return e.create=function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return new e(t,n,c,v,s,a)}}}}}},e}(),Xp=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}();var Ga=function(e){var t=Te(e);return function(n){var c=function(v){var s=!1,a;function p(u){if(u instanceof Xe)return s=!0,G.value;if(u instanceof ot){var r=t(n)(u.value1);if(r instanceof Ie)return s=!0,new z(u.value2);if(r instanceof fe){v=u.value0;return}v=u.value3;return}if(u instanceof Ct){var i=t(n)(u.value1);if(i instanceof Ie)return s=!0,new z(u.value2);var l=t(n)(u.value4);if(l instanceof Ie)return s=!0,new z(u.value5);if(i instanceof fe){v=u.value0;return}if(l instanceof pe){v=u.value6;return}v=u.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[u.constructor.name])}for(;!s;)a=p(v);return a};return c}};var eL=function(e){return function(t){return function(n){var c=e,v=t,s=!1,a;function p(u,r,i){if(r instanceof Ye)return s=!0,i;if(r instanceof Re){if(r.value0 instanceof zi){c=u,v=r.value1,n=new ot(i,r.value0.value0,r.value0.value1,r.value0.value2);return}if(r.value0 instanceof Va){c=u,v=r.value1,n=new ot(r.value0.value0,r.value0.value1,r.value0.value2,i);return}if(r.value0 instanceof Vi){c=u,v=r.value1,n=new Ct(i,r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof pa){c=u,v=r.value1,n=new Ct(r.value0.value0,r.value0.value1,r.value0.value2,i,r.value0.value3,r.value0.value4,r.value0.value5);return}if(r.value0 instanceof Gi){c=u,v=r.value1,n=new Ct(r.value0.value0,r.value0.value1,r.value0.value2,r.value0.value3,r.value0.value4,r.value0.value5,i);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[r.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[r.constructor.name,i.constructor.name])}for(;!s;)a=p(c,v,n);return a}}},$o=function(e){var t=eL(e),n=Te(e);return function(c){return function(v){var s=function(p){return function(u){var r=p,i=!1,l;function d(f,o){if(f instanceof Ye)return i=!0,new ot(o.value0,o.value1,o.value2,o.value3);if(f instanceof Re){if(f.value0 instanceof zi)return i=!0,t(f.value1)(new Ct(o.value0,o.value1,o.value2,o.value3,f.value0.value0,f.value0.value1,f.value0.value2));if(f.value0 instanceof Va)return i=!0,t(f.value1)(new Ct(f.value0.value0,f.value0.value1,f.value0.value2,o.value0,o.value1,o.value2,o.value3));if(f.value0 instanceof Vi){r=f.value1,u=new Xp(new ot(o.value0,o.value1,o.value2,o.value3),f.value0.value0,f.value0.value1,new ot(f.value0.value2,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof pa){r=f.value1,u=new Xp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,o.value0),o.value1,o.value2,new ot(o.value3,f.value0.value3,f.value0.value4,f.value0.value5));return}if(f.value0 instanceof Gi){r=f.value1,u=new Xp(new ot(f.value0.value0,f.value0.value1,f.value0.value2,f.value0.value3),f.value0.value4,f.value0.value5,new ot(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[f.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[f.constructor.name,o.constructor.name])}for(;!i;)l=d(r,u);return l}},a=function(p){return function(u){var r=p,i=!1,l;function d(f,o){if(o instanceof Xe)return i=!0,s(f)(new Xp(Xe.value,c,v,Xe.value));if(o instanceof ot){var h=n(c)(o.value1);if(h instanceof Ie)return i=!0,t(f)(new ot(o.value0,c,v,o.value3));if(h instanceof fe){r=new Re(new zi(o.value1,o.value2,o.value3),f),u=o.value0;return}r=new Re(new Va(o.value0,o.value1,o.value2),f),u=o.value3;return}if(o instanceof Ct){var h=n(c)(o.value1);if(h instanceof Ie)return i=!0,t(f)(new Ct(o.value0,c,v,o.value3,o.value4,o.value5,o.value6));var _=n(c)(o.value4);if(_ instanceof Ie)return i=!0,t(f)(new Ct(o.value0,o.value1,o.value2,o.value3,c,v,o.value6));if(h instanceof fe){r=new Re(new Vi(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),f),u=o.value0;return}if(h instanceof pe&&_ instanceof fe){r=new Re(new pa(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),f),u=o.value3;return}r=new Re(new Gi(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),f),u=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[f.constructor.name,o.constructor.name])}for(;!i;)l=d(r,u);return l}};return a(Ye.value)}}},ey=function(e){var t=eL(e),n=Te(e);return function(c){var v=function(u){return function(r){var i=u,l=!1,d;function f(o,h){if(o instanceof Ye)return l=!0,h;if(o instanceof Re){if(o.value0 instanceof zi&&o.value0.value2 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value0,o.value0.value1,Xe.value));if(o.value0 instanceof Va&&o.value0.value0 instanceof Xe&&h instanceof Xe)return l=!0,t(o.value1)(new ot(Xe.value,o.value0.value1,o.value0.value2,Xe.value));if(o.value0 instanceof zi&&o.value0.value2 instanceof ot){i=o.value1,r=new Ct(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof Va&&o.value0.value0 instanceof ot){i=o.value1,r=new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h);return}return o.value0 instanceof zi&&o.value0.value2 instanceof Ct?(l=!0,t(o.value1)(new ot(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof Va&&o.value0.value0 instanceof Ct?(l=!0,t(o.value1)(new ot(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h)))):o.value0 instanceof Vi&&o.value0.value2 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Ct(Xe.value,o.value0.value0,o.value0.value1,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof pa&&o.value0.value0 instanceof Xe&&o.value0.value5 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Ct(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value3,o.value0.value4,Xe.value))):o.value0 instanceof Gi&&o.value0.value0 instanceof Xe&&o.value0.value3 instanceof Xe&&h instanceof Xe?(l=!0,t(o.value1)(new Ct(Xe.value,o.value0.value1,o.value0.value2,Xe.value,o.value0.value4,o.value0.value5,Xe.value))):o.value0 instanceof Vi&&o.value0.value2 instanceof ot?(l=!0,t(o.value1)(new ot(new Ct(h,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value0 instanceof ot?(l=!0,t(o.value1)(new ot(new Ct(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value5 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(h,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof Gi&&o.value0.value3 instanceof ot?(l=!0,t(o.value1)(new ot(o.value0.value0,o.value0.value1,o.value0.value2,new Ct(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,h)))):o.value0 instanceof Vi&&o.value0.value2 instanceof Ct?(l=!0,t(o.value1)(new Ct(new ot(h,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new ot(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value0 instanceof Ct?(l=!0,t(o.value1)(new Ct(new ot(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new ot(o.value0.value0.value6,o.value0.value1,o.value0.value2,h),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof pa&&o.value0.value5 instanceof Ct?(l=!0,t(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new ot(h,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new ot(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof Gi&&o.value0.value3 instanceof Ct?(l=!0,t(o.value1)(new Ct(o.value0.value0,o.value0.value1,o.value0.value2,new ot(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new ot(o.value0.value3.value6,o.value0.value4,o.value0.value5,h)))):(l=!0,Wi("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!l;)d=f(i,r);return d}},s=function(u){return function(r){var i=u,l=!1,d;function f(o,h){if(h instanceof ot&&h.value0 instanceof Xe&&h.value3 instanceof Xe)return l=!0,v(o)(Xe.value);if(h instanceof ot){i=new Re(new Va(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof Ct&&h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe)return l=!0,v(new Re(new Va(Xe.value,h.value1,h.value2),o))(Xe.value);if(h instanceof Ct){i=new Re(new Gi(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}return l=!0,Wi("The impossible happened in partial function `removeMaxNode`.")}for(;!l;)d=f(i,r);return d}},a=function(u){var r=!1,i;function l(d){if(d instanceof ot&&d.value3 instanceof Xe)return r=!0,{key:d.value1,value:d.value2};if(d instanceof ot){u=d.value3;return}if(d instanceof Ct&&d.value6 instanceof Xe)return r=!0,{key:d.value4,value:d.value5};if(d instanceof Ct){u=d.value6;return}return r=!0,Wi("The impossible happened in partial function `maxNode`.")}for(;!r;)i=l(u);return i},p=function(u){return function(r){var i=u,l=!1,d;function f(o,h){if(h instanceof Xe)return l=!0,G.value;if(h instanceof ot){var _=n(c)(h.value1);if(h.value3 instanceof Xe&&_ instanceof Ie)return l=!0,new z(new ne(h.value2,v(o)(Xe.value)));if(_ instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new Re(new zi(m.key,m.value,h.value3),o))(h.value0)))}if(_ instanceof fe){i=new Re(new zi(h.value1,h.value2,h.value3),o),r=h.value0;return}i=new Re(new Va(h.value0,h.value1,h.value2),o),r=h.value3;return}if(h instanceof Ct){var y=function(){return h.value0 instanceof Xe&&h.value3 instanceof Xe&&h.value6 instanceof Xe}(),_=n(c)(h.value4),C=n(c)(h.value1);if(y&&C instanceof Ie)return l=!0,new z(new ne(h.value2,t(o)(new ot(Xe.value,h.value4,h.value5,Xe.value))));if(y&&_ instanceof Ie)return l=!0,new z(new ne(h.value5,t(o)(new ot(Xe.value,h.value1,h.value2,Xe.value))));if(C instanceof Ie){var m=a(h.value0);return l=!0,new z(new ne(h.value2,s(new Re(new Vi(m.key,m.value,h.value3,h.value4,h.value5,h.value6),o))(h.value0)))}if(_ instanceof Ie){var m=a(h.value3);return l=!0,new z(new ne(h.value5,s(new Re(new pa(h.value0,h.value1,h.value2,m.key,m.value,h.value6),o))(h.value3)))}if(C instanceof fe){i=new Re(new Vi(h.value1,h.value2,h.value3,h.value4,h.value5,h.value6),o),r=h.value0;return}if(C instanceof pe&&_ instanceof fe){i=new Re(new pa(h.value0,h.value1,h.value2,h.value4,h.value5,h.value6),o),r=h.value3;return}i=new Re(new Gi(h.value0,h.value1,h.value2,h.value3,h.value4,h.value5),o),r=h.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[h.constructor.name])}for(;!l;)d=f(i,r);return d}};return p(Ye.value)}},$n={foldr:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Nt($n)(e)(e(n.value2)(Nt($n)(e)(t)(n.value3)))(n.value0);if(n instanceof Ct)return Nt($n)(e)(e(n.value2)(Nt($n)(e)(e(n.value5)(Nt($n)(e)(t)(n.value6)))(n.value3)))(n.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[n.constructor.name])}}},foldl:function(e){return function(t){return function(n){if(n instanceof Xe)return t;if(n instanceof ot)return Ht($n)(e)(e(Ht($n)(e)(t)(n.value0))(n.value2))(n.value3);if(n instanceof Ct)return Ht($n)(e)(e(Ht($n)(e)(e(Ht($n)(e)(t)(n.value0))(n.value2))(n.value3))(n.value5))(n.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[n.constructor.name])}}},foldMap:function(e){var t=at(e),n=me(e.Semigroup0());return function(c){return function(v){if(v instanceof Xe)return t;if(v instanceof ot)return n(Wt($n)(e)(c)(v.value0))(n(c(v.value2))(Wt($n)(e)(c)(v.value3)));if(v instanceof Ct)return n(Wt($n)(e)(c)(v.value0))(n(c(v.value2))(n(Wt($n)(e)(c)(v.value3))(n(c(v.value5))(Wt($n)(e)(c)(v.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[v.constructor.name])}}}};var ko=function(){return Xe.value}(),ty=function(e){var t=$o(e);return function(n){return Ht(n)(function(c){return function(v){return t(v.value0)(v.value1)(c)}})(ko)}};var Yp=function(e){var t=ey(e);return function(n){return function(c){return tt(c)(on)(t(n)(c))}}};var ny=function(e){var t=Ga(e),n=Yp(e),c=$o(e);return function(v){return function(s){return function(a){var p=v(t(s)(a));if(p instanceof G)return n(s)(a);if(p instanceof z)return c(s)(p.value0)(a);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[p.constructor.name])}}}};var W5=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}();var Zp=function(e){return W5.create(Ue(e.Eq0()))(Te(e))},U5={eq:function(e){return function(t){return e.value0(e.value2)(t.value2)}}},tL={compare:function(e){return function(t){return e.value1(e.value2)(t.value2)}},Eq0:function(){return U5}};var oy=Uu(Kt)(tL);var V5=ey(oy),G5=Ga(oy),J5=$o(oy);var eh=function(){return function(e){var t=An(e);return function(n){var c=Zp(n);return function(v){return function(s){return function(a){return V5(new ne(t(v),c(s)))(a)}}}}}},th=function(){return function(e){var t=An(e);return function(n){var c=Zp(n);return function(v){return function(s){return function(a){return G5(new ne(t(v),c(s)))(a)}}}}}},nh=function(){return function(e){var t=An(e);return function(n){var c=Zp(n);return function(v){return function(s){return function(a){return function(p){return J5(new ne(t(v),c(s)))(a)(p)}}}}}}},rh=function(e){var t=vt(e)($n);return function(n){return function(c){return t(function(v){return c(v)})(n)}}},Ji=ko;var oh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),is=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();function nL(e,t,n){return e==null?t:n(e)}function ay(e){return e}var Oo=tt(null)(ay),Yt=function(e){return nL(e,G.value,z.create)};var dn=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),hf=Z,Nr=function(e,t){return e.value2(e.value1,t)},pn=Z,Br=function(e){return e.value3(e.value1)},Yn=hf(function(e){return e.value0});var rL=V(It),fB=V(Wa);var ji=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ja=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Ki=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),Qi=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ka=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dB=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),oL=function(e){return function(t){return e(t)}};var pB=Z;var hB={bimap:function(e){return function(t){return oL(function(n){return pB(new dB(function(c){return e(n.value0(c))},function(c){return t(n.value1(c))},n.value2))})}}},_B=Zr(hB);var us=oL(function(e){var t=function(n){if(n instanceof ji)return new ji(n.value0);if(n instanceof ja)return new ja(n.value0,n.value1,e.value0(n.value2),rL(t)(n.value3));if(n instanceof Ki)return new Ki(n.value0,n.value1,e.value0(n.value2),rL(fB(t))(n.value3));if(n instanceof Qi)return new Qi(e.value1(n.value0));if(n instanceof Ka)return new Ka(_B(e.value0)(e.value1)(n.value0));throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): "+[n.constructor.name])};return t(e.value2)});function ss(e,t){return t[e]}function uy(e,t){return t.hasOwnProperty(e)}function Qa(e,t,n){n[e]=t}function sy(e,t){for(var n=[],c=0;c<e.length;c++)n.push(t(c,e[c]));return n}function cy(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ly(e,t){for(var n=Object.keys(e),c=0;c<n.length;c++){var v=n[c];t(v,e[v])}}function fy(e,t,n,c,v){for(var s=[],a=e.length,p=t.length,u=0;;){if(u<a)u<p?s.push(n(u,e[u],t[u])):c(u,e[u]);else if(u<p)s.push(v(u,t[u]));else break;u++}return s}function _f(e,t,n){for(var c={},v=0;v<e.length;v++){var s=e[v],a=t(s);c[a]=n(a,v,s)}return c}function vf(e,t,n,c,v,s){for(var a={},p=0;p<t.length;p++){var u=t[p],r=n(u);e.hasOwnProperty(r)?a[r]=c(r,p,e[r],u):a[r]=s(r,p,u)}for(var r in e)r in a||v(r,e[r]);return a}function cs(e,t){return e===t}function dy(e,t){return t.createTextNode(e)}function py(e,t){t.textContent=e}function ih(e,t,n){return e!=null?n.createElementNS(e,t):n.createElement(t)}function Xi(e,t,n){var c=n.childNodes.item(e)||null;c!==t&&n.insertBefore(t,c)}function mf(e,t){t&&e.parentNode===t&&t.removeChild(e)}function gf(e){return e.parentNode}function uh(e,t,n,c){e!=null?c.setAttributeNS(e,t,n):c.setAttribute(t,n)}function sh(e,t,n){e!=null?n.removeAttributeNS(e,t):n.removeAttribute(t)}function hy(e,t,n){return e!=null?n.hasAttributeNS(e,t):n.hasAttribute(t)}function _y(e,t,n){n.addEventListener(e,t,!1)}function vy(e,t,n){n.removeEventListener(e,t,!1)}var my=void 0;var yf=function(){return{}};function gy(e){return function(t){return function(n){return function(){return n[e]=t,n}}}}var yy=ss,Dy=Z,Cy=Qa,by=yf;var ch=function(e){return function(t){return t[e]}},DB=ch("namespaceURI"),CB=ch("prefix"),bB=ch("localName"),wB=ch("tagName");function Sy(e){return function(){var t=e.getBoundingClientRect();return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height,x:t.x,y:t.y}}}var lh=function(e){return function(t){return function(){return t[e]}}},EB=lh("children"),TB=lh("firstElementChild"),MB=lh("lastElementChild"),LB=lh("childElementCount");function iL(e){return function(t){return function(){return t.querySelector(e)}}}var xB=V(Pe);var uL=function(e){var t=xB(Yt),n=iL(e);return function(c){return t(n(c))}};var Ey=Z;var Df=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var Ty=function(e){return Br(e.widget)},My=Df("patchWidget","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ka)return My(291)(e,us(t.value0));if(t instanceof Qi){var n=Nr(e.widget,t.value0),c=hf(function(v){return pn(new dn(v.value0,{build:e.build,widget:n},My(296),Ty))})(n);return c}return Ty(e),e.build(t)}}),kB=My(286),fh=function(e){var t=gf(e.node);return mf(e.node,t)},dh=Df("patchText","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ka)return dh(82)(e,us(t.value0));if(t instanceof ji){if(e.value===t.value0)return pn(new dn(e.node,e,dh(85),fh));if(en){var n={build:e.build,node:e.node,value:t.value0};return py(t.value0,e.node),pn(new dn(e.node,n,dh(89),fh))}}return fh(e),e.build(t)}}),OB=dh(77),ph=function(e){var t=gf(e.node);return mf(e.node,t),ly(e.children,function(n,c){return Br(c)}),Br(e.attrs)},hh=function(e){var t=gf(e.node);return mf(e.node,t),cy(e.children,Br),Br(e.attrs)},cL=function(e,t,n,c){var v=t===c;return v?e instanceof z&&n instanceof z&&e.value0===n.value0||e instanceof G&&n instanceof G:!1},_h=Df("patchElem","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ka)return _h(135)(e,us(t.value0));if(t instanceof ja&&cL(e.ns,e.name,t.value0,t.value1)){var n=Kr(t.value3),c=Kr(e.children);if(c===0&&n===0){var u=Nr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:e.children};return pn(new dn(e.node,r,_h(149),hh))}var v=function(i,l){return Br(l)},s=function(i,l,d){var f=Nr(l,d);return Xi(i,Yn(f),e.node),f},a=function(i,l){var d=e.build(l);return Xi(i,Yn(d),e.node),d},p=fy(e.children,t.value3,s,v,a),u=Nr(e.attrs,t.value2),r={build:e.build,node:e.node,attrs:u,ns:t.value0,name:t.value1,children:p};return pn(new dn(e.node,r,_h(172),hh))}return hh(e),e.build(t)}}),HB=_h(130),vh=Df("patchKeyed","Halogen.VDom.DOM",function(){return function(e,t){if(t instanceof Ka)return vh(222)(e,us(t.value0));if(t instanceof Ki&&cL(e.ns,e.name,t.value0,t.value1)){var n=Kr(t.value3);if(e.length===0&&n===0){var p=Nr(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:e.children,length:0};return pn(new dn(e.node,u,vh(237),ph))}var c=function(r,i){return Br(i)},v=function(r,i,l,d){var f=Nr(l,d.value1);return Xi(i,Yn(f),e.node),f},s=function(r,i,l){var d=e.build(l.value1);return Xi(i,Yn(d),e.node),d},a=vf(e.children,t.value3,Pn,v,c,s),p=Nr(e.attrs,t.value2),u={build:e.build,node:e.node,attrs:p,ns:t.value0,name:t.value1,children:a,length:n};return pn(new dn(e.node,u,vh(261),ph))}return ph(e),e.build(t)}}),PB=vh(217),NB=function(e,t,n){var c=e.buildWidget(e)(n),v=hf(function(s){return pn(new dn(s.value0,{build:t,widget:c},kB,Ty))})(c);return v},BB=function(e,t,n){var c=dy(n,e.document),v={build:t,node:c,value:n};return pn(new dn(c,v,OB,fh))},WB=function(e,t,n,c,v,s){var a=ih(Oo(n),c,e.document),p=Ey(a),u=function(d,f,o){var h=t(o.value1);return Xi(f,Yn(h),p),h},r=_f(s,Pn,u),i=e.buildAttributes(a)(v),l={build:t,node:p,attrs:i,ns:n,name:c,children:r,length:Kr(s)};return pn(new dn(p,l,PB,ph))},UB=function(e,t,n,c,v,s){var a=ih(Oo(n),c,e.document),p=Ey(a),u=function(d,f){var o=t(f);return Xi(d,Yn(o),p),o},r=sy(s,u),i=e.buildAttributes(a)(v),l={build:t,node:p,attrs:i,ns:n,name:c,children:r};return pn(new dn(p,l,HB,hh))},Cf=function(e){var t=Df("build","Halogen.VDom.DOM",function(){return function(c){if(c instanceof ji)return BB(e,t(59),c.value0);if(c instanceof ja)return UB(e,t(60),c.value0,c.value1,c.value2,c.value3);if(c instanceof Ki)return WB(e,t(61),c.value0,c.value1,c.value2,c.value3);if(c instanceof Qi)return NB(e,t(62),c.value0);if(c instanceof Ka)return t(63)(us(c.value0));throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): "+[c.constructor.name])}}),n=t(58);return n};function mh(e){return typeof e}function gh(e){return Object.prototype.toString.call(e).slice(8,-1)}function bf(e){return e===void 0}var fL=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};var yh=function(){var e=bp(g1);return function(t){return yg(e(t))}}();var dL=function(e){return function(t){return new Jn(e,new Re(t.value0,t.value1))}};var xy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var ls=Z,Ch=Z;var Ay=function(e){var t=wr(sM(e));return function(n){return t(yh(n))}};var Iy=function(e){var t=ee(rf(e)),n=Ay(e);return function(c){return function(v){if(gh(v)===c)return t(Ch(v));if(en)return n(new xy(c,gh(v)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[c.constructor.name,v.constructor.name])}}};var bh=function(e){return Iy(e)("String")};function Ry(e){return e()}function hL(e){return function(t){return function(n){return function(c){var v=n;function s(p){return function(u){return t(u)(p)(c[p])}}for(var a in c)hasOwnProperty.call(c,a)&&(v=e(v)(s(a)));return v}}}}function _L(e,t,n,c){return n in c?t(c[n]):e}function $y(e){return function(t){var n=[];for(var c in t)hasOwnProperty.call(t,c)&&n.push(e(c)(t[c]));return n}}var GB=Object.keys||$y(function(e){return function(){return e}});var ky=function(e){return function(t){return function(n){return function(c){return function(v){return e(t,n,c,v)}}}}};var XB=Et(op);var wh=function(){return ky(_L)(G.value)(z.create)}();var wf=function(e){var t=Dp(e);return function(n){return Ry(function(){var v=yf();return rp(t(n))(function(s){return XB(gy(s.value0)(s.value1)(v))})(),v})}};var YB=hL(jS),vL=function(e){var t=me(e.Semigroup0()),n=at(e);return function(c){return YB(function(v){return function(s){return function(a){return t(v)(c(s)(a))}}})(n)}};function Sf(e){return function(){return function(t){return e(t)()}}}function Py(e){return function(t){return function(n){return function(c){return function(){return c.addEventListener(e,t,n)}}}}}function Ny(e){return function(t){return function(n){return function(c){return function(){return c.removeEventListener(e,t,n)}}}}}var ZB=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var Wy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Uy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Xa=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Zi=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fs=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),eW=ss,By=Qa,tW=function(e,t){var n=hy(null,e,t);if(n)return sh(null,e,t);var c=mh(ss(e,t));return c==="string"?Qa(e,"",t):e==="rowSpan"?Qa(e,1,t):e==="colSpan"?Qa(e,1,t):Qa(e,my,t)},gL=function(e){if(e instanceof Xa&&e.value0 instanceof z)return"attr/"+(e.value0.value0+(":"+e.value1));if(e instanceof Xa)return"attr/:"+e.value1;if(e instanceof Zi)return"prop/"+e.value0;if(e instanceof eu)return"handler/"+e.value0;if(e instanceof fs)return"ref";throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): "+[e.constructor.name])},yL=Z;var DL=Z;var CL=function(e){return function(t){var n=function(i){return function(l,d){if(d instanceof Xa)return sh(Oo(d.value0),d.value1,t);if(d instanceof Zi)return tW(d.value0,t);if(d instanceof eu){var f=yy(d.value0,i);return vy(d.value0,Pn(f),t)}if(d instanceof fs)return void 0;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): "+[d.constructor.name])}},c=function(i){return i instanceof z?e(i.value0)():void 0},v=function(i){var l=wh("ref")(i.props);return l instanceof z&&l.value0 instanceof fs?c(l.value0.value0(new Uy(t))):void 0},s=function(i,l){return function(d,f,o,h){if(o instanceof Xa&&h instanceof Xa){var _=o.value2===h.value2;return _||uh(Oo(h.value0),h.value1,h.value2,t),h}if(o instanceof Zi&&h instanceof Zi){var m=cs(o.value1,h.value1);if(m)return h;if(h.value0==="value"){var y=eW("value",t),C=cs(y,h.value1);return C||By(h.value0,h.value1,t),h}return By(h.value0,h.value1,t),h}if(o instanceof eu&&h instanceof eu){var E=yy(h.value0,i);return Pt(h.value1)(on(E))(),Cy(h.value0,E,l),h}return h}},a=function(i){return function(l,d,f){if(f instanceof Xa)return uh(Oo(f.value0),f.value1,f.value2,t),f;if(f instanceof Zi)return By(f.value0,f.value1,t),f;if(f instanceof eu){var o=ss(f.value0,i);if(uy(f.value0,i))return Pt(f.value1)(on(o))(),f;var h=nn(f.value1)(),_=Sf(function(m){return function(){var C=Ke(h)();return c(C(m))}})();return Cy(f.value0,new ne(_,h),i),_y(f.value0,_,t),f}if(f instanceof fs)return c(f.value0(new Wy(t))),f;throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): "+[f.constructor.name])}},p=ZB("patchProp","Halogen.VDom.DOM.Prop",function(){return function(i,l){var d=by(),f=n(i.events),o=s(i.events,d),h=a(d),_=vf(i.props,l,gL,o,f,h),m={events:Dy(d),props:_};return pn(new dn(void 0,m,p(100),v))}}),u=p(87),r=function(i){var l=by(),d=_f(i,gL,a(l)),f={events:Dy(l),props:d};return pn(new dn(void 0,f,u,v))};return r}};var zy=function(e){return e},EL=function(e){return zy(Qi.create(e))},oW=function(e){return e.toPropValue},tu=function(e){return zy(ji.create(e))},TL=function(e){return new fs(function(t){return e(function(n){if(n instanceof Wy)return new z(n.value0);if(n instanceof Uy)return G.value;throw new Error("Failed pattern match at Halogen.HTML.Core (line 109, column 21 - line 111, column 23): "+[n.constructor.name])}(t))})},ML=function(e){var t=oW(e);return function(n){var c=Zi.create(n);return function(v){return c(t(v))}}};var Vy={toPropValue:function(){var e=fn();return function(t){return yL(e(t))}}()};var LL={toPropValue:DL};var Gy=function(){return eu.create}(),FL=function(e){return function(t){return function(n){return function(c){return new ja(e,t,n,c)}}}};var xL=function(e){return function(t){return Xa.create(e)(t)}};var aW=ye(Ce);var Sh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Jy=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jy=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),AL=function(e){return function(t){return new jy(e,t)}},IL=function(){return Jy.create}(),RL=function(e){var t=ee(e);return function(n){return function(c){return function(v){return function(s){return function(a){if(s instanceof Sh)return new ne(new Re({func:t(s.value0),count:a},n),c);if(s instanceof Jy)return new ne(new Re({func:v(s.value0),count:a},n),c);if(s instanceof jy)return RL(e)(n)(dL(s.value1)(c))(v)(s.value0)(a+1|0);throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): "+[s.constructor.name])}}}}}},$L=function(e){var t=ut(e.Apply0());return function(n){return function(c){return function(v){if(n instanceof Ye)return new qe(v);if(n instanceof Re){var s=t(n.value0.func)(v),a=n.value0.count===1;if(a)return n.value1 instanceof Ye?new qe(s):$L(e)(n.value1)(c)(s);if(c instanceof Ye)return new qe(s);if(c instanceof Re)return new He(new ne(new Re({func:s,count:n.value0.count-1|0},n.value1),new Jn(c.value0,c.value1)));throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): "+[c.constructor.name])}throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): "+[n.constructor.name])}}}},kL={map:function(e){return function(t){return AL(new Sh(e))(t)}}},OL=function(e){var t=$L(e),n=ee(e),c=RL(e);return function(v){return function(s){var a=function(p){var u=!1,r;function i(l){if(l.value1.value0 instanceof Sh){var d=t(l.value0)(l.value1.value1)(n(l.value1.value0.value0));if(d instanceof qe)return u=!0,d.value0;if(d instanceof He){p=d.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): "+[d.constructor.name])}if(l.value1.value0 instanceof Jy){var d=t(l.value0)(l.value1.value1)(v(l.value1.value0.value0));if(d instanceof qe)return u=!0,d.value0;if(d instanceof He){p=d.value0;return}throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): "+[d.constructor.name])}if(l.value1.value0 instanceof jy){var f=new Jn(l.value1.value0.value1,l.value1.value1);p=c(l.value0)(f)(v)(l.value1.value0.value0)(1);return}throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): "+[l.value1.value0.constructor.name])}for(;!u;)r=i(p);return r};return a(new ne(Ye.value,yh(s)))}}},HL=function(e){return OL(e)(aW)},PL={apply:function(e){return function(t){return AL(e)(t)}},Functor0:function(){return kL}},NL=function(){return{pure:Sh.create,Apply0:function(){return PL}}}(),iW=OL(NL),Ky=function(e){return iW(function(t){return IL(e(t))})};var WL=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),UL=Z,qL=Z;function Qy(e){return function(t){return e===t}}var Mc=Qy;var lW=Et(Pe);var fW=ae(yr);var dW=me(jt),pW=vt(Xt),hW=pW(Mt);var Eh=function(e){return e},VL=function(e){return function(t){return e(function(n){return lW(t(n))})}};var cr=function(e){return function(t){return e(t)}};var Yy={map:function(e){return function(t){return function(n){return t(function(c){return n(e(c))})}}}};var lr=function(){var t=nn([])();return{emitter:function(n){return function(){return Xr(function(v){return dW(v)([n])})(t)(),Xr(og(Mc)(n))(t)}},listener:function(n){return fW(Ke(t))(hW(function(c){return c(n)}))}}};var Zy=ye(Ce);var _W=th();var GL=function(e){return e},JL=function(e){return e},Tf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Mf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Th=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ds=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lf=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ff=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Mh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xh=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Lc=function(e){return e};var fr=function(e){return mt(new Mf(function(t){return e},Zy))};var _a=function(e){return mt(new Ff(e,void 0))};var ps=function(){return function(e){var t=_W(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return mt(new Lf(qL(new WL(function(p){var u=ee(p);return function(r){var i=tt(u(G.value))(r),l=c(v)(s);return function(d){return i(l(d))}}},a,Zy))))}}}}}},e0=wn,Ah=wn;var ru={lift:function(e){return function(t){return Lc(mt(ds.create(t)))}}},hs=vc,Fn={state:function(e){return Lc(mt(Tf.create(e)))},Monad0:function(){return hs}};var Er=function(e){return{liftEffect:function(){var t=Je(e);return function(n){return Lc(mt(ds.create(t(n))))}}(),Monad0:function(){return hs}}};var Ih=function(e){var t=Er(e.MonadEffect0());return{liftAff:function(){var n=Xn(e);return function(c){return Lc(mt(ds.create(n(c))))}}(),MonadEffect0:function(){return t}}};var Wr=function(e){return mt(new xf(e,Zy))},Ho=Ua;var kn=Kn,vW=ae(kn);var Zn=Dr,mW=ee(Zn),t0={tailRecM:function(e){return function(t){return vW(e(t))(function(n){if(n instanceof hn)return ar(t0)(e)(n.value0);if(n instanceof rn)return mW(n.value0);throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): "+[n.constructor.name])})}},Monad0:function(){return hs}};var Fc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xc=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ac=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ic=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var gW=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}};var yW=function(e,t){return cs(e.value0,t.value0)&&cs(e.value1,t.value1)&&e.value1(e.value3,t.value3)};var jL=function(e){return e.value2(e.value3)};var KL=function(e){var t=function(s){return Br(s.vdom)},n=gW("patchThunk","Halogen.VDom.Thunk",function(){return function(s,a){var p=yW(s.thunk,a);if(p)return pn(new dn(Yn(s.vdom),s,n(112),t));var u=Nr(s.vdom,e(jL(a)));return pn(new dn(Yn(u),{vdom:u,thunk:a},n(115),t))}}),c=n(108),v=function(s){return function(a){var p=Cf(s)(e(jL(a)));return pn(new dn(Yn(p),{thunk:a,vdom:p},c,t))}};return v};var Rh=Gs(Ho),o0=vt(Zn)(zt),DW=V(Ho);var QL=ee(Zn),CW=th(),bW=eh(),wW=nh(),Af=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$h=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),a0=Z,i0=Z,Tr=function(e){return function(t){if(t instanceof Fc)return Rh(o0(e.handleAction)(e.initialize))(t.value0);if(t instanceof xc)return Rh(o0(e.handleAction)(e.finalize))(t.value0);if(t instanceof Ac)return Rh(o0(e.handleAction)(e.receive(t.value0)))(t.value1);if(t instanceof Ic)return Rh(e.handleAction(t.value0))(t.value1);if(t instanceof Rc)return QM(function(n){var c=DW(tt(t.value1(void 0))(n));return function(v){return c(e.handleQuery(v))}})(t.value0);throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): "+[t.constructor.name])}},SW=Z,Mr=Z;var sn=function(){return{handleAction:be(QL(void 0)),handleQuery:be(QL(G.value)),receive:be(G.value),initialize:G.value,finalize:G.value}}(),u0=function(){return function(e){var t=CW(e),n=bW(e),c=wW(e);return function(v){var s=t(v),a=n(v),p=c(v);return function(u){return function(r){return function(i){return function(l){return function(d){return SW({get:s(u)(r),pop:a(u)(r),set:p(u)(r),component:i,input:l,output:d})}}}}}}}};var If=function(){return FL(G.value)}();var s0=If("style");var _s=If("div"),ou=_s([]);var vs=function(e){return If("canvas")(e)([])},$c=If("button");var TW=fn();var c0=function(e){return TW(Mg(e))};function dr(e){return function(){return e.stopPropagation()}}var l0="DOMContentLoaded";var tF="keyup",nF="keydown";var rF="mouseup";var oF="mousemove",aF="mouseleave",iF="mouseenter",uF="mousedown",sF="dblclick",cF="click";var ms=Z,lF=Z;var Ya=function(e){return function(t){return Gy(e)(function(n){return new z(new is(t(n)))})}};var gs=function(){var e=Ya(cF);return function(t){return e(ms(t))}}(),fF=function(){var e=Ya(sF);return function(t){return e(ms(t))}}();var dF=function(){var e=Ya(nF);return function(t){return e(lF(t))}}(),pF=function(){var e=Ya(tF);return function(t){return e(lF(t))}}();var hF=function(){var e=Ya(uF);return function(t){return e(ms(t))}}(),_F=function(){var e=Ya(iF);return function(t){return e(ms(t))}}(),vF=function(){var e=Ya(aF);return function(t){return e(ms(t))}}(),mF=function(){var e=Ya(oF);return function(t){return e(ms(t))}}();var gF=function(){var e=Ya(rF);return function(t){return e(ms(t))}}();function Oh(e){return e.clientX}function Hh(e){return e.clientY}var ao=Z;var yF=Lt(Ft)(kn),qW=mc(Fn),zW=ee(Zn),VW=ye(Ce),DF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GW=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),JW=function(e){return function(t){return $c([gs(function(n){return GW.create(ao(n))})])([tu(t)])}},jW=function(e){return function(t){return yF(qW(t.value0))(function(){return zW(new z(t.value1))})}},KW=function(e){var t=Je(Er(e.MonadEffect0()));return function(n){return yF(t(dr(n.value0)))(function(){return _a(void 0)})}},CF=function(e){return Mr({initialState:VW,render:JW(e),eval:Tr({handleAction:KW(e),handleQuery:jW(e),receive:sn.receive,initialize:sn.initialize,finalize:sn.finalize})})};var Wh=Aa(Bh(),1);function wF(e,t){return function(){return t.edit(e)}}var SF=function(e){return function(t){return wF(e,t)}};var ZW=Aa(Bh(),1);function EF(e,t){return function(){return t.setValue(e)}}function d0(e){return function(){return e.getValue()}}var MF=function(e){return function(t){return EF(e,t)}};var n3=Aa(Bh(),1);function ue(e){return function(){var t=arguments[arguments.length-1],n=Array.prototype.slice.call(arguments,0,-1);return function(){return t[e].apply(t,n)}}}function Uh(e){return function(t){return function(){return t[e]}}}function r3(e){return function(t,n){return function(){n[e]=t}}}var o3=Uh("text"),a3=r3("text"),i3=Uh("renderer"),u3=Uh("inMultiSelectMode"),s3=ue("selectMoreLines"),c3=Uh("container"),l3=ue("setKeyboardHandler"),f3=ue("getKeyboardHandler"),d3=ue("setSession"),p0=ue("getSession"),p3=ue("setValue"),h3=ue("getValue"),_3=ue("getSelection"),v3=ue("resize"),m3=ue("setTheme"),g3=ue("getTheme"),y3=ue("setStyle"),D3=ue("unsetStyle"),C3=ue("setFontSize"),b3=ue("focus"),w3=ue("isFocused"),S3=ue("blur"),E3=ue("getCopyText"),T3=ue("insert"),M3=ue("setOverwrite"),L3=ue("getOverwrite"),F3=ue("toggleOverwrite"),x3=ue("setScrollSpeed"),A3=ue("getScrollSpeed"),I3=ue("setDragDelay"),R3=ue("getDragDelay"),$3=ue("setSelectionStyle"),k3=ue("getSelectionStyle"),O3=ue("setHighlightActiveLine"),H3=ue("getHighlightActiveLine"),P3=ue("setHighlightSelectedWord"),N3=ue("getHighlightSelectedWord"),B3=ue("setShowInvisibles"),W3=ue("getShowInvisibles"),U3=ue("setShowPrintMargin"),q3=ue("getShowPrintMargin"),z3=ue("setPrintMarginColumn"),V3=ue("getPrintMarginColumn"),G3=ue("setReadOnly"),J3=ue("getReadOnly"),j3=ue("setBehavioursEnabled"),K3=ue("getBehavioursEnabled"),Q3=ue("setWrapBehavioursEnabled"),X3=ue("getWrapBehavioursEnabled"),Y3=ue("setShowFoldWidgets"),Z3=ue("getShowFoldWidgets"),eU=ue("remove"),tU=ue("removeWordRight"),nU=ue("removeWordLeft"),rU=ue("removeToLineStart"),oU=ue("removeToLineEnd"),aU=ue("splitLine"),iU=ue("transposeLetters"),uU=ue("toLowerCase"),sU=ue("toUpperCase"),cU=ue("indent"),lU=ue("blockIndent"),fU=ue("blockOutdent"),dU=ue("toggleCommentLines"),pU=ue("getNumberAt"),hU=ue("modifyNumber"),_U=ue("removeLines"),vU=ue("moveLinesDown"),mU=ue("moveLinesUp"),gU=ue("copyLinesUp"),yU=ue("copyLinesDown"),DU=ue("getFirstVisibleRow"),CU=ue("getLastVisibleRow"),bU=ue("isRowVisible"),wU=ue("isRowFullyVisible"),SU=ue("selectPageDown"),EU=ue("selectPageUp"),TU=ue("gotoPageDown"),MU=ue("gotoPageUp"),LU=ue("scrollPageDown"),FU=ue("scrollPageUp"),xU=ue("scrollToRow"),AU=ue("scrollToLine"),IU=ue("centerSelection"),RU=ue("getCursorPosition"),$U=ue("getCursorPositionScreen"),kU=ue("getSelectionRange"),OU=ue("selectAll"),HU=ue("clearSelection"),PU=ue("moveCursorTo"),NU=ue("moveCursorToPosition"),BU=ue("jumpToMatching"),WU=ue("gotoLine"),UU=ue("navigateTo"),qU=ue("navigateUp"),zU=ue("navigateDown"),VU=ue("navigateLeft"),GU=ue("navigateRight"),JU=ue("navigateLineStart"),jU=ue("navigateLineEnd"),KU=ue("navigateFileEnd"),QU=ue("navigateFileStart"),XU=ue("navigateWordRight"),YU=ue("navigateWordLeft"),ZU=ue("replace"),e4=ue("replaceAll"),t4=ue("getLastSearchOptions"),n4=ue("find"),r4=ue("findNext"),o4=ue("findPrevious"),a4=ue("undo"),i4=ue("redo"),u4=ue("destroy");var LF={fromString:ye(Ce)},xt=function(e){return e.fromString};var FF=V(It),xF=es(go),l4=me(jt),f4=dp(Mt)(vr);var Lr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),d4=function(e){return e};var p4=function(e){return e},ma=function(e){return e.value};var kc={append:function(e){return function(t){if(e instanceof Fr&&t instanceof Fr)return new Fr(e.value0+t.value0);if(e instanceof Fr&&t instanceof Lr)return new Lr(FF(xF(function(n){return e.value0+n}))(t.value0));if(e instanceof Lr&&t instanceof Fr)return new Lr(FF(xF(function(n){return t.value0+n}))(e.value0));if(e instanceof Lr&&t instanceof Lr)return new Lr(l4(e.value0)(t.value0));throw new Error("Failed pattern match at CSS.Property (line 23, column 1 - line 27, column 59): "+[e.constructor.name,t.constructor.name])}}},h4=me(kc),h0={append:function(e){return function(t){return h4(e)(t)}}},AF=me(h0);var Rf=function(e){if(e instanceof Lr)return Mn("")(f4("")(e.value0));if(e instanceof Fr)return e.value0;throw new Error("Failed pattern match at CSS.Property (line 32, column 1 - line 32, column 28): "+[e.constructor.name])};var qh=function(){return{fromString:Fr.create}}(),IF=xt(qh),er={fromString:function(e){return d4(IF(e))}},zh=xt(er);var $f={value:function(e){return zh(f1(e))}};var ys={value:function(){var e=Fe(Mo);return function(t){return zh(e(t))}}()},iu={value:zh},Oc=function(e){var t=ma(e);return function(n){var c=ma(n);return{value:function(v){return AF(t(v.value0))(AF(zh(" "))(c(v.value1)))}}}};var On={fromString:function(e){return p4(IF(e))}};var RF=function(e){return e};var kf=function(){return new Lr([new ne("-webkit-",""),new ne("-moz-",""),new ne("-ms-",""),new ne("-o-",""),new ne("","")])}();var _4=me(jt),$F=ee(Js),v4=Ue(Xo(vr)),tr=Te(Kt),m4=Te(Di(Kt)),uu=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Za=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),su=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),cu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),du=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),pu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hu=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ei=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Hc=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kF=function(e){return e},Vh=function(){function e(){}return e.value=new e,e}(),_0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),v0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),m0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),OF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),it=function(e){return function(t){return new Hf(_4(e.value0)(t),e.value1)}},$t=function(){return new Hf([],Vh.value)}(),PF=function(e){return kF($F(ei.create(e)))};var g4={eq:function(e){return function(t){return e instanceof uu&&t instanceof uu||e instanceof Za&&t instanceof Za||e instanceof su&&t instanceof su?e.value0===t.value0:e instanceof cu&&t instanceof cu||e instanceof lu&&t instanceof lu||e instanceof fu&&t instanceof fu||e instanceof du&&t instanceof du||e instanceof pu&&t instanceof pu||e instanceof hu&&t instanceof hu?e.value0===t.value0&&e.value1===t.value1:e instanceof ei&&t instanceof ei?e.value0===t.value0:e instanceof Hc&&t instanceof Hc?e.value0===t.value0&&v4(e.value1)(t.value1):!1}}};var NF={compare:function(e){return function(t){if(e instanceof uu&&t instanceof uu)return tr(e.value0)(t.value0);if(e instanceof uu)return fe.value;if(t instanceof uu)return pe.value;if(e instanceof Za&&t instanceof Za)return tr(e.value0)(t.value0);if(e instanceof Za)return fe.value;if(t instanceof Za)return pe.value;if(e instanceof su&&t instanceof su)return tr(e.value0)(t.value0);if(e instanceof su)return fe.value;if(t instanceof su)return pe.value;if(e instanceof cu&&t instanceof cu){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof cu)return fe.value;if(t instanceof cu)return pe.value;if(e instanceof lu&&t instanceof lu){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof lu)return fe.value;if(t instanceof lu)return pe.value;if(e instanceof fu&&t instanceof fu){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof fu)return fe.value;if(t instanceof fu)return pe.value;if(e instanceof du&&t instanceof du){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof du)return fe.value;if(t instanceof du)return pe.value;if(e instanceof pu&&t instanceof pu){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof pu)return fe.value;if(t instanceof pu)return pe.value;if(e instanceof hu&&t instanceof hu){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:tr(e.value1)(t.value1)}if(e instanceof hu)return fe.value;if(t instanceof hu)return pe.value;if(e instanceof ei&&t instanceof ei)return tr(e.value0)(t.value0);if(e instanceof ei)return fe.value;if(t instanceof ei)return pe.value;if(e instanceof Hc&&t instanceof Hc){var n=tr(e.value0)(t.value0);return n instanceof fe?fe.value:n instanceof pe?pe.value:m4(e.value1)(t.value1)}throw new Error("Failed pattern match at CSS.Selector (line 0, column 0 - line 0, column 0): "+[e.constructor.name,t.constructor.name])}},Eq0:function(){return g4}};var Gh=function(e){return new Hf([],new _0(e))},En=function(e){return function(t){return new Hf([],new m0(e,t))}},BF=function(e){return function(t){return new Hf([],new v0(e,t))}};var lt=function(e){return kF($F(Za.create(e)))};var y4=fn();var D4=function(e){return y4($g(e))};var WF=function(e){return on(D4(e))};var b4=V(kg(Pa));var w4=ut(zp(jt)(Zd)),S4=ae(Og(jt)(Tm));var UF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),y0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Pf=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),D0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GF=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),jF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),KF=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var E4=function(e){return e},Nf=function(e){return WF(e)},QF=function(){var e=qa(gM(Bu)(ho));return function(t){return E4(e(ic(t)))}}(),gt=function(e){return function(t){return QF(new D0(new y0(e),Nf(t)))}};var cn=function(e){var t=ma(e);return function(n){return function(c){return QF(new Pf(RF(n),t(c)))}}},C0=function(e){var t=cn(e);return function(n){return t(n)}};var T4={map:function(e){return function(t){return b4(e)(t)}}};var M4={apply:function(e){return function(t){return w4(e)(t)}},Functor0:function(){return T4}},Jh={bind:function(e){return function(t){return S4(e)(function(n){return function(c){return c}(t(n))})}},Apply0:function(){return M4}};var jh=xt(On),Pc=xt(er);var ti=function(){var e=cn(iu)(jh("z-index")),t=Fe(ea);return function(n){return e(t(n))}}();var L4={value:function(e){return e}};var F4={value:function(e){return e}};var Kh=Pc("relative"),qr=cn(L4)(jh("position")),XF=cn(ys)(jh("opacity"));var YF=Pc("inline-block");var ZF=Pc("flex");var ex=Pc("none");var Nc=cn(F4)(jh("display"));var tx=Pc("block"),No=Pc("absolute");var ox=me(h0),ax=ma(ys),ix=xt(er),rx=Fe(Mo),x4=me(kc);var Qh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),A4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),I4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),R4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$4=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var Ds=function(e){if(e instanceof Qh)return Rf(e.value0);if(e instanceof A4)return da(function(t){return da(function(n){return"("+(Ds(t)+(" + "+(Ds(n)+")")))})(e.value1)})(e.value0);if(e instanceof I4)return da(function(t){return da(function(n){return"("+(Ds(t)+(" - "+(Ds(n)+")")))})(e.value1)})(e.value0);if(e instanceof R4)return da(function(t){return"("+(rx(e.value0)+(" * "+(Ds(t)+")")))})(e.value1);if(e instanceof $4)return da(function(t){return"("+(Ds(t)+(" / "+(rx(e.value0)+")")))})(e.value1);throw new Error("Failed pattern match at CSS.Size (line 29, column 1 - line 29, column 43): "+[e.constructor.name])},ni={value:function(e){return e instanceof Qh?e.value0:x4(kf)(new Fr("calc"+Ds(e)))}};var kt=function(e){return new Qh(ox(ax(e))(ix("px")))};var w0=function(e){return new Qh(ox(ax(e))(ix("em")))};var k4=xt(er);var O4=xt(On);var H4={value:function(e){return e}};var ux=k4("row");var sx=cn(H4)(O4("flex-direction"));var Bc=cn(ni),gu=xt(On),cx=Oc(ni)(ni),lx=cn(Oc(cx)(cx)),Bf=Bc(gu("width")),yu=Bc(gu("top")),Xh=Bc(gu("right"));var fx=function(e){return function(t){return function(n){return function(c){return lx(gu("padding"))(new ne(new ne(e,t),new ne(n,c)))}}}};var dx=function(e){return function(t){return function(n){return function(c){return lx(gu("margin"))(new ne(new ne(e,t),new ne(n,c)))}}}};var Cs=Bc(gu("left")),Wf=Bc(gu("height")),S0=Bc(gu("bottom"));function Bn(e){return e}function E0(e){return JSON.stringify(e)}function hx(e,t,n,c,v,s,a){return a==null?e():typeof a=="boolean"?t(a):typeof a=="number"?n(a):typeof a=="string"?c(a):Object.prototype.toString.call(a)==="[object Array]"?v(a):s(a)}var _x=function(e){return function(t){return function(n){return hx(be(e),be(e),be(e),t,be(e),be(e),n)}}};var T0=Fe(Oa),W4=Fe(ea);var Yh=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),M0=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),vx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),L0=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),mx=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),F0=function(){function e(){}return e.value=new e,e}(),Uf={show:function(e){if(e instanceof Yh)return"(TypeMismatch "+(T0(e.value0)+")");if(e instanceof M0)return"(UnexpectedValue "+(E0(e.value0)+")");if(e instanceof vx)return"(AtIndex "+(W4(e.value0)+(" "+(Fe(Uf)(e.value1)+")")));if(e instanceof L0)return"(AtKey "+(T0(e.value0)+(" "+(Fe(Uf)(e.value1)+")")));if(e instanceof mx)return"(Named "+(T0(e.value0)+(" "+(Fe(Uf)(e.value1)+")")));if(e instanceof F0)return"MissingValue";throw new Error("Failed pattern match at Data.Argonaut.Decode.Error (line 24, column 10 - line 30, column 35): "+[e.constructor.name])}};var Cx=function(){return _x(new qe(new Yh("String")))(He.create)}();var Uc={decodeJson:Cx};var e_=function(e){return e.decodeJson};var Sx=Bn;var qc={encodeJson:Sx};var qf=function(e){return e.encodeJson};var K_e=Aa(ID(),1),Rq={keyEncoding:"json",valueEncoding:"json"},RD=e=>t=>n=>()=>e.put(t,n),$D=e=>t=>()=>new Promise((c,v)=>{let s=(a,p)=>{c(p)};e.get(t,Rq,s)});var kD=e=>t=>()=>e.del(t);var OD=e=>()=>e.keys().all();function aI(e){return function(t){return function(n){return function(){e.then(n,t)}}}}var Oq=Bd(Pe),Hq=at(kM),Pq=ye(Ce),Nq=bn(cM(m1)(ho)),Bq=Iy(ho),Wq=V(Np(Pa)),Uq=bh(ho),qq=ae(Sn),zq=Je(Ln),Vq=function(e){return function(t){return Ao(function(n){return Oq(Hq)(aI(t)(function(c){return n(qe.create(e(c)))()})(function(c){return n(He.create(c))()}))})}};var Gq=function(e){return gn(function(t){return Rn("Promise failed, couldn't extract JS Error or String")})(Pq)(c0(Nq(Bq("Error")(e))(Wq(Rn)(Uq(e)))))},Jq=Vq(Gq),xu=function(e){return qq(zq(e))(Jq)};var I_=e=>e===void 0;var iI=Fe(Uf),uI=ae(Sn),r8=_n(Mi),o8=r8(Nu),sI=Je(Ln),PD=ee(Do);var cI=function(e){var t=qf(e);return function(n){return function(c){var v=qf(c);return function(s){return function(a){return function(p){return function(u){return xu(RD(a.value0)(t(p))(v(u)))}}}}}}};var lI=function(e){var t=qf(e);return function(n){return function(c){return function(v){var s=e_(v);return function(a){return function(p){return uI(xu($D(a.value0)(t(p))))(function(u){var r=I_(u);if(r)return PD(G.value);var i=s(u);if(i instanceof qe)return sI(Pr(Rn(iI(i.value0))));if(i instanceof He)return PD(new z(i.value0));throw new Error("Failed pattern match at Level.DB.Operations (line 28, column 10 - line 30, column 40): "+[i.constructor.name])})}}}}}};var fI=function(e){var t=qf(e);return function(n){return function(c){return function(v){return function(s){return function(a){return xu(kD(s.value0)(t(a)))}}}}}},dI=function(e){var t=e_(e);return function(n){return function(c){return uI(xu(OD(c.value0)))(function(v){var s=o8(t)(v);if(s instanceof qe)return sI(Pr(Rn(iI(s.value0))));if(s instanceof He)return PD(s.value0);throw new Error("Failed pattern match at Level.DB.Operations (line 71, column 3 - line 73, column 26): "+[s.constructor.name])})}}};var pI=Aa(ID(),1),i8={keyEncoding:"json",valueEncoding:"json"},ND=e=>()=>new pI.Level(e,i8);var l8=V(Pe),f8=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}();var hI=function(e){return l8(f8.create)(ND(e))};var BD=qc,R_=Uc,p8=cI(BD)(R_)(qc)(Uc),h8=lI(BD)(R_)(qc)(Uc),_8=fI(BD)(R_)(qc)(Uc),_I=function(e){return function(t){return function(n){return p8(e)(t)(n)}}},vI=function(e){return function(t){return h8(e)(t)}},fd=hI("filesystem"),mI=dI(R_)(Uc),gI=function(e){return function(t){return _8(e)(t)}};var wa=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Gr=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ar=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var CI=function(e){return e instanceof Ar?new z(e.value1):e instanceof Gr?new z(e.value0):G.value},bI=function(e){return e instanceof Ar?new z(e.value0):e instanceof wa?new z(e.value0):G.value};var wI=function(e){var t=me(e);return function(n){var c=me(n);return{append:function(v){return function(s){if(v instanceof wa&&s instanceof wa)return new wa(t(v.value0)(s.value0));if(v instanceof wa&&s instanceof Gr)return new Ar(v.value0,s.value0);if(v instanceof wa&&s instanceof Ar)return new Ar(t(v.value0)(s.value0),s.value1);if(v instanceof Gr&&s instanceof wa)return new Ar(s.value0,v.value0);if(v instanceof Gr&&s instanceof Gr)return new Gr(c(v.value0)(s.value0));if(v instanceof Gr&&s instanceof Ar)return new Ar(s.value0,c(v.value0)(s.value1));if(v instanceof Ar&&s instanceof wa)return new Ar(t(v.value0)(s.value0),v.value1);if(v instanceof Ar&&s instanceof Gr)return new Ar(v.value0,c(v.value1)(s.value0));if(v instanceof Ar&&s instanceof Ar)return new Ar(t(v.value0)(s.value0),c(v.value1)(s.value1));throw new Error("Failed pattern match at Data.These (line 23, column 1 - line 32, column 56): "+[v.constructor.name,s.constructor.name])}}}}};var Au=function(e){return function(){console.log(e)}},$_=function(e){return function(){console.warn(e)}};var F8=me(Hu),x8=at(Na),EI=zu(Mt),TI=EI(Na),H_=Fo(Mt)(Na),Sa=V(It),UD=ut(Pu),A8=me(jt),MI=Wt(Mt),I8=MI(Na),R8=ng(NF),P_=V(Tt),$8=xt(LF),LI=ae(gr),k8=vp(cg(Mt)),FI=V(uc(It));var O8=dp(Mt)(vr),H8=ae(gi),P8=wp(Vl),N8=na(xl(_o)),B8=Fo(Ul(Mt))(Na),W8=Fe(Mo),N_=function(e){return e},U8=function(e){return e},qD=function(e){return function(t){return function(n){return t+(e+n)}}},q8={append:function(e){return function(t){return e+t}}},z8={append:function(e){return function(t){return e+t}}},xI=wI(q8)(z8),AI=xE(xI),O_=MI(AI),V8=EI(AI),dd=me(Em(xI)),SI=function(e){var t=gn(function(n){return x8})(function(n){return TI([n.value0,": ",n.value1])});return H_("; ")(Sa(t)(e))},G8=function(e){if(e instanceof uu)return"#"+e.value0;if(e instanceof Za)return"."+e.value0;if(e instanceof su)return"["+(e.value0+"]");if(e instanceof cu)return"["+(e.value0+("='"+(e.value1+"']")));if(e instanceof lu)return"["+(e.value0+("^='"+(e.value1+"']")));if(e instanceof fu)return"["+(e.value0+("$='"+(e.value1+"']")));if(e instanceof du)return"["+(e.value0+("*='"+(e.value1+"']")));if(e instanceof pu)return"["+(e.value0+("~='"+(e.value1+"']")));if(e instanceof hu)return"["+(e.value0+("|='"+(e.value1+"']")));if(e instanceof ei)return":"+e.value0;if(e instanceof Hc)return":"+(e.value0+("("+(H_(",")(e.value1)+")")));throw new Error("Failed pattern match at CSS.Render (line 178, column 1 - line 178, column 33): "+[e.constructor.name])},J8=function(e){return function(t){if(e.length===0&&t instanceof Vh)return["*"];if(t instanceof Vh)return[""];if(t instanceof _0)return[t.value0];if(t instanceof v0)return UD(Sa(qD(" > "))(fi(t.value0)))(fi(t.value1));if(t instanceof m0)return UD(Sa(qD(" "))(fi(t.value0)))(fi(t.value1));if(t instanceof OF)return UD(Sa(qD(" + "))(fi(t.value0)))(fi(t.value1));if(t instanceof HF)return A8(fi(t.value0))(fi(t.value1));throw new Error("Failed pattern match at CSS.Render (line 143, column 1 - line 143, column 63): "+[e.constructor.name,t.constructor.name])}},fi=function(e){return Sa(function(t){return t+I8(G8)(R8(e.value0))})(J8(e.value0)(e.value1))},j8=function(){var e=H_(", ");return function(t){return e(fi(t))}}(),Ps=function(e){return e.length===0?G.value:P_(function(t){return new Jn(t.head,t.tail)})(gp(e))};var al=function(e){if(e.value0 instanceof VF)return tt(e.value0.value0)(function(t){return BF(al(t))(e.value0.value0)})(Ps(e.value1));if(e.value0 instanceof y0)return tt(e.value0.value0)(function(t){return En(al(t))(e.value0.value0)})(Ps(e.value1));if(e.value0 instanceof qF)return tt(e.value0.value0)(function(t){return En(e.value0.value0)(al(t))})(Ps(e.value1));if(e.value0 instanceof zF)return tt(Gh("TODO"))(al)(Ps(rg(e.value0.value0)(yn(e.value0)(e.value1))));if(e.value0 instanceof UF)return tt(it($t)(e.value0.value0))(function(t){return it(al(t))(e.value0.value0)})(Ps(e.value1));throw new Error("Failed pattern match at CSS.Render (line 171, column 3 - line 176, column 102): "+[e.value0.constructor.name])},K8=function(e){return Rf(e)},Q8=function(e){return z.create(Gr.create(N_($8("@import url("+(e+`);
`)))))},X8=function(e){return e},zD=function(e){return LI(e)(function(){var t=P_(X8);return function(n){return t(CI(n))}}())},Y8=function(e){return e},II=function(e){return LI(e)(function(){var t=P_(Y8);return function(n){return t(bI(n))}}())},Z8=function(e){return tt(e.value0)(function(t){return"("+(e.value0+(": "+(Rf(t)+")")))})(e.value1)},ez=function(e){return"@media "+(K8(e.value1)+k8(F8)(FI(function(t){return function(n){return" and "+n}(Z8(t))})(e.value2)))};var tz=function(e){return function(t){if(e instanceof Fr&&t instanceof Fr)return[new He(new ne(e.value0,t.value0))];if(e instanceof Lr&&t instanceof Fr)return Sa(function(n){return new He(new ne(n.value0+n.value1,t.value0))})(e.value0);if(e instanceof Fr&&t instanceof Lr)return Sa(function(n){return new He(new ne(e.value0,n.value0+n.value1))})(t.value0);if(e instanceof Lr&&t instanceof Lr)return Sa(function(n){return tt(new qe(n.value0+n.value1))(function(){var c=ne.create(n.value0+n.value1);return function(v){return He.create(c(function(s){return n.value0+s}(v)))}}())(O8(n.value0)(t.value0))})(e.value0);throw new Error("Failed pattern match at CSS.Render (line 158, column 1 - line 158, column 80): "+[e.constructor.name,t.constructor.name])}},VD=function(e){return tz(e.value0)(e.value1)},nz=function(e){return function(t){var n=H8(t)(VD),c=P_(function(s){return wa.create(U8(SI(P8(s))))})(Ps(n)),v=function(s){return z.create(Gr.create(N_(H_(" ")([j8(al(s)),"{",SI(n),`}
`]))))};return tt(c)(v)(Ps(e))}},pd=function(e){return function(t){var n=function(h){return h instanceof GF?new z(new ne(h.value0,h.value1)):G.value},c=O_(Ba(Oe(rz)(e)))(oa(n)(t)),v=function(h){return h instanceof Pf?new z(new ne(h.value0,h.value1)):G.value},s=function(){var h=oa(v)(t),_=N8(xT)(h);return _?nz(e)(h):G.value}(),a=function(h){return pd(yn(h)(e))},p=function(h){return h instanceof D0?new z(new ne(h.value0,h.value1)):G.value},u=V8(Sa(Ba(a))(oa(p)(t))),r=function(h){return h instanceof jF?new z(h.value0):G.value},i=O_(oz)(oa(r)(t)),l=function(h){return h instanceof KF?new z(h.value0):G.value},d=O_(Q8)(oa(l)(t)),f=function(h){return h instanceof JF?new z(h.value0):G.value},o=O_(iz)(oa(f)(t));return dd(s)(dd(d)(dd(i)(dd(o)(dd(u)(c)))))}},rz=function(e){return function(t){return function(n){return z.create(Gr.create(N_(ez(e)+(" { "+(Mn("")(zD(pd(t)(n)))+` }
`)))))}}},oz=function(e){var t=" "+(e.value0+(" { "+(B8(" ")(FI(Ba(az))(e.value1))+` }
`))),n=["@keyframes","@-webkit-keyframes","@-moz-keyframes","@-o-keyframes"],c=TI(Sa(function(v){return v+t})(n));return new z(new Gr(c))},az=function(e){return function(t){var n=Mn("")(II(pd([])(t)));return W8(e)+("% "+("{ "+(n+" }")))}},iz=function(e){return z.create(Gr.create(N_("@font-face { "+(Mn("")(II(pd([])(e)))+` }
`))))},RI=function(){var e=pd([]);return function(t){return e(Nf(t))}}();var Ea=function(){var e=function(t){return function(n){return new z(new oh(t,n))}};return function(t){return TL(e(t))}}(),GD=function(e){return ML(e)};var $I=GD(LL);var kI=function(e){return GD(e)("type")};var il=$I("width");var ul=$I("height");var JD=function(){return xL(G.value)}();var sz=kI(Vy),cz=ae(gi),lz=wf(Mt),OI=function(e){var t=Mn("")(zD(RI(e)));return s0([sz("text/css")])([tu(t)])},jD=function(){var e=function(){var s=to("; "),a=vL(Bu)(function(p){return function(u){return[p+(": "+u)]}});return function(p){return s(a(p))}}(),t=ag(Wt(fp)(Bu)(ic)),n=function(s){return s instanceof Pf?new z(new ne(s.value0,s.value1)):G.value},c=function(s){var a=cz(oa(n)(s))(function(p){return t(VD(p))});return lz(a)},v=JD("style");return function(s){return v(e(c(Nf(s))))}}();function PI(e,t,n){var c=Object.prototype.toString.call(n);return c.indexOf("[object HTML")===0&&c.indexOf("Element]")===c.length-8?t(n):e}var NI=Z;var hd=function(e){return PI(G.value,z.create,e)};var WI=Lt(Ft),BI=WI(Jh),di=ae(kn),KD=Yu(Fn),W_=vt(Zn)(zt),QD=WI(kn),dz=Qn(Fn),UI=function(){function e(){}return e.value=new e,e}(),qI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),zI=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pz=function(e){return function(t){var n=ou([_s([Ea("editor"),jD(BI(Bf(kt(500)))(function(){return Wf(kt(500))}))])([]),$c([gs(function(c){return qI.create(ao(c))})])([tu("Save")]),$c([gs(function(c){return zI.create(ao(c))})])([tu("Exit")])]);return _s([jD(BI(Nc(ZF))(function(){return sx(ux)}))])([n])}},hz=function(e){var t=Je(Er(e.MonadEffect0())),n=Xn(Ih(e));return function(c){return function(v){if(v instanceof UI)return di(t(fd))(function(s){return di(KD(function(a){return a.filePath}))(function(a){return di(n(vI(s)(a)))(function(p){return di(Wr("editor"))(function(u){return Oe(W_)(u)(function(r){return Oe(W_)(hd(r))(function(i){return di(t(SF(i)(Wh.default)))(function(l){return di(t(p0(l)))(function(d){return QD(Oe(W_)(p)(function(f){return t(MF(f)(d))}))(function(){return dz(function(f){var o={};for(var h in f)({}).hasOwnProperty.call(f,h)&&(o[h]=f[h]);return o.editSession=new z(new ne(s,new ne(l,d))),o})})})})})})})})})});if(v instanceof qI)return QD(t(dr(v.value0)))(function(){return di(KD(function(s){return s.editSession}))(function(s){return di(KD(function(a){return a.filePath}))(function(a){return Oe(W_)(s)(function(p){return di(t(d0(p.value1.value1)))(function(u){return n(_I(p.value0)(a)(u))})})})})});if(v instanceof zI)return QD(t(dr(v.value0)))(function(){return _a(void 0)});throw new Error("Failed pattern match at Example.Editor (line 73, column 16 - line 95, column 18): "+[v.constructor.name])}}},VI=function(e){var t=pz(e),n=hz(e);return function(c){return Mr({initialState:function(v){return{editSession:G.value,filePath:v}},render:t,eval:Tr({handleAction:n(c),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(UI.value),finalize:sn.finalize})})}};function Iu(e){return function(){return e.getContext("2d")}}function _d(e){return function(){return e.width}}function vd(e){return function(){return e.height}}function md(e){return function(t){return function(){e.width=t}}}function gd(e){return function(t){return function(){e.height=t}}}function XD(e){return function(){return e.toDataURL()}}function YD(e){return function(t){return function(){e.lineWidth=t}}}function ZD(e){return function(t){return function(){e.setLineDash(t)}}}function eC(e){return function(t){return function(){e.fillStyle=t}}}function tC(e){return function(t){return function(){e.strokeStyle=t}}}function nC(e){return function(t){return function(){e.shadowColor=t}}}function rC(e){return function(t){return function(){e.shadowBlur=t}}}function oC(e){return function(t){return function(){e.shadowOffsetX=t}}}function aC(e){return function(t){return function(){e.shadowOffsetY=t}}}function iC(e){return function(t){return function(){e.miterLimit=t}}}function U_(e){return function(t){return function(){e.lineCap=t}}}function q_(e){return function(t){return function(){e.lineJoin=t}}}function GI(e){return function(t){return function(){e.globalCompositeOperation=t}}}function uC(e){return function(t){return function(){e.globalAlpha=t}}}function z_(e){return function(){e.beginPath()}}function V_(e){return function(){e.stroke()}}function G_(e){return function(){e.fill()}}function sC(e){return function(){e.clip()}}function cC(e){return function(t){return function(n){return function(){e.lineTo(t,n)}}}}function lC(e){return function(t){return function(n){return function(){e.moveTo(t,n)}}}}function fC(e){return function(){e.closePath()}}function dC(e){return function(t){return function(){e.arc(t.x,t.y,t.radius,t.start,t.end,t.useCounterClockwise)}}}function pC(e){return function(t){return function(){e.rect(t.x,t.y,t.width,t.height)}}}function hC(e){return function(t){return function(){e.fillRect(t.x,t.y,t.width,t.height)}}}function _C(e){return function(t){return function(){e.strokeRect(t.x,t.y,t.width,t.height)}}}function vC(e){return function(t){return function(){e.clearRect(t.x,t.y,t.width,t.height)}}}function mC(e){return function(t){return function(){e.scale(t.scaleX,t.scaleY)}}}function gC(e){return function(t){return function(){e.rotate(t)}}}function yC(e){return function(t){return function(){e.translate(t.translateX,t.translateY)}}}function DC(e){return function(t){return function(){e.transform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function CC(e){return function(t){return function(){e.setTransform(t.a,t.b,t.c,t.d,t.e,t.f)}}}function JI(e){return function(){return e.textAlign}}function jI(e){return function(t){return function(){e.textAlign=t}}}function KI(e){return function(){return e.textBaseline}}function QI(e){return function(t){return function(){e.textBaseline=t}}}function bC(e){return function(){return e.font}}function wC(e){return function(t){return function(){e.font=t}}}function SC(e){return function(t){return function(n){return function(c){return function(){e.fillText(t,n,c)}}}}}function EC(e){return function(t){return function(n){return function(c){return function(){e.strokeText(t,n,c)}}}}}function TC(e){return function(t){return function(){return e.measureText(t)}}}function J_(e){return function(){e.save()}}function j_(e){return function(){e.restore()}}function MC(e){return function(t){return function(n){return function(c){return function(v){return function(){return e.getImageData(t,n,c,v)}}}}}}function LC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(p){return function(){e.putImageData(t,n,c,v,s,a,p)}}}}}}}}}function FC(e){return function(t){return function(n){return function(c){return function(){e.putImageData(t,n,c)}}}}}function xC(e){return function(t){return function(n){return function(){return e.createImageData(t,n)}}}}function AC(e){return function(t){return function(n){return function(c){return function(){e.drawImage(t,n,c)}}}}}function IC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(){e.drawImage(t,n,c,v,s)}}}}}}}function RC(e){return function(t){return function(n){return function(c){return function(v){return function(s){return function(a){return function(p){return function(u){return function(r){return function(){e.drawImage(t,n,c,v,s,a,p,u,r)}}}}}}}}}}}function XI(e){return function(t){return function(n){return function(){return e.createPattern(t,n)}}}}function $C(e){return function(t){return function(){e.fillStyle=t}}}function kC(e){return function(t){return function(){return e.createLinearGradient(t.x0,t.y0,t.x1,t.y1)}}}function OC(e){return function(t){return function(){return e.createRadialGradient(t.x0,t.y0,t.r0,t.x1,t.y1,t.r1)}}}function HC(e){return function(t){return function(){e.fillStyle=t}}}function PC(e){return function(t){return function(){e.quadraticCurveTo(t.cpx,t.cpy,t.x,t.y)}}}function NC(e){return function(t){return function(){e.bezierCurveTo(t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.x,t.y)}}}var mz=function(e){return ts(Pr(e))},BC=function(e){return mz(Rn(e))};var YI=V(Pe),Dz=Eo(xm),ZI=function(){function e(){}return e.value=new e,e}(),eR=function(){function e(){}return e.value=new e,e}(),tR=function(){function e(){}return e.value=new e,e}(),nR=function(){function e(){}return e.value=new e,e}(),rR=function(){function e(){}return e.value=new e,e}(),oR=function(){function e(){}return e.value=new e,e}(),aR=function(){function e(){}return e.value=new e,e}(),iR=function(){function e(){}return e.value=new e,e}(),uR=function(){function e(){}return e.value=new e,e}(),sR=function(){function e(){}return e.value=new e,e}(),cR=function(){function e(){}return e.value=new e,e}(),Cz=function(){function e(){}return e.value=new e,e}(),bz=function(){function e(){}return e.value=new e,e}(),wz=function(){function e(){}return e.value=new e,e}(),Sz=function(){function e(){}return e.value=new e,e}(),Ez=function(){function e(){}return e.value=new e,e}(),Tz=function(){function e(){}return e.value=new e,e}(),Mz=function(){function e(){}return e.value=new e,e}(),Lz=function(){function e(){}return e.value=new e,e}(),Fz=function(){function e(){}return e.value=new e,e}(),xz=function(){function e(){}return e.value=new e,e}(),Az=function(){function e(){}return e.value=new e,e}(),Iz=function(){function e(){}return e.value=new e,e}(),Rz=function(){function e(){}return e.value=new e,e}(),$z=function(){function e(){}return e.value=new e,e}(),kz=function(){function e(){}return e.value=new e,e}(),Oz=function(){function e(){}return e.value=new e,e}(),Hz=function(){function e(){}return e.value=new e,e}(),Pz=function(){function e(){}return e.value=new e,e}(),Nz=function(){function e(){}return e.value=new e,e}(),Bz=function(){function e(){}return e.value=new e,e}(),Wz=function(){function e(){}return e.value=new e,e}(),Uz=function(){function e(){}return e.value=new e,e}(),qz=function(){function e(){}return e.value=new e,e}(),zz=function(){function e(){}return e.value=new e,e}(),Vz=function(){function e(){}return e.value=new e,e}(),Gz=function(){function e(){}return e.value=new e,e}(),Jz=function(){function e(){}return e.value=new e,e}(),jz=function(){function e(){}return e.value=new e,e}(),Kz=function(){function e(){}return e.value=new e,e}(),Qz=function(){function e(){}return e.value=new e,e}(),Xz=function(){function e(){}return e.value=new e,e}(),Yz=function(){function e(){}return e.value=new e,e}(),Zz=function(){function e(){}return e.value=new e,e}(),eV=function(){function e(){}return e.value=new e,e}(),tV=function(){function e(){}return e.value=new e,e}(),nV=function(){function e(){}return e.value=new e,e}();var lR=function(e){var t=function(n){return n==="top"?ZI.value:n==="hanging"?eR.value:n==="middle"?tR.value:n==="alphabetic"?nR.value:n==="ideographic"?rR.value:n==="bottom"?oR.value:BC("invalid TextBaseline: "+n)};return YI(t)(KI(e))},fR=function(e){var t=function(n){return n==="left"?aR.value:n==="right"?iR.value:n==="center"?uR.value:n==="start"?sR.value:n==="end"?cR.value:BC("invalid TextAlign: "+n)};return YI(t)(JI(e))};var dR=function(e){return function(t){var n=function(c){if(c instanceof ZI)return"top";if(c instanceof eR)return"hanging";if(c instanceof tR)return"middle";if(c instanceof nR)return"alphabetic";if(c instanceof rR)return"ideographic";if(c instanceof oR)return"bottom";throw new Error("Failed pattern match at Graphics.Canvas (line 577, column 5 - line 577, column 33): "+[c.constructor.name])};return QI(e)(n(t))}},pR=function(e){return function(t){var n=function(c){if(c instanceof aR)return"left";if(c instanceof iR)return"right";if(c instanceof uR)return"center";if(c instanceof sR)return"start";if(c instanceof cR)return"end";throw new Error("Failed pattern match at Graphics.Canvas (line 531, column 5 - line 531, column 32): "+[c.constructor.name])};return jI(e)(n(t))}},hR=function(e){return function(t){if(t instanceof Ez)return q_(e)("bevel");if(t instanceof Tz)return q_(e)("round");if(t instanceof Mz)return q_(e)("miter");throw new Error("Failed pattern match at Graphics.Canvas (line 253, column 1 - line 253, column 52): "+[e.constructor.name,t.constructor.name])}},_R=function(e){return function(t){if(t instanceof Lz)return U_(e)("round");if(t instanceof Fz)return U_(e)("square");if(t instanceof xz)return U_(e)("butt");throw new Error("Failed pattern match at Graphics.Canvas (line 238, column 1 - line 238, column 50): "+[e.constructor.name,t.constructor.name])}},vR=function(e){return function(t){var n=function(c){if(c instanceof Az)return"source-over";if(c instanceof Iz)return"source-in";if(c instanceof Rz)return"source-out";if(c instanceof $z)return"source-atop";if(c instanceof kz)return"destination-over";if(c instanceof Oz)return"destination-in";if(c instanceof Hz)return"destination-out";if(c instanceof Pz)return"destination-atop";if(c instanceof Nz)return"lighter";if(c instanceof Bz)return"copy";if(c instanceof Wz)return"xor";if(c instanceof Uz)return"multiply";if(c instanceof qz)return"screen";if(c instanceof zz)return"overlay";if(c instanceof Vz)return"darken";if(c instanceof Gz)return"lighten";if(c instanceof Jz)return"color-dodge";if(c instanceof jz)return"color-burn";if(c instanceof Kz)return"hard-light";if(c instanceof Qz)return"soft-light";if(c instanceof Xz)return"difference";if(c instanceof Yz)return"exclusion";if(c instanceof Zz)return"hue";if(c instanceof eV)return"saturation";if(c instanceof tV)return"color";if(c instanceof nV)return"luminosity";throw new Error("Failed pattern match at Graphics.Canvas (line 326, column 5 - line 326, column 45): "+[c.constructor.name])};return GI(e)(n(t))}},mR=function(e){return function(t){return Dz(gd(e)(t.height))(md(e)(t.width))}};var gR=function(e){return function(){var n=_d(e)(),c=vd(e)();return{width:n,height:c}}};var yR=function(e){return function(t){return function(n){var c=function(v){if(v instanceof Cz)return"repeat";if(v instanceof bz)return"repeat-x";if(v instanceof wz)return"repeat-y";if(v instanceof Sz)return"no-repeat";throw new Error("Failed pattern match at Graphics.Canvas (line 677, column 5 - line 677, column 31): "+[v.constructor.name])};return XI(e)(t)(c(n))}}};var DR=e=>t=>()=>e.convertToBlob({type:"image/jpeg",quality:t});var CR=function(e){return function(t){return xu(DR(e)(t))}};var iV=ht(Cc),lo=V(Pe),wR=Lt(Ft),uV=V(yo),SR=ye(Ce),sV=function(e){return e},WC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Q_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),UC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),X_=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),qC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),zC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),VC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),GC=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Y_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),JC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Z_=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ev=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),jC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),KC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),QC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),XC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),YC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ZC=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),eb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),nb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),tv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ob=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),rv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ov=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ab=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ub=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),av=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),iv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),uv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),sv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),db=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),pb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),hb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),vb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cv=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),gb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),yb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),lv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Db=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Cb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),bb=function(){function e(t,n,c,v){this.value0=t,this.value1=n,this.value2=c,this.value3=v}return e.create=function(t){return function(n){return function(c){return function(v){return new e(t,n,c,v)}}}},e}(),wb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Sb=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Eb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Tb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Mb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Lb=function(){function e(t,n,c){this.value0=t,this.value1=n,this.value2=c}return e.create=function(t){return function(n){return function(c){return new e(t,n,c)}}},e}(),Fb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),xb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ab=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ib=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Rb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),$b=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),kb=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),cV=function(e){return e};var lV=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof WC)return new WC(t(n)(c.value0));if(c instanceof Q_)return new Q_(function(v){return n(c.value0(v))});if(c instanceof UC)return new UC(c.value0,n(c.value1));if(c instanceof X_)return new X_(function(v){return n(c.value0(v))});if(c instanceof qC)return new qC(c.value0,n(c.value1));if(c instanceof zC)return new zC(function(v){return n(c.value0(v))});if(c instanceof VC)return new VC(c.value0,n(c.value1));if(c instanceof GC)return new GC(function(v){return n(c.value0(v))});if(c instanceof Y_)return new Y_(c.value0,n(c.value1));if(c instanceof JC)return new JC(c.value0,n(c.value1));if(c instanceof Z_)return new Z_(c.value0,n(c.value1));if(c instanceof ev)return new ev(c.value0,n(c.value1));if(c instanceof jC)return new jC(c.value0,n(c.value1));if(c instanceof KC)return new KC(c.value0,n(c.value1));if(c instanceof QC)return new QC(c.value0,n(c.value1));if(c instanceof XC)return new XC(c.value0,n(c.value1));if(c instanceof YC)return new YC(c.value0,n(c.value1));if(c instanceof ZC)return new ZC(c.value0,n(c.value1));if(c instanceof eb)return new eb(c.value0,n(c.value1));if(c instanceof tb)return new tb(c.value0,n(c.value1));if(c instanceof nb)return new nb(c.value0,n(c.value1));if(c instanceof tv)return new tv(n(c.value0));if(c instanceof nv)return new nv(n(c.value0));if(c instanceof rb)return new rb(n(c.value0));if(c instanceof ob)return new ob(n(c.value0));if(c instanceof rv)return new rv(c.value0,n(c.value1));if(c instanceof ov)return new ov(c.value0,n(c.value1));if(c instanceof ab)return new ab(n(c.value0));if(c instanceof ib)return new ib(c.value0,n(c.value1));if(c instanceof ub)return new ub(c.value0,n(c.value1));if(c instanceof av)return new av(c.value0,n(c.value1));if(c instanceof sb)return new sb(c.value0,n(c.value1));if(c instanceof iv)return new iv(c.value0,n(c.value1));if(c instanceof cb)return new cb(c.value0,n(c.value1));if(c instanceof uv)return new uv(c.value0,n(c.value1));if(c instanceof sv)return new sv(c.value0,n(c.value1));if(c instanceof lb)return new lb(c.value0,n(c.value1));if(c instanceof fb)return new fb(c.value0,n(c.value1));if(c instanceof db)return new db(function(v){return n(c.value0(v))});if(c instanceof pb)return new pb(c.value0,n(c.value1));if(c instanceof hb)return new hb(function(v){return n(c.value0(v))});if(c instanceof _b)return new _b(c.value0,n(c.value1));if(c instanceof vb)return new vb(function(v){return n(c.value0(v))});if(c instanceof mb)return new mb(c.value0,n(c.value1));if(c instanceof cv)return new cv(c.value0,c.value1,n(c.value2));if(c instanceof gb)return new gb(c.value0,c.value1,n(c.value2));if(c instanceof yb)return new yb(c.value0,function(v){return n(c.value1(v))});if(c instanceof lv)return new lv(n(c.value0));if(c instanceof fv)return new fv(n(c.value0));if(c instanceof Db)return new Db(c.value0,function(v){return n(c.value1(v))});if(c instanceof Cb)return new Cb(c.value0,c.value1,n(c.value2));if(c instanceof bb)return new bb(c.value0,c.value1,c.value2,n(c.value3));if(c instanceof wb)return new wb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Sb)return new Sb(function(v){return n(c.value0(v))});if(c instanceof Eb)return new Eb(c.value0,c.value1,n(c.value2));if(c instanceof Tb)return new Tb(c.value0,c.value1,n(c.value2));if(c instanceof Mb)return new Mb(c.value0,c.value1,n(c.value2));if(c instanceof Lb)return new Lb(c.value0,c.value1,function(v){return n(c.value2(v))});if(c instanceof Fb)return new Fb(c.value0,n(c.value1));if(c instanceof xb)return new xb(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ab)return new Ab(c.value0,function(v){return n(c.value1(v))});if(c instanceof Ib)return new Ib(c.value0,n(c.value1));if(c instanceof Rb)return new Rb(c.value0,n(c.value1));if(c instanceof $b)return new $b(c.value0,n(c.value1));if(c instanceof kb)return new kb(c.value0,function(v){return n(c.value1(v))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 572, column 1 - line 637, column 64): "+[n.constructor.name,c.constructor.name])}}}},Ta=Kn,bR=wR(Ta),fV=ae(Ta);var Ob=Dr,dV=ee(Ob),cl=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=iV(n),v=n.Bind1(),s=za(v),a=ae(s),p=Sr(Pi(n)),u=Je(fa(t)),r=wR(s),i=ee(bc(n.Applicative0())),l=Xn(Qp(e)),d=ia(lV(v.Apply0().Functor0()));return function(f){var o=function(_){if(_ instanceof WC)return c(_.value0);if(_ instanceof Q_)return a(p)(function(m){return u(lo(_.value0)(_d(m.canvasElement)))});if(_ instanceof UC)return a(p)(function(m){return r(u(md(m.canvasElement)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof X_)return a(p)(function(m){return u(lo(_.value0)(vd(m.canvasElement)))});if(_ instanceof qC)return a(p)(function(m){return r(u(gd(m.canvasElement)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof zC)return a(p)(function(m){return u(lo(_.value0)(gR(m.canvasElement)))});if(_ instanceof VC)return a(p)(function(m){return r(u(mR(m.canvasElement)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof GC)return a(p)(function(m){return u(lo(_.value0)(XD(m.canvasElement)))});if(_ instanceof Y_)return a(p)(function(m){return r(u(YD(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof JC)return a(p)(function(m){return r(u(ZD(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof Z_)return a(p)(function(m){return r(u(eC(m.context2D)(pc(_.value0))))(function(){return i(_.value1)})});if(_ instanceof ev)return a(p)(function(m){return r(u(tC(m.context2D)(pc(_.value0))))(function(){return i(_.value1)})});if(_ instanceof jC)return a(p)(function(m){return r(u(rC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof KC)return a(p)(function(m){return r(u(oC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof QC)return a(p)(function(m){return r(u(aC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof XC)return a(p)(function(m){return r(u(nC(m.context2D)(pc(_.value0))))(function(){return i(_.value1)})});if(_ instanceof YC)return a(p)(function(m){return r(u(iC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof ZC)return a(p)(function(m){return r(u(_R(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof eb)return a(p)(function(m){return r(u(hR(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof tb)return a(p)(function(m){return r(u(vR(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof nb)return a(p)(function(m){return r(u(uC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof tv)return a(p)(function(m){return r(u(z_(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof nv)return a(p)(function(m){return r(u(V_(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof rb)return a(p)(function(m){return r(u(G_(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof ob)return a(p)(function(m){return r(u(sC(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof rv)return a(p)(function(m){return r(u(cC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return i(_.value1)})});if(_ instanceof ov)return a(p)(function(m){return r(u(lC(m.context2D)(_.value0.x)(_.value0.y)))(function(){return i(_.value1)})});if(_ instanceof ab)return a(p)(function(m){return r(u(fC(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof ib)return a(p)(function(m){return r(u(dC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof ub)return a(p)(function(m){return r(u(pC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof av)return a(p)(function(m){return r(u(hC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof sb)return a(p)(function(m){return r(u(_C(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof iv)return a(p)(function(m){return r(u(vC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof cb)return a(p)(function(m){return r(u(mC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof uv)return a(p)(function(m){return r(u(gC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof sv)return a(p)(function(m){return r(u(yC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof lb)return a(p)(function(m){return r(u(DC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof fb)return a(p)(function(m){return r(u(CC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof db)return a(p)(function(m){return u(lo(_.value0)(fR(m.context2D)))});if(_ instanceof pb)return a(p)(function(m){return r(u(pR(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof hb)return a(p)(function(m){return u(lo(_.value0)(lR(m.context2D)))});if(_ instanceof _b)return a(p)(function(m){return r(u(dR(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof vb)return a(p)(function(m){return u(lo(function(y){return _.value0(sV(y))})(bC(m.context2D)))});if(_ instanceof mb)return a(p)(function(m){return r(u(wC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof cv)return a(p)(function(m){return r(u(SC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return i(_.value2)})});if(_ instanceof gb)return a(p)(function(m){return r(u(EC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return i(_.value2)})});if(_ instanceof yb)return a(p)(function(m){return u(lo(_.value1)(TC(m.context2D)(_.value0)))});if(_ instanceof lv)return a(p)(function(m){return r(u(J_(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof fv)return a(p)(function(m){return r(u(j_(m.context2D)))(function(){return i(_.value0)})});if(_ instanceof Db)return a(p)(function(m){return u(lo(_.value1)(MC(m.context2D)(_.value0.x)(_.value0.y)(_.value0.width)(_.value0.height)))});if(_ instanceof Cb)return a(p)(function(m){return r(u(FC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return i(_.value2)})});if(_ instanceof bb)return a(p)(function(m){return r(u(LC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value2.x)(_.value2.y)(_.value2.width)(_.value2.height)))(function(){return i(_.value3)})});if(_ instanceof wb)return a(p)(function(m){return u(lo(_.value1)(xC(m.context2D)(_.value0.width)(_.value0.height)))});if(_ instanceof Sb)return a(p)(function(m){return i(_.value0(m.canvasElement))});if(_ instanceof Eb)return a(p)(function(m){return r(u(AC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)))(function(){return i(_.value2)})});if(_ instanceof Tb)return a(p)(function(m){return r(u(IC(m.context2D)(_.value0)(_.value1.x)(_.value1.y)(_.value1.width)(_.value1.height)))(function(){return i(_.value2)})});if(_ instanceof Mb)return a(p)(function(m){return r(u(RC(m.context2D)(_.value0)(_.value1.source.x)(_.value1.source.y)(_.value1.source.width)(_.value1.source.height)(_.value1.target.x)(_.value1.target.y)(_.value1.target.width)(_.value1.target.height)))(function(){return i(_.value2)})});if(_ instanceof Lb)return a(p)(function(m){return u(lo(_.value2)(yR(m.context2D)(_.value0)(_.value1)))});if(_ instanceof Fb)return a(p)(function(m){return r(u($C(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof xb)return a(p)(function(m){return u(lo(_.value1)(kC(m.context2D)(_.value0)))});if(_ instanceof Ab)return a(p)(function(m){return u(lo(_.value1)(OC(m.context2D)(_.value0)))});if(_ instanceof Ib)return a(p)(function(m){return r(u(HC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof Rb)return a(p)(function(m){return r(u(PC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof $b)return a(p)(function(m){return r(u(NC(m.context2D)(_.value0)))(function(){return i(_.value1)})});if(_ instanceof kb)return a(p)(function(m){return l(uV(_.value1)(CR(m.canvasElement)(_.value0)))});throw new Error("Failed pattern match at Graphics.Canvas.Free (line 58, column 5 - line 58, column 25): "+[_.constructor.name])},h=d(Ni(f))(o);return function(_){return h(function(m){return m}(_))}}};var hr=function(e){return cV(mt(e))},ER=function(e){return hr(new rv(e,void 0))};var TR=function(e){return hr(new ov(e,void 0))};var pV=function(){return hr(new fv(void 0))}(),MR=function(e){return hr(new uv(e,void 0))},hV=function(){return hr(new lv(void 0))}(),yd=function(e){return bR(hV)(function(){return fV(e)(function(t){return bR(pV)(function(){return dV(t)})})})};var ll=function(e){return hr(new Z_(e,void 0))};var LR=function(e){return hr(new Y_(e,void 0))};var FR=function(e){return hr(new ev(e,void 0))};var xR=function(){return hr(new nv(void 0))}();var AR=function(e){return hr(new sv(e,void 0))};var dv=function(){return hr(new Q_(SR))}();var pv=function(){return hr(new X_(SR))}();var Hb=function(e){return function(t){return hr(new cv(e,t,void 0))}},hv=function(e){return hr(new av(e,void 0))};var _v=function(e){return hr(new iv(e,void 0))};var IR=function(){return hr(new tv(void 0))}();var Ma=function(){return window};function RR(e){return e.readyState}var Dd=function(){function e(){}return e.value=new e,e}(),gV=function(){function e(){}return e.value=new e,e}(),yV=function(){function e(){}return e.value=new e,e}();var $R=function(e){return e==="loading"?new z(Dd.value):e==="interactive"?new z(gV.value):e==="complete"?new z(yV.value):G.value};var CV=V(Pe);var OR=Z;var HR=Z;var PR=function(e){return CV(function(){var t=Mn(Dd.value);return function(n){return t($R(n))}}())(function(){return RR(e)})};function fl(e){return function(){return e.document}}var UR=Z;var zR=ae(Sn),d7=Je(Ln),Nb=ln(yr),p7=js(yr),VR=ee(Do),h7=ln(gr),_7=ee(Xt),v7=V(Pe),m7=Lt(Ft),g7=wr(Kp),y7=function(e){return zR(d7(Nb(p7(function(){var t=uL(e);return function(n){return t(OR(n))}}())(fl))(Ma)))(function(t){return VR(h7(hd)(t))})},GR=sf(gn(Pr)(be(_7(void 0)))),D7=Ao(function(e){return function(){var n=Nb(PR)(Nb(fl)(Ma))();if(n instanceof Dd){var c=v7(UR)(Ma)(),v=Sf(function(s){return e(new He(void 0))})();return Py(l0)(v)(!1)(c)(),rs(Ny(l0)(v)(!1)(c))}return e(new He(void 0))(),zg}}),JR=m7(Sn)(D7)(function(){return zR(y7("body"))(function(e){return tt(g7(Rn("Could not find body")))(VR)(e)})});var Bb=ae(kn),b7=ro(Fn),w7=_n(Pl)(Zn),S7=ht(ru),E7=vt(Zn)(zt),T7=Qn(Fn),M7=function(){function e(){}return e.value=new e,e}(),L7=function(e){return vs([Ea("canvas"),il(e.dimensions.width),ul(e.dimensions.height)])},F7=function(e){var t=S7(e.MonadEffect0().Monad0()),n=cl(e);return function(c){var v=n(c);return function(s){return Bb(b7)(function(a){return Oe(w7)(a.canvas)(function(p){return t(sr(v(s))(p))})})}}},x7=function(e){var t=Je(Er(e.MonadEffect0()));return function(n){return Bb(Wr("canvas"))(function(c){return Oe(E7)(c)(function(v){return Bb(t(Iu(v)))(function(s){return T7(function(a){var p={};for(var u in a)({}).hasOwnProperty.call(a,u)&&(p[u]=a[u]);return p.canvas=new z({canvasElement:v,context2D:s}),p})})})})}},jR=function(e){var t=x7(e),n=F7(e);return function(c){return Mr({initialState:function(v){return{dimensions:v,canvas:G.value}},render:L7,eval:Tr({handleAction:t,handleQuery:n(c),receive:sn.receive,initialize:new z(M7.value),finalize:sn.finalize})})}};function mv(e){return function(t){return function(){return t.requestAnimationFrame(n=>e(n)())}}}var gv=ae(kn),KR=vt(Zn)(zt),t$=Lt(Ft),QR=t$(kn),R7=Qn(Fn),XR=Et(Pe),YR=ae(yr),$7=Et(Ho),k7=V(Yy),O7=ro(Fn),ZR=ae(Ta),H7=t$(Ta),P7=ht(ru),n$=function(){function e(){}return e.value=new e,e}(),e$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),N7=function(e){return vs([Ea("canvas"),il(e.dimensions.width),ul(e.dimensions.height)])},B7=function(e){var t=e.MonadEffect0(),n=Je(Er(t)),c=P7(t.Monad0()),v=cl(e);return function(s){var a=v(s);return function(p){if(p instanceof n$)return gv(Wr("canvas"))(function(u){return Oe(KR)(u)(function(r){return gv(n(Iu(r)))(function(i){return QR(R7(function(l){var d={};for(var f in l)({}).hasOwnProperty.call(l,f)&&(d[f]=l[f]);return d.canvas=new z({canvasElement:r,context2D:i}),d}))(function(){return gv(n(lr))(function(l){var d=function(f){return function(){return cr(l.listener)(f)(),XR(YR(Ma)(mv(d)))()}};return QR(n(XR(YR(Ma)(mv(d)))))(function(){return $7(fr(k7(e$.create)(l.emitter)))})})})})})});if(p instanceof e$)return gv(O7)(function(u){return Oe(KR)(u.canvas)(function(r){var i=ZR(dv)(function(l){return ZR(pv)(function(d){return H7(_v({x:0,y:0,width:l,height:d}))(function(){return u.animation(p.value0)})})});return c(sr(a(yd(i)))(r))})});throw new Error("Failed pattern match at Halogen.Canvas.Animate (line 66, column 16 - line 87, column 60): "+[p.constructor.name])}}},r$=function(e){var t=B7(e);return function(n){return Mr({initialState:function(c){return{dimensions:c.dimensions,animation:c.animation,canvas:G.value}},render:N7,eval:Tr({handleAction:t(n),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(n$.value),finalize:sn.finalize})})}};var Wb=Z;var dl=ae(kn),Ub=vt(Zn)(zt),o$=Xu(Fn),V7=ht(ru),i$=Lt(Ft),G7=i$(kn),a$=ae(Ta),J7=i$(Ta),u$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),s$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),c$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),l$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),f$=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Cv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),d$=function(){function e(){}return e.value=new e,e}(),La=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),j7=function(e){if(e instanceof u$)return dr(Wb(e.value0));if(e instanceof s$)return dr(Wb(e.value0));if(e instanceof c$)return dr(ao(e.value0));if(e instanceof l$)return dr(ao(e.value0));if(e instanceof yv)return dr(ao(e.value0));if(e instanceof Dv)return dr(ao(e.value0));if(e instanceof f$)return dr(ao(e.value0));if(e instanceof Cv)return dr(ao(e.value0));if(e instanceof bv)return dr(ao(e.value0));throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 117, column 1 - line 117, column 55): "+[e.constructor.name])},K7=function(e){return vs([Ea("canvas"),il(e.interact.dimensions.width),ul(e.interact.dimensions.height),dF(function(t){return La.create(u$.create(t))}),pF(function(t){return La.create(s$.create(t))}),gs(function(t){return La.create(c$.create(t))}),fF(function(t){return La.create(l$.create(t))}),hF(function(t){return La.create(yv.create(t))}),gF(function(t){return La.create(Dv.create(t))}),_F(function(t){return La.create(f$.create(t))}),vF(function(t){return La.create(Cv.create(t))}),mF(function(t){return La.create(bv.create(t))})])},Q7=function(e){var t=e.MonadEffect0(),n=Je(Er(t)),c=V7(t.Monad0()),v=cl(e);return function(s){var a=v(s);return function(p){if(p instanceof d$)return dl(Wr("canvas"))(function(u){return Oe(Ub)(u)(function(r){return dl(n(Iu(r)))(function(i){var l={canvasElement:r,context2D:i};return dl(o$(function(d){var f={};for(var o in d)({}).hasOwnProperty.call(d,o)&&(f[o]=d[o]);return f.canvas=new z(l),f}))(function(d){return c(sr(a(yd(d.interact.draw(d.interact.world))))(l))})})})});if(p instanceof La)return dl(Wr("canvas"))(function(u){return Oe(Ub)(u)(function(r){return dl(n(Sy(r)))(function(i){return G7(n(j7(p.value0)))(function(){return dl(o$(function(l){var d={};for(var f in l)({}).hasOwnProperty.call(l,f)&&(d[f]=l[f]);return d.interact=function(){var o={};for(var h in l.interact)({}).hasOwnProperty.call(l.interact,h)&&(o[h]=l.interact[h]);return o.world=l.interact.input(p.value0)(i)(l.interact.world),o}(),d}))(function(l){return Oe(Ub)(l.canvas)(function(d){var f=a$(dv)(function(o){return a$(pv)(function(h){return J7(_v({x:0,y:0,width:o,height:h}))(function(){return l.interact.draw(l.interact.world)})})});return c(sr(a(yd(f)))(d))})})})})})});throw new Error("Failed pattern match at Halogen.Canvas.Interact (line 93, column 16 - line 114, column 63): "+[p.constructor.name])}}},p$=function(e){var t=Q7(e);return function(n){return Mr({initialState:function(c){return{interact:c,canvas:G.value}},render:K7,eval:Tr({handleAction:t(n),handleQuery:sn.handleQuery,receive:sn.receive,initialize:new z(d$.value),finalize:sn.finalize})})}};var wv={suspend:EM,fork:TM,join:af,Monad0:function(){return ns},Functor1:function(){return IM}};var Sv=function(e){return e.fork};var Y7=u0();var Ev=function(){return function(e){var t=Y7(e);return function(n){var c=t(n);return function(v){return function(s){return function(a){return function(p){return function(u){return EL(new Af(c(v)(s)(a)(p)(function(r){return z.create(u(r))})))}}}}}}}};var m$=Z,qo=Z,g$=function(e){var t=vt(e)(zt);return function(n){return qo(function(c){return t(n)(c.rendering)})}},aG=Z,y$=function(e){return function(t){return qo(function(n){return aG(t(n.rendering))})}},iG=Z,Tv=function(e){return function(t){return e(t)}},D$=function(e){return function(t){return function(n){return function(c){return function(){var s=nn({})(),a=nn(Ji)(),p=nn(Ji)(),u=nn(n)(),r=nn(new z(Ye.value))(),i=nn(new z(Ye.value))(),l=nn(G.value)(),d=nn(1)(),f=nn(new z(ko))(),o=nn(ko)(),h={component:e,state:e.initialState(t),refs:ko,children:Ji,childrenIn:a,childrenOut:p,selfRef:s,handlerRef:u,pendingQueries:r,pendingOuts:i,pendingHandlers:l,rendering:G.value,fresh:d,subscriptions:f,forks:o,lifecycleHandlers:c};return Pt(h)(s)(),iG(s)}}}}};var uG=vt(Xt)(zt),sG=ln(gr),cG=Ga(e0),vn=ae(Sn),Ut=Je(Ln),lG=Lt(Ft),zo=lG(Sn),T$=vt(Do),fG=T$(kr),M$=Sv(wv),dG=Sc(Ui)(kr),Fa=ee(Do),pG=V(Yg),C$=Bi(Ui),hG=V(yo),b$=wc(Ui),_G=V(Tt),vG=$o(e0),mG=HL(qg),gG=Yp(Ah),yG=iE(ta),DG=$o(Ah),w$=T$(zt),S$=Ga(Ah),CG=Ga(Kt),bG=H1(os),wG=ny(Kt),SG=function(e){return function(t){return function(){var c=Ke(t)(),v=Ke(c.subscriptions)();return uG(Eh)(sG(cG(e))(v))()}}},Mv=function(e){return function(t){return vn(Ut(Ke(e)))(function(n){if(n instanceof G)return t;if(n instanceof z)return Ut(Pt(new z(new Re(t,n.value0)))(e));throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): "+[n.constructor.name])})}},Lv=function(e){return function(t){return zo(Ut(Pt({initializers:Ye.value,finalizers:Ye.value})(e)))(function(){return vn(Ut(t))(function(n){return vn(Ut(Ke(e)))(function(c){return zo(fG(M$)(c.finalizers))(function(){return zo(dG(c.initializers))(function(){return Fa(n)})})})})})}},Ns=sf(gn(Pr)(be(ee(Xt)(void 0)))),E$=function(e){return function(t){return vn(Ut(Ke(t)))(function(n){return Ut(Am(function(c){return{state:c+1|0,value:e(c)}})(n.fresh))})}},zb=function(e){return function(t){return function(n){return vn(Ut(Ke(t)))(function(c){return Ru(e)(t)(c.component.eval(new Rc(pG(z.create)(YM(n)),be(G.value))))})}}},Ru=function(e){return function(t){return function(n){var c=function(s){return function(a){return vn(Ut(Ke(s)))(function(p){return UL(function(u){var r=function(i){return C$(vn(Ut(Ke(i)))(function(l){return qo(function(d){return zb(e)(d.selfRef)(u.value1)})(l)}))};return hG(u.value2)(b$(u.value0(qg)(r)(p.children)))})(a)})}},v=function(s){return function(a){if(a instanceof Tf)return vn(Ut(Ke(s)))(function(p){var u=a.value0(p.state);if(Mc(p.state)(u.value1))return Fa(u.value0);if(en)return zo(Ut(Pt({component:p.component,state:u.value1,refs:p.refs,children:p.children,childrenIn:p.childrenIn,childrenOut:p.childrenOut,selfRef:p.selfRef,handlerRef:p.handlerRef,pendingQueries:p.pendingQueries,pendingOuts:p.pendingOuts,pendingHandlers:p.pendingHandlers,rendering:p.rendering,fresh:p.fresh,subscriptions:p.subscriptions,forks:p.forks,lifecycleHandlers:p.lifecycleHandlers})(s)))(function(){return zo(Lv(p.lifecycleHandlers)(e(p.lifecycleHandlers)(s)))(function(){return Fa(u.value0)})});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): "+[u.constructor.name])});if(a instanceof Mf)return vn(E$(GL)(s))(function(p){return vn(Ut(VL(a.value0(p))(function(u){return Ns(Vb(e)(s)(new is(u)))})))(function(u){return vn(Ut(Ke(s)))(function(r){return zo(Ut(Xr(_G(vG(p)(u)))(r.subscriptions)))(function(){return Fa(a.value1(p))})})})});if(a instanceof Th)return zo(Ut(SG(a.value0)(s)))(function(){return Fa(a.value1)});if(a instanceof ds)return a.value0;if(a instanceof Lf)return c(s)(a.value0);if(a instanceof Ff)return vn(Ut(Ke(s)))(function(p){return vn(Ut(Ke(p.handlerRef)))(function(u){return zo(Mv(p.pendingOuts)(u(a.value0)))(function(){return Fa(a.value1)})})});if(a instanceof Mh)return b$(mG(Ky(function(){var p=Ru(e)(s);return function(u){return C$(p(u))}}())(a.value0)));if(a instanceof Lh)return vn(E$(JL)(s))(function(p){return vn(Ut(Ke(s)))(function(u){return vn(Ut(nn(!1)))(function(r){return vn(M$(AM(Ut(function(){return Xr(gG(p))(u.forks)(),Pt(!0)(r)()}))(Ru(e)(s)(a.value0))))(function(i){return zo(Ut(yG(Ke(r))(Xr(DG(p)(i))(u.forks))))(function(){return Fa(a.value1(p))})})})})});if(a instanceof Fh)return vn(Ut(Ke(s)))(function(p){return vn(Ut(Ke(p.forks)))(function(u){return zo(w$(af)(S$(a.value0)(u)))(function(){return Fa(a.value1)})})});if(a instanceof xh)return vn(Ut(Ke(s)))(function(p){return vn(Ut(Ke(p.forks)))(function(u){return zo(w$(uf(Rn("Cancelled")))(S$(a.value0)(u)))(function(){return Fa(a.value1)})})});if(a instanceof xf)return vn(Ut(Ke(s)))(function(p){return Fa(a.value1(CG(a.value0)(p.refs)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): "+[a.constructor.name])}};return bG(v(t))(n)}}},Vb=function(e){return function(t){return function(n){if(n instanceof oh)return Ut(Oe(Xr)(t)(Tv(function(c){return{component:c.component,state:c.state,refs:wG(be(n.value1))(n.value0)(c.refs),children:c.children,childrenIn:c.childrenIn,childrenOut:c.childrenOut,selfRef:c.selfRef,handlerRef:c.handlerRef,pendingQueries:c.pendingQueries,pendingOuts:c.pendingOuts,pendingHandlers:c.pendingHandlers,rendering:c.rendering,fresh:c.fresh,subscriptions:c.subscriptions,forks:c.forks,lifecycleHandlers:c.lifecycleHandlers}})));if(n instanceof is)return vn(Ut(Ke(t)))(function(c){return Ru(e)(t)(c.component.eval(new Ic(n.value0,void 0)))});throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): "+[n.constructor.name])}}};var TG=ae(yr),MG=Lt(Ft),$$=lp(Xt)(zt),k$=vt(Do)(kr),O$=Sv(wv),bd=ln(yr),H$=vt(Xt),P$=H$(zt),L$=H$($n),F$=MG(Sn),LG=Sc(Ui)(kr),Cd=Je(Ln),x$=ee(Xt),Gb=V(Pe),Jb=ee(Do),jb=jr(Xt),FG=y$(Pe),xG=Et(yo),A$=rh(Xt),AG=g$(Xt),IG=ar(np),RG=Gs(Pe),Kb=ae(Sn),$G=Je(Hp),I$=function(){return nn({initializers:Ye.value,finalizers:Ye.value})}(),R$=function(e){return function(){var n=Ke(e)();return Pt(G.value)(e)(),$$(n)(function(){var c=k$(O$);return function(v){return Ns(c(Ku(v)))}}())()}},kG=function(e){return function(){return bd(P$(L$(Eh)))(Ke(e.subscriptions))(),Pt(G.value)(e.subscriptions)(),bd(L$(function(){var n=uf(Rn("finalized"));return function(c){return Ns(n(c))}}()))(Ke(e.forks))(),Pt(ko)(e.forks)()}},N$=function(e){return function(t){return function(n){var c=function(i){return function(l){return qo(function(d){var f=Ru(a)(d.selfRef)(d.component.eval(new Fc(void 0)));return Xr(function(o){return{initializers:new Re(F$(LG(Ku(o.initializers)))(function(){return F$(f)(function(){return Cd(function(){return R$(d.pendingQueries)(),R$(d.pendingOuts)()})})}),l),finalizers:o.finalizers}})(i)})}},v=function(i){return function(l){return function(d){return i0(function(f){return function(){var h=I$(),_=D$(f)(d)(l)(h)(),m=Ke(i)();return Pt({initializers:Ye.value,finalizers:m.finalizers})(i)(),bd(qo(function(){var y=a(i);return function(C){return y(function(E){return E.selfRef}(C))}}()))(Ke(_))(),bd(c(i)(m.initializers))(Ke(_))(),_}})}}},s=function(i){return function(l){return function(d){return function(f){return a0(function(o){return function(){var _=Gb(o.pop)(Ke(d))(),m=function(){if(_ instanceof z){Pt(_.value0.value1)(d)();var C=Ke(_.value0.value0)();return qo(function(E){return function(){return Oe(Pt)(E.handlerRef)(function(){var g=tt(Jb(void 0))(l);return function(b){return g(o.output(b))}}())(),Ns(Ru(a)(E.selfRef)(E.component.eval(new Ac(o.input,void 0))))()}})(C)(),_.value0.value0}if(_ instanceof G)return v(i)(function(){var E=tt(Jb(void 0))(l);return function(D){return E(o.output(D))}}())(o.input)(o.component)();throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): "+[_.constructor.name])}(),y=Gb(function(C){return Ys(o.get(C))})(Ke(f))();return jb(y)($_("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))(),Xr(o.set(m))(f)(),TG(Ke(m))(FG(function(C){if(C instanceof G)return oM("Halogen internal error: child was not initialized in renderChild");if(C instanceof z)return x$(e.renderChild(C.value0));throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): "+[C.constructor.name])}))()}})}}}},a=function(i){return function(l){return function(){var f=Ke(l)(),o=Gb(Ha)(Ke(f.pendingHandlers))();jb(o)(Pt(new z(Ye.value))(f.pendingHandlers))(),Pt(Ji)(f.childrenOut)(),Pt(f.children)(f.childrenIn)();var h=function(){var E=Mv(f.pendingHandlers),D=Vb(a)(f.selfRef);return function(g){return E(xG(D(g)))}}(),_=function(){var E=Mv(f.pendingQueries);return function(D){return E(h(is.create(D)))}}(),m=e.render(function(E){return Ns(h(E))})(s(i)(_)(f.childrenIn)(f.childrenOut))(f.component.render(f.state))(f.rendering)(),y=Ke(f.childrenOut)(),C=Ke(f.childrenIn)();return A$(C)(function(E){return function(){var g=Ke(E)();return AG(e.removeChild)(g)(),p(i)(g)()}})(),Oe(Xr)(f.selfRef)(Tv(function(E){return{component:E.component,state:E.state,refs:E.refs,children:y,childrenIn:E.childrenIn,childrenOut:E.childrenOut,selfRef:E.selfRef,handlerRef:E.handlerRef,pendingQueries:E.pendingQueries,pendingOuts:E.pendingOuts,pendingHandlers:E.pendingHandlers,rendering:new z(m),fresh:E.fresh,subscriptions:E.subscriptions,forks:E.forks,lifecycleHandlers:E.lifecycleHandlers}}))(),jb(o)(Oe(IG)(void 0)(function(E){return function(){var g=Ke(f.pendingHandlers)();Pt(new z(Ye.value))(f.pendingHandlers)(),P$(function(){var S=k$(O$);return function(T){return Ns(S(Ku(T)))}}())(g)();var b=Ke(f.pendingHandlers)(),L=tt(!1)(w1)(b);return L?RG(Pt(G.value)(f.pendingHandlers))(new rn(void 0))():new hn(void 0)}}))()}}},p=function(i){return qo(function(l){return function(){kG(l)();var f=Ru(a)(l.selfRef)(l.component.eval(new xc(void 0)));return Xr(function(o){return{initializers:o.initializers,finalizers:new Re(f,o.finalizers)}})(i)(),A$(l.children)(function(o){return function(){var _=Ke(o)();return p(i)(_)()}})()}})},u=function(i){return function(l){return function(d){return Kb(Cd(Ke(i)))(function(f){return f?Jb(G.value):zb(a)(l)(d)})}}},r=function(i){return function(l){return function(d){return Lv(l)(function(){var o=Ke(i)();return o?void 0:(Pt(!0)(i)(),p(l)(d)(),qo(function(h){return function(){var m=$G(Ke(h.selfRef))();return $$(m.rendering)(e.dispose)()}})(d)())})}}};return Kb(Cd(I$))(function(i){return Kb(Cd(nn(!1)))(function(l){return Lv(i)(function(){var f=lr(),o=bd(Ke)(v(i)(function(){var h=cr(f.listener);return function(_){return Cd(h(_))}}())(n)(t))();return qo(function(h){return x$({query:u(l)(h.selfRef),messages:f.emitter,dispose:r(l)(i)(o)})})(o)()})})})}}};var Vo=function(e){return function(t){return function(){return t[e]}}};var HG=Vo("baseURI"),PG=Vo("ownerDocument"),B$=Vo("parentNode"),NG=Vo("parentElement");var BG=Vo("childNodes"),WG=Vo("firstChild"),UG=Vo("lastChild"),qG=Vo("previousSibling"),W$=Vo("nextSibling"),zG=Vo("nodeValue");var VG=Vo("textContent");function Qb(e){return function(t){return function(n){return function(){n.insertBefore(e,t)}}}}function Fv(e){return function(t){return function(){t.appendChild(e)}}}function Xb(e){return function(t){return function(){t.removeChild(e)}}}var U$=V(Pe);var Yb=function(){var e=U$(Yt);return function(t){return e(B$(t))}}();var q$=function(){var e=U$(Yt);return function(t){return e(W$(t))}}();var Zb=function(e,t,n){var c=0,v;return function(s){if(c===2)return v;if(c===1)throw new ReferenceError(e+" was needed before it finished initializing (module "+t+", line "+s+")",t,s);return c=1,v=n(),c=2,v}},ew=Et(Pe),QG=ee(Xt),XG=vt(Xt)(zt),YG=fn(),ZG=jr(Xt),e9=na(xl(xl(_o))),t9=ye(Ce),n9=ae(Sn),r9=Je(Ln),o9=V(Pe),a9=ln(yr);var i9=function(e){return function(t){return function(n){return t instanceof z&&n instanceof z?ew(Qb(e)(t.value0)(n.value0)):t instanceof G&&n instanceof z?ew(Fv(e)(n.value0)):QG(void 0)}}},z$=function(e){return function(){var n=Yb(e.node)();return XG(function(c){return Xb(e.node)(c)})(n)()}},u9=function(e){return function(t){return function(n){var c=m$(function(p){return p.node}),v=function(p){return p instanceof z?Br(p.value0):void 0},s=function(p){var u=KL(YG)(p),r=Zb("patch","Halogen.VDom.Driver",function(){return function(h,_){if(h instanceof z){if(_ instanceof Af)return Br(h.value0),l(100)(_.value0);if(_ instanceof $h){var m=Nr(h.value0,_.value0);return pn(new dn(Yn(m),new z(m),r(103),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): "+[_.constructor.name])}return i(104)(_)}}),i=Zb("render","Halogen.VDom.Driver",function(){return function(h){if(h instanceof Af)return l(86)(h.value0);if(h instanceof $h){var _=u(h.value0);return pn(new dn(Yn(_),new z(_),r(89),v))}throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): "+[h.constructor.name])}}),l=Zb("renderComponentSlot","Halogen.VDom.Driver",function(){return function(h){var _=Ke(t)(),m=_(h)(),y=c(m);return pn(new dn(y,G.value,r(117),v))}}),d=r(91),f=i(82),o=l(109);return f},a=CL(e);return{buildWidget:s,buildAttributes:a,document:n}}}},s9=function(e){return function(t){var n=function(c){return function(v){return function(s){return function(a){if(a instanceof G)return function(){var u=nn(v)(),r=u9(c)(u)(e),i=Cf(r)(s),l=Yn(i);return ew(Fv(l)(NI(t)))(),{machine:i,node:l,renderChildRef:u}};if(a instanceof z)return function(){Pt(v)(a.value0.renderChildRef)();var u=Yb(a.value0.node)(),r=q$(a.value0.node)(),i=Nr(a.value0.machine,s),l=Yn(i);return ZG(e9(Mc)(a.value0.node)(l))(i9(l)(r)(u))(),{machine:i,node:l,renderChildRef:a.value0.renderChildRef}};throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): "+[a.constructor.name])}}}};return{render:n,renderChild:t9,removeChild:z$,dispose:z$}}},V$=function(e){return function(t){return function(n){return n9(r9(o9(HR)(a9(fl)(Ma))))(function(c){return N$(s9(c)(n))(e)(t)})}}};var xv=function(e){return e};var l9=wf(Mt);var G$=jt,wd=function(e){return ls(l9(e))};var J$=Bu;var f9=function(e){return function(t){return[new ne(e,ls(t))]}},Bs=function(e){return xv(f9(e))},nw=fn();var j$=function(e){return function(t){var n=e(t);return n.value1}};var _9=V(Ua),v9=V(Ho),m9=Qn(jM(ho)),g9=rh(Kg(ho)),y9=Ev(),D9=nh(),C9=ps(),b9=eh(),rw=function(){function e(){}return e.value=new e,e}(),ow=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),K$=function(e){return e},Sd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ed=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Td=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Md=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Ld=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Av=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Fd=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Iv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xd=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}();var w9={lift:function(e){return function(t){return K$(mt(Ed.create(t)))}}},Q$=ht(w9),S9=vc;var pl=function(e){return{liftEffect:function(){var t=Q$(e.Monad0()),n=Je(e);return function(c){return t(n(c))}}(),Monad0:function(){return S9}}},X$=function(e){var t=e.MonadEffect0(),n=pl(t);return{liftAff:function(){var c=Q$(t.Monad0()),v=Xn(e);return function(s){return c(v(s))}}(),MonadEffect0:function(){return n}}},Y$=Ua,Z$=function(e){var t=V(e);return{map:function(n){return function(c){if(c instanceof Sd)return new Sd(_9(n)(c.value0));if(c instanceof Ed)return new Ed(t(n)(c.value0));if(c instanceof Td)return new Td(function(v){return n(c.value0(v))});if(c instanceof Md)return new Md(c.value0,n(c.value1));if(c instanceof Ld)return new Ld(c.value0,n(c.value1));if(c instanceof Av)return new Av(c.value0,n(c.value1));if(c instanceof Fd)return new Fd(v9(n)(c.value0));if(c instanceof Iv)return new Iv(function(v){return n(c.value0(v))});if(c instanceof xd)return new xd(c.value0,n(c.value1));throw new Error("Failed pattern match at Halogen.XShell.Free (line 71, column 1 - line 80, column 60): "+[n.constructor.name,c.constructor.name])}}}},Us=Kn,E9=ae(Us),ek=Ap,$u=Dr,Ot=function(e){return K$(mt(Sd.create(e)))},tk=function(e){var t=function(n){return m9(yn(n.window))};return j$(g9(e)(t))([])},nk=function(e){return mt(new Md(e,void 0))};var rk=function(e){return mt(new xd(e,void 0))},iw=function(){return function(e){var t=y9(e),n=D9(e);return function(c){var v=t(c),s=n(c);return function(){return function(a){return function(p){return function(u){return function(r){return function(i){var l=v(a)(p)(u)(r)(function(d){return aw.create(i(d))});return rk(s(a)(p)({window:l}))}}}}}}}}},T9=function(e){return mt(new Fd(e))},uw=function(){return function(e){var t=C9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return function(a){return T9(c(v)(s)(a))}}}}}}},Go=function(e){return mt(new Ld(e,void 0))},Jr=function(){return mt(new Td(ye(Ce)))}(),mn=function(e){return E9(Jr)(function(t){return nk(e(t))})},sw=function(){return function(e){var t=b9(e);return function(n){var c=t(n);return function(){return function(v){return function(s){return rk(function(a){return tt(a)(on)(c(v)(s)(a))})}}}}}};var F9=xt(On),x9=cn($f);var lw=x9(F9("background-color"));var At=xt(er),ok=function(){function e(){}return e.value=new e,e}(),I9=function(){function e(){}return e.value=new e,e}(),ak=function(){function e(){}return e.value=new e,e}(),R9=function(){function e(){}return e.value=new e,e}(),$9=function(){function e(){}return e.value=new e,e}(),k9=function(){function e(){}return e.value=new e,e}(),ik=function(){function e(){}return e.value=new e,e}(),fw=function(){function e(){}return e.value=new e,e}(),O9=function(){function e(){}return e.value=new e,e}(),H9=function(){function e(){}return e.value=new e,e}(),P9=function(){function e(){}return e.value=new e,e}(),N9=function(){function e(){}return e.value=new e,e}(),B9=function(){function e(){}return e.value=new e,e}(),W9=function(){function e(){}return e.value=new e,e}(),U9=function(){function e(){}return e.value=new e,e}(),q9=function(){function e(){}return e.value=new e,e}(),z9=function(){function e(){}return e.value=new e,e}(),V9=function(){function e(){}return e.value=new e,e}(),G9=function(){function e(){}return e.value=new e,e}(),J9=function(){function e(){}return e.value=new e,e}(),j9=function(){function e(){}return e.value=new e,e}(),K9=function(){function e(){}return e.value=new e,e}(),Q9=function(){function e(){}return e.value=new e,e}(),X9=function(){function e(){}return e.value=new e,e}(),Y9=function(){function e(){}return e.value=new e,e}(),Z9=function(){function e(){}return e.value=new e,e}(),eJ=function(){function e(){}return e.value=new e,e}(),tJ=function(){function e(){}return e.value=new e,e}(),nJ=function(){function e(){}return e.value=new e,e}(),rJ=function(){function e(){}return e.value=new e,e}(),oJ=function(){function e(){}return e.value=new e,e}(),aJ=function(){function e(){}return e.value=new e,e}(),iJ=function(){function e(){}return e.value=new e,e}();var uJ={value:function(e){if(e instanceof ok)return At("default");if(e instanceof I9)return At("help");if(e instanceof ak)return At("pointer");if(e instanceof R9)return At("progress");if(e instanceof $9)return At("wait");if(e instanceof k9)return At("cell");if(e instanceof ik)return At("crosshair");if(e instanceof fw)return At("text");if(e instanceof O9)return At("vertical-text");if(e instanceof H9)return At("alias");if(e instanceof P9)return At("copy");if(e instanceof N9)return At("move");if(e instanceof B9)return At("no-drop");if(e instanceof W9)return At("not-allowed");if(e instanceof U9)return At("grab");if(e instanceof q9)return At("grabbing");if(e instanceof z9)return At("all-scroll");if(e instanceof V9)return At("col-resize");if(e instanceof G9)return At("row-resize");if(e instanceof J9)return At("n-resize");if(e instanceof j9)return At("e-resize");if(e instanceof K9)return At("s-resize");if(e instanceof Q9)return At("w-resize");if(e instanceof X9)return At("ne-resize");if(e instanceof Y9)return At("nw-resize");if(e instanceof Z9)return At("se-resize");if(e instanceof eJ)return At("sw-resize");if(e instanceof tJ)return At("ew-resize");if(e instanceof nJ)return At("ns-resize");if(e instanceof rJ)return At("nesw-resize");if(e instanceof oJ)return At("nwse-resize");if(e instanceof aJ)return At("zoom-in");if(e instanceof iJ)return At("zoom-out");throw new Error("Failed pattern match at CSS.Cursor (line 47, column 1 - line 80, column 40): "+[e.constructor.name])}};var dw=function(){return ak.value}();var pw=function(){return ok.value}(),qs=cn(uJ)(xt(On)("cursor")),uk=function(){return ik.value}();var cJ=xt(On);var sk=cn($f)(cJ("color"));var ck=xt(er),lk=xt(On);var fJ={value:function(e){return e}},fk=cn(fJ),dk=ck("scroll"),pk=fk(lk("overflow-y"));var hw=fk(lk("overflow")),_w=ck("hidden");var vw=xt(er),pJ=xt(On);var hJ={value:function(e){return e}},hk=vw("underline"),Rv=cn(hJ)(pJ("text-decoration")),_k=vw("overline");var vk=vw("line-through");var ge=Lt(Ft)(Jh),Tn=cn(iu),Dn=xt(On),vJ=C0(iu),mJ=me(kc),gJ=xt(qh),yJ=cn(ys),mw=function(){var e=it($t)(lt("xterm")),t=it($t)(lt("xterm-viewport")),n=ge(gt(it($t)(lt("xterm-underline-1")))(Rv(hk)))(function(){return ge(gt(it($t)(lt("xterm-underline-2")))(Tn(Dn("text-decoration"))("double underline")))(function(){return ge(gt(it($t)(lt("xterm-underline-3")))(Tn(Dn("text-decoration"))("wavy underline")))(function(){return ge(gt(it($t)(lt("xterm-underline-4")))(Tn(Dn("text-decoration"))("dotted underline")))(function(){return gt(it($t)(lt("xterm-underline-5")))(Tn(Dn("text-decoration"))("dashed underline"))})})})}),c=it($t)(lt("xterm-scroll-area")),v=it($t)(lt("xterm-screen")),s=it($t)(lt("xterm-decoration-overview-ruler")),a=ge(gt(it($t)(lt("xterm-overline")))(Rv(_k)))(function(){return ge(gt(it(it($t)(lt("xterm-underline-1")))(lt("xterm-overline")))(Tn(Dn("text-decoration"))("overline underline")))(function(){return ge(gt(it(it($t)(lt("xterm-underline-2")))(lt("xterm-overline")))(Tn(Dn("text-decoration"))("overline double underline")))(function(){return ge(gt(it(it($t)(lt("xterm-underline-3")))(lt("xterm-overline")))(Tn(Dn("text-decoration"))("overline wavy underline")))(function(){return ge(gt(it(it($t)(lt("xterm-underline-4")))(lt("xterm-overline")))(Tn(Dn("text-decoration"))("overline dotted underline")))(function(){return gt(it(it($t)(lt("xterm-underline-5")))(lt("xterm-overline")))(Tn(Dn("text-decoration"))("overline dashed underline"))})})})})}),p=it($t)(lt("xterm-message")),u=it($t)(lt("live-region")),r=it($t)(lt("xterm-helper-textarea")),i=it($t)(lt("xterm-helpers")),l=it($t)(lt("xterm-dim")),d=it($t)(lt("xterm-decoration-top")),f=it($t)(lt("xterm-decoration-container")),o=it($t)(lt("xterm-decoration")),h=it($t)(lt("composition-view")),_=it($t)(lt("xterm-char-measure-element")),m=ge(qr(No))(function(){return ge(Cs(kt(0)))(function(){return ge(yu(kt(0)))(function(){return ge(S0(kt(0)))(function(){return ge(Xh(kt(0)))(function(){return ge(ti(10))(function(){return ge(Tn(Dn("color"))("transparent"))(function(){return Tn(Dn("pointer-events"))("none")})})})})})})}),y=it($t)(lt("xterm-accessibility"));return ge(gt(e)(ge(qs(fw.value))(function(){return ge(qr(Kh))(function(){return vJ(mJ(kf)(gJ("user-select")))("none")})})))(function(){return ge(gt(it(e)(lt("focus")))(Tn(Dn("outline"))("none")))(function(){return ge(gt(it(e)(PF("focus")))(Tn(Dn("outline"))("none")))(function(){return ge(gt(En(e)(i))(ge(qr(No))(function(){return ge(yu(kt(0)))(function(){return ti(5)})})))(function(){return ge(gt(En(e)(r))(ge(fx(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ge(yJ(Dn("border"))(0))(function(){return ge(dx(kt(0))(kt(0))(kt(0))(kt(0)))(function(){return ge(qr(No))(function(){return ge(XF(0))(function(){return ge(Cs(w0(-9999)))(function(){return ge(yu(kt(0)))(function(){return ge(Bf(kt(0)))(function(){return ge(Wf(kt(0)))(function(){return ge(ti(-5))(function(){return ge(Tn(Dn("whitespace"))("nowrap"))(function(){return ge(hw(_w))(function(){return Tn(Dn("resize"))("none")})})})})})})})})})})})})))(function(){return ge(gt(En(e)(h))(ge(lw(gg))(function(){return ge(sk(l1))(function(){return ge(Nc(ex))(function(){return ge(qr(No))(function(){return ge(Tn(Dn("white-space"))("nowrap"))(function(){return ti(1)})})})})})))(function(){return ge(gt(En(e)(it(h)(lt("active"))))(Nc(tx)))(function(){return ge(gt(En(e)(t))(ge(lw(gg))(function(){return ge(pk(dk))(function(){return ge(qs(pw))(function(){return ge(qr(No))(function(){return ge(Xh(kt(0)))(function(){return ge(Cs(kt(0)))(function(){return ge(yu(kt(0)))(function(){return S0(kt(0))})})})})})})})))(function(){return ge(gt(En(e)(v))(qr(Kh)))(function(){return ge(gt(En(e)(En(v)(Gh("canvas"))))(ge(qr(No))(function(){return ge(Cs(kt(0)))(function(){return yu(kt(0))})})))(function(){return ge(gt(En(e)(c))(Tn(Dn("visibility"))("hidden")))(function(){return ge(gt(_)(ge(Nc(YF))(function(){return ge(Tn(Dn("visibility"))("hidden"))(function(){return ge(qr(No))(function(){return ge(yu(kt(0)))(function(){return ge(Cs(w0(-9999)))(function(){return Tn(Dn("line-height"))("normal")})})})})})))(function(){return ge(gt(it(e)(lt("enable-mouse-events")))(qs(pw)))(function(){return ge(gt(it(e)(lt("xterm-cursor-pointer")))(qs(dw)))(function(){return ge(gt(En(e)(it($t)(lt("xterm-cursor-pointer"))))(qs(dw)))(function(){return ge(gt(it(it(e)(lt("column-select")))(lt("focus")))(qs(uk)))(function(){return ge(gt(En(e)(y))(m))(function(){return ge(gt(En(e)(p))(m))(function(){return ge(gt(En(e)(u))(ge(qr(No))(function(){return ge(Cs(kt(-9999)))(function(){return ge(Bf(kt(1)))(function(){return ge(Wf(kt(1)))(function(){return hw(_w)})})})})))(function(){return ge(gt(l)(Tn(Dn("opacity"))("1 !important")))(function(){return ge(n)(function(){return ge(a)(function(){return ge(gt(it($t)(lt("xterm-strikethrough")))(Rv(vk)))(function(){return ge(gt(En(En(v)(f))(o))(ge(ti(6))(function(){return qr(No)})))(function(){return ge(gt(En(En(v)(f))(it(o)(lt("xterm-decoration-top-layer"))))(ti(7)))(function(){return ge(gt(s)(ge(ti(8))(function(){return ge(qr(No))(function(){return ge(yu(kt(0)))(function(){return ge(Xh(kt(0)))(function(){return Tn(Dn("pointer-events"))("none")})})})})))(function(){return gt(d)(ge(ti(2))(function(){return qr(Kh)}))})})})})})})})})})})})})})})})})})})})})})})})})})})}();var mk=e=>()=>e.type,gw=e=>()=>e.cursorY,yw=e=>()=>e.cursorX,Dw=e=>()=>e.viewportY,Cw=e=>()=>e.baseY,bw=e=>()=>e.length,gk=e=>t=>()=>e.getLine(t),ww=e=>()=>e.getNullCell();var hl=function(e){return bf(e)?G.value:new z(Ch(e))};var bJ=V(Pe),wJ=function(){function e(){}return e.value=new e,e}(),SJ=function(){function e(){}return e.value=new e,e}(),yk=function(e){return function(t){return bJ(hl)(gk(e)(t))}},Dk=function(e){return function(){var n=mk(e)();return n==="normal"?wJ.value:SJ.value}};var Ew=e=>()=>e.isWrapped,Tw=e=>()=>e.length;var Pv=ye(Ce),xa=V(Pe),Mw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),$v=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Lw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Fw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),xw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),kv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ov=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Aw=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Hv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Iw=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),LJ={map:function(e){return function(t){if(t instanceof Mw)return new Mw(function(n){return e(t.value0(n))});if(t instanceof $v)return new $v(function(n){return e(t.value0(n))});if(t instanceof Lw)return new Lw(function(n){return e(t.value0(n))});if(t instanceof Fw)return new Fw(function(n){return e(t.value0(n))});if(t instanceof xw)return new xw(function(n){return e(t.value0(n))});if(t instanceof kv)return new kv(function(n){return e(t.value0(n))});if(t instanceof Ov)return new Ov(t.value0,function(n){return e(t.value1(n))});if(t instanceof Aw)return new Aw(t.value0,function(n){return e(t.value1(n))});if(t instanceof Hv)return new Hv(t.value0,function(n){return e(t.value1(n))});if(t instanceof Iw)return new Iw(function(n){return e(t.value0(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 62, column 1 - line 72, column 48): "+[e.constructor.name,t.constructor.name])}}},FJ=ia(LJ);var Ck=function(e){var t=e.Monad0(),n=ae(za(t.Bind1())),c=Sr(Pi(t)),v=Je(fa(e));return function(s){var a=function(p){if(p instanceof Mw)return n(c)(function(u){return v(xa(p.value0)(Dk(u)))});if(p instanceof $v)return n(c)(function(u){return v(xa(p.value0)(yw(u)))});if(p instanceof Lw)return n(c)(function(u){return v(xa(p.value0)(gw(u)))});if(p instanceof Fw)return n(c)(function(u){return v(xa(p.value0)(Dw(u)))});if(p instanceof xw)return n(c)(function(u){return v(xa(p.value0)(Cw(u)))});if(p instanceof kv)return n(c)(function(u){return v(xa(p.value0)(bw(u)))});if(p instanceof Ov)return n(c)(function(u){return v(xa(p.value1)(yk(u)(p.value0)))});if(p instanceof Aw)return v(xa(p.value1)(Ew(p.value0)));if(p instanceof Hv)return v(xa(p.value1)(Tw(p.value0)));if(p instanceof Iw)return n(c)(function(u){return v(xa(p.value0)(ww(u)))});throw new Error("Failed pattern match at Halogen.XTerm.Free.Buffer (line 19, column 5 - line 21, column 40): "+[p.constructor.name])};return FJ(Ni(s))(a)}},Rw=function(e){return mt(new Hv(e,Pv))};var $w=function(e){return mt(new Ov(e,Pv))};var kw=function(){return mt(new $v(Pv))}();var Ow=function(){return mt(new kv(Pv))}();var Hw=e=>()=>e.cursorBlink,Pw=e=>t=>()=>e.cursorBlink=t,Nw=e=>()=>e.fontFamily,Bw=e=>t=>()=>e.fontFamily=t;var wk=Bs("fontFamily");var Sk=Bs("cursorBlink");var Tk=V(Pe),OJ=Lt(Ft),Mk=ye(Ce),Nv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Bv=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),Wv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Ww=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),HJ={map:function(e){return function(t){if(t instanceof Nv)return new Nv(function(n){return e(t.value0(n))});if(t instanceof Bv)return new Bv(t.value0,e(t.value1));if(t instanceof Wv)return new Wv(function(n){return e(t.value0(n))});if(t instanceof Ww)return new Ww(t.value0,e(t.value1));throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 43, column 1 - line 47, column 52): "+[e.constructor.name,t.constructor.name])}}},PJ=ia(HJ);var Jo=function(e){return mt(new Bv(e,void 0))},Lk=function(e){var t=e.Monad0(),n=za(t.Bind1()),c=ae(n),v=Sr(Pi(t)),s=Je(fa(e)),a=OJ(n),p=ee(bc(t.Applicative0()));return function(u){var r=function(i){if(i instanceof Nv)return c(v)(function(l){return s(Tk(i.value0)(Hw(l)))});if(i instanceof Bv)return c(v)(function(l){return a(s(Pw(l)(i.value0)))(function(){return p(i.value1)})});if(i instanceof Wv)return c(v)(function(l){return s(Tk(i.value0)(Nw(l)))});if(i instanceof Ww)return c(v)(function(l){return a(s(Bw(l)(i.value0)))(function(){return p(i.value1)})});throw new Error("Failed pattern match at Halogen.XTerm.Free.Options (line 19, column 5 - line 21, column 49): "+[i.constructor.name])};return PJ(Ni(u))(r)}},Uw=function(){return mt(new Wv(Mk))}(),qw=function(){return mt(new Nv(Mk))}();var xk=Aa(Fk(),1),qv=()=>new xk.FitAddon;var Ik=Aa(Ak(),1),Vv=()=>new Ik.WebglAddon;var $k=Aa(Rk(),1),Jv=()=>new $k.WebLinksAddon;var kk={addon:Z},Ok={addon:Z},Hk={addon:ye(Ce)};var jv=function(e){return e.addon};var jw=e=>e.active,Kw=e=>e.normal,Qw=e=>e.alternate;var Wk=Aa(Bk(),1),Uk=e=>t=>()=>new Wk.Terminal(e,t),qk=e=>()=>e.element,zk=e=>()=>e.textarea,Yw=e=>()=>e.rows,Zw=e=>()=>e.cols,Ad=e=>e.buffer,eS=e=>()=>e.markers;var tS=e=>e.options,nS=e=>t=>()=>e.onBell(t),rS=e=>t=>()=>e.onBinary(n=>t(n)());var oS=e=>t=>()=>e.onData(n=>t(n)()),aS=e=>t=>()=>e.onKey(n=>t(n)()),iS=e=>t=>()=>e.onLineFeed(t),uS=e=>t=>()=>e.onRender(n=>t(n)()),sS=e=>t=>()=>e.onWriteParsed(t),cS=e=>t=>()=>e.onResize(n=>t(n)()),lS=e=>t=>()=>e.onScroll(n=>t(n)()),fS=e=>t=>()=>e.onSelectionChange(t),dS=e=>t=>()=>e.onTitleChange(n=>t(n)());var pS=e=>t=>()=>e.open(t);var hS=e=>t=>n=>()=>e.write(t,n),_S=e=>t=>n=>()=>e.writeln(t,n);var Vk=e=>t=>()=>e.loadAddon(t);var Gk=V(Pe);var Jk=function(){var e=Gk(hl);return function(t){return e(zk(t))}}();var jk=function(e){return function(t){return Uk(wd(e))(wd(t))}},Kk=function(e){var t=jv(e);return function(n){return function(c){return Vk(n)(t(c))}}};var Qk=function(){var e=Gk(hl);return function(t){return e(qk(t))}}();var Qv=V(Ua),um=ye(Ce),pi=V(Pe),mS=Ck(Hp)(np),Xk=Lt(Ft),Xv=Xl(aM),ZJ=Kk(Hk),Yv=ae(Kn),gS=Xk(Kn),_l=jr(Dr),Zv=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),yS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),DS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),em=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),CS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),tm=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),bS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),wS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),SS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),nm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),rm=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ES=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),om=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),am=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),im=function(){function e(t,n){this.value0=t,this.value1=n}return e.create=function(t){return function(n){return new e(t,n)}},e}(),ej={map:function(e){return function(t){if(t instanceof Zv)return new Zv(Qv(e)(t.value0));if(t instanceof yS)return new yS(function(n){return e(t.value0(n))});if(t instanceof DS)return new DS(function(n){return e(t.value0(n))});if(t instanceof em)return new em(function(n){return e(t.value0(n))});if(t instanceof CS)return new CS(function(n){return e(t.value0(n))});if(t instanceof tm)return new tm(Qv(e)(t.value0));if(t instanceof bS)return new bS(Qv(e)(t.value0));if(t instanceof wS)return new wS(Qv(e)(t.value0));if(t instanceof SS)return new SS(function(n){return e(t.value0(n))});if(t instanceof nm)return new nm(t.value0,e(t.value1));if(t instanceof rm)return new rm(t.value0,e(t.value1));if(t instanceof ES)return new ES(function(n){return e(t.value0(n))});if(t instanceof om)return new om(function(n){return e(t.value0(n))});if(t instanceof am)return new am(function(n){return e(t.value0(n))});if(t instanceof im)return new im(t.value0,function(n){return e(t.value1(n))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 96, column 1 - line 111, column 48): "+[e.constructor.name,t.constructor.name])}}},tj=ia(ej),Hn=function(e){return mt(new rm(e,void 0))},Gt=function(e){return mt(new nm(e,void 0))};var sm=function(e){return mt(new tm(e))},Yk=function(){return mt(new om(um))}(),Zk=function(){return mt(new am(um))}();var eO=function(e){var t=e.MonadEffect0(),n=t.Monad0(),c=za(n.Bind1()),v=ae(c),s=Sr(Pi(n)),a=fa(t),p=Lk(a),u=Je(a),r=Xn(Qp(e)),i=Xk(c);return function(l){var d=Ni(l),f=p(d),o=function(h){if(h instanceof Zv)return v(s)(function(_){return sr(f(h.value0))(tS(_))});if(h instanceof yS)return v(s)(function(_){return u(pi(h.value0)(Qk(_)))});if(h instanceof DS)return v(s)(function(_){return u(pi(h.value0)(Jk(_)))});if(h instanceof em)return v(s)(function(_){return u(pi(h.value0)(Yw(_)))});if(h instanceof CS)return v(s)(function(_){return u(pi(h.value0)(Zw(_)))});if(h instanceof tm)return v(s)(function(_){return u(sr(mS(h.value0))(jw(Ad(_))))});if(h instanceof bS)return v(s)(function(_){return u(sr(mS(h.value0))(Kw(Ad(_))))});if(h instanceof wS)return v(s)(function(_){return u(sr(mS(h.value0))(Qw(Ad(_))))});if(h instanceof SS)return v(s)(function(_){return u(pi(h.value0)(eS(_)))});if(h instanceof nm)return v(s)(function(_){return v(r(lf))(function(m){return i(u(hS(_)(h.value0)(Ug(cf(h.value1)(m)))))(function(){return r(Gg(m))})})});if(h instanceof rm)return v(s)(function(_){return v(r(lf))(function(m){return i(u(_S(_)(h.value0)(Ug(cf(h.value1)(m)))))(function(){return r(Gg(m))})})});if(h instanceof ES)return u(pi(function(_){return h.value0(Yd(_))})(Xv(qv)));if(h instanceof om)return u(pi(function(_){return h.value0(Yd(_))})(Xv(Jv)));if(h instanceof am)return u(pi(function(_){return h.value0(Yd(_))})(Xv(Vv)));if(h instanceof im)return v(s)(function(_){return u(pi(function(m){return h.value1(AE(m))})(Xv(ZJ(_)(h.value0))))});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 32, column 5 - line 34, column 55): "+[h.constructor.name])};return tj(d)(o)}},cm=function(){return mt(new em(um))}(),fo=function(e){return mt(Zv.create(e))};var TS=function(e){var t=jv(e);return function(n){return mt(new im(t(n),um))}},nj=TS(Ok),rj=TS(kk),MS=function(e){return Yv(Zk)(function(t){return gS(function(){if(t instanceof G)return _l(e)(Hn("WebGL Addon unavailable"));if(t instanceof z)return gS(_l(e)(Gt("Loading WebGL ")))(function(){return Yv(nj(t.value0))(function(n){return _l(e)(function(){return Hn(n?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 164, column 3 - line 169, column 67): "+[t.constructor.name])}())(function(){return Yv(Yk)(function(n){if(n instanceof G)return _l(e)(Hn("WebLinks Addon unavailable"));if(n instanceof z)return gS(_l(e)(Gt("Loading WebLinks ")))(function(){return Yv(rj(n.value0))(function(c){return _l(e)(function(){return Hn(c?"OK":"FAILED")}())})});throw new Error("Failed pattern match at Halogen.XTerm.Free (line 171, column 3 - line 176, column 67): "+[n.constructor.name])})})})};var tO=e=>()=>e.dispose();var nO={toDisposable:ye(Ce)},aj=function(e){return e.toDisposable},rO=function(e){return{dispose:function(){var t=aj(e);return function(n){return tO(t(n))}}()}},oO=function(e){return e.dispose};var Dt=ae(kn),FS=ro(Fn),uj=V(yo),sj=eO(Ec)(os),jo=Qn(Fn),Ko=Lt(Ft)(kn),cj=vt(Xt)(Mt),lj=oO(rO(nO)),xS=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),fj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),dj=function(){function e(){}return e.value=new e,e}(),pj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),AS=function(){function e(){}return e.value=new e,e}(),hj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),_j=function(){function e(){}return e.value=new e,e}(),vj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),mj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),gj=function(){function e(){}return e.value=new e,e}(),yj=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),aO=function(){function e(){}return e.value=new e,e}(),iO=function(){function e(){}return e.value=new e,e}(),So=function(){function e(t){this.value0=t}return e.create=function(t){return new e(t)},e}(),Dj=function(e){return function(t){return ou([OI(mw),_s([Ea("terminal")])([])])}},Cj=function(e){var t=Xn(Ih(e));return function(n){return Dt(FS)(function(c){return t(uj(z.create)(sr(sj(n))(c.terminal)))})}},bj=function(e){var t=Je(Er(e.MonadEffect0())),n=function(f){return Dt(t(lr))(function(o){return Dt(t(sS(f)(cr(o.listener)(new So(_j.value)))))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},c=function(f){return Dt(t(lr))(function(o){return Dt(t(dS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(yj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},v=function(f){return Dt(t(lr))(function(o){return Dt(t(fS(f)(cr(o.listener)(new So(gj.value)))))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},s=function(f){return Dt(t(lr))(function(o){return Dt(t(lS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(mj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},a=function(f){return Dt(t(lr))(function(o){return Dt(t(cS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(vj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},p=function(f){return Dt(t(lr))(function(o){return Dt(t(uS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(hj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},u=function(f){return Dt(t(lr))(function(o){return Dt(t(iS(f)(cr(o.listener)(new So(AS.value)))))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},r=function(f){return Dt(t(lr))(function(o){return Dt(t(aS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(pj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},i=function(f){return Dt(t(lr))(function(o){return Dt(t(oS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(xS.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},l=function(f){return Dt(t(lr))(function(o){return Dt(t(rS(f)(function(){var h=cr(o.listener);return function(_){return h(So.create(fj.create(_)))}}())))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})},d=function(f){return Dt(t(lr))(function(o){return Dt(t(nS(f)(cr(o.listener)(new So(dj.value)))))(function(h){return Dt(fr(o.emitter))(function(){return jo(function(_){var m={};for(var y in _)({}).hasOwnProperty.call(_,y)&&(m[y]=_[y]);return m.disposables=yn(h)(_.disposables),m})})})})};return function(f){if(f instanceof aO)return Dt(Wr("terminal"))(function(o){if(o instanceof G)return t(Au("no terminal element"));if(o instanceof z)return Dt(FS)(function(h){return Ko(t(pS(h.terminal)(o.value0)))(function(){return Ko(d(h.terminal))(function(){return Ko(l(h.terminal))(function(){return Ko(r(h.terminal))(function(){return Ko(u(h.terminal))(function(){return Ko(p(h.terminal))(function(){return Ko(n(h.terminal))(function(){return Ko(a(h.terminal))(function(){return Ko(s(h.terminal))(function(){return Ko(v(h.terminal))(function(){return Ko(c(h.terminal))(function(){return i(h.terminal)})})})})})})})})})})})});throw new Error("Failed pattern match at Halogen.XTerm (line 117, column 5 - line 132, column 28): "+[o.constructor.name])});if(f instanceof iO)return Dt(FS)(function(o){return t(cj(lj)(o.disposables))});if(f instanceof So)return _a(f.value0);throw new Error("Failed pattern match at Halogen.XTerm (line 114, column 16 - line 136, column 23): "+[f.constructor.name])}},uO=function(e){return Mr({initialState:function(t){return{terminal:t,disposables:[]}},render:Dj(e),eval:Tr({handleAction:bj(e),handleQuery:Cj(e),receive:sn.receive,initialize:new z(aO.value),finalize:new z(iO.value)})})};var wj=me(jt),dO={reflectSymbol:function(){return"terminal"}},Sj=Ev()(dO)(mr),pO=xg(hs),IS=ae(pO),RS=ht(Wp)(hs),Ej=ps()(dO)(mr),Tj=ee(Zn),cO=V(Ho),Mj=ht(ru),hO=ro(Fn),vl=ee(Ag(hs)),lm=Lt(Ft)(pO),_O=pM(Fn),$S=Qn(_O),Lj=ro(_O),Fj=dM(t0),lO=ae(kn),xj=me(G$),Aj=at(J$),Ij=Qn(Fn),fO=Et(Ho),Rj=ee($u),vO=function(){return tn.value}(),$j=function(e){var t=uO(e);return function(n){return ou(wj([function(){if(n.terminal instanceof G)return ou([]);if(n.terminal instanceof z)return Sj(vO)(void 0)(t)(n.terminal.value0)(ow.create);throw new Error("Failed pattern match at Halogen.XShell (line 49, column 8 - line 51, column 80): "+[n.terminal.constructor.name])}()])(tk(n.windows)))}},mO=function(e){var t=e.MonadEffect0().Monad0(),n=Mj(t),c=ia(Z$(t.Bind1().Apply0().Functor0()))(Fj);return function(v){var s=function(a){if(a instanceof Sd)return IS(RS(Ej(vO)(void 0)(a.value0)))(function(p){return Tj(p)});if(a instanceof Ed)return cO(z.create)(n(a.value0));if(a instanceof Td)return IS(RS(hO))(function(p){return vl(a.value0(p.shell))});if(a instanceof Md)return lm($S(function(p){var u={};for(var r in p)({}).hasOwnProperty.call(p,r)&&(u[r]=p[r]);return u.shell=a.value0,u}))(function(){return vl(a.value1)});if(a instanceof Ld)return lm($S(function(p){var u={};for(var r in p)({}).hasOwnProperty.call(p,r)&&(u[r]=p[r]);return u.interpreter=a.value0,u}))(function(){return vl(a.value1)});if(a instanceof Av)return lm(RS(_a(a.value0)))(function(){return vl(a.value1)});if(a instanceof Fd)return cO(z.create)(a.value0);if(a instanceof Iv)return IS(Lj)(function(p){return vl(a.value0(p.windows))});if(a instanceof xd)return lm($S(function(p){var u={};for(var r in p)({}).hasOwnProperty.call(p,r)&&(u[r]=p[r]);return u.windows=a.value0(p.windows),u}))(function(){return vl(a.value1)});throw new Error("Failed pattern match at Halogen.XShell (line 80, column 5 - line 82, column 22): "+[a.constructor.name])};return lM(c(s)(v))}},kj=function(e){var t=Je(Er(e.MonadEffect0())),n=mO(e);return function(c){if(c instanceof rw)return lO(t(jk(xj(nw(wk)('"Cascadia Code", Menlo, monospace'))(nw(Sk)(!0)))(Aj)))(function(v){return Ij(function(s){var a={};for(var p in s)({}).hasOwnProperty.call(s,p)&&(a[p]=s[p]);return a.terminal=new z(v),a})});if(c instanceof ow)return lO(hO)(function(v){return fO(n(v.interpreter(c.value0)))});if(c instanceof aw)return fO(n(c.value0));throw new Error("Failed pattern match at Halogen.XShell (line 61, column 16 - line 70, column 35): "+[c.constructor.name])}},gO=function(e){return Mr({initialState:function(t){return{shell:t,interpreter:be(Rj(void 0)),terminal:G.value,windows:Ji}},render:$j(e),eval:Tr({handleAction:kj(e),handleQuery:mO(e),receive:sn.receive,initialize:new z(rw.value),finalize:sn.finalize})})};var kS=function(e){return function(t){var n=Zu(t.Profunctor0()),c=gc(t);return function(v){return n(e)(function(s){return s.value1(s.value0)})(c(v))}}};var DO=ee($u),yO=V(It),CO=Lt(Ft),nr=CO(Us),hi=ae(Us),Nj=$o(Kt),Bj=ty(Kt)(Mt),Wj=Ga(Kt),Uj=ye(Ce),Id=CO(Kn),qj=jr(Dr),fm=ae(Kn),zj=_n(Pl)(Dr),Vj=vt(Dr)(zt),bO=vt($u)(zt);var _i={cmd:function(e){return kS(function(t){return new ne(t.command,function(n){return{prompt:t.prompt,command:n,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)},prompt:function(e){return kS(function(t){return new ne(t.prompt,function(n){return{prompt:n,command:t.command,commandEnv:t.commandEnv,foreground:t.foreground}})})(e)}},$d=function(e){var t=Je(pl(e));return function(n){return function(c){return c instanceof xS?n(c.value0):c instanceof AS?t(Au("line feed")):DO(void 0)}}},kd=function(e){return e.prompt},dm=kd(_i)($i),Od=function(e){return e.cmd},wO=Od(_i),Rd=wO(go),SO=wO($i),Gj=function(e){return function(t){return function(n){var c=function(s){var a=`\r
  help\r
    show this help text`,p=function(u){return`\r
  `+(u.name+(`\r
    `+to(`\r
    `)(u.description)))};return a+to("")(yO(p)(s))},v=function(s){return nr(Ot(Hn(c(n))))(function(){return hi(Jr)(function(a){return nr(Ot(Gt(br(a)(dm))))(function(){return mn(Hr(Rd)(""))})})})};return Nj("help")(v)(Bj(yO(function(s){return new ne(s.name,s.cmd)})(n)))}}},pm=function(e){var t=Gj(e);return function(n){var c=t(n);return function(v){var s=c(v);return hi(Jr)(function(a){var p=Cl(function(i){return!ZT(i)})(_g(" ")(br(a)(SO))),u=yp(p);if(u instanceof G)return nr(Ot(Hn("")))(function(){return hi(Jr)(function(i){return nr(Ot(Gt(br(i)(dm))))(function(){return mn(Hr(Rd)(""))})})});if(u instanceof z){var r=Wj(u.value0)(s);if(r instanceof z)return r.value0(tt([])(Uj)(tg(p)));if(r instanceof G)return nr(Ot(Hn(`\r
unrecognised command "`+(u.value0+'" - type "help" to see the available commands'))))(function(){return hi(Jr)(function(i){return nr(Ot(Gt(br(i)(dm))))(function(){return mn(Hr(Rd)(""))})})});throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 199, column 7 - line 206, column 34): "+[r.constructor.name])}throw new Error("Failed pattern match at Halogen.XShell.CommandLine (line 191, column 3 - line 206, column 34): "+[u.constructor.name])})}}};var Jj=function(e){return function(t){var n=Od(t),c=n($i),v=kd(t)($i),s=n(go);return hi(Jr)(function(a){return nr(Ot(fm(sm(kw))(function(p){var u=p===0;return u?Id(Gt("\x1BM"))(function(){return fm(sm(fm(Ow)(function(r){return fm($w(r-1|0))(function(i){return zj(Rw)(i)})})))(function(r){return Id(Gt("\x9BK"))(function(){return Oe(Vj)(r)(function(i){var l=(Ju(br(a)(c))-1|0)<=i;return l?Id(Gt(br(a)(v)))(function(){return Gt(Mp(1)(br(a)(c)))}):Gt(Mp(1)(KT(i)(br(a)(c))))})})})}):qj(Ju(br(a)(c))>0)(Gt("\b \b"))})))(function(){return mn($p(s)(Mp(1)))})})}},Hd=function(e){var t=Jj(e),n=Je(pl(e));return function(c){var v=Od(c)(go),s=kd(c)($i),a=t(c);return function(p){return function(u){return u===""?nr(mn(Hr(v)("")))(function(){return hi(Jr)(function(r){return Ot(Id(Gt("^C"))(function(){return Gt(`\r
`+br(r)(s))}))})}):u==="\r"?p:u==="\x7F"?a:u>=" "&&u<="~"||u>="\xA0"?nr(mn($p(v)(function(r){return r+u})))(function(){return Ot(Gt(u))}):nr(n(Au("non-printable: "+u)))(function(){return DO(void 0)})}}}},jj=function(e){var t=e.MonadEffect0(),n=$d(t),c=Hd(t)(_i),v=pm(e);return function(s){var a=v(s);return hi(Jr)(function(p){return nr(Oe(bO)(p.foreground)(function(u){return u.kill}))(function(){return nr(mn(function(u){return{prompt:u.prompt,command:u.command,commandEnv:u.commandEnv,foreground:G.value}}))(function(){return nr(mn(Hr(Rd)("")))(function(){return hi(Jr)(function(u){return nr(Ot(Id(fo(Jo(!0)))(function(){return Gt(`\r
`+br(u)(dm))})))(function(){return Go(n(c(a(p.commandEnv))))})})})})})})}},Kj=function(e){return hi(Jr)(function(t){return nr(Oe(bO)(t.foreground)(function(n){return n.stdin(br(t)(SO))}))(function(){return nr(Ot(Gt(`\r
`)))(function(){return mn(Hr(Rd)(""))})})})},EO=function(e){var t=e.MonadEffect0(),n=$d(t),c=jj(e),v=Hd(t)(_i),s=Kj(e);return function(a){var p=c(a);return n(function(u){return u===""?nr(Ot(Gt("^C")))(function(){return p}):v(s)(u)})}};var hm=ae(Us),mm=Lt(Ft),Zt=mm(Us),_m=me(Hu),Xj=kd(_i)($i),ml=Od(_i)(go),Yj=Eo(ek),vm=ae(Kn),TO=Fe(ea),Zj=Fe(LE),eK=Fe(Oa),WS=iw(),US={reflectSymbol:function(){return"button"}},tK=WS(US)(mr)(),MO=Et(Y$),xO=uw(),nK=xO(US)(mr)(),qS=sw(),rK=qS(US)(mr)(),gl=mm(Kn),AO={reflectSymbol:function(){return"editor"}},LO=qS(AO)(mr)(),oK=WS(AO)(mr)(),zs=ee($u),aK=V(It),iK=vt($u)(Mt),zS={reflectSymbol:function(){return"canvas"}},OS=WS(zS)(mr)(),HS=qS(zS)(mr)(),Ir=mm(Ta),uK=xO(zS)(mr)(),sK=vt(Ob)(Mt),cK=V(Tt),PS=ae(Sn),lK=gO(Ec),fK=mm(Sn),dK=Et(yo),pK=$d(Ln),hK=Hd(Ln)(_i),_K=pm(Ec)(os);var NS=function(){return tn.value}(),Vs=function(){return tn.value}(),BS=function(){return tn.value}(),IO=function(e){var t=CF(e),n=EO(e),c=e.MonadEffect0(),v=$d(c),s=Hd(c)(_i),a=pm(e),p=VI(e),u=Je(pl(c)),r=Xn(X$(e)),i=jR(e),l=r$(e),d=p$(e);return function(f){var o=n(f),h=a(f),_=p(f),m=i(f),y=l(f),C=d(f),E=hm(Jr)(function(g){return Zt(Ot(Gt(`\r
`+br(g)(Xj))))(function(){return mn(Hr(ml)(""))})}),D=function(g){return be(Yj(g)(E))};return[{name:"rows",description:["prints the number of rows in the terminal"],cmd:D(Ot(vm(cm)(function(){var g=_m(`\r
`);return function(b){return Hn(g(TO(b)))}}())))},{name:"cols",description:["prints the number of columns in the terminal"],cmd:D(Ot(vm(cm)(function(){var g=_m(`\r
`);return function(b){return Hn(g(TO(b)))}}())))},{name:"blinking",description:["prints a boolean indicating whether the cursor is blinking"],cmd:D(Ot(vm(fo(qw))(function(){var g=_m(`\r
`);return function(b){return Hn(g(Zj(b)))}}())))},{name:"blinkon",description:["turns on cursor blinking"],cmd:D(Ot(fo(Jo(!0))))},{name:"blinkoff",description:["turns off cursor blinking"],cmd:D(Ot(fo(Jo(!1))))},{name:"fontFamily",description:["prints the font family of the terminal"],cmd:D(Ot(vm(fo(Uw))(function(){var g=_m(`\r
`);return function(b){return Hn(g(eK(b)))}}())))},{name:"button",description:["creates a button as a subprocess.","the subprocess can be cancelled with ^C","accepts button text as argument.",'clicking the button prints "click!" to the terminal.'],cmd:function(g){return Zt(mn(Hr(ml)("")))(function(){return Zt(tK(BS)(void 0)(t)(to(" ")(g))(be(Ot(Hn("click!")))))(function(){var b={stdin:function(L){return MO(nK(BS)(void 0)(new DF(L,void 0)))},kill:rK(BS)(void 0)};return Zt(mn(function(L){return{prompt:L.prompt,command:L.command,commandEnv:L.commandEnv,foreground:new z(b)}}))(function(){return Zt(Ot(gl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}},{name:"edit",description:["opens a file in the editor as a subprocess.","the subprocess can be cancelled with ^C","accepts the file path as argument."],cmd:function(g){return g.length===1&&Ju(g[0])>0?Zt(mn(Hr(ml)("")))(function(){var b=Zt(LO(NS)(void 0))(function(){return Zt(Ot(Gt("> ")))(function(){return Go(v(s(h(IO(e)(f)))))})});return Zt(oK(NS)(void 0)(_)(g[0])(be(b)))(function(){var L={stdin:be(zs(void 0)),kill:LO(NS)(void 0)};return Zt(mn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(gl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})}):D(Ot(Hn(`\r
this command expects a single file name as its argument`)))(g)}},{name:"ls",description:["lists files in the file system"],cmd:D(hm(u(fd))(function(g){return hm(r(mI(g)))(function(b){return Ot(Hn(`\r
`+to(" ")(aK(function(L){return L})(b))))})}))},{name:"rm",description:["remove files from the file system"],cmd:function(g){return hm(u(fd))(function(b){return Zt(iK(function(L){return r(gI(b)(L))})(g))(function(){return E})})}},{name:"canvas",description:["canvas example"],cmd:function(g){return Zt(mn(Hr(ml)("")))(function(){return Zt(OS(Vs)(void 0)(m)({width:200,height:200})(be(zs(void 0))))(function(){var b={stdin:be(zs(void 0)),kill:HS(Vs)(void 0)},L=Ir(ll(ju(255)(255)(200)))(function(){return Ir(hv({x:0,y:0,width:200,height:200}))(function(){return Ir(ll(ju(0)(0)(0)))(function(){return Hb("hello")({x:50,y:50})})})});return Zt(MO(uK(Vs)(void 0)(L)))(function(){return Zt(mn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(b)}}))(function(){return Zt(Ot(gl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})})}},{name:"animation",description:["canvas animation example"],cmd:function(g){return Zt(mn(Hr(ml)("")))(function(){var b=function(L){return Ir(ll(ju(255)(255)(200)))(function(){return Ir(hv({x:0,y:0,width:200,height:200}))(function(){return Ir(ll(ju(0)(0)(0)))(function(){return Ir(AR({translateX:50,translateY:50}))(function(){return Ir(MR(L/1e3))(function(){return Hb("hello")({x:0,y:0})})})})})})};return Zt(OS(Vs)(void 0)(y)({dimensions:{width:200,height:200},animation:b})(be(zs(void 0))))(function(){var L={stdin:be(zs(void 0)),kill:HS(Vs)(void 0)};return Zt(mn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(gl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}},{name:"sketch",description:["canvas drawing program example"],cmd:function(g){return Zt(mn(Hr(ml)("")))(function(){var b={dimensions:{width:400,height:400},world:{line:G.value,lines:[]},draw:function(L){return Ir(ll(ju(255)(255)(200)))(function(){return Ir(hv({x:0,y:0,width:400,height:400}))(function(){return Ir(FR(ju(0)(0)(0)))(function(){return Ir(LR(5))(function(){return Oe(sK)(tt(L.lines)(Oe(yn)(L.lines))(L.line))(function(S){return Ir(IR)(function(){return Ir(TR(S.value0))(function(){return Ir(ER(S.value1))(function(){return xR})})})})})})})})},input:function(L){return function(S){return function(T){if(L instanceof Cv)return{line:G.value,lines:T.lines};if(L instanceof Dv)return{line:G.value,lines:function(){if(T.line instanceof G)return T.lines;if(T.line instanceof z)return yn(T.line.value0)(T.lines);throw new Error("Failed pattern match at Example (line 217, column 34 - line 219, column 57): "+[T.line.constructor.name])}()};if(L instanceof yv){var M={x:jn(Oh(L.value0))-S.left,y:jn(Hh(L.value0))-S.top};return{line:tt(new z(new ne(M,M)))(z.create)(T.line),lines:T.lines}}if(L instanceof bv){var M={x:jn(Oh(L.value0))-S.left,y:jn(Hh(L.value0))-S.top},w=function(x){return new ne(x.value0,M)};return{line:cK(w)(T.line),lines:T.lines}}return T}}}};return Zt(OS(Vs)(void 0)(C)(b)(be(zs(void 0))))(function(){var L={stdin:be(zs(void 0)),kill:HS(Vs)(void 0)};return Zt(mn(function(S){return{prompt:S.prompt,command:S.command,commandEnv:S.commandEnv,foreground:new z(L)}}))(function(){return Zt(Ot(gl(fo(Jo(!1)))(function(){return Gt(`\r
`)})))(function(){return Go(o)})})})})}}]}},FO=IO(Ec)(os),RO=GR(PS(JR)(function(e){return PS(lf)(function(t){var n={prompt:"> ",command:"",foreground:G.value,commandEnv:FO};return PS(V$(lK)(n)(e))(function(c){return fK(dK(c.query(Zt(Ot(gl(MS(!0))(function(){return Gt("> ")})))(function(){return Go(pK(hK(_K(FO))))}))))(function(){return cf(c.query)(t)})})})}));RO();})();
/*! Bundled license information:

ace-builds/src-noconflict/ace.js:
  (*
  * based on code from:
  *
  * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
  * Available via the MIT or new BSD license.
  * see: http://github.com/jrburke/requirejs for details
  *)
  (*! @license
  ==========================================================================
  SproutCore -- JavaScript Application Framework
  copyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.
  
  Permission is hereby granted, free of charge, to any person obtaining a
  copy of this software and associated documentation files (the "Software"),
  to deal in the Software without restriction, including without limitation
  the rights to use, copy, modify, merge, publish, distribute, sublicense,
  and/or sell copies of the Software, and to permit persons to whom the
  Software is furnished to do so, subject to the following conditions:
  
  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.
  
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
  DEALINGS IN THE SOFTWARE.
  
  SproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.
  
  For more information about SproutCore, visit http://www.sproutcore.com
  
  
  ==========================================================================
  @license *)

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
